/*<script src="${ctxStatic}/org/tinygroup/jquery/js/jquery.1.11.3.min.js"></script>*/
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l="1.11.3",m=function(a,b){return new m.fn.init(a,b)},n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,o=/^-ms-/,p=/-([\da-z])/gi,q=function(a,b){return b.toUpperCase()};m.fn=m.prototype={jquery:l,constructor:m,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=m.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return m.each(this,a,b)},map:function(a){return this.pushStack(m.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},m.extend=m.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||m.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(m.isPlainObject(c)||(b=m.isArray(c)))?(b?(b=!1,f=a&&m.isArray(a)?a:[]):f=a&&m.isPlainObject(a)?a:{},g[d]=m.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},m.extend({expando:"jQuery"+(l+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===m.type(a)},isArray:Array.isArray||function(a){return"array"===m.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!m.isArray(a)&&a-parseFloat(a)+1>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==m.type(a)||a.nodeType||m.isWindow(a))return!1;try{if(a.constructor&&!j.call(a,"constructor")&&!j.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(k.ownLast)for(b in a)return j.call(a,b);for(b in a);return void 0===b||j.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(b){b&&m.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(o,"ms-").replace(p,q)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=r(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(n,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(r(Object(a))?m.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(g)return g.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){var c=+b.length,d=0,e=a.length;while(c>d)a[e++]=b[d++];if(c!==c)while(void 0!==b[d])a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=r(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(f=a[b],b=a,a=f),m.isFunction(a)?(c=d.call(arguments,2),e=function(){return a.apply(b||this,c.concat(d.call(arguments)))},e.guid=a.guid=a.guid||m.guid++,e):void 0},now:function(){return+new Date},support:k}),m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function r(a){var b="length"in a&&a.length,c=m.type(a);return"function"===c||m.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var s=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ha(),z=ha(),A=ha(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N=M.replace("w","w#"),O="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+L+"*\\]",P=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+O+")*)|.*)\\)|)",Q=new RegExp(L+"+","g"),R=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),S=new RegExp("^"+L+"*,"+L+"*"),T=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),U=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),V=new RegExp(P),W=new RegExp("^"+N+"$"),X={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+P),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,aa=/[+~]/,ba=/'|\\/g,ca=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),da=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ea=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(fa){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function ga(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],k=b.nodeType,"string"!=typeof a||!a||1!==k&&9!==k&&11!==k)return d;if(!e&&p){if(11!==k&&(f=_.exec(a)))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return H.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName)return H.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=1!==k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(ba,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--)o[l]=s+ra(o[l]);w=aa.test(a)&&pa(b.parentNode)||b,x=o.join(",")}if(x)try{return H.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function ha(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ia(a){return a[u]=!0,a}function ja(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ka(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function la(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function na(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function oa(a){return ia(function(b){return b=+b,ia(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function pa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=ga.support={},f=ga.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=ga.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=g.documentElement,e=g.defaultView,e&&e!==e.top&&(e.addEventListener?e.addEventListener("unload",ea,!1):e.attachEvent&&e.attachEvent("onunload",ea)),p=!f(g),c.attributes=ja(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ja(function(a){return a.appendChild(g.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(g.getElementsByClassName),c.getById=ja(function(a){return o.appendChild(a).id=u,!g.getElementsByName||!g.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(g.querySelectorAll))&&(ja(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ja(function(a){var b=g.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ja(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",P)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===g||a.ownerDocument===v&&t(v,a)?-1:b===g||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===g?-1:b===g?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return la(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?la(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},g):n},ga.matches=function(a,b){return ga(a,null,null,b)},ga.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return ga(b,n,null,[a]).length>0},ga.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ga.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ga.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ga.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=ga.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=ga.selectors={cacheLength:50,createPseudo:ia,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ca,da),a[3]=(a[3]||a[4]||a[5]||"").replace(ca,da),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ga.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ga.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ca,da).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ga.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(Q," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ga.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ia(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ia(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?ia(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ia(function(a){return function(b){return ga(a,b).length>0}}),contains:ia(function(a){return a=a.replace(ca,da),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ia(function(a){return W.test(a||"")||ga.error("unsupported lang: "+a),a=a.replace(ca,da).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:oa(function(){return[0]}),last:oa(function(a,b){return[b-1]}),eq:oa(function(a,b,c){return[0>c?c+b:c]}),even:oa(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:oa(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:oa(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:oa(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=ma(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=na(b);function qa(){}qa.prototype=d.filters=d.pseudos,d.setFilters=new qa,g=ga.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?ga.error(a):z(a,i).slice(0)};function ra(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function sa(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function ta(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ua(a,b,c){for(var d=0,e=b.length;e>d;d++)ga(a,b[d],c);return c}function va(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function wa(a,b,c,d,e,f){return d&&!d[u]&&(d=wa(d)),e&&!e[u]&&(e=wa(e,f)),ia(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ua(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:va(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=va(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=va(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function xa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=sa(function(a){return a===b},h,!0),l=sa(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[sa(ta(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return wa(i>1&&ta(m),i>1&&ra(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&xa(a.slice(i,e)),f>e&&xa(a=a.slice(e)),f>e&&ra(a))}m.push(c)}return ta(m)}function ya(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++])o(r,s,g,h);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=F.call(i));s=va(s)}H.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&ga.uniqueSort(i)}return k&&(w=v,j=t),r};return c?ia(f):f}return h=ga.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=xa(b[c]),f[u]?d.push(f):e.push(f);f=A(a,ya(e,d)),f.selector=a}return f},i=ga.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(ca,da),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(ca,da),aa.test(j[0].type)&&pa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&ra(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,aa.test(a)&&pa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ja(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ja(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ka("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ja(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ka("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ja(function(a){return null==a.getAttribute("disabled")})||ka(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),ga}(a);m.find=s,m.expr=s.selectors,m.expr[":"]=m.expr.pseudos,m.unique=s.uniqueSort,m.text=s.getText,m.isXMLDoc=s.isXML,m.contains=s.contains;var t=m.expr.match.needsContext,u=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,v=/^.[^:#\[\.,]*$/;function w(a,b,c){if(m.isFunction(b))return m.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return m.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(v.test(b))return m.filter(b,a,c);b=m.filter(b,a)}return m.grep(a,function(a){return m.inArray(a,b)>=0!==c})}m.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?m.find.matchesSelector(d,a)?[d]:[]:m.find.matches(a,m.grep(b,function(a){return 1===a.nodeType}))},m.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(m(a).filter(function(){for(b=0;e>b;b++)if(m.contains(d[b],this))return!0}));for(b=0;e>b;b++)m.find(a,d[b],c);return c=this.pushStack(e>1?m.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(w(this,a||[],!1))},not:function(a){return this.pushStack(w(this,a||[],!0))},is:function(a){return!!w(this,"string"==typeof a&&t.test(a)?m(a):a||[],!1).length}});var x,y=a.document,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=m.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||x).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof m?b[0]:b,m.merge(this,m.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:y,!0)),u.test(c[1])&&m.isPlainObject(b))for(c in b)m.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}if(d=y.getElementById(c[2]),d&&d.parentNode){if(d.id!==c[2])return x.find(a);this.length=1,this[0]=d}return this.context=y,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):m.isFunction(a)?"undefined"!=typeof x.ready?x.ready(a):a(m):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),m.makeArray(a,this))};A.prototype=m.fn,x=m(y);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};m.extend({dir:function(a,b,c){var d=[],e=a[b];while(e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||!m(e).is(c)))1===e.nodeType&&d.push(e),e=e[b];return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),m.fn.extend({has:function(a){var b,c=m(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(m.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=t.test(a)||"string"!=typeof a?m(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&m.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?m.unique(f):f)},index:function(a){return a?"string"==typeof a?m.inArray(this[0],m(a)):m.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(m.unique(m.merge(this.get(),m(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}m.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return m.dir(a,"parentNode")},parentsUntil:function(a,b,c){return m.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return m.dir(a,"nextSibling")},prevAll:function(a){return m.dir(a,"previousSibling")},nextUntil:function(a,b,c){return m.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return m.dir(a,"previousSibling",c)},siblings:function(a){return m.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return m.sibling(a.firstChild)},contents:function(a){return m.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:m.merge([],a.childNodes)}},function(a,b){m.fn[a]=function(c,d){var e=m.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=m.filter(d,e)),this.length>1&&(C[a]||(e=m.unique(e)),B.test(a)&&(e=e.reverse())),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return m.each(a.match(E)||[],function(a,c){b[c]=!0}),b}m.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):m.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(c=a.memory&&l,d=!0,f=g||0,g=0,e=h.length,b=!0;h&&e>f;f++)if(h[f].apply(l[0],l[1])===!1&&a.stopOnFalse){c=!1;break}b=!1,h&&(i?i.length&&j(i.shift()):c?h=[]:k.disable())},k={add:function(){if(h){var d=h.length;!function f(b){m.each(b,function(b,c){var d=m.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),b?e=h.length:c&&(g=d,j(c))}return this},remove:function(){return h&&m.each(arguments,function(a,c){var d;while((d=m.inArray(c,h,d))>-1)h.splice(d,1),b&&(e>=d&&e--,f>=d&&f--)}),this},has:function(a){return a?m.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],e=0,this},disable:function(){return h=i=c=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,c||k.disable(),this},locked:function(){return!i},fireWith:function(a,c){return!h||d&&!i||(c=c||[],c=[a,c.slice?c.slice():c],b?i.push(c):j(c)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!d}};return k},m.extend({Deferred:function(a){var b=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return m.Deferred(function(c){m.each(b,function(b,f){var g=m.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&m.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?m.extend(a,d):d}},e={};return d.pipe=d.then,m.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&m.isFunction(a.promise)?e:0,g=1===f?a:m.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&m.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;m.fn.ready=function(a){return m.ready.promise().done(a),this},m.extend({isReady:!1,readyWait:1,holdReady:function(a){a?m.readyWait++:m.ready(!0)},ready:function(a){if(a===!0?!--m.readyWait:!m.isReady){if(!y.body)return setTimeout(m.ready);m.isReady=!0,a!==!0&&--m.readyWait>0||(H.resolveWith(y,[m]),m.fn.triggerHandler&&(m(y).triggerHandler("ready"),m(y).off("ready")))}}});function I(){y.addEventListener?(y.removeEventListener("DOMContentLoaded",J,!1),a.removeEventListener("load",J,!1)):(y.detachEvent("onreadystatechange",J),a.detachEvent("onload",J))}function J(){(y.addEventListener||"load"===event.type||"complete"===y.readyState)&&(I(),m.ready())}m.ready.promise=function(b){if(!H)if(H=m.Deferred(),"complete"===y.readyState)setTimeout(m.ready);else if(y.addEventListener)y.addEventListener("DOMContentLoaded",J,!1),a.addEventListener("load",J,!1);else{y.attachEvent("onreadystatechange",J),a.attachEvent("onload",J);var c=!1;try{c=null==a.frameElement&&y.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!m.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}I(),m.ready()}}()}return H.promise(b)};var K="undefined",L;for(L in m(k))break;k.ownLast="0"!==L,k.inlineBlockNeedsLayout=!1,m(function(){var a,b,c,d;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",k.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(d))}),function(){var a=y.createElement("div");if(null==k.deleteExpando){k.deleteExpando=!0;try{delete a.test}catch(b){k.deleteExpando=!1}}a=null}(),m.acceptData=function(a){var b=m.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b};var M=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,N=/([A-Z])/g;function O(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(N,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:M.test(c)?m.parseJSON(c):c}catch(e){}m.data(a,b,c)}else c=void 0}return c}function P(a){var b;for(b in a)if(("data"!==b||!m.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;

return!0}function Q(a,b,d,e){if(m.acceptData(a)){var f,g,h=m.expando,i=a.nodeType,j=i?m.cache:a,k=i?a[h]:a[h]&&h;if(k&&j[k]&&(e||j[k].data)||void 0!==d||"string"!=typeof b)return k||(k=i?a[h]=c.pop()||m.guid++:h),j[k]||(j[k]=i?{}:{toJSON:m.noop}),("object"==typeof b||"function"==typeof b)&&(e?j[k]=m.extend(j[k],b):j[k].data=m.extend(j[k].data,b)),g=j[k],e||(g.data||(g.data={}),g=g.data),void 0!==d&&(g[m.camelCase(b)]=d),"string"==typeof b?(f=g[b],null==f&&(f=g[m.camelCase(b)])):f=g,f}}function R(a,b,c){if(m.acceptData(a)){var d,e,f=a.nodeType,g=f?m.cache:a,h=f?a[m.expando]:m.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){m.isArray(b)?b=b.concat(m.map(b,m.camelCase)):b in d?b=[b]:(b=m.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;while(e--)delete d[b[e]];if(c?!P(d):!m.isEmptyObject(d))return}(c||(delete g[h].data,P(g[h])))&&(f?m.cleanData([a],!0):k.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}m.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?m.cache[a[m.expando]]:a[m.expando],!!a&&!P(a)},data:function(a,b,c){return Q(a,b,c)},removeData:function(a,b){return R(a,b)},_data:function(a,b,c){return Q(a,b,c,!0)},_removeData:function(a,b){return R(a,b,!0)}}),m.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=m.data(f),1===f.nodeType&&!m._data(f,"parsedAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=m.camelCase(d.slice(5)),O(f,d,e[d])));m._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){m.data(this,a)}):arguments.length>1?this.each(function(){m.data(this,a,b)}):f?O(f,a,m.data(f,a)):void 0},removeData:function(a){return this.each(function(){m.removeData(this,a)})}}),m.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=m._data(a,b),c&&(!d||m.isArray(c)?d=m._data(a,b,m.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=m.queue(a,b),d=c.length,e=c.shift(),f=m._queueHooks(a,b),g=function(){m.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return m._data(a,c)||m._data(a,c,{empty:m.Callbacks("once memory").add(function(){m._removeData(a,b+"queue"),m._removeData(a,c)})})}}),m.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?m.queue(this[0],a):void 0===b?this:this.each(function(){var c=m.queue(this,a,b);m._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&m.dequeue(this,a)})},dequeue:function(a){return this.each(function(){m.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=m.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=m._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var S=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=["Top","Right","Bottom","Left"],U=function(a,b){return a=b||a,"none"===m.css(a,"display")||!m.contains(a.ownerDocument,a)},V=m.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===m.type(c)){e=!0;for(h in c)m.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,m.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(m(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},W=/^(?:checkbox|radio)$/i;!function(){var a=y.createElement("input"),b=y.createElement("div"),c=y.createDocumentFragment();if(b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",k.leadingWhitespace=3===b.firstChild.nodeType,k.tbody=!b.getElementsByTagName("tbody").length,k.htmlSerialize=!!b.getElementsByTagName("link").length,k.html5Clone="<:nav></:nav>"!==y.createElement("nav").cloneNode(!0).outerHTML,a.type="checkbox",a.checked=!0,c.appendChild(a),k.appendChecked=a.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,c.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,k.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){k.noCloneEvent=!1}),b.cloneNode(!0).click()),null==k.deleteExpando){k.deleteExpando=!0;try{delete b.test}catch(d){k.deleteExpando=!1}}}(),function(){var b,c,d=y.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(k[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),k[b+"Bubbles"]=d.attributes[c].expando===!1);d=null}();var X=/^(?:input|select|textarea)$/i,Y=/^key/,Z=/^(?:mouse|pointer|contextmenu)|click/,$=/^(?:focusinfocus|focusoutblur)$/,_=/^([^.]*)(?:\.(.+)|)$/;function aa(){return!0}function ba(){return!1}function ca(){try{return y.activeElement}catch(a){}}m.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m._data(a);if(r){c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=m.guid++),(g=r.events)||(g=r.events={}),(k=r.handle)||(k=r.handle=function(a){return typeof m===K||a&&m.event.triggered===a.type?void 0:m.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(E)||[""],h=b.length;while(h--)f=_.exec(b[h])||[],o=q=f[1],p=(f[2]||"").split(".").sort(),o&&(j=m.event.special[o]||{},o=(e?j.delegateType:j.bindType)||o,j=m.event.special[o]||{},l=m.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&m.expr.match.needsContext.test(e),namespace:p.join(".")},i),(n=g[o])||(n=g[o]=[],n.delegateCount=0,j.setup&&j.setup.call(a,d,p,k)!==!1||(a.addEventListener?a.addEventListener(o,k,!1):a.attachEvent&&a.attachEvent("on"+o,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?n.splice(n.delegateCount++,0,l):n.push(l),m.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m.hasData(a)&&m._data(a);if(r&&(k=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=_.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=m.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,n=k[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=n.length;while(f--)g=n[f],!e&&q!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(n.splice(f,1),g.selector&&n.delegateCount--,l.remove&&l.remove.call(a,g));i&&!n.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||m.removeEvent(a,o,r.handle),delete k[o])}else for(o in k)m.event.remove(a,o+b[j],c,d,!0);m.isEmptyObject(k)&&(delete r.handle,m._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,l,n,o=[d||y],p=j.call(b,"type")?b.type:b,q=j.call(b,"namespace")?b.namespace.split("."):[];if(h=l=d=d||y,3!==d.nodeType&&8!==d.nodeType&&!$.test(p+m.event.triggered)&&(p.indexOf(".")>=0&&(q=p.split("."),p=q.shift(),q.sort()),g=p.indexOf(":")<0&&"on"+p,b=b[m.expando]?b:new m.Event(p,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=q.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:m.makeArray(c,[b]),k=m.event.special[p]||{},e||!k.trigger||k.trigger.apply(d,c)!==!1)){if(!e&&!k.noBubble&&!m.isWindow(d)){for(i=k.delegateType||p,$.test(i+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),l=h;l===(d.ownerDocument||y)&&o.push(l.defaultView||l.parentWindow||a)}n=0;while((h=o[n++])&&!b.isPropagationStopped())b.type=n>1?i:k.bindType||p,f=(m._data(h,"events")||{})[b.type]&&m._data(h,"handle"),f&&f.apply(h,c),f=g&&h[g],f&&f.apply&&m.acceptData(h)&&(b.result=f.apply(h,c),b.result===!1&&b.preventDefault());if(b.type=p,!e&&!b.isDefaultPrevented()&&(!k._default||k._default.apply(o.pop(),c)===!1)&&m.acceptData(d)&&g&&d[p]&&!m.isWindow(d)){l=d[g],l&&(d[g]=null),m.event.triggered=p;try{d[p]()}catch(r){}m.event.triggered=void 0,l&&(d[g]=l)}return b.result}},dispatch:function(a){a=m.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(m._data(this,"events")||{})[a.type]||[],k=m.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=m.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,g=0;while((e=f.handlers[g++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,c=((m.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),void 0!==c&&(a.result=c)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(e=[],f=0;h>f;f++)d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?m(c,this).index(i)>=0:m.find(c,this,null,[i]).length),e[c]&&e.push(d);e.length&&g.push({elem:i,handlers:e})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[m.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=Z.test(e)?this.mouseHooks:Y.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new m.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||y),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||y,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ca()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===ca()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return m.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return m.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=m.extend(new m.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?m.event.trigger(e,null,b):m.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},m.removeEvent=y.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===K&&(a[d]=null),a.detachEvent(d,c))},m.Event=function(a,b){return this instanceof m.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?aa:ba):this.type=a,b&&m.extend(this,b),this.timeStamp=a&&a.timeStamp||m.now(),void(this[m.expando]=!0)):new m.Event(a,b)},m.Event.prototype={isDefaultPrevented:ba,isPropagationStopped:ba,isImmediatePropagationStopped:ba,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=aa,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=aa,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=aa,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){m.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!m.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.submitBubbles||(m.event.special.submit={setup:function(){return m.nodeName(this,"form")?!1:void m.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=m.nodeName(b,"input")||m.nodeName(b,"button")?b.form:void 0;c&&!m._data(c,"submitBubbles")&&(m.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),m._data(c,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&m.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return m.nodeName(this,"form")?!1:void m.event.remove(this,"._submit")}}),k.changeBubbles||(m.event.special.change={setup:function(){return X.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(m.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),m.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),m.event.simulate("change",this,a,!0)})),!1):void m.event.add(this,"beforeactivate._change",function(a){var b=a.target;X.test(b.nodeName)&&!m._data(b,"changeBubbles")&&(m.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||m.event.simulate("change",this.parentNode,a,!0)}),m._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return m.event.remove(this,"._change"),!X.test(this.nodeName)}}),k.focusinBubbles||m.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){m.event.simulate(b,a.target,m.event.fix(a),!0)};m.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=m._data(d,b);e||d.addEventListener(a,c,!0),m._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=m._data(d,b)-1;e?m._data(d,b,e):(d.removeEventListener(a,c,!0),m._removeData(d,b))}}}),m.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a)this.on(f,b,c,a[f],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=ba;else if(!d)return this;return 1===e&&(g=d,d=function(a){return m().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=m.guid++)),this.each(function(){m.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,m(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=ba),this.each(function(){m.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){m.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?m.event.trigger(a,b,c,!0):void 0}});function da(a){var b=ea.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}var ea="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",fa=/ jQuery\d+="(?:null|\d+)"/g,ga=new RegExp("<(?:"+ea+")[\\s/>]","i"),ha=/^\s+/,ia=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ja=/<([\w:]+)/,ka=/<tbody/i,la=/<|&#?\w+;/,ma=/<(?:script|style|link)/i,na=/checked\s*(?:[^=]|=\s*.checked.)/i,oa=/^$|\/(?:java|ecma)script/i,pa=/^true\/(.*)/,qa=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ra={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:k.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},sa=da(y),ta=sa.appendChild(y.createElement("div"));ra.optgroup=ra.option,ra.tbody=ra.tfoot=ra.colgroup=ra.caption=ra.thead,ra.th=ra.td;function ua(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==K?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==K?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||m.nodeName(d,b)?f.push(d):m.merge(f,ua(d,b));return void 0===b||b&&m.nodeName(a,b)?m.merge([a],f):f}function va(a){W.test(a.type)&&(a.defaultChecked=a.checked)}function wa(a,b){return m.nodeName(a,"table")&&m.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function xa(a){return a.type=(null!==m.find.attr(a,"type"))+"/"+a.type,a}function ya(a){var b=pa.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function za(a,b){for(var c,d=0;null!=(c=a[d]);d++)m._data(c,"globalEval",!b||m._data(b[d],"globalEval"))}function Aa(a,b){if(1===b.nodeType&&m.hasData(a)){var c,d,e,f=m._data(a),g=m._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)m.event.add(b,c,h[c][d])}g.data&&(g.data=m.extend({},g.data))}}function Ba(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!k.noCloneEvent&&b[m.expando]){e=m._data(b);for(d in e.events)m.removeEvent(b,d,e.handle);b.removeAttribute(m.expando)}"script"===c&&b.text!==a.text?(xa(b).text=a.text,ya(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),k.html5Clone&&a.innerHTML&&!m.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&W.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}m.extend({clone:function(a,b,c){var d,e,f,g,h,i=m.contains(a.ownerDocument,a);if(k.html5Clone||m.isXMLDoc(a)||!ga.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(ta.innerHTML=a.outerHTML,ta.removeChild(f=ta.firstChild)),!(k.noCloneEvent&&k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||m.isXMLDoc(a)))for(d=ua(f),h=ua(a),g=0;null!=(e=h[g]);++g)d[g]&&Ba(e,d[g]);if(b)if(c)for(h=h||ua(a),d=d||ua(f),g=0;null!=(e=h[g]);g++)Aa(e,d[g]);else Aa(a,f);return d=ua(f,"script"),d.length>0&&za(d,!i&&ua(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,l,n=a.length,o=da(b),p=[],q=0;n>q;q++)if(f=a[q],f||0===f)if("object"===m.type(f))m.merge(p,f.nodeType?[f]:f);else if(la.test(f)){h=h||o.appendChild(b.createElement("div")),i=(ja.exec(f)||["",""])[1].toLowerCase(),l=ra[i]||ra._default,h.innerHTML=l[1]+f.replace(ia,"<$1></$2>")+l[2],e=l[0];while(e--)h=h.lastChild;if(!k.leadingWhitespace&&ha.test(f)&&p.push(b.createTextNode(ha.exec(f)[0])),!k.tbody){f="table"!==i||ka.test(f)?"<table>"!==l[1]||ka.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;while(e--)m.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j)}m.merge(p,h.childNodes),h.textContent="";while(h.firstChild)h.removeChild(h.firstChild);h=o.lastChild}else p.push(b.createTextNode(f));h&&o.removeChild(h),k.appendChecked||m.grep(ua(p,"input"),va),q=0;while(f=p[q++])if((!d||-1===m.inArray(f,d))&&(g=m.contains(f.ownerDocument,f),h=ua(o.appendChild(f),"script"),g&&za(h),c)){e=0;while(f=h[e++])oa.test(f.type||"")&&c.push(f)}return h=null,o},cleanData:function(a,b){for(var d,e,f,g,h=0,i=m.expando,j=m.cache,l=k.deleteExpando,n=m.event.special;null!=(d=a[h]);h++)if((b||m.acceptData(d))&&(f=d[i],g=f&&j[f])){if(g.events)for(e in g.events)n[e]?m.event.remove(d,e):m.removeEvent(d,e,g.handle);j[f]&&(delete j[f],l?delete d[i]:typeof d.removeAttribute!==K?d.removeAttribute(i):d[i]=null,c.push(f))}}}),m.fn.extend({text:function(a){return V(this,function(a){return void 0===a?m.text(this):this.empty().append((this[0]&&this[0].ownerDocument||y).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wa(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wa(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?m.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||m.cleanData(ua(c)),c.parentNode&&(b&&m.contains(c.ownerDocument,c)&&za(ua(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){1===a.nodeType&&m.cleanData(ua(a,!1));while(a.firstChild)a.removeChild(a.firstChild);a.options&&m.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return m.clone(this,a,b)})},html:function(a){return V(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(fa,""):void 0;if(!("string"!=typeof a||ma.test(a)||!k.htmlSerialize&&ga.test(a)||!k.leadingWhitespace&&ha.test(a)||ra[(ja.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(ia,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(m.cleanData(ua(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,m.cleanData(ua(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,n=this,o=l-1,p=a[0],q=m.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&na.test(p))return this.each(function(c){var d=n.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(i=m.buildFragment(a,this[0].ownerDocument,!1,this),c=i.firstChild,1===i.childNodes.length&&(i=c),c)){for(g=m.map(ua(i,"script"),xa),f=g.length;l>j;j++)d=i,j!==o&&(d=m.clone(d,!0,!0),f&&m.merge(g,ua(d,"script"))),b.call(this[j],d,j);if(f)for(h=g[g.length-1].ownerDocument,m.map(g,ya),j=0;f>j;j++)d=g[j],oa.test(d.type||"")&&!m._data(d,"globalEval")&&m.contains(h,d)&&(d.src?m._evalUrl&&m._evalUrl(d.src):m.globalEval((d.text||d.textContent||d.innerHTML||"").replace(qa,"")));i=c=null}return this}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){m.fn[a]=function(a){for(var c,d=0,e=[],g=m(a),h=g.length-1;h>=d;d++)c=d===h?this:this.clone(!0),m(g[d])[b](c),f.apply(e,c.get());return this.pushStack(e)}});var Ca,Da={};function Ea(b,c){var d,e=m(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:m.css(e[0],"display");return e.detach(),f}function Fa(a){var b=y,c=Da[a];return c||(c=Ea(a,b),"none"!==c&&c||(Ca=(Ca||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(Ca[0].contentWindow||Ca[0].contentDocument).document,b.write(),b.close(),c=Ea(a,b),Ca.detach()),Da[a]=c),c}!function(){var a;k.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var b,c,d;return c=y.getElementsByTagName("body")[0],c&&c.style?(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(y.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(d),a):void 0}}();var Ga=/^margin/,Ha=new RegExp("^("+S+")(?!px)[a-z%]+$","i"),Ia,Ja,Ka=/^(top|right|bottom|left)$/;a.getComputedStyle?(Ia=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)},Ja=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ia(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||m.contains(a.ownerDocument,a)||(g=m.style(a,b)),Ha.test(g)&&Ga.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):y.documentElement.currentStyle&&(Ia=function(a){return a.currentStyle},Ja=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ia(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),Ha.test(g)&&!Ka.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"});function La(a,b){return{get:function(){var c=a();if(null!=c)return c?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d,e,f,g,h;if(b=y.createElement("div"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=d&&d.style){c.cssText="float:left;opacity:.5",k.opacity="0.5"===c.opacity,k.cssFloat=!!c.cssFloat,b.style.backgroundClip="content-box",b.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===b.style.backgroundClip,k.boxSizing=""===c.boxSizing||""===c.MozBoxSizing||""===c.WebkitBoxSizing,m.extend(k,{reliableHiddenOffsets:function(){return null==g&&i(),g},boxSizingReliable:function(){return null==f&&i(),f},pixelPosition:function(){return null==e&&i(),e},reliableMarginRight:function(){return null==h&&i(),h}});function i(){var b,c,d,i;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),b.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",e=f=!1,h=!0,a.getComputedStyle&&(e="1%"!==(a.getComputedStyle(b,null)||{}).top,f="4px"===(a.getComputedStyle(b,null)||{width:"4px"}).width,i=b.appendChild(y.createElement("div")),i.style.cssText=b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",b.style.width="1px",h=!parseFloat((a.getComputedStyle(i,null)||{}).marginRight),b.removeChild(i)),b.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=b.getElementsByTagName("td"),i[0].style.cssText="margin:0;border:0;padding:0;display:none",g=0===i[0].offsetHeight,g&&(i[0].style.display="",i[1].style.display="none",g=0===i[0].offsetHeight),c.removeChild(d))}}}(),m.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var Ma=/alpha\([^)]*\)/i,Na=/opacity\s*=\s*([^)]*)/,Oa=/^(none|table(?!-c[ea]).+)/,Pa=new RegExp("^("+S+")(.*)$","i"),Qa=new RegExp("^([+-])=("+S+")","i"),Ra={position:"absolute",visibility:"hidden",display:"block"},Sa={letterSpacing:"0",fontWeight:"400"},Ta=["Webkit","O","Moz","ms"];function Ua(a,b){if(b in a)return b;var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=Ta.length;while(e--)if(b=Ta[e]+c,b in a)return b;return d}function Va(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=m._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&U(d)&&(f[g]=m._data(d,"olddisplay",Fa(d.nodeName)))):(e=U(d),(c&&"none"!==c||!e)&&m._data(d,"olddisplay",e?c:m.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function Wa(a,b,c){var d=Pa.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Xa(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=m.css(a,c+T[f],!0,e)),d?("content"===c&&(g-=m.css(a,"padding"+T[f],!0,e)),"margin"!==c&&(g-=m.css(a,"border"+T[f]+"Width",!0,e))):(g+=m.css(a,"padding"+T[f],!0,e),"padding"!==c&&(g+=m.css(a,"border"+T[f]+"Width",!0,e)));return g}function Ya(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ia(a),g=k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Ja(a,b,f),(0>e||null==e)&&(e=a.style[b]),Ha.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Xa(a,b,c||(g?"border":"content"),d,f)+"px"}m.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Ja(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":k.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=m.camelCase(b),i=a.style;if(b=m.cssProps[h]||(m.cssProps[h]=Ua(i,h)),g=m.cssHooks[b]||m.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=Qa.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(m.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||m.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=m.camelCase(b);return b=m.cssProps[h]||(m.cssProps[h]=Ua(a.style,h)),g=m.cssHooks[b]||m.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=Ja(a,b,d)),"normal"===f&&b in Sa&&(f=Sa[b]),""===c||c?(e=parseFloat(f),c===!0||m.isNumeric(e)?e||0:f):f}}),m.each(["height","width"],function(a,b){m.cssHooks[b]={get:function(a,c,d){return c?Oa.test(m.css(a,"display"))&&0===a.offsetWidth?m.swap(a,Ra,function(){return Ya(a,b,d)}):Ya(a,b,d):void 0},set:function(a,c,d){var e=d&&Ia(a);return Wa(a,c,d?Xa(a,b,d,k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,e),e):0)}}}),k.opacity||(m.cssHooks.opacity={get:function(a,b){return Na.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=m.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===m.trim(f.replace(Ma,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Ma.test(f)?f.replace(Ma,e):f+" "+e)}}),m.cssHooks.marginRight=La(k.reliableMarginRight,function(a,b){return b?m.swap(a,{display:"inline-block"},Ja,[a,"marginRight"]):void 0}),m.each({margin:"",padding:"",border:"Width"},function(a,b){m.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+T[d]+b]=f[d]||f[d-2]||f[0];return e}},Ga.test(a)||(m.cssHooks[a+b].set=Wa)}),m.fn.extend({css:function(a,b){return V(this,function(a,b,c){var d,e,f={},g=0;if(m.isArray(b)){for(d=Ia(a),e=b.length;e>g;g++)f[b[g]]=m.css(a,b[g],!1,d);return f}return void 0!==c?m.style(a,b,c):m.css(a,b)},a,b,arguments.length>1)},show:function(){return Va(this,!0)},hide:function(){return Va(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){U(this)?m(this).show():m(this).hide()})}});function Za(a,b,c,d,e){
return new Za.prototype.init(a,b,c,d,e)}m.Tween=Za,Za.prototype={constructor:Za,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(m.cssNumber[c]?"":"px")},cur:function(){var a=Za.propHooks[this.prop];return a&&a.get?a.get(this):Za.propHooks._default.get(this)},run:function(a){var b,c=Za.propHooks[this.prop];return this.options.duration?this.pos=b=m.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Za.propHooks._default.set(this),this}},Za.prototype.init.prototype=Za.prototype,Za.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=m.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){m.fx.step[a.prop]?m.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[m.cssProps[a.prop]]||m.cssHooks[a.prop])?m.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Za.propHooks.scrollTop=Za.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},m.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},m.fx=Za.prototype.init,m.fx.step={};var $a,_a,ab=/^(?:toggle|show|hide)$/,bb=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),cb=/queueHooks$/,db=[ib],eb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=bb.exec(b),f=e&&e[3]||(m.cssNumber[a]?"":"px"),g=(m.cssNumber[a]||"px"!==f&&+d)&&bb.exec(m.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,m.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function fb(){return setTimeout(function(){$a=void 0}),$a=m.now()}function gb(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=T[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function hb(a,b,c){for(var d,e=(eb[b]||[]).concat(eb["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function ib(a,b,c){var d,e,f,g,h,i,j,l,n=this,o={},p=a.style,q=a.nodeType&&U(a),r=m._data(a,"fxshow");c.queue||(h=m._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,n.always(function(){n.always(function(){h.unqueued--,m.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],j=m.css(a,"display"),l="none"===j?m._data(a,"olddisplay")||Fa(a.nodeName):j,"inline"===l&&"none"===m.css(a,"float")&&(k.inlineBlockNeedsLayout&&"inline"!==Fa(a.nodeName)?p.zoom=1:p.display="inline-block")),c.overflow&&(p.overflow="hidden",k.shrinkWrapBlocks()||n.always(function(){p.overflow=c.overflow[0],p.overflowX=c.overflow[1],p.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],ab.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;q=!0}o[d]=r&&r[d]||m.style(a,d)}else j=void 0;if(m.isEmptyObject(o))"inline"===("none"===j?Fa(a.nodeName):j)&&(p.display=j);else{r?"hidden"in r&&(q=r.hidden):r=m._data(a,"fxshow",{}),f&&(r.hidden=!q),q?m(a).show():n.done(function(){m(a).hide()}),n.done(function(){var b;m._removeData(a,"fxshow");for(b in o)m.style(a,b,o[b])});for(d in o)g=hb(q?r[d]:0,d,n),d in r||(r[d]=g.start,q&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function jb(a,b){var c,d,e,f,g;for(c in a)if(d=m.camelCase(c),e=b[d],f=a[c],m.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=m.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function kb(a,b,c){var d,e,f=0,g=db.length,h=m.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=$a||fb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:m.extend({},b),opts:m.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:$a||fb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=m.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(jb(k,j.opts.specialEasing);g>f;f++)if(d=db[f].call(j,a,k,j.opts))return d;return m.map(k,hb,j),m.isFunction(j.opts.start)&&j.opts.start.call(a,j),m.fx.timer(m.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}m.Animation=m.extend(kb,{tweener:function(a,b){m.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],eb[c]=eb[c]||[],eb[c].unshift(b)},prefilter:function(a,b){b?db.unshift(a):db.push(a)}}),m.speed=function(a,b,c){var d=a&&"object"==typeof a?m.extend({},a):{complete:c||!c&&b||m.isFunction(a)&&a,duration:a,easing:c&&b||b&&!m.isFunction(b)&&b};return d.duration=m.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in m.fx.speeds?m.fx.speeds[d.duration]:m.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){m.isFunction(d.old)&&d.old.call(this),d.queue&&m.dequeue(this,d.queue)},d},m.fn.extend({fadeTo:function(a,b,c,d){return this.filter(U).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=m.isEmptyObject(a),f=m.speed(b,c,d),g=function(){var b=kb(this,m.extend({},a),f);(e||m._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=m.timers,g=m._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&cb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&m.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=m._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=m.timers,g=d?d.length:0;for(c.finish=!0,m.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),m.each(["toggle","show","hide"],function(a,b){var c=m.fn[b];m.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(gb(b,!0),a,d,e)}}),m.each({slideDown:gb("show"),slideUp:gb("hide"),slideToggle:gb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){m.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),m.timers=[],m.fx.tick=function(){var a,b=m.timers,c=0;for($a=m.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||m.fx.stop(),$a=void 0},m.fx.timer=function(a){m.timers.push(a),a()?m.fx.start():m.timers.pop()},m.fx.interval=13,m.fx.start=function(){_a||(_a=setInterval(m.fx.tick,m.fx.interval))},m.fx.stop=function(){clearInterval(_a),_a=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(a,b){return a=m.fx?m.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e;b=y.createElement("div"),b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=y.createElement("select"),e=c.appendChild(y.createElement("option")),a=b.getElementsByTagName("input")[0],d.style.cssText="top:1px",k.getSetAttribute="t"!==b.className,k.style=/top/.test(d.getAttribute("style")),k.hrefNormalized="/a"===d.getAttribute("href"),k.checkOn=!!a.value,k.optSelected=e.selected,k.enctype=!!y.createElement("form").enctype,c.disabled=!0,k.optDisabled=!e.disabled,a=y.createElement("input"),a.setAttribute("value",""),k.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),k.radioValue="t"===a.value}();var lb=/\r/g;m.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=m.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,m(this).val()):a,null==e?e="":"number"==typeof e?e+="":m.isArray(e)&&(e=m.map(e,function(a){return null==a?"":a+""})),b=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=m.valHooks[e.type]||m.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(lb,""):null==c?"":c)}}}),m.extend({valHooks:{option:{get:function(a){var b=m.find.attr(a,"value");return null!=b?b:m.trim(m.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&m.nodeName(c.parentNode,"optgroup"))){if(b=m(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=m.makeArray(b),g=e.length;while(g--)if(d=e[g],m.inArray(m.valHooks.option.get(d),f)>=0)try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(a,b){return m.isArray(b)?a.checked=m.inArray(m(a).val(),b)>=0:void 0}},k.checkOn||(m.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var mb,nb,ob=m.expr.attrHandle,pb=/^(?:checked|selected)$/i,qb=k.getSetAttribute,rb=k.input;m.fn.extend({attr:function(a,b){return V(this,m.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){m.removeAttr(this,a)})}}),m.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===K?m.prop(a,b,c):(1===f&&m.isXMLDoc(a)||(b=b.toLowerCase(),d=m.attrHooks[b]||(m.expr.match.bool.test(b)?nb:mb)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=m.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void m.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=m.propFix[c]||c,m.expr.match.bool.test(c)?rb&&qb||!pb.test(c)?a[d]=!1:a[m.camelCase("default-"+c)]=a[d]=!1:m.attr(a,c,""),a.removeAttribute(qb?c:d)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&m.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),nb={set:function(a,b,c){return b===!1?m.removeAttr(a,c):rb&&qb||!pb.test(c)?a.setAttribute(!qb&&m.propFix[c]||c,c):a[m.camelCase("default-"+c)]=a[c]=!0,c}},m.each(m.expr.match.bool.source.match(/\w+/g),function(a,b){var c=ob[b]||m.find.attr;ob[b]=rb&&qb||!pb.test(b)?function(a,b,d){var e,f;return d||(f=ob[b],ob[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,ob[b]=f),e}:function(a,b,c){return c?void 0:a[m.camelCase("default-"+b)]?b.toLowerCase():null}}),rb&&qb||(m.attrHooks.value={set:function(a,b,c){return m.nodeName(a,"input")?void(a.defaultValue=b):mb&&mb.set(a,b,c)}}),qb||(mb={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},ob.id=ob.name=ob.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},m.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:mb.set},m.attrHooks.contenteditable={set:function(a,b,c){mb.set(a,""===b?!1:b,c)}},m.each(["width","height"],function(a,b){m.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),k.style||(m.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var sb=/^(?:input|select|textarea|button|object)$/i,tb=/^(?:a|area)$/i;m.fn.extend({prop:function(a,b){return V(this,m.prop,a,b,arguments.length>1)},removeProp:function(a){return a=m.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),m.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!m.isXMLDoc(a),f&&(b=m.propFix[b]||b,e=m.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=m.find.attr(a,"tabindex");return b?parseInt(b,10):sb.test(a.nodeName)||tb.test(a.nodeName)&&a.href?0:-1}}}}),k.hrefNormalized||m.each(["href","src"],function(a,b){m.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),k.optSelected||(m.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){m.propFix[this.toLowerCase()]=this}),k.enctype||(m.propFix.enctype="encoding");var ub=/[\t\r\n\f]/g;m.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(m.isFunction(a))return this.each(function(b){m(this).addClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(E)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ub," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=m.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;if(m.isFunction(a))return this.each(function(b){m(this).removeClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(E)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ub," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?m.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(m.isFunction(a)?function(c){m(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=m(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===K||"boolean"===c)&&(this.className&&m._data(this,"__className__",this.className),this.className=this.className||a===!1?"":m._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ub," ").indexOf(b)>=0)return!0;return!1}}),m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){m.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),m.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var vb=m.now(),wb=/\?/,xb=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;m.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=m.trim(b+"");return e&&!m.trim(e.replace(xb,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():m.error("Invalid JSON: "+b)},m.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+b),c};var yb,zb,Ab=/#.*$/,Bb=/([?&])_=[^&]*/,Cb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Db=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Eb=/^(?:GET|HEAD)$/,Fb=/^\/\//,Gb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Hb={},Ib={},Jb="*/".concat("*");try{zb=location.href}catch(Kb){zb=y.createElement("a"),zb.href="",zb=zb.href}yb=Gb.exec(zb.toLowerCase())||[];function Lb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(m.isFunction(c))while(d=f[e++])"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Mb(a,b,c,d){var e={},f=a===Ib;function g(h){var i;return e[h]=!0,m.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Nb(a,b){var c,d,e=m.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&m.extend(!0,a,c),a}function Ob(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Pb(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:zb,type:"GET",isLocal:Db.test(yb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Jb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Nb(Nb(a,m.ajaxSettings),b):Nb(m.ajaxSettings,a)},ajaxPrefilter:Lb(Hb),ajaxTransport:Lb(Ib),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=m.ajaxSetup({},b),l=k.context||k,n=k.context&&(l.nodeType||l.jquery)?m(l):m.event,o=m.Deferred(),p=m.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!j){j={};while(b=Cb.exec(f))j[b[1].toLowerCase()]=b[2]}b=j[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return i&&i.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||zb)+"").replace(Ab,"").replace(Fb,yb[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=m.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(c=Gb.exec(k.url.toLowerCase()),k.crossDomain=!(!c||c[1]===yb[1]&&c[2]===yb[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(yb[3]||("http:"===yb[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=m.param(k.data,k.traditional)),Mb(Hb,k,b,v),2===t)return v;h=m.event&&k.global,h&&0===m.active++&&m.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!Eb.test(k.type),e=k.url,k.hasContent||(k.data&&(e=k.url+=(wb.test(e)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=Bb.test(e)?e.replace(Bb,"$1_="+vb++):e+(wb.test(e)?"&":"?")+"_="+vb++)),k.ifModified&&(m.lastModified[e]&&v.setRequestHeader("If-Modified-Since",m.lastModified[e]),m.etag[e]&&v.setRequestHeader("If-None-Match",m.etag[e])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+Jb+"; q=0.01":""):k.accepts["*"]);for(d in k.headers)v.setRequestHeader(d,k.headers[d]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(d in{success:1,error:1,complete:1})v[d](k[d]);if(i=Mb(Ib,k,b,v)){v.readyState=1,h&&n.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,i.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,c,d){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),i=void 0,f=d||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,c&&(u=Ob(k,v,c)),u=Pb(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(m.lastModified[e]=w),w=v.getResponseHeader("etag"),w&&(m.etag[e]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,h&&n.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),h&&(n.trigger("ajaxComplete",[v,k]),--m.active||m.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return m.get(a,b,c,"json")},getScript:function(a,b){return m.get(a,void 0,b,"script")}}),m.each(["get","post"],function(a,b){m[b]=function(a,c,d,e){return m.isFunction(c)&&(e=e||d,d=c,c=void 0),m.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),m._evalUrl=function(a){return m.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},m.fn.extend({wrapAll:function(a){if(m.isFunction(a))return this.each(function(b){m(this).wrapAll(a.call(this,b))});if(this[0]){var b=m(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&1===a.firstChild.nodeType)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return this.each(m.isFunction(a)?function(b){m(this).wrapInner(a.call(this,b))}:function(){var b=m(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=m.isFunction(a);return this.each(function(c){m(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)}).end()}}),m.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!k.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||m.css(a,"display"))},m.expr.filters.visible=function(a){return!m.expr.filters.hidden(a)};var Qb=/%20/g,Rb=/\[\]$/,Sb=/\r?\n/g,Tb=/^(?:submit|button|image|reset|file)$/i,Ub=/^(?:input|select|textarea|keygen)/i;function Vb(a,b,c,d){var e;if(m.isArray(b))m.each(b,function(b,e){c||Rb.test(a)?d(a,e):Vb(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==m.type(b))d(a,b);else for(e in b)Vb(a+"["+e+"]",b[e],c,d)}m.param=function(a,b){var c,d=[],e=function(a,b){b=m.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=m.ajaxSettings&&m.ajaxSettings.traditional),m.isArray(a)||a.jquery&&!m.isPlainObject(a))m.each(a,function(){e(this.name,this.value)});else for(c in a)Vb(c,a[c],b,e);return d.join("&").replace(Qb,"+")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=m.prop(this,"elements");return a?m.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!m(this).is(":disabled")&&Ub.test(this.nodeName)&&!Tb.test(a)&&(this.checked||!W.test(a))}).map(function(a,b){var c=m(this).val();return null==c?null:m.isArray(c)?m.map(c,function(a){return{name:b.name,value:a.replace(Sb,"\r\n")}}):{name:b.name,value:c.replace(Sb,"\r\n")}}).get()}}),m.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Zb()||$b()}:Zb;var Wb=0,Xb={},Yb=m.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in Xb)Xb[a](void 0,!0)}),k.cors=!!Yb&&"withCredentials"in Yb,Yb=k.ajax=!!Yb,Yb&&m.ajaxTransport(function(a){if(!a.crossDomain||k.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++Wb;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)void 0!==c[e]&&f.setRequestHeader(e,c[e]+"");f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState))if(delete Xb[g],b=void 0,f.onreadystatechange=m.noop,e)4!==f.readyState&&f.abort();else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=Xb[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}});function Zb(){try{return new a.XMLHttpRequest}catch(b){}}function $b(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return m.globalEval(a),a}}}),m.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),m.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=y.head||m("head")[0]||y.documentElement;return{send:function(d,e){b=y.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var _b=[],ac=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=_b.pop()||m.expando+"_"+vb++;return this[a]=!0,a}}),m.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(ac.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&ac.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=m.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(ac,"$1"+e):b.jsonp!==!1&&(b.url+=(wb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||m.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,_b.push(e)),g&&m.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),m.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||y;var d=u.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=m.buildFragment([a],b,e),e&&e.length&&m(e).remove(),m.merge([],d.childNodes))};var bc=m.fn.load;m.fn.load=function(a,b,c){if("string"!=typeof a&&bc)return bc.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=m.trim(a.slice(h,a.length)),a=a.slice(0,h)),m.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),g.length>0&&m.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?m("<div>").append(m.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this},m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){m.fn[b]=function(a){return this.on(b,a)}}),m.expr.filters.animated=function(a){return m.grep(m.timers,function(b){return a===b.elem}).length};var cc=a.document.documentElement;function dc(a){return m.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}m.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=m.css(a,"position"),l=m(a),n={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=m.css(a,"top"),i=m.css(a,"left"),j=("absolute"===k||"fixed"===k)&&m.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),m.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(n.top=b.top-h.top+g),null!=b.left&&(n.left=b.left-h.left+e),"using"in b?b.using.call(a,n):l.css(n)}},m.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){m.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f)return b=f.documentElement,m.contains(b,e)?(typeof e.getBoundingClientRect!==K&&(d=e.getBoundingClientRect()),c=dc(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===m.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),m.nodeName(a[0],"html")||(c=a.offset()),c.top+=m.css(a[0],"borderTopWidth",!0),c.left+=m.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-m.css(d,"marginTop",!0),left:b.left-c.left-m.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||cc;while(a&&!m.nodeName(a,"html")&&"static"===m.css(a,"position"))a=a.offsetParent;return a||cc})}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);m.fn[a]=function(d){return V(this,function(a,d,e){var f=dc(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void(f?f.scrollTo(c?m(f).scrollLeft():e,c?e:m(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),m.each(["top","left"],function(a,b){m.cssHooks[b]=La(k.pixelPosition,function(a,c){return c?(c=Ja(a,b),Ha.test(c)?m(a).position()[b]+"px":c):void 0})}),m.each({Height:"height",Width:"width"},function(a,b){m.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){m.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return V(this,function(b,c,d){var e;return m.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?m.css(b,c,g):m.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),m.fn.size=function(){return this.length},m.fn.andSelf=m.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return m});var ec=a.jQuery,fc=a.$;return m.noConflict=function(b){return a.$===m&&(a.$=fc),b&&a.jQuery===m&&(a.jQuery=ec),m},typeof b===K&&(a.jQuery=a.$=m),m});

/*<script src="${ctxStatic}/org/tinygroup/jquery/js/jquery.brower.js"></script>*/
!function(a){var b,c,d,e;a.browser||(a.browser={},a.browser.mozilla=!1,a.browser.webkit=!1,a.browser.opera=!1,a.browser.msie=!1,b=navigator.userAgent,a.browser.name=navigator.appName,a.browser.fullVersion=""+parseFloat(navigator.appVersion),a.browser.majorVersion=parseInt(navigator.appVersion,10),-1!=(d=b.indexOf("Opera"))?(a.browser.opera=!0,a.browser.name="Opera",a.browser.fullVersion=b.substring(d+6),-1!=(d=b.indexOf("Version"))&&(a.browser.fullVersion=b.substring(d+8))):-1!=(d=b.indexOf("MSIE"))?(a.browser.msie=!0,a.browser.name="Microsoft Internet Explorer",a.browser.fullVersion=b.substring(d+5)):-1!=(d=b.indexOf("Chrome"))?(a.browser.webkit=!0,a.browser.name="Chrome",a.browser.fullVersion=b.substring(d+7)):-1!=(d=b.indexOf("Safari"))?(a.browser.webkit=!0,a.browser.name="Safari",a.browser.fullVersion=b.substring(d+7),-1!=(d=b.indexOf("Version"))&&(a.browser.fullVersion=b.substring(d+8))):-1!=(d=b.indexOf("Firefox"))?(a.browser.mozilla=!0,a.browser.name="Firefox",a.browser.fullVersion=b.substring(d+8)):(c=b.lastIndexOf(" ")+1)<(d=b.lastIndexOf("/"))&&(a.browser.name=b.substring(c,d),a.browser.fullVersion=b.substring(d+1),a.browser.name.toLowerCase()==a.browser.name.toUpperCase()&&(a.browser.name=navigator.appName)),-1!=(e=a.browser.fullVersion.indexOf(";"))&&(a.browser.fullVersion=a.browser.fullVersion.substring(0,e)),-1!=(e=a.browser.fullVersion.indexOf(" "))&&(a.browser.fullVersion=a.browser.fullVersion.substring(0,e)),a.browser.majorVersion=parseInt(""+a.browser.fullVersion,10),isNaN(a.browser.majorVersion)&&(a.browser.fullVersion=""+parseFloat(navigator.appVersion),a.browser.majorVersion=parseInt(navigator.appVersion,10)),a.browser.version=a.browser.majorVersion)}(jQuery);

/*<script src="${ctxStatic}/org/tinygroup/layer/layer.js"></script>*/
!function(a){"use strict";var c,d,h,i,j,e={getPath:function(){var a=document.scripts,b=a[a.length-1],c=b.src;if(!b.getAttribute("merge"))return c.substring(0,c.lastIndexOf("/")+1)}(),enter:function(a){13===a.keyCode&&a.preventDefault()},config:{},end:{},btn:["&#x786E;&#x5B9A;","&#x53D6;&#x6D88;"],type:["dialog","page","iframe","loading","tips"]},f={v:"2.3",ie6:!!a.ActiveXObject&&!a.XMLHttpRequest,index:0,path:e.getPath,config:function(a,b){var d=0;return a=a||{},f.cache=e.config=c.extend(e.config,a),f.path=e.config.path||f.path,"string"==typeof a.extend&&(a.extend=[a.extend]),a.extend&&a.extend.length>0&&function g(){var c=a.extend;f.use(c[c[d]?d:d-1],d<c.length?function(){return++d,g}():b)}(),this},use:function(a,b,d){var h,i,j,g=c("head")[0];return a=a.replace(/\s/g,""),h=/\.css$/.test(a),i=document.createElement(h?"link":"script"),j="layui_layer_"+a.replace(/\.|\//g,""),f.path?(h&&(i.rel="stylesheet"),i[h?"href":"src"]=/^http:\/\//.test(a)?a:f.path+a,i.id=j,c("#"+j)[0]||g.appendChild(i),function k(){(h?1989===parseInt(c("#"+j).css("width")):f[d||j])?function(){b&&b();try{h||g.removeChild(i)}catch(a){}}():setTimeout(k,100)}(),this):void 0},ready:function(a,b){var d="function"==typeof a;return d&&(b=a),f.config(c.extend(e.config,function(){return d?{}:{path:a}}()),b),this},alert:function(a,b,d){var e="function"==typeof b;return e&&(d=b),f.open(c.extend({content:a,yes:d},e?{}:b))},confirm:function(a,b,d,g){var h="function"==typeof b;return h&&(g=d,d=b),f.open(c.extend({content:a,btn:e.btn,yes:d,btn2:g},h?{}:b))},msg:function(a,b,d){var g="function"==typeof b,i=e.config.skin,j=(i?i+" "+i+"-msg":"")||"layui-layer-msg",k=h.anim.length-1;return g&&(d=b),f.open(c.extend({content:a,time:1e3,shade:!1,skin:j,title:!1,closeBtn:!1,icon:1,btn:!1,end:d},g&&!e.config.skin?{skin:j+" layui-layer-hui",shift:k}:function(){return b=b||{},-1===b.icon&&(b.skin=j+" "+(b.skin||"layui-layer-hui")),b}()))},load:function(a,b){return f.open(c.extend({type:3,icon:a||0,shade:.01},b))},tips:function(a,b,d){return f.open(c.extend({type:4,content:[a,b],closeBtn:!1,time:3e3,shade:!1,maxWidth:210},d))}},g=function(a){var b=this;b.index=++f.index,b.config=c.extend({},b.config,e.config,a),b.creat()};g.pt=g.prototype,h=["layui-layer",".layui-layer-title",".layui-layer-main",".layui-layer-dialog","layui-layer-iframe","layui-layer-content","layui-layer-btn","layui-layer-close"],h.anim=["layer-anim","layer-anim-01","layer-anim-02","layer-anim-03","layer-anim-04","layer-anim-05","layer-anim-06"],g.pt.config={type:0,shade:.3,fix:!0,move:h[1],title:"&#x4FE1;&#x606F;",offset:"auto",area:"auto",closeBtn:1,time:0,zIndex:19891014,maxWidth:360,shift:0,icon:-1,scrollbar:!0,tips:2},g.pt.vessel=function(a,b){var c=this,d=c.index,f=c.config,g=f.zIndex+d,i="object"==typeof f.title,j=f.maxmin&&(1===f.type||2===f.type),k=f.title?'<div class="layui-layer-title" style="'+(i?f.title[1]:"")+'">'+(i?f.title[0]:f.title)+"</div>":"";return f.zIndex=g,b([f.shade?'<div class="layui-layer-shade" id="layui-layer-shade'+d+'" times="'+d+'" style="'+("z-index:"+(g-1)+"; background-color:"+(f.shade[1]||"#000")+"; opacity:"+(f.shade[0]||f.shade)+"; filter:alpha(opacity="+(100*f.shade[0]||100*f.shade)+");")+'"></div>':"",'<div class="'+h[0]+" "+(h.anim[f.shift]||"")+(" layui-layer-"+e.type[f.type])+(0!=f.type&&2!=f.type||f.shade?"":" layui-layer-border")+" "+(f.skin||"")+'" id="'+h[0]+d+'" type="'+e.type[f.type]+'" times="'+d+'" showtime="'+f.time+'" conType="'+(a?"object":"string")+'" style="z-index: '+g+"; width:"+f.area[0]+";height:"+f.area[1]+(f.fix?"":";position:absolute;")+'">'+(a&&2!=f.type?"":k)+'<div id="'+(f.id||"")+'" class="layui-layer-content'+(0==f.type&&-1!==f.icon?" layui-layer-padding":"")+(3==f.type?" layui-layer-loading"+f.icon:"")+'">'+(0==f.type&&-1!==f.icon?'<i class="layui-layer-ico layui-layer-ico'+f.icon+'"></i>':"")+(1==f.type&&a?"":f.content||"")+"</div>"+'<span class="layui-layer-setwin">'+function(){var a=j?'<a class="layui-layer-min" href="javascript:;"><cite></cite></a><a class="layui-layer-ico layui-layer-max" href="javascript:;"></a>':"";return f.closeBtn&&(a+='<a class="layui-layer-ico '+h[7]+" "+h[7]+(f.title?f.closeBtn:4==f.type?"1":"2")+'" href="javascript:;"></a>'),a}()+"</span>"+(f.btn?function(){var b,c,a="";for("string"==typeof f.btn&&(f.btn=[f.btn]),b=0,c=f.btn.length;c>b;b++)a+='<a class="'+h[6]+b+'">'+f.btn[b]+"</a>";return'<div class="'+h[6]+'">'+a+"</div>"}():"")+"</div>"],k),c},g.pt.creat=function(){var a=this,b=a.config,g=a.index,j=b.content,k="object"==typeof j;if(!c("#"+b.id)[0]){switch("string"==typeof b.area&&(b.area="auto"===b.area?["",""]:[b.area,""]),b.type){case 0:b.btn="btn"in b?b.btn:e.btn[0],f.closeAll("dialog");break;case 2:j=b.content=k?b.content:[b.content||"http://layer.layui.com","auto"],b.content='<iframe scrolling="'+(b.content[1]||"auto")+'" allowtransparency="true" id="'+h[4]+g+'" name="'+h[4]+g+'" onload="this.className=\'\';" class="layui-layer-load" frameborder="0" src="'+b.content[0]+'"></iframe>';break;case 3:b.title=!1,b.closeBtn=!1,-1===b.icon&&0===b.icon,f.closeAll("loading");break;case 4:k||(b.content=[b.content,"body"]),b.follow=b.content[1],b.content=b.content[0]+'<i class="layui-layer-TipsG"></i>',b.title=!1,b.fix=!1,b.tips="object"==typeof b.tips?b.tips:[b.tips,!0],b.tipsMore||f.closeAll("tips")}a.vessel(k,function(d,e){c("body").append(d[0]),k?function(){2==b.type||4==b.type?function(){c("body").append(d[1])}():function(){j.parents("."+h[0])[0]||(j.show().addClass("layui-layer-wrap").wrap(d[1]),c("#"+h[0]+g).find("."+h[5]).before(e))}()}():c("body").append(d[1]),a.layero=c("#"+h[0]+g),b.scrollbar||h.html.css("overflow","hidden").attr("layer-full",g)}).auto(g),2==b.type&&f.ie6&&a.layero.find("iframe").attr("src",j[0]),c(document).off("keydown",e.enter).on("keydown",e.enter),a.layero.on("keydown",function(){c(document).off("keydown",e.enter)}),4==b.type?a.tips():a.offset(),b.fix&&d.on("resize",function(){a.offset(),(/^\d+%$/.test(b.area[0])||/^\d+%$/.test(b.area[1]))&&a.auto(g),4==b.type&&a.tips()}),b.time<=0||setTimeout(function(){f.close(a.index)},b.time),a.move().callback()}},g.pt.auto=function(a){function k(a){a=f.find(a),a.height(g[1]-i-j-2*(0|parseFloat(a.css("padding"))))}var g,i,j,b=this,e=b.config,f=c("#"+h[0]+a);switch(""===e.area[0]&&e.maxWidth>0&&(/MSIE 7/.test(navigator.userAgent)&&e.btn&&f.width(f.innerWidth()),f.outerWidth()>e.maxWidth&&f.width(e.maxWidth)),g=[f.innerWidth(),f.innerHeight()],i=f.find(h[1]).outerHeight()||0,j=f.find("."+h[6]).outerHeight()||0,e.type){case 2:k("iframe");break;default:""===e.area[1]?e.fix&&g[1]>=d.height()&&(g[1]=d.height(),k("."+h[5])):k("."+h[5])}return b},g.pt.offset=function(){var a=this,b=a.config,c=a.layero,e=[c.outerWidth(),c.outerHeight()],f="object"==typeof b.offset;a.offsetTop=(d.height()-e[1])/2,a.offsetLeft=(d.width()-e[0])/2,f?(a.offsetTop=b.offset[0],a.offsetLeft=b.offset[1]||a.offsetLeft):"auto"!==b.offset&&(a.offsetTop=b.offset,"rb"===b.offset&&(a.offsetTop=d.height()-e[1],a.offsetLeft=d.width()-e[0])),b.fix||(a.offsetTop=/%$/.test(a.offsetTop)?d.height()*parseFloat(a.offsetTop)/100:parseFloat(a.offsetTop),a.offsetLeft=/%$/.test(a.offsetLeft)?d.width()*parseFloat(a.offsetLeft)/100:parseFloat(a.offsetLeft),a.offsetTop+=d.scrollTop(),a.offsetLeft+=d.scrollLeft()),c.css({top:a.offsetTop,left:a.offsetLeft})},g.pt.tips=function(){var i,j,k,a=this,b=a.config,e=a.layero,f=[e.outerWidth(),e.outerHeight()],g=c(b.follow);g[0]||(g=c("body")),i={width:g.outerWidth(),height:g.outerHeight(),top:g.offset().top,left:g.offset().left},j=e.find(".layui-layer-TipsG"),k=b.tips[0],b.tips[1]||j.remove(),i.autoLeft=function(){i.left+f[0]-d.width()>0?(i.tipLeft=i.left+i.width-f[0],j.css({right:12,left:"auto"})):i.tipLeft=i.left},i.where=[function(){i.autoLeft(),i.tipTop=i.top-f[1]-10,j.removeClass("layui-layer-TipsB").addClass("layui-layer-TipsT").css("border-right-color",b.tips[1])},function(){i.tipLeft=i.left+i.width+10,i.tipTop=i.top,j.removeClass("layui-layer-TipsL").addClass("layui-layer-TipsR").css("border-bottom-color",b.tips[1])},function(){i.autoLeft(),i.tipTop=i.top+i.height+10,j.removeClass("layui-layer-TipsT").addClass("layui-layer-TipsB").css("border-right-color",b.tips[1])},function(){i.tipLeft=i.left-f[0]-10,i.tipTop=i.top,j.removeClass("layui-layer-TipsR").addClass("layui-layer-TipsL").css("border-bottom-color",b.tips[1])}],i.where[k-1](),1===k?i.top-(d.scrollTop()+f[1]+16)<0&&i.where[2]():2===k?d.width()-(i.left+i.width+f[0]+16)>0||i.where[3]():3===k?i.top-d.scrollTop()+i.height+f[1]+16-d.height()>0&&i.where[0]():4===k&&f[0]+16-i.left>0&&i.where[1](),e.find("."+h[5]).css({"background-color":b.tips[1],"padding-right":b.closeBtn?"30px":""}),e.css({left:i.tipLeft,top:i.tipTop})},g.pt.move=function(){var a=this,b=a.config,e={setY:0,moveLayer:function(){var a=e.layero,b=parseInt(a.css("margin-left")),c=parseInt(e.move.css("left"));0===b||(c-=b),"fixed"!==a.css("position")&&(c-=a.parent().offset().left,e.setY=0),a.css({left:c,top:parseInt(e.move.css("top"))-e.setY})}},f=a.layero.find(b.move);return b.move&&f.attr("move","ok"),f.css({cursor:b.move?"move":"auto"}),c(b.move).on("mousedown",function(a){if(a.preventDefault(),"ok"===c(this).attr("move")){e.ismove=!0,e.layero=c(this).parents("."+h[0]);var f=e.layero.offset().left,g=e.layero.offset().top,i=e.layero.outerWidth()-6,j=e.layero.outerHeight()-6;c("#layui-layer-moves")[0]||c("body").append('<div id="layui-layer-moves" class="layui-layer-moves" style="left:'+f+"px; top:"+g+"px; width:"+i+"px; height:"+j+'px; z-index:2147483584"></div>'),e.move=c("#layui-layer-moves"),b.moveType&&e.move.css({visibility:"hidden"}),e.moveX=a.pageX-e.move.position().left,e.moveY=a.pageY-e.move.position().top,"fixed"!==e.layero.css("position")||(e.setY=d.scrollTop())}}),c(document).mousemove(function(a){var c,f,g,h;e.ismove&&(c=a.pageX-e.moveX,f=a.pageY-e.moveY,a.preventDefault(),b.moveOut||(e.setY=d.scrollTop(),g=d.width()-e.move.outerWidth(),h=e.setY,0>c&&(c=0),c>g&&(c=g),h>f&&(f=h),f>d.height()-e.move.outerHeight()+e.setY&&(f=d.height()-e.move.outerHeight()+e.setY)),e.move.css({left:c,top:f}),b.moveType&&e.moveLayer(),c=f=g=h=null)}).mouseup(function(){try{e.ismove&&(e.moveLayer(),e.move.remove(),b.moveEnd&&b.moveEnd()),e.ismove=!1}catch(a){e.ismove=!1}}),a},g.pt.callback=function(){function g(){var c=d.cancel&&d.cancel(a.index,b);c===!1||f.close(a.index)}var a=this,b=a.layero,d=a.config;a.openLayer(),d.success&&(2==d.type?b.find("iframe").on("load",function(){d.success(b,a.index)}):d.success(b,a.index)),f.ie6&&a.IE6(b),b.find("."+h[6]).children("a").on("click",function(){var g,e=c(this).index();0===e?d.yes?d.yes(a.index,b):d["btn1"]?d["btn1"](a.index,b):f.close(a.index):(g=d["btn"+(e+1)]&&d["btn"+(e+1)](a.index,b),g===!1||f.close(a.index))}),b.find("."+h[7]).on("click",g),d.shadeClose&&c("#layui-layer-shade"+a.index).on("click",function(){f.close(a.index)}),b.find(".layui-layer-min").on("click",function(){f.min(a.index,d),d.min&&d.min(b)}),b.find(".layui-layer-max").on("click",function(){c(this).hasClass("layui-layer-maxmin")?(f.restore(a.index),d.restore&&d.restore(b)):(f.full(a.index,d),d.full&&d.full(b))}),d.end&&(e.end[a.index]=d.end)},e.reselect=function(){c.each(c("select"),function(){var d=c(this);d.parents("."+h[0])[0]||1==d.attr("layer")&&c("."+h[0]).length<1&&d.removeAttr("layer").show(),d=null})},g.pt.IE6=function(a){function f(){a.css({top:e+(b.config.fix?d.scrollTop():0)})}var b=this,e=a.offset().top;f(),d.scroll(f),c("select").each(function(){var d=c(this);d.parents("."+h[0])[0]||"none"===d.css("display")||d.attr({layer:"1"}).hide(),d=null})},g.pt.openLayer=function(){var a=this;f.zIndex=a.config.zIndex,f.setTop=function(a){var b=function(){f.zIndex++,a.css("z-index",f.zIndex+1)};return f.zIndex=parseInt(a[0].style.zIndex),a.on("mousedown",b),f.zIndex}},e.record=function(a){var b=[a.outerWidth(),a.outerHeight(),a.position().top,a.position().left+parseFloat(a.css("margin-left"))];a.find(".layui-layer-max").addClass("layui-layer-maxmin"),a.attr({area:b})},e.rescollbar=function(a){h.html.attr("layer-full")==a&&(h.html[0].style.removeProperty?h.html[0].style.removeProperty("overflow"):h.html[0].style.removeAttribute("overflow"),h.html.removeAttr("layer-full"))},a.layer=f,f.getChildFrame=function(a,b){return b=b||c("."+h[4]).attr("times"),c("#"+h[0]+b).find("iframe").contents().find(a)},f.getFrameIndex=function(a){return c("#"+a).parents("."+h[4]).attr("times")},f.iframeAuto=function(a){var b,d,e,g;a&&(b=f.getChildFrame("html",a).outerHeight(),d=c("#"+h[0]+a),e=d.find(h[1]).outerHeight()||0,g=d.find("."+h[6]).outerHeight()||0,d.css({height:b+e+g}),d.find("iframe").css({height:b}))},f.iframeSrc=function(a,b){c("#"+h[0]+a).find("iframe").attr("src",b)},f.style=function(a,b){var d=c("#"+h[0]+a),f=d.attr("type"),g=d.find(h[1]).outerHeight()||0,i=d.find("."+h[6]).outerHeight()||0;(f===e.type[1]||f===e.type[2])&&(d.css(b),f===e.type[2]&&d.find("iframe").css({height:parseFloat(b.height)-g-i}))},f.min=function(a){var d=c("#"+h[0]+a),g=d.find(h[1]).outerHeight()||0;e.record(d),f.style(a,{width:180,height:g,overflow:"hidden"}),d.find(".layui-layer-min").hide(),"page"===d.attr("type")&&d.find(h[4]).hide(),e.rescollbar(a)},f.restore=function(a){var b=c("#"+h[0]+a),d=b.attr("area").split(",");b.attr("type"),f.style(a,{width:parseFloat(d[0]),height:parseFloat(d[1]),top:parseFloat(d[2]),left:parseFloat(d[3]),overflow:"visible"}),b.find(".layui-layer-max").removeClass("layui-layer-maxmin"),b.find(".layui-layer-min").show(),"page"===b.attr("type")&&b.find(h[4]).show(),e.rescollbar(a)},f.full=function(a){var g,b=c("#"+h[0]+a);e.record(b),h.html.attr("layer-full")||h.html.css("overflow","hidden").attr("layer-full",a),clearTimeout(g),g=setTimeout(function(){var c="fixed"===b.css("position");f.style(a,{top:c?0:d.scrollTop(),left:c?0:d.scrollLeft(),width:d.width(),height:d.height()}),b.find(".layui-layer-min").hide()},100)},f.title=function(a,b){var d=c("#"+h[0]+(b||f.index)).find(h[1]);d.html(a)},f.close=function(a){var g,i,b=c("#"+h[0]+a),d=b.attr("type");if(b[0]){if(d===e.type[1]&&"object"===b.attr("conType"))for(b.children(":not(."+h[5]+")").remove(),g=0;2>g;g++)b.find(".layui-layer-wrap").unwrap().hide();else{if(d===e.type[2])try{i=c("#"+h[4]+a)[0],i.contentWindow.document.write(""),i.contentWindow.close(),b.find("."+h[5])[0].removeChild(i)}catch(j){}b[0].innerHTML="",b.remove()}c("#layui-layer-moves, #layui-layer-shade"+a).remove(),f.ie6&&e.reselect(),e.rescollbar(a),c(document).off("keydown",e.enter),"function"==typeof e.end[a]&&e.end[a](),delete e.end[a]}},f.closeAll=function(a){c.each(c("."+h[0]),function(){var b=c(this),d=a?b.attr("type")===a:1;d&&f.close(b.attr("times")),d=null})},i=f.cache||{},j=function(a){return i.skin?" "+i.skin+" "+i.skin+"-"+a:""},f.prompt=function(a,b){a=a||{},"function"==typeof a&&(b=a);var d,e=2==a.formType?'<textarea class="layui-layer-input">'+(a.value||"")+"</textarea>":function(){return'<input type="'+(1==a.formType?"password":"text")+'" class="layui-layer-input" value="'+(a.value||"")+'">'}();return f.open(c.extend({btn:["&#x786E;&#x5B9A;","&#x53D6;&#x6D88;"],content:e,skin:"layui-layer-prompt"+j("prompt"),success:function(a){d=a.find(".layui-layer-input"),d.focus()},yes:function(c){var e=d.val();""===e?d.focus():e.length>(a.maxlength||500)?f.tips("&#x6700;&#x591A;&#x8F93;&#x5165;"+(a.maxlength||500)+"&#x4E2A;&#x5B57;&#x6570;",d,{tips:1}):b&&b(e,c,d)}},a))},f.tab=function(a){a=a||{};var b=a.tab||{};return f.open(c.extend({type:1,skin:"layui-layer-tab"+j("tab"),title:function(){var a=b.length,c=1,d="";if(a>0)for(d='<span class="layui-layer-tabnow">'+b[0].title+"</span>";a>c;c++)d+="<span>"+b[c].title+"</span>";return d}(),content:'<ul class="layui-layer-tabmain">'+function(){var a=b.length,c=1,d="";if(a>0)for(d='<li class="layui-layer-tabli xubox_tab_layer">'+(b[0].content||"no content")+"</li>";a>c;c++)d+='<li class="layui-layer-tabli">'+(b[c].content||"no  content")+"</li>";return d}()+"</ul>",success:function(b){var d=b.find(".layui-layer-title").children(),e=b.find(".layui-layer-tabmain").children();d.on("mousedown",function(b){b.stopPropagation?b.stopPropagation():b.cancelBubble=!0;var d=c(this),f=d.index();d.addClass("layui-layer-tabnow").siblings().removeClass("layui-layer-tabnow"),e.eq(f).show().siblings().hide(),"function"==typeof a.change&&a.change(f)})}},a))},f.photos=function(b,d,e){function o(a,b,c){var d=new Image;return d.src=a,d.complete?b(d):(d.onload=function(){d.onload=null,b(d)},d.onerror=function(a){d.onerror=null,c(a)},void 0)}var h,i,k,l,m,n,g={};if(b=b||{},b.photos){if(h=b.photos.constructor===Object,i=h?b.photos:{},k=i.data||[],l=i.start||0,g.imgIndex=(0|l)+1,b.img=b.img||"img",h){if(0===k.length)return f.msg("&#x6CA1;&#x6709;&#x56FE;&#x7247;")}else{if(m=c(b.photos),n=function(){k=[],m.find(b.img).each(function(a){var b=c(this);b.attr("layer-index",a),k.push({alt:b.attr("alt"),pid:b.attr("layer-pid"),src:b.attr("layer-src")||b.attr("src"),thumb:b.attr("src")})})},n(),0===k.length)return;if(d||m.on("click",b.img,function(){var a=c(this),d=a.attr("layer-index");f.photos(c.extend(b,{photos:{start:d,data:k,tab:b.tab},full:b.full}),!0),n()}),!d)return}g.imgprev=function(a){g.imgIndex--,g.imgIndex<1&&(g.imgIndex=k.length),g.tabimg(a)},g.imgnext=function(a,b){g.imgIndex++,g.imgIndex>k.length&&(g.imgIndex=1,b)||g.tabimg(a)},g.keyup=function(a){if(!g.end){var b=a.keyCode;a.preventDefault(),37===b?g.imgprev(!0):39===b?g.imgnext(!0):27===b&&f.close(g.index)}},g.tabimg=function(a){k.length<=1||(i.start=g.imgIndex-1,f.close(g.index),f.photos(b,!0,a))},g.event=function(){g.bigimg.hover(function(){g.imgsee.show()},function(){g.imgsee.hide()}),g.bigimg.find(".layui-layer-imgprev").on("click",function(a){a.preventDefault(),g.imgprev()}),g.bigimg.find(".layui-layer-imgnext").on("click",function(a){a.preventDefault(),g.imgnext()}),c(document).on("keyup",g.keyup)},g.loadi=f.load(1,{shade:"shade"in b?!1:.9,scrollbar:!1}),o(k[l].src,function(d){f.close(g.loadi),g.index=f.open(c.extend({type:1,area:function(){var e=[d.width,d.height],f=[c(a).width()-50,c(a).height()-50];return!b.full&&e[0]>f[0]&&(e[0]=f[0],e[1]=e[0]*d.height/d.width),[e[0]+"px",e[1]+"px"]}(),title:!1,shade:.9,shadeClose:!0,closeBtn:!1,move:".layui-layer-phimg img",moveType:1,scrollbar:!1,moveOut:!0,shift:0|5*Math.random(),skin:"layui-layer-photos"+j("photos"),content:'<div class="layui-layer-phimg"><img src="'+k[l].src+'" alt="'+(k[l].alt||"")+'" layer-pid="'+k[l].pid+'">'+'<div class="layui-layer-imgsee">'+(k.length>1?'<span class="layui-layer-imguide"><a href="javascript:;" class="layui-layer-iconext layui-layer-imgprev"></a><a href="javascript:;" class="layui-layer-iconext layui-layer-imgnext"></a></span>':"")+'<div class="layui-layer-imgbar" style="display:'+(e?"block":"")+'"><span class="layui-layer-imgtit"><a href="javascript:;">'+(k[l].alt||"")+"</a><em>"+g.imgIndex+"/"+k.length+"</em></span></div>"+"</div>"+"</div>",success:function(a){g.bigimg=a.find(".layui-layer-phimg"),g.imgsee=a.find(".layui-layer-imguide,.layui-layer-imgbar"),g.event(a),b.tab&&b.tab(k[l],a)},end:function(){g.end=!0,c(document).off("keyup",g.keyup)}},b))},function(){f.close(g.loadi),f.msg("&#x5F53;&#x524D;&#x56FE;&#x7247;&#x5730;&#x5740;&#x5F02;&#x5E38;<br>&#x662F;&#x5426;&#x7EE7;&#x7EED;&#x67E5;&#x770B;&#x4E0B;&#x4E00;&#x5F20;&#xFF1F;",{time:3e4,btn:["&#x4E0B;&#x4E00;&#x5F20;","&#x4E0D;&#x770B;&#x4E86;"],yes:function(){k.length>1&&g.imgnext(!0,!0)}})})}},e.run=function(){c=jQuery,d=c(a),h.html=c("html"),f.open=function(a){var b=new g(a);return b.index},f.config({shift:5})},"function"==typeof define?define(function(){return e.run(),f}):function(){e.run()}()}(window);

/*<script src="${ctxStatic}/org/tinygroup/layer/layer.ajax.js"></script>*/
$(function(){$(document).on("click","[ly-ajax]",function(){var a=$(this),b={title:"",type:1,scrollbar:!1,content:"",maxmin:!0,shadeClose:!0,zIndex:1050,area:["80%","80%"]},c=$(this).attr("data-url"),d=$.extend({},b,a.data());return 1==d.type?$.ajax({url:c,success:function(a){layer.closeAll(),d.content=a,layer.open(d)}}):(d.content=c,layer.open(d)),!1})});

/*<script src="${ctxStatic}/org/tinygroup/moment/js/moment.js"></script>*/
!function(a){function Y(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function Z(a,b){return function(c){return fb(a.call(this,c),b)}}function $(a,b){return function(c){return this.lang().ordinal(a.call(this,c),b)}}function _(){}function ab(a){rb(a),cb(this,a)}function bb(a){var b=lb(a),c=b.year||0,d=b.month||0,e=b.week||0,f=b.day||0,g=b.hour||0,h=b.minute||0,i=b.second||0,j=b.millisecond||0;this._milliseconds=+j+1e3*i+6e4*h+36e5*g,this._days=+f+7*e,this._months=+d+12*c,this._data={},this._bubble()}function cb(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return b.hasOwnProperty("toString")&&(a.toString=b.toString),b.hasOwnProperty("valueOf")&&(a.valueOf=b.valueOf),a}function db(a){var c,b={};for(c in a)a.hasOwnProperty(c)&&o.hasOwnProperty(c)&&(b[c]=a[c]);return b}function eb(a){return 0>a?Math.ceil(a):Math.floor(a)}function fb(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function gb(a,c,d,e){var i,j,f=c._milliseconds,g=c._days,h=c._months;f&&a._d.setTime(+a._d+f*d),(g||h)&&(i=a.minute(),j=a.hour()),g&&a.date(a.date()+g*d),h&&a.month(a.month()+h*d),f&&!e&&b.updateOffset(a),(g||h)&&(a.minute(i),a.hour(j))}function hb(a){return"[object Array]"===Object.prototype.toString.call(a)}function ib(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function jb(a,b,c){var g,d=Math.min(a.length,b.length),e=Math.abs(a.length-b.length),f=0;for(g=0;d>g;g++)(c&&a[g]!==b[g]||!c&&nb(a[g])!==nb(b[g]))&&f++;return f+e}function kb(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=R[a]||S[b]||b}return a}function lb(a){var c,d,b={};for(d in a)a.hasOwnProperty(d)&&(c=kb(d),c&&(b[c]=a[d]));return b}function mb(c){var d,e;if(0===c.indexOf("week"))d=7,e="day";else{if(0!==c.indexOf("month"))return;d=12,e="month"}b[c]=function(f,g){var h,i,j=b.fn._lang[c],k=[];if("number"==typeof f&&(g=f,f=a),i=function(a){var c=b().utc().set(e,a);return j.call(b.fn._lang,c,f||"")},null!=g)return i(g);for(h=0;d>h;h++)k.push(i(h));return k}}function nb(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function ob(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function pb(a){return qb(a)?366:365}function qb(a){return 0===a%4&&0!==a%100||0===a%400}function rb(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[h]<0||a._a[h]>11?h:a._a[i]<1||a._a[i]>ob(a._a[g],a._a[h])?i:a._a[j]<0||a._a[j]>23?j:a._a[k]<0||a._a[k]>59?k:a._a[l]<0||a._a[l]>59?l:a._a[m]<0||a._a[m]>999?m:-1,a._pf._overflowDayOfYear&&(g>b||b>i)&&(b=i),a._pf.overflow=b)}function sb(a){return null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&a._pf.overflow<0&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length)),a._isValid}function tb(a){return a?a.toLowerCase().replace("_","-"):a}function ub(a,c){return c._isUTC?b(a).zone(c._offset||0):b(a).local()}function vb(a,b){return b.abbr=a,n[a]||(n[a]=new _),n[a].set(b),n[a]}function wb(a){delete n[a]}function xb(a){var d,e,f,g,c=0,h=function(a){if(!n[a]&&p)try{require("./lang/"+a)}catch(b){}return n[a]};if(!a)return b.fn._lang;if(!hb(a)){if(e=h(a))return e;a=[a]}for(;c<a.length;){for(g=tb(a[c]).split("-"),d=g.length,f=tb(a[c+1]),f=f?f.split("-"):null;d>0;){if(e=h(g.slice(0,d).join("-")))return e;if(f&&f.length>=d&&jb(g,f,!0)>=d-1)break;d--}c++}return b.fn._lang}function yb(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function zb(a){var c,d,b=a.match(t);for(c=0,d=b.length;d>c;c++)b[c]=W[b[c]]?W[b[c]]:yb(b[c]);return function(e){var f="";for(c=0;d>c;c++)f+=b[c]instanceof Function?b[c].call(e,a):b[c];return f}}function Ab(a,b){return a.isValid()?(b=Bb(b,a.lang()),T[b]||(T[b]=zb(b)),T[b](a)):a.lang().invalidDate()}function Bb(a,b){function d(a){return b.longDateFormat(a)||a}var c=5;for(u.lastIndex=0;c>=0&&u.test(a);)a=a.replace(u,d),u.lastIndex=0,c-=1;return a}function Cb(a,b){var c,d=b._strict;switch(a){case"DDDD":return G;case"YYYY":case"GGGG":case"gggg":return d?H:x;case"Y":case"G":case"g":return J;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return d?I:y;case"S":if(d)return E;case"SS":if(d)return F;case"SSS":if(d)return G;case"DDD":return w;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return A;case"a":case"A":return xb(b._l)._meridiemParse;case"X":return D;case"Z":case"ZZ":return B;case"T":return C;case"SSSS":return z;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return d?F:v;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return v;default:return c=new RegExp(Kb(Jb(a.replace("\\","")),"i"))}}function Db(a){a=a||"";var b=a.match(B)||[],c=b[b.length-1]||[],d=(c+"").match(O)||["-",0,0],e=+(60*d[1])+nb(d[2]);return"+"===d[0]?-e:e}function Eb(a,b,c){var d,e=c._a;switch(a){case"M":case"MM":null!=b&&(e[h]=nb(b)-1);break;case"MMM":case"MMMM":d=xb(c._l).monthsParse(b),null!=d?e[h]=d:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(e[i]=nb(b));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=nb(b));break;case"YY":e[g]=nb(b)+(nb(b)>68?1900:2e3);break;case"YYYY":case"YYYYY":case"YYYYYY":e[g]=nb(b);break;case"a":case"A":c._isPm=xb(c._l).isPM(b);break;case"H":case"HH":case"h":case"hh":e[j]=nb(b);break;case"m":case"mm":e[k]=nb(b);break;case"s":case"ss":e[l]=nb(b);break;case"S":case"SS":case"SSS":case"SSSS":e[m]=nb(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=Db(b);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":a=a.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=b)}}function Fb(a){var c,d,f,l,m,n,o,p,q,r,e=[];if(!a._d){for(f=Hb(a),a._w&&null==a._a[i]&&null==a._a[h]&&(m=function(c){var d=parseInt(c,10);return c?c.length<3?d>68?1900+d:2e3+d:d:null==a._a[g]?b().weekYear():a._a[g]},n=a._w,null!=n.GG||null!=n.W||null!=n.E?o=Ub(m(n.GG),n.W||1,n.E,4,1):(p=xb(a._l),q=null!=n.d?Qb(n.d,p):null!=n.e?parseInt(n.e,10)+p._week.dow:0,r=parseInt(n.w,10)||1,null!=n.d&&q<p._week.dow&&r++,o=Ub(m(n.gg),r,q,p._week.doy,p._week.dow)),a._a[g]=o.year,a._dayOfYear=o.dayOfYear),a._dayOfYear&&(l=null==a._a[g]?f[g]:a._a[g],a._dayOfYear>pb(l)&&(a._pf._overflowDayOfYear=!0),d=Pb(l,0,a._dayOfYear),a._a[h]=d.getUTCMonth(),a._a[i]=d.getUTCDate()),c=0;3>c&&null==a._a[c];++c)a._a[c]=e[c]=f[c];for(;7>c;c++)a._a[c]=e[c]=null==a._a[c]?2===c?1:0:a._a[c];e[j]+=nb((a._tzm||0)/60),e[k]+=nb((a._tzm||0)%60),a._d=(a._useUTC?Pb:Ob).apply(null,e)}}function Gb(a){var b;a._d||(b=lb(a._i),a._a=[b.year,b.month,b.day,b.hour,b.minute,b.second,b.millisecond],Fb(a))}function Hb(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function Ib(a){a._a=[],a._pf.empty=!0;var d,e,f,g,h,b=xb(a._l),c=""+a._i,i=c.length,k=0;for(f=Bb(a._f,b).match(t)||[],d=0;d<f.length;d++)g=f[d],e=(c.match(Cb(g,a))||[])[0],e&&(h=c.substr(0,c.indexOf(e)),h.length>0&&a._pf.unusedInput.push(h),c=c.slice(c.indexOf(e)+e.length),k+=e.length),W[g]?(e?a._pf.empty=!1:a._pf.unusedTokens.push(g),Eb(g,e,a)):a._strict&&!e&&a._pf.unusedTokens.push(g);a._pf.charsLeftOver=i-k,c.length>0&&a._pf.unusedInput.push(c),a._isPm&&a._a[j]<12&&(a._a[j]+=12),a._isPm===!1&&12===a._a[j]&&(a._a[j]=0),Fb(a),rb(a)}function Jb(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function Kb(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Lb(a){var b,c,d,e,f;if(0===a._f.length)return a._pf.invalidFormat=!0,a._d=new Date(0/0),void 0;for(e=0;e<a._f.length;e++)f=0,b=cb({},a),b._pf=Y(),b._f=a._f[e],Ib(b),sb(b)&&(f+=b._pf.charsLeftOver,f+=10*b._pf.unusedTokens.length,b._pf.score=f,(null==d||d>f)&&(d=f,c=b));cb(a,c||b)}function Mb(a){var b,c,d=a._i,e=K.exec(d);if(e){for(a._pf.iso=!0,b=0,c=M.length;c>b;b++)if(M[b][1].exec(d)){a._f=M[b][0]+(e[6]||" ");break}for(b=0,c=N.length;c>b;b++)if(N[b][1].exec(d)){a._f+=N[b][0];break}d.match(B)&&(a._f+="Z"),Ib(a)}else a._d=new Date(d)}function Nb(b){var c=b._i,d=q.exec(c);c===a?b._d=new Date:d?b._d=new Date(+d[1]):"string"==typeof c?Mb(b):hb(c)?(b._a=c.slice(0),Fb(b)):ib(c)?b._d=new Date(+c):"object"==typeof c?Gb(b):b._d=new Date(c)}function Ob(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function Pb(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function Qb(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function Rb(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function Sb(a,b,c){var d=e(Math.abs(a)/1e3),f=e(d/60),g=e(f/60),h=e(g/24),i=e(h/365),j=45>d&&["s",d]||1===f&&["m"]||45>f&&["mm",f]||1===g&&["h"]||22>g&&["hh",g]||1===h&&["d"]||25>=h&&["dd",h]||45>=h&&["M"]||345>h&&["MM",e(h/30)]||1===i&&["y"]||["yy",i];return j[2]=b,j[3]=a>0,j[4]=c,Rb.apply({},j)}function Tb(a,c,d){var g,e=d-c,f=d-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),g=b(a).add("d",f),{week:Math.ceil(g.dayOfYear()/7),year:g.year()}}function Ub(a,b,c,d,e){var g,h,f=Pb(a,0,1).getUTCDay();return c=null!=c?c:e,g=e-f+(f>d?7:0)-(e>f?7:0),h=7*(b-1)+(c-e)+g+1,{year:h>0?a:a-1,dayOfYear:h>0?h:pb(a-1)+h}}function Vb(a){var c=a._i,d=a._f;return null===c?b.invalid({nullInput:!0}):("string"==typeof c&&(a._i=c=xb().preparse(c)),b.isMoment(c)?(a=db(c),a._d=new Date(+c._d)):d?hb(d)?Lb(a):Ib(a):Nb(a),new ab(a))}function Wb(a,c){b.fn[a]=b.fn[a+"s"]=function(a){var d=this._isUTC?"UTC":"";return null!=a?(this._d["set"+d+c](a),b.updateOffset(this),this):this._d["get"+d+c]()}}function Xb(a){b.duration.fn[a]=function(){return this._data[a]}}function Yb(a,c){b.duration.fn["as"+a]=function(){return+this/c}}function Zb(a){var c=!1,e=b;"undefined"==typeof ender&&(a?(d.moment=function(){return!c&&console&&console.warn&&(c=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),e.apply(null,arguments)},cb(d.moment,e)):d["moment"]=b)}for(var b,f,c="2.5.1",d=this,e=Math.round,g=0,h=1,i=2,j=3,k=4,l=5,m=6,n={},o={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},p="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require,q=/^\/?Date\((\-?\d+)/i,r=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,s=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,t=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,u=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,v=/\d\d?/,w=/\d{1,3}/,x=/\d{1,4}/,y=/[+\-]?\d{1,6}/,z=/\d+/,A=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,B=/Z|[\+\-]\d\d:?\d\d/gi,C=/T/i,D=/[\+\-]?\d+(\.\d{1,3})?/,E=/\d/,F=/\d\d/,G=/\d{3}/,H=/\d{4}/,I=/[+-]?\d{6}/,J=/[+-]?\d+/,K=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,L="YYYY-MM-DDTHH:mm:ssZ",M=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],N=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],O=/([\+\-]|\d\d)/gi,P="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Q={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},R={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},S={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},T={},U="DDD w W M D d".split(" "),V="M D H h m s w W".split(" "),W={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return fb(this.year()%100,2)},YYYY:function(){return fb(this.year(),4)},YYYYY:function(){return fb(this.year(),5)},YYYYYY:function(){var a=this.year(),b=a>=0?"+":"-";return b+fb(Math.abs(a),6)},gg:function(){return fb(this.weekYear()%100,2)},gggg:function(){return fb(this.weekYear(),4)},ggggg:function(){return fb(this.weekYear(),5)},GG:function(){return fb(this.isoWeekYear()%100,2)},GGGG:function(){return fb(this.isoWeekYear(),4)},GGGGG:function(){return fb(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return nb(this.milliseconds()/100)},SS:function(){return fb(nb(this.milliseconds()/10),2)},SSS:function(){return fb(this.milliseconds(),3)},SSSS:function(){return fb(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+fb(nb(a/60),2)+":"+fb(nb(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+fb(nb(a/60),2)+fb(nb(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},X=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];U.length;)f=U.pop(),W[f+"o"]=$(W[f],f);for(;V.length;)f=V.pop(),W[f+f]=Z(W[f],2);for(W.DDDD=Z(W.DDD,3),cb(_.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var c,d,e;for(this._monthsParse||(this._monthsParse=[]),c=0;12>c;c++)if(this._monthsParse[c]||(d=b.utc([2e3,c]),e="^"+this.months(d,"")+"|^"+this.monthsShort(d,""),this._monthsParse[c]=new RegExp(e.replace(".",""),"i")),this._monthsParse[c].test(a))return c},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var c,d,e;for(this._weekdaysParse||(this._weekdaysParse=[]),c=0;7>c;c++)if(this._weekdaysParse[c]||(d=b([2e3,1]).day(c),e="^"+this.weekdays(d,"")+"|^"+this.weekdaysShort(d,"")+"|^"+this.weekdaysMin(d,""),this._weekdaysParse[c]=new RegExp(e.replace(".",""),"i")),this._weekdaysParse[c].test(a))return c},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return Tb(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),b=function(b,c,d,e){var f;return"boolean"==typeof d&&(e=d,d=a),f={},f._isAMomentObject=!0,f._i=b,f._f=c,f._l=d,f._strict=e,f._isUTC=!1,f._pf=Y(),Vb(f)},b.utc=function(b,c,d,e){var f;return"boolean"==typeof d&&(e=d,d=a),f={},f._isAMomentObject=!0,f._useUTC=!0,f._isUTC=!0,f._l=d,f._i=b,f._f=c,f._strict=e,f._pf=Y(),Vb(f).utc()},b.unix=function(a){return b(1e3*a)},b.duration=function(a,c){var f,g,h,d=a,e=null;return b.isDuration(a)?d={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(d={},c?d[c]=a:d.milliseconds=a):(e=r.exec(a))?(f="-"===e[1]?-1:1,d={y:0,d:nb(e[i])*f,h:nb(e[j])*f,m:nb(e[k])*f,s:nb(e[l])*f,ms:nb(e[m])*f}):(e=s.exec(a))&&(f="-"===e[1]?-1:1,h=function(a){var b=a&&parseFloat(a.replace(",","."));return(isNaN(b)?0:b)*f},d={y:h(e[2]),M:h(e[3]),d:h(e[4]),h:h(e[5]),m:h(e[6]),s:h(e[7]),w:h(e[8])}),g=new bb(d),b.isDuration(a)&&a.hasOwnProperty("_lang")&&(g._lang=a._lang),g},b.version=c,b.defaultFormat=L,b.updateOffset=function(){},b.lang=function(a,c){var d;return a?(c?vb(tb(a),c):null===c?(wb(a),a="en"):n[a]||xb(a),d=b.duration.fn._lang=b.fn._lang=xb(a),d._abbr):b.fn._lang._abbr},b.langData=function(a){return a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr),xb(a)},b.isMoment=function(a){return a instanceof ab||null!=a&&a.hasOwnProperty("_isAMomentObject")},b.isDuration=function(a){return a instanceof bb},f=X.length-1;f>=0;--f)mb(X[f]);for(b.normalizeUnits=function(a){return kb(a)},b.invalid=function(a){var c=b.utc(0/0);return null!=a?cb(c._pf,a):c._pf.userInvalidated=!0,c},b.parseZone=function(a){return b(a).parseZone()},cb(b.fn=ab.prototype,{clone:function(){return b(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=b(this).utc();return 0<a.year()&&a.year()<=9999?Ab(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):Ab(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return sb(this)},isDSTShifted:function(){return this._a?this.isValid()&&jb(this._a,(this._isUTC?b.utc(this._a):b(this._a)).toArray())>0:!1},parsingFlags:function(){return cb({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(a){var c=Ab(this,a||b.defaultFormat);return this.lang().postformat(c)},add:function(a,c){var d;return d="string"==typeof a?b.duration(+c,a):b.duration(a,c),gb(this,d,1),this},subtract:function(a,c){var d;return d="string"==typeof a?b.duration(+c,a):b.duration(a,c),gb(this,d,-1),this},diff:function(a,c,d){var g,h,e=ub(a,this),f=6e4*(this.zone()-e.zone());return c=kb(c),"year"===c||"month"===c?(g=432e5*(this.daysInMonth()+e.daysInMonth()),h=12*(this.year()-e.year())+(this.month()-e.month()),h+=(this-b(this).startOf("month")-(e-b(e).startOf("month")))/g,h-=6e4*(this.zone()-b(this).startOf("month").zone()-(e.zone()-b(e).startOf("month").zone()))/g,"year"===c&&(h/=12)):(g=this-e,h="second"===c?g/1e3:"minute"===c?g/6e4:"hour"===c?g/36e5:"day"===c?(g-f)/864e5:"week"===c?(g-f)/6048e5:g),d?h:eb(h)},from:function(a,c){return b.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!c)},fromNow:function(a){return this.from(b(),a)},calendar:function(){var a=ub(b(),this).startOf("day"),c=this.diff(a,"days",!0),d=-6>c?"sameElse":-1>c?"lastWeek":0>c?"lastDay":1>c?"sameDay":2>c?"nextDay":7>c?"nextWeek":"sameElse";return this.format(this.lang().calendar(d,this))},isLeapYear:function(){return qb(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=Qb(a,this.lang()),this.add({d:a-b})):b},month:function(a){var d,c=this._isUTC?"UTC":"";return null!=a?"string"==typeof a&&(a=this.lang().monthsParse(a),"number"!=typeof a)?this:(d=this.date(),this.date(1),this._d["set"+c+"Month"](a),this.date(Math.min(d,this.daysInMonth())),b.updateOffset(this),this):this._d["get"+c+"Month"]()},startOf:function(a){switch(a=kb(a)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),this},endOf:function(a){return a=kb(a),this.startOf(a).add("isoWeek"===a?"week":a,1).subtract("ms",1)},isAfter:function(a,c){return c="undefined"!=typeof c?c:"millisecond",+this.clone().startOf(c)>+b(a).startOf(c)},isBefore:function(a,c){return c="undefined"!=typeof c?c:"millisecond",+this.clone().startOf(c)<+b(a).startOf(c)},isSame:function(a,b){return b=b||"ms",+this.clone().startOf(b)===+ub(a,this).startOf(b)},min:function(a){return a=b.apply(null,arguments),this>a?this:a},max:function(a){return a=b.apply(null,arguments),a>this?this:a},zone:function(a){var c=this._offset||0;return null==a?this._isUTC?c:this._d.getTimezoneOffset():("string"==typeof a&&(a=Db(a)),Math.abs(a)<16&&(a=60*a),this._offset=a,this._isUTC=!0,c!==a&&gb(this,b.duration(c-a,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(a){return a=a?b(a).zone():0,0===(this.zone()-a)%60},daysInMonth:function(){return ob(this.year(),this.month())},dayOfYear:function(a){var c=e((b(this).startOf("day")-b(this).startOf("year"))/864e5)+1;return null==a?c:this.add("d",a-c)},quarter:function(){return Math.ceil((this.month()+1)/3)},weekYear:function(a){var b=Tb(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==a?b:this.add("y",a-b)},isoWeekYear:function(a){var b=Tb(this,1,4).year;return null==a?b:this.add("y",a-b)},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},isoWeek:function(a){var b=Tb(this,1,4).week;return null==a?b:this.add("d",7*(a-b))},weekday:function(a){var b=(this.day()+7-this.lang()._week.dow)%7;return null==a?b:this.add("d",a-b)},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},get:function(a){return a=kb(a),this[a]()},set:function(a,b){return a=kb(a),"function"==typeof this[a]&&this[a](b),this},lang:function(b){return b===a?this._lang:(this._lang=xb(b),this)}}),f=0;f<P.length;f++)Wb(P[f].toLowerCase().replace(/s$/,""),P[f]);Wb("year","FullYear"),b.fn.days=b.fn.day,b.fn.months=b.fn.month,b.fn.weeks=b.fn.week,b.fn.isoWeeks=b.fn.isoWeek,b.fn.toJSON=b.fn.toISOString,cb(b.duration.fn=bb.prototype,{_bubble:function(){var e,f,g,h,a=this._milliseconds,b=this._days,c=this._months,d=this._data;d.milliseconds=a%1e3,e=eb(a/1e3),d.seconds=e%60,f=eb(e/60),d.minutes=f%60,g=eb(f/60),d.hours=g%24,b+=eb(g/24),d.days=b%30,c+=eb(b/30),d.months=c%12,h=eb(c/12),d.years=h},weeks:function(){return eb(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*nb(this._months/12)},humanize:function(a){var b=+this,c=Sb(b,!a,this.lang());return a&&(c=this.lang().pastFuture(b,c)),this.lang().postformat(c)},add:function(a,c){var d=b.duration(a,c);return this._milliseconds+=d._milliseconds,this._days+=d._days,this._months+=d._months,this._bubble(),this},subtract:function(a,c){var d=b.duration(a,c);return this._milliseconds-=d._milliseconds,this._days-=d._days,this._months-=d._months,this._bubble(),this},get:function(a){return a=kb(a),this[a.toLowerCase()+"s"]()},as:function(a){return a=kb(a),this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:b.fn.lang,toIsoString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"}});for(f in Q)Q.hasOwnProperty(f)&&(Yb(f,Q[f]),Xb(f.toLowerCase()));Yb("Weeks",6048e5),b.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},b.lang("en",{ordinal:function(a){var b=a%10,c=1===nb(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),function(a){a(b)}(function(a){return a.lang("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah点mm",L:"YYYY-MM-DD",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日LT",LLLL:"YYYY年MMMD日ddddLT",l:"YYYY-MM-DD",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日LT",llll:"YYYY年MMMD日ddddLT"},meridiem:function(a,b){var d=100*a+b;return 600>d?"凌晨":900>d?"早上":1130>d?"上午":1230>d?"中午":1800>d?"下午":"晚上"},calendar:{sameDay:function(){return 0===this.minutes()?"[今天]Ah[点整]":"[今天]LT"},nextDay:function(){return 0===this.minutes()?"[明天]Ah[点整]":"[明天]LT"},lastDay:function(){return 0===this.minutes()?"[昨天]Ah[点整]":"[昨天]LT"},nextWeek:function(){var b,c;return b=a().startOf("week"),c=this.unix()-b.unix()>=604800?"[下]":"[本]",0===this.minutes()?c+"dddAh点整":c+"dddAh点mm"},lastWeek:function(){var b,c;return b=a().startOf("week"),c=this.unix()<b.unix()?"[上]":"[本]",0===this.minutes()?c+"dddAh点整":c+"dddAh点mm"},sameElse:"LL"},ordinal:function(a,b){switch(b){case"d":case"D":case"DDD":return a+"日";case"M":return a+"月";case"w":case"W":return a+"周";default:return a}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1分钟",mm:"%d分钟",h:"1小时",hh:"%d小时",d:"1天",dd:"%d天",M:"1个月",MM:"%d个月",y:"1年",yy:"%d年"},week:{dow:0,doy:4}})}),function(a){a(b)}(function(a){return a.lang("zh-tw",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah點mm",L:"YYYY年MMMD日",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日LT",LLLL:"YYYY年MMMD日ddddLT",l:"YYYY年MMMD日",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日LT",llll:"YYYY年MMMD日ddddLT"},meridiem:function(a,b){var d=100*a+b;return 900>d?"早上":1130>d?"上午":1230>d?"中午":1800>d?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},ordinal:function(a,b){switch(b){case"d":case"D":case"DDD":return a+"日";case"M":return a+"月";case"w":case"W":return a+"週";default:return a}},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",m:"一分鐘",mm:"%d分鐘",h:"一小時",hh:"%d小時",d:"一天",dd:"%d天",M:"一個月",MM:"%d個月",y:"一年",yy:"%d年"}})}),b.lang("zh-cn"),p?(module.exports=b,Zb(!0)):"function"==typeof define&&define.amd?define("moment",function(c,d,e){return e.config&&e.config()&&e.config().noGlobal!==!0&&Zb(e.config().noGlobal===a),b}):Zb()}.call(this);

/*<script src="${ctxStatic}/org/tinygroup/bootstrap/js/bootstrap.min.js"></script>*/
/*!
 * Bootstrap v3.3.5 (http://getbootstrap.com)
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under the MIT license
 */
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.3.5",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove()}var e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a(f);b&&b.preventDefault(),g.length||(g=e.closest(".alert")),g.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.3.5",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")?(c.prop("checked")&&(a=!1),b.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==c.prop("type")&&(c.prop("checked")!==this.$element.hasClass("active")&&(a=!1),this.$element.toggleClass("active")),c.prop("checked",this.$element.hasClass("active")),a&&c.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target);d.hasClass("btn")||(d=d.closest(".btn")),b.call(d,"toggle"),a(c.target).is('input[type="radio"]')||a(c.target).is('input[type="checkbox"]')||c.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.3.5",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b),d="prev"==a&&0===c||"next"==a&&c==this.$items.length-1;if(d&&!this.options.wrap)return b;var e="prev"==a?-1:1,f=(c+e)%this.$items.length;return this.$items.eq(f)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));return a>this.$items.length-1||0>a?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){return this.sliding?void 0:this.slide("next")},c.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},c.prototype.slide=function(b,d){var e=this.$element.find(".item.active"),f=d||this.getItemForDirection(b,e),g=this.interval,h="next"==b?"left":"right",i=this;if(f.hasClass("active"))return this.sliding=!1;var j=f[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:h});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:h});return a.support.transition&&this.$element.hasClass("slide")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one("bsTransitionEnd",function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){"use strict";function b(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&/show|hide/.test(b)&&(f.toggle=!1),e||c.data("bs.collapse",e=new d(this,f)),"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a('[data-toggle="collapse"][href="#'+b.id+'"],[data-toggle="collapse"][data-target="#'+b.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION="3.3.5",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(b=e.data("bs.collapse"),b&&b.transitioning))){var f=a.Event("show.bs.collapse");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),g=f.data("bs.collapse"),h=g?"toggle":e.data();c.call(f,h)})}(jQuery),+function(a){"use strict";function b(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function c(c){c&&3===c.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=b(d),f={relatedTarget:this};e.hasClass("open")&&(c&&"click"==c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(e[0],c.target)||(e.trigger(c=a.Event("hide.bs.dropdown",f)),c.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger("hidden.bs.dropdown",f))))}))}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.5",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=b(e),g=f.hasClass("open");if(c(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",c);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger("shown.bs.dropdown",h)}return!1}},g.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var d=a(this);if(c.preventDefault(),c.stopPropagation(),!d.is(".disabled, :disabled")){var e=b(d),g=e.hasClass("open");if(!g&&27!=c.which||g&&27==c.which)return 27==c.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.disabled):visible a",i=e.find(".dropdown-menu"+h);if(i.length){var j=i.index(c.target);38==c.which&&j>0&&j--,40==c.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",c).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.5",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in"),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+e).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",a,b)};c.VERSION="3.3.5",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusin"==b.type?"focus":"hover"]=!0),c.tip().hasClass("in")||"in"==c.hoverState?void(c.hoverState="in"):(clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return!0;return!1},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusout"==b.type?"focus":"hover"]=!1),c.isInStateTrue()?void 0:(clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide())},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.getPosition(this.$viewport);h="bottom"==h&&k.bottom+m>o.bottom?"top":"top"==h&&k.top-m<o.top?"bottom":"right"==h&&k.right+l>o.width?"left":"left"==h&&k.left-l<o.left?"right":h,f.removeClass(n).addClass(h)}var p=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(p,h);var q=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",q).emulateTransitionEnd(c.TRANSITION_DURATION):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top+=g,b.left+=h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b()}var e=this,f=a(this.$tip),g=a.Event("hide.bs."+this.type);return this.$element.trigger(g),g.isDefaultPrevented()?void 0:(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this)},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=d?{top:0,left:0}:b.offset(),g={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},h=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,g,h,f)},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.right&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){if(!this.$tip&&(this.$tip=a(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),b?(c.inState.click=!c.inState.click,c.isInStateTrue()?c.enter(c):c.leave(c)):c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type),a.$tip&&a.$tip.detach(),a.$tip=null,a.$arrow=null,a.$viewport=null})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.5",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(c,d){this.$body=a(document.body),this.$scrollElement=a(a(c).is(document.body)?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this)),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.3.5",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b=this,c="offset",d=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(c="position",d=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var b=a(this),e=b.data("target")||b.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(void 0===e[a+1]||b<e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),
d.trigger("activate.bs.scrollspy")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.5",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu").length&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.3.5",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return c>e?"top":!1;if("bottom"==this.affixed)return null!=c?e+this.unpin<=f.top?!1:"bottom":a-d>=e+g?!1:"bottom";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&c>=e?"top":null!=d&&i+j>=a-d?"bottom":!1},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=Math.max(a(document).height(),a(document.body).height());"object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css("top","");var i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}"bottom"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery);

/*<script src="${ctxStatic}/org/tinygroup/jqueryUi/js/jquery-ui.js"></script>*/
!function(a,b){function e(b,c){var d,e,g,h=b.nodeName.toLowerCase();return"area"===h?(d=b.parentNode,e=d.name,b.href&&e&&"map"===d.nodeName.toLowerCase()?(g=a("img[usemap=#"+e+"]")[0],!!g&&f(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&f(b)}function f(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var c=0,d=/^ui-id-\d+$/;a.ui=a.ui||{},a.extend(a.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus(),d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),scrollParent:function(){var b;return b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var e,f,d=a(this[0]);d.length&&d[0]!==document;){if(e=d.css("position"),("absolute"===e||"relative"===e||"fixed"===e)&&(f=parseInt(d.css("zIndex"),10),!isNaN(f)&&0!==f))return f;d=d.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++c)})},removeUniqueId:function(){return this.each(function(){d.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return e(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var c=a.attr(b,"tabindex"),d=isNaN(c);return(d||c>=0)&&e(b,!d)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function h(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),f&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var e="Width"===d?["Left","Right"]:["Top","Bottom"],f=d.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?g["inner"+d].call(this):this.each(function(){a(this).css(f,h(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?g["outer"+d].call(this,b):this.each(function(){a(this).css(f,h(this,b,!0,c)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.support.selectstart="onselectstart"in document.createElement("div"),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c){var d,e=a.plugins[b];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(d=0;d<e.length;d++)a.options[e[d][0]]&&e[d][1].apply(a.element,c)}},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)}})}(jQuery),function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var d,c=0;null!=(d=b[c]);c++)try{a(d).triggerHandler("remove")}catch(f){}e(b)},a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split(".")[0];b=b.split(".")[1],e=j+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){return this._createWidget?(arguments.length&&this._createWidget(a,b),void 0):new g(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){return a.isFunction(d)?(i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)};return function(){var f,b=this._super,c=this._superApply;return this._super=a,this._superApply=e,f=d.apply(this,arguments),this._super=b,this._superApply=c,f}}(),void 0):(i[b]=d,void 0)}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix||b:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g)},a.widget.extend=function(c){for(var h,i,e=d.call(arguments,1),f=0,g=e.length;g>f;f++)for(h in e[f])i=e[f][h],e[f].hasOwnProperty(h)&&i!==b&&(c[h]=a.isPlainObject(i)?a.isPlainObject(c[h])?a.widget.extend({},c[h],i):a.widget.extend({},i):i);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,h?this.each(function(){var d,e=a.data(this,f);return e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):void 0):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; "+"attempted to call method '"+g+"'")}):this.each(function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var f,g,h,e=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(e={},f=c.split("."),c=f.shift(),f.length){for(g=e[c]=a.widget.extend({},this.options[c]),h=0;h<f.length-1;h++)g[f[h]]=g[f[h]]||{},g=g[f[h]];if(c=f.pop(),1===arguments.length)return g[c]===b?null:g[c];g[c]=d}else{if(1===arguments.length)return this.options[c]===b?null:this.options[c];e[c]=d}return this._setOptions(e),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){return b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof g?f[g]:g).apply(f,arguments):void 0}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^(\w+)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}})}(jQuery),function(a){var c=!1;a(document).mouseup(function(){c=!1}),a.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!c){this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var d=this,e=1===b.which,f="string"==typeof this.options.cancel&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(b)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(b)!==!1,!this._mouseStarted)?(b.preventDefault(),!0):(!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),c=!0,!0)):!0}},_mouseMove:function(b){return a.ui.ie&&(!document.documentMode||document.documentMode<9)&&!b.button?this._mouseUp(b):this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(a){a.widget("ui.draggable",a.ui.mouse,{version:"1.10.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(b),this.handle?(a(c.iframeFix===!0?"iframe":c.iframeFix).each(function(){a("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=this,d=!1;return a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,b)),this.dropped&&(d=this.dropped,this.dropped=!1),"original"!==this.options.helper||a.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!d||"valid"===this.options.revert&&d||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){c._trigger("stop",b)!==!1&&c._clear()}):this._trigger("stop",b)!==!1&&this._clear(),!1):!1},_mouseUp:function(b){return a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){return this.options.handle?!!a(b.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo),d[0]===this.element[0]||/(fixed|absolute)/.test(d.css("position"))||d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;return e.containment?"window"===e.containment?(this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===e.containment?(this.containment=[0,0,a(document).width()-this.helperProportions.width-this.margins.left,(a(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):e.containment.constructor===Array?(this.containment=e.containment,void 0):("parent"===e.containment&&(e.containment=this.helper[0].parentNode),c=a(e.containment),d=c[0],d&&(b="hidden"!==c.css("overflow"),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c),void 0):(this.containment=null,void 0)},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:e.scrollTop(),left:e.scrollLeft()}),{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*d}},_generatePosition:function(b){var c,d,e,f,g=this.options,h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=b.pageX,j=b.pageY;return this.offset.scroll||(this.offset.scroll={top:h.scrollTop(),left:h.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(d=this.relative_container.offset(),c=[this.containment[0]+d.left,this.containment[1]+d.top,this.containment[2]+d.left,this.containment[3]+d.top]):c=this.containment,b.pageX-this.offset.click.left<c[0]&&(i=c[0]+this.offset.click.left),b.pageY-this.offset.click.top<c[1]&&(j=c[1]+this.offset.click.top),b.pageX-this.offset.click.left>c[2]&&(i=c[2]+this.offset.click.left),b.pageY-this.offset.click.top>c[3]&&(j=c[3]+this.offset.click.top)),g.grid&&(e=g.grid[1]?this.originalPageY+Math.round((j-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,j=c?e-this.offset.click.top>=c[1]||e-this.offset.click.top>c[3]?e:e-this.offset.click.top>=c[1]?e-g.grid[1]:e+g.grid[1]:e,f=g.grid[0]?this.originalPageX+Math.round((i-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,i=c?f-this.offset.click.left>=c[0]||f-this.offset.click.left>c[2]?f:f-this.offset.click.left>=c[0]?f-g.grid[0]:f+g.grid[0]:f)),{top:j-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),"drag"===b&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("ui-draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"ui-sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("ui-draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"===d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("ui-draggable"),e=this;a.each(d.sortables,function(){var f=!1,g=this;this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(f=!0,a.each(d.sortables,function(){return this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this!==g&&this.instance._intersectsWith(this.instance.containerCache)&&a.contains(g.instance.element[0],this.instance.element[0])&&(f=!1),f})),f?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(){var b=a("body"),c=a(this).data("ui-draggable").options;b.css("cursor")&&(c._cursor=b.css("cursor")),b.css("cursor",c.cursor)},stop:function(){var b=a(this).data("ui-draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("ui-draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("ui-draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("ui-draggable");b.scrollParent[0]!==document&&"HTML"!==b.scrollParent[0].tagName&&(b.overflowOffset=b.scrollParent.offset())},drag:function(b){var c=a(this).data("ui-draggable"),d=c.options,e=!1;c.scrollParent[0]!==document&&"HTML"!==c.scrollParent[0].tagName?(d.axis&&"x"===d.axis||(c.overflowOffset.top+c.scrollParent[0].offsetHeight-b.pageY<d.scrollSensitivity?c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop+d.scrollSpeed:b.pageY-c.overflowOffset.top<d.scrollSensitivity&&(c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop-d.scrollSpeed)),d.axis&&"y"===d.axis||(c.overflowOffset.left+c.scrollParent[0].offsetWidth-b.pageX<d.scrollSensitivity?c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft+d.scrollSpeed:b.pageX-c.overflowOffset.left<d.scrollSensitivity&&(c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft-d.scrollSpeed))):(d.axis&&"x"===d.axis||(b.pageY-a(document).scrollTop()<d.scrollSensitivity?e=a(document).scrollTop(a(document).scrollTop()-d.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<d.scrollSensitivity&&(e=a(document).scrollTop(a(document).scrollTop()+d.scrollSpeed))),d.axis&&"y"===d.axis||(b.pageX-a(document).scrollLeft()<d.scrollSensitivity?e=a(document).scrollLeft(a(document).scrollLeft()-d.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<d.scrollSensitivity&&(e=a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed)))),e!==!1&&a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(c,b)}}),a.ui.plugin.add("draggable","snap",{start:function(){var b=a(this).data("ui-draggable"),c=b.options;b.snapElements=[],a(c.snap.constructor!==String?c.snap.items||":data(ui-draggable)":c.snap).each(function(){var c=a(this),d=c.offset();this!==b.element[0]&&b.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:d.top,left:d.left})})},drag:function(b,c){var d,e,f,g,h,i,j,k,l,m,n=a(this).data("ui-draggable"),o=n.options,p=o.snapTolerance,q=c.offset.left,r=q+n.helperProportions.width,s=c.offset.top,t=s+n.helperProportions.height;for(l=n.snapElements.length-1;l>=0;l--)h=n.snapElements[l].left,i=h+n.snapElements[l].width,j=n.snapElements[l].top,k=j+n.snapElements[l].height,h-p>r||q>i+p||j-p>t||s>k+p||!a.contains(n.snapElements[l].item.ownerDocument,n.snapElements[l].item)?(n.snapElements[l].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,b,a.extend(n._uiHash(),{snapItem:n.snapElements[l].item})),n.snapElements[l].snapping=!1):("inner"!==o.snapMode&&(d=Math.abs(j-t)<=p,e=Math.abs(k-s)<=p,f=Math.abs(h-r)<=p,g=Math.abs(i-q)<=p,d&&(c.position.top=n._convertPositionTo("relative",{top:j-n.helperProportions.height,left:0}).top-n.margins.top),e&&(c.position.top=n._convertPositionTo("relative",{top:k,left:0}).top-n.margins.top),f&&(c.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left-n.margins.left),g&&(c.position.left=n._convertPositionTo("relative",{top:0,left:i}).left-n.margins.left)),m=d||e||f||g,"outer"!==o.snapMode&&(d=Math.abs(j-s)<=p,e=Math.abs(k-t)<=p,f=Math.abs(h-q)<=p,g=Math.abs(i-r)<=p,d&&(c.position.top=n._convertPositionTo("relative",{top:j,left:0}).top-n.margins.top),e&&(c.position.top=n._convertPositionTo("relative",{top:k-n.helperProportions.height,left:0}).top-n.margins.top),f&&(c.position.left=n._convertPositionTo("relative",{top:0,left:h}).left-n.margins.left),g&&(c.position.left=n._convertPositionTo("relative",{top:0,left:i-n.helperProportions.width}).left-n.margins.left)),!n.snapElements[l].snapping&&(d||e||f||g||m)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,b,a.extend(n._uiHash(),{snapItem:n.snapElements[l].item})),n.snapElements[l].snapping=d||e||f||g||m)}}),a.ui.plugin.add("draggable","stack",{start:function(){var b,c=this.data("ui-draggable").options,d=a.makeArray(a(c.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});d.length&&(b=parseInt(a(d[0]).css("zIndex"),10)||0,a(d).each(function(c){a(this).css("zIndex",b+c)}),this.css("zIndex",b+d.length))}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("ui-draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("ui-draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})}(jQuery),function(a){function c(a,b,c){return a>b&&b+c>a}a.widget("ui.droppable",{version:"1.10.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var b,c=this.options,d=c.accept;
this.isover=!1,this.isout=!0,this.accept=a.isFunction(d)?d:function(a){return a.is(d)},this.proportions=function(){return arguments.length?(b=arguments[0],void 0):b?b:b={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},a.ui.ddmanager.droppables[c.scope]=a.ui.ddmanager.droppables[c.scope]||[],a.ui.ddmanager.droppables[c.scope].push(this),c.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var b=0,c=a.ui.ddmanager.droppables[this.options.scope];b<c.length;b++)c[b]===this&&c.splice(b,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(b,c){"accept"===b&&(this.accept=a.isFunction(c)?c:function(a){return a.is(c)}),a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current,e=!1;return d&&(d.currentItem||d.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"ui-droppable");return b.options.greedy&&!b.options.disabled&&b.options.scope===d.options.scope&&b.accept.call(b.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(b,{offset:b.element.offset()}),b.options.tolerance)?(e=!0,!1):void 0}),e?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),this.element):!1):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}}),a.ui.intersect=function(a,b,d){if(!b.offset)return!1;var e,f,g=(a.positionAbs||a.position.absolute).left,h=(a.positionAbs||a.position.absolute).top,i=g+a.helperProportions.width,j=h+a.helperProportions.height,k=b.offset.left,l=b.offset.top,m=k+b.proportions().width,n=l+b.proportions().height;switch(d){case"fit":return g>=k&&m>=i&&h>=l&&n>=j;case"intersect":return k<g+a.helperProportions.width/2&&i-a.helperProportions.width/2<m&&l<h+a.helperProportions.height/2&&j-a.helperProportions.height/2<n;case"pointer":return e=(a.positionAbs||a.position.absolute).left+(a.clickOffset||a.offset.click).left,f=(a.positionAbs||a.position.absolute).top+(a.clickOffset||a.offset.click).top,c(f,l,b.proportions().height)&&c(e,k,b.proportions().width);case"touch":return(h>=l&&n>=h||j>=l&&n>=j||l>h&&j>n)&&(g>=k&&m>=g||i>=k&&m>=i||k>g&&i>m);default:return!1}},a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var d,e,f=a.ui.ddmanager.droppables[b.options.scope]||[],g=c?c.type:null,h=(b.currentItem||b.element).find(":data(ui-droppable)").addBack();a:for(d=0;d<f.length;d++)if(!(f[d].options.disabled||b&&!f[d].accept.call(f[d].element[0],b.currentItem||b.element))){for(e=0;e<h.length;e++)if(h[e]===f[d].element[0]){f[d].proportions().height=0;continue a}f[d].visible="none"!==f[d].element.css("display"),f[d].visible&&("mousedown"===g&&f[d]._activate.call(f[d],c),f[d].offset=f[d].element.offset(),f[d].proportions({width:f[d].element[0].offsetWidth,height:f[d].element[0].offsetHeight}))}},drop:function(b,c){var d=!1;return a.each((a.ui.ddmanager.droppables[b.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(d=this._drop.call(this,c)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,c)))}),d},dragStart:function(b,c){b.element.parentsUntil("body").bind("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d,e,f,g=a.ui.intersect(b,this,this.options.tolerance),h=!g&&this.isover?"isout":g&&!this.isover?"isover":null;h&&(this.options.greedy&&(e=this.options.scope,f=this.element.parents(":data(ui-droppable)").filter(function(){return a.data(this,"ui-droppable").options.scope===e}),f.length&&(d=a.data(f[0],"ui-droppable"),d.greedyChild="isover"===h)),d&&"isover"===h&&(d.isover=!1,d.isout=!0,d._out.call(d,c)),this[h]=!0,this["isout"===h?"isover":"isout"]=!1,this["isover"===h?"_over":"_out"].call(this,c),d&&"isout"===h&&(d.isout=!1,d.isover=!0,d._over.call(d,c)))}})},dragStop:function(b,c){b.element.parentsUntil("body").unbind("scroll.droppable"),b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}}}(jQuery),function(a){function c(a){return parseInt(a,10)||0}function d(a){return!isNaN(parseInt(a,10))}a.widget("ui.resizable",a.ui.mouse,{version:"1.10.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var b,c,d,e,f,g=this,h=this.options;if(this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!h.aspectRatio,aspectRatio:h.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:h.helper||h.ghost||h.animate?h.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=h.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),b=this.handles.split(","),this.handles={},c=0;c<b.length;c++)d=a.trim(b[c]),f="ui-resizable-"+d,e=a("<div class='ui-resizable-handle "+f+"'></div>"),e.css({zIndex:h.zIndex}),"se"===d&&e.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[d]=".ui-resizable-"+d,this.element.append(e);this._renderAxis=function(b){var c,d,e,f;b=b||this.element;for(c in this.handles)this.handles[c].constructor===String&&(this.handles[c]=a(this.handles[c],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(d=a(this.handles[c],this.element),f=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth(),e=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join(""),b.css(e,f),this._proportionallyResize()),a(this.handles[c]).length},this._renderAxis(this.element),this._handles=a(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){g.resizing||(this.className&&(e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),g.axis=e&&e[1]?e[1]:"se")}),h.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").mouseenter(function(){h.disabled||(a(this).removeClass("ui-resizable-autohide"),g._handles.show())}).mouseleave(function(){h.disabled||g.resizing||(a(this).addClass("ui-resizable-autohide"),g._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var b,c=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(c(this.element),b=this.element,this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")}).insertAfter(b),b.remove()),this.originalElement.css("resize",this.originalResizeStyle),c(this.originalElement),this},_mouseCapture:function(b){var c,d,e=!1;for(c in this.handles)d=a(this.handles[c])[0],(d===b.target||a.contains(d,b.target))&&(e=!0);return!this.options.disabled&&e},_mouseStart:function(b){var d,e,f,g=this.options,h=this.element.position(),i=this.element;return this.resizing=!0,/absolute/.test(i.css("position"))?i.css({position:"absolute",top:i.css("top"),left:i.css("left")}):i.is(".ui-draggable")&&i.css({position:"absolute",top:h.top,left:h.left}),this._renderProxy(),d=c(this.helper.css("left")),e=c(this.helper.css("top")),g.containment&&(d+=a(g.containment).scrollLeft()||0,e+=a(g.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:d,top:e},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:i.width(),height:i.height()},this.originalSize=this._helper?{width:i.outerWidth(),height:i.outerHeight()}:{width:i.width(),height:i.height()},this.originalPosition={left:d,top:e},this.sizeDiff={width:i.outerWidth()-i.width(),height:i.outerHeight()-i.height()},this.originalMousePosition={left:b.pageX,top:b.pageY},this.aspectRatio="number"==typeof g.aspectRatio?g.aspectRatio:this.originalSize.width/this.originalSize.height||1,f=a(".ui-resizable-"+this.axis).css("cursor"),a("body").css("cursor","auto"===f?this.axis+"-resize":f),i.addClass("ui-resizable-resizing"),this._propagate("start",b),!0},_mouseDrag:function(b){var c,d=this.helper,e={},f=this.originalMousePosition,g=this.axis,h=this.position.top,i=this.position.left,j=this.size.width,k=this.size.height,l=b.pageX-f.left||0,m=b.pageY-f.top||0,n=this._change[g];return n?(c=n.apply(this,[b,l,m]),this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(c=this._updateRatio(c,b)),c=this._respectSize(c,b),this._updateCache(c),this._propagate("resize",b),this.position.top!==h&&(e.top=this.position.top+"px"),this.position.left!==i&&(e.left=this.position.left+"px"),this.size.width!==j&&(e.width=this.size.width+"px"),this.size.height!==k&&(e.height=this.size.height+"px"),d.css(e),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),a.isEmptyObject(e)||this._trigger("resize",b,this.ui()),!1):!1},_mouseStop:function(b){this.resizing=!1;var c,d,e,f,g,h,i,j=this.options,k=this;return this._helper&&(c=this._proportionallyResizeElements,d=c.length&&/textarea/i.test(c[0].nodeName),e=d&&a.ui.hasScroll(c[0],"left")?0:k.sizeDiff.height,f=d?0:k.sizeDiff.width,g={width:k.helper.width()-f,height:k.helper.height()-e},h=parseInt(k.element.css("left"),10)+(k.position.left-k.originalPosition.left)||null,i=parseInt(k.element.css("top"),10)+(k.position.top-k.originalPosition.top)||null,j.animate||this.element.css(a.extend(g,{top:i,left:h})),k.helper.height(k.size.height),k.helper.width(k.size.width),this._helper&&!j.animate&&this._proportionallyResize()),a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(a){var b,c,e,f,g,h=this.options;g={minWidth:d(h.minWidth)?h.minWidth:0,maxWidth:d(h.maxWidth)?h.maxWidth:1/0,minHeight:d(h.minHeight)?h.minHeight:0,maxHeight:d(h.maxHeight)?h.maxHeight:1/0},(this._aspectRatio||a)&&(b=g.minHeight*this.aspectRatio,e=g.minWidth/this.aspectRatio,c=g.maxHeight*this.aspectRatio,f=g.maxWidth/this.aspectRatio,b>g.minWidth&&(g.minWidth=b),e>g.minHeight&&(g.minHeight=e),c<g.maxWidth&&(g.maxWidth=c),f<g.maxHeight&&(g.maxHeight=f)),this._vBoundaries=g},_updateCache:function(a){this.offset=this.helper.offset(),d(a.left)&&(this.position.left=a.left),d(a.top)&&(this.position.top=a.top),d(a.height)&&(this.size.height=a.height),d(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=this.position,c=this.size,e=this.axis;return d(a.height)?a.width=a.height*this.aspectRatio:d(a.width)&&(a.height=a.width/this.aspectRatio),"sw"===e&&(a.left=b.left+(c.width-a.width),a.top=null),"nw"===e&&(a.top=b.top+(c.height-a.height),a.left=b.left+(c.width-a.width)),a},_respectSize:function(a){var b=this._vBoundaries,c=this.axis,e=d(a.width)&&b.maxWidth&&b.maxWidth<a.width,f=d(a.height)&&b.maxHeight&&b.maxHeight<a.height,g=d(a.width)&&b.minWidth&&b.minWidth>a.width,h=d(a.height)&&b.minHeight&&b.minHeight>a.height,i=this.originalPosition.left+this.originalSize.width,j=this.position.top+this.size.height,k=/sw|nw|w/.test(c),l=/nw|ne|n/.test(c);return g&&(a.width=b.minWidth),h&&(a.height=b.minHeight),e&&(a.width=b.maxWidth),f&&(a.height=b.maxHeight),g&&k&&(a.left=i-b.minWidth),e&&k&&(a.left=i-b.maxWidth),h&&l&&(a.top=j-b.minHeight),f&&l&&(a.top=j-b.maxHeight),a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||(a.left=null):a.top=null,a},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var a,b,c,d,e,f=this.helper||this.element;for(a=0;a<this._proportionallyResizeElements.length;a++){if(e=this._proportionallyResizeElements[a],!this.borderDif)for(this.borderDif=[],c=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],d=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")],b=0;b<c.length;b++)this.borderDif[b]=(parseInt(c[b],10)||0)+(parseInt(d[b],10)||0);e.css({height:f.height()-this.borderDif[0]-this.borderDif[2]||0,width:f.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var b=this.element,c=this.options;this.elementOffset=b.offset(),this._helper?(this.helper=this.helper||a("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){var c=this.originalSize,d=this.originalPosition;return{left:d.left+b,width:c.width-b}},n:function(a,b,c){var d=this.originalSize,e=this.originalPosition;return{top:e.top+c,height:d.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),"resize"!==b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.ui.plugin.add("resizable","animate",{stop:function(b){var c=a(this).data("ui-resizable"),d=c.options,e=c._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:c.sizeDiff.height,h=f?0:c.sizeDiff.width,i={width:c.size.width-h,height:c.size.height-g},j=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,k=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;c.element.animate(a.extend(i,k&&j?{top:k,left:j}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var d={width:parseInt(c.element.css("width"),10),height:parseInt(c.element.css("height"),10),top:parseInt(c.element.css("top"),10),left:parseInt(c.element.css("left"),10)};e&&e.length&&a(e[0]).css({width:d.width,height:d.height}),c._updateCache(d),c._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(){var b,d,e,f,g,h,i,j=a(this).data("ui-resizable"),k=j.options,l=j.element,m=k.containment,n=m instanceof a?m.get(0):/parent/.test(m)?l.parent().get(0):m;n&&(j.containerElement=a(n),/document/.test(m)||m===document?(j.containerOffset={left:0,top:0},j.containerPosition={left:0,top:0},j.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight}):(b=a(n),d=[],a(["Top","Right","Left","Bottom"]).each(function(a,e){d[a]=c(b.css("padding"+e))}),j.containerOffset=b.offset(),j.containerPosition=b.position(),j.containerSize={height:b.innerHeight()-d[3],width:b.innerWidth()-d[1]},e=j.containerOffset,f=j.containerSize.height,g=j.containerSize.width,h=a.ui.hasScroll(n,"left")?n.scrollWidth:g,i=a.ui.hasScroll(n)?n.scrollHeight:f,j.parentData={element:n,left:e.left,top:e.top,width:h,height:i}))},resize:function(b){var c,d,e,f,g=a(this).data("ui-resizable"),h=g.options,i=g.containerOffset,j=g.position,k=g._aspectRatio||b.shiftKey,l={top:0,left:0},m=g.containerElement;m[0]!==document&&/static/.test(m.css("position"))&&(l=i),j.left<(g._helper?i.left:0)&&(g.size.width=g.size.width+(g._helper?g.position.left-i.left:g.position.left-l.left),k&&(g.size.height=g.size.width/g.aspectRatio),g.position.left=h.helper?i.left:0),j.top<(g._helper?i.top:0)&&(g.size.height=g.size.height+(g._helper?g.position.top-i.top:g.position.top),k&&(g.size.width=g.size.height*g.aspectRatio),g.position.top=g._helper?i.top:0),g.offset.left=g.parentData.left+g.position.left,g.offset.top=g.parentData.top+g.position.top,c=Math.abs((g._helper?g.offset.left-l.left:g.offset.left-l.left)+g.sizeDiff.width),d=Math.abs((g._helper?g.offset.top-l.top:g.offset.top-i.top)+g.sizeDiff.height),e=g.containerElement.get(0)===g.element.parent().get(0),f=/relative|absolute/.test(g.containerElement.css("position")),e&&f&&(c-=Math.abs(g.parentData.left)),c+g.size.width>=g.parentData.width&&(g.size.width=g.parentData.width-c,k&&(g.size.height=g.size.width/g.aspectRatio)),d+g.size.height>=g.parentData.height&&(g.size.height=g.parentData.height-d,k&&(g.size.width=g.size.height*g.aspectRatio))},stop:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.containerOffset,e=b.containerPosition,f=b.containerElement,g=a(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width,j=g.outerHeight()-b.sizeDiff.height;b._helper&&!c.animate&&/relative/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j}),b._helper&&!c.animate&&/static/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j})}}),a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).data("ui-resizable"),c=b.options,d=function(b){a(b).each(function(){var b=a(this);b.data("ui-resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"!=typeof c.alsoResize||c.alsoResize.parentNode?d(c.alsoResize):c.alsoResize.length?(c.alsoResize=c.alsoResize[0],d(c.alsoResize)):a.each(c.alsoResize,function(a){d(a)})},resize:function(b,c){var d=a(this).data("ui-resizable"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,d){a(b).each(function(){var b=a(this),e=a(this).data("ui-resizable-alsoresize"),f={},g=d&&d.length?d:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(g,function(a,b){var c=(e[b]||0)+(h[b]||0);c&&c>=0&&(f[b]=c||null)}),b.css(f)})};"object"!=typeof e.alsoResize||e.alsoResize.nodeType?i(e.alsoResize):a.each(e.alsoResize,function(a,b){i(a,b)})},stop:function(){a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.size;b.ghost=b.originalElement.clone(),b.ghost.css({opacity:.25,display:"block",position:"relative",height:d.height,width:d.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof c.ghost?c.ghost:""),b.ghost.appendTo(b.helper)},resize:function(){var b=a(this).data("ui-resizable");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=a(this).data("ui-resizable");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.size,e=b.originalSize,f=b.originalPosition,g=b.axis,h="number"==typeof c.grid?[c.grid,c.grid]:c.grid,i=h[0]||1,j=h[1]||1,k=Math.round((d.width-e.width)/i)*i,l=Math.round((d.height-e.height)/j)*j,m=e.width+k,n=e.height+l,o=c.maxWidth&&c.maxWidth<m,p=c.maxHeight&&c.maxHeight<n,q=c.minWidth&&c.minWidth>m,r=c.minHeight&&c.minHeight>n;c.grid=h,q&&(m+=i),r&&(n+=j),o&&(m-=i),p&&(n-=j),/^(se|s|e)$/.test(g)?(b.size.width=m,b.size.height=n):/^(ne)$/.test(g)?(b.size.width=m,b.size.height=n,b.position.top=f.top-l):/^(sw)$/.test(g)?(b.size.width=m,b.size.height=n,b.position.left=f.left-k):(n-j>0?(b.size.height=n,b.position.top=f.top-l):(b.size.height=j,b.position.top=f.top+e.height-j),m-i>0?(b.size.width=m,b.position.left=f.left-k):(b.size.width=i,b.position.left=f.left+e.width-i))}})}(jQuery),function(a){a.widget("ui.selectable",a.ui.mouse,{version:"1.10.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var b,c=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){b=a(c.options.filter,c.element[0]),b.addClass("ui-selectee"),b.each(function(){var b=a(this),c=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:!1,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=b.addClass("ui-selectee"),this._mouseInit(),this.helper=a("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(b){var c=this,d=this.options;this.opos=[b.pageX,b.pageY],this.options.disabled||(this.selectees=a(d.filter,this.element[0]),this._trigger("start",b),a(d.appendTo).append(this.helper),this.helper.css({left:b.pageX,top:b.pageY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=!0,b.metaKey||b.ctrlKey||(d.$element.removeClass("ui-selected"),d.selected=!1,d.$element.addClass("ui-unselecting"),d.unselecting=!0,c._trigger("unselecting",b,{unselecting:d.element}))}),a(b.target).parents().addBack().each(function(){var d,e=a.data(this,"selectable-item");return e?(d=!b.metaKey&&!b.ctrlKey||!e.$element.hasClass("ui-selected"),e.$element.removeClass(d?"ui-unselecting":"ui-selected").addClass(d?"ui-selecting":"ui-unselecting"),e.unselecting=!d,e.selecting=d,e.selected=d,d?c._trigger("selecting",b,{selecting:e.element}):c._trigger("unselecting",b,{unselecting:e.element}),!1):void 0}))},_mouseDrag:function(b){if(this.dragged=!0,!this.options.disabled){var c,d=this,e=this.options,f=this.opos[0],g=this.opos[1],h=b.pageX,i=b.pageY;return f>h&&(c=h,h=f,f=c),g>i&&(c=i,i=g,g=c),this.helper.css({left:f,top:g,width:h-f,height:i-g}),this.selectees.each(function(){var c=a.data(this,"selectable-item"),j=!1;c&&c.element!==d.element[0]&&("touch"===e.tolerance?j=!(c.left>h||c.right<f||c.top>i||c.bottom<g):"fit"===e.tolerance&&(j=c.left>f&&c.right<h&&c.top>g&&c.bottom<i),j?(c.selected&&(c.$element.removeClass("ui-selected"),c.selected=!1),c.unselecting&&(c.$element.removeClass("ui-unselecting"),c.unselecting=!1),c.selecting||(c.$element.addClass("ui-selecting"),c.selecting=!0,d._trigger("selecting",b,{selecting:c.element}))):(c.selecting&&((b.metaKey||b.ctrlKey)&&c.startselected?(c.$element.removeClass("ui-selecting"),c.selecting=!1,c.$element.addClass("ui-selected"),c.selected=!0):(c.$element.removeClass("ui-selecting"),c.selecting=!1,c.startselected&&(c.$element.addClass("ui-unselecting"),c.unselecting=!0),d._trigger("unselecting",b,{unselecting:c.element}))),c.selected&&(b.metaKey||b.ctrlKey||c.startselected||(c.$element.removeClass("ui-selected"),c.selected=!1,c.$element.addClass("ui-unselecting"),c.unselecting=!0,d._trigger("unselecting",b,{unselecting:c.element})))))}),!1}},_mouseStop:function(b){var c=this;return this.dragged=!1,a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting"),d.unselecting=!1,d.startselected=!1,c._trigger("unselected",b,{unselected:d.element})}),a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected"),d.selecting=!1,d.selected=!0,d.startselected=!0,c._trigger("selected",b,{selected:d.element})}),this._trigger("stop",b),this.helper.remove(),!1}})}(jQuery),function(a){function c(a,b,c){return a>b&&b+c>a}function d(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))}a.widget("ui.sortable",a.ui.mouse,{version:"1.10.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var a=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===a.axis||d(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_setOption:function(b,c){"disabled"===b?(this.options[b]=c,this.widget().toggleClass("ui-sortable-disabled",!!c)):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,c){var d=null,e=!1,f=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(b),a(b.target).parents().each(function(){return a.data(this,f.widgetName+"-item")===f?(d=a(this),!1):void 0}),a.data(b.target,f.widgetName+"-item")===f&&(d=a(b.target)),d?!this.options.handle||c||(a(this.options.handle,d).find("*").addBack().each(function(){this===b.target&&(e=!0)}),e)?(this.currentItem=d,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(b,c,d){var e,f,g=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,g.cursorAt&&this._adjustOffsetFromHelper(g.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),g.containment&&this._setContainment(),g.cursor&&"auto"!==g.cursor&&(f=this.document.find("body"),this.storedCursor=f.css("cursor"),f.css("cursor",g.cursor),this.storedStylesheet=a("<style>*{ cursor: "+g.cursor+" !important; }</style>").appendTo(f)),g.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",g.opacity)),g.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",g.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!d)for(e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("activate",b,this._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){var c,d,e,f,g=this.options,h=!1;for(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<g.scrollSensitivity?this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop+g.scrollSpeed:b.pageY-this.overflowOffset.top<g.scrollSensitivity&&(this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop-g.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<g.scrollSensitivity?this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft+g.scrollSpeed:b.pageX-this.overflowOffset.left<g.scrollSensitivity&&(this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft-g.scrollSpeed)):(b.pageY-a(document).scrollTop()<g.scrollSensitivity?h=a(document).scrollTop(a(document).scrollTop()-g.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<g.scrollSensitivity&&(h=a(document).scrollTop(a(document).scrollTop()+g.scrollSpeed)),b.pageX-a(document).scrollLeft()<g.scrollSensitivity?h=a(document).scrollLeft(a(document).scrollLeft()-g.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<g.scrollSensitivity&&(h=a(document).scrollLeft(a(document).scrollLeft()+g.scrollSpeed))),h!==!1&&a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),c=this.items.length-1;c>=0;c--)if(d=this.items[c],e=d.item[0],f=this._intersectsWithPointer(d),f&&d.instance===this.currentContainer&&e!==this.currentItem[0]&&this.placeholder[1===f?"next":"prev"]()[0]!==e&&!a.contains(this.placeholder[0],e)&&("semi-dynamic"===this.options.type?!a.contains(this.element[0],e):!0)){if(this.direction=1===f?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(d))break;
this._rearrange(b,d),this._trigger("change",b,this._uiHash());break}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(b){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b),this.options.revert){var d=this,e=this.placeholder.offset(),f=this.options.axis,g={};f&&"x"!==f||(g.left=e.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),f&&"y"!==f||(g.top=e.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,a(this.helper).animate(g,parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var b=this.containers.length-1;b>=0;b--)this.containers[b]._trigger("deactivate",null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[\-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l="x"===this.options.axis||d+j>h&&i>d+j,m="y"===this.options.axis||b+k>f&&g>b+k,n=l&&m;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?n:f<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<g&&h<d+this.helperProportions.height/2&&e-this.helperProportions.height/2<i},_intersectsWithPointer:function(a){var b="x"===this.options.axis||c(this.positionAbs.top+this.offset.click.top,a.top,a.height),d="y"===this.options.axis||c(this.positionAbs.left+this.offset.click.left,a.left,a.width),e=b&&d,f=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();return e?this.floating?g&&"right"===g||"down"===f?2:1:f&&("down"===f?2:1):!1},_intersectsWithSides:function(a){var b=c(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height),d=c(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width),e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?"right"===f&&d||"left"===f&&!d:e&&("down"===e&&b||"up"===e&&!b)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!==a&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!==a&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){function j(){g.push(this)}var c,d,e,f,g=[],h=[],i=this._connectWith();if(i&&b)for(c=i.length-1;c>=0;c--)for(e=a(i[c]),d=e.length-1;d>=0;d--)f=a.data(e[d],this.widgetFullName),f&&f!==this&&!f.options.disabled&&h.push([a.isFunction(f.options.items)?f.options.items.call(f.element):a(f.options.items,f.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),f]);for(h.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),c=h.length-1;c>=0;c--)h[c][0].each(j);return a(g)},_removeCurrentsFromItems:function(){var b=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(a){for(var c=0;c<b.length;c++)if(b[c]===a.item[0])return!1;return!0})},_refreshItems:function(b){this.items=[],this.containers=[this];var c,d,e,f,g,h,i,j,k=this.items,l=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],m=this._connectWith();if(m&&this.ready)for(c=m.length-1;c>=0;c--)for(e=a(m[c]),d=e.length-1;d>=0;d--)f=a.data(e[d],this.widgetFullName),f&&f!==this&&!f.options.disabled&&(l.push([a.isFunction(f.options.items)?f.options.items.call(f.element[0],b,{item:this.currentItem}):a(f.options.items,f.element),f]),this.containers.push(f));for(c=l.length-1;c>=0;c--)for(g=l[c][1],h=l[c][0],d=0,j=h.length;j>d;d++)i=a(h[d]),i.data(this.widgetName+"-item",g),k.push({item:i,instance:g,width:0,height:0,left:0,top:0})},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var c,d,e,f;for(c=this.items.length-1;c>=0;c--)d=this.items[c],d.instance!==this.currentContainer&&this.currentContainer&&d.item[0]!==this.currentItem[0]||(e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item,b||(d.width=e.outerWidth(),d.height=e.outerHeight()),f=e.offset(),d.left=f.left,d.top=f.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(c=this.containers.length-1;c>=0;c--)f=this.containers[c].element.offset(),this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight();return this},_createPlaceholder:function(b){b=b||this;var c,d=b.options;d.placeholder&&d.placeholder.constructor!==String||(c=d.placeholder,d.placeholder={element:function(){var d=b.currentItem[0].nodeName.toLowerCase(),e=a("<"+d+">",b.document[0]).addClass(c||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===d?b.currentItem.children().each(function(){a("<td>&#160;</td>",b.document[0]).attr("colspan",a(this).attr("colspan")||1).appendTo(e)}):"img"===d&&e.attr("src",b.currentItem.attr("src")),c||e.css("visibility","hidden"),e},update:function(a,e){(!c||d.forcePlaceholderSize)&&(e.height()||e.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10)))}}),b.placeholder=a(d.placeholder.element.call(b.element,b.currentItem)),b.currentItem.after(b.placeholder),d.placeholder.update(b,b.placeholder)},_contactContainers:function(b){var e,f,g,h,i,j,k,l,m,n,o=null,p=null;for(e=this.containers.length-1;e>=0;e--)if(!a.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(o&&a.contains(this.containers[e].element[0],o.element[0]))continue;o=this.containers[e],p=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",b,this._uiHash(this)),this.containers[e].containerCache.over=0);if(o)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",b,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(g=1e4,h=null,n=o.floating||d(this.currentItem),i=n?"left":"top",j=n?"width":"height",k=this.positionAbs[i]+this.offset.click[i],f=this.items.length-1;f>=0;f--)a.contains(this.containers[p].element[0],this.items[f].item[0])&&this.items[f].item[0]!==this.currentItem[0]&&(!n||c(this.positionAbs.top+this.offset.click.top,this.items[f].top,this.items[f].height))&&(l=this.items[f].item.offset()[i],m=!1,Math.abs(l-k)>Math.abs(l+this.items[f][j]-k)&&(m=!0,l+=this.items[f][j]),Math.abs(l-k)<g&&(g=Math.abs(l-k),h=this.items[f],this.direction=m?"up":"down"));if(!h&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return;h?this._rearrange(b,h,null,!0):this._rearrange(b,null,this.containers[p].element,!0),this._trigger("change",b,this._uiHash()),this.containers[p]._trigger("change",b,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",b,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):"clone"===c.helper?this.currentItem.clone():this.currentItem;return d.parents("body").length||a("parent"!==c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!d[0].style.width||c.forceHelperSize)&&d.width(this.currentItem.width()),(!d[0].style.height||c.forceHelperSize)&&d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;"parent"===e.containment&&(e.containment=this.helper[0].parentNode),("document"===e.containment||"window"===e.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a("document"===e.containment?document:window).width()-this.helperProportions.width-this.margins.left,(a("document"===e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||(b=a(e.containment)[0],c=a(e.containment).offset(),d="hidden"!==a(b).css("overflow"),this.containment=[c.left+(parseInt(a(b).css("borderLeftWidth"),10)||0)+(parseInt(a(b).css("paddingLeft"),10)||0)-this.margins.left,c.top+(parseInt(a(b).css("borderTopWidth"),10)||0)+(parseInt(a(b).css("paddingTop"),10)||0)-this.margins.top,c.left+(d?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(a(b).css("borderLeftWidth"),10)||0)-(parseInt(a(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,c.top+(d?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(a(b).css("borderTopWidth"),10)||0)-(parseInt(a(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d}},_generatePosition:function(b){var c,d,e=this.options,f=b.pageX,g=b.pageY,h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(h[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),e.grid&&(c=this.originalPageY+Math.round((g-this.originalPageY)/e.grid[1])*e.grid[1],g=this.containment?c-this.offset.click.top>=this.containment[1]&&c-this.offset.click.top<=this.containment[3]?c:c-this.offset.click.top>=this.containment[1]?c-e.grid[1]:c+e.grid[1]:c,d=this.originalPageX+Math.round((f-this.originalPageX)/e.grid[0])*e.grid[0],f=this.containment?d-this.offset.click.left>=this.containment[0]&&d-this.offset.click.left<=this.containment[2]?d:d-this.offset.click.left>=this.containment[0]?d-e.grid[0]:d+e.grid[0]:d)),{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():i?0:h.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():i?0:h.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this.counter;this._delay(function(){e===this.counter&&this.refreshPositions(!d)})},_clear:function(a,b){function e(a,b,c){return function(d){c._trigger(a,d,b._uiHash(b))}}this.reverting=!1;var c,d=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(c in this._storedCSS)("auto"===this._storedCSS[c]||"static"===this._storedCSS[c])&&(this._storedCSS[c]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!b&&d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||b||d.push(function(a){this._trigger("update",a,this._uiHash())}),this!==this.currentContainer&&(b||(d.push(function(a){this._trigger("remove",a,this._uiHash())}),d.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),d.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer)))),c=this.containers.length-1;c>=0;c--)b||d.push(e("deactivate",this,this.containers[c])),this.containers[c].containerCache.over&&(d.push(e("out",this,this.containers[c])),this.containers[c].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!b){for(this._trigger("beforeStop",a,this._uiHash()),c=0;c<d.length;c++)d[c].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!1}if(b||this._trigger("beforeStop",a,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!b){for(c=0;c<d.length;c++)d[c].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}})}(jQuery),function(a,b){var c="ui-effects-";a.effects={effect:{}},function(a,b){function m(a,b,c){var d=h[b.type]||{};return null==a?c||!b.def?null:b.def:(a=d.floor?~~a:parseFloat(a),isNaN(a)?b.def:d.mod?(a+d.mod)%d.mod:0>a?0:d.max<a?d.max:a)}function n(b){var c=f(),d=c._rgba=[];return b=b.toLowerCase(),l(e,function(a,e){var f,h=e.re.exec(b),i=h&&e.parse(h),j=e.space||"rgba";return i?(f=c[j](i),c[g[j].cache]=f[g[j].cache],d=c._rgba=f._rgba,!1):void 0}),d.length?("0,0,0,0"===d.join()&&a.extend(d,k.transparent),c):k[b]}function o(a,b,c){return c=(c+1)%1,1>6*c?a+6*(b-a)*c:1>2*c?b:2>3*c?a+6*(b-a)*(2/3-c):a}var k,c="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",d=/^([\-+])=\s*(\d+\.?\d*)/,e=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],f=a.Color=function(b,c,d,e){return new a.Color.fn.parse(b,c,d,e)},g={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},h={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},i=f.support={},j=a("<p>")[0],l=a.each;j.style.cssText="background-color:rgba(1,1,1,.5)",i.rgba=j.style.backgroundColor.indexOf("rgba")>-1,l(g,function(a,b){b.cache="_"+a,b.props.alpha={idx:3,type:"percent",def:1}}),f.fn=a.extend(f.prototype,{parse:function(c,d,e,h){if(c===b)return this._rgba=[null,null,null,null],this;(c.jquery||c.nodeType)&&(c=a(c).css(d),d=b);var i=this,j=a.type(c),o=this._rgba=[];return d!==b&&(c=[c,d,e,h],j="array"),"string"===j?this.parse(n(c)||k._default):"array"===j?(l(g.rgba.props,function(a,b){o[b.idx]=m(c[b.idx],b)}),this):"object"===j?(c instanceof f?l(g,function(a,b){c[b.cache]&&(i[b.cache]=c[b.cache].slice())}):l(g,function(b,d){var e=d.cache;l(d.props,function(a,b){if(!i[e]&&d.to){if("alpha"===a||null==c[a])return;i[e]=d.to(i._rgba)}i[e][b.idx]=m(c[a],b,!0)}),i[e]&&a.inArray(null,i[e].slice(0,3))<0&&(i[e][3]=1,d.from&&(i._rgba=d.from(i[e])))}),this):void 0},is:function(a){var b=f(a),c=!0,d=this;return l(g,function(a,e){var f,g=b[e.cache];return g&&(f=d[e.cache]||e.to&&e.to(d._rgba)||[],l(e.props,function(a,b){return null!=g[b.idx]?c=g[b.idx]===f[b.idx]:void 0})),c}),c},_space:function(){var a=[],b=this;return l(g,function(c,d){b[d.cache]&&a.push(c)}),a.pop()},transition:function(a,b){var c=f(a),d=c._space(),e=g[d],i=0===this.alpha()?f("transparent"):this,j=i[e.cache]||e.to(i._rgba),k=j.slice();return c=c[e.cache],l(e.props,function(a,d){var e=d.idx,f=j[e],g=c[e],i=h[d.type]||{};null!==g&&(null===f?k[e]=g:(i.mod&&(g-f>i.mod/2?f+=i.mod:f-g>i.mod/2&&(f-=i.mod)),k[e]=m((g-f)*b+f,d)))}),this[d](k)},blend:function(b){if(1===this._rgba[3])return this;var c=this._rgba.slice(),d=c.pop(),e=f(b)._rgba;return f(a.map(c,function(a,b){return(1-d)*e[b]+d*a}))},toRgbaString:function(){var b="rgba(",c=a.map(this._rgba,function(a,b){return null==a?b>2?1:0:a});return 1===c[3]&&(c.pop(),b="rgb("),b+c.join()+")"},toHslaString:function(){var b="hsla(",c=a.map(this.hsla(),function(a,b){return null==a&&(a=b>2?1:0),b&&3>b&&(a=Math.round(100*a)+"%"),a});return 1===c[3]&&(c.pop(),b="hsl("),b+c.join()+")"},toHexString:function(b){var c=this._rgba.slice(),d=c.pop();return b&&c.push(~~(255*d)),"#"+a.map(c,function(a){return a=(a||0).toString(16),1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),f.fn.parse.prototype=f.fn,g.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var k,l,b=a[0]/255,c=a[1]/255,d=a[2]/255,e=a[3],f=Math.max(b,c,d),g=Math.min(b,c,d),h=f-g,i=f+g,j=.5*i;return k=g===f?0:b===f?60*(c-d)/h+360:c===f?60*(d-b)/h+120:60*(b-c)/h+240,l=0===h?0:.5>=j?h/i:h/(2-i),[Math.round(k)%360,l,j,null==e?1:e]},g.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,c=a[1],d=a[2],e=a[3],f=.5>=d?d*(1+c):d+c-d*c,g=2*d-f;return[Math.round(255*o(g,f,b+1/3)),Math.round(255*o(g,f,b)),Math.round(255*o(g,f,b-1/3)),e]},l(g,function(c,e){var g=e.props,h=e.cache,i=e.to,j=e.from;f.fn[c]=function(c){if(i&&!this[h]&&(this[h]=i(this._rgba)),c===b)return this[h].slice();var d,e=a.type(c),k="array"===e||"object"===e?c:arguments,n=this[h].slice();return l(g,function(a,b){var c=k["object"===e?a:b.idx];null==c&&(c=n[b.idx]),n[b.idx]=m(c,b)}),j?(d=f(j(n)),d[h]=n,d):f(n)},l(g,function(b,e){f.fn[b]||(f.fn[b]=function(f){var k,g=a.type(f),h="alpha"===b?this._hsla?"hsla":"rgba":c,i=this[h](),j=i[e.idx];return"undefined"===g?j:("function"===g&&(f=f.call(this,j),g=a.type(f)),null==f&&e.empty?this:("string"===g&&(k=d.exec(f),k&&(f=j+parseFloat(k[2])*("+"===k[1]?1:-1))),i[e.idx]=f,this[h](i)))})})}),f.hook=function(b){var c=b.split(" ");l(c,function(b,c){a.cssHooks[c]={set:function(b,d){var e,g,h="";if("transparent"!==d&&("string"!==a.type(d)||(e=n(d)))){if(d=f(e||d),!i.rgba&&1!==d._rgba[3]){for(g="backgroundColor"===c?b.parentNode:b;(""===h||"transparent"===h)&&g&&g.style;)try{h=a.css(g,"backgroundColor"),g=g.parentNode}catch(j){}d=d.blend(h&&"transparent"!==h?h:"_default")}d=d.toRgbaString()}try{b.style[c]=d}catch(j){}}},a.fx.step[c]=function(b){b.colorInit||(b.start=f(b.elem,c),b.end=f(b.end),b.colorInit=!0),a.cssHooks[c].set(b.elem,b.start.transition(b.end,b.pos))}})},f.hook(c),a.cssHooks.borderColor={expand:function(a){var b={};return l(["Top","Right","Bottom","Left"],function(c,d){b["border"+d+"Color"]=a}),b}},k=a.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function e(b){var c,d,e=b.ownerDocument.defaultView?b.ownerDocument.defaultView.getComputedStyle(b,null):b.currentStyle,f={};if(e&&e.length&&e[0]&&e[e[0]])for(d=e.length;d--;)c=e[d],"string"==typeof e[c]&&(f[a.camelCase(c)]=e[c]);else for(c in e)"string"==typeof e[c]&&(f[c]=e[c]);return f}function f(b,c){var f,g,e={};for(f in c)g=c[f],b[f]!==g&&(d[f]||(a.fx.step[f]||!isNaN(parseFloat(g)))&&(e[f]=g));return e}var c=["add","remove","toggle"],d={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(b,c){a.fx.step[c]=function(a){("none"!==a.end&&!a.setAttr||1===a.pos&&!a.setAttr)&&(jQuery.style(a.elem,c,a.end),a.setAttr=!0)}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a.effects.animateClass=function(b,d,g,h){var i=a.speed(d,g,h);return this.queue(function(){var h,d=a(this),g=d.attr("class")||"",j=i.children?d.find("*").addBack():d;j=j.map(function(){var b=a(this);return{el:b,start:e(this)}}),h=function(){a.each(c,function(a,c){b[c]&&d[c+"Class"](b[c])})},h(),j=j.map(function(){return this.end=e(this.el[0]),this.diff=f(this.start,this.end),this}),d.attr("class",g),j=j.map(function(){var b=this,c=a.Deferred(),d=a.extend({},i,{queue:!1,complete:function(){c.resolve(b)}});return this.el.animate(this.diff,d),c.promise()}),a.when.apply(a,j.get()).done(function(){h(),a.each(arguments,function(){var b=this.el;a.each(this.diff,function(a){b.css(a,"")})}),i.complete.call(d[0])})})},a.fn.extend({addClass:function(b){return function(c,d,e,f){return d?a.effects.animateClass.call(this,{add:c},d,e,f):b.apply(this,arguments)}}(a.fn.addClass),removeClass:function(b){return function(c,d,e,f){return arguments.length>1?a.effects.animateClass.call(this,{remove:c},d,e,f):b.apply(this,arguments)}}(a.fn.removeClass),toggleClass:function(c){return function(d,e,f,g,h){return"boolean"==typeof e||e===b?f?a.effects.animateClass.call(this,e?{add:d}:{remove:d},f,g,h):c.apply(this,arguments):a.effects.animateClass.call(this,{toggle:d},e,f,g)}}(a.fn.toggleClass),switchClass:function(b,c,d,e,f){return a.effects.animateClass.call(this,{add:c,remove:b},d,e,f)}})}(),function(){function d(b,c,d,e){return a.isPlainObject(b)&&(c=b,b=b.effect),b={effect:b},null==c&&(c={}),a.isFunction(c)&&(e=c,d=null,c={}),("number"==typeof c||a.fx.speeds[c])&&(e=d,d=c,c={}),a.isFunction(d)&&(e=d,d=null),c&&a.extend(b,c),d=d||c.duration,b.duration=a.fx.off?0:"number"==typeof d?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,b.complete=e||c.complete,b}function e(b){return!b||"number"==typeof b||a.fx.speeds[b]?!0:"string"!=typeof b||a.effects.effect[b]?a.isFunction(b)?!0:"object"!=typeof b||b.effect?!1:!0:!0}a.extend(a.effects,{version:"1.10.4",save:function(a,b){for(var d=0;d<b.length;d++)null!==b[d]&&a.data(c+b[d],a[0].style[b[d]])},restore:function(a,d){var e,f;for(f=0;f<d.length;f++)null!==d[f]&&(e=a.data(c+d[f]),e===b&&(e=""),a.css(d[f],e))},setMode:function(a,b){return"toggle"===b&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,b){var c,d;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":d=0;break;case"center":d=.5;break;case"right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:b.width(),height:b.height()},f=document.activeElement;try{f.id}catch(g){f=document.body}return b.wrap(d),(b[0]===f||a.contains(b[0],f))&&a(f).focus(),d=b.parent(),"static"===b.css("position")?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d),isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),b.css(e),d.css(c).show()},removeWrapper:function(b){var c=document.activeElement;return b.parent().is(".ui-effects-wrapper")&&(b.parent().replaceWith(b),(b[0]===c||a.contains(b[0],c))&&a(c).focus()),b},setTransition:function(b,c,d,e){return e=e||{},a.each(c,function(a,c){var f=b.cssUnit(c);f[0]>0&&(e[c]=f[0]*d+f[1])}),e}}),a.fn.extend({effect:function(){function g(c){function h(){a.isFunction(e)&&e.call(d[0]),a.isFunction(c)&&c()}var d=a(this),e=b.complete,g=b.mode;(d.is(":hidden")?"hide"===g:"show"===g)?(d[g](),h()):f.call(d[0],b,h)}var b=d.apply(this,arguments),c=b.mode,e=b.queue,f=a.effects.effect[b.effect];return a.fx.off||!f?c?this[c](b.duration,b.complete):this.each(function(){b.complete&&b.complete.call(this)}):e===!1?this.each(g):this.queue(e||"fx",g)},show:function(a){return function(b){if(e(b))return a.apply(this,arguments);var c=d.apply(this,arguments);return c.mode="show",this.effect.call(this,c)}}(a.fn.show),hide:function(a){return function(b){if(e(b))return a.apply(this,arguments);var c=d.apply(this,arguments);return c.mode="hide",this.effect.call(this,c)}}(a.fn.hide),toggle:function(a){return function(b){if(e(b)||"boolean"==typeof b)return a.apply(this,arguments);var c=d.apply(this,arguments);return c.mode="toggle",this.effect.call(this,c)}}(a.fn.toggle),cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])}),d}})}(),function(){var b={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,c){b[c]=function(b){return Math.pow(b,a+2)}}),a.extend(b,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;a<((b=Math.pow(2,--c))-1)/11;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}}),a.each(b,function(b,c){a.easing["easeIn"+b]=c,a.easing["easeOut"+b]=function(a){return 1-c(1-a)},a.easing["easeInOut"+b]=function(a){return.5>a?c(2*a)/2:1-c(-2*a+2)/2}})}()}(jQuery),function(a){var c=0,d={},e={};d.height=d.paddingTop=d.paddingBottom=d.borderTopWidth=d.borderBottomWidth="hide",e.height=e.paddingTop=e.paddingBottom=e.borderTopWidth=e.borderBottomWidth="show",a.widget("ui.accordion",{version:"1.10.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var b=this.options;this.prevShow=this.prevHide=a(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),b.collapsible||b.active!==!1&&null!=b.active||(b.active=0),this._processPanels(),b.active<0&&(b.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():a(),content:this.active.length?this.active.next():a()}},_createIcons:function(){var b=this.options.icons;b&&(a("<span>").addClass("ui-accordion-header-icon ui-icon "+b.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(b.header).addClass(b.activeHeader),this.headers.addClass("ui-accordion-icons"))
},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var a;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),a=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&a.css("height","")},_setOption:function(a,b){return"active"===a?(this._activate(b),void 0):("event"===a&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(b)),this._super(a,b),"collapsible"!==a||b||this.options.active!==!1||this._activate(0),"icons"===a&&(this._destroyIcons(),b&&this._createIcons()),"disabled"===a&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!b),void 0)},_keydown:function(b){if(!b.altKey&&!b.ctrlKey){var c=a.ui.keyCode,d=this.headers.length,e=this.headers.index(b.target),f=!1;switch(b.keyCode){case c.RIGHT:case c.DOWN:f=this.headers[(e+1)%d];break;case c.LEFT:case c.UP:f=this.headers[(e-1+d)%d];break;case c.SPACE:case c.ENTER:this._eventHandler(b);break;case c.HOME:f=this.headers[0];break;case c.END:f=this.headers[d-1]}f&&(a(b.target).attr("tabIndex",-1),a(f).attr("tabIndex",0),f.focus(),b.preventDefault())}},_panelKeyDown:function(b){b.keyCode===a.ui.keyCode.UP&&b.ctrlKey&&a(b.currentTarget).prev().focus()},refresh:function(){var b=this.options;this._processPanels(),b.active===!1&&b.collapsible===!0||!this.headers.length?(b.active=!1,this.active=a()):b.active===!1?this._activate(0):this.active.length&&!a.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(b.active=!1,this.active=a()):this._activate(Math.max(0,b.active-1)):b.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var b,d=this.options,e=d.heightStyle,f=this.element.parent(),g=this.accordionId="ui-accordion-"+(this.element.attr("id")||++c);this.active=this._findActive(d.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(b){var c=a(this),d=c.attr("id"),e=c.next(),f=e.attr("id");d||(d=g+"-header-"+b,c.attr("id",d)),f||(f=g+"-panel-"+b,e.attr("id",f)),c.attr("aria-controls",f),e.attr("aria-labelledby",d)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(d.event),"fill"===e?(b=f.height(),this.element.siblings(":visible").each(function(){var c=a(this),d=c.css("position");"absolute"!==d&&"fixed"!==d&&(b-=c.outerHeight(!0))}),this.headers.each(function(){b-=a(this).outerHeight(!0)}),this.headers.next().each(function(){a(this).height(Math.max(0,b-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===e&&(b=0,this.headers.next().each(function(){b=Math.max(b,a(this).css("height","").height())}).height(b))},_activate:function(b){var c=this._findActive(b)[0];c!==this.active[0]&&(c=c||this.active[0],this._eventHandler({target:c,currentTarget:c,preventDefault:a.noop}))},_findActive:function(b){return"number"==typeof b?this.headers.eq(b):a()},_setupEvents:function(b){var c={keydown:"_keydown"};b&&a.each(b.split(" "),function(a,b){c[b]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,c),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(b){var c=this.options,d=this.active,e=a(b.currentTarget),f=e[0]===d[0],g=f&&c.collapsible,h=g?a():e.next(),i=d.next(),j={oldHeader:d,oldPanel:i,newHeader:g?a():e,newPanel:h};b.preventDefault(),f&&!c.collapsible||this._trigger("beforeActivate",b,j)===!1||(c.active=g?!1:this.headers.index(e),this.active=f?a():e,this._toggle(j),d.removeClass("ui-accordion-header-active ui-state-active"),c.icons&&d.children(".ui-accordion-header-icon").removeClass(c.icons.activeHeader).addClass(c.icons.header),f||(e.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),c.icons&&e.children(".ui-accordion-header-icon").removeClass(c.icons.header).addClass(c.icons.activeHeader),e.next().addClass("ui-accordion-content-active")))},_toggle:function(b){var c=b.newPanel,d=this.prevShow.length?this.prevShow:b.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=c,this.prevHide=d,this.options.animate?this._animate(c,d,b):(d.hide(),c.show(),this._toggleComplete(b)),d.attr({"aria-hidden":"true"}),d.prev().attr("aria-selected","false"),c.length&&d.length?d.prev().attr({tabIndex:-1,"aria-expanded":"false"}):c.length&&this.headers.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1),c.attr("aria-hidden","false").prev().attr({"aria-selected":"true",tabIndex:0,"aria-expanded":"true"})},_animate:function(a,b,c){var f,g,h,i=this,j=0,k=a.length&&(!b.length||a.index()<b.index()),l=this.options.animate||{},m=k&&l.down||l,n=function(){i._toggleComplete(c)};return"number"==typeof m&&(h=m),"string"==typeof m&&(g=m),g=g||m.easing||l.easing,h=h||m.duration||l.duration,b.length?a.length?(f=a.show().outerHeight(),b.animate(d,{duration:h,easing:g,step:function(a,b){b.now=Math.round(a)}}),a.hide().animate(e,{duration:h,easing:g,complete:n,step:function(a,c){c.now=Math.round(a),"height"!==c.prop?j+=c.now:"content"!==i.options.heightStyle&&(c.now=Math.round(f-b.outerHeight()-j),j=0)}}),void 0):b.animate(d,h,g,n):a.animate(e,h,g,n)},_toggleComplete:function(a){var b=a.oldPanel;b.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),b.length&&(b.parent()[0].className=b.parent()[0].className),this._trigger("activate",null,a)}})}(jQuery),function(a){a.widget("ui.autocomplete",{version:"1.10.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var b,c,d,e=this.element[0].nodeName.toLowerCase(),f="textarea"===e,g="input"===e;this.isMultiLine=f?!0:g?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[f||g?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(e){if(this.element.prop("readOnly"))return b=!0,d=!0,c=!0,void 0;b=!1,d=!1,c=!1;var f=a.ui.keyCode;switch(e.keyCode){case f.PAGE_UP:b=!0,this._move("previousPage",e);break;case f.PAGE_DOWN:b=!0,this._move("nextPage",e);break;case f.UP:b=!0,this._keyEvent("previous",e);break;case f.DOWN:b=!0,this._keyEvent("next",e);break;case f.ENTER:case f.NUMPAD_ENTER:this.menu.active&&(b=!0,e.preventDefault(),this.menu.select(e));break;case f.TAB:this.menu.active&&this.menu.select(e);break;case f.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(e),e.preventDefault());break;default:c=!0,this._searchTimeout(e)}},keypress:function(d){if(b)return b=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&d.preventDefault(),void 0;if(!c){var e=a.ui.keyCode;switch(d.keyCode){case e.PAGE_UP:this._move("previousPage",d);break;case e.PAGE_DOWN:this._move("nextPage",d);break;case e.UP:this._keyEvent("previous",d);break;case e.DOWN:this._keyEvent("next",d)}}},input:function(a){return d?(d=!1,a.preventDefault(),void 0):(this._searchTimeout(a),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(a){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(a),this._change(a),void 0)}}),this._initSource(),this.menu=a("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(b){b.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var c=this.menu.element[0];a(b.target).closest(".ui-menu-item").length||this._delay(function(){var b=this;this.document.one("mousedown",function(d){d.target===b.element[0]||d.target===c||a.contains(c,d.target)||b.close()})})},menufocus:function(b,c){if(this.isNewMenu&&(this.isNewMenu=!1,b.originalEvent&&/^mouse/.test(b.originalEvent.type)))return this.menu.blur(),this.document.one("mousemove",function(){a(b.target).trigger(b.originalEvent)}),void 0;var d=c.item.data("ui-autocomplete-item");!1!==this._trigger("focus",b,{item:d})?b.originalEvent&&/^key/.test(b.originalEvent.type)&&this._value(d.value):this.liveRegion.text(d.value)},menuselect:function(a,b){var c=b.item.data("ui-autocomplete-item"),d=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=d,this._delay(function(){this.previous=d,this.selectedItem=c})),!1!==this._trigger("select",a,{item:c})&&this._value(c.value),this.term=this._value(),this.close(a),this.selectedItem=c}}),this.liveRegion=a("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(a,b){this._super(a,b),"source"===a&&this._initSource(),"appendTo"===a&&this.menu.element.appendTo(this._appendTo()),"disabled"===a&&b&&this.xhr&&this.xhr.abort()},_appendTo:function(){var b=this.options.appendTo;return b&&(b=b.jquery||b.nodeType?a(b):this.document.find(b).eq(0)),b||(b=this.element.closest(".ui-front")),b.length||(b=this.document[0].body),b},_initSource:function(){var b,c,d=this;a.isArray(this.options.source)?(b=this.options.source,this.source=function(c,d){d(a.ui.autocomplete.filter(b,c.term))}):"string"==typeof this.options.source?(c=this.options.source,this.source=function(b,e){d.xhr&&d.xhr.abort(),d.xhr=a.ajax({url:c,data:b,dataType:"json",success:function(a){e(a)},error:function(){e([])}})}):this.source=this.options.source},_searchTimeout:function(a){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,a))},this.options.delay)},search:function(a,b){return a=null!=a?a:this._value(),this.term=this._value(),a.length<this.options.minLength?this.close(b):this._trigger("search",b)!==!1?this._search(a):void 0},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:a},this._response())},_response:function(){var b=++this.requestIndex;return a.proxy(function(a){b===this.requestIndex&&this.__response(a),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(a){a&&(a=this._normalize(a)),this._trigger("response",null,{content:a}),!this.options.disabled&&a&&a.length&&!this.cancelSearch?(this._suggest(a),this._trigger("open")):this._close()},close:function(a){this.cancelSearch=!0,this._close(a)},_close:function(a){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"==typeof b?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty();this._renderMenu(c,b),this.isNewMenu=!0,this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItemData(b,c)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-autocomplete-item",b)},_renderItem:function(b,c){return a("<li>").append(a("<a>").text(c.label)).appendTo(b)},_move:function(a,b){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(a)||this.menu.isLastItem()&&/^next/.test(a)?(this._value(this.term),this.menu.blur(),void 0):(this.menu[a](b),void 0):(this.search(null,b),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(a,b){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(a,b),b.preventDefault())}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}}),a.widget("ui.autocomplete",a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(a){return a+(a>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(a){var b;this._superApply(arguments),this.options.disabled||this.cancelSearch||(b=a&&a.length?this.options.messages.results(a.length):this.options.messages.noResults,this.liveRegion.text(b))}})}(jQuery),function(a){var c,d="ui-button ui-widget ui-state-default ui-corner-all",e="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",f=function(){var b=a(this);setTimeout(function(){b.find(":ui-button").button("refresh")},1)},g=function(b){var c=b.name,d=b.form,e=a([]);return c&&(c=c.replace(/'/g,"\\'"),e=d?a(d).find("[name='"+c+"']"):a("[name='"+c+"']",b.ownerDocument).filter(function(){return!this.form})),e};a.widget("ui.button",{version:"1.10.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,f),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var b=this,e=this.options,h="checkbox"===this.type||"radio"===this.type,i=h?"":"ui-state-active";null===e.label&&(e.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(d).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){e.disabled||this===c&&a(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){e.disabled||a(this).removeClass(i)}).bind("click"+this.eventNamespace,function(a){e.disabled&&(a.preventDefault(),a.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),h&&this.element.bind("change"+this.eventNamespace,function(){b.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return e.disabled?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(e.disabled)return!1;a(this).addClass("ui-state-active"),b.buttonElement.attr("aria-pressed","true");var c=b.element[0];g(c).not(c).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return e.disabled?!1:(a(this).addClass("ui-state-active"),c=this,b.document.one("mouseup",function(){c=null}),void 0)}).bind("mouseup"+this.eventNamespace,function(){return e.disabled?!1:(a(this).removeClass("ui-state-active"),void 0)}).bind("keydown"+this.eventNamespace,function(b){return e.disabled?!1:((b.keyCode===a.ui.keyCode.SPACE||b.keyCode===a.ui.keyCode.ENTER)&&a(this).addClass("ui-state-active"),void 0)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()})),this._setOption("disabled",e.disabled),this._resetButton()},_determineButtonType:function(){var a,b,c;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(a=this.element.parents().last(),b="label[for='"+this.element.attr("id")+"']",this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible"),c=this.element.is(":checked"),c&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",c)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(d+" ui-state-active "+e).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(a,b){return this._super(a,b),"disabled"===a?(this.element.prop("disabled",!!b),b&&this.buttonElement.removeClass("ui-state-focus"),void 0):(this._resetButton(),void 0)},refresh:function(){var b=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");b!==this.options.disabled&&this._setOption("disabled",b),"radio"===this.type?g(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),void 0;var b=this.buttonElement.removeClass(e),c=a("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,f=d.primary&&d.secondary,g=[];d.primary||d.secondary?(this.options.text&&g.push("ui-button-text-icon"+(f?"s":d.primary?"-primary":"-secondary")),d.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(g.push(f?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||b.attr("title",a.trim(c)))):g.push("ui-button-text-only"),b.addClass(g.join(" "))}}),a.widget("ui.buttonset",{version:"1.10.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,b){"disabled"===a&&this.buttons.button("option",a,b),this._super(a,b)},refresh:function(){var b="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(a,b){function e(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},a.extend(this._defaults,this.regional[""]),this.dpDiv=f(a("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function f(b){var c="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return b.delegate(c,"mouseout",function(){a(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).removeClass("ui-datepicker-next-hover")}).delegate(c,"mouseover",function(){a.datepicker._isDisabledDatepicker(d.inline?b.parent()[0]:d.input[0])||(a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),a(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).addClass("ui-datepicker-next-hover"))})}function g(b,c){a.extend(b,c);for(var d in c)null==c[d]&&(b[d]=c[d]);return b}a.extend(a.ui,{datepicker:{version:"1.10.4"}});var d,c="datepicker";a.extend(e.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return g(this._defaults,a||{}),this},_attachDatepicker:function(b,c){var d,e,f;d=b.nodeName.toLowerCase(),e="div"===d||"span"===d,b.id||(this.uuid+=1,b.id="dp"+this.uuid),f=this._newInst(a(b),e),f.settings=a.extend({},c||{}),"input"===d?this._connectDatepicker(b,f):e&&this._inlineDatepicker(b,f)},_newInst:function(b,c){var d=b[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:d,input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:c,dpDiv:c?f(a("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(b,d){var e=a(b);d.append=a([]),d.trigger=a([]),e.hasClass(this.markerClassName)||(this._attachments(e,d),e.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(d),a.data(b,c,d),d.settings.disabled&&this._disableDatepicker(b))},_attachments:function(b,c){var d,e,f,g=this._get(c,"appendText"),h=this._get(c,"isRTL");c.append&&c.append.remove(),g&&(c.append=a("<span class='"+this._appendClass+"'>"+g+"</span>"),b[h?"before":"after"](c.append)),b.unbind("focus",this._showDatepicker),c.trigger&&c.trigger.remove(),d=this._get(c,"showOn"),("focus"===d||"both"===d)&&b.focus(this._showDatepicker),("button"===d||"both"===d)&&(e=this._get(c,"buttonText"),f=this._get(c,"buttonImage"),c.trigger=a(this._get(c,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:f,alt:e,title:e}):a("<button type='button'></button>").addClass(this._triggerClass).html(f?a("<img/>").attr({src:f,alt:e,title:e}):e)),b[h?"before":"after"](c.trigger),c.trigger.click(function(){return a.datepicker._datepickerShowing&&a.datepicker._lastInput===b[0]?a.datepicker._hideDatepicker():a.datepicker._datepickerShowing&&a.datepicker._lastInput!==b[0]?(a.datepicker._hideDatepicker(),a.datepicker._showDatepicker(b[0])):a.datepicker._showDatepicker(b[0]),!1}))},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b,c,d,e,f=new Date(2009,11,20),g=this._get(a,"dateFormat");g.match(/[DM]/)&&(b=function(a){for(c=0,d=0,e=0;e<a.length;e++)a[e].length>c&&(c=a[e].length,d=e);return d},f.setMonth(b(this._get(a,g.match(/MM/)?"monthNames":"monthNamesShort"))),f.setDate(b(this._get(a,g.match(/DD/)?"dayNames":"dayNamesShort"))+20-f.getDay())),a.input.attr("size",this._formatDate(a,f).length)}},_inlineDatepicker:function(b,d){var e=a(b);e.hasClass(this.markerClassName)||(e.addClass(this.markerClassName).append(d.dpDiv),a.data(b,c,d),this._setDate(d,this._getDefaultDate(d),!0),this._updateDatepicker(d),this._updateAlternate(d),d.settings.disabled&&this._disableDatepicker(b),d.dpDiv.css("display","block"))},_dialogDatepicker:function(b,d,e,f,h){var i,j,k,l,m,n=this._dialogInst;return n||(this.uuid+=1,i="dp"+this.uuid,this._dialogInput=a("<input type='text' id='"+i+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),a("body").append(this._dialogInput),n=this._dialogInst=this._newInst(this._dialogInput,!1),n.settings={},a.data(this._dialogInput[0],c,n)),g(n.settings,f||{}),d=d&&d.constructor===Date?this._formatDate(n,d):d,this._dialogInput.val(d),this._pos=h?h.length?h:[h.pageX,h.pageY]:null,this._pos||(j=document.documentElement.clientWidth,k=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,m=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[j/2-100+l,k/2-150+m]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),n.settings.onSelect=e,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),a.blockUI&&a.blockUI(this.dpDiv),a.data(this._dialogInput[0],c,n),this},_destroyDatepicker:function(b){var d,e=a(b),f=a.data(b,c);e.hasClass(this.markerClassName)&&(d=b.nodeName.toLowerCase(),a.removeData(b,c),"input"===d?(f.append.remove(),f.trigger.remove(),e.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===d||"span"===d)&&e.removeClass(this.markerClassName).empty())},_enableDatepicker:function(b){var d,e,f=a(b),g=a.data(b,c);f.hasClass(this.markerClassName)&&(d=b.nodeName.toLowerCase(),"input"===d?(b.disabled=!1,g.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===d||"span"===d)&&(e=f.children("."+this._inlineClass),e.children().removeClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}))},_disableDatepicker:function(b){var d,e,f=a(b),g=a.data(b,c);f.hasClass(this.markerClassName)&&(d=b.nodeName.toLowerCase(),"input"===d?(b.disabled=!0,g.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===d||"span"===d)&&(e=f.children("."+this._inlineClass),e.children().addClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}),this._disabledInputs[this._disabledInputs.length]=b)},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]===a)return!0;return!1},_getInst:function(b){try{return a.data(b,c)}catch(d){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(c,d,e){var f,h,i,j,k=this._getInst(c);return 2===arguments.length&&"string"==typeof d?"defaults"===d?a.extend({},a.datepicker._defaults):k?"all"===d?a.extend({},k.settings):this._get(k,d):null:(f=d||{},"string"==typeof d&&(f={},f[d]=e),k&&(this._curInst===k&&this._hideDatepicker(),h=this._getDateDatepicker(c,!0),i=this._getMinMaxDate(k,"min"),j=this._getMinMaxDate(k,"max"),g(k.settings,f),null!==i&&f.dateFormat!==b&&f.minDate===b&&(k.settings.minDate=this._formatDate(k,i)),null!==j&&f.dateFormat!==b&&f.maxDate===b&&(k.settings.maxDate=this._formatDate(k,j)),"disabled"in f&&(f.disabled?this._disableDatepicker(c):this._enableDatepicker(c)),this._attachments(a(c),k),this._autoSize(k),this._setDate(k,h),this._updateAlternate(k),this._updateDatepicker(k)),void 0)},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(b){var c,d,e,f=a.datepicker._getInst(b.target),g=!0,h=f.dpDiv.is(".ui-datepicker-rtl");if(f._keyEvent=!0,a.datepicker._datepickerShowing)switch(b.keyCode){case 9:a.datepicker._hideDatepicker(),g=!1;break;case 13:return e=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",f.dpDiv),e[0]&&a.datepicker._selectDay(b.target,f.selectedMonth,f.selectedYear,e[0]),c=a.datepicker._get(f,"onSelect"),c?(d=a.datepicker._formatDate(f),c.apply(f.input?f.input[0]:null,[d,f])):a.datepicker._hideDatepicker(),!1;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");
break;case 35:(b.ctrlKey||b.metaKey)&&a.datepicker._clearDate(b.target),g=b.ctrlKey||b.metaKey;break;case 36:(b.ctrlKey||b.metaKey)&&a.datepicker._gotoToday(b.target),g=b.ctrlKey||b.metaKey;break;case 37:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,h?1:-1,"D"),g=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 38:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,-7,"D"),g=b.ctrlKey||b.metaKey;break;case 39:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,h?-1:1,"D"),g=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 40:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,7,"D"),g=b.ctrlKey||b.metaKey;break;default:g=!1}else 36===b.keyCode&&b.ctrlKey?a.datepicker._showDatepicker(this):g=!1;g&&(b.preventDefault(),b.stopPropagation())},_doKeyPress:function(b){var c,d,e=a.datepicker._getInst(b.target);return a.datepicker._get(e,"constrainInput")?(c=a.datepicker._possibleChars(a.datepicker._get(e,"dateFormat")),d=String.fromCharCode(null==b.charCode?b.keyCode:b.charCode),b.ctrlKey||b.metaKey||" ">d||!c||c.indexOf(d)>-1):void 0},_doKeyUp:function(b){var c,d=a.datepicker._getInst(b.target);if(d.input.val()!==d.lastVal)try{c=a.datepicker.parseDate(a.datepicker._get(d,"dateFormat"),d.input?d.input.val():null,a.datepicker._getFormatConfig(d)),c&&(a.datepicker._setDateFromField(d),a.datepicker._updateAlternate(d),a.datepicker._updateDatepicker(d))}catch(e){}return!0},_showDatepicker:function(b){if(b=b.target||b,"input"!==b.nodeName.toLowerCase()&&(b=a("input",b.parentNode)[0]),!a.datepicker._isDisabledDatepicker(b)&&a.datepicker._lastInput!==b){var c,d,e,f,h,i,j;c=a.datepicker._getInst(b),a.datepicker._curInst&&a.datepicker._curInst!==c&&(a.datepicker._curInst.dpDiv.stop(!0,!0),c&&a.datepicker._datepickerShowing&&a.datepicker._hideDatepicker(a.datepicker._curInst.input[0])),d=a.datepicker._get(c,"beforeShow"),e=d?d.apply(b,[b,c]):{},e!==!1&&(g(c.settings,e),c.lastVal=null,a.datepicker._lastInput=b,a.datepicker._setDateFromField(c),a.datepicker._inDialog&&(b.value=""),a.datepicker._pos||(a.datepicker._pos=a.datepicker._findPos(b),a.datepicker._pos[1]+=b.offsetHeight),f=!1,a(b).parents().each(function(){return f|="fixed"===a(this).css("position"),!f}),h={left:a.datepicker._pos[0],top:a.datepicker._pos[1]},a.datepicker._pos=null,c.dpDiv.empty(),c.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),a.datepicker._updateDatepicker(c),h=a.datepicker._checkOffset(c,h,f),c.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":f?"fixed":"absolute",display:"none",left:h.left+"px",top:h.top+"px"}),c.inline||(i=a.datepicker._get(c,"showAnim"),j=a.datepicker._get(c,"duration"),c.dpDiv.zIndex(a(b).zIndex()+1),a.datepicker._datepickerShowing=!0,a.effects&&a.effects.effect[i]?c.dpDiv.show(i,a.datepicker._get(c,"showOptions"),j):c.dpDiv[i||"show"](i?j:null),a.datepicker._shouldFocusInput(c)&&c.input.focus(),a.datepicker._curInst=c))}},_updateDatepicker:function(b){this.maxRows=4,d=b,b.dpDiv.empty().append(this._generateHTML(b)),this._attachHandlers(b),b.dpDiv.find("."+this._dayOverClass+" a").mouseover();var c,e=this._getNumberOfMonths(b),f=e[1],g=17;b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),f>1&&b.dpDiv.addClass("ui-datepicker-multi-"+f).css("width",g*f+"em"),b.dpDiv[(1!==e[0]||1!==e[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),b===a.datepicker._curInst&&a.datepicker._datepickerShowing&&a.datepicker._shouldFocusInput(b)&&b.input.focus(),b.yearshtml&&(c=b.yearshtml,setTimeout(function(){c===b.yearshtml&&b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml),c=b.yearshtml=null},0))},_shouldFocusInput:function(a){return a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&!a.input.is(":focus")},_checkOffset:function(b,c,d){var e=b.dpDiv.outerWidth(),f=b.dpDiv.outerHeight(),g=b.input?b.input.outerWidth():0,h=b.input?b.input.outerHeight():0,i=document.documentElement.clientWidth+(d?0:a(document).scrollLeft()),j=document.documentElement.clientHeight+(d?0:a(document).scrollTop());return c.left-=this._get(b,"isRTL")?e-g:0,c.left-=d&&c.left===b.input.offset().left?a(document).scrollLeft():0,c.top-=d&&c.top===b.input.offset().top+h?a(document).scrollTop():0,c.left-=Math.min(c.left,c.left+e>i&&i>e?Math.abs(c.left+e-i):0),c.top-=Math.min(c.top,c.top+f>j&&j>f?Math.abs(f+h):0),c},_findPos:function(b){for(var c,d=this._getInst(b),e=this._get(d,"isRTL");b&&("hidden"===b.type||1!==b.nodeType||a.expr.filters.hidden(b));)b=b[e?"previousSibling":"nextSibling"];return c=a(b).offset(),[c.left,c.top]},_hideDatepicker:function(b){var d,e,f,g,h=this._curInst;!h||b&&h!==a.data(b,c)||this._datepickerShowing&&(d=this._get(h,"showAnim"),e=this._get(h,"duration"),f=function(){a.datepicker._tidyDialog(h)},a.effects&&(a.effects.effect[d]||a.effects[d])?h.dpDiv.hide(d,a.datepicker._get(h,"showOptions"),e,f):h.dpDiv["slideDown"===d?"slideUp":"fadeIn"===d?"fadeOut":"hide"](d?e:null,f),d||f(),this._datepickerShowing=!1,g=this._get(h,"onClose"),g&&g.apply(h.input?h.input[0]:null,[h.input?h.input.val():"",h]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),a.blockUI&&(a.unblockUI(),a("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(b){if(a.datepicker._curInst){var c=a(b.target),d=a.datepicker._getInst(c[0]);(c[0].id!==a.datepicker._mainDivId&&0===c.parents("#"+a.datepicker._mainDivId).length&&!c.hasClass(a.datepicker.markerClassName)&&!c.closest("."+a.datepicker._triggerClass).length&&a.datepicker._datepickerShowing&&(!a.datepicker._inDialog||!a.blockUI)||c.hasClass(a.datepicker.markerClassName)&&a.datepicker._curInst!==d)&&a.datepicker._hideDatepicker()}},_adjustDate:function(b,c,d){var e=a(b),f=this._getInst(e[0]);this._isDisabledDatepicker(e[0])||(this._adjustInstDate(f,c+("M"===d?this._get(f,"showCurrentAtPos"):0),d),this._updateDatepicker(f))},_gotoToday:function(b){var c,d=a(b),e=this._getInst(d[0]);this._get(e,"gotoCurrent")&&e.currentDay?(e.selectedDay=e.currentDay,e.drawMonth=e.selectedMonth=e.currentMonth,e.drawYear=e.selectedYear=e.currentYear):(c=new Date,e.selectedDay=c.getDate(),e.drawMonth=e.selectedMonth=c.getMonth(),e.drawYear=e.selectedYear=c.getFullYear()),this._notifyChange(e),this._adjustDate(d)},_selectMonthYear:function(b,c,d){var e=a(b),f=this._getInst(e[0]);f["selected"+("M"===d?"Month":"Year")]=f["draw"+("M"===d?"Month":"Year")]=parseInt(c.options[c.selectedIndex].value,10),this._notifyChange(f),this._adjustDate(e)},_selectDay:function(b,c,d,e){var f,g=a(b);a(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(g[0])||(f=this._getInst(g[0]),f.selectedDay=f.currentDay=a("a",e).html(),f.selectedMonth=f.currentMonth=c,f.selectedYear=f.currentYear=d,this._selectDate(b,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(b){var c=a(b);this._selectDate(c,"")},_selectDate:function(b,c){var d,e=a(b),f=this._getInst(e[0]);c=null!=c?c:this._formatDate(f),f.input&&f.input.val(c),this._updateAlternate(f),d=this._get(f,"onSelect"),d?d.apply(f.input?f.input[0]:null,[c,f]):f.input&&f.input.trigger("change"),f.inline?this._updateDatepicker(f):(this._hideDatepicker(),this._lastInput=f.input[0],"object"!=typeof f.input[0]&&f.input.focus(),this._lastInput=null)},_updateAlternate:function(b){var c,d,e,f=this._get(b,"altField");f&&(c=this._get(b,"altFormat")||this._get(b,"dateFormat"),d=this._getDate(b),e=this.formatDate(c,d,this._getFormatConfig(b)),a(f).each(function(){a(this).val(e)}))},noWeekends:function(a){var b=a.getDay();return[b>0&&6>b,""]},iso8601Week:function(a){var b,c=new Date(a.getTime());return c.setDate(c.getDate()+4-(c.getDay()||7)),b=c.getTime(),c.setMonth(0),c.setDate(1),Math.floor(Math.round((b-c)/864e5)/7)+1},parseDate:function(b,c,d){if(null==b||null==c)throw"Invalid arguments";if(c="object"==typeof c?c.toString():c+"",""===c)return null;var e,f,g,t,h=0,i=(d?d.shortYearCutoff:null)||this._defaults.shortYearCutoff,j="string"!=typeof i?i:(new Date).getFullYear()%100+parseInt(i,10),k=(d?d.dayNamesShort:null)||this._defaults.dayNamesShort,l=(d?d.dayNames:null)||this._defaults.dayNames,m=(d?d.monthNamesShort:null)||this._defaults.monthNamesShort,n=(d?d.monthNames:null)||this._defaults.monthNames,o=-1,p=-1,q=-1,r=-1,s=!1,u=function(a){var c=e+1<b.length&&b.charAt(e+1)===a;return c&&e++,c},v=function(a){var b=u(a),d="@"===a?14:"!"===a?20:"y"===a&&b?4:"o"===a?3:2,e=new RegExp("^\\d{1,"+d+"}"),f=c.substring(h).match(e);if(!f)throw"Missing number at position "+h;return h+=f[0].length,parseInt(f[0],10)},w=function(b,d,e){var f=-1,g=a.map(u(b)?e:d,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});if(a.each(g,function(a,b){var d=b[1];return c.substr(h,d.length).toLowerCase()===d.toLowerCase()?(f=b[0],h+=d.length,!1):void 0}),-1!==f)return f+1;throw"Unknown name at position "+h},x=function(){if(c.charAt(h)!==b.charAt(e))throw"Unexpected literal at position "+h;h++};for(e=0;e<b.length;e++)if(s)"'"!==b.charAt(e)||u("'")?x():s=!1;else switch(b.charAt(e)){case"d":q=v("d");break;case"D":w("D",k,l);break;case"o":r=v("o");break;case"m":p=v("m");break;case"M":p=w("M",m,n);break;case"y":o=v("y");break;case"@":t=new Date(v("@")),o=t.getFullYear(),p=t.getMonth()+1,q=t.getDate();break;case"!":t=new Date((v("!")-this._ticksTo1970)/1e4),o=t.getFullYear(),p=t.getMonth()+1,q=t.getDate();break;case"'":u("'")?x():s=!0;break;default:x()}if(h<c.length&&(g=c.substr(h),!/^\s+/.test(g)))throw"Extra/unparsed characters found in date: "+g;if(-1===o?o=(new Date).getFullYear():100>o&&(o+=(new Date).getFullYear()-(new Date).getFullYear()%100+(j>=o?0:-100)),r>-1)for(p=1,q=r;;){if(f=this._getDaysInMonth(o,p-1),f>=q)break;p++,q-=f}if(t=this._daylightSavingAdjust(new Date(o,p-1,q)),t.getFullYear()!==o||t.getMonth()+1!==p||t.getDate()!==q)throw"Invalid date";return t},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(a,b,c){if(!b)return"";var d,e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=function(b){var c=d+1<a.length&&a.charAt(d+1)===b;return c&&d++,c},j=function(a,b,c){var d=""+b;if(i(a))for(;d.length<c;)d="0"+d;return d},k=function(a,b,c,d){return i(a)?d[b]:c[b]},l="",m=!1;if(b)for(d=0;d<a.length;d++)if(m)"'"!==a.charAt(d)||i("'")?l+=a.charAt(d):m=!1;else switch(a.charAt(d)){case"d":l+=j("d",b.getDate(),2);break;case"D":l+=k("D",b.getDay(),e,f);break;case"o":l+=j("o",Math.round((new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime()-new Date(b.getFullYear(),0,0).getTime())/864e5),3);break;case"m":l+=j("m",b.getMonth()+1,2);break;case"M":l+=k("M",b.getMonth(),g,h);break;case"y":l+=i("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":l+=b.getTime();break;case"!":l+=1e4*b.getTime()+this._ticksTo1970;break;case"'":i("'")?l+="'":m=!0;break;default:l+=a.charAt(d)}return l},_possibleChars:function(a){var b,c="",d=!1,e=function(c){var d=b+1<a.length&&a.charAt(b+1)===c;return d&&b++,d};for(b=0;b<a.length;b++)if(d)"'"!==a.charAt(b)||e("'")?c+=a.charAt(b):d=!1;else switch(a.charAt(b)){case"d":case"m":case"y":case"@":c+="0123456789";break;case"D":case"M":return null;case"'":e("'")?c+="'":d=!0;break;default:c+=a.charAt(b)}return c},_get:function(a,c){return a.settings[c]!==b?a.settings[c]:this._defaults[c]},_setDateFromField:function(a,b){if(a.input.val()!==a.lastVal){var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e=this._getDefaultDate(a),f=e,g=this._getFormatConfig(a);try{f=this.parseDate(c,d,g)||e}catch(h){d=b?"":d}a.selectedDay=f.getDate(),a.drawMonth=a.selectedMonth=f.getMonth(),a.drawYear=a.selectedYear=f.getFullYear(),a.currentDay=d?f.getDate():0,a.currentMonth=d?f.getMonth():0,a.currentYear=d?f.getFullYear():0,this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(b,c,d){var e=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},f=function(c){try{return a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),c,a.datepicker._getFormatConfig(b))}catch(d){}for(var e=(c.toLowerCase().match(/^c/)?a.datepicker._getDate(b):null)||new Date,f=e.getFullYear(),g=e.getMonth(),h=e.getDate(),i=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,j=i.exec(c);j;){switch(j[2]||"d"){case"d":case"D":h+=parseInt(j[1],10);break;case"w":case"W":h+=7*parseInt(j[1],10);break;case"m":case"M":g+=parseInt(j[1],10),h=Math.min(h,a.datepicker._getDaysInMonth(f,g));break;case"y":case"Y":f+=parseInt(j[1],10),h=Math.min(h,a.datepicker._getDaysInMonth(f,g))}j=i.exec(c)}return new Date(f,g,h)},g=null==c||""===c?d:"string"==typeof c?f(c):"number"==typeof c?isNaN(c)?d:e(c):new Date(c.getTime());return g=g&&"Invalid Date"===g.toString()?d:g,g&&(g.setHours(0),g.setMinutes(0),g.setSeconds(0),g.setMilliseconds(0)),this._daylightSavingAdjust(g)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),e===a.selectedMonth&&f===a.selectedYear||c||this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){var b=!a.currentYear||a.input&&""===a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_attachHandlers:function(b){var c=this._get(b,"stepMonths"),d="#"+b.id.replace(/\\\\/g,"\\");b.dpDiv.find("[data-handler]").map(function(){var b={prev:function(){a.datepicker._adjustDate(d,-c,"M")},next:function(){a.datepicker._adjustDate(d,+c,"M")},hide:function(){a.datepicker._hideDatepicker()},today:function(){a.datepicker._gotoToday(d)},selectDay:function(){return a.datepicker._selectDay(d,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return a.datepicker._selectMonthYear(d,this,"M"),!1},selectYear:function(){return a.datepicker._selectMonthYear(d,this,"Y"),!1}};a(this).bind(this.getAttribute("data-event"),b[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O=new Date,P=this._daylightSavingAdjust(new Date(O.getFullYear(),O.getMonth(),O.getDate())),Q=this._get(a,"isRTL"),R=this._get(a,"showButtonPanel"),S=this._get(a,"hideIfNoPrevNext"),T=this._get(a,"navigationAsDateFormat"),U=this._getNumberOfMonths(a),V=this._get(a,"showCurrentAtPos"),W=this._get(a,"stepMonths"),X=1!==U[0]||1!==U[1],Y=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),Z=this._getMinMaxDate(a,"min"),$=this._getMinMaxDate(a,"max"),_=a.drawMonth-V,ab=a.drawYear;if(0>_&&(_+=12,ab--),$)for(b=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-U[0]*U[1]+1,$.getDate())),b=Z&&Z>b?Z:b;this._daylightSavingAdjust(new Date(ab,_,1))>b;)_--,0>_&&(_=11,ab--);for(a.drawMonth=_,a.drawYear=ab,c=this._get(a,"prevText"),c=T?this.formatDate(c,this._daylightSavingAdjust(new Date(ab,_-W,1)),this._getFormatConfig(a)):c,d=this._canAdjustMonth(a,-1,ab,_)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"e":"w")+"'>"+c+"</span></a>":S?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"e":"w")+"'>"+c+"</span></a>",e=this._get(a,"nextText"),e=T?this.formatDate(e,this._daylightSavingAdjust(new Date(ab,_+W,1)),this._getFormatConfig(a)):e,f=this._canAdjustMonth(a,1,ab,_)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"w":"e")+"'>"+e+"</span></a>":S?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"w":"e")+"'>"+e+"</span></a>",g=this._get(a,"currentText"),h=this._get(a,"gotoCurrent")&&a.currentDay?Y:P,g=T?this.formatDate(g,h,this._getFormatConfig(a)):g,i=a.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(a,"closeText")+"</button>",j=R?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Q?i:"")+(this._isInRange(a,h)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+g+"</button>":"")+(Q?"":i)+"</div>":"",k=parseInt(this._get(a,"firstDay"),10),k=isNaN(k)?0:k,l=this._get(a,"showWeek"),m=this._get(a,"dayNames"),n=this._get(a,"dayNamesMin"),o=this._get(a,"monthNames"),p=this._get(a,"monthNamesShort"),q=this._get(a,"beforeShowDay"),r=this._get(a,"showOtherMonths"),s=this._get(a,"selectOtherMonths"),t=this._getDefaultDate(a),u="",w=0;w<U[0];w++){for(x="",this.maxRows=4,y=0;y<U[1];y++){if(z=this._daylightSavingAdjust(new Date(ab,_,a.selectedDay)),A=" ui-corner-all",B="",X){if(B+="<div class='ui-datepicker-group",U[1]>1)switch(y){case 0:B+=" ui-datepicker-group-first",A=" ui-corner-"+(Q?"right":"left");break;case U[1]-1:B+=" ui-datepicker-group-last",A=" ui-corner-"+(Q?"left":"right");break;default:B+=" ui-datepicker-group-middle",A=""}B+="'>"}for(B+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+A+"'>"+(/all|left/.test(A)&&0===w?Q?f:d:"")+(/all|right/.test(A)&&0===w?Q?d:f:"")+this._generateMonthYearHeader(a,_,ab,Z,$,w>0||y>0,o,p)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",C=l?"<th class='ui-datepicker-week-col'>"+this._get(a,"weekHeader")+"</th>":"",v=0;7>v;v++)D=(v+k)%7,C+="<th"+((v+k+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+m[D]+"'>"+n[D]+"</span></th>";for(B+=C+"</tr></thead><tbody>",E=this._getDaysInMonth(ab,_),ab===a.selectedYear&&_===a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,E)),F=(this._getFirstDayOfMonth(ab,_)-k+7)%7,G=Math.ceil((F+E)/7),H=X?this.maxRows>G?this.maxRows:G:G,this.maxRows=H,I=this._daylightSavingAdjust(new Date(ab,_,1-F)),J=0;H>J;J++){for(B+="<tr>",K=l?"<td class='ui-datepicker-week-col'>"+this._get(a,"calculateWeek")(I)+"</td>":"",v=0;7>v;v++)L=q?q.apply(a.input?a.input[0]:null,[I]):[!0,""],M=I.getMonth()!==_,N=M&&!s||!L[0]||Z&&Z>I||$&&I>$,K+="<td class='"+((v+k+6)%7>=5?" ui-datepicker-week-end":"")+(M?" ui-datepicker-other-month":"")+(I.getTime()===z.getTime()&&_===a.selectedMonth&&a._keyEvent||t.getTime()===I.getTime()&&t.getTime()===z.getTime()?" "+this._dayOverClass:"")+(N?" "+this._unselectableClass+" ui-state-disabled":"")+(M&&!r?"":" "+L[1]+(I.getTime()===Y.getTime()?" "+this._currentClass:"")+(I.getTime()===P.getTime()?" ui-datepicker-today":""))+"'"+(M&&!r||!L[2]?"":" title='"+L[2].replace(/'/g,"&#39;")+"'")+(N?"":" data-handler='selectDay' data-event='click' data-month='"+I.getMonth()+"' data-year='"+I.getFullYear()+"'")+">"+(M&&!r?"&#xa0;":N?"<span class='ui-state-default'>"+I.getDate()+"</span>":"<a class='ui-state-default"+(I.getTime()===P.getTime()?" ui-state-highlight":"")+(I.getTime()===Y.getTime()?" ui-state-active":"")+(M?" ui-priority-secondary":"")+"' href='#'>"+I.getDate()+"</a>")+"</td>",I.setDate(I.getDate()+1),I=this._daylightSavingAdjust(I);B+=K+"</tr>"}_++,_>11&&(_=0,ab++),B+="</tbody></table>"+(X?"</div>"+(U[0]>0&&y===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=B}u+=x}return u+=j,a._keyEvent=!1,u},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o,p,q=this._get(a,"changeMonth"),r=this._get(a,"changeYear"),s=this._get(a,"showMonthAfterYear"),t="<div class='ui-datepicker-title'>",u="";if(f||!q)u+="<span class='ui-datepicker-month'>"+g[b]+"</span>";else{for(i=d&&d.getFullYear()===c,j=e&&e.getFullYear()===c,u+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",k=0;12>k;k++)(!i||k>=d.getMonth())&&(!j||k<=e.getMonth())&&(u+="<option value='"+k+"'"+(k===b?" selected='selected'":"")+">"+h[k]+"</option>");u+="</select>"}if(s||(t+=u+(!f&&q&&r?"":"&#xa0;")),!a.yearshtml)if(a.yearshtml="",f||!r)t+="<span class='ui-datepicker-year'>"+c+"</span>";else{for(l=this._get(a,"yearRange").split(":"),m=(new Date).getFullYear(),n=function(a){var b=a.match(/c[+\-].*/)?c+parseInt(a.substring(1),10):a.match(/[+\-].*/)?m+parseInt(a,10):parseInt(a,10);return isNaN(b)?m:b},o=n(l[0]),p=Math.max(o,n(l[1]||"")),o=d?Math.max(o,d.getFullYear()):o,p=e?Math.min(p,e.getFullYear()):p,a.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";p>=o;o++)a.yearshtml+="<option value='"+o+"'"+(o===c?" selected='selected'":"")+">"+o+"</option>";a.yearshtml+="</select>",t+=a.yearshtml,a.yearshtml=null}return t+=this._get(a,"yearSuffix"),s&&(t+=(!f&&q&&r?"":"&#xa0;")+u),t+="</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"===c?b:0),e=a.drawMonth+("M"===c?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+("D"===c?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),("M"===c||"Y"===c)&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&c>b?c:b;return d&&e>d?d:e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return null==b?[1,1]:"number"==typeof b?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return new Date(a,b,1).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(0>b?b:e[0]*e[1]),1));return 0>b&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c,d,e=this._getMinMaxDate(a,"min"),f=this._getMinMaxDate(a,"max"),g=null,h=null,i=this._get(a,"yearRange");return i&&(c=i.split(":"),d=(new Date).getFullYear(),g=parseInt(c[0],10),h=parseInt(c[1],10),c[0].match(/[+\-].*/)&&(g+=d),c[1].match(/[+\-].*/)&&(h+=d)),(!e||b.getTime()>=e.getTime())&&(!f||b.getTime()<=f.getTime())&&(!g||b.getFullYear()>=g)&&(!h||b.getFullYear()<=h)},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),a.fn.datepicker=function(b){if(!this.length)return this;a.datepicker.initialized||(a(document).mousedown(a.datepicker._checkExternalClick),a.datepicker.initialized=!0),0===a("#"+a.datepicker._mainDivId).length&&a("body").append(a.datepicker.dpDiv);var c=Array.prototype.slice.call(arguments,1);return"string"!=typeof b||"isDisabled"!==b&&"getDate"!==b&&"widget"!==b?"option"===b&&2===arguments.length&&"string"==typeof arguments[1]?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c)):this.each(function(){"string"==typeof b?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this].concat(c)):a.datepicker._attachDatepicker(this,b)}):a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c))},a.datepicker=new e,a.datepicker.initialized=!1,a.datepicker.uuid=(new Date).getTime(),a.datepicker.version="1.10.4"}(jQuery),function(a){var c={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},d={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};a.widget("ui.dialog",{version:"1.10.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(b){var c=a(this).css(b).offset().top;0>c&&a(this).css("top",b.top-c)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&a.fn.draggable&&this._makeDraggable(),this.options.resizable&&a.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var b=this.options.appendTo;return b&&(b.jquery||b.nodeType)?a(b):this.document.find(b||"body").eq(0)},_destroy:function(){var a,b=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),a=b.parent.children().eq(b.index),a.length&&a[0]!==this.element[0]?a.before(this.element):b.parent.append(this.element)},widget:function(){return this.uiDialog},disable:a.noop,enable:a.noop,close:function(b){var c,d=this;if(this._isOpen&&this._trigger("beforeClose",b)!==!1){if(this._isOpen=!1,this._destroyOverlay(),!this.opener.filter(":focusable").focus().length)try{c=this.document[0].activeElement,c&&"body"!==c.nodeName.toLowerCase()&&a(c).blur()}catch(e){}this._hide(this.uiDialog,this.options.hide,function(){d._trigger("close",b)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(a,b){var c=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return c&&!b&&this._trigger("focus",a),c},open:function(){var b=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),void 0):(this._isOpen=!0,this.opener=a(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){b._focusTabbable(),b._trigger("focus")}),this._trigger("open"),void 0)},_focusTabbable:function(){var a=this.element.find("[autofocus]");a.length||(a=this.element.find(":tabbable")),a.length||(a=this.uiDialogButtonPane.find(":tabbable")),a.length||(a=this.uiDialogTitlebarClose.filter(":tabbable")),a.length||(a=this.uiDialog),a.eq(0).focus()},_keepFocus:function(b){function c(){var b=this.document[0].activeElement,c=this.uiDialog[0]===b||a.contains(this.uiDialog[0],b);c||this._focusTabbable()}b.preventDefault(),c.call(this),this._delay(c)},_createWrapper:function(){this.uiDialog=a("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(b){if(this.options.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===a.ui.keyCode.ESCAPE)return b.preventDefault(),this.close(b),void 0;if(b.keyCode===a.ui.keyCode.TAB){var c=this.uiDialog.find(":tabbable"),d=c.filter(":first"),e=c.filter(":last");b.target!==e[0]&&b.target!==this.uiDialog[0]||b.shiftKey?b.target!==d[0]&&b.target!==this.uiDialog[0]||!b.shiftKey||(e.focus(1),b.preventDefault()):(d.focus(1),b.preventDefault())}},mousedown:function(a){this._moveToTop(a)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var b;this.uiDialogTitlebar=a("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(b){a(b.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=a("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(a){a.preventDefault(),this.close(a)}}),b=a("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(b),this.uiDialog.attr({"aria-labelledby":b.attr("id")})},_title:function(a){this.options.title||a.html("&#160;"),a.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=a("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=a("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var b=this,c=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),a.isEmptyObject(c)||a.isArray(c)&&!c.length?(this.uiDialog.removeClass("ui-dialog-buttons"),void 0):(a.each(c,function(c,d){var e,f;d=a.isFunction(d)?{click:d,text:c}:d,d=a.extend({type:"button"},d),e=d.click,d.click=function(){e.apply(b.element[0],arguments)},f={icons:d.icons,text:d.showText},delete d.icons,delete d.showText,a("<button></button>",d).button(f).appendTo(b.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),void 0)},_makeDraggable:function(){function d(a){return{position:a.position,offset:a.offset}}var b=this,c=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(c,e){a(this).addClass("ui-dialog-dragging"),b._blockFrames(),b._trigger("dragStart",c,d(e))},drag:function(a,c){b._trigger("drag",a,d(c))},stop:function(e,f){c.position=[f.position.left-b.document.scrollLeft(),f.position.top-b.document.scrollTop()],a(this).removeClass("ui-dialog-dragging"),b._unblockFrames(),b._trigger("dragStop",e,d(f))}})},_makeResizable:function(){function g(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}var b=this,c=this.options,d=c.resizable,e=this.uiDialog.css("position"),f="string"==typeof d?d:"n,e,s,w,se,sw,ne,nw";
this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:c.maxWidth,maxHeight:c.maxHeight,minWidth:c.minWidth,minHeight:this._minHeight(),handles:f,start:function(c,d){a(this).addClass("ui-dialog-resizing"),b._blockFrames(),b._trigger("resizeStart",c,g(d))},resize:function(a,c){b._trigger("resize",a,g(c))},stop:function(d,e){c.height=a(this).height(),c.width=a(this).width(),a(this).removeClass("ui-dialog-resizing"),b._unblockFrames(),b._trigger("resizeStop",d,g(e))}}).css("position",e)},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(){var a=this.uiDialog.is(":visible");a||this.uiDialog.show(),this.uiDialog.position(this.options.position),a||this.uiDialog.hide()},_setOptions:function(b){var e=this,f=!1,g={};a.each(b,function(a,b){e._setOption(a,b),a in c&&(f=!0),a in d&&(g[a]=b)}),f&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",g)},_setOption:function(a,b){var c,d,e=this.uiDialog;"dialogClass"===a&&e.removeClass(this.options.dialogClass).addClass(b),"disabled"!==a&&(this._super(a,b),"appendTo"===a&&this.uiDialog.appendTo(this._appendTo()),"buttons"===a&&this._createButtons(),"closeText"===a&&this.uiDialogTitlebarClose.button({label:""+b}),"draggable"===a&&(c=e.is(":data(ui-draggable)"),c&&!b&&e.draggable("destroy"),!c&&b&&this._makeDraggable()),"position"===a&&this._position(),"resizable"===a&&(d=e.is(":data(ui-resizable)"),d&&!b&&e.resizable("destroy"),d&&"string"==typeof b&&e.resizable("option","handles",b),d||b===!1||this._makeResizable()),"title"===a&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var a,b,c,d=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),d.minWidth>d.width&&(d.width=d.minWidth),a=this.uiDialog.css({height:"auto",width:d.width}).outerHeight(),b=Math.max(0,d.minHeight-a),c="number"==typeof d.maxHeight?Math.max(0,d.maxHeight-a):"none","auto"===d.height?this.element.css({minHeight:b,maxHeight:c,height:"auto"}):this.element.height(Math.max(0,d.height-a)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var b=a(this);return a("<div>").css({position:"absolute",width:b.outerWidth(),height:b.outerHeight()}).appendTo(b.parent()).offset(b.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(b){return a(b.target).closest(".ui-dialog").length?!0:!!a(b.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var b=this,c=this.widgetFullName;a.ui.dialog.overlayInstances||this._delay(function(){a.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(d){b._allowInteraction(d)||(d.preventDefault(),a(".ui-dialog:visible:last .ui-dialog-content").data(c)._focusTabbable())})}),this.overlay=a("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),a.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(a.ui.dialog.overlayInstances--,a.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),a.ui.dialog.overlayInstances=0,a.uiBackCompat!==!1&&a.widget("ui.dialog",a.ui.dialog,{_position:function(){var e,b=this.options.position,c=[],d=[0,0];b?(("string"==typeof b||"object"==typeof b&&"0"in b)&&(c=b.split?b.split(" "):[b[0],b[1]],1===c.length&&(c[1]=c[0]),a.each(["left","top"],function(a,b){+c[a]===c[a]&&(d[a]=c[a],c[a]=b)}),b={my:c[0]+(d[0]<0?d[0]:"+"+d[0])+" "+c[1]+(d[1]<0?d[1]:"+"+d[1]),at:c.join(" ")}),b=a.extend({},a.ui.dialog.prototype.options.position,b)):b=a.ui.dialog.prototype.options.position,e=this.uiDialog.is(":visible"),e||this.uiDialog.show(),this.uiDialog.position(b),e||this.uiDialog.hide()}})}(jQuery),function(a){var c=/up|down|vertical/,d=/up|left|vertical|horizontal/;a.effects.effect.blind=function(b,e){var p,q,r,f=a(this),g=["position","top","bottom","left","right","height","width"],h=a.effects.setMode(f,b.mode||"hide"),i=b.direction||"up",j=c.test(i),k=j?"height":"width",l=j?"top":"left",m=d.test(i),n={},o="show"===h;f.parent().is(".ui-effects-wrapper")?a.effects.save(f.parent(),g):a.effects.save(f,g),f.show(),p=a.effects.createWrapper(f).css({overflow:"hidden"}),q=p[k](),r=parseFloat(p.css(l))||0,n[k]=o?q:0,m||(f.css(j?"bottom":"right",0).css(j?"top":"left","auto").css({position:"absolute"}),n[l]=o?r:q+r),o&&(p.css(k,0),m||p.css(l,r+q)),p.animate(n,{duration:b.duration,easing:b.easing,queue:!1,complete:function(){"hide"===h&&f.hide(),a.effects.restore(f,g),a.effects.removeWrapper(f),e()}})}}(jQuery),function(a){a.effects.effect.bounce=function(b,c){var q,r,s,d=a(this),e=["position","top","bottom","left","right","height","width"],f=a.effects.setMode(d,b.mode||"effect"),g="hide"===f,h="show"===f,i=b.direction||"up",j=b.distance,k=b.times||5,l=2*k+(h||g?1:0),m=b.duration/l,n=b.easing,o="up"===i||"down"===i?"top":"left",p="up"===i||"left"===i,t=d.queue(),u=t.length;for((h||g)&&e.push("opacity"),a.effects.save(d,e),d.show(),a.effects.createWrapper(d),j||(j=d["top"===o?"outerHeight":"outerWidth"]()/3),h&&(s={opacity:1},s[o]=0,d.css("opacity",0).css(o,p?2*-j:2*j).animate(s,m,n)),g&&(j/=Math.pow(2,k-1)),s={},s[o]=0,q=0;k>q;q++)r={},r[o]=(p?"-=":"+=")+j,d.animate(r,m,n).animate(s,m,n),j=g?2*j:j/2;g&&(r={opacity:0},r[o]=(p?"-=":"+=")+j,d.animate(r,m,n)),d.queue(function(){g&&d.hide(),a.effects.restore(d,e),a.effects.removeWrapper(d),c()}),u>1&&t.splice.apply(t,[1,0].concat(t.splice(u,l+1))),d.dequeue()}}(jQuery),function(a){a.effects.effect.clip=function(b,c){var m,n,o,d=a(this),e=["position","top","bottom","left","right","height","width"],f=a.effects.setMode(d,b.mode||"hide"),g="show"===f,h=b.direction||"vertical",i="vertical"===h,j=i?"height":"width",k=i?"top":"left",l={};a.effects.save(d,e),d.show(),m=a.effects.createWrapper(d).css({overflow:"hidden"}),n="IMG"===d[0].tagName?m:d,o=n[j](),g&&(n.css(j,0),n.css(k,o/2)),l[j]=g?o:0,l[k]=g?0:o/2,n.animate(l,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){g||d.hide(),a.effects.restore(d,e),a.effects.removeWrapper(d),c()}})}}(jQuery),function(a){a.effects.effect.drop=function(b,c){var l,d=a(this),e=["position","top","bottom","left","right","opacity","height","width"],f=a.effects.setMode(d,b.mode||"hide"),g="show"===f,h=b.direction||"left",i="up"===h||"down"===h?"top":"left",j="up"===h||"left"===h?"pos":"neg",k={opacity:g?1:0};a.effects.save(d,e),d.show(),a.effects.createWrapper(d),l=b.distance||d["top"===i?"outerHeight":"outerWidth"](!0)/2,g&&d.css("opacity",0).css(i,"pos"===j?-l:l),k[i]=(g?"pos"===j?"+=":"-=":"pos"===j?"-=":"+=")+l,d.animate(k,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===f&&d.hide(),a.effects.restore(d,e),a.effects.removeWrapper(d),c()}})}}(jQuery),function(a){a.effects.effect.explode=function(b,c){function s(){l.push(this),l.length===d*e&&t()}function t(){f.css({visibility:"visible"}),a(l).remove(),h||f.hide(),c()}var m,n,o,p,q,r,d=b.pieces?Math.round(Math.sqrt(b.pieces)):3,e=d,f=a(this),g=a.effects.setMode(f,b.mode||"hide"),h="show"===g,i=f.show().css("visibility","hidden").offset(),j=Math.ceil(f.outerWidth()/e),k=Math.ceil(f.outerHeight()/d),l=[];for(m=0;d>m;m++)for(p=i.top+m*k,r=m-(d-1)/2,n=0;e>n;n++)o=i.left+n*j,q=n-(e-1)/2,f.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-n*j,top:-m*k}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:j,height:k,left:o+(h?q*j:0),top:p+(h?r*k:0),opacity:h?0:1}).animate({left:o+(h?0:q*j),top:p+(h?0:r*k),opacity:h?1:0},b.duration||500,b.easing,s)}}(jQuery),function(a){a.effects.effect.fade=function(b,c){var d=a(this),e=a.effects.setMode(d,b.mode||"toggle");d.animate({opacity:e},{queue:!1,duration:b.duration,easing:b.easing,complete:c})}}(jQuery),function(a){a.effects.effect.fold=function(b,c){var o,p,d=a(this),e=["position","top","bottom","left","right","height","width"],f=a.effects.setMode(d,b.mode||"hide"),g="show"===f,h="hide"===f,i=b.size||15,j=/([0-9]+)%/.exec(i),k=!!b.horizFirst,l=g!==k,m=l?["width","height"]:["height","width"],n=b.duration/2,q={},r={};a.effects.save(d,e),d.show(),o=a.effects.createWrapper(d).css({overflow:"hidden"}),p=l?[o.width(),o.height()]:[o.height(),o.width()],j&&(i=parseInt(j[1],10)/100*p[h?0:1]),g&&o.css(k?{height:0,width:i}:{height:i,width:0}),q[m[0]]=g?p[0]:i,r[m[1]]=g?p[1]:0,o.animate(q,n,b.easing).animate(r,n,b.easing,function(){h&&d.hide(),a.effects.restore(d,e),a.effects.removeWrapper(d),c()})}}(jQuery),function(a){a.effects.effect.highlight=function(b,c){var d=a(this),e=["backgroundImage","backgroundColor","opacity"],f=a.effects.setMode(d,b.mode||"show"),g={backgroundColor:d.css("backgroundColor")};"hide"===f&&(g.opacity=0),a.effects.save(d,e),d.show().css({backgroundImage:"none",backgroundColor:b.color||"#ffff99"}).animate(g,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===f&&d.hide(),a.effects.restore(d,e),c()}})}}(jQuery),function(a){a.effects.effect.pulsate=function(b,c){var n,d=a(this),e=a.effects.setMode(d,b.mode||"show"),f="show"===e,g="hide"===e,h=f||"hide"===e,i=2*(b.times||5)+(h?1:0),j=b.duration/i,k=0,l=d.queue(),m=l.length;for((f||!d.is(":visible"))&&(d.css("opacity",0).show(),k=1),n=1;i>n;n++)d.animate({opacity:k},j,b.easing),k=1-k;d.animate({opacity:k},j,b.easing),d.queue(function(){g&&d.hide(),c()}),m>1&&l.splice.apply(l,[1,0].concat(l.splice(m,i+1))),d.dequeue()}}(jQuery),function(a){a.effects.effect.puff=function(b,c){var d=a(this),e=a.effects.setMode(d,b.mode||"hide"),f="hide"===e,g=parseInt(b.percent,10)||150,h=g/100,i={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()};a.extend(b,{effect:"scale",queue:!1,fade:!0,mode:e,complete:c,percent:f?g:100,from:f?i:{height:i.height*h,width:i.width*h,outerHeight:i.outerHeight*h,outerWidth:i.outerWidth*h}}),d.effect(b)},a.effects.effect.scale=function(b,c){var d=a(this),e=a.extend(!0,{},b),f=a.effects.setMode(d,b.mode||"effect"),g=parseInt(b.percent,10)||(0===parseInt(b.percent,10)?0:"hide"===f?0:100),h=b.direction||"both",i=b.origin,j={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()},k={y:"horizontal"!==h?g/100:1,x:"vertical"!==h?g/100:1};e.effect="size",e.queue=!1,e.complete=c,"effect"!==f&&(e.origin=i||["middle","center"],e.restore=!0),e.from=b.from||("show"===f?{height:0,width:0,outerHeight:0,outerWidth:0}:j),e.to={height:j.height*k.y,width:j.width*k.x,outerHeight:j.outerHeight*k.y,outerWidth:j.outerWidth*k.x},e.fade&&("show"===f&&(e.from.opacity=0,e.to.opacity=1),"hide"===f&&(e.from.opacity=1,e.to.opacity=0)),d.effect(e)},a.effects.effect.size=function(b,c){var d,e,f,g=a(this),h=["position","top","bottom","left","right","width","height","overflow","opacity"],i=["position","top","bottom","left","right","overflow","opacity"],j=["width","height","overflow"],k=["fontSize"],l=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],m=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],n=a.effects.setMode(g,b.mode||"effect"),o=b.restore||"effect"!==n,p=b.scale||"both",q=b.origin||["middle","center"],r=g.css("position"),s=o?h:i,t={height:0,width:0,outerHeight:0,outerWidth:0};"show"===n&&g.show(),d={height:g.height(),width:g.width(),outerHeight:g.outerHeight(),outerWidth:g.outerWidth()},"toggle"===b.mode&&"show"===n?(g.from=b.to||t,g.to=b.from||d):(g.from=b.from||("show"===n?t:d),g.to=b.to||("hide"===n?t:d)),f={from:{y:g.from.height/d.height,x:g.from.width/d.width},to:{y:g.to.height/d.height,x:g.to.width/d.width}},("box"===p||"both"===p)&&(f.from.y!==f.to.y&&(s=s.concat(l),g.from=a.effects.setTransition(g,l,f.from.y,g.from),g.to=a.effects.setTransition(g,l,f.to.y,g.to)),f.from.x!==f.to.x&&(s=s.concat(m),g.from=a.effects.setTransition(g,m,f.from.x,g.from),g.to=a.effects.setTransition(g,m,f.to.x,g.to))),("content"===p||"both"===p)&&f.from.y!==f.to.y&&(s=s.concat(k).concat(j),g.from=a.effects.setTransition(g,k,f.from.y,g.from),g.to=a.effects.setTransition(g,k,f.to.y,g.to)),a.effects.save(g,s),g.show(),a.effects.createWrapper(g),g.css("overflow","hidden").css(g.from),q&&(e=a.effects.getBaseline(q,d),g.from.top=(d.outerHeight-g.outerHeight())*e.y,g.from.left=(d.outerWidth-g.outerWidth())*e.x,g.to.top=(d.outerHeight-g.to.outerHeight)*e.y,g.to.left=(d.outerWidth-g.to.outerWidth)*e.x),g.css(g.from),("content"===p||"both"===p)&&(l=l.concat(["marginTop","marginBottom"]).concat(k),m=m.concat(["marginLeft","marginRight"]),j=h.concat(l).concat(m),g.find("*[width]").each(function(){var c=a(this),d={height:c.height(),width:c.width(),outerHeight:c.outerHeight(),outerWidth:c.outerWidth()};o&&a.effects.save(c,j),c.from={height:d.height*f.from.y,width:d.width*f.from.x,outerHeight:d.outerHeight*f.from.y,outerWidth:d.outerWidth*f.from.x},c.to={height:d.height*f.to.y,width:d.width*f.to.x,outerHeight:d.height*f.to.y,outerWidth:d.width*f.to.x},f.from.y!==f.to.y&&(c.from=a.effects.setTransition(c,l,f.from.y,c.from),c.to=a.effects.setTransition(c,l,f.to.y,c.to)),f.from.x!==f.to.x&&(c.from=a.effects.setTransition(c,m,f.from.x,c.from),c.to=a.effects.setTransition(c,m,f.to.x,c.to)),c.css(c.from),c.animate(c.to,b.duration,b.easing,function(){o&&a.effects.restore(c,j)})})),g.animate(g.to,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){0===g.to.opacity&&g.css("opacity",g.from.opacity),"hide"===n&&g.hide(),a.effects.restore(g,s),o||("static"===r?g.css({position:"relative",top:g.to.top,left:g.to.left}):a.each(["top","left"],function(a,b){g.css(b,function(b,c){var d=parseInt(c,10),e=a?g.to.left:g.to.top;return"auto"===c?e+"px":d+e+"px"})})),a.effects.removeWrapper(g),c()}})}}(jQuery),function(a){a.effects.effect.shake=function(b,c){var q,d=a(this),e=["position","top","bottom","left","right","height","width"],f=a.effects.setMode(d,b.mode||"effect"),g=b.direction||"left",h=b.distance||20,i=b.times||3,j=2*i+1,k=Math.round(b.duration/j),l="up"===g||"down"===g?"top":"left",m="up"===g||"left"===g,n={},o={},p={},r=d.queue(),s=r.length;for(a.effects.save(d,e),d.show(),a.effects.createWrapper(d),n[l]=(m?"-=":"+=")+h,o[l]=(m?"+=":"-=")+2*h,p[l]=(m?"-=":"+=")+2*h,d.animate(n,k,b.easing),q=1;i>q;q++)d.animate(o,k,b.easing).animate(p,k,b.easing);d.animate(o,k,b.easing).animate(n,k/2,b.easing).queue(function(){"hide"===f&&d.hide(),a.effects.restore(d,e),a.effects.removeWrapper(d),c()}),s>1&&r.splice.apply(r,[1,0].concat(r.splice(s,j+1))),d.dequeue()}}(jQuery),function(a){a.effects.effect.slide=function(b,c){var k,d=a(this),e=["position","top","bottom","left","right","width","height"],f=a.effects.setMode(d,b.mode||"show"),g="show"===f,h=b.direction||"left",i="up"===h||"down"===h?"top":"left",j="up"===h||"left"===h,l={};a.effects.save(d,e),d.show(),k=b.distance||d["top"===i?"outerHeight":"outerWidth"](!0),a.effects.createWrapper(d).css({overflow:"hidden"}),g&&d.css(i,j?isNaN(k)?"-"+k:-k:k),l[i]=(g?j?"+=":"-=":j?"-=":"+=")+k,d.animate(l,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===f&&d.hide(),a.effects.restore(d,e),a.effects.removeWrapper(d),c()}})}}(jQuery),function(a){a.effects.effect.transfer=function(b,c){var d=a(this),e=a(b.to),f="fixed"===e.css("position"),g=a("body"),h=f?g.scrollTop():0,i=f?g.scrollLeft():0,j=e.offset(),k={top:j.top-h,left:j.left-i,height:e.innerHeight(),width:e.innerWidth()},l=d.offset(),m=a("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(b.className).css({top:l.top-h,left:l.left-i,height:d.innerHeight(),width:d.innerWidth(),position:f?"fixed":"absolute"}).animate(k,b.duration,b.easing,function(){m.remove(),c()})}}(jQuery),function(a){a.widget("ui.menu",{version:"1.10.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,a.proxy(function(a){this.options.disabled&&a.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(a){a.preventDefault()},"click .ui-state-disabled > a":function(a){a.preventDefault()},"click .ui-menu-item:has(a)":function(b){var c=a(b.target).closest(".ui-menu-item");!this.mouseHandled&&c.not(".ui-state-disabled").length&&(this.select(b),b.isPropagationStopped()||(this.mouseHandled=!0),c.has(".ui-menu").length?this.expand(b):!this.element.is(":focus")&&a(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){var c=a(b.currentTarget);c.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(b,c)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(a,b){var c=this.active||this.element.children(".ui-menu-item").eq(0);b||this.focus(a,c)},blur:function(b){this._delay(function(){a.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(b)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(b){a(b.target).closest(".ui-menu").length||this.collapseAll(b),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var b=a(this);b.data("ui-menu-submenu-carat")&&b.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(b){function i(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var c,d,e,f,g,h=!0;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(b);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case a.ui.keyCode.HOME:this._move("first","first",b);break;case a.ui.keyCode.END:this._move("last","last",b);break;case a.ui.keyCode.UP:this.previous(b);break;case a.ui.keyCode.DOWN:this.next(b);break;case a.ui.keyCode.LEFT:this.collapse(b);break;case a.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(b);break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(b);break;case a.ui.keyCode.ESCAPE:this.collapse(b);break;default:h=!1,d=this.previousFilter||"",e=String.fromCharCode(b.keyCode),f=!1,clearTimeout(this.filterTimer),e===d?f=!0:e=d+e,g=new RegExp("^"+i(e),"i"),c=this.activeMenu.children(".ui-menu-item").filter(function(){return g.test(a(this).children("a").text())}),c=f&&-1!==c.index(this.active.next())?this.active.nextAll(".ui-menu-item"):c,c.length||(e=String.fromCharCode(b.keyCode),g=new RegExp("^"+i(e),"i"),c=this.activeMenu.children(".ui-menu-item").filter(function(){return g.test(a(this).children("a").text())})),c.length?(this.focus(b,c),c.length>1?(this.previousFilter=e,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}h&&b.preventDefault()},_activate:function(a){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(a):this.select(a))},refresh:function(){var b,c=this.options.icons.submenu,d=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),d.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var b=a(this),d=b.prev("a"),e=a("<span>").addClass("ui-menu-icon ui-icon "+c).data("ui-menu-submenu-carat",!0);d.attr("aria-haspopup","true").prepend(e),b.attr("aria-labelledby",d.attr("id"))}),b=d.add(this.element),b.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),b.children(":not(.ui-menu-item)").each(function(){var b=a(this);/[^\-\u2014\u2013\s]/.test(b.text())||b.addClass("ui-widget-content ui-menu-divider")}),b.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!a.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(a,b){"icons"===a&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(b.submenu),this._super(a,b)},focus:function(a,b){var c,d;this.blur(a,a&&"focus"===a.type),this._scrollIntoView(b),this.active=b.first(),d=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",d.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),a&&"keydown"===a.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),c=b.children(".ui-menu"),c.length&&a&&/^mouse/.test(a.type)&&this._startOpening(c),this.activeMenu=b.parent(),this._trigger("focus",a,{item:b})},_scrollIntoView:function(b){var c,d,e,f,g,h;this._hasScroll()&&(c=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||0,d=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0,e=b.offset().top-this.activeMenu.offset().top-c-d,f=this.activeMenu.scrollTop(),g=this.activeMenu.height(),h=b.height(),0>e?this.activeMenu.scrollTop(f+e):e+h>g&&this.activeMenu.scrollTop(f+e-g+h))},blur:function(a,b){b||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",a,{item:this.active}))},_startOpening:function(a){clearTimeout(this.timer),"true"===a.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(a)},this.delay))},_open:function(b){var c=a.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true"),b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(b,c){clearTimeout(this.timer),this.timer=this._delay(function(){var d=c?this.element:a(b&&b.target).closest(this.element.find(".ui-menu"));d.length||(d=this.element),this._close(d),this.blur(b),this.activeMenu=d},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element),a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(a){var b=this.active&&this.active.parent().closest(".ui-menu-item",this.element);b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(a,b,c){var d;this.active&&(d="first"===a||"last"===a?this.active["first"===a?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[a+"All"](".ui-menu-item").eq(0)),d&&d.length&&this.active||(d=this.activeMenu.children(".ui-menu-item")[b]()),this.focus(c,d)},nextPage:function(b){var c,d,e;return this.active?(this.isLastItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return c=a(this),c.offset().top-d-e<0}),this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())),void 0):(this.next(b),void 0)},previousPage:function(b){var c,d,e;return this.active?(this.isFirstItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return c=a(this),c.offset().top-d+e>0}),this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item").first())),void 0):(this.next(b),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||a(b.target).closest(".ui-menu-item");var c={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(b,!0),this._trigger("select",b,c)}})}(jQuery),function(a,b){function m(a,b,c){return[parseFloat(a[0])*(k.test(a[0])?b/100:1),parseFloat(a[1])*(k.test(a[1])?c/100:1)]}function n(b,c){return parseInt(a.css(b,c),10)||0}function o(b){var c=b[0];return 9===c.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(c)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}a.ui=a.ui||{};var c,d=Math.max,e=Math.abs,f=Math.round,g=/left|center|right/,h=/top|center|bottom/,i=/[\+\-]\d+(\.[\d]+)?%?/,j=/^\w+/,k=/%$/,l=a.fn.position;a.position={scrollbarWidth:function(){if(c!==b)return c;var d,e,f=a("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),g=f.children()[0];return a("body").append(f),d=g.offsetWidth,f.css("overflow","scroll"),e=g.offsetWidth,d===e&&(e=f[0].clientWidth),f.remove(),c=d-e},getScrollInfo:function(b){var c=b.isWindow||b.isDocument?"":b.element.css("overflow-x"),d=b.isWindow||b.isDocument?"":b.element.css("overflow-y"),e="scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth,f="scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight;return{width:f?a.position.scrollbarWidth():0,height:e?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),d=a.isWindow(c[0]),e=!!c[0]&&9===c[0].nodeType;return{element:c,isWindow:d,isDocument:e,offset:c.offset()||{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:d?c.width():c.outerWidth(),height:d?c.height():c.outerHeight()}}},a.fn.position=function(b){if(!b||!b.of)return l.apply(this,arguments);b=a.extend({},b);var c,k,p,q,r,s,t=a(b.of),u=a.position.getWithinInfo(b.within),v=a.position.getScrollInfo(u),w=(b.collision||"flip").split(" "),x={};return s=o(t),t[0].preventDefault&&(b.at="left top"),k=s.width,p=s.height,q=s.offset,r=a.extend({},q),a.each(["my","at"],function(){var c,d,a=(b[this]||"").split(" ");1===a.length&&(a=g.test(a[0])?a.concat(["center"]):h.test(a[0])?["center"].concat(a):["center","center"]),a[0]=g.test(a[0])?a[0]:"center",a[1]=h.test(a[1])?a[1]:"center",c=i.exec(a[0]),d=i.exec(a[1]),x[this]=[c?c[0]:0,d?d[0]:0],b[this]=[j.exec(a[0])[0],j.exec(a[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===b.at[0]?r.left+=k:"center"===b.at[0]&&(r.left+=k/2),"bottom"===b.at[1]?r.top+=p:"center"===b.at[1]&&(r.top+=p/2),c=m(x.at,k,p),r.left+=c[0],r.top+=c[1],this.each(function(){var g,h,i=a(this),j=i.outerWidth(),l=i.outerHeight(),o=n(this,"marginLeft"),s=n(this,"marginTop"),y=j+o+n(this,"marginRight")+v.width,z=l+s+n(this,"marginBottom")+v.height,A=a.extend({},r),B=m(x.my,i.outerWidth(),i.outerHeight());"right"===b.my[0]?A.left-=j:"center"===b.my[0]&&(A.left-=j/2),"bottom"===b.my[1]?A.top-=l:"center"===b.my[1]&&(A.top-=l/2),A.left+=B[0],A.top+=B[1],a.support.offsetFractions||(A.left=f(A.left),A.top=f(A.top)),g={marginLeft:o,marginTop:s},a.each(["left","top"],function(d,e){a.ui.position[w[d]]&&a.ui.position[w[d]][e](A,{targetWidth:k,targetHeight:p,elemWidth:j,elemHeight:l,collisionPosition:g,collisionWidth:y,collisionHeight:z,offset:[c[0]+B[0],c[1]+B[1]],my:b.my,at:b.at,within:u,elem:i})}),b.using&&(h=function(a){var c=q.left-A.left,f=c+k-j,g=q.top-A.top,h=g+p-l,m={target:{element:t,left:q.left,top:q.top,width:k,height:p},element:{element:i,left:A.left,top:A.top,width:j,height:l},horizontal:0>f?"left":c>0?"right":"center",vertical:0>h?"top":g>0?"bottom":"middle"};j>k&&e(c+f)<k&&(m.horizontal="center"),l>p&&e(g+h)<p&&(m.vertical="middle"),m.important=d(e(c),e(f))>d(e(g),e(h))?"horizontal":"vertical",b.using.call(this,a,m)}),i.offset(a.extend(A,{using:h}))})},a.ui.position={fit:{left:function(a,b){var j,c=b.within,e=c.isWindow?c.scrollLeft:c.offset.left,f=c.width,g=a.left-b.collisionPosition.marginLeft,h=e-g,i=g+b.collisionWidth-f-e;b.collisionWidth>f?h>0&&0>=i?(j=a.left+h+b.collisionWidth-f-e,a.left+=h-j):a.left=i>0&&0>=h?e:h>i?e+f-b.collisionWidth:e:h>0?a.left+=h:i>0?a.left-=i:a.left=d(a.left-g,a.left)},top:function(a,b){var j,c=b.within,e=c.isWindow?c.scrollTop:c.offset.top,f=b.within.height,g=a.top-b.collisionPosition.marginTop,h=e-g,i=g+b.collisionHeight-f-e;b.collisionHeight>f?h>0&&0>=i?(j=a.top+h+b.collisionHeight-f-e,a.top+=h-j):a.top=i>0&&0>=h?e:h>i?e+f-b.collisionHeight:e:h>0?a.top+=h:i>0?a.top-=i:a.top=d(a.top-g,a.top)}},flip:{left:function(a,b){var n,o,c=b.within,d=c.offset.left+c.scrollLeft,f=c.width,g=c.isWindow?c.scrollLeft:c.offset.left,h=a.left-b.collisionPosition.marginLeft,i=h-g,j=h+b.collisionWidth-f-g,k="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,l="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,m=-2*b.offset[0];0>i?(n=a.left+k+l+m+b.collisionWidth-f-d,(0>n||n<e(i))&&(a.left+=k+l+m)):j>0&&(o=a.left-b.collisionPosition.marginLeft+k+l+m-g,(o>0||e(o)<j)&&(a.left+=k+l+m))},top:function(a,b){var o,p,c=b.within,d=c.offset.top+c.scrollTop,f=c.height,g=c.isWindow?c.scrollTop:c.offset.top,h=a.top-b.collisionPosition.marginTop,i=h-g,j=h+b.collisionHeight-f-g,k="top"===b.my[1],l=k?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,m="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,n=-2*b.offset[1];0>i?(p=a.top+l+m+n+b.collisionHeight-f-d,a.top+l+m+n>i&&(0>p||p<e(i))&&(a.top+=l+m+n)):j>0&&(o=a.top-b.collisionPosition.marginTop+l+m+n-g,a.top+l+m+n>j&&(o>0||e(o)<j)&&(a.top+=l+m+n))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments),a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments),a.ui.position.fit.top.apply(this,arguments)}}},function(){var b,c,d,e,f,g=document.getElementsByTagName("body")[0],h=document.createElement("div");b=document.createElement(g?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},g&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in d)b.style[f]=d[f];b.appendChild(h),c=g||document.documentElement,c.insertBefore(b,c.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",e=a(h).offset().left,a.support.offsetFractions=e>10&&11>e,b.innerHTML="",c.removeChild(b)}()}(jQuery),function(a,b){a.widget("ui.progressbar",{version:"1.10.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()
},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(a){return a===b?this.options.value:(this.options.value=this._constrainedValue(a),this._refreshValue(),void 0)},_constrainedValue:function(a){return a===b&&(a=this.options.value),this.indeterminate=a===!1,"number"!=typeof a&&(a=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,a))},_setOptions:function(a){var b=a.value;delete a.value,this._super(a),this.options.value=this._constrainedValue(b),this._refreshValue()},_setOption:function(a,b){"max"===a&&(b=Math.max(this.min,b)),this._super(a,b)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var b=this.options.value,c=this._percentage();this.valueDiv.toggle(this.indeterminate||b>this.min).toggleClass("ui-corner-right",b===this.options.max).width(c.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=a("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":b}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==b&&(this.oldValue=b,this._trigger("change")),b===this.options.max&&this._trigger("complete")}})}(jQuery),function(a){var c=5;a.widget("ui.slider",a.ui.mouse,{version:"1.10.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var b,c,d=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",g=[];for(c=d.values&&d.values.length||1,e.length>c&&(e.slice(c).remove(),e=e.slice(0,c)),b=e.length;c>b;b++)g.push(f);this.handles=e.add(a(g.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(b){a(this).data("ui-slider-handle-index",b)})},_createRange:function(){var b=this.options,c="";b.range?(b.range===!0&&(b.values?b.values.length&&2!==b.values.length?b.values=[b.values[0],b.values[0]]:a.isArray(b.values)&&(b.values=b.values.slice(0)):b.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=a("<div></div>").appendTo(this.element),c="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(c+("min"===b.range||"max"===b.range?" ui-slider-range-"+b.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){var a=this.handles.add(this.range).filter("a");this._off(a),this._on(a,this._handleEvents),this._hoverable(a),this._focusable(a)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(b){var c,d,e,f,g,h,i,j,k=this,l=this.options;return l.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),c={x:b.pageX,y:b.pageY},d=this._normValueFromMouse(c),e=this._valueMax()-this._valueMin()+1,this.handles.each(function(b){var c=Math.abs(d-k.values(b));(e>c||e===c&&(b===k._lastChangedValue||k.values(b)===l.min))&&(e=c,f=a(this),g=b)}),h=this._start(b,g),h===!1?!1:(this._mouseSliding=!0,this._handleIndex=g,f.addClass("ui-state-active").focus(),i=f.offset(),j=!a(b.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=j?{left:0,top:0}:{left:b.pageX-i.left-f.width()/2,top:b.pageY-i.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,g,d),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(a){var b={x:a.pageX,y:a.pageY},c=this._normValueFromMouse(b);return this._slide(a,this._handleIndex,c),!1},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,c,d,e,f;return"horizontal"===this.orientation?(b=this.elementSize.width,c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),d=c/b,d>1&&(d=1),0>d&&(d=0),"vertical"===this.orientation&&(d=1-d),e=this._valueMax()-this._valueMin(),f=this._valueMin()+d*e,this._trimAlignValue(f)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};return this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("start",a,c)},_slide:function(a,b,c){var d,e,f;this.options.values&&this.options.values.length?(d=this.values(b?0:1),2===this.options.values.length&&this.options.range===!0&&(0===b&&c>d||1===b&&d>c)&&(c=d),c!==this.values(b)&&(e=this.values(),e[b]=c,f=this._trigger("slide",a,{handle:this.handles[b],value:c,values:e}),d=this.values(b?0:1),f!==!1&&this.values(b,c))):c!==this.value()&&(f=this._trigger("slide",a,{handle:this.handles[b],value:c}),f!==!1&&this.value(c))},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._lastChangedValue=b,this._trigger("change",a,c)}},value:function(a){return arguments.length?(this.options.value=this._trimAlignValue(a),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(b,c){var d,e,f;if(arguments.length>1)return this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),this._change(null,b),void 0;if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(b):this.value();for(d=this.options.values,e=arguments[0],f=0;f<d.length;f+=1)d[f]=this._trimAlignValue(e[f]),this._change(null,f);this._refreshValue()},_setOption:function(b,c){var d,e=0;switch("range"===b&&this.options.range===!0&&("min"===c?(this.options.value=this._values(0),this.options.values=null):"max"===c&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),a.isArray(this.options.values)&&(e=this.options.values.length),a.Widget.prototype._setOption.apply(this,arguments),b){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),d=0;e>d;d+=1)this._change(null,d);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,c,d;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b);if(this.options.values&&this.options.values.length){for(c=this.options.values.slice(),d=0;d<c.length;d+=1)c[d]=this._trimAlignValue(c[d]);return c}return[]},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b,d=a-c;return 2*Math.abs(c)>=b&&(d+=c>0?b:-b),parseFloat(d.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b,c,d,e,f,g=this.options.range,h=this.options,i=this,j=this._animateOff?!1:h.animate,k={};this.options.values&&this.options.values.length?this.handles.each(function(d){c=100*((i.values(d)-i._valueMin())/(i._valueMax()-i._valueMin())),k["horizontal"===i.orientation?"left":"bottom"]=c+"%",a(this).stop(1,1)[j?"animate":"css"](k,h.animate),i.options.range===!0&&("horizontal"===i.orientation?(0===d&&i.range.stop(1,1)[j?"animate":"css"]({left:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({width:c-b+"%"},{queue:!1,duration:h.animate})):(0===d&&i.range.stop(1,1)[j?"animate":"css"]({bottom:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({height:c-b+"%"},{queue:!1,duration:h.animate}))),b=c}):(d=this.value(),e=this._valueMin(),f=this._valueMax(),c=f!==e?100*((d-e)/(f-e)):0,k["horizontal"===this.orientation?"left":"bottom"]=c+"%",this.handle.stop(1,1)[j?"animate":"css"](k,h.animate),"min"===g&&"horizontal"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({width:c+"%"},h.animate),"max"===g&&"horizontal"===this.orientation&&this.range[j?"animate":"css"]({width:100-c+"%"},{queue:!1,duration:h.animate}),"min"===g&&"vertical"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({height:c+"%"},h.animate),"max"===g&&"vertical"===this.orientation&&this.range[j?"animate":"css"]({height:100-c+"%"},{queue:!1,duration:h.animate}))},_handleEvents:{keydown:function(b){var d,e,f,g,h=a(b.target).data("ui-slider-handle-index");switch(b.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(b.preventDefault(),!this._keySliding&&(this._keySliding=!0,a(b.target).addClass("ui-state-active"),d=this._start(b,h),d===!1))return}switch(g=this.options.step,e=f=this.options.values&&this.options.values.length?this.values(h):this.value(),b.keyCode){case a.ui.keyCode.HOME:f=this._valueMin();break;case a.ui.keyCode.END:f=this._valueMax();break;case a.ui.keyCode.PAGE_UP:f=this._trimAlignValue(e+(this._valueMax()-this._valueMin())/c);break;case a.ui.keyCode.PAGE_DOWN:f=this._trimAlignValue(e-(this._valueMax()-this._valueMin())/c);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(e===this._valueMax())return;f=this._trimAlignValue(e+g);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(e===this._valueMin())return;f=this._trimAlignValue(e-g)}this._slide(b,h,f)},click:function(a){a.preventDefault()},keyup:function(b){var c=a(b.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(b,c),this._change(b,c),a(b.target).removeClass("ui-state-active"))}}})}(jQuery),function(a){function b(a){return function(){var b=this.element.val();a.apply(this,arguments),this._refresh(),b!==this.element.val()&&this._trigger("change")}}a.widget("ui.spinner",{version:"1.10.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var b={},c=this.element;return a.each(["min","max","step"],function(a,d){var e=c.attr(d);void 0!==e&&e.length&&(b[d]=e)}),b},_events:{keydown:function(a){this._start(a)&&this._keydown(a)&&a.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(a){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",a),void 0)},mousewheel:function(a,b){if(b){if(!this.spinning&&!this._start(a))return!1;this._spin((b>0?1:-1)*this.options.step,a),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(a)},100),a.preventDefault()}},"mousedown .ui-spinner-button":function(b){function d(){var a=this.element[0]===this.document[0].activeElement;a||(this.element.focus(),this.previous=c,this._delay(function(){this.previous=c}))}var c;c=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),b.preventDefault(),d.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,d.call(this)}),this._start(b)!==!1&&this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(b){return a(b.currentTarget).hasClass("ui-state-active")?this._start(b)===!1?!1:(this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var a=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=a.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*a.height())&&a.height()>0&&a.height(a.height()),this.options.disabled&&this.disable()},_keydown:function(b){var c=this.options,d=a.ui.keyCode;switch(b.keyCode){case d.UP:return this._repeat(null,1,b),!0;case d.DOWN:return this._repeat(null,-1,b),!0;case d.PAGE_UP:return this._repeat(null,c.page,b),!0;case d.PAGE_DOWN:return this._repeat(null,-c.page,b),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(a){return this.spinning||this._trigger("start",a)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(a,b,c){a=a||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,b,c)},a),this._spin(b*this.options.step,c)},_spin:function(a,b){var c=this.value()||0;this.counter||(this.counter=1),c=this._adjustValue(c+a*this._increment(this.counter)),this.spinning&&this._trigger("spin",b,{value:c})===!1||(this._value(c),this.counter++)},_increment:function(b){var c=this.options.incremental;return c?a.isFunction(c)?c(b):Math.floor(b*b*b/5e4-b*b/500+17*b/200+1):1},_precision:function(){var a=this._precisionOf(this.options.step);return null!==this.options.min&&(a=Math.max(a,this._precisionOf(this.options.min))),a},_precisionOf:function(a){var b=a.toString(),c=b.indexOf(".");return-1===c?0:b.length-c-1},_adjustValue:function(a){var b,c,d=this.options;return b=null!==d.min?d.min:0,c=a-b,c=Math.round(c/d.step)*d.step,a=b+c,a=parseFloat(a.toFixed(this._precision())),null!==d.max&&a>d.max?d.max:null!==d.min&&a<d.min?d.min:a},_stop:function(a){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",a))},_setOption:function(a,b){if("culture"===a||"numberFormat"===a){var c=this._parse(this.element.val());return this.options[a]=b,this.element.val(this._format(c)),void 0}("max"===a||"min"===a||"step"===a)&&"string"==typeof b&&(b=this._parse(b)),"icons"===a&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(b.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(b.down)),this._super(a,b),"disabled"===a&&(b?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:b(function(a){this._super(a),this._value(this.element.val())}),_parse:function(a){return"string"==typeof a&&""!==a&&(a=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(a,10,this.options.culture):+a),""===a||isNaN(a)?null:a},_format:function(a){return""===a?"":window.Globalize&&this.options.numberFormat?Globalize.format(a,this.options.numberFormat,this.options.culture):a},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(a,b){var c;""!==a&&(c=this._parse(a),null!==c&&(b||(c=this._adjustValue(c)),a=this._format(c))),this.element.val(a),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:b(function(a){this._stepUp(a)}),_stepUp:function(a){this._start()&&(this._spin((a||1)*this.options.step),this._stop())},stepDown:b(function(a){this._stepDown(a)}),_stepDown:function(a){this._start()&&(this._spin((a||1)*-this.options.step),this._stop())},pageUp:b(function(a){this._stepUp((a||1)*this.options.page)}),pageDown:b(function(a){this._stepDown((a||1)*this.options.page)}),value:function(a){return arguments.length?(b(this._value).call(this,a),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function(a,b){function e(){return++c}function f(a){return a=a.cloneNode(!1),a.hash.length>1&&decodeURIComponent(a.href.replace(d,""))===decodeURIComponent(location.href.replace(d,""))}var c=0,d=/#.*$/;a.widget("ui.tabs",{version:"1.10.4",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var b=this,c=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",c.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(b){a(this).is(".ui-state-disabled")&&b.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){a(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),c.active=this._initialActive(),a.isArray(c.disabled)&&(c.disabled=a.unique(c.disabled.concat(a.map(this.tabs.filter(".ui-state-disabled"),function(a){return b.tabs.index(a)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(c.active):a(),this._refresh(),this.active.length&&this.load(c.active)},_initialActive:function(){var b=this.options.active,c=this.options.collapsible,d=location.hash.substring(1);return null===b&&(d&&this.tabs.each(function(c,e){return a(e).attr("aria-controls")===d?(b=c,!1):void 0}),null===b&&(b=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===b||-1===b)&&(b=this.tabs.length?0:!1)),b!==!1&&(b=this.tabs.index(this.tabs.eq(b)),-1===b&&(b=c?!1:0)),!c&&b===!1&&this.anchors.length&&(b=0),b},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):a()}},_tabKeydown:function(b){var c=a(this.document[0].activeElement).closest("li"),d=this.tabs.index(c),e=!0;if(!this._handlePageNav(b)){switch(b.keyCode){case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:d++;break;case a.ui.keyCode.UP:case a.ui.keyCode.LEFT:e=!1,d--;break;case a.ui.keyCode.END:d=this.anchors.length-1;break;case a.ui.keyCode.HOME:d=0;break;case a.ui.keyCode.SPACE:return b.preventDefault(),clearTimeout(this.activating),this._activate(d),void 0;case a.ui.keyCode.ENTER:return b.preventDefault(),clearTimeout(this.activating),this._activate(d===this.options.active?!1:d),void 0;default:return}b.preventDefault(),clearTimeout(this.activating),d=this._focusNextTab(d,e),b.ctrlKey||(c.attr("aria-selected","false"),this.tabs.eq(d).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",d)},this.delay))}},_panelKeydown:function(b){this._handlePageNav(b)||b.ctrlKey&&b.keyCode===a.ui.keyCode.UP&&(b.preventDefault(),this.active.focus())},_handlePageNav:function(b){return b.altKey&&b.keyCode===a.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):b.altKey&&b.keyCode===a.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(b,c){function e(){return b>d&&(b=0),0>b&&(b=d),b}for(var d=this.tabs.length-1;-1!==a.inArray(e(),this.options.disabled);)b=c?b+1:b-1;return b},_focusNextTab:function(a,b){return a=this._findNextTab(a,b),this.tabs.eq(a).focus(),a},_setOption:function(a,b){return"active"===a?(this._activate(b),void 0):"disabled"===a?(this._setupDisabled(b),void 0):(this._super(a,b),"collapsible"===a&&(this.element.toggleClass("ui-tabs-collapsible",b),b||this.options.active!==!1||this._activate(0)),"event"===a&&this._setupEvents(b),"heightStyle"===a&&this._setupHeightStyle(b),void 0)},_tabId:function(a){return a.attr("aria-controls")||"ui-tabs-"+e()},_sanitizeSelector:function(a){return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var b=this.options,c=this.tablist.children(":has(a[href])");b.disabled=a.map(c.filter(".ui-state-disabled"),function(a){return c.index(a)}),this._processTabs(),b.active!==!1&&this.anchors.length?this.active.length&&!a.contains(this.tablist[0],this.active[0])?this.tabs.length===b.disabled.length?(b.active=!1,this.active=a()):this._activate(this._findNextTab(Math.max(0,b.active-1),!1)):b.active=this.tabs.index(this.active):(b.active=!1,this.active=a()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var b=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return a("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=a(),this.anchors.each(function(c,d){var e,g,h,i=a(d).uniqueId().attr("id"),j=a(d).closest("li"),k=j.attr("aria-controls");f(d)?(e=d.hash,g=b.element.find(b._sanitizeSelector(e))):(h=b._tabId(j),e="#"+h,g=b.element.find(e),g.length||(g=b._createPanel(h),g.insertAfter(b.panels[c-1]||b.tablist)),g.attr("aria-live","polite")),g.length&&(b.panels=b.panels.add(g)),k&&j.data("ui-tabs-aria-controls",k),j.attr({"aria-controls":e.substring(1),"aria-labelledby":i}),g.attr("aria-labelledby",i)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(b){return a("<div>").attr("id",b).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(b){a.isArray(b)&&(b.length?b.length===this.anchors.length&&(b=!0):b=!1);for(var d,c=0;d=this.tabs[c];c++)b===!0||-1!==a.inArray(c,b)?a(d).addClass("ui-state-disabled").attr("aria-disabled","true"):a(d).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=b},_setupEvents:function(b){var c={click:function(a){a.preventDefault()}};b&&a.each(b.split(" "),function(a,b){c[b]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,c),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(b){var c,d=this.element.parent();"fill"===b?(c=d.height(),c-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var b=a(this),d=b.css("position");"absolute"!==d&&"fixed"!==d&&(c-=b.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){c-=a(this).outerHeight(!0)}),this.panels.each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===b&&(c=0,this.panels.each(function(){c=Math.max(c,a(this).height("").height())}).height(c))},_eventHandler:function(b){var c=this.options,d=this.active,e=a(b.currentTarget),f=e.closest("li"),g=f[0]===d[0],h=g&&c.collapsible,i=h?a():this._getPanelForTab(f),j=d.length?this._getPanelForTab(d):a(),k={oldTab:d,oldPanel:j,newTab:h?a():f,newPanel:i};b.preventDefault(),f.hasClass("ui-state-disabled")||f.hasClass("ui-tabs-loading")||this.running||g&&!c.collapsible||this._trigger("beforeActivate",b,k)===!1||(c.active=h?!1:this.tabs.index(f),this.active=g?a():f,this.xhr&&this.xhr.abort(),j.length||i.length||a.error("jQuery UI Tabs: Mismatching fragment identifier."),i.length&&this.load(this.tabs.index(f),b),this._toggle(b,k))},_toggle:function(b,c){function g(){d.running=!1,d._trigger("activate",b,c)}function h(){c.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),e.length&&d.options.show?d._show(e,d.options.show,g):(e.show(),g())}var d=this,e=c.newPanel,f=c.oldPanel;this.running=!0,f.length&&this.options.hide?this._hide(f,this.options.hide,function(){c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),h()}):(c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),f.hide(),h()),f.attr({"aria-expanded":"false","aria-hidden":"true"}),c.oldTab.attr("aria-selected","false"),e.length&&f.length?c.oldTab.attr("tabIndex",-1):e.length&&this.tabs.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1),e.attr({"aria-expanded":"true","aria-hidden":"false"}),c.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(b){var c,d=this._findActive(b);d[0]!==this.active[0]&&(d.length||(d=this.active),c=d.find(".ui-tabs-anchor")[0],this._eventHandler({target:c,currentTarget:c,preventDefault:a.noop}))},_findActive:function(b){return b===!1?a():this.tabs.eq(b)},_getIndex:function(a){return"string"==typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']"))),a},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){a.data(this,"ui-tabs-destroy")?a(this).remove():a(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var b=a(this),c=b.data("ui-tabs-aria-controls");c?b.attr("aria-controls",c).removeData("ui-tabs-aria-controls"):b.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(c){var d=this.options.disabled;d!==!1&&(c===b?d=!1:(c=this._getIndex(c),d=a.isArray(d)?a.map(d,function(a){return a!==c?a:null}):a.map(this.tabs,function(a,b){return b!==c?b:null})),this._setupDisabled(d))},disable:function(c){var d=this.options.disabled;if(d!==!0){if(c===b)d=!0;else{if(c=this._getIndex(c),-1!==a.inArray(c,d))return;d=a.isArray(d)?a.merge([c],d).sort():[c]}this._setupDisabled(d)}},load:function(b,c){b=this._getIndex(b);var d=this,e=this.tabs.eq(b),g=e.find(".ui-tabs-anchor"),h=this._getPanelForTab(e),i={tab:e,panel:h};f(g[0])||(this.xhr=a.ajax(this._ajaxSettings(g,c,i)),this.xhr&&"canceled"!==this.xhr.statusText&&(e.addClass("ui-tabs-loading"),h.attr("aria-busy","true"),this.xhr.success(function(a){setTimeout(function(){h.html(a),d._trigger("load",c,i)},1)}).complete(function(a,b){setTimeout(function(){"abort"===b&&d.panels.stop(!1,!0),e.removeClass("ui-tabs-loading"),h.removeAttr("aria-busy"),a===d.xhr&&delete d.xhr},1)})))},_ajaxSettings:function(b,c,d){var e=this;return{url:b.attr("href"),beforeSend:function(b,f){return e._trigger("beforeLoad",c,a.extend({jqXHR:b,ajaxSettings:f},d))}}},_getPanelForTab:function(b){var c=a(b).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+c))}})}(jQuery),function(a){function c(b,c){var d=(b.attr("aria-describedby")||"").split(/\s+/);d.push(c),b.data("ui-tooltip-id",c).attr("aria-describedby",a.trim(d.join(" ")))}function d(b){var c=b.data("ui-tooltip-id"),d=(b.attr("aria-describedby")||"").split(/\s+/),e=a.inArray(c,d);-1!==e&&d.splice(e,1),b.removeData("ui-tooltip-id"),d=a.trim(d.join(" ")),d?b.attr("aria-describedby",d):b.removeAttr("aria-describedby")}var b=0;a.widget("ui.tooltip",{version:"1.10.4",options:{content:function(){var b=a(this).attr("title")||"";return a("<a>").text(b).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(b,c){var d=this;return"disabled"===b?(this[c?"_disable":"_enable"](),this.options[b]=c,void 0):(this._super(b,c),"content"===b&&a.each(this.tooltips,function(a,b){d._updateContent(b)}),void 0)},_disable:function(){var b=this;a.each(this.tooltips,function(c,d){var e=a.Event("blur");e.target=e.currentTarget=d[0],b.close(e,!0)}),this.element.find(this.options.items).addBack().each(function(){var b=a(this);b.is("[title]")&&b.data("ui-tooltip-title",b.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var b=a(this);b.data("ui-tooltip-title")&&b.attr("title",b.data("ui-tooltip-title"))})},open:function(b){var c=this,d=a(b?b.target:this.element).closest(this.options.items);d.length&&!d.data("ui-tooltip-id")&&(d.attr("title")&&d.data("ui-tooltip-title",d.attr("title")),d.data("ui-tooltip-open",!0),b&&"mouseover"===b.type&&d.parents().each(function(){var d,b=a(this);b.data("ui-tooltip-open")&&(d=a.Event("blur"),d.target=d.currentTarget=this,c.close(d,!0)),b.attr("title")&&(b.uniqueId(),c.parents[this.id]={element:this,title:b.attr("title")},b.attr("title",""))}),this._updateContent(d,b))
},_updateContent:function(a,b){var c,d=this.options.content,e=this,f=b?b.type:null;return"string"==typeof d?this._open(b,a,d):(c=d.call(a[0],function(c){a.data("ui-tooltip-open")&&e._delay(function(){b&&(b.type=f),this._open(b,a,c)})}),c&&this._open(b,a,c),void 0)},_open:function(b,d,e){function j(a){i.of=a,f.is(":hidden")||f.position(i)}var f,g,h,i=a.extend({},this.options.position);if(e){if(f=this._find(d),f.length)return f.find(".ui-tooltip-content").html(e),void 0;d.is("[title]")&&(b&&"mouseover"===b.type?d.attr("title",""):d.removeAttr("title")),f=this._tooltip(d),c(d,f.attr("id")),f.find(".ui-tooltip-content").html(e),this.options.track&&b&&/^mouse/.test(b.type)?(this._on(this.document,{mousemove:j}),j(b)):f.position(a.extend({of:d},this.options.position)),f.hide(),this._show(f,this.options.show),this.options.show&&this.options.show.delay&&(h=this.delayedShow=setInterval(function(){f.is(":visible")&&(j(i.of),clearInterval(h))},a.fx.interval)),this._trigger("open",b,{tooltip:f}),g={keyup:function(b){if(b.keyCode===a.ui.keyCode.ESCAPE){var c=a.Event(b);c.currentTarget=d[0],this.close(c,!0)}},remove:function(){this._removeTooltip(f)}},b&&"mouseover"!==b.type||(g.mouseleave="close"),b&&"focusin"!==b.type||(g.focusout="close"),this._on(!0,d,g)}},close:function(b){var c=this,e=a(b?b.currentTarget:this.element),f=this._find(e);this.closing||(clearInterval(this.delayedShow),e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title")),d(e),f.stop(!0),this._hide(f,this.options.hide,function(){c._removeTooltip(a(this))}),e.removeData("ui-tooltip-open"),this._off(e,"mouseleave focusout keyup"),e[0]!==this.element[0]&&this._off(e,"remove"),this._off(this.document,"mousemove"),b&&"mouseleave"===b.type&&a.each(this.parents,function(b,d){a(d.element).attr("title",d.title),delete c.parents[b]}),this.closing=!0,this._trigger("close",b,{tooltip:f}),this.closing=!1)},_tooltip:function(c){var d="ui-tooltip-"+b++,e=a("<div>").attr({id:d,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return a("<div>").addClass("ui-tooltip-content").appendTo(e),e.appendTo(this.document[0].body),this.tooltips[d]=c,e},_find:function(b){var c=b.data("ui-tooltip-id");return c?a("#"+c):a()},_removeTooltip:function(a){a.remove(),delete this.tooltips[a.attr("id")]},_destroy:function(){var b=this;a.each(this.tooltips,function(c,d){var e=a.Event("blur");e.target=e.currentTarget=d[0],b.close(e,!0),a("#"+c).remove(),d.data("ui-tooltip-title")&&(d.attr("title",d.data("ui-tooltip-title")),d.removeData("ui-tooltip-title"))})}})}(jQuery);

/*<script src="${ctxStatic}/org/tinygroup/animation/js/animate.js"></script>*/
$(function(){$(".animated-delay[data-animate]").each(function(){var a=$(this),b=a.data("animate"),c="fadeIn";b.length>1&&b.length<3&&(b=a.data("animate")[0],c=a.data("animate")[1]),setTimeout(function(){a.removeClass("animated-delay").addClass("animated "+c).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){a.removeClass("animated "+c)})},b)})});

/*<script src="${ctxStatic}/org/tinygroup/base/js/pixel-slimscroll.js"></script>*/
!function(a){jQuery.fn.extend({pixelSlimScroll:function(b){var c={width:"auto",size:"2px",color:"#000",distance:"1px",start:"top",opacity:.4,railColor:"#333",railOpacity:.2,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"0px",railBorderRadius:"0px"},d=a.extend(c,b);return this.each(function(){function u(b){var e,f;c&&(b=b||window.event,e=0,b.wheelDelta&&(e=-b.wheelDelta/120),b.detail&&(e=b.detail/3),f=b.target||b.srcTarget||b.srcElement,a(f).closest("."+d.wrapperClass).is(o.parent())&&v(e,!0),b.preventDefault&&!n&&b.preventDefault(),n||(b.returnValue=!1))}function v(a,b,c){var e,f,g;n=!1,e=a,f=o.outerHeight()-s.outerHeight(),b&&(e=parseInt(s.css("top"))+a*parseInt(d.wheelStep)/100*s.outerHeight(),e=Math.min(Math.max(e,0),f),e=a>0?Math.ceil(e):Math.floor(e),s.css({top:e+"px"})),j=parseInt(s.css("top"))/(o.outerHeight()-s.outerHeight()),e=j*(o[0].scrollHeight-o.outerHeight()),c&&(e=a,g=e/o[0].scrollHeight*o.outerHeight(),g=Math.min(Math.max(g,0),f),s.css({top:g+"px"})),o.scrollTop(e),o.trigger("slimscrolling",~~e),y(),z()}function w(){window.addEventListener?(this.addEventListener("DOMMouseScroll",u,!1),this.addEventListener("mousewheel",u,!1)):document.attachEvent("onmousewheel",u)}function x(){i=Math.max(o.outerHeight()/o[0].scrollHeight*o.outerHeight(),m),s.css({height:i+"px"});var a=i==o.outerHeight()?"none":"block";s.css({display:a})}function y(){if(x(),clearTimeout(g),j==~~j){if(n=d.allowPageScroll,k!=j){var a=0==~~j?"top":"bottom";o.trigger("slimscroll",a)}}else n=!1;return k=j,i>=o.outerHeight()?(n=!0,void 0):(s.stop(!0,!0).fadeIn("fast"),void 0)}function z(){}var c,e,f,g,h,i,j,k,p,q,r,s,l="<div></div>",m=30,n=!1,o=a(this);if(o.parent().hasClass(d.wrapperClass)){if(p=o.scrollTop(),s=o.parent().find("."+d.barClass),r=o.parent().find("."+d.railClass),x(),a.isPlainObject(b)){if("scrollTo"in b)p=parseInt(d.scrollTo);else if("scrollBy"in b)p+=parseInt(d.scrollBy);else if("destroy"in b)return s.remove(),r.remove(),o.unwrap(),void 0;v(p,!1,!0)}}else q=a(l).addClass(d.wrapperClass).css({position:"relative",overflow:"hidden",width:d.width}),o.css({overflow:"hidden",width:d.width}),r=a(l).addClass(d.railClass).css({width:d.size,height:"100%",position:"absolute",top:0,display:"none","border-radius":d.railBorderRadius,background:d.railColor,opacity:d.railOpacity,zIndex:90}),s=a(l).addClass(d.barClass).css({background:d.color,width:d.size,position:"absolute",top:0,opacity:d.opacity,display:"block","border-radius":d.borderRadius,BorderRadius:d.borderRadius,MozBorderRadius:d.borderRadius,WebkitBorderRadius:d.borderRadius,zIndex:99}),r.css({right:d.distance}),s.css({right:d.distance}),o.wrap(q),o.parent().append(s),o.parent().append(r),s.bind("mousedown",function(b){var c=a(document);return f=!0,t=parseFloat(s.css("top")),pageY=b.pageY,c.bind("mousemove.slimscroll",function(a){currTop=t+a.pageY-pageY,s.css("top",currTop),v(0,s.position().top,!1)}),c.bind("mouseup.slimscroll",function(){f=!1,z(),c.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(a){return a.stopPropagation(),a.preventDefault(),!1}),r.hover(function(){y()},function(){z()}),s.hover(function(){e=!0},function(){e=!1}),o.hover(function(){c=!0,y(),z()},function(){c=!1,z()}),o.bind("touchstart",function(a){a.originalEvent.touches.length&&(h=a.originalEvent.touches[0].pageY)}),o.bind("touchmove",function(a){if(n||a.originalEvent.preventDefault(),a.originalEvent.touches.length){var b=(h-a.originalEvent.touches[0].pageY)/d.touchScrollStep;v(b,!0),h=a.originalEvent.touches[0].pageY}}),x(),w()}),this}}),jQuery.fn.extend({pixelslimscroll:jQuery.fn.pixelSlimScroll})}(jQuery);

/*<script src="${ctxStatic}/org/tinygroup/base/js/fastclick-0.6.11.js"></script>*/
function FastClick(a){"use strict";var b,c=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=a,!a||!a.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return FastClick.prototype.onClick.apply(c,arguments)},this.onMouse=function(){return FastClick.prototype.onMouse.apply(c,arguments)},this.onTouchStart=function(){return FastClick.prototype.onTouchStart.apply(c,arguments)},this.onTouchMove=function(){return FastClick.prototype.onTouchMove.apply(c,arguments)},this.onTouchEnd=function(){return FastClick.prototype.onTouchEnd.apply(c,arguments)},this.onTouchCancel=function(){return FastClick.prototype.onTouchCancel.apply(c,arguments)},FastClick.notNeeded(a)||(this.deviceIsAndroid&&(a.addEventListener("mouseover",this.onMouse,!0),a.addEventListener("mousedown",this.onMouse,!0),a.addEventListener("mouseup",this.onMouse,!0)),a.addEventListener("click",this.onClick,!0),a.addEventListener("touchstart",this.onTouchStart,!1),a.addEventListener("touchmove",this.onTouchMove,!1),a.addEventListener("touchend",this.onTouchEnd,!1),a.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(a.removeEventListener=function(b,c,d){var e=Node.prototype.removeEventListener;"click"===b?e.call(a,b,c.hijacked||c,d):e.call(a,b,c,d)},a.addEventListener=function(b,c,d){var e=Node.prototype.addEventListener;"click"===b?e.call(a,b,c.hijacked||(c.hijacked=function(a){a.propagationStopped||c(a)}),d):e.call(a,b,c,d)}),"function"==typeof a.onclick&&(b=a.onclick,a.addEventListener("click",function(a){b(a)},!1),a.onclick=null))}FastClick.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),FastClick.prototype.needsClick=function(a){"use strict";switch(a.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(a.disabled)return!0;break;case"input":if(this.deviceIsIOS&&"file"===a.type||a.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(a.className)},FastClick.prototype.needsFocus=function(a){"use strict";switch(a.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!this.deviceIsAndroid;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}},FastClick.prototype.sendClick=function(a,b){"use strict";var c,d;document.activeElement&&document.activeElement!==a&&document.activeElement.blur(),d=b.changedTouches[0],c=document.createEvent("MouseEvents"),c.initMouseEvent(this.determineEventType(a),!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),c.forwardedTouchEvent=!0,a.dispatchEvent(c)},FastClick.prototype.determineEventType=function(a){"use strict";return this.deviceIsAndroid&&"select"===a.tagName.toLowerCase()?"mousedown":"click"},FastClick.prototype.focus=function(a){"use strict";var b;this.deviceIsIOS&&a.setSelectionRange&&0!==a.type.indexOf("date")&&"time"!==a.type?(b=a.value.length,a.setSelectionRange(b,b)):a.focus()},FastClick.prototype.updateScrollParent=function(a){"use strict";var b,c;if(b=a.fastClickScrollParent,!b||!b.contains(a)){c=a;do{if(c.scrollHeight>c.offsetHeight){b=c,a.fastClickScrollParent=c;break}c=c.parentElement}while(c)}b&&(b.fastClickLastScrollTop=b.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(a){"use strict";return a.nodeType===Node.TEXT_NODE?a.parentNode:a},FastClick.prototype.onTouchStart=function(a){"use strict";var b,c,d;if(a.targetTouches.length>1)return!0;if(b=this.getTargetElementFromEventTarget(a.target),c=a.targetTouches[0],this.deviceIsIOS){if(d=window.getSelection(),d.rangeCount&&!d.isCollapsed)return!0;if(!this.deviceIsIOS4){if(c.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;this.lastTouchIdentifier=c.identifier,this.updateScrollParent(b)}}return this.trackingClick=!0,this.trackingClickStart=a.timeStamp,this.targetElement=b,this.touchStartX=c.pageX,this.touchStartY=c.pageY,a.timeStamp-this.lastClickTime<200&&a.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(a){"use strict";var b=a.changedTouches[0],c=this.touchBoundary;return Math.abs(b.pageX-this.touchStartX)>c||Math.abs(b.pageY-this.touchStartY)>c?!0:!1},FastClick.prototype.onTouchMove=function(a){"use strict";return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},FastClick.prototype.findControl=function(a){"use strict";return void 0!==a.control?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(a){"use strict";var b,c,d,e,f,g=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=a.timeStamp,c=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(f=a.changedTouches[0],g=document.elementFromPoint(f.pageX-window.pageXOffset,f.pageY-window.pageYOffset)||g,g.fastClickScrollParent=this.targetElement.fastClickScrollParent),d=g.tagName.toLowerCase(),"label"===d){if(b=this.findControl(g)){if(this.focus(g),this.deviceIsAndroid)return!1;g=b}}else if(this.needsFocus(g))return a.timeStamp-c>100||this.deviceIsIOS&&window.top!==window&&"input"===d?(this.targetElement=null,!1):(this.focus(g),this.deviceIsIOS4&&"select"===d||(this.targetElement=null,a.preventDefault()),!1);return this.deviceIsIOS&&!this.deviceIsIOS4&&(e=g.fastClickScrollParent,e&&e.fastClickLastScrollTop!==e.scrollTop)?!0:(this.needsClick(g)||(a.preventDefault(),this.sendClick(g,a)),!1)},FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(a){"use strict";return this.targetElement?a.forwardedTouchEvent?!0:a.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1):!0:!0:!0},FastClick.prototype.onClick=function(a){"use strict";var b;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===a.target.type&&0===a.detail?!0:(b=this.onMouse(a),b||(this.targetElement=null),b)},FastClick.prototype.destroy=function(){"use strict";var a=this.layer;this.deviceIsAndroid&&(a.removeEventListener("mouseover",this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0)),a.removeEventListener("click",this.onClick,!0),a.removeEventListener("touchstart",this.onTouchStart,!1),a.removeEventListener("touchmove",this.onTouchMove,!1),a.removeEventListener("touchend",this.onTouchEnd,!1),a.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(a){"use strict";var b,c;if("undefined"==typeof window.ontouchstart)return!0;if(c=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!FastClick.prototype.deviceIsAndroid)return!0;if(b=document.querySelector("meta[name=viewport]")){if(-1!==b.content.indexOf("user-scalable=no"))return!0;if(c>31&&window.innerWidth<=window.screen.width)return!0}}return"none"===a.style.msTouchAction?!0:!1},FastClick.attach=function(a){"use strict";return new FastClick(a)},"undefined"!=typeof define&&define.amd?define(function(){"use strict";return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick;

/*<script src="${ctxStatic}/org/tinygroup/base/js/jquery.cookie.js"></script>*/
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?a(require("jquery")):a(jQuery)}(function(a){function c(a){return h.raw?a:encodeURIComponent(a)}function d(a){return h.raw?a:decodeURIComponent(a)}function e(a){return c(h.json?JSON.stringify(a):String(a))}function f(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return a=decodeURIComponent(a.replace(b," ")),h.json?JSON.parse(a):a}catch(c){}}function g(b,c){var d=h.raw?b:f(b);return a.isFunction(c)?c(d):d}var b=/\+/g,h=a.cookie=function(b,f,i){var j,k,l,m,n,o,p,q,r;if(void 0!==f&&!a.isFunction(f))return i=a.extend({},h.defaults,i),"number"==typeof i.expires&&(j=i.expires,k=i.expires=new Date,k.setTime(+k+864e5*j)),document.cookie=[c(b),"=",e(f),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("");for(l=b?void 0:{},m=document.cookie?document.cookie.split("; "):[],n=0,o=m.length;o>n;n++){if(p=m[n].split("="),q=d(p.shift()),r=p.join("="),b&&b===q){l=g(r,f);break}b||void 0===(r=g(r))||(l[q]=r)}return l};h.defaults={},a.removeCookie=function(b,c){return void 0===a.cookie(b)?!1:(a.cookie(b,"",a.extend({},c,{expires:-1})),!a.cookie(b))}});

/*<script src="${ctxStatic}/org/tinygroup/base/js/resize.js"></script>*/
!function(a,b,c){function l(){f=b[g](function(){d.each(function(){var b=a(this),c=b.width(),d=b.height(),e=a.data(this,i);(c!==e.w||d!==e.h)&&b.trigger(h,[e.w=c,e.h=d])}),l()},e[j])}var f,d=a([]),e=a.resize=a.extend(a.resize,{}),g="setTimeout",h="resize",i=h+"-special-event",j="delay",k="throttleWindow";e[j]=250,e[k]=!0,a.event.special[h]={setup:function(){if(!e[k]&&this[g])return!1;var b=a(this);d=d.add(b),a.data(this,i,{w:b.width(),h:b.height()}),1===d.length&&l()},teardown:function(){if(!e[k]&&this[g])return!1;var b=a(this);d=d.not(b),b.removeData(i),d.length||clearTimeout(f)},add:function(b){function f(b,e,f){var g=a(this),h=a.data(this,i);h.w=e!==c?e:g.width(),h.h=f!==c?f:g.height(),d.apply(this,arguments)}if(!e[k]&&this[g])return!1;var d;return a.isFunction(b)?(d=b,f):(d=b.handler,b.handler=f,void 0)}}}(jQuery,this);

/*<script src="${ctxStatic}/org/tinygroup/base/js/tinyui.js"></script>*/
!function(a){a.fn.serializeObject=function(){var b={},c=this.serializeArray();return a.each(c,function(){void 0!==b[this.name]?(b[this.name].push||(b[this.name]=[b[this.name]]),b[this.name].push(this.value||"")):b[this.name]=this.value||""}),b},a.fn.serializeJson=function(){return this.serializeObject()},a.fn.tinyHover=function(b){a(b).hover(function(){a(this).addClass("hover")},function(){a(this).removeClass("hover")})}}(jQuery);var TUI={};TUI.html_encode=function(a){var b=/"|&|'|<|>|[\x00-\x20]|[\x7F-\xFF]|[\u0100-\u2700]/g;return a=void 0!=a?a:this.toString(),"string"!=typeof a?a:a.replace(b,function(a){var b=a.charCodeAt(0),c=["&#"];return b=32==b?160:b,c.push(b),c.push(";"),c.join("")})};

/*<script src="${ctxStatic}/org/tinygroup/base/js/canvas-to-blob.min.js"></script>*/
!function(t){"use strict";var e=t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype,o=t.Blob&&function(){try{return Boolean(new Blob)}catch(t){return!1}}(),n=o&&t.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(t){return!1}}(),r=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||t.MSBlobBuilder,a=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,i=(o||r)&&t.atob&&t.ArrayBuffer&&t.Uint8Array&&function(t){var e,i,l,u,b,c,d,B,f;if(e=t.match(a),!e)throw new Error("invalid data URI");for(i=e[2]?e[1]:"text/plain"+(e[3]||";charset=US-ASCII"),l=!!e[4],u=t.slice(e[0].length),b=l?atob(u):decodeURIComponent(u),c=new ArrayBuffer(b.length),d=new Uint8Array(c),B=0;B<b.length;B+=1)d[B]=b.charCodeAt(B);return o?new Blob([n?d:c],{type:i}):(f=new r,f.append(c),f.getBlob(i))};t.HTMLCanvasElement&&!e.toBlob&&(e.mozGetAsFile?e.toBlob=function(t,o,n){t(n&&e.toDataURL&&i?i(this.toDataURL(o,n)):this.mozGetAsFile("blob",o))}:e.toDataURL&&i&&(e.toBlob=function(t,e,o){t(i(this.toDataURL(e,o)))})),"function"==typeof define&&define.amd?define(function(){return i}):"object"==typeof module&&module.exports?module.exports=i:t.dataURLtoBlob=i}(window);

/*<script src="${ctxStatic}/org/tinygroup/base/js/time.js"></script>*/
function dateFormatter(a,b){return("undefined"==typeof b||"object"==typeof b)&&(b="YYYY-MM-DD"),moment(a).format(b)}function timeFormatter(a){return dateFormatter(a,"YYYY-MM-DD HH:mm:ss")}jQuery.getDateDiff=function(a){var c,d,e,f,g,h,i,j,k,l,m,b="";return isNaN(a)?b:(c=6e4,d=60*c,e=24*d,f=30*e,g=(new Date).getTime(),h=g-a,0>h?"":(i=h/f,j=h/(7*e),k=h/e,l=h/d,m=h/c,b=i>12?"很久很久以前":i>=1?parseInt(i)+"个月前":j>=1?parseInt(j)+"周前":k>=1?parseInt(k)+"天前":l>=1?parseInt(l)+"个小时前":m>=1?parseInt(m)+"分钟前":"刚刚"))};

/*<script src="${ctxStatic}/org/tinygroup/switcher/js/switcher.js"></script>*/
!function(){var a;a=function(b,c){var d;return null==c&&(c={}),this.options=$.extend({},a.DEFAULTS,c),this.$checkbox=null,this.$box=null,b.is('input[type="checkbox"]')?(d=b.attr("data-class"),this.$checkbox=b,this.$box=$('<div class="switcher"><div class="switcher-toggler"></div><div class="switcher-inner"><div class="switcher-state-on">'+this.options.on_state_content+'</div><div class="switcher-state-off">'+this.options.off_state_content+"</div></div></div>"),this.options.theme&&this.$box.addClass("switcher-theme-"+this.options.theme),d&&this.$box.addClass(d),this.$box.insertAfter(this.$checkbox).prepend(this.$checkbox)):(this.$box=b,this.$checkbox=$('input[type="checkbox"]',this.$box)),this.$checkbox.prop("disabled")&&this.$box.addClass("disabled"),this.$checkbox.is(":checked")&&this.$box.addClass("checked"),this.$checkbox.on("click",function(a){return a.stopPropagation()}),this.$box.on("touchend click",function(a){return function(b){return b.stopPropagation(),b.preventDefault(),a.toggle()}}(this)),this},a.prototype.enable=function(){return this.$checkbox.prop("disabled",!1),this.$box.removeClass("disabled")},a.prototype.disable=function(){return this.$checkbox.prop("disabled",!0),this.$box.addClass("disabled")},a.prototype.on=function(){return this.$checkbox.is(":checked")?void 0:(this.$checkbox.click(),this.$box.addClass("checked"))},a.prototype.off=function(){return this.$checkbox.is(":checked")?(this.$checkbox.click(),this.$box.removeClass("checked")):void 0},a.prototype.toggle=function(){return this.$checkbox.click().is(":checked")?this.$box.addClass("checked"):this.$box.removeClass("checked")},a.DEFAULTS={theme:null,on_state_content:"ON",off_state_content:"OFF"},$.fn.switcher=function(b){return $(this).each(function(){var c,d;return c=$(this),d=$.data(this,"Switcher"),d?"enable"===b?d.enable():"disable"===b?d.disable():"on"===b?d.on():"off"===b?d.off():"toggle"===b?d.toggle():void 0:$.data(this,"Switcher",new a(c,b))})},$.fn.switcher.Constructor=a}.call(this);

/*<script src="${ctxStatic}/org/tinygroup/frameCommon/js/app.js"></script>*/
function launchFullScreen(a){var b;if($("body").hasClass("full-screen"))b=document.cancelFullScreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||document.msCancelFullScreen||document.exitFullscreen,"undefined"!=typeof b&&b&&b.call(document);else{if(b=a.requestFullScreen||a.webkitRequestFullScreen||a.mozRequestFullScreen||a.msRequestFullScreen,"undefined"==typeof b||!b)return alert("你的浏览器不支持，请按F11进行全屏预览"),!1;b.call(a)}$("body").toggleClass("full-screen")}!function(){var a,b;b={is_mobile:!1,resize_delay:400,stored_values_prefix:"pa_",main_menu:{accordion:!0,animation_speed:250,store_state:!0,store_state_key:"mmstate",disable_animation_on:["small"],dropdown_close_delay:300,detect_active:!1,detect_active_predicate:function(a,b){return a===b}},consts:{COLORS:["#71c73e","#77b7c5","#d54848","#6c42e5","#e8e64e","#dd56e6","#ecad3f","#618b9d","#b68b68","#36a766","#3156be","#00b3ff","#646464","#a946e8","#9d9d9d"]}},a=function(){return this.init=[],this.plugins={},this.settings={},this.localStorageSupported="undefined"!=typeof window.Storage?!0:!1,this},a.prototype.start=function(a,c){return null==a&&(a=[]),null==c&&(c={}),window.onload=function(d){return function(){var e,f,g,h;for($("html").addClass("pxajs"),a.length>0&&$.merge(d.init,a),d.settings=$.extend(!0,{},b,c||{}),d.settings.is_mobile=/iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase()),d.settings.is_mobile&&FastClick&&FastClick.attach(document.body),h=d.init,f=0,g=h.length;g>f;f++)e=h[f],$.proxy(e,d)();return $(window).trigger("pa.loaded"),$(window).resize()}}(this),this},a.prototype.addInitializer=function(a){return this.init.push(a)},a.prototype.initPlugin=function(a,b){return this.plugins[a]=b,b.init?b.init():void 0},a.prototype.storeValue=function(a,b,c){var d;if(null==c&&(c=!1),this.localStorageSupported&&!c)try{return window.localStorage.setItem(this.settings.stored_values_prefix+a,b),void 0}catch(e){d=e}return document.cookie=this.settings.stored_values_prefix+a+"="+escape(b)},a.prototype.storeValues=function(a,b){var c,d,e,f;if(null==b&&(b=!1),this.localStorageSupported&&!b)try{for(d in a)e=a[d],window.localStorage.setItem(this.settings.stored_values_prefix+d,e);return}catch(g){c=g}f=[];for(d in a)e=a[d],f.push(document.cookie=this.settings.stored_values_prefix+d+"="+escape(e));return f},a.prototype.getStoredValue=function(a,b,c){var d,e,f,g,h,i,j,k,l;if(null==b&&(b=!1),null==c&&(c=null),this.localStorageSupported&&!b)try{return i=window.localStorage.getItem(this.settings.stored_values_prefix+a),i?i:c}catch(m){f=m}for(e=document.cookie.split(";"),k=0,l=e.length;l>k;k++)if(d=e[k],h=d.indexOf("="),g=d.substr(0,h).replace(/^\s+|\s+$/g,""),j=d.substr(h+1).replace(/^\s+|\s+$/g,""),g===this.settings.stored_values_prefix+a)return j;return c},a.prototype.getStoredValues=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;for(null==b&&(b=!1),null==c&&(c=null),k={},m=0,p=a.length;p>m;m++)h=a[m],k[h]=c;if(this.localStorageSupported&&!b)try{for(n=0,q=a.length;q>n;n++)h=a[n],j=window.localStorage.getItem(this.settings.stored_values_prefix+h),j&&(k[h]=j);return k}catch(s){f=s}for(e=document.cookie.split(";"),o=0,r=e.length;r>o;o++)d=e[o],i=d.indexOf("="),g=d.substr(0,i).replace(/^\s+|\s+$/g,""),l=d.substr(i+1).replace(/^\s+|\s+$/g,""),g===this.settings.stored_values_prefix+h&&(k[h]=l);return k},a.Constructor=a,window.TinyAdmin=new a}.call(this);

/*<script src="${ctxStatic}/org/tinygroup/frameCommon/js/events.js"></script>*/
!function(){var a;a=function(a){var b;return b=null,function(){return b&&clearTimeout(b),b=setTimeout(function(){return b=null,a.call(this)},TinyAdmin.settings.resize_delay)}},TinyAdmin.addInitializer(function(){var b,c,d,e;return e=null,d=$(window),b=$('<div id="small-screen-width-point" style="position:absolute;top:-10000px;width:10px;height:10px;background:#fff;"></div>'),c=$('<div id="tablet-screen-width-point" style="position:absolute;top:-10000px;width:10px;height:10px;background:#fff;"></div>'),$("body").append(b).append(c),d.on("resize",a(function(){return d.trigger("pa.resize"),b.is(":visible")?("small"!==e&&d.trigger("pa.screen.small"),e="small"):c.is(":visible")?("tablet"!==e&&d.trigger("pa.screen.tablet"),e="tablet"):("desktop"!==e&&d.trigger("pa.screen.desktop"),e="desktop")}))})}.call(this);

/*<script src="${ctxStatic}/org/tinygroup/frameCommon/js/utils.js"></script>*/
!function(){String.prototype.endsWith||(String.prototype.endsWith=function(a){return-1!==this.indexOf(a,this.length-a.length)}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c,d,e;if(void 0===this||null===this)throw new TypeError('"this" is null or not defined');for(d=this.length>>>0,b=+b||0,1/0===Math.abs(b)&&(b=0),0>b&&(b+=d,0>b&&(b=0)),c=e=b;d>=b?d>e:e>d;c=d>=b?++e:--e)if(this[c]===a)return c;return-1}),Function.prototype.bind||(Function.prototype.bind=function(a){var b,c,d,e;if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");return b=Array.prototype.slice.call(arguments,1),e=this,d=function(){},c=function(){return e.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))},d.prototype=this.prototype,c.prototype=new d,c}),Object.keys||(Object.keys=function(){"use strict";var a,b,c;return c=Object.prototype.hasOwnProperty,b={toString:null}.propertyIsEnumerable("toString")?!1:!0,a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],function(d){var e,f,g,h,i,j,k;if("object"!=typeof d&&("function"!=typeof d||null===d))throw new TypeError("Object.keys called on non-object");for(g=[],h=0,j=d.length;j>h;h++)f=d[h],c.call(d,f)&&g.push(f);if(b)for(i=0,k=a.length;k>i;i++)e=a[i],c.call(d,e)&&g.push(e);return g}}.call(this)),window.getScreenSize=function(a,b){return 0==$.support.leadingWhitespace?"desktop":a.is(":visible")?"small":b.is(":visible")?"tablet":"desktop"},window.elHasClass=function(a,b){return(" "+a.className+" ").indexOf(" "+b+" ")>-1},window.elRemoveClass=function(a,b){return a.className=(" "+a.className+" ").replace(" "+b+" "," ").trim()}}.call(this);

/*<script src="${ctxStatic}/org/tinygroup/frameCommon/js/main-menu.js"></script>*/
!function(){TinyAdmin.MainMenu=function(){return this._screen=null,this._last_screen=null,this._animate=!1,this._close_timer=null,this._dropdown_li=null,this._dropdown=null,this},TinyAdmin.MainMenu.prototype.init=function(){var a,b;return this.$menu=$("#main-menu"),this.$menu.length?(this.$body=$("body"),this.menu=this.$menu[0],this.$ssw_point=$("#small-screen-width-point"),this.$tsw_point=$("#tablet-screen-width-point"),a=this,TinyAdmin.settings.main_menu.store_state&&(b=this._getMenuState(),document.body.className+=" disable-mm-animation",null!==b&&this.$body["collapsed"===b?"addClass":"removeClass"]("mmc"),setTimeout(function(){return function(){return elRemoveClass(document.body,"disable-mm-animation")}}(this),20)),this.setupAnimation(),$(window).on("resize.pa.mm",$.proxy(this.onResize,this)),this.onResize(),this.$menu.find(".navigation > .mm-dropdown").addClass("mm-dropdown-root"),TinyAdmin.settings.main_menu.detect_active&&this.detectActiveItem(),$.support.transition&&this.$menu.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",$.proxy(this._onAnimationEnd,this)),$("#main-menu-toggle").on("click",$.proxy(this.toggle,this)),$("#main-menu-inner").slimScroll({height:"100%"}).on("slimscrolling",function(a){return function(){return a.closeCurrentDropdown(!0)}}(this)),this.$menu.on("click",".mm-dropdown > a",function(){var b;return b=this.parentNode,elHasClass(b,"mm-dropdown-root")&&a._collapsed()?elHasClass(b,"mmc-dropdown-open")?elHasClass(b,"freeze")?a.closeCurrentDropdown(!0):a.freezeDropdown(b):a.openDropdown(b,!0):a.toggleSubmenu(b),!1}),this.$menu.find(".navigation").on("mouseenter.pa.mm-dropdown",".mm-dropdown-root",function(){return a.clearCloseTimer(),a._dropdown_li!==this?!a._collapsed()||a._dropdown_li&&elHasClass(a._dropdown_li,"freeze")?void 0:a.openDropdown(this):void 0}).on("mouseleave.pa.mm-dropdown",".mm-dropdown-root",function(){return a._close_timer=setTimeout(function(){return a.closeCurrentDropdown()},TinyAdmin.settings.main_menu.dropdown_close_delay)}),this):void 0},TinyAdmin.MainMenu.prototype._collapsed=function(){return"desktop"===this._screen&&elHasClass(document.body,"mmc")||"desktop"!==this._screen&&!elHasClass(document.body,"mme")},TinyAdmin.MainMenu.prototype.onResize=function(){return this._screen=getScreenSize(this.$ssw_point,this.$tsw_point),this._animate=-1===TinyAdmin.settings.main_menu.disable_animation_on.indexOf(screen),this._dropdown_li&&this.closeCurrentDropdown(!0),("small"===this._screen&&this._last_screen!==this._screen||"tablet"===this._screen&&"small"===this._last_screen)&&(document.body.className+=" disable-mm-animation",setTimeout(function(){return function(){return elRemoveClass(document.body,"disable-mm-animation")}}(this),20)),this._last_screen=this._screen},TinyAdmin.MainMenu.prototype.clearCloseTimer=function(){return this._close_timer?(clearTimeout(this._close_timer),this._close_timer=null):void 0},TinyAdmin.MainMenu.prototype._onAnimationEnd=function(a){return"desktop"===this._screen&&"main-menu"===a.target.id?$(window).trigger("resize"):void 0},TinyAdmin.MainMenu.prototype.toggle=function(){var a,b;return a="small"===this._screen||"tablet"===this._screen?"mme":"mmc",elHasClass(document.body,a)?elRemoveClass(document.body,a):document.body.className+=" "+a,"mmc"!==a?(b=document.getElementById(""),$("#main-navbar-collapse").stop().removeClass("in collapsing").addClass("collapse")[0].style.height="0px",$("#main-navbar .navbar-toggle").addClass("collapsed")):(TinyAdmin.settings.main_menu.store_state&&this._storeMenuState(elHasClass(document.body,"mmc")),$.support.transition?void 0:$(window).trigger("resize"))},TinyAdmin.MainMenu.prototype.toggleSubmenu=function(a){return this[elHasClass(a,"open")?"collapseSubmenu":"expandSubmenu"](a),!1},TinyAdmin.MainMenu.prototype.collapseSubmenu=function(a){var b,c;return b=$(a),c=b.find("> ul"),this._animate?c.animate({height:0},TinyAdmin.settings.main_menu.animation_speed,function(){return function(){return elRemoveClass(a,"open"),c.attr("style",""),b.find(".mm-dropdown.open").removeClass("open").find("> ul").attr("style","")}}(this)):elRemoveClass(a,"open"),!1},TinyAdmin.MainMenu.prototype.expandSubmenu=function(a){var b,c,d,e;return b=$(a),TinyAdmin.settings.main_menu.accordion&&this.collapseAllSubmenus(a),this._animate?(c=b.find("> ul"),e=c[0],e.className+=" get-height",d=c.height(),elRemoveClass(e,"get-height"),e.style.display="block",e.style.height="0px",a.className+=" open",c.animate({height:d},TinyAdmin.settings.main_menu.animation_speed,function(){return function(){return c.attr("style","")}}(this))):a.className+=" open"},TinyAdmin.MainMenu.prototype.collapseAllSubmenus=function(a){var b;return b=this,$(a).parent().find("> .mm-dropdown.open").each(function(){return b.collapseSubmenu(this)})},TinyAdmin.MainMenu.prototype.openDropdown=function(a,b){var c,d,e,f,g,h,i,j,k,l,m;return null==b&&(b=!1),this._dropdown_li&&this.closeCurrentDropdown(b),c=$(a),e=c.find("> ul"),k=e[0],this._dropdown_li=a,this._dropdown=k,d=e.find("> .mmc-title"),d.length||(d=$('<div class="mmc-title"></div>').text(c.find("> a > .mm-text").text()),k.insertBefore(d[0],k.firstChild)),a.className+=" mmc-dropdown-open",k.className+=" mmc-dropdown-open-ul",j=c.position().top,elHasClass(document.body,"main-menu-fixed")?(f=e.find(".mmc-wrapper"),f.length||(m=document.createElement("div"),m.className="mmc-wrapper",m.style.overflow="hidden",m.style.position="relative",f=$(m),f.append(e.find("> li")),k.appendChild(m)),l=$(window).innerHeight(),i=d.outerHeight(),h=i+3*e.find(".mmc-wrapper > li").first().outerHeight(),j+h>l?(g=j-$("#main-navbar").outerHeight(),k.className+=" top",k.style.bottom=l-j-i+"px"):(g=l-j-i,k.style.top=j+"px"),elHasClass(k,"top")?k.appendChild(d[0]):k.insertBefore(d[0],k.firstChild),a.className+=" slimscroll-attached",f[0].style.maxHeight=g-10+"px",f.pixelSlimScroll({})):k.style.top=j+"px",b&&this.freezeDropdown(a),b||e.on("mouseenter",function(a){return function(){return a.clearCloseTimer()}}(this)).on("mouseleave",function(a){return function(){return a._close_timer=setTimeout(function(){return a.closeCurrentDropdown()},TinyAdmin.settings.main_menu.dropdown_close_delay)}}(this)),this.menu.appendChild(k)},TinyAdmin.MainMenu.prototype.closeCurrentDropdown=function(a){var b,c;return null==a&&(a=!1),!this._dropdown_li||elHasClass(this._dropdown_li,"freeze")&&!a?void 0:(this.clearCloseTimer(),b=$(this._dropdown),elHasClass(this._dropdown_li,"slimscroll-attached")&&(elRemoveClass(this._dropdown_li,"slimscroll-attached"),c=b.find(".mmc-wrapper"),c.pixelSlimScroll({destroy:"destroy"}).find("> *").appendTo(b),c.remove()),this._dropdown_li.appendChild(this._dropdown),elRemoveClass(this._dropdown,"mmc-dropdown-open-ul"),elRemoveClass(this._dropdown,"top"),elRemoveClass(this._dropdown_li,"mmc-dropdown-open"),elRemoveClass(this._dropdown_li,"freeze"),$(this._dropdown_li).attr("style",""),b.attr("style","").off("mouseenter").off("mouseleave"),this._dropdown=null,this._dropdown_li=null)},TinyAdmin.MainMenu.prototype.freezeDropdown=function(a){return a.className+=" freeze"},TinyAdmin.MainMenu.prototype.setupAnimation=function(){var a,b,c,d;return c=document.body,d=TinyAdmin.settings.main_menu.disable_animation_on,c.className+=" dont-animate-mm-content",a=$("#main-menu"),b=a.find(".navigation"),b.find("> .mm-dropdown > ul").addClass("mmc-dropdown-delay animated"),b.find("> li > a > .mm-text").addClass("mmc-dropdown-delay animated fadeIn"),a.find(".menu-content").addClass("animated fadeIn"),c.className+=-1===d.indexOf("small")?" animate-mm-sm":" dont-animate-mm-content-sm",c.className+=-1===d.indexOf("tablet")?" animate-mm-md":" dont-animate-mm-content-md",c.className+=-1===d.indexOf("desktop")?" animate-mm-lg":" dont-animate-mm-content-lg",window.setTimeout(function(){return elRemoveClass(c,"dont-animate-mm-content")},500)},TinyAdmin.MainMenu.prototype.detectActiveItem=function(){var a,b,c,d,e,f,g,h,i;for(f=(document.location+"").replace(/\#.*?$/,""),e=TinyAdmin.settings.main_menu.detect_active_predicate,d=$("#main-menu .navigation"),d.find("li").removeClass("open active"),c=d[0].getElementsByTagName("a"),b=function(){return function(a){return a.className+=" active",elHasClass(a.parentNode,"navigation")?void 0:(a=a.parentNode.parentNode,a.className+=" open",b(a))}}(this),i=[],g=0,h=c.length;h>g;g++){if(a=c[g],-1===a.href.indexOf("#")&&e(a.href,f)){b(a.parentNode);break}i.push(void 0)}return i},TinyAdmin.MainMenu.prototype._getMenuState=function(){return TinyAdmin.getStoredValue(TinyAdmin.settings.main_menu.store_state_key,null)},TinyAdmin.MainMenu.prototype._storeMenuState=function(a){return TinyAdmin.settings.main_menu.store_state?TinyAdmin.storeValue(TinyAdmin.settings.main_menu.store_state_key,a?"collapsed":"expanded"):void 0},TinyAdmin.MainMenu.Constructor=TinyAdmin.MainMenu,TinyAdmin.addInitializer(function(){return TinyAdmin.initPlugin("main_menu",new TinyAdmin.MainMenu)})}.call(this);

/*<script src="${ctxStatic}/org/tinygroup/frameCommon/js/main-navbar.js"></script>*/
!function(){TinyAdmin.MainNavbar=function(){return this._scroller=!1,this._wheight=null,this.scroll_pos=0,this},TinyAdmin.MainNavbar.prototype.init=function(){var a;return this.$navbar=$("#main-navbar"),this.$header=this.$navbar.find(".navbar-header"),this.$toggle=this.$navbar.find(".navbar-toggle:first"),this.$collapse=$("#main-navbar-collapse"),this.$collapse_div=this.$collapse.find("> div"),a=!1,$(window).on("pa.screen.small pa.screen.tablet",function(b){return function(){return"fixed"===b.$navbar.css("position")&&b._setupScroller(),a=!0}}(this)).on("pa.screen.desktop",function(b){return function(){return b._removeScroller(),a=!1}}(this)),this.$navbar.on("click",".nav-icon-btn.dropdown > .dropdown-toggle",function(b){return a?(b.preventDefault(),b.stopPropagation(),document.location.href=$(this).attr("href"),!1):void 0})},TinyAdmin.MainNavbar.prototype._setupScroller=function(){return this._scroller?void 0:(this._scroller=!0,this.$collapse_div.pixelSlimScroll({}),this.$navbar.on("shown.bs.collapse.mn_collapse",$.proxy(function(a){return function(){return a._updateCollapseHeight(),a._watchWindowHeight()}}(this),this)).on("hidden.bs.collapse.mn_collapse",$.proxy(function(a){return function(){return a._wheight=null,a.$collapse_div.pixelSlimScroll({scrollTo:"0px"})}}(this),this)).on("shown.bs.dropdown.mn_collapse",$.proxy(this._updateCollapseHeight,this)).on("hidden.bs.dropdown.mn_collapse",$.proxy(this._updateCollapseHeight,this)),this._updateCollapseHeight())},TinyAdmin.MainNavbar.prototype._removeScroller=function(){return this._scroller?(this._wheight=null,this._scroller=!1,this.$collapse_div.pixelSlimScroll({destroy:"destroy"}),this.$navbar.off("shown.bs.collapse.mn_collapse"),this.$navbar.off("hidden.bs.collapse.mn_collapse"),this.$navbar.off("shown.bs.dropdown.mn_collapse"),this.$navbar.off("hidden.bs.dropdown.mn_collapse"),this.$collapse.attr("style","")):void 0},TinyAdmin.MainNavbar.prototype._updateCollapseHeight=function(){var a,b,c;if(this._scroller)return c=$(window).innerHeight(),a=this.$header.outerHeight(),b=this.$collapse_div.scrollTop(),a+this.$collapse_div.css({"max-height":"none"}).outerHeight()>c?this.$collapse_div.css({"max-height":c-a}):this.$collapse_div.css({"max-height":"none"}),this.$collapse_div.pixelSlimScroll({scrollTo:b+"px"})},TinyAdmin.MainNavbar.prototype._watchWindowHeight=function(){var a;return this._wheight=$(window).innerHeight(),a=function(b){return function(){return null!==b._wheight?(b._wheight!==$(window).innerHeight()&&b._updateCollapseHeight(),b._wheight=$(window).innerHeight(),setTimeout(a,100)):void 0}}(this),window.setTimeout(a,100)},TinyAdmin.MainNavbar.Constructor=TinyAdmin.MainNavbar,TinyAdmin.addInitializer(function(){return TinyAdmin.initPlugin("main_navbar",new TinyAdmin.MainNavbar)})}.call(this);

/*<script src="${ctxStatic}/org/tinygroup/frameCommon/js/jquery.slimscroll-1.3.2.js"></script>*/
!function(a){jQuery.fn.extend({slimScroll:function(b){var c={width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},d=a.extend(c,b);return this.each(function(){function w(b){var e,f;c&&(b=b||window.event,e=0,b.wheelDelta&&(e=-b.wheelDelta/120),b.detail&&(e=b.detail/3),f=b.target||b.srcTarget||b.srcElement,a(f).closest("."+d.wrapperClass).is(o.parent())&&x(e,!0),b.preventDefault&&!n&&b.preventDefault(),n||(b.returnValue=!1))}function x(a,b,c){var e,f,g;n=!1,e=a,f=o.outerHeight()-u.outerHeight(),b&&(e=parseInt(u.css("top"))+a*parseInt(d.wheelStep)/100*u.outerHeight(),e=Math.min(Math.max(e,0),f),e=a>0?Math.ceil(e):Math.floor(e),u.css({top:e+"px"})),j=parseInt(u.css("top"))/(o.outerHeight()-u.outerHeight()),e=j*(o[0].scrollHeight-o.outerHeight()),c&&(e=a,g=e/o[0].scrollHeight*o.outerHeight(),g=Math.min(Math.max(g,0),f),u.css({top:g+"px"})),o.scrollTop(e),o.trigger("slimscrolling",~~e),A(),B()}function y(){window.addEventListener?(this.addEventListener("DOMMouseScroll",w,!1),this.addEventListener("mousewheel",w,!1)):document.attachEvent("onmousewheel",w)}function z(){i=Math.max(o.outerHeight()/o[0].scrollHeight*o.outerHeight(),m),u.css({height:i+"px"});var a=i==o.outerHeight()?"none":"block";u.css({display:a})}function A(){if(z(),clearTimeout(g),j==~~j){if(n=d.allowPageScroll,k!=j){var a=0==~~j?"top":"bottom";o.trigger("slimscroll",a)}}else n=!1;return k=j,i>=o.outerHeight()?(n=!0,void 0):(u.stop(!0,!0).fadeIn("fast"),d.railVisible&&s.stop(!0,!0).fadeIn("fast"),void 0)}function B(){d.alwaysVisible||(g=setTimeout(function(){d.disableFadeOut&&c||e||f||(u.fadeOut("slow"),s.fadeOut("slow"))},1e3))}var c,e,f,g,h,i,j,k,p,q,r,s,u,v,l="<div></div>",m=30,n=!1,o=a(this);if(o.parent().hasClass(d.wrapperClass)){if(p=o.scrollTop(),u=o.parent().find("."+d.barClass),s=o.parent().find("."+d.railClass),z(),a.isPlainObject(b)){if("height"in b&&"auto"==b.height&&(o.parent().css("height","auto"),o.css("height","auto"),q=o.parent().parent().height(),o.parent().css("height",q),o.css("height",q)),"scrollTo"in b)p=parseInt(d.scrollTo);else if("scrollBy"in b)p+=parseInt(d.scrollBy);else if("destroy"in b)return u.remove(),s.remove(),o.unwrap(),void 0;x(p,!1,!0)}}else d.height="auto"==b.height?o.parent().height():b.height,r=a(l).addClass(d.wrapperClass).css({position:"relative",overflow:"hidden",width:d.width,height:d.height}),o.css({overflow:"hidden",width:d.width,height:d.height}),s=a(l).addClass(d.railClass).css({width:d.size,height:"100%",position:"absolute",top:0,display:d.alwaysVisible&&d.railVisible?"block":"none","border-radius":d.railBorderRadius,background:d.railColor,opacity:d.railOpacity,zIndex:90}),u=a(l).addClass(d.barClass).css({background:d.color,width:d.size,position:"absolute",top:0,opacity:d.opacity,display:d.alwaysVisible?"block":"none","border-radius":d.borderRadius,BorderRadius:d.borderRadius,MozBorderRadius:d.borderRadius,WebkitBorderRadius:d.borderRadius,zIndex:99}),v="right"==d.position?{right:d.distance}:{left:d.distance},s.css(v),u.css(v),o.wrap(r),o.parent().append(u),o.parent().append(s),d.railDraggable&&u.bind("mousedown",function(b){var c=a(document);return f=!0,t=parseFloat(u.css("top")),pageY=b.pageY,c.bind("mousemove.slimscroll",function(a){currTop=t+a.pageY-pageY,u.css("top",currTop),x(0,u.position().top,!1)}),c.bind("mouseup.slimscroll",function(){f=!1,B(),c.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(a){return a.stopPropagation(),a.preventDefault(),!1}),s.hover(function(){A()},function(){B()}),u.hover(function(){e=!0},function(){e=!1}),o.hover(function(){c=!0,A(),B()},function(){c=!1,B()}),o.bind("touchstart",function(a){a.originalEvent.touches.length&&(h=a.originalEvent.touches[0].pageY)}),o.bind("touchmove",function(a){if(n||a.originalEvent.preventDefault(),a.originalEvent.touches.length){var b=(h-a.originalEvent.touches[0].pageY)/d.touchScrollStep;x(b,!0),h=a.originalEvent.touches[0].pageY}}),z(),"bottom"===d.start?(u.css({top:o.outerHeight()-u.outerHeight()}),x(0,!0)):"top"!==d.start&&(x(a(d.start).position().top,null,!0),d.alwaysVisible||u.hide()),y()}),this}}),jQuery.fn.extend({slimscroll:jQuery.fn.slimScroll})}(jQuery);

/*<script src="${ctxStatic}/org/tinygroup/plumb/js/jquery.jsPlumb-1.3.16-all.min.js"></script>*/
jsPlumbUtil={isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},isString:function(a){return"string"==typeof a},isBoolean:function(a){return"boolean"==typeof a},isObject:function(a){return"[object Object]"===Object.prototype.toString.call(a)},isDate:function(a){return"[object Date]"===Object.prototype.toString.call(a)},isFunction:function(a){return"[object Function]"===Object.prototype.toString.call(a)},clone:function(a){var b,c;if(this.isString(a))return new String(a);if(this.isBoolean(a))return new Boolean(a);if(this.isDate(a))return new Date(a.getTime());if(this.isFunction(a))return a;if(this.isArray(a)){for(b=[],c=0;c<a.length;c++)b.push(this.clone(a[c]));return b}if(this.isObject(a)){b={};for(c in a)b[c]=this.clone(a[c]);return b}return a},merge:function(a,b){var d,e,f,c=this.clone(a);for(d in b)if(null==c[d]||this.isString(b[d])||this.isBoolean(b[d]))c[d]=b[d];else if(this.isArray(b[d])&&this.isArray(c[d]))e=[],e.push.apply(e,c[d]),e.push.apply(e,b[d]),c[d]=e;else if(this.isObject(c[d])&&this.isObject(b[d]))for(f in b[d])c[d][f]=b[d][f];return c},convertStyle:function(a,b){var c,d,e,f,g;return"transparent"===a?a:(c=a,d=function(a){return 1==a.length?"0"+a:a},e=function(a){return d(Number(a).toString(16))},f=/(rgb[a]?\()(.*)(\))/,a.match(f)&&(g=a.match(f)[2].split(","),c="#"+e(g[0])+e(g[1])+e(g[2]),b||4!=g.length||(c+=e(g[3]))),c)},gradient:function(a,b){return a=jsPlumbUtil.isArray(a)?a:[a.x,a.y],b=jsPlumbUtil.isArray(b)?b:[b.x,b.y],(b[1]-a[1])/(b[0]-a[0])},normal:function(a,b){return-1/jsPlumbUtil.gradient(a,b)},lineLength:function(a,b){return a=jsPlumbUtil.isArray(a)?a:[a.x,a.y],b=jsPlumbUtil.isArray(b)?b:[b.x,b.y],Math.sqrt(Math.pow(b[1]-a[1],2)+Math.pow(b[0]-a[0],2))},segment:function(a,b){return a=jsPlumbUtil.isArray(a)?a:[a.x,a.y],b=jsPlumbUtil.isArray(b)?b:[b.x,b.y],b[0]>a[0]?b[1]>a[1]?2:1:b[1]>a[1]?3:4},intersects:function(a,b){var c=a.x,d=a.x+a.w,e=a.y,f=a.y+a.h,g=b.x,h=b.x+b.w,i=b.y,j=b.y+b.h;return g>=c&&d>=g&&i>=e&&f>=i||h>=c&&d>=h&&i>=e&&f>=i||g>=c&&d>=g&&j>=e&&f>=j||h>=c&&d>=g&&j>=e&&f>=j||c>=g&&h>=c&&e>=i&&j>=e||d>=g&&h>=d&&e>=i&&j>=e||c>=g&&h>=c&&f>=i&&j>=f||d>=g&&h>=c&&f>=i&&j>=f},segmentMultipliers:[null,[1,-1],[1,1],[-1,1],[-1,-1]],inverseSegmentMultipliers:[null,[-1,-1],[-1,1],[1,1],[1,-1]],pointOnLine:function(a,b,c){var d=jsPlumbUtil.gradient(a,b),e=jsPlumbUtil.segment(a,b),f=c>0?jsPlumbUtil.segmentMultipliers[e]:jsPlumbUtil.inverseSegmentMultipliers[e],g=Math.atan(d),h=Math.abs(c*Math.sin(g))*f[1],i=Math.abs(c*Math.cos(g))*f[0];return{x:a.x+i,y:a.y+h}},perpendicularLineTo:function(a,b,c){var d=jsPlumbUtil.gradient(a,b),e=Math.atan(-1/d),f=c/2*Math.sin(e),g=c/2*Math.cos(e);return[{x:b.x+g,y:b.y+f},{x:b.x-g,y:b.y-f}]},findWithFunction:function(a,b){if(a)for(var c=0;c<a.length;c++)if(b(a[c]))return c;return-1},indexOf:function(a,b){return jsPlumbUtil.findWithFunction(a,function(a){return a==b})},removeWithFunction:function(a,b){var c=jsPlumbUtil.findWithFunction(a,b);return c>-1&&a.splice(c,1),-1!=c},remove:function(a,b){var c=jsPlumbUtil.indexOf(a,b);return c>-1&&a.splice(c,1),-1!=c},addWithFunction:function(a,b,c){-1==jsPlumbUtil.findWithFunction(a,c)&&a.push(b)},addToList:function(a,b,c){var d=a[b];return null==d&&(d=[],a[b]=d),d.push(c),d},EventGenerator:function(){var a={},b=this,c=["ready"];this.bind=function(c,d){return jsPlumbUtil.addToList(a,c,d),b},this.fire=function(d,e,f){if(a[d])for(var g=0;g<a[d].length;g++)if(-1!=jsPlumbUtil.findWithFunction(c,function(a){return a===d}))a[d][g](e,f);else try{a[d][g](e,f)}catch(h){jsPlumbUtil.log("jsPlumb: fire failed for event "+d+" : "+h)}return b},this.unbind=function(c){return c?delete a[c]:a={},b},this.getListener=function(b){return a[b]}},logEnabled:!0,log:function(){if(jsPlumbUtil.logEnabled&&"undefined"!=typeof console)try{arguments[arguments.length-1]}catch(b){}},group:function(a){jsPlumbUtil.logEnabled&&"undefined"!=typeof console&&console.group(a)},groupEnd:function(){jsPlumbUtil.logEnabled&&"undefined"!=typeof console},time:function(a){jsPlumbUtil.logEnabled&&"undefined"!=typeof console&&console.time(a)},timeEnd:function(a){jsPlumbUtil.logEnabled&&"undefined"!=typeof console&&console.timeEnd(a)}},function(){var a=!!document.createElement("canvas").getContext,b=!!window.SVGAngle||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),c=function(){var a,b;return void 0==c.vml&&(a=document.body.appendChild(document.createElement("div")),a.innerHTML='<v:shape id="vml_flag1" adj="1" />',b=a.firstChild,b.style.behavior="url(#default#VML)",c.vml=b?"object"==typeof b.adj:!0,a.parentNode.removeChild(a)),c.vml},d=function(a){var b={},c=[],d={},e={};this.register=function(f){var h,i,j,k,g=jsPlumb.CurrentLibrary;f=g.getElementObject(f),h=a.getId(f),i=g.getDOMElement(f),j=g.getOffset(f),b[h]||(b[h]=f,c.push(f),d[h]={}),k=function(b){var f,i,l,m;if(b)for(f=0;f<b.childNodes.length;f++)3!=b.childNodes[f].nodeType&&(i=g.getElementObject(b.childNodes[f]),l=a.getId(i,null,!0),l&&e[l]&&e[l]>0&&(m=g.getOffset(i),d[h][l]={id:l,offset:{left:m.left-j.left,top:m.top-j.top}}),k(b.childNodes[f]))},k(i)},this.updateOffsets=function(b){var i,j,k,c=jsPlumb.CurrentLibrary,e=c.getElementObject(b),f=a.getId(e),g=d[f],h=c.getOffset(e);if(g)for(i in g)j=c.getElementObject(i),k=c.getOffset(j),d[f][i]={id:i,offset:{left:k.left-h.left,top:k.top-h.top}}},this.endpointAdded=function(c){var l,n,o,p,f=jsPlumb.CurrentLibrary,g=document.body,h=a.getId(c),i=f.getDOMElement(c),j=i.parentNode;for(e[h]=e[h]?e[h]+1:1;j!=g;){if(l=a.getId(j,null,!0),l&&b[l]){n=f.getElementObject(j),o=f.getOffset(n),null==d[l][h]&&(p=jsPlumb.CurrentLibrary.getOffset(c),d[l][h]={id:h,offset:{left:p.left-o.left,top:p.top-o.top}});break}j=j.parentNode}},this.endpointDeleted=function(a){if(e[a.elementId]&&(e[a.elementId]--,e[a.elementId]<=0))for(var b in d)delete d[b][a.elementId]},this.getElementsForDraggable=function(a){return d[a]},this.reset=function(){b={},c=[],d={},e={}}};window.console||(window.console={time:function(){},timeEnd:function(){},group:function(){},groupEnd:function(){},log:function(){}}),window.jsPlumbAdapter={headless:!1,appendToRoot:function(a){document.body.appendChild(a)},getRenderModes:function(){return["canvas","svg","vml"]},isRenderModeAvailable:function(d){return{canvas:a,svg:b,vml:c()}[d]},getDragManager:function(a){return new d(a)},setRenderMode:function(a){var b,c,d,e;return a&&(a=a.toLowerCase(),c=this.isRenderModeAvailable("canvas"),d=this.isRenderModeAvailable("svg"),e=this.isRenderModeAvailable("vml"),"svg"===a?d?b="svg":c?b="canvas":e&&(b="vml"):"canvas"===a&&c?b="canvas":e&&(b="vml")),b}}}(),function(){var F,a=jsPlumbUtil.findWithFunction,b=jsPlumbUtil.indexOf,c=jsPlumbUtil.removeWithFunction,e=(jsPlumbUtil.remove,jsPlumbUtil.addWithFunction),g=(jsPlumbUtil.addToList,jsPlumbUtil.isArray),h=jsPlumbUtil.isString,i=jsPlumbUtil.isObject,j=null,k=function(a,b){return E.CurrentLibrary.getAttribute(p(a),b)},l=function(a,b,c){E.CurrentLibrary.setAttribute(p(a),b,c)},m=function(a,b){E.CurrentLibrary.addClass(p(a),b)},o=function(a,b){E.CurrentLibrary.removeClass(p(a),b)},p=function(a){return E.CurrentLibrary.getElementObject(a)},q=function(a,b){var d,c=E.CurrentLibrary.getOffset(p(a));return null!=b?(d=b.getZoom(),{left:c.left/d,top:c.top/d}):c},r=function(a){return E.CurrentLibrary.getSize(p(a))},s=jsPlumbUtil.log,x=(jsPlumbUtil.group,jsPlumbUtil.groupEnd,jsPlumbUtil.time,jsPlumbUtil.timeEnd,function(){return""+(new Date).getTime()}),y=function(a){var j,k,l,m,n,o,p,q,r,t,u,v,w,b=this,c=arguments,d=!1,e=a.parameters||{},f=b.idPrefix,g=f+(new Date).getTime(),h=null,i=null;b._jsPlumb=a._jsPlumb,b.getId=function(){return g},b.tooltip=a.tooltip,b.hoverClass=a.hoverClass||b._jsPlumb.Defaults.HoverClass||E.Defaults.HoverClass,jsPlumbUtil.EventGenerator.apply(this),this.clone=function(){var a=new Object;return b.constructor.apply(a,c),a},this.getParameter=function(a){return e[a]},this.getParameters=function(){return e},this.setParameter=function(a,b){e[a]=b},this.setParameters=function(a){e=a},this.overlayPlacements=[],j=a.beforeDetach,this.isDetachAllowed=function(a){var c=b._jsPlumb.checkCondition("beforeDetach",a);if(j)try{c=j(a)}catch(d){s("jsPlumb: beforeDetach callback failed",d)}return c},k=a.beforeDrop,this.isDropAllowed=function(a,c,d,e,f){var g=b._jsPlumb.checkCondition("beforeDrop",{sourceId:a,targetId:c,scope:d,connection:e,dropEndpoint:f});if(k)try{g=k({sourceId:a,targetId:c,scope:d,connection:e,dropEndpoint:f})}catch(h){s("jsPlumb: beforeDrop callback failed",h)}return g},l=function(){if(h&&i){var a={};E.extend(a,h),E.extend(a,i),delete b.hoverPaintStyle,a.gradient&&h.fillStyle&&delete a.gradient,i=a}},this.setPaintStyle=function(a,c){h=a,b.paintStyleInUse=h,l(),c||b.repaint()},this.getPaintStyle=function(){return h},this.setHoverPaintStyle=function(a,c){i=a,l(),c||b.repaint()},this.getHoverPaintStyle=function(){return i},this.setHover=function(a,c,e){b._jsPlumb.currentlyDragging||b._jsPlumb.isHoverSuspended()||(d=a,null!=b.hoverClass&&null!=b.canvas&&(a?n.addClass(b.canvas,b.hoverClass):n.removeClass(b.canvas,b.hoverClass)),null!=i&&(b.paintStyleInUse=a?i:h,e=e||x(),b.repaint({timestamp:e,recalc:!1})),b.getAttachedElements&&!c&&t(a,x(),b))},this.isHover=function(){return d},m=null,this.setZIndex=function(a){m=a},this.getZIndex=function(){return m},n=E.CurrentLibrary,o=["click","dblclick","mouseenter","mouseout","mousemove","mousedown","mouseup","contextmenu"],p={mouseout:"mouseexit"},q=function(a,b,c){var d=p[c]||c;n.bind(a,c,function(a){b.fire(d,b,a)})},r=function(a,b){p[b]||b,n.unbind(a,b)},this.attachListeners=function(a,b){for(var c=0;c<o.length;c++)q(a,b,o[c])},t=function(a,c,d){var f,e=b.getAttachedElements();if(e)for(f=0;f<e.length;f++)d&&d==e[f]||e[f].setHover(a,!0,c)},this.reattachListenersForElement=function(a){var c;if(arguments.length>1){for(c=0;c<o.length;c++)r(a,o[c]);for(c=1;c<arguments.length;c++)b.attachListeners(a,arguments[c])}},u=[],v=function(a){return null==a?null:a.split(" ")},w=function(a){var c,d,e;if(b.getDefaultType){for(c=b.getTypeDescriptor(),d=jsPlumbUtil.merge({},b.getDefaultType()),e=0;e<u.length;e++)d=jsPlumbUtil.merge(d,b._jsPlumb.getType(u[e],c));b.applyType(d),a||b.repaint()}},b.setType=function(a,b){u=v(a)||[],w(b)},b.getType=function(){return u},b.hasType=function(a){return-1!=jsPlumbUtil.indexOf(u,a)},b.addType=function(a,c){var f,d=v(a),e=!1;if(null!=d){for(f=0;f<d.length;f++)b.hasType(d[f])||(u.push(d[f]),e=!0);e&&w(c)}},b.removeType=function(a,b){var f,c=v(a),d=!1,e=function(a){var b=jsPlumbUtil.indexOf(u,a);return-1!=b?(u.splice(b,1),!0):!1};if(null!=c){for(f=0;f<c.length;f++)d=e(c[f])||d;d&&w(b)}},b.toggleType=function(a,b){var d,e,c=v(a);if(null!=c){for(d=0;d<c.length;d++)e=jsPlumbUtil.indexOf(u,c[d]),-1!=e?u.splice(e,1):u.push(c[d]);w(b)}},this.applyType=function(a){if(b.setPaintStyle(a.paintStyle),b.setHoverPaintStyle(a.hoverPaintStyle),a.parameters)for(var c in a.parameters)b.setParameter(c,a.parameters[c])}},z=function(a){var b,c,d,e,f,h,i,j,k,l,m;if(y.apply(this,arguments),b=this,this.overlays=[],c=function(a){var d,e,f,c=null;if(g(a)){if(d=a[0],e=E.extend({component:b,_jsPlumb:b._jsPlumb},a[1]),3==a.length&&E.extend(e,a[2]),c=new(E.Overlays[b._jsPlumb.getRenderMode()][d])(e),e.events)for(f in e.events)c.bind(f,e.events[f])}else c=a.constructor==String?new(E.Overlays[b._jsPlumb.getRenderMode()][a])({component:b,_jsPlumb:b._jsPlumb}):a;b.overlays.push(c)},d=function(a){var f,c=b.defaultOverlayKeys||[],d=a.overlays,e=function(a){return b._jsPlumb.Defaults[a]||E.Defaults[a]||[]};for(d||(d=[]),f=0;f<c.length;f++)d.unshift.apply(d,e(c[f]));return d},e=d(a))for(f=0;f<e.length;f++)c(e[f]);h=function(a){var d,c=-1;for(d=0;d<b.overlays.length;d++)if(a===b.overlays[d].id){c=d;break}return c},this.addOverlay=function(a,d){c(a),d||b.repaint()},this.getOverlay=function(a){var c=h(a);return c>=0?b.overlays[c]:null},this.getOverlays=function(){return b.overlays},this.hideOverlay=function(a){var c=b.getOverlay(a);c&&c.hide()},this.hideOverlays=function(){for(var a=0;a<b.overlays.length;a++)b.overlays[a].hide()},this.showOverlay=function(a){var c=b.getOverlay(a);c&&c.show()},this.showOverlays=function(){for(var a=0;a<b.overlays.length;a++)b.overlays[a].show()},this.removeAllOverlays=function(){for(var a=0;a<b.overlays.length;a++)b.overlays[a].cleanup&&b.overlays[a].cleanup();b.overlays.splice(0,b.overlays.length),b.repaint()},this.removeOverlay=function(a){var d,c=h(a);-1!=c&&(d=b.overlays[c],d.cleanup&&d.cleanup(),b.overlays.splice(c,1))},this.removeOverlays=function(){for(var a=0;a<arguments.length;a++)b.removeOverlay(arguments[a])},i="__label",j=function(a){var c={cssClass:a.cssClass,labelStyle:this.labelStyle,id:i,component:b,_jsPlumb:b._jsPlumb},d=E.extend(c,a);return new(E.Overlays[b._jsPlumb.getRenderMode()].Label)(d)},a.label&&(k=a.labelLocation||b.defaultLabelLocation||.5,l=a.labelStyle||b._jsPlumb.Defaults.LabelStyle||E.Defaults.LabelStyle,this.overlays.push(j({label:a.label,location:k,labelStyle:l}))),this.setLabel=function(a){var d,c=b.getOverlay(i);c?a.constructor==String||a.constructor==Function?c.setLabel(a):(a.label&&c.setLabel(a.label),a.location&&c.setLocation(a.location)):(d=a.constructor==String||a.constructor==Function?{label:a}:a,c=j(d),this.overlays.push(c)),b._jsPlumb.isSuspendDrawing()||b.repaint()},this.getLabel=function(){var a=b.getOverlay(i);return null!=a?a.getLabel():null},this.getLabelOverlay=function(){return b.getOverlay(i)},m=this.applyType,this.applyType=function(a){if(m(a),b.removeAllOverlays(),a.overlays)for(var c=0;c<a.overlays.length;c++)b.addOverlay(a.overlays[c],!0)}},A=function(a,b,c){a.bind("click",function(a,c){b.fire("click",b,c)}),a.bind("dblclick",function(a,c){b.fire("dblclick",b,c)}),a.bind("contextmenu",function(a,c){b.fire("contextmenu",b,c)}),a.bind("mouseenter",function(a,d){b.isHover()||(c(!0),b.fire("mouseenter",b,d))}),a.bind("mouseexit",function(a,d){b.isHover()&&(c(!1),b.fire("mouseexit",b,d))})},B=0,C=function(){var a=B+1;return B++,a},D=function(d){var f,n,t,u,v,w,B,D,F,H,I,J,K,L,M,N,O,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb,yb,zb,Ab,Bb,Cb,Db,Eb,Fb,Gb,Hb,Ib,Jb,Kb,Lb,Mb,Nb,Ob,Pb,Qb,Rb,Sb,Tb,Ub,Vb,Wb,Xb,Yb,Zb,$b,_b,ac,bc,cc,dc,ec,fc,gc,hc,ic,jc,kc,lc,mc,nc,oc,pc,qc,rc,sc;this.Defaults={Anchor:"BottomCenter",Anchors:[null,null],ConnectionsDetachable:!0,ConnectionOverlays:[],Connector:"Bezier",ConnectorZIndex:null,Container:null,DragOptions:{},DropOptions:{},Endpoint:"Dot",EndpointOverlays:[],Endpoints:[null,null],EndpointStyle:{fillStyle:"#456"},EndpointStyles:[null,null],EndpointHoverStyle:null,EndpointHoverStyles:[null,null],HoverPaintStyle:null,LabelStyle:{color:"black"},LogEnabled:!1,Overlays:[],MaxConnections:1,PaintStyle:{lineWidth:8,strokeStyle:"#456"},ReattachConnections:!1,RenderMode:"svg",Scope:"jsPlumb_DefaultScope"},d&&E.extend(this.Defaults,d),this.logEnabled=this.Defaults.LogEnabled,f={},n={},this.registerConnectionType=function(a,b){f[a]=E.extend({},b)},this.registerConnectionTypes=function(a){for(var b in a)f[b]=E.extend({},a[b])},this.registerEndpointType=function(a,b){n[a]=E.extend({},b)},this.registerEndpointTypes=function(a){for(var b in a)n[b]=E.extend({},a[b])},this.getType=function(a,b){return"connection"===b?f[a]:n[a]},jsPlumbUtil.EventGenerator.apply(this),t=this,u=C(),v=t.bind,w={},B=1,this.setZoom=function(a,b){B=a,b&&t.repaintEverything()},this.getZoom=function(){return B};for(D in this.Defaults)w[D]=this.Defaults[D];this.bind=function(a,b){"ready"===a&&H?b():v.apply(t,[a,b])},t.importDefaults=function(a){for(var b in a)t.Defaults[b]=a[b]},t.restoreDefaults=function(){t.Defaults=E.extend({},w)},F=null,H=!1,I={},J={},K={},L={},M={},N={},O={},Q=[],R=this.Defaults.Scope,S=null,T=function(a,b,c){var d=a[b];return null==d&&(d=[],a[b]=d),d.push(c),d},U=function(a,b){t.Defaults.Container?E.CurrentLibrary.appendElement(a,t.Defaults.Container):b?E.CurrentLibrary.appendElement(a,b):jsPlumbAdapter.appendToRoot(a)},V=1,W=function(){return""+V++},X=function(a){return a._nodes?a._nodes:a},Y=function(a,b,c){var d,e,f;if(!jsPlumbAdapter.headless&&!Xb&&(d=k(a,"id"),e=t.dragManager.getElementsForDraggable(d),null==c&&(c=x()),t.anchorManager.redraw(d,b,c),e))for(f in e)t.anchorManager.redraw(e[f].id,b,c,e[f].offset)},Z=function(a,b){var d,e,f,c=null;if(g(a))for(c=[],d=0;d<a.length;d++)e=p(a[d]),f=k(e,"id"),c.push(b(e,f));else e=p(a),f=k(e,"id"),c=b(e,f);return c},$=function(a){return K[a]},_=function(a,b,c){var d,e,f,g,h,i,j;jsPlumbAdapter.headless||(d=null==b?!1:b,e=E.CurrentLibrary,d&&e.isDragSupported(a)&&!e.isAlreadyDraggable(a)&&(f=c||t.Defaults.DragOptions||E.Defaults.DragOptions,f=E.extend({},f),g=e.dragEvents.drag,h=e.dragEvents.stop,i=e.dragEvents.start,f[i]=rb(f[i],function(){t.setHoverSuspended(!0)}),f[g]=rb(f[g],function(){var b=e.getUIPosition(arguments,t.getZoom());Y(a,b),m(a,"jsPlumb_dragged")}),f[h]=rb(f[h],function(){var b=e.getUIPosition(arguments,t.getZoom());Y(a,b),o(a,"jsPlumb_dragged"),t.setHoverSuspended(!1)}),j=qb(a),O[j]=!0,d=O[j],f.disabled=null==d?!1:!d,e.initDraggable(a,f,!1),t.dragManager.register(a)))},ab=function(a,b){var d,e,f,g,h,c=E.extend({sourceIsNew:!0,targetIsNew:!0},a);if(b&&E.extend(c,b),c.source&&c.source.endpoint&&(c.sourceEndpoint=c.source),c.source&&c.target.endpoint&&(c.targetEndpoint=c.target),a.uuids&&(c.sourceEndpoint=$(a.uuids[0]),c.targetEndpoint=$(a.uuids[1])),c.sourceEndpoint&&c.sourceEndpoint.isFull())return s(t,"could not add connection; source endpoint is full"),void 0;if(c.targetEndpoint&&c.targetEndpoint.isFull())return s(t,"could not add connection; target endpoint is full"),void 0;if(c.sourceEndpoint&&(c.sourceIsNew=!1),c.targetEndpoint&&(c.targetIsNew=!1),!c.type&&c.sourceEndpoint&&(c.type=c.sourceEndpoint.connectionType),c.sourceEndpoint&&c.sourceEndpoint.connectorOverlays)for(c.overlays=c.overlays||[],d=0;d<c.sourceEndpoint.connectorOverlays.length;d++)c.overlays.push(c.sourceEndpoint.connectorOverlays[d]);if(c.tooltip=a.tooltip,!c.tooltip&&c.sourceEndpoint&&c.sourceEndpoint.connectorTooltip&&(c.tooltip=c.sourceEndpoint.connectorTooltip),c.target&&!c.target.endpoint&&!c.targetEndpoint&&!c.newConnection&&(e=qb(c.target),f=Ib[e],g=Jb[e],f)){if(!Tb[e])return;h=null!=g?g:t.addEndpoint(c.target,f),Kb[e]&&(Jb[e]=h),c.targetEndpoint=h,h._makeTargetCreator=!0,c.targetIsNew=!0}if(c.source&&!c.source.endpoint&&!c.sourceEndpoint&&!c.newConnection&&(e=qb(c.source),f=Nb[e],g=Ob[e],f)){if(!Qb[e])return;h=null!=g?g:t.addEndpoint(c.source,f),Pb[e]&&(Ob[e]=h),c.sourceEndpoint=h,c.sourceIsNew=!0}return c},bb=function(a){var e,b=t.Defaults.ConnectionType||t.getDefaultConnectionType(),c=t.Defaults.EndpointType||sc,d=E.CurrentLibrary.getParent;return a.parent=a.container?a.container:a.sourceEndpoint?a.sourceEndpoint.parent:a.source.constructor==c?a.source.parent:d(a.source),a._jsPlumb=t,e=new b(a),e.id="con_"+W(),db("click","click",e),db("dblclick","dblclick",e),db("contextmenu","contextmenu",e),e},cb=function(a,b,c){if(b=b||{},a.suspendedEndpoint||T(I,a.scope,a),!b.doNotFireConnectionEvent&&b.fireEvent!==!1){var d={connection:a,source:a.source,target:a.target,sourceId:a.sourceId,targetId:a.targetId,sourceEndpoint:a.endpoints[0],targetEndpoint:a.endpoints[1]};t.fire("jsPlumbConnection",d,c),t.fire("connection",d,c)}t.anchorManager.newConnection(a),Y(a.source)},db=function(a,b,c){c.bind(a,function(a,d){t.fire(b,c,d)})},eb=function(a){if(a.container)return a.container;var b=E.CurrentLibrary.getTagName(a.source),c=E.CurrentLibrary.getParent(a.source);return b&&"td"===b.toLowerCase()?E.CurrentLibrary.getParent(c):c},fb=function(a){var c,b=t.Defaults.EndpointType||sc;return a.parent=eb(a),a._jsPlumb=t,c=new b(a),c.id="ep_"+W(),db("click","endpointClick",c),db("dblclick","endpointDblClick",c),db("contextmenu","contextmenu",c),jsPlumbAdapter.headless||t.dragManager.endpointAdded(a.source),c},gb=function(a,b,c){var e,f,g,d=J[a];if(d&&d.length)for(e=0;e<d.length;e++){for(f=0;f<d[e].connections.length;f++)if(g=b(d[e].connections[f]))return;c&&c(d[e])}},ib=function(a){null!=a&&null!=a.parentNode&&a.parentNode.removeChild(a)},jb=function(a,b){for(var c=0;c<a.length;c++)ib(a[c],b)},kb=function(a,b){return Z(a,function(a,c){O[c]=b,E.CurrentLibrary.isDragSupported(a)&&E.CurrentLibrary.setDraggable(a,b)})},lb=function(a,b,c){var d,e;b="block"===b,d=null,c&&(d=b?function(a){a.setVisible(!0,!0,!0)}:function(a){a.setVisible(!1,!0,!0)}),e=k(a,"id"),gb(e,function(a){if(b&&c){var d=a.sourceId===e?1:0;a.endpoints[d].isVisible()&&a.setVisible(!0)}else a.setVisible(b)},d)},mb=function(a){return Z(a,function(a,b){var c=null==O[b]?!1:O[b];return c=!c,O[b]=c,E.CurrentLibrary.setDraggable(a,c),c})},nb=function(a,b){var c=null;b&&(c=function(a){var b=a.isVisible();a.setVisible(!b)}),gb(a,function(a){var b=a.isVisible();a.setVisible(!b)},c)},ob=function(a){var f,b=a.timestamp,c=a.recalc,d=a.offset,e=a.elId;return Xb&&!b&&(b=Yb),!c&&b&&b===M[e]?L[e]:(c||!d?(f=p(e),null!=f&&(Q[e]=r(f),L[e]=q(f,t),M[e]=b)):(L[e]=d,null==Q[e]&&(f=p(e),null!=f&&(Q[e]=r(f)))),L[e]&&!L[e].right&&(L[e].right=L[e].left+Q[e][0],L[e].bottom=L[e].top+Q[e][1],L[e].width=Q[e][0],L[e].height=Q[e][1],L[e].centerx=L[e].left+L[e].width/2,L[e].centery=L[e].top+L[e].height/2),L[e])},pb=function(a){var b=L[a];return b||(b=ob({elId:a})),{o:b,s:Q[a]}},qb=function(a,b,c){var d=p(a),e=k(d,"id");return e&&"undefined"!=e||(2==arguments.length&&void 0!=arguments[1]?e=b:(1==arguments.length||3==arguments.length&&!arguments[2])&&(e="jsPlumb_"+u+"_"+W()),c||l(d,"id",e)),e},rb=function(a,b,c){return a=a||function(){},b=b||function(){},function(){var d=null;try{d=b.apply(this,arguments)}catch(e){s(t,"jsPlumb function failed : "+e)}if(null==c||d!==c)try{a.apply(this,arguments)}catch(e){s(t,"wrapped function failed : "+e)}return d}},this.connectorClass="_jsPlumb_connector",this.endpointClass="_jsPlumb_endpoint",this.overlayClass="_jsPlumb_overlay",this.Anchors={},this.Connectors={canvas:{},svg:{},vml:{}},this.Endpoints={canvas:{},svg:{},vml:{}},this.Overlays={canvas:{},svg:{},vml:{}},this.addClass=function(a,b){return E.CurrentLibrary.addClass(a,b)},this.removeClass=function(a,b){return E.CurrentLibrary.removeClass(a,b)},this.hasClass=function(a,b){return E.CurrentLibrary.hasClass(a,b)},this.addEndpoint=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n;for(c=c||{},d=E.extend({},c),E.extend(d,b),d.endpoint=d.endpoint||t.Defaults.Endpoint||E.Defaults.Endpoint,d.paintStyle=d.paintStyle||t.Defaults.EndpointStyle||E.Defaults.EndpointStyle,a=X(a),e=[],f=a.length&&a.constructor!=String?a:[a],g=0;g<f.length;g++)h=p(f[g]),i=qb(h),d.source=h,ob({elId:i,timestamp:Yb}),j=fb(d),d.parentAnchor&&(j.parentAnchor=d.parentAnchor),T(J,i,j),k=L[i],l=Q[i],m=j.anchor.compute({xy:[k.left,k.top],wh:l,element:j,timestamp:Yb}),n={anchorLoc:m,timestamp:Yb},Xb&&(n.recalc=!1),j.paint(n),e.push(j);return 1==e.length?e[0]:e},this.addEndpoints=function(a,b,c){var e,f,d=[];for(e=0;e<b.length;e++)f=t.addEndpoint(a,b[e],c),g(f)?Array.prototype.push.apply(d,f):d.push(f);return d},this.animate=function(a,b,c){var f,g,d=p(a),e=k(a,"id");c=c||{},f=E.CurrentLibrary.dragEvents.step,g=E.CurrentLibrary.dragEvents.complete,c[f]=rb(c[f],function(){t.repaint(e)}),c[g]=rb(c[g],function(){t.repaint(e)}),E.CurrentLibrary.animate(d,b,c)},this.checkCondition=function(a,b){var e,c=t.getListener(a),d=!0;if(c&&c.length>0)try{for(e=0;e<c.length;e++)d=d&&c[e](b)}catch(f){s(t,"cannot check condition ["+a+"]"+f)}return d},this.checkASyncCondition=function(a,b,c,d){var e=t.getListener(a);if(e&&e.length>0)try{e[0](b,c,d)}catch(f){s(t,"cannot asynchronously check condition ["+a+"]"+f)}},this.connect=function(a,b){var d,c=ab(a,b);return c&&(null==c.deleteEndpointsOnDetach&&(c.deleteEndpointsOnDetach=!0),d=bb(c),cb(d,c)),d},this.deleteEndpoint=function(a){var c,d,e,f,g,b="string"==typeof a?K[a]:a;if(b){c=b.getUuid(),c&&(K[c]=null),b.detachAll(),b.endpoint.cleanup&&b.endpoint.cleanup(),jb(b.endpoint.getDisplayElements()),t.anchorManager.deleteEndpoint(b);for(d in J)if(e=J[d]){for(f=[],g=0;g<e.length;g++)e[g]!=b&&f.push(e[g]);J[d]=f}jsPlumbAdapter.headless||t.dragManager.endpointDeleted(b)}},this.deleteEveryEndpoint=function(){var a,b,c;t.setSuspendDrawing(!0);for(a in J)if(b=J[a],b&&b.length)for(c=0;c<b.length;c++)t.deleteEndpoint(b[c]);J={},K={},t.setSuspendDrawing(!1,!0)},sb=function(a,b,c){var d=t.Defaults.ConnectionType||t.getDefaultConnectionType(),e=a.constructor==d,f=e?{connection:a,source:a.source,target:a.target,sourceId:a.sourceId,targetId:a.targetId,sourceEndpoint:a.endpoints[0],targetEndpoint:a.endpoints[1]}:a;b&&(t.fire("jsPlumbConnectionDetached",f,c),t.fire("connectionDetached",f,c)),t.anchorManager.connectionDetached(f)},tb=function(a){t.fire("connectionDrag",a)},ub=function(a){t.fire("connectionDragStop",a)},this.detach=function(){var a,b,c,d,e,f,g,h,i;0!=arguments.length&&(a=t.Defaults.ConnectionType||t.getDefaultConnectionType(),b=arguments[0].constructor==a,c=2==arguments.length?b?arguments[1]||{}:arguments[0]:arguments[0],d=c.fireEvent!==!1,e=c.forceDetach,f=b?arguments[0]:c.connection,f?(e||f.isDetachAllowed(f)&&f.endpoints[0].isDetachAllowed(f)&&f.endpoints[1].isDetachAllowed(f))&&(e||t.checkCondition("beforeDetach",f))&&f.endpoints[0].detach(f,!1,!0,d):(g=E.extend({},c),g.uuids?$(g.uuids[0]).detachFrom($(g.uuids[1]),d):g.sourceEndpoint&&g.targetEndpoint?g.sourceEndpoint.detachFrom(g.targetEndpoint):(h=qb(g.source),i=qb(g.target),gb(h,function(a){(a.sourceId==h&&a.targetId==i||a.targetId==h&&a.sourceId==i)&&t.checkCondition("beforeDetach",a)&&a.endpoints[0].detach(a,!1,!0,d)}))))},this.detachAllConnections=function(a,b){var c,d,e;if(b=b||{},a=p(a),c=k(a,"id"),d=J[c],d&&d.length)for(e=0;e<d.length;e++)d[e].detachAll(b.fireEvent)},this.detachEveryConnection=function(a){var b,c,d;a=a||{};for(b in J)if(c=J[b],c&&c.length)for(d=0;d<c.length;d++)c[d].detachAll(a.fireEvent);I={}},this.draggable=function(a,b){var c,d;if("object"==typeof a&&a.length)for(c=0;c<a.length;c++)d=p(a[c]),d&&_(d,!0,b);else if(a._nodes)for(c=0;c<a._nodes.length;c++)d=p(a._nodes[c]),d&&_(d,!0,b);else d=p(a),d&&_(d,!0,b)},this.extend=function(a,b){return E.CurrentLibrary.extend(a,b)},this.getDefaultEndpointType=function(){return sc},this.getDefaultConnectionType=function(){return oc},vb=function(a,b,c,d){for(var e=0;e<a.length;e++)a[e][b].apply(a[e],c);return d(a)},wb=function(a,b,c){var e,d=[];for(e=0;e<a.length;e++)d.push([a[e][b].apply(a[e],c),a[e]]);return d},xb=function(a,b,c){return function(){return vb(a,b,arguments,c)}},yb=function(a,b){return function(){return wb(a,b,arguments)}},zb=function(a,b){var d,c=[];if(a)if("string"==typeof a){if("*"===a)return a;c.push(a)}else if(b)c=a;else for(d=0;d<a.length;d++)c.push(qb(p(a[d])));return c},Ab=function(a,c,d){return"*"===a?!0:a.length>0?-1!=b(a,c):!d},this.getConnections=function(a,b){var c,d,e,f,g,h,i,j,k;a?a.constructor==String&&(a={scope:a}):a={},c=a.scope||t.getDefaultScope(),d=zb(c,!0),e=zb(a.source),f=zb(a.target),g=!b&&d.length>1?{}:[],h=function(a,c){if(!b&&d.length>1){var e=g[a];null==e&&(e=[],g[a]=e),e.push(c)}else g.push(c)};for(i in I)if(Ab(d,i))for(j=0;j<I[i].length;j++)k=I[i][j],Ab(e,k.sourceId)&&Ab(f,k.targetId)&&h(i,k);return g},Bb=function(a,b){return function(c){for(var d=0;d<a.length;d++)c(a[d]);return b(a)}},Cb=function(a){return function(b){return a[b]}},Db=function(a,b){return{setHover:xb(a,"setHover",b),removeAllOverlays:xb(a,"removeAllOverlays",b),setLabel:xb(a,"setLabel",b),addOverlay:xb(a,"addOverlay",b),removeOverlay:xb(a,"removeOverlay",b),removeOverlays:xb(a,"removeOverlays",b),showOverlay:xb(a,"showOverlay",b),hideOverlay:xb(a,"hideOverlay",b),showOverlays:xb(a,"showOverlays",b),hideOverlays:xb(a,"hideOverlays",b),setPaintStyle:xb(a,"setPaintStyle",b),setHoverPaintStyle:xb(a,"setHoverPaintStyle",b),setParameter:xb(a,"setParameter",b),setParameters:xb(a,"setParameters",b),setVisible:xb(a,"setVisible",b),setZIndex:xb(a,"setZIndex",b),repaint:xb(a,"repaint",b),addType:xb(a,"addType",b),toggleType:xb(a,"toggleType",b),removeType:xb(a,"removeType",b),getLabel:yb(a,"getLabel"),getOverlay:yb(a,"getOverlay"),isHover:yb(a,"isHover"),getParameter:yb(a,"getParameter"),getParameters:yb(a,"getParameters"),getPaintStyle:yb(a,"getPaintStyle"),getHoverPaintStyle:yb(a,"getHoverPaintStyle"),isVisible:yb(a,"isVisible"),getZIndex:yb(a,"getZIndex"),hasType:yb(a,"hasType"),getType:yb(a,"getType"),length:a.length,each:Bb(a,b),get:Cb(a)}},Eb=function(a){var b=Db(a,Eb);return E.CurrentLibrary.extend(b,{setDetachable:xb(a,"setDetachable",Eb),setReattach:xb(a,"setReattach",Eb),setConnector:xb(a,"setConnector",Eb),detach:function(){for(var b=0;b<a.length;b++)t.detach(a[b])},isDetachable:yb(a,"isDetachable"),isReattach:yb(a,"isReattach")})},Fb=function(a){var b=Db(a,Fb);return E.CurrentLibrary.extend(b,{setEnabled:xb(a,"setEnabled",Fb),isEnabled:yb(a,"isEnabled"),detachAll:function(){for(var b=0;b<a.length;b++)a[b].detachAll()},"delete":function(){for(var b=0;b<a.length;b++)t.deleteEndpoint(a[b])}})},this.select=function(a){a=a||{},a.scope=a.scope||"*";var b=t.getConnections(a,!0);return Eb(b)},this.selectEndpoints=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;a=a||{},a.scope=a.scope||"*",b=!a.element&&!a.source&&!a.target,c=b?"*":zb(a.element),d=b?"*":zb(a.source),e=b?"*":zb(a.target),f=zb(a.scope,!0),g=[];for(h in J)if(i=Ab(c,h,!0),j=Ab(d,h,!0),k="*"!=d,l=Ab(e,h,!0),m="*"!=e,i||j||l)a:for(n=0;n<J[h].length;n++)if(o=J[h][n],Ab(f,o.scope,!0)){if(p=k&&d.length>0&&!o.isSource,q=m&&e.length>0&&!o.isTarget,p||q)continue a;g.push(o)}return Fb(g)},this.getAllConnections=function(){return I},this.getDefaultScope=function(){return R},this.getEndpoint=$,this.getEndpoints=function(a){return J[qb(a)]},this.getId=qb,this.getOffset=function(a){return L[a],ob({elId:a})},this.getSelector=function(a){return E.CurrentLibrary.getSelector(a)},this.getSize=function(a){var b=Q[a];return b||ob({elId:a}),Q[a]},this.appendElement=U,Gb=!1,this.isHoverSuspended=function(){return Gb},this.setHoverSuspended=function(a){Gb=a},Hb=function(a){return function(){return jsPlumbAdapter.isRenderModeAvailable(a)}},this.isCanvasAvailable=Hb("canvas"),this.isSVGAvailable=Hb("svg"),this.isVMLAvailable=Hb("vml"),this.hide=function(a,b){lb(a,"none",b)},this.idstamp=W,this.init=function(){if(!H){t.setRenderMode(t.Defaults.RenderMode);var a=function(a){E.CurrentLibrary.bind(document,a,function(b){var c,d,e,f,g,h;if(!t.currentlyDragging&&S==E.CANVAS){for(c in I)for(d=I[c],e=0;e<d.length;e++)if(f=d[e].connector[a](b))return;for(g in J)for(h=J[g],e=0;e<h.length;e++)if(h[e].endpoint[a](b))return}})};a("click"),a("dblclick"),a("mousemove"),a("mousedown"),a("mouseup"),a("contextmenu"),H=!0,t.fire("ready")}},this.log=F,this.jsPlumbUIComponent=y,this.makeAnchor=function(){var a,b,d,e,f;return 0==arguments.length?null:(a=arguments[0],b=arguments[1],arguments[2],d=null,a.compute&&a.getOrientation?a:("string"==typeof a?d=E.Anchors[arguments[0]]({elementId:b,jsPlumbInstance:t}):g(a)&&(g(a[0])||h(a[0])?2==a.length&&h(a[0])&&i(a[1])?(e=E.extend({elementId:b,jsPlumbInstance:t},a[1]),d=E.Anchors[a[0]](e)):d=new ac(a,null,b):(f={x:a[0],y:a[1],orientation:a.length>=4?[a[2],a[3]]:[0,0],offsets:6==a.length?[a[4],a[5]]:[0,0],elementId:b},d=new $b(f),d.clone=function(){return new $b(f)})),d.id||(d.id="anchor_"+W()),d))},this.makeAnchors=function(a,b,c){var e,d=[];for(e=0;e<a.length;e++)"string"==typeof a[e]?d.push(E.Anchors[a[e]]({elementId:b,jsPlumbInstance:c})):g(a[e])&&d.push(t.makeAnchor(a[e],b,c));return d},this.makeDynamicAnchor=function(a,b){return new ac(a,b)},Ib={},Jb={},Kb={},Lb={},Mb=function(a,b){a.paintStyle=a.paintStyle||t.Defaults.EndpointStyles[b]||t.Defaults.EndpointStyle||E.Defaults.EndpointStyles[b]||E.Defaults.EndpointStyle,a.hoverPaintStyle=a.hoverPaintStyle||t.Defaults.EndpointHoverStyles[b]||t.Defaults.EndpointHoverStyle||E.Defaults.EndpointHoverStyles[b]||E.Defaults.EndpointHoverStyle,a.anchor=a.anchor||t.Defaults.Anchors[b]||t.Defaults.Anchor||E.Defaults.Anchors[b]||E.Defaults.Anchor,a.endpoint=a.endpoint||t.Defaults.Endpoints[b]||t.Defaults.Endpoint||E.Defaults.Endpoints[b]||E.Defaults.Endpoint
},this.makeTarget=function(a,b,c){var e,f,g,h,i,j,l,d=E.extend({_jsPlumb:t},c);for(E.extend(d,b),Mb(d,1),e=E.CurrentLibrary,f=d.scope||t.Defaults.Scope,g=!(d.deleteEndpointsOnDetach===!1),h=d.maxConnections||-1,i=d.onMaxConnections,_doOne=function(a){var c,j,l,b=qb(a);Ib[b]=d,Kb[b]=d.uniqueEndpoint,Lb[b]=h,Tb[b]=!0,proxyComponent=new y(d),c=E.extend({},d.dropOptions||{}),j=function(){var h,j,l,m,n,s,u,v,w,x,y,z,c=E.CurrentLibrary.getDropEvent(arguments),f=t.select({target:b}).length;return t.currentlyDragging=!1,h=p(e.getDragObject(arguments)),j=k(h,"dragId"),l=k(h,"originalScope"),m=N[j],n=m.endpoints[0],d.endpoint?E.extend({},d.endpoint):{},!Tb[b]||Lb[b]>0&&f>=Lb[b]?(i&&i({element:a,connection:m},c),!1):(n.anchor.locked=!1,l&&e.setDragScope(h,l),s=proxyComponent.isDropAllowed(m.sourceId,qb(a),m.scope,m,null),m.endpointsToDeleteOnDetach&&(n===m.endpointsToDeleteOnDetach[0]?m.endpointsToDeleteOnDetach[0]=null:n===m.endpointsToDeleteOnDetach[1]&&(m.endpointsToDeleteOnDetach[1]=null)),m.suspendedEndpoint&&(m.targetId=m.suspendedEndpoint.elementId,m.target=e.getElementObject(m.suspendedEndpoint.elementId),m.endpoints[1]=m.suspendedEndpoint),s?(n.detach(m,!1,!0,!1),u=Jb[b]||t.addEndpoint(a,d),d.uniqueEndpoint&&(Jb[b]=u),u._makeTargetCreator=!0,null!=u.anchor.positionFinder&&(v=e.getUIPosition(arguments,t.getZoom()),w=q(a,t),x=r(a),y=u.anchor.positionFinder(v,w,x,u.anchor.constructorParams),u.anchor.x=y[0],u.anchor.y=y[1]),z=t.connect({source:n,target:u,scope:l,previousConnection:m,container:m.parent,deleteEndpointsOnDetach:g,doNotFireConnectionEvent:n.endpointWillMoveAfterConnection}),m.endpoints[1]._makeTargetCreator&&m.endpoints[1].connections.length<2&&t.deleteEndpoint(m.endpoints[1]),g&&(z.endpointsToDeleteOnDetach=[n,u]),z.repaint()):m.suspendedEndpoint&&(m.isReattach()?(m.setHover(!1),m.floatingAnchorIndex=null,m.suspendedEndpoint.addConnection(m),t.repaint(n.elementId)):n.detach(m,!1,!0,!0,c)),void 0)},l=e.dragEvents.drop,c.scope=c.scope||f,c[l]=rb(c[l],j),e.initDroppable(a,c,!0)},a=X(a),j=a.length&&a.constructor!=String?a:[a],l=0;l<j.length;l++)_doOne(p(j[l]));return t},this.unmakeTarget=function(a,b){a=E.CurrentLibrary.getElementObject(a);var c=qb(a);return b||(delete Ib[c],delete Kb[c],delete Lb[c],delete Tb[c]),t},this.makeTargets=function(a,b,c){for(var d=0;d<a.length;d++)t.makeTarget(a[d],b,c)},Nb={},Ob={},Pb={},Qb={},Rb={},Sb={},Tb={},this.makeSource=function(a,b,d){var f,g,h,i,j,k,e=E.extend({},d);for(E.extend(e,b),Mb(e,0),f=E.CurrentLibrary,g=e.maxConnections||-1,h=e.onMaxConnections,i=function(a){var k,l,m,n,o,p,q,r,d=qb(a),i=e.parent,j=null!=i?t.getId(f.getElementObject(i)):d;Nb[j]=e,Pb[j]=e.uniqueEndpoint,Qb[j]=!0,k=f.dragEvents.stop,l=f.dragEvents.drag,m=E.extend({},e.dragOptions||{}),n=m.drag,o=m.stop,p=null,q=!1,Sb[j]=g,m.scope=m.scope||e.scope,m[l]=rb(m[l],function(){n&&n.apply(this,arguments),q=!1}),m[k]=rb(m[k],function(){var a,g,h,i,j;o&&o.apply(this,arguments),t.currentlyDragging=!1,0==p.connections.length?t.deleteEndpoint(p):(f.unbind(p.canvas,"mousedown"),a=e.anchor||t.Defaults.Anchor,p.anchor,g=p.connections[0],p.anchor=t.makeAnchor(a,d,t),e.parent&&(h=f.getElementObject(e.parent),h&&(i=p.elementId,j=e.container||t.Defaults.Container||E.Defaults.Container,p.setElement(h,j),p.endpointWillMoveAfterConnection=!1,t.anchorManager.rehomeEndpoint(i,h),g.previousConnection=null,c(I[g.scope],function(a){return a.id===g.id}),t.anchorManager.connectionDetached({sourceId:g.sourceId,targetId:g.targetId,connection:g}),cb(g))),p.repaint(),t.repaint(p.elementId),t.repaint(g.targetId))}),r=function(c){var i,k,l,n,o,r,s,u,v,w,x,y;if(Qb[j])return i=t.select({source:j}).length,Sb[j]>=0&&i>=Sb[j]?(h&&h({element:a,maxConnections:g},c),!1):(b.filter&&(k=b.filter(f.getOriginalEvent(c),a),k===!1)||(l=ob({elId:d}),n=((c.pageX||c.page.x)-l.left)/l.width,o=((c.pageY||c.page.y)-l.top)/l.height,r=n,s=o,e.parent&&(u=f.getElementObject(e.parent),v=qb(u),l=ob({elId:v}),r=((c.pageX||c.page.x)-l.left)/l.width,s=((c.pageY||c.page.y)-l.top)/l.height),w={},E.extend(w,e),w.isSource=!0,w.anchor=[n,o,0,0],w.parentAnchor=[r,s,0,0],w.dragOptions=m,e.parent&&(x=w.container||t.Defaults.Container||E.Defaults.Container,w.container=x?x:E.CurrentLibrary.getParent(e.parent)),p=t.addEndpoint(d,w),q=!0,p.endpointWillMoveAfterConnection=null!=e.parent,p.endpointWillMoveTo=e.parent?f.getElementObject(e.parent):null,y=function(){q&&t.deleteEndpoint(p)},t.registerListener(p.canvas,"mouseup",y),t.registerListener(a,"mouseup",y),f.trigger(p.canvas,"mousedown",c)),void 0)},t.registerListener(a,"mousedown",r),Rb[d]=r},a=X(a),j=a.length&&a.constructor!=String?a:[a],k=0;k<j.length;k++)i(p(j[k]));return t},this.unmakeSource=function(a,b){a=E.CurrentLibrary.getElementObject(a);var c=qb(a),d=Rb[c];return d&&t.unregisterListener(_el,"mousedown",d),b||(delete Nb[c],delete Pb[c],delete Qb[c],delete Rb[c],delete Sb[c]),t},this.unmakeEverySource=function(){for(var a in Qb)t.unmakeSource(a,!0);Nb={},Pb={},Qb={},Rb={}},this.unmakeEveryTarget=function(){for(var a in Tb)t.unmakeTarget(a,!0);return Ib={},Kb={},Lb={},Tb={},t},this.makeSources=function(a,b,c){for(var d=0;d<a.length;d++)t.makeSource(a[d],b,c);return t},Ub=function(a,b,c,d){var f,g,e="source"==a?Qb:Tb;if(h(b))e[b]=d?!e[b]:c;else if(b.length)for(b=X(b),f=0;f<b.length;f++)g=_el=E.CurrentLibrary.getElementObject(b[f]),g=qb(_el),e[g]=d?!e[g]:c;return t},this.setSourceEnabled=function(a,b){return Ub("source",a,b)},this.toggleSourceEnabled=function(a){return Ub("source",a,null,!0),t.isSourceEnabled(a)},this.isSource=function(a){return a=E.CurrentLibrary.getElementObject(a),null!=Qb[qb(a)]},this.isSourceEnabled=function(a){return a=E.CurrentLibrary.getElementObject(a),Qb[qb(a)]===!0},this.setTargetEnabled=function(a,b){return Ub("target",a,b)},this.toggleTargetEnabled=function(a){return Ub("target",a,null,!0)},this.isTarget=function(a){return a=E.CurrentLibrary.getElementObject(a),null!=Tb[qb(a)]},this.isTargetEnabled=function(a){return a=E.CurrentLibrary.getElementObject(a),Tb[qb(a)]===!0},this.ready=function(a){t.bind("ready",a)},this.repaint=function(a,b,c){if("object"==typeof a)for(var d=0;d<a.length;d++)Y(p(a[d]),b,c);else Y(p(a),b,c);return t},this.repaintEverything=function(){for(var a in J)Y(p(a));return t},this.removeAllEndpoints=function(a){var d,b=k(a,"id"),c=J[b];if(c)for(d=0;d<c.length;d++)t.deleteEndpoint(c[d]);return J[b]=[],t},Vb={},Wb=function(){var a,b,c;for(a in Vb)for(b=0;b<Vb[a].length;b++)c=Vb[a][b],E.CurrentLibrary.unbind(c.el,c.event,c.listener);Vb={}},this.registerListener=function(a,b,c){E.CurrentLibrary.bind(a,b,c),T(Vb,b,{el:a,event:b,listener:c})},this.unregisterListener=function(a,b,d){E.CurrentLibrary.unbind(a,b,d),c(Vb,function(a){return a.type==b&&a.listener==d})},this.reset=function(){t.deleteEveryEndpoint(),t.unbind(),Ib={},Jb={},Kb={},Lb={},Nb={},Ob={},Pb={},Sb={},Wb(),t.anchorManager.reset(),jsPlumbAdapter.headless||t.dragManager.reset()},this.setDefaultScope=function(a){return R=a,t},this.setDraggable=kb,this.setId=function(a,b,c){var g,h,d=a.constructor==String?a:t.getId(a),e=t.getConnections({source:d,scope:"*"},!0),f=t.getConnections({target:d,scope:"*"},!0);for(b=""+b,c||(a=E.CurrentLibrary.getElementObject(d),E.CurrentLibrary.setAttribute(a,"id",b)),a=E.CurrentLibrary.getElementObject(b),J[b]=J[d]||[],g=0;g<J[b].length;g++)J[b][g].elementId=b,J[b][g].element=a,J[b][g].anchor.elementId=b;delete J[d],t.anchorManager.changeId(d,b),h=function(c,d,e){for(var f=0;f<c.length;f++)c[f].endpoints[d].elementId=b,c[f].endpoints[d].element=a,c[f][e+"Id"]=b,c[f][e]=a},h(e,0,"source"),h(f,1,"target")},this.setIdChanged=function(a,b){t.setId(a,b,!0)},this.setDebugLog=function(a){F=a},Xb=!1,Yb=null,this.setSuspendDrawing=function(a,b){Xb=a,Yb=a?(new Date).getTime():null,b&&t.repaintEverything()},this.isSuspendDrawing=function(){return Xb},this.CANVAS="canvas",this.SVG="svg",this.VML="vml",this.setRenderMode=function(a){return S=jsPlumbAdapter.setRenderMode(a)},this.getRenderMode=function(){return S},this.show=function(a,b){return lb(a,"block",b),t},this.sizeCanvas=function(a,b,c,d,e){return a&&(a.style.height=e+"px",a.height=e,a.style.width=d+"px",a.width=d,a.style.left=b+"px",a.style.top=c+"px"),t},this.getTestHarness=function(){return{endpointsByElement:J,endpointCount:function(a){var b=J[a];return b?b.length:0},connectionCount:function(a){a=a||R;var b=I[a];return b?b.length:0},getId:qb,makeAnchor:self.makeAnchor,makeDynamicAnchor:self.makeDynamicAnchor}},this.toggle=nb,this.toggleVisible=nb,this.toggleDraggable=mb,this.wrap=rb,this.addListener=this.bind,Zb=function(a,b){var e,f,c=null,d=a;return"svg"===b.tagName.toLowerCase()&&b.parentNode?c=b.parentNode:b.offsetParent&&(c=b.offsetParent),null!=c&&(e="body"===c.tagName.toLowerCase()?{left:0,top:0}:q(c,t),f="body"===c.tagName.toLowerCase()?{left:0,top:0}:{left:c.scrollLeft,top:c.scrollTop},d[0]=a[0]-e.left+f.left,d[1]=a[1]-e.top+f.top),d},$b=function(a){var c,e,b=this;this.x=a.x||0,this.y=a.y||0,this.elementId=a.elementId,c=a.orientation||[0,0],e=null,this.offsets=a.offsets||[0,0],b.timestamp=null,this.compute=function(a){var c=a.xy,d=a.wh,f=a.element,g=a.timestamp;return g&&g===b.timestamp?e:(e=[c[0]+b.x*d[0]+b.offsets[0],c[1]+b.y*d[1]+b.offsets[1]],e=Zb(e,f.canvas),b.timestamp=g,e)},this.getOrientation=function(){return c},this.equals=function(a){var b,c;return a?(b=a.getOrientation(),c=this.getOrientation(),this.x==a.x&&this.y==a.y&&this.offsets[0]==a.offsets[0]&&this.offsets[1]==a.offsets[1]&&c[0]==b[0]&&c[1]==b[1]):!1},this.getCurrentLocation=function(){return e}},_b=function(a){var b=a.reference,c=a.referenceCanvas,d=r(p(c)),e=0,f=0,g=null,h=null;this.x=0,this.y=0,this.isFloating=!0,this.compute=function(a){var b=a.xy,c=a.element,e=[b[0]+d[0]/2,b[1]+d[1]/2];return e=Zb(e,c.canvas),h=e,e},this.getOrientation=function(a){if(g)return g;var c=b.getOrientation(a);return[-1*Math.abs(c[0])*e,-1*Math.abs(c[1])*f]},this.over=function(a){g=a.getOrientation()},this.out=function(){g=null},this.getCurrentLocation=function(){return h}},ac=function(a,b,c){var d,e,f,g,h,j,k;for(this.isSelective=!0,this.isDynamic=!0,d=[],e=this,f=function(a){return a.constructor==$b?a:t.makeAnchor(a,c,t)},g=0;g<a.length;g++)d[g]=f(a[g]);this.addAnchor=function(a){d.push(f(a))},this.getAnchors=function(){return d},this.locked=!1,h=d.length>0?d[0]:null,d.length>0?0:-1,e=this,j=function(a,b,c,d,e){var f=d[0]+a.x*e[0],g=d[1]+a.y*e[1],h=d[0]+e[0]/2,i=d[1]+e[1]/2;return Math.sqrt(Math.pow(b-f,2)+Math.pow(c-g,2))+Math.sqrt(Math.pow(h-f,2)+Math.pow(i-g,2))},k=b||function(a,b,c,d,e){var k,l,f=c[0]+d[0]/2,g=c[1]+d[1]/2,h=-1,i=1/0;for(k=0;k<e.length;k++)l=j(e[k],f,g,a,b),i>l&&(h=k+0,i=l);return e[h]},this.compute=function(a){var b=a.xy,c=a.wh,g=(a.timestamp,a.txy),i=a.twh;return e.locked||null==g||null==i?h.compute(a):(a.timestamp=null,h=k(b,c,g,i,d),e.x=h.x,e.y=h.y,h.compute(a))},this.getCurrentLocation=function(){return null!=h?h.getCurrentLocation():null},this.getOrientation=function(a){return null!=h?h.getOrientation(a):[0,0]},this.over=function(a){null!=h&&h.over(a)},this.out=function(){null!=h&&h.out()}},bc={},cc={},dc={},ec={HORIZONTAL:"horizontal",VERTICAL:"vertical",DIAGONAL:"diagonal",IDENTITY:"identity"},fc=function(a,b,c,d){var e,f,g,h,i;return a===b?{orientation:ec.IDENTITY,a:["top","top"]}:(e=Math.atan2(d.centery-c.centery,d.centerx-c.centerx),f=Math.atan2(c.centery-d.centery,c.centerx-d.centerx),g=c.left<=d.left&&c.right>=d.left||c.left<=d.right&&c.right>=d.right||c.left<=d.left&&c.right>=d.right||d.left<=c.left&&d.right>=c.right,h=c.top<=d.top&&c.bottom>=d.top||c.top<=d.bottom&&c.bottom>=d.bottom||c.top<=d.top&&c.bottom>=d.bottom||d.top<=c.top&&d.bottom>=c.bottom,g||h?g?{orientation:ec.HORIZONTAL,a:c.top<d.top?["bottom","top"]:["top","bottom"],theta:e,theta2:f}:{orientation:ec.VERTICAL,a:c.left<d.left?["right","left"]:["left","right"],theta:e,theta2:f}:(i=null,d.left>c.left&&d.top>c.top?i=["right","top"]:d.left>c.left&&c.top>d.top?i=["top","left"]:d.left<c.left&&d.top<c.top?i=["top","right"]:d.left<c.left&&d.top>c.top&&(i=["left","top"]),{orientation:ec.DIAGONAL,a:i,theta:e,theta2:f}))},gc=function(a,b,c,d,e,f,g){var j,k,l,m,n,o,p,q,r,h=[],i=b[e?0:1]/(d.length+1);for(j=0;j<d.length;j++)k=(j+1)*i,l=f*b[e?1:0],g&&(k=b[e?0:1]-k),m=e?k:l,n=c[0]+m,o=m/b[0],p=e?l:k,q=c[1]+p,r=p/b[1],h.push([n,q,o,r,d[j][1],d[j][2]]);return h},hc=function(a,b){return a[0]>b[0]?1:-1},ic=function(a){return function(b,c){var d=!0;return d=a?b[0][0]<c[0][0]?!0:b[0][1]>c[0][1]:b[0][0]>c[0][0]?!0:b[0][1]>c[0][1],d===!1?-1:1}},jc=function(a,b){var c=a[0][0]<0?-Math.PI-a[0][0]:Math.PI-a[0][0],d=b[0][0]<0?-Math.PI-b[0][0]:Math.PI-b[0][0];return c>d?1:a[0][1]>b[0][1]?1:-1},kc={top:hc,right:ic(!0),bottom:ic(!0),left:jc},lc=function(a,b){return a.sort(b)},mc=function(a,b){var c=Q[a],d=L[a],e=function(b,c,d,e,f,g,h){var i,j,k,l,m,n,o,p;if(e.length>0)for(i=lc(e,kc[b]),j="right"===b||"top"===b,k=gc(b,c,d,i,f,g,j),l=function(a,b){var c=Zb([b[0],b[1]],a.canvas);cc[a.id]=[c[0],c[1],b[2],b[3]],dc[a.id]=h},m=0;m<k.length;m++)n=k[m][4],o=n.endpoints[0].elementId===a,p=n.endpoints[1].elementId===a,o?l(n.endpoints[0],k[m]):p&&l(n.endpoints[1],k[m])};e("bottom",c,[d.left,d.top],b.bottom,!0,1,[0,1]),e("top",c,[d.left,d.top],b.top,!0,0,[0,-1]),e("left",c,[d.left,d.top],b.left,!1,0,[-1,0]),e("right",c,[d.left,d.top],b.right,!1,1,[1,0])},nc=function(){var h,b={},d={},f=this,g={};this.reset=function(){b={},d={},g={}},this.newConnection=function(a){var b=a.sourceId,c=a.targetId,e=a.endpoints,f=!0,g=function(a,g,h,i,j){b==c&&h.isContinuous&&(E.CurrentLibrary.removeElement(e[1].canvas),f=!1),T(d,i,[j,g,h.constructor==ac])};g(0,e[0],e[0].anchor,c,a),f&&g(1,e[1],e[1].anchor,b,a)},this.connectionDetached=function(a){var k,l,m,n,o,b=a.connection||a,e=b.sourceId,h=b.targetId,i=b.endpoints,j=function(a,b,e,f,g){e.constructor==_b||c(d[f],function(a){return a[0].id==g.id})};j(1,i[1],i[1].anchor,e,b),j(0,i[0],i[0].anchor,h,b),k=b.sourceId,l=b.targetId,m=b.endpoints[0].id,n=b.endpoints[1].id,o=function(a,b){if(a){var d=function(a){return a[4]==b};c(a.top,d),c(a.left,d),c(a.bottom,d),c(a.right,d)}},o(g[k],m),o(g[l],n),f.redraw(k),f.redraw(l)},this.add=function(a,c){T(b,c,a)},this.changeId=function(a,c){d[c]=d[a],b[c]=b[a],delete d[a],delete b[a]},this.getConnectionsFor=function(a){return d[a]||[]},this.getEndpointsFor=function(a){return b[a]||[]},this.deleteEndpoint=function(a){c(b[a.elementId],function(b){return b.id==a.id})},this.clearFor=function(a){delete b[a],b[a]=[]},h=function(b,c,d,f,g,h,i,j,k,l,m,n){var w,x,y,o=-1,p=-1,q=f.endpoints[i],r=q.id,t=([1,0][i],[[c,d],f,g,h,r]),u=b[k],v=q._continuousAnchorEdge?b[q._continuousAnchorEdge]:null;if(v&&(w=a(v,function(a){return a[4]==r}),-1!=w))for(v.splice(w,1),x=0;x<v.length;x++)e(m,v[x][1],function(a){return a.id==v[x][1].id}),e(n,v[x][1].endpoints[i],function(a){return a.id==v[x][1].endpoints[i].id});for(x=0;x<u.length;x++)1==i&&u[x][3]===h&&-1==p&&(p=x),e(m,u[x][1],function(a){return a.id==u[x][1].id}),e(n,u[x][1].endpoints[i],function(a){return a.id==u[x][1].endpoints[i].id});-1!=o?u[o]=t:(y=j?-1!=p?p:0:u.length,u.splice(y,0,t)),q._continuousAnchorEdge=k},this.redraw=function(a,c,f,i){var j,k,l,m,n,o,p,q,r,s,t,u,v,w,y,A,B,C,D,E,F,G;if(!Xb){for(j=b[a]||[],k=d[a]||[],l=[],m=[],n=[],f=f||x(),i=i||{left:0,top:0},c&&(c={left:c.left+i.left,top:c.top+i.top}),ob({elId:a,offset:c,recalc:!1,timestamp:f}),o=L[a],p=Q[a],q={},r=0;r<k.length;r++)s=k[r][0],t=s.sourceId,u=s.targetId,v=s.endpoints[0].anchor.isContinuous,w=s.endpoints[1].anchor.isContinuous,(v||w)&&(y=t+"_"+u,A=q[y],B=s.sourceId==a?1:0,v&&!g[t]&&(g[t]={top:[],right:[],bottom:[],left:[]}),w&&!g[u]&&(g[u]={top:[],right:[],bottom:[],left:[]}),a!=u&&ob({elId:u,timestamp:f}),a!=t&&ob({elId:t,timestamp:f}),C=pb(u),D=pb(t),u==t&&(v||w)?h(g[t],-Math.PI/2,0,s,!1,u,0,!1,"top",t,l,m):(A||(A=fc(t,u,D.o,C.o),q[y]=A),v&&h(g[t],A.theta,0,s,!1,u,0,!1,A.a[0],t,l,m),w&&h(g[u],A.theta2,-1,s,!0,t,1,!0,A.a[1],u,l,m)),v&&e(n,t,function(a){return a===t}),w&&e(n,u,function(a){return a===u}),e(l,s,function(a){return a.id==s.id}),(v&&0==B||w&&1==B)&&e(m,s.endpoints[B],function(a){return a.id==s.endpoints[B].id}));for(r=0;r<j.length;r++)0==j[r].connections.length&&j[r].anchor.isContinuous&&(g[a]||(g[a]={top:[],right:[],bottom:[],left:[]}),h(g[a],-Math.PI/2,0,{endpoints:[j[r],j[r]],paint:function(){}},!1,a,0,!1,"top",a,l,m),e(n,a,function(b){return b===a}));for(r=0;r<n.length;r++)mc(n[r],g[n[r]]);for(r=0;r<j.length;r++)j[r].paint({timestamp:f,offset:o,dimensions:p});for(r=0;r<m.length;r++)m[r].paint({timestamp:f,offset:o,dimensions:p});for(r=0;r<k.length;r++)if(E=k[r][1],E.anchor.constructor==ac)for(E.paint({elementWithPrecedence:a}),e(l,k[r][0],function(a){return a.id==k[r][0].id}),F=0;F<E.connections.length;F++)E.connections[F]!==k[r][0]&&e(l,E.connections[F],function(a){return a.id==E.connections[F].id});else E.anchor.constructor==$b&&e(l,k[r][0],function(a){return a.id==k[r][0].id});for(G=N[a],G&&G.paint({timestamp:f,recalc:!1,elId:a}),r=0;r<l.length;r++)l[r].paint({elId:a,timestamp:f,recalc:!1})}},this.rehomeEndpoint=function(a,c){var g,d=b[a]||[],e=t.getId(c);if(e!==a){for(g=0;g<d.length;g++)f.add(d[g],e);d.splice(0,d.length)}}},t.anchorManager=new nc,t.continuousAnchorFactory={get:function(a){var b=bc[a.elementId];return b||(b={type:"Continuous",compute:function(a){return cc[a.element.id]||[0,0]},getCurrentLocation:function(a){return cc[a.id]||[0,0]},getOrientation:function(a){return dc[a.id]||[0,0]},isDynamic:!0,isContinuous:!0},bc[a.elementId]=b),b}},jsPlumbAdapter.headless||(t.dragManager=jsPlumbAdapter.getDragManager(t)),t.recalculateOffsets=t.dragManager.updateOffsets,oc=function(a){var d,e,f,i,l,m,n,o,q,r,s,u,v,w,y,B,C,D,F,G,b=this,c=!0;b.idPrefix="_jsplumb_c_",b.defaultLabelLocation=.5,b.defaultOverlayKeys=["Overlays","ConnectionOverlays"],this.parent=a.parent,z.apply(this,arguments),this.isVisible=function(){return c},this.setVisible=function(a){c=a,b[a?"showOverlays":"hideOverlays"](),b.connector&&b.connector.canvas&&(b.connector.canvas.style.display=a?"block":"none"),b.repaint()},this.getTypeDescriptor=function(){return"connection"},this.getDefaultType=function(){return{parameters:{},scope:null,detachable:b._jsPlumb.Defaults.ConnectionsDetachable,rettach:b._jsPlumb.Defaults.ReattachConnections,paintStyle:b._jsPlumb.Defaults.PaintStyle||E.Defaults.PaintStyle,connector:b._jsPlumb.Defaults.Connector||E.Defaults.Connector,hoverPaintStyle:b._jsPlumb.Defaults.HoverPaintStyle||E.Defaults.HoverPaintStyle,overlays:b._jsPlumb.Defaults.ConnectorOverlays||E.Defaults.ConnectorOverlays}},f=this.applyType,this.applyType=function(a){f(a),null!=a.detachable&&b.setDetachable(a.detachable),null!=a.reattach&&b.setReattach(a.reattach),a.scope&&(b.scope=a.scope),b.setConnector(a.connector)},e=b.setHover,b.setHover=function(a){var c=t.ConnectorZIndex||E.Defaults.ConnectorZIndex;c&&b.connector.setZIndex(c+(a?1:0)),b.connector.setHover.apply(b.connector,arguments),e.apply(b,arguments)},d=function(a){null==j&&b.setHover(a,!1)},this.setConnector=function(c,e){var f,i;null!=b.connector&&jb(b.connector.getDisplayElements(),b.parent),f={_jsPlumb:b._jsPlumb,parent:a.parent,cssClass:a.cssClass,container:a.container,tooltip:b.tooltip},h(c)?this.connector=new E.Connectors[S][c](f):g(c)&&(this.connector=1==c.length?new E.Connectors[S][c[0]](f):new E.Connectors[S][c[0]](E.extend(c[1],f))),b.canvas=b.connector.canvas,A(b.connector,b,d),i=t.ConnectorZIndex||E.Defaults.ConnectorZIndex,i&&b.connector.setZIndex(i),e||b.repaint()},this.source=p(a.source),this.target=p(a.target),a.sourceEndpoint&&(this.source=a.sourceEndpoint.endpointWillMoveTo||a.sourceEndpoint.getElement()),a.targetEndpoint&&(this.target=a.targetEndpoint.getElement()),b.previousConnection=a.previousConnection,this.sourceId=k(this.source,"id"),this.targetId=k(this.target,"id"),this.scope=a.scope,this.endpoints=[],this.endpointStyles=[],i=function(a,b){return a?t.makeAnchor(a,b,t):null},l=function(a,c,d,e,f,g,h){var j,k,l,m,n,o;return a?(b.endpoints[c]=a,a.addConnection(b)):(d.endpoints||(d.endpoints=[null,null]),k=d.endpoints[c]||d.endpoint||t.Defaults.Endpoints[c]||E.Defaults.Endpoints[c]||t.Defaults.Endpoint||E.Defaults.Endpoint,d.endpointStyles||(d.endpointStyles=[null,null]),d.endpointHoverStyles||(d.endpointHoverStyles=[null,null]),l=d.endpointStyles[c]||d.endpointStyle||t.Defaults.EndpointStyles[c]||E.Defaults.EndpointStyles[c]||t.Defaults.EndpointStyle||E.Defaults.EndpointStyle,null==l.fillStyle&&null!=g&&(l.fillStyle=g.strokeStyle),null==l.outlineColor&&null!=g&&(l.outlineColor=g.outlineColor),null==l.outlineWidth&&null!=g&&(l.outlineWidth=g.outlineWidth),m=d.endpointHoverStyles[c]||d.endpointHoverStyle||t.Defaults.EndpointHoverStyles[c]||E.Defaults.EndpointHoverStyles[c]||t.Defaults.EndpointHoverStyle||E.Defaults.EndpointHoverStyle,null!=h&&(null==m&&(m={}),null==m.fillStyle&&(m.fillStyle=h.strokeStyle)),n=d.anchors?d.anchors[c]:d.anchor?d.anchor:i(t.Defaults.Anchors[c],f)||i(E.Defaults.Anchors[c],f)||i(t.Defaults.Anchor,f)||i(E.Defaults.Anchor,f),o=d.uuids?d.uuids[c]:null,j=fb({paintStyle:l,hoverPaintStyle:m,endpoint:k,connections:[b],uuid:o,anchor:n,source:e,scope:d.scope,container:d.container,reattach:d.reattach||t.Defaults.ReattachConnections,detachable:d.detachable||t.Defaults.ConnectionsDetachable}),b.endpoints[c]=j,d.drawEndpoints===!1&&j.setVisible(!1,!0,!0)),j},m=l(a.sourceEndpoint,0,a,b.source,b.sourceId,a.paintStyle,a.hoverPaintStyle),m&&T(J,this.sourceId,m),n=l(a.targetEndpoint,1,a,b.target,b.targetId,a.paintStyle,a.hoverPaintStyle),n&&T(J,this.targetId,n),this.scope||(this.scope=this.endpoints[0].scope),b.endpointsToDeleteOnDetach=[null,null],a.deleteEndpointsOnDetach&&(a.sourceIsNew&&(b.endpointsToDeleteOnDetach[0]=b.endpoints[0]),a.targetIsNew&&(b.endpointsToDeleteOnDetach[1]=b.endpoints[1])),b.setConnector(this.endpoints[0].connector||this.endpoints[1].connector||a.connector||t.Defaults.Connector||E.Defaults.Connector,!0),this.setPaintStyle(this.endpoints[0].connectorStyle||this.endpoints[1].connectorStyle||a.paintStyle||t.Defaults.PaintStyle||E.Defaults.PaintStyle,!0),this.setHoverPaintStyle(this.endpoints[0].connectorHoverStyle||this.endpoints[1].connectorHoverStyle||a.hoverPaintStyle||t.Defaults.HoverPaintStyle||E.Defaults.HoverPaintStyle,!0),this.paintStyleInUse=this.getPaintStyle(),ob({elId:this.sourceId,timestamp:Yb}),ob({elId:this.targetId,timestamp:Yb}),o=L[this.sourceId],q=Q[this.sourceId],r=L[this.targetId],s=Q[this.targetId],u=Yb||x(),v=this.endpoints[0].anchor.compute({xy:[o.left,o.top],wh:q,element:this.endpoints[0],elementId:this.endpoints[0].elementId,txy:[r.left,r.top],twh:s,tElement:this.endpoints[1],timestamp:u}),this.endpoints[0].paint({anchorLoc:v,timestamp:u}),v=this.endpoints[1].anchor.compute({xy:[r.left,r.top],wh:s,element:this.endpoints[1],elementId:this.endpoints[1].elementId,txy:[o.left,o.top],twh:q,tElement:this.endpoints[0],timestamp:u}),this.endpoints[1].paint({anchorLoc:v,timestamp:u}),w=t.Defaults.ConnectionsDetachable,a.detachable===!1&&(w=!1),b.endpoints[0].connectionsDetachable===!1&&(w=!1),b.endpoints[1].connectionsDetachable===!1&&(w=!1),this.isDetachable=function(){return w===!0},this.setDetachable=function(a){w=a===!0},y=a.reattach||b.endpoints[0].reattachConnections||b.endpoints[1].reattachConnections||t.Defaults.ReattachConnections,this.isReattach=function(){return y===!0},this.setReattach=function(a){y=a===!0},B=a.cost||b.endpoints[0].getConnectionCost(),b.getCost=function(){return B},b.setCost=function(a){B=a},C=!(a.bidirectional===!1),null==a.bidirectional&&(C=b.endpoints[0].areConnectionsBidirectional()),b.isBidirectional=function(){return C},D=E.extend({},this.endpoints[0].getParameters()),E.extend(D,this.endpoints[1].getParameters()),E.extend(D,b.getParameters()),b.setParameters(D),this.getAttachedElements=function(){return b.endpoints},this.moveParent=function(a){var e,c=E.CurrentLibrary,d=c.getParent(b.connector.canvas);for(b.connector.bgCanvas&&(c.removeElement(b.connector.bgCanvas,d),c.appendElement(b.connector.bgCanvas,a)),c.removeElement(b.connector.canvas,d),c.appendElement(b.connector.canvas,a),e=0;e<b.overlays.length;e++)b.overlays[e].isAppendedAtTopLevel&&(c.removeElement(b.overlays[e].canvas,d),c.appendElement(b.overlays[e].canvas,a),b.overlays[e].reattachListeners&&b.overlays[e].reattachListeners(b.connector));b.connector.reattachListeners&&b.connector.reattachListeners()},F=null,this.paint=function(a){var d,e,f,g,h,i,k,l,m,n,o,p,q,r,s,t,u,v;if(c){if(a=a||{},d=a.elId,e=a.ui,f=a.recalc,g=a.timestamp,h=!1,i=h?this.sourceId:this.targetId,h?this.targetId:this.sourceId,k=h?0:1,l=h?1:0,null==g||g!=F){for(m=ob({elId:d,offset:e,recalc:f,timestamp:g}),n=ob({elId:i,timestamp:g}),o=this.endpoints[l],p=this.endpoints[k],q=o.anchor.getCurrentLocation(o),r=p.anchor.getCurrentLocation(p),s=0,t=0;t<b.overlays.length;t++)u=b.overlays[t],u.isVisible()&&(s=Math.max(s,u.computeMaxSize()));for(v=this.connector.compute(q,r,this.endpoints[l],this.endpoints[k],this.endpoints[l].anchor,this.endpoints[k].anchor,b.paintStyleInUse.lineWidth,s,m,n),b.connector.paint(v,b.paintStyleInUse),t=0;t<b.overlays.length;t++)u=b.overlays[t],u.isVisible&&(b.overlayPlacements[t]=u.draw(b.connector,b.paintStyleInUse,v))}F=g}},this.repaint=function(a){a=a||{};var b=!(a.recalc===!1);this.paint({elId:this.sourceId,recalc:b,timestamp:a.timestamp})},G=a.type||b.endpoints[0].connectionType||b.endpoints[1].connectionType,G&&b.addType(G)},pc=function(a){var b=!1;return{drag:function(){if(b)return b=!1,!0;var c=E.CurrentLibrary.getUIPosition(arguments,t.getZoom()),d=a.element;d&&(E.CurrentLibrary.setOffset(d,c),Y(p(d),c))},stopDrag:function(){b=!0}}},qc=function(a,b,c,d,e){var f=new _b({reference:b,referenceCanvas:d});return fb({paintStyle:a,endpoint:c,anchor:f,source:e,scope:"__floating"})},rc=function(a,b){var d,e,c=document.createElement("div");c.style.position="absolute",d=p(c),U(c,b),e=qb(d),ob({elId:e}),a.id=e,a.element=d},sc=function(b){var e,f,i,j,m,n,o,r,s,u,v,w,x,y,B,C,D,F,G,H,M,O,P,U,V,W,X,Y,Z,$,_,ab,d=this;return d.idPrefix="_jsplumb_e_",d.defaultLabelLocation=[.5,.5],d.defaultOverlayKeys=["Overlays","EndpointOverlays"],this.parent=b.parent,z.apply(this,arguments),b=b||{},this.getTypeDescriptor=function(){return"endpoint"},this.getDefaultType=function(){return{parameters:{},scope:null,maxConnections:d._jsPlumb.Defaults.MaxConnections,paintStyle:d._jsPlumb.Defaults.EndpointStyle||E.Defaults.EndpointStyle,endpoint:d._jsPlumb.Defaults.Endpoint||E.Defaults.Endpoint,hoverPaintStyle:d._jsPlumb.Defaults.EndpointHoverStyle||E.Defaults.EndpointHoverStyle,overlays:d._jsPlumb.Defaults.EndpointOverlays||E.Defaults.EndpointOverlays,connectorStyle:b.connectorStyle,connectorHoverStyle:b.connectorHoverStyle,connectorClass:b.connectorClass,connectorHoverClass:b.connectorHoverClass,connectorOverlays:b.connectorOverlays,connector:b.connector,connectorTooltip:b.connectorTooltip}},e=this.applyType,this.applyType=function(a){e(a),null!=a.maxConnections&&(C=a.maxConnections),a.scope&&(d.scope=a.scope),d.connectorStyle=a.connectorStyle,d.connectorHoverStyle=a.connectorHoverStyle,d.connectorOverlays=a.connectorOverlays,d.connector=a.connector,d.connectorTooltip=a.connectorTooltip,d.connectionType=a.connectionType,d.connectorClass=a.connectorClass,d.connectorHoverClass=a.connectorHoverClass},f=!0,i=!(b.enabled===!1),this.isVisible=function(){return f},this.setVisible=function(a,b,c){var e,g;if(f=a,d.canvas&&(d.canvas.style.display=a?"block":"none"),d[a?"showOverlays":"hideOverlays"](),!b)for(e=0;e<d.connections.length;e++)d.connections[e].setVisible(a),c||(g=d===d.connections[e].endpoints[0]?1:0,1==d.connections[e].endpoints[g].connections.length&&d.connections[e].endpoints[g].setVisible(a,!0,!0))},this.isEnabled=function(){return i},this.setEnabled=function(a){i=a},j=b.source,m=b.uuid,n=null,o=null,m&&(K[m]=d),r=k(j,"id"),this.elementId=r,this.element=j,s=b.connectionCost,this.getConnectionCost=function(){return s},this.setConnectionCost=function(a){s=a},u=b.connectionsBidirectional===!1?!1:!0,this.areConnectionsBidirectional=function(){return u},this.setConnectionsBidirectional=function(a){u=a},d.anchor=b.anchor?t.makeAnchor(b.anchor,r,t):b.anchors?t.makeAnchor(b.anchors,r,t):t.makeAnchor(t.Defaults.Anchor||"TopCenter",r,t),b._transient||t.anchorManager.add(d,r),v=null,w=null,this.setEndpoint=function(a){var e,c={_jsPlumb:d._jsPlumb,parent:b.parent,container:b.container,tooltip:b.tooltip,connectorTooltip:b.connectorTooltip,endpoint:d};h(a)?v=new E.Endpoints[S][a](c):g(a)?(c=E.extend(a[1],c),v=new E.Endpoints[S][a[0]](c)):v=a.clone(),e=E.extend({},c),v.clone=function(){var a=new Object;return v.constructor.apply(a,[e]),a},d.endpoint=v,d.type=d.endpoint.type},this.setEndpoint(b.endpoint||t.Defaults.Endpoint||E.Defaults.Endpoint||"Dot"),w=v,x=d.setHover,d.setHover=function(){d.endpoint.setHover.apply(d.endpoint,arguments),x.apply(d,arguments)},y=function(a){d.connections.length>0?d.connections[0].setHover(a,!1):d.setHover(a)},A(d.endpoint,d,y),this.setPaintStyle(b.paintStyle||b.style||t.Defaults.EndpointStyle||E.Defaults.EndpointStyle,!0),this.setHoverPaintStyle(b.hoverPaintStyle||t.Defaults.EndpointHoverStyle||E.Defaults.EndpointHoverStyle,!0),this.paintStyleInUse=this.getPaintStyle(),B=this.getPaintStyle(),this.connectorStyle=b.connectorStyle,this.connectorHoverStyle=b.connectorHoverStyle,this.connectorOverlays=b.connectorOverlays,this.connector=b.connector,this.connectorTooltip=b.connectorTooltip,this.connectorClass=b.connectorClass,this.connectorHoverClass=b.connectorHoverClass,this.isSource=b.isSource||!1,this.isTarget=b.isTarget||!1,C=b.maxConnections||t.Defaults.MaxConnections,this.getAttachedElements=function(){return d.connections},this.canvas=this.endpoint.canvas,this.connections=b.connections||[],this.scope=b.scope||R,this.connectionType=b.connectionType,this.timestamp=null,d.reattachConnections=b.reattach||t.Defaults.ReattachConnections,d.connectionsDetachable=t.Defaults.ConnectionsDetachable,(b.connectionsDetachable===!1||b.detachable===!1)&&(d.connectionsDetachable=!1),D=b.dragAllowedWhenFull||!0,b.onMaxConnections&&d.bind("maxConnections",b.onMaxConnections),this.computeAnchor=function(a){return d.anchor.compute(a)},this.addConnection=function(a){d.connections.push(a)},this.detach=function(b,e,f,g,h){var k,l,m,n,i=a(d.connections,function(a){return a.id==b.id}),j=!1;if(g=g!==!1,i>=0&&(f||b._forceDetach||b.isDetachable()||b.isDetachAllowed(b))&&(k=b.endpoints[0]==d?b.endpoints[1]:b.endpoints[0],f||b._forceDetach||d.isDetachAllowed(b))){if(d.connections.splice(i,1),!e&&(k.detach(b,!0,f),b.endpointsToDeleteOnDetach))for(l=0;l<b.endpointsToDeleteOnDetach.length;l++)m=b.endpointsToDeleteOnDetach[l],m&&0==m.connections.length&&t.deleteEndpoint(m);jb(b.connector.getDisplayElements(),b.parent),c(I[b.scope],function(a){return a.id==b.id}),j=!0,n=!e&&g,sb(b,n,h)}return j},this.detachAll=function(a,b){for(;d.connections.length>0;)d.detach(d.connections[0],!1,!0,a,b)},this.detachFrom=function(a,b,c){var f,e=[];for(f=0;f<d.connections.length;f++)(d.connections[f].endpoints[1]==a||d.connections[f].endpoints[0]==a)&&e.push(d.connections[f]);for(f=0;f<e.length;f++)d.detach(e[f],!1,!0,b,c)&&e[f].setHover(!1,!1)},this.detachFromConnection=function(b){var c=a(d.connections,function(a){return a.id==b.id});c>=0&&d.connections.splice(c,1)},this.getElement=function(){return j},this.setElement=function(a,b){var f,g,h,e=qb(a);for(c(J[d.elementId],function(a){return a.id==d.id}),j=p(a),r=qb(j),d.elementId=r,f=eb({source:e,container:b}),g=V.getParent(d.canvas),V.removeElement(d.canvas,g),V.appendElement(d.canvas,f),h=0;h<d.connections.length;h++)d.connections[h].moveParent(f),d.connections[h].sourceId=r,d.connections[h].source=j;T(J,e,d)},this.getUuid=function(){return m},this.makeInPlaceCopy=function(){var a=d.anchor.getCurrentLocation(d),b=d.anchor.getOrientation(d),c={compute:function(){return[a[0],a[1]]},getCurrentLocation:function(){return[a[0],a[1]]},getOrientation:function(){return b}};return fb({anchor:c,source:j,paintStyle:this.getPaintStyle(),endpoint:v,_transient:!0,scope:d.scope})
},this.isConnectedTo=function(a){var c,b=!1;if(a)for(c=0;c<d.connections.length;c++)if(d.connections[c].endpoints[1]==a){b=!0;break}return b},this.isFloating=function(){return null!=n},this.connectorSelector=function(){var a=d.connections[0];return d.isTarget&&a?a:d.connections.length<C||-1==C?null:a},this.isFull=function(){return!(d.isFloating()||1>C||d.connections.length<C)},this.setDragAllowedWhenFull=function(a){D=a},this.setStyle=d.setPaintStyle,this.equals=function(a){return this.anchor.equals(a.anchor)},F=function(a){var c,b=0;if(null!=a)for(c=0;c<d.connections.length;c++)if(d.connections[c].sourceId==a||d.connections[c].targetId==a){b=c;break}return d.connections[b]},this.paint=function(a){var b,c,e,f,g,h,i,j,k,l,m,n,o,p,q;if(a=a||{},b=a.timestamp,c=!(a.recalc===!1),(!b||d.timestamp!==b)&&(ob({elId:r,timestamp:b,recalc:c}),e=a.offset||L[r]))for(f=a.anchorPoint,g=a.connectorPaintStyle,null==f&&(h=a.dimensions||Q[r],(null==e||null==h)&&(ob({elId:r,timestamp:b}),e=L[r],h=Q[r]),i={xy:[e.left,e.top],wh:h,element:d,timestamp:b},c&&d.anchor.isDynamic&&d.connections.length>0&&(j=F(a.elementWithPrecedence),k=j.endpoints[0]==d?1:0,l=0==k?j.sourceId:j.targetId,m=L[l],n=Q[l],i.txy=[m.left,m.top],i.twh=n,i.tElement=j.endpoints[k]),f=d.anchor.compute(i)),o=v.compute(f,d.anchor.getOrientation(d),d.paintStyleInUse,g||d.paintStyleInUse),v.paint(o,d.paintStyleInUse,d.anchor),d.timestamp=b,p=0;p<d.overlays.length;p++)q=d.overlays[p],q.isVisible&&(d.overlayPlacements[p]=q.draw(d.endpoint,d.paintStyleInUse,o))},this.repaint=this.paint,this.removeConnection=this.detach,E.CurrentLibrary.isDragSupported(j)&&(G={id:null,element:null},H=null,M=!1,O=null,P=pc(G),U=function(){var a,c,e,f,g,h,i,k;return H=d.connectorSelector(),a=!0,d.isEnabled()||(a=!1),null!=H||b.isSource||(a=!1),b.isSource&&d.isFull()&&!D&&(a=!1),null==H||H.isDetachable()||(a=!1),a===!1?(E.CurrentLibrary.stopDrag&&E.CurrentLibrary.stopDrag(),P.stopDrag(),!1):(H&&!d.isFull()&&b.isSource&&(H=null),ob({elId:r}),o=d.makeInPlaceCopy(),o.referenceEndpoint=d,o.paint(),rc(G,d.parent),c=p(o.canvas),e=q(c,t),f=Zb([e.left,e.top],o.canvas),E.CurrentLibrary.setOffset(G.element,{left:f[0],top:f[1]}),d.parentAnchor&&(d.anchor=t.makeAnchor(d.parentAnchor,d.elementId,t)),l(p(d.canvas),"dragId",G.id),l(p(d.canvas),"elId",r),b.proxy&&d.setPaintStyle(b.proxy.paintStyle),n=qc(d.getPaintStyle(),d.anchor,v,d.canvas,G.element),null==H?(d.anchor.locked=!0,d.setHover(!1,!1),H=bb({sourceEndpoint:d,targetEndpoint:n,source:d.endpointWillMoveTo||p(j),target:G.element,anchors:[d.anchor,n.anchor],paintStyle:b.connectorStyle,hoverPaintStyle:b.connectorHoverStyle,connector:b.connector,overlays:b.connectorOverlays,type:d.connectionType,cssClass:d.connectorClass,hoverClass:d.connectorHoverClass})):(M=!0,H.setHover(!1),ab(p(o.canvas),!1,!0),g=H.endpoints[0].id==d.id?0:1,H.floatingAnchorIndex=g,d.detachFromConnection(H),h=p(d.canvas),i=E.CurrentLibrary.getDragScope(h),l(h,"originalScope",i),k=E.CurrentLibrary.getDropScope(h),E.CurrentLibrary.setDragScope(h,k),0==g?(O=[H.source,H.sourceId,_,i],H.source=G.element,H.sourceId=G.id):(O=[H.target,H.targetId,_,i],H.target=G.element,H.targetId=G.id),H.endpoints[0==g?1:0].anchor.locked=!0,H.suspendedEndpoint=H.endpoints[g],H.suspendedEndpoint.setHover(!1),n.referenceEndpoint=H.suspendedEndpoint,H.endpoints[g]=n,tb(H)),N[G.id]=H,n.addConnection(H),T(J,G.id,n),t.currentlyDragging=!0,void 0)},V=E.CurrentLibrary,W=b.dragOptions||{},X=E.extend({},V.defaultDragOptions),Y=V.dragEvents.start,Z=V.dragEvents.stop,$=V.dragEvents.drag,W=E.extend(X,W),W.scope=W.scope||d.scope,W[Y]=rb(W[Y],U),W[$]=rb(W[$],P.drag),W[Z]=rb(W[Z],function(){var b,a=V.getDropEvent(arguments);t.currentlyDragging=!1,c(J[G.id],function(a){return a.id==n.id}),jb([G.element[0],n.canvas],j),ib(o.canvas,j),t.anchorManager.clearFor(G.id),b=null==H.floatingAnchorIndex?1:H.floatingAnchorIndex,H.endpoints[0==b?1:0].anchor.locked=!1,d.setPaintStyle(B),H.endpoints[b]==n&&(M&&H.suspendedEndpoint?(0==b?(H.source=O[0],H.sourceId=O[1]):(H.target=O[0],H.targetId=O[1]),E.CurrentLibrary.setDragScope(O[2],O[3]),H.endpoints[b]=H.suspendedEndpoint,(H.isReattach()||H._forceReattach||H._forceDetach||!H.endpoints[0==b?1:0].detach(H,!1,!1,!0,a))&&(H.setHover(!1),H.floatingAnchorIndex=null,H.suspendedEndpoint.addConnection(H),t.repaint(O[1])),H._forceDetach=null,H._forceReattach=null):(jb(H.connector.getDisplayElements(),d.parent),d.detachFromConnection(H))),d.anchor.locked=!1,d.paint({recalc:!1}),ub(H),H=null,o=null,delete J[n.elementId],n.anchor=null,n=null,t.currentlyDragging=!1}),_=p(d.canvas),E.CurrentLibrary.initDraggable(_,W,!0)),ab=function(a,c,e,f){var g,h,i,l,m;(b.isTarget||c)&&E.CurrentLibrary.isDropSupported(j)&&(g=b.dropOptions||t.Defaults.DropOptions||E.Defaults.DropOptions,g=E.extend({},g),g.scope=g.scope||d.scope,h=E.CurrentLibrary.dragEvents.drop,i=E.CurrentLibrary.dragEvents.over,l=E.CurrentLibrary.dragEvents.out,m=function(){var j,m,n,o,q,r,a=E.CurrentLibrary.getDropEvent(arguments),b=p(E.CurrentLibrary.getDragObject(arguments)),c=k(b,"dragId"),g=(k(b,"elId"),k(b,"originalScope")),h=N[c],i=h.suspendedEndpoint&&(h.suspendedEndpoint.id==d.id||d.referenceEndpoint&&h.suspendedEndpoint.id==d.referenceEndpoint.id);return i?(h._forceReattach=!0,void 0):(null!=h&&(j=null==h.floatingAnchorIndex?1:h.floatingAnchorIndex,g&&E.CurrentLibrary.setDragScope(b,g),m=null!=f?f.isEnabled():!0,d.isFull()&&d.fire("maxConnections",{endpoint:d,connection:h,maxConnections:C},a),d.isFull()||0==j&&!d.isSource||1==j&&!d.isTarget||!m||(n=!0,h.suspendedEndpoint&&h.suspendedEndpoint.id!=d.id&&(0==j?(h.source=h.suspendedEndpoint.element,h.sourceId=h.suspendedEndpoint.elementId):(h.target=h.suspendedEndpoint.element,h.targetId=h.suspendedEndpoint.elementId),h.isDetachAllowed(h)&&h.endpoints[j].isDetachAllowed(h)&&h.suspendedEndpoint.isDetachAllowed(h)&&t.checkCondition("beforeDetach",h)||(n=!1)),0==j?(h.source=d.element,h.sourceId=d.elementId):(h.target=d.element,h.targetId=d.elementId),o=function(){h.floatingAnchorIndex=null},q=function(){var b,c,e,f;h.endpoints[j].detachFromConnection(h),h.suspendedEndpoint&&h.suspendedEndpoint.detachFromConnection(h),h.endpoints[j]=d,d.addConnection(h),b=d.getParameters();for(c in b)h.setParameter(c,b[c]);h.suspendedEndpoint?(e=h.suspendedEndpoint.getElement(),f=h.suspendedEndpoint.elementId,sb({source:0==j?e:h.source,target:1==j?e:h.target,sourceId:0==j?f:h.sourceId,targetId:1==j?f:h.targetId,sourceEndpoint:0==j?h.suspendedEndpoint:h.endpoints[0],targetEndpoint:1==j?h.suspendedEndpoint:h.endpoints[1],connection:h},!0,a)):b.draggable&&E.CurrentLibrary.initDraggable(d.element,W,!0),cb(h,null,a),o()},r=function(){h.suspendedEndpoint&&(h.endpoints[j]=h.suspendedEndpoint,h.setHover(!1),h._forceDetach=!0,0==j?(h.source=h.suspendedEndpoint.element,h.sourceId=h.suspendedEndpoint.elementId):(h.target=h.suspendedEndpoint.element,h.targetId=h.suspendedEndpoint.elementId),h.suspendedEndpoint.addConnection(h),h.endpoints[0].repaint(),h.repaint(),t.repaint(h.source.elementId),h._forceDetach=!1),o()},n=n&&d.isDropAllowed(h.sourceId,h.targetId,h.scope,h,d),n?q():r()),t.currentlyDragging=!1,delete N[c],h.suspendedEndpoint=null),void 0)},g[h]=rb(g[h],m),g[i]=rb(g[i],function(){var e,f,a=E.CurrentLibrary.getDragObject(arguments),b=k(p(a),"dragId"),c=N[b];null!=c&&(e=null==c.floatingAnchorIndex?1:c.floatingAnchorIndex,f=d.isTarget&&0!=c.floatingAnchorIndex||c.suspendedEndpoint&&d.referenceEndpoint&&d.referenceEndpoint.id==c.suspendedEndpoint.id,f&&c.endpoints[e].anchor.over(d.anchor))}),g[l]=rb(g[l],function(){var e,f,a=E.CurrentLibrary.getDragObject(arguments),b=k(p(a),"dragId"),c=N[b];null!=c&&(e=null==c.floatingAnchorIndex?1:c.floatingAnchorIndex,f=d.isTarget&&0!=c.floatingAnchorIndex||c.suspendedEndpoint&&d.referenceEndpoint&&d.referenceEndpoint.id==c.suspendedEndpoint.id,f&&c.endpoints[e].anchor.out())}),E.CurrentLibrary.initDroppable(a,g,!0,e))},ab(p(d.canvas),!0,!(b._transient||d.anchor.isFloating),d),b.type&&d.addType(b.type),d}},E=new D;"undefined"!=typeof window&&(window.jsPlumb=E),E.getInstance=function(a){var b=new D(a);return b.init(),b},"function"==typeof define&&define.amd&&define.amd.jsPlumb&&define("jsplumb",[],function(){return E}),F=function(a,b,c,d,e,f){return function(g){g=g||{};var h=g.jsPlumbInstance.makeAnchor([a,b,c,d,0,0],g.elementId,g.jsPlumbInstance);return h.type=e,f&&f(h,g),h}},E.Anchors.TopCenter=F(.5,0,0,-1,"TopCenter"),E.Anchors.BottomCenter=F(.5,1,0,1,"BottomCenter"),E.Anchors.LeftMiddle=F(0,.5,-1,0,"LeftMiddle"),E.Anchors.RightMiddle=F(1,.5,1,0,"RightMiddle"),E.Anchors.Center=F(.5,.5,0,0,"Center"),E.Anchors.TopRight=F(1,0,0,-1,"TopRight"),E.Anchors.BottomRight=F(1,1,0,1,"BottomRight"),E.Anchors.TopLeft=F(0,0,0,-1,"TopLeft"),E.Anchors.BottomLeft=F(0,1,0,1,"BottomLeft"),E.Defaults.DynamicAnchors=function(a){return a.jsPlumbInstance.makeAnchors(["TopCenter","RightMiddle","BottomCenter","LeftMiddle"],a.elementId,a.jsPlumbInstance)},E.Anchors.AutoDefault=function(a){var b=a.jsPlumbInstance.makeDynamicAnchor(E.Defaults.DynamicAnchors(a));return b.type="AutoDefault",b},E.Anchors.Assign=F(0,0,0,0,"Assign",function(a,b){var c=b.position||"Fixed";a.positionFinder=c.constructor==String?b.jsPlumbInstance.AnchorPositionFinders[c]:c,a.constructorParams=b}),E.Anchors.Continuous=function(a){return a.jsPlumbInstance.continuousAnchorFactory.get(a)},E.AnchorPositionFinders={Fixed:function(a,b,c){return[(a.left-b.left)/c[0],(a.top-b.top)/c[1]]},Grid:function(a,b,c,d){var e=a.left-b.left,f=a.top-b.top,g=c[0]/d.grid[0],h=c[1]/d.grid[1],i=Math.floor(e/g),j=Math.floor(f/h);return[(i*g+g/2)/c[0],(j*h+h/2)/c[1]]}},E.Anchors.Perimeter=function(a){var b,c,d,e,f,g,h,i,j,k;if(a=a||{},b=a.anchorCount||60,c=a.shape,!c)throw new Error("no shape supplied to Perimeter Anchor type");if(d=function(){var f,g,h,a=.5,c=2*Math.PI/b,d=0,e=[];for(f=0;b>f;f++)g=a+a*Math.sin(d),h=a+a*Math.cos(d),e.push([g,h,0,0]),d+=c;return e},e=function(a){var f,c=b/a.length,d=[],e=function(a,e,f,g,h){var i,j,k;for(c=b*h,i=(f-a)/c,j=(g-e)/c,k=0;c>k;k++)d.push([a+i*k,e+j*k,0,0])};for(f=0;f<a.length;f++)e.apply(null,a[f]);return d},f=function(a){var c,b=[];for(c=0;c<a.length;c++)b.push([a[c][0],a[c][1],a[c][2],a[c][3],1/a.length]);return e(b)},g=function(){return f([[0,0,1,0],[1,0,1,1],[1,1,0,1],[0,1,0,0]])},h={circle:d,ellipse:d,diamond:function(){return f([[.5,0,1,.5],[1,.5,.5,1],[.5,1,0,.5],[0,.5,.5,0]])},rectangle:g,square:g,triangle:function(){return f([[.5,0,1,1],[1,1,0,1],[0,1,.5,0]])},path:function(a){var f,g,b=a.points,c=[],d=0;for(f=0;f<b.length-1;f++)g=Math.sqrt(Math.pow(b[f][2]-b[f][0])+Math.pow(b[f][3]-b[f][1])),d+=g,c.push([b[f][0],b[f][1],b[f+1][0],b[f+1][1],g]);for(f=0;f<c.length;f++)c[f][4]=c[f][4]/d;return e(c)}},i=function(a,b){var e,f,g,c=[],d=b/180*Math.PI;for(e=0;e<a.length;e++)f=a[e][0]-.5,g=a[e][1]-.5,c.push([.5+(f*Math.cos(d)-g*Math.sin(d)),.5+(f*Math.sin(d)+g*Math.cos(d)),a[e][2],a[e][3]]);return c},!h[c])throw new Error("Shape ["+c+"] is unknown by Perimeter Anchor type");return j=h[c](a),a.rotation&&(j=i(j,a.rotation)),k=a.jsPlumbInstance.makeDynamicAnchor(j),k.type="Perimeter",k}}(),function(){var a,b,c;jsPlumb.DOMElementComponent=function(){jsPlumb.jsPlumbUIComponent.apply(this,arguments),this.mousemove=this.dblclick=this.click=this.mousedown=this.mouseup=function(){}},jsPlumb.Connectors.Straight=function(){this.type="Straight";var c,d,e,f,g,h,i,j,k,l,m,o,a=this,b=null;this.compute=function(a,n,p,q,r,s,t,u){var z,A,B,v=Math.abs(a[0]-n[0]),w=Math.abs(a[1]-n[1]),x=.45*v,y=.45*w;return v*=1.9,w*=1.9,z=Math.min(a[0],n[0])-x,A=Math.min(a[1],n[1])-y,B=Math.max(2*t,u),B>v&&(v=B,z=a[0]+(n[0]-a[0])/2-B/2,x=(v-Math.abs(a[0]-n[0]))/2),B>w&&(w=B,A=a[1]+(n[1]-a[1])/2-B/2,y=(w-Math.abs(a[1]-n[1]))/2),j=a[0]<n[0]?x:v-x,k=a[1]<n[1]?y:w-y,l=a[0]<n[0]?v-x:x,m=a[1]<n[1]?w-y:y,b=[z,A,v,w,j,k,l,m],f=l-j,g=m-k,c=jsPlumbUtil.gradient({x:j,y:k},{x:l,y:m}),d=-1/c,e=-1*(c*j-k),h=Math.atan(c),i=Math.atan(d),o=Math.sqrt(f*f+g*g),b},this.pointOnPath=function(a,b){if(0!=a||b){if(1!=a||b){var c=b?a>0?a:o+a:a*o;return jsPlumbUtil.pointOnLine({x:j,y:k},{x:l,y:m},c)}return{x:l,y:m}}return{x:j,y:k}},this.gradientAtPoint=function(){return c},this.pointAlongPathFrom=function(b,c,d){var e=a.pointOnPath(b,d),f=1==b?{x:j+10*(l-j),y:k+10*(k-m)}:0>=c?{x:j,y:k}:{x:l,y:m};return 0>=c&&Math.abs(c)>1&&(c*=-1),jsPlumbUtil.pointOnLine(e,f,c)}},jsPlumb.Connectors.Bezier=function(a){var c,d,e,f,g,h,i,j,k,l,m,r,s,b=this;a=a||{},this.majorAnchor=a.curviness||150,this.minorAnchor=10,c=null,this.type="Bezier",this._findControlPoint=function(a,c,d,e,f,g,h){var i=g.getOrientation(e),j=h.getOrientation(f),k=i[0]!=j[0]||i[1]==j[1],l=[],m=b.majorAnchor,n=b.minorAnchor;return k?(0==j[0]?l.push(d[0]<c[0]?a[0]+n:a[0]-n):l.push(a[0]+m*j[0]),0==j[1]?l.push(d[1]<c[1]?a[1]+n:a[1]-n):l.push(a[1]+m*i[1])):(0==i[0]?l.push(c[0]<d[0]?a[0]+n:a[0]-n):l.push(a[0]-m*i[0]),0==i[1]?l.push(c[1]<d[1]?a[1]+n:a[1]-n):l.push(a[1]+m*j[1])),l},this.compute=function(a,n,o,p,q,r,s,t){var u,v,w,x,y,z,A,B,C,D,E,F,G,H,I;return s=Math.max(t,s||0),l=Math.abs(a[0]-n[0])+s,m=Math.abs(a[1]-n[1])+s,j=Math.min(a[0],n[0])-s/2,k=Math.min(a[1],n[1])-s/2,f=a[0]<n[0]?l-s/2:s/2,i=a[1]<n[1]?m-s/2:s/2,g=a[0]<n[0]?s/2:l-s/2,h=a[1]<n[1]?s/2:m-s/2,d=b._findControlPoint([f,i],a,n,o,p,q,r),e=b._findControlPoint([g,h],n,a,p,o,r,q),u=Math.min(f,g),v=Math.min(d[0],e[0]),w=Math.min(u,v),x=Math.max(f,g),y=Math.max(d[0],e[0]),z=Math.max(x,y),z>l&&(l=z),0>w&&(j+=w,A=Math.abs(w),l+=A,d[0]+=A,f+=A,g+=A,e[0]+=A),B=Math.min(i,h),C=Math.min(d[1],e[1]),D=Math.min(B,C),E=Math.max(i,h),F=Math.max(d[1],e[1]),G=Math.max(E,F),G>m&&(m=G),0>D&&(k+=D,H=Math.abs(D),m+=H,d[1]+=H,i+=H,h+=H,e[1]+=H),t&&t>l&&(I=(t-l)/2,l=t,j-=I,f+=I,g+=I,d[0]=d[0]+I,e[0]=e[0]+I),t&&t>m&&(I=(t-m)/2,m=t,k-=I,i+=I,h+=I,d[1]=d[1]+I,e[1]=e[1]+I),c=[j,k,l,m,f,i,g,h,d[0],d[1],e[0],e[1]]},r=function(){return[{x:f,y:i},{x:d[0],y:d[1]},{x:e[0],y:e[1]},{x:g,y:h}]},s=function(a,b,c){return c&&(b=jsBezier.locationAlongCurveFrom(a,b>0?0:1,b)),b},this.pointOnPath=function(a,b){var c=r();return a=s(c,a,b),jsBezier.pointOnCurve(c,a)},this.gradientAtPoint=function(a,b){var c=r();return a=s(c,a,b),jsBezier.gradientAtPoint(c,a)},this.pointAlongPathFrom=function(a,b,c){var d=r();return a=s(d,a,c),jsBezier.pointAlongCurveFrom(d,a,b)}},jsPlumb.Connectors.Flowchart=function(a){this.type="Flowchart",a=a||{};var m,n,b=this,c=a.stub||a.minStubLength||30,d=jsPlumbUtil.isArray(c)?c[0]:c,e=jsPlumbUtil.isArray(c)?c[1]:c,f=a.gap||0,g=a.midpoint||.5,h=[],i=0,j=[],k=[],l=[],o=-1/0,p=-1/0,q=1/0,r=1/0,v=(a.grid,function(){var f,e=0;for(f=0;f<h.length;f++)k[f]=h[f][5]/i,j[f]=[e,e+=h[f][5]/i]}),w=function(){l.push(h.length);for(var a=0;a<h.length;a++)l.push(h[a][0]),l.push(h[a][1])},x=function(a,b,c,d){var g=0==h.length?c:h[h.length-1][0],j=0==h.length?d:h[h.length-1][1],k=a==g?1/0:0,l=Math.abs(a==g?b-j:a-g);h.push([a,b,g,j,k,l]),i+=l,o=Math.max(o,a),p=Math.max(p,b),q=Math.min(q,a),r=Math.min(r,b)},y=function(a,b){var c,d,e;for(b&&(a=a>0?a/i:(i+a)/i),c=j.length-1,d=1,e=0;e<j.length;e++)if(j[e][1]>=a){c=e,d=(a-j[e][0])/k[e];break}return{segment:h[c],proportion:d,index:c}};this.compute=function(a,c,s,t,u,y,z,A,B){var D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,db,fb,gb,hb,ib,jb,lb,mb,nb;if(h=[],j=[],i=0,k=[],o=p=-1/0,q=r=1/0,b.lineWidth=z,m=c[0]<a[0],n=c[1]<a[1],D=z||1,E=D/2+(d+e),F=D/2+(e+d),G=D/2+(d+e),H=D/2+(e+d),I=u.orientation||u.getOrientation(s),J=y.orientation||y.getOrientation(t),K=m?c[0]:a[0],L=n?c[1]:a[1],M=Math.abs(c[0]-a[0])+E+F,N=Math.abs(c[1]-a[1])+G+H,(0==I[0]&&0==I[1]||0==J[0]&&0==J[1])&&(O=M>N?0:1,P=[1,0][O],I=[],J=[],I[O]=a[O]>c[O]?-1:1,J[O]=a[O]>c[O]?1:-1,I[P]=0,J[P]=0),Q=m?M-F+f*I[0]:E+f*I[0],R=n?N-H+f*I[1]:G+f*I[1],S=m?E+f*J[0]:M-F+f*J[0],T=n?G+f*J[1]:N-H+f*J[1],U=Q+I[0]*d,V=R+I[1]*d,W=S+J[0]*e,X=T+J[1]*e,Y=Math.abs(Q-S)>d+e,Z=Math.abs(R-T)>d+e,$=U+(W-U)*g,_=V+(X-V)*g,ab=I[0]*J[0]+I[1]*J[1],bb=-1==ab,db=1==ab,K-=E,L-=G,l=[K,L,M,N,Q,R,S,T],fb=0==I[0]?"y":"x",gb=bb?"opposite":db?"orthogonal":"perpendicular",hb=jsPlumbUtil.segment([Q,R],[S,T]),ib=-1==I["x"==fb?0:1],jb={x:[null,4,3,2,1],y:[null,2,1,4,3]},ib&&(hb=jb[fb][hb]),x(U,V,Q,R,S,T),lb={oppositex:function(){if(s.elementId==t.elementId){var a=V+(1-u.y)*B.height+Math.max(d,e);return[[U,a],[W,a]]}return!Y||1!=hb&&2!=hb?[[U,_],[W,_]]:[[$,R],[$,T]]},orthogonalx:function(){return 1==hb||2==hb?[[W,V]]:[[U,X]]},perpendicularx:function(){var a=(T+R)/2;return 1==hb&&1==J[1]||2==hb&&-1==J[1]?Math.abs(S-Q)>Math.max(d,e)?[[W,V]]:[[U,V],[U,a],[W,a]]:3==hb&&-1==J[1]||4==hb&&1==J[1]?[[U,a],[W,a]]:3==hb&&1==J[1]||4==hb&&-1==J[1]?[[U,X]]:1==hb&&-1==J[1]||2==hb&&1==J[1]?Math.abs(S-Q)>Math.max(d,e)?[[$,V],[$,X]]:[[U,X]]:void 0},oppositey:function(){if(s.elementId==t.elementId){var a=U+(1-u.x)*B.width+Math.max(d,e);return[[a,V],[a,X]]}return!Z||2!=hb&&3!=hb?[[$,V],[$,X]]:[[Q,_],[S,_]]},orthogonaly:function(){return 2==hb||3==hb?[[U,X]]:[[W,V]]},perpendiculary:function(){var a=(S+Q)/2;return 2==hb&&-1==J[0]||3==hb&&1==J[0]?Math.abs(S-Q)>Math.max(d,e)?[[U,X]]:[[U,_],[W,_]]:1==hb&&-1==J[0]||4==hb&&1==J[0]?(a=(S+Q)/2,[[a,V],[a,X]]):1==hb&&1==J[0]||4==hb&&-1==J[0]?[[W,V]]:2==hb&&1==J[0]||3==hb&&-1==J[0]?Math.abs(T-R)>Math.max(d,e)?[[U,_],[W,_]]:[[W,V]]:void 0}},mb=lb[gb+fb]())for(nb=0;nb<mb.length;nb++)x(mb[nb][0],mb[nb][1],Q,R,S,T);return x(W,X,Q,R,S,T),x(S,T,Q,R,S,T),w(),v(Q,R,S,T),p>l[3]&&(l[3]=p+2*z),o>l[2]&&(l[2]=o+2*z),l},this.pointOnPath=function(a,c){return b.pointAlongPathFrom(a,0,c)},this.gradientAtPoint=function(a,b){return h[y(a,b)["index"]][4]},this.pointAlongPathFrom=function(a,b,c){var d=y(a,c),e=d.segment,f=d.proportion,g=h[d.index][5],i=h[d.index][4],j={x:1/0==i?e[2]:e[2]>e[0]?e[0]+(1-f)*g-b:e[2]+f*g+b,y:0==i?e[3]:e[3]>e[1]?e[1]+(1-f)*g-b:e[3]+f*g+b,segmentInfo:d};return j}},jsPlumb.Endpoints.Dot=function(a){this.type="Dot";var b=this;a=a||{},this.radius=a.radius||10,this.defaultOffset=.5*this.radius,this.defaultInnerRadius=this.radius/3,this.compute=function(a,c,d){var f=d.radius||b.radius,g=a[0]-f,h=a[1]-f;return[g,h,2*f,2*f,f]}},jsPlumb.Endpoints.Rectangle=function(a){this.type="Rectangle";var b=this;a=a||{},this.width=a.width||20,this.height=a.height||20,this.compute=function(a,c,d){var f=d.width||b.width,g=d.height||b.height,h=a[0]-f/2,i=a[1]-g/2;return[h,i,f,g]}},a=function(){jsPlumb.DOMElementComponent.apply(this,arguments);var c=[];this.getDisplayElements=function(){return c},this.appendDisplayElement=function(a){c.push(a)}},jsPlumb.Endpoints.Image=function(b){var c,d,e,f,g,h,i,j,k;this.type="Image",a.apply(this,arguments),c=this,d=!1,e=!1,f=b.width,g=b.height,h=null,i=b.endpoint,this.img=new Image,c.ready=!1,this.img.onload=function(){c.ready=!0,f=f||c.img.width,g=g||c.img.height,h&&h(c)},i.setImage=function(a,b){a.constructor==String?a:a.src,h=b,c.img.src=a,null!=c.canvas&&c.canvas.setAttribute("src",a)},i.setImage(b.src||b.url,b.onload),this.compute=function(a){return c.anchorPoint=a,c.ready?[a[0]-f/2,a[1]-g/2,f,g]:[0,0,0,0]},c.canvas=document.createElement("img"),d=!1,c.canvas.style.margin=0,c.canvas.style.padding=0,c.canvas.style.outline=0,c.canvas.style.position="absolute",j=b.cssClass?" "+b.cssClass:"",c.canvas.className=jsPlumb.endpointClass+j,f&&c.canvas.setAttribute("width",f),g&&c.canvas.setAttribute("height",g),jsPlumb.appendElement(c.canvas,b.parent),c.attachListeners(c.canvas,c),c.cleanup=function(){e=!0},k=function(){if(!e){d||(c.canvas.setAttribute("src",c.img.src),c.appendDisplayElement(c.canvas),d=!0);var i=c.anchorPoint[0]-f/2,j=c.anchorPoint[1]-g/2;jsPlumb.sizeCanvas(c.canvas,i,j,f,g)}},this.paint=function(a,b,d){c.ready?k(a,b,d):window.setTimeout(function(){c.paint(a,b,d)},200)}},jsPlumb.Endpoints.Blank=function(b){var c=this;this.type="Blank",a.apply(this,arguments),this.compute=function(a){return[a[0],a[1],10,0]},c.canvas=document.createElement("div"),c.canvas.style.display="block",c.canvas.style.width="1px",c.canvas.style.height="1px",c.canvas.style.background="transparent",c.canvas.style.position="absolute",c.canvas.className=c._jsPlumb.endpointClass,jsPlumb.appendElement(c.canvas,b.parent),this.paint=function(a){jsPlumb.sizeCanvas(c.canvas,a[0],a[1],a[2],a[3])}},jsPlumb.Endpoints.Triangle=function(a){this.type="Triangle",a=a||{},a.width=a.width||55,a.height=a.height||55,this.width=a.width,this.height=a.height,this.compute=function(a,b,c){var e=c.width||self.width,f=c.height||self.height,g=a[0]-e/2,h=a[1]-f/2;return[g,h,e,f]}},b=function(a){var b=!0,c=this;this.isAppendedAtTopLevel=!0,this.component=a.component,this.loc=null==a.location?.5:a.location,this.endpointLoc=null==a.endpointLocation?[.5,.5]:a.endpointLocation,this.setVisible=function(a){b=a,c.component.repaint()},this.isVisible=function(){return b},this.hide=function(){c.setVisible(!1)},this.show=function(){c.setVisible(!0)},this.incrementLocation=function(a){c.loc+=a,c.component.repaint()},this.setLocation=function(a){c.loc=a,c.component.repaint()},this.getLocation=function(){return c.loc}},jsPlumb.Overlays.Arrow=function(a){var c,d,e,f;this.type="Arrow",b.apply(this,arguments),this.isAppendedAtTopLevel=!1,a=a||{},c=this,this.length=a.length||20,this.width=a.width||20,this.id=a.id,d=(a.direction||1)<0?-1:1,e=a.paintStyle||{lineWidth:1},f=a.foldback||.623,this.computeMaxSize=function(){return 1.5*c.width},this.cleanup=function(){},this.draw=function(a,b,g){var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;return a.pointAlongPathFrom?(jsPlumbUtil.isString(c.loc)||c.loc>1||c.loc<0?(m=parseInt(c.loc),h=a.pointAlongPathFrom(m,d*c.length/2,!0),i=a.pointOnPath(m,!0),j=jsPlumbUtil.pointOnLine(h,i,c.length)):1==c.loc?(h=a.pointOnPath(c.loc),i=a.pointAlongPathFrom(c.loc,-1),j=jsPlumbUtil.pointOnLine(h,i,c.length),-1==d&&(n=j,j=h,h=n)):0==c.loc?(j=a.pointOnPath(c.loc),i=a.pointAlongPathFrom(c.loc,1),h=jsPlumbUtil.pointOnLine(j,i,c.length),-1==d&&(n=j,j=h,h=n)):(h=a.pointAlongPathFrom(c.loc,d*c.length/2),i=a.pointOnPath(c.loc),j=jsPlumbUtil.pointOnLine(h,i,c.length)),k=jsPlumbUtil.perpendicularLineTo(h,j,c.width),l=jsPlumbUtil.pointOnLine(h,j,f*c.length),o=Math.min(h.x,k[0].x,k[1].x),p=Math.max(h.x,k[0].x,k[1].x),q=Math.min(h.y,k[0].y,k[1].y),r=Math.max(h.y,k[0].y,k[1].y),s={hxy:h,tail:k,cxy:l},t=e.strokeStyle||b.strokeStyle,u=e.fillStyle||b.strokeStyle,v=e.lineWidth||b.lineWidth,c.paint(a,s,v,t,u,g),[o,p,q,r]):[0,0,0,0]}},jsPlumb.Overlays.PlainArrow=function(a){a=a||{};var b=jsPlumb.extend(a,{foldback:1});jsPlumb.Overlays.Arrow.call(this,b),this.type="PlainArrow"},jsPlumb.Overlays.Diamond=function(a){a=a||{};var b=a.length||40,c=jsPlumb.extend(a,{length:b/2,foldback:2});jsPlumb.Overlays.Arrow.call(this,c),this.type="Diamond"},c=function(a){var c,d,e,f,g,h,i;jsPlumb.DOMElementComponent.apply(this,arguments),b.apply(this,arguments),c=this,d=!1,a=a||{},this.id=a.id,f=function(){e=a.create(a.component),e=jsPlumb.CurrentLibrary.getDOMElement(e),e.style.position="absolute";var b=a._jsPlumb.overlayClass+" "+(c.cssClass?c.cssClass:a.cssClass?a.cssClass:"");e.className=b,jsPlumb.appendElement(e,a.component.parent),a._jsPlumb.getId(e),c.attachListeners(e,c),c.canvas=e},this.getElement=function(){return null==e&&f(),e},this.getDimensions=function(){return jsPlumb.CurrentLibrary.getSize(jsPlumb.CurrentLibrary.getElementObject(c.getElement()))},g=null,h=function(){return null==g&&(g=c.getDimensions()),g},this.clearCachedDimensions=function(){g=null},this.computeMaxSize=function(){var a=h();return Math.max(a[0],a[1])},i=c.setVisible,c.setVisible=function(a){i(a),e.style.display=a?"block":"none"},this.cleanup=function(){null!=e&&jsPlumb.CurrentLibrary.removeElement(e)},this.paint=function(a,b,f){d||(c.getElement(),a.appendDisplayElement(e),c.attachListeners(e,a),d=!0),e.style.left=f[0]+b.minx+"px",e.style.top=f[1]+b.miny+"px"},this.draw=function(a,b,d){var f,g,i,j,e=h();return null!=e&&2==e.length?(f={x:0,y:0},a.pointOnPath?(g=c.loc,i=!1,(jsPlumbUtil.isString(c.loc)||c.loc<0||c.loc>1)&&(g=parseInt(c.loc),i=!0),f=a.pointOnPath(g,i)):(j=c.loc.constructor==Array?c.loc:c.endpointLoc,f={x:j[0]*d[2],y:j[1]*d[3]}),minx=f.x-e[0]/2,miny=f.y-e[1]/2,c.paint(a,{minx:minx,miny:miny,td:e,cxy:f},d),[minx,minx+e[0],miny,miny+e[1]]):[0,0,0,0]},this.reattachListeners=function(a){e&&c.reattachListenersForElement(e,c,a)}},jsPlumb.Overlays.Custom=function(){this.type="Custom",c.apply(this,arguments)},jsPlumb.Overlays.Label=function(a){var c,d,e,f,b=this;this.labelStyle=a.labelStyle||jsPlumb.Defaults.LabelStyle,this.cssClass=null!=this.labelStyle?this.labelStyle.cssClass:null,a.create=function(){return document.createElement("div")},jsPlumb.Overlays.Custom.apply(this,arguments),this.type="Label",c=a.label||"",b=this,d=null,this.setLabel=function(a){c=a,d=null,b.clearCachedDimensions(),e(),b.component.repaint()},e=function(){if("function"==typeof c){var a=c(b);b.getElement().innerHTML=a.replace(/\r\n/g,"<br/>")}else null==d&&(d=c,b.getElement().innerHTML=d.replace(/\r\n/g,"<br/>"))},this.getLabel=function(){return c},f=this.getDimensions,this.getDimensions=function(){return e(),f()}}}(),function(){var b=function(a,b,c,d){return c>=a&&b>=d?1:c>=a&&d>=b?2:a>=c&&d>=b?3:4},c=function(a,b,c,d,e,f,g,h,i){return i>=h?[a,b]:1==c?d[3]<=0&&e[3]>=1?[a+(d[2]<.5?-1*f:f),b]:d[2]>=1&&e[2]<=0?[a,b+(d[3]<.5?-1*g:g)]:[a+-1*f,b+-1*g]:2==c?d[3]>=1&&e[3]<=0?[a+(d[2]<.5?-1*f:f),b]:d[2]>=1&&e[2]<=0?[a,b+(d[3]<.5?-1*g:g)]:[a+1*f,b+-1*g]:3==c?d[3]>=1&&e[3]<=0?[a+(d[2]<.5?-1*f:f),b]:d[2]<=0&&e[2]>=1?[a,b+(d[3]<.5?-1*g:g)]:[a+-1*f,b+-1*g]:4==c?d[3]<=0&&e[3]>=1?[a+(d[2]<.5?-1*f:f),b]:d[2]<=0&&e[2]>=1?[a,b+(d[3]<.5?-1*g:g)]:[a+1*f,b+-1*g]:void 0};jsPlumb.Connectors.StateMachine=function(a){var f,g,h,i,r,s,e=null,j=[],k=a.curviness||10,l=a.margin||5,m=a.proximityLimit||80,n=a.orientation&&"clockwise"==a.orientation,o=a.loopbackRadius||25,p=!1,q=a.showLoopback!==!1;this.type="StateMachine",a=a||{},this.compute=function(a,d,r,s,t,u,v,w){var B,C,D,E,F,G,J,K,L,M,N,O,P,Q,R,S,T,U,x=Math.abs(a[0]-d[0]),y=Math.abs(a[1]-d[1]),z=.45*x,A=.45*y;return x*=1.9,y*=1.9,v=v||1,B=Math.min(a[0],d[0])-z,C=Math.min(a[1],d[1])-A,q&&r.elementId==s.elementId?(p=!0,P=a[0],Q=a[0],R=a[1]-l,S=a[1]-l,T=P,U=R-o,x=2*v+4*o,y=2*v+4*o,B=T-o-v-o,C=U-o-v-o,e=[B,C,x,y,T-B,U-C,o,n,P-B,R-C,Q-B,S-C]):(p=!1,f=a[0]<d[0]?z:x-z,g=a[1]<d[1]?A:y-A,h=a[0]<d[0]?x-z:z,i=a[1]<d[1]?y-A:A,0==a[2]&&(f-=l),1==a[2]&&(f+=l),0==a[3]&&(g-=l),1==a[3]&&(g+=l),0==d[2]&&(h-=l),1==d[2]&&(h+=l),0==d[3]&&(i-=l),1==d[3]&&(i+=l),D=(f+h)/2,E=(g+i)/2,F=-1*D/E,G=Math.atan(F),1/0==F||F==-1/0?0:Math.abs(k/2*Math.sin(G)),1/0==F||F==-1/0?0:Math.abs(k/2*Math.cos(G)),J=b(f,g,h,i),K=Math.sqrt(Math.pow(h-f,2)+Math.pow(i-g,2)),j=c(D,E,J,a,d,k,k,K,m),L=Math.max(3*Math.abs(j[0]-f),3*Math.abs(j[0]-h),Math.abs(h-f),2*v,w),M=Math.max(3*Math.abs(j[1]-g),3*Math.abs(j[1]-i),Math.abs(i-g),2*v,w),L>x&&(N=L-x,B-=N/2,f+=N/2,h+=N/2,x=L,j[0]+=N/2),M>y&&(O=M-y,C-=O/2,g+=O/2,i+=O/2,y=M,j[1]+=O/2),e=[B,C,x,y,f,g,h,i,j[0],j[1]]),e},r=function(){return[{x:h,y:i},{x:j[0],y:j[1]},{x:j[0]+1,y:j[1]+1},{x:f,y:g}]},s=function(a,b,c){return c&&(b=jsBezier.locationAlongCurveFrom(a,b>0?0:1,b)),b},this.pointOnPath=function(a,b){var c,d,f,g,h;return p?(b&&(c=2*Math.PI*o,a/=c),a>0&&1>a&&(a=1-a),d=2*a*Math.PI+Math.PI/2,f=e[4]+e[6]*Math.cos(d),g=e[5]+e[6]*Math.sin(d),{x:f,y:g}):(h=r(),a=s(h,a,b),jsBezier.pointOnCurve(h,a))},this.gradientAtPoint=function(a,b){var c,d;return p?(b&&(c=2*Math.PI*o,a/=c),Math.atan(2*a*Math.PI)):(d=r(),a=s(d,a,b),jsBezier.gradientAtPoint(d,a))},this.pointAlongPathFrom=function(a,b,c){var d,f,g,h,i,j;return p?(c&&(d=2*Math.PI*o,a/=d),a>0&&1>a&&(a=1-a),d=2*Math.PI*e[6],f=2*(b/d)*Math.PI,g=2*a*Math.PI-f+Math.PI/2,h=e[4]+e[6]*Math.cos(g),i=e[5]+e[6]*Math.sin(g),{x:h,y:i}):(j=r(),a=s(j,a,c),jsBezier.pointAlongCurveFrom(j,a,b))}},jsPlumb.Connectors.canvas.StateMachine=function(a){a=a||{};var b=this;a.drawGuideline||!0,a.avoidSelector,jsPlumb.Connectors.StateMachine.apply(this,arguments),jsPlumb.CanvasConnector.apply(this,arguments),this._paint=function(a){if(10==a.length)b.ctx.beginPath(),b.ctx.moveTo(a[4],a[5]),b.ctx.bezierCurveTo(a[8],a[9],a[8],a[9],a[6],a[7]),b.ctx.stroke();else{b.ctx.save(),b.ctx.beginPath();var d=2*Math.PI,e=a[7];b.ctx.arc(a[4],a[5],a[6],0,d,e),b.ctx.stroke(),b.ctx.closePath(),b.ctx.restore()}},this.createGradient=function(a,b){return b.createLinearGradient(a[4],a[5],a[6],a[7])}},jsPlumb.Connectors.svg.StateMachine=function(){jsPlumb.Connectors.StateMachine.apply(this,arguments),jsPlumb.SvgConnector.apply(this,arguments),this.getPath=function(a){return 10==a.length?"M "+a[4]+" "+a[5]+" C "+a[8]+" "+a[9]+" "+a[8]+" "+a[9]+" "+a[6]+" "+a[7]:"M"+(a[8]+4)+" "+a[9]+" A "+a[6]+" "+a[6]+" 0 1,0 "+(a[8]-4)+" "+a[9]}},jsPlumb.Connectors.vml.StateMachine=function(){jsPlumb.Connectors.StateMachine.apply(this,arguments),jsPlumb.VmlConnector.apply(this,arguments);var a=jsPlumb.vml.convertValue;this.getPath=function(b){var c,d,e,f,g,h;return 10==b.length?"m"+a(b[4])+","+a(b[5])+" c"+a(b[8])+","+a(b[9])+","+a(b[8])+","+a(b[9])+","+a(b[6])+","+a(b[7])+" e":(c=a(b[8]-b[6]),d=a(b[9]-2*b[6]),e=c+a(2*b[6]),f=d+a(2*b[6]),g=c+","+d+","+e+","+f,h="ar "+g+","+a(b[8])+","+a(b[9])+","+a(b[8])+","+a(b[9])+" e")}}}(),function(){var c,d,e,f,i,j,k,l,m,n,o,p,q,r,a={"stroke-linejoin":"joinstyle",joinstyle:"joinstyle",endcap:"endcap",miterlimit:"miterlimit"},b=null;if(document.createStyleSheet&&document.namespaces){for(c=[".jsplumb_vml","jsplumb\\:textbox","jsplumb\\:oval","jsplumb\\:rect","jsplumb\\:stroke","jsplumb\\:shape","jsplumb\\:group"],d="behavior:url(#default#VML);position:absolute;",b=document.createStyleSheet(),e=0;e<c.length;e++)b.addRule(c[e],d);document.namespaces.add("jsplumb","urn:schemas-microsoft-com:vml")}jsPlumb.vml={},f=1e3,i=function(a,b){for(var c in b)a[c]=b[c]},j=function(a,b,c,d,e,f){c=c||{};var g=document.createElement("jsplumb:"+a);return f?e.appendElement(g,d):jsPlumb.CurrentLibrary.appendElement(g,d),g.className=(c["class"]?c["class"]+" ":"")+"jsplumb_vml",k(g,b),i(g,c),g},k=function(a,b,c){a.style.left=b[0]+"px",a.style.top=b[1]+"px",a.style.width=b[2]+"px",a.style.height=b[3]+"px",a.style.position="absolute",c&&(a.style.zIndex=c)},l=jsPlumb.vml.convertValue=function(a){return Math.floor(a*f)},m=function(a,b,c,d){"transparent"===b?d.setOpacity(c,"0.0"):d.setOpacity(c,"1.0")},n=function(a,b,c,d){var f,g,h,k,l,n,e={};if(b.strokeStyle?(e.stroked="true",f=jsPlumbUtil.convertStyle(b.strokeStyle,!0),e.strokecolor=f,m(e,f,"stroke",c),e.strokeweight=b.lineWidth+"px"):e.stroked="false",b.fillStyle?(e.filled="true",g=jsPlumbUtil.convertStyle(b.fillStyle,!0),e.fillcolor=g,m(e,g,"fill",c)):e.filled="false",b.dashstyle)null==c.strokeNode?c.strokeNode=j("stroke",[0,0,0,0],{dashstyle:b.dashstyle},a,d):c.strokeNode.dashstyle=b.dashstyle;else if(b["stroke-dasharray"]&&b.lineWidth){for(h=-1==b["stroke-dasharray"].indexOf(",")?" ":",",k=b["stroke-dasharray"].split(h),l="",n=0;n<k.length;n++)l+=Math.floor(k[n]/b.lineWidth)+h;null==c.strokeNode?c.strokeNode=j("stroke",[0,0,0,0],{dashstyle:l},a,d):c.strokeNode.dashstyle=l}i(a,e)},o=function(){var b,a=this;jsPlumb.jsPlumbUIComponent.apply(this,arguments),this.opacityNodes={stroke:null,fill:null},this.initOpacityNodes=function(b){a.opacityNodes.stroke=j("stroke",[0,0,1,1],{opacity:"0.0"},b,a._jsPlumb),a.opacityNodes.fill=j("fill",[0,0,1,1],{opacity:"0.0"},b,a._jsPlumb)},this.setOpacity=function(b,c){var d=a.opacityNodes[b];d&&(d.opacity=""+c)},b=[],this.getDisplayElements=function(){return b},this.appendDisplayElement=function(c,d){d||a.canvas.parentNode.appendChild(c),b.push(c)}},p=jsPlumb.VmlConnector=function(b){var d,c=this;c.strokeNode=null,c.canvas=null,o.apply(this,arguments),d=c._jsPlumb.connectorClass+(b.cssClass?" "+b.cssClass:""),this.paint=function(e,g){var l,m,o,p,q,r;if(null!=g){if(l=c.getPath(e),m={path:l},g.outlineColor){o=g.outlineWidth||1,p=g.lineWidth+2*o,q={strokeStyle:jsPlumbUtil.convertStyle(g.outlineColor),lineWidth:p};for(r in a)q[r]=g[r];null==c.bgCanvas?(m["class"]=d,m.coordsize=e[2]*f+","+e[3]*f,c.bgCanvas=j("shape",e,m,b.parent,c._jsPlumb,!0),k(c.bgCanvas,e,c.getZIndex()),c.appendDisplayElement(c.bgCanvas,!0),c.attachListeners(c.bgCanvas,c),c.initOpacityNodes(c.bgCanvas,["stroke"])):(m.coordsize=e[2]*f+","+e[3]*f,k(c.bgCanvas,e,c.getZIndex()),i(c.bgCanvas,m)),n(c.bgCanvas,q,c)
}null==c.canvas?(m["class"]=d,m.coordsize=e[2]*f+","+e[3]*f,c.tooltip&&(m.label=c.tooltip),c.canvas=j("shape",e,m,b.parent,c._jsPlumb,!0),c.appendDisplayElement(c.canvas,!0),c.attachListeners(c.canvas,c),c.initOpacityNodes(c.canvas,["stroke"])):(m.coordsize=e[2]*f+","+e[3]*f,k(c.canvas,e,c.getZIndex()),i(c.canvas,m)),n(c.canvas,g,c,c._jsPlumb)}},this.reattachListeners=function(){c.canvas&&c.reattachListenersForElement(c.canvas,c)}},q=window.VmlEndpoint=function(a){var b,c,f;o.apply(this,arguments),b=null,c=this,c.canvas=document.createElement("div"),c.canvas.style.position="absolute",f=c._jsPlumb.endpointClass+(a.cssClass?" "+a.cssClass:""),a._jsPlumb.appendElement(c.canvas,a.parent),c.tooltip&&c.canvas.setAttribute("label",c.tooltip),this.paint=function(a,d,e){var g={};jsPlumb.sizeCanvas(c.canvas,a[0],a[1],a[2],a[3]),null==b?(g["class"]=f,b=c.getVml([0,0,a[2],a[3]],g,e,c.canvas,c._jsPlumb),c.attachListeners(b,c),c.appendDisplayElement(b,!0),c.appendDisplayElement(c.canvas,!0),c.initOpacityNodes(b,["fill"])):(k(b,[0,0,a[2],a[3]]),i(b,g)),n(b,d,c)},this.reattachListeners=function(){b&&c.reattachListenersForElement(b,c)}},jsPlumb.Connectors.vml.Bezier=function(){jsPlumb.Connectors.Bezier.apply(this,arguments),p.apply(this,arguments),this.getPath=function(a){return"m"+l(a[4])+","+l(a[5])+" c"+l(a[8])+","+l(a[9])+","+l(a[10])+","+l(a[11])+","+l(a[6])+","+l(a[7])+" e"}},jsPlumb.Connectors.vml.Straight=function(){jsPlumb.Connectors.Straight.apply(this,arguments),p.apply(this,arguments),this.getPath=function(a){return"m"+l(a[4])+","+l(a[5])+" l"+l(a[6])+","+l(a[7])+" e"}},jsPlumb.Connectors.vml.Flowchart=function(){jsPlumb.Connectors.Flowchart.apply(this,arguments),p.apply(this,arguments),this.getPath=function(a){var c,b="m "+l(a[4])+","+l(a[5])+" l";for(c=0;c<a[8];c++)b=b+" "+l(a[9+2*c])+","+l(a[10+2*c]);return b=b+" "+l(a[6])+","+l(a[7])+" e"}},jsPlumb.Endpoints.vml.Dot=function(){jsPlumb.Endpoints.Dot.apply(this,arguments),q.apply(this,arguments),this.getVml=function(a,b,c,d,e){return j("oval",a,b,d,e)}},jsPlumb.Endpoints.vml.Rectangle=function(){jsPlumb.Endpoints.Rectangle.apply(this,arguments),q.apply(this,arguments),this.getVml=function(a,b,c,d,e){return j("rect",a,b,d,e)}},jsPlumb.Endpoints.vml.Image=jsPlumb.Endpoints.Image,jsPlumb.Endpoints.vml.Blank=jsPlumb.Endpoints.Blank,jsPlumb.Overlays.vml.Label=jsPlumb.Overlays.Label,jsPlumb.Overlays.vml.Custom=jsPlumb.Overlays.Custom,r=function(a,b){var c,e;a.apply(this,b),o.apply(this,b),c=this,c.canvas=null,c.isAppendedAtTopLevel=!0,e=function(a){return"m "+l(a.hxy.x)+","+l(a.hxy.y)+" l "+l(a.tail[0].x)+","+l(a.tail[0].y)+" "+l(a.cxy.x)+","+l(a.cxy.y)+" "+l(a.tail[1].x)+","+l(a.tail[1].y)+" x e"},this.paint=function(a,b,d,g,h,l){var n,o,p,q,r,s,t,m={};g&&(m.stroked="true",m.strokecolor=jsPlumbUtil.convertStyle(g,!0)),d&&(m.strokeweight=d+"px"),h&&(m.filled="true",m.fillcolor=h),n=Math.min(b.hxy.x,b.tail[0].x,b.tail[1].x,b.cxy.x),o=Math.min(b.hxy.y,b.tail[0].y,b.tail[1].y,b.cxy.y),p=Math.max(b.hxy.x,b.tail[0].x,b.tail[1].x,b.cxy.x),q=Math.max(b.hxy.y,b.tail[0].y,b.tail[1].y,b.cxy.y),r=Math.abs(p-n),s=Math.abs(q-o),t=[n,o,r,s],m.path=e(b,l),m.coordsize=l[2]*f+","+l[3]*f,t[0]=l[0],t[1]=l[1],t[2]=l[2],t[3]=l[3],null==c.canvas?(c.canvas=j("shape",t,m,a.canvas.parentNode,a._jsPlumb,!0),a.appendDisplayElement(c.canvas,!0),c.attachListeners(c.canvas,a),c.attachListeners(c.canvas,c)):(k(c.canvas,t),i(c.canvas,m))},this.reattachListeners=function(){c.canvas&&c.reattachListenersForElement(c.canvas,c)},this.cleanup=function(){null!=c.canvas&&jsPlumb.CurrentLibrary.removeElement(c.canvas)}},jsPlumb.Overlays.vml.Arrow=function(){r.apply(this,[jsPlumb.Overlays.Arrow,arguments])},jsPlumb.Overlays.vml.PlainArrow=function(){r.apply(this,[jsPlumb.Overlays.PlainArrow,arguments])},jsPlumb.Overlays.vml.Diamond=function(){r.apply(this,[jsPlumb.Overlays.Diamond,arguments])}}(),function(){var y,z,A,B,a={joinstyle:"stroke-linejoin","stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},b="stroke-dasharray",c="dashstyle",d="linearGradient",e="radialGradient",f="fill",g="stop",h="stroke",i="stroke-width",j="style",k="none",l="jsplumb_gradient_",m="lineWidth",n={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml"},o=function(a,b){for(var c in b)a.setAttribute(c,""+b[c])},p=function(a,b){var c=document.createElementNS(n.svg,a);return b=b||{},b.version="1.1",b.xmlns=n.xhtml,o(c,b),c},q=function(a){return"position:absolute;left:"+a[0]+"px;top:"+a[1]+"px"},r=function(a){for(var b=0;b<a.childNodes.length;b++)(a.childNodes[b].tagName==d||a.childNodes[b].tagName==e)&&a.removeChild(a.childNodes[b])},s=function(a,b,c,i,k){var n,o,q,s,t,u,m=l+k._jsPlumb.idstamp();for(r(a),c.gradient.offset?(n=p(e,{id:m}),a.appendChild(n)):(n=p(d,{id:m,gradientUnits:"userSpaceOnUse"}),a.appendChild(n)),o=0;o<c.gradient.stops.length;o++)q=o,q=8==i.length?i[4]<i[6]?o:c.gradient.stops.length-1-o:i[4]<i[6]?c.gradient.stops.length-1-o:o,s=jsPlumbUtil.convertStyle(c.gradient.stops[q][1],!0),t=p(g,{offset:Math.floor(100*c.gradient.stops[o][0])+"%","stop-color":s}),n.appendChild(t);u=c.strokeStyle?h:f,b.setAttribute(j,u+":url(#"+m+")")},t=function(d,e,g,l,n){var o,p,q,t;g.gradient?s(d,e,g,l,n):(r(d),e.setAttribute(j,"")),e.setAttribute(f,g.fillStyle?jsPlumbUtil.convertStyle(g.fillStyle,!0):k),e.setAttribute(h,g.strokeStyle?jsPlumbUtil.convertStyle(g.strokeStyle,!0):k),g.lineWidth&&e.setAttribute(i,g.lineWidth),g[c]&&g[m]&&!g[b]?(o=-1==g[c].indexOf(",")?" ":",",p=g[c].split(o),q="",p.forEach(function(a){q+=Math.floor(a*g.lineWidth)+o}),e.setAttribute(b,q)):g[b]&&e.setAttribute(b,g[b]);for(t in a)g[t]&&e.setAttribute(a[t],g[t])},v=function(a,b,c){var g,h,d=c.split(" "),e=a.className,f=e.baseVal.split(" ");for(g=0;g<d.length;g++)b?-1==f.indexOf(d[g])&&f.push(d[g]):(h=f.indexOf(d[g]),-1!=h&&f.splice(h,1));a.className.baseVal=f.join(" ")},w=function(a,b){v(a,!0,b)},x=function(a,b){v(a,!1,b)};jsPlumbUtil.svg={addClass:w,removeClass:x,node:p,attr:o,pos:q},y=function(a){var d,e,f,b=this,c=a.pointerEventsSpec||"all";jsPlumb.jsPlumbUIComponent.apply(this,a.originalArgs),b.canvas=null,b.path=null,b.svg=null,d=a.cssClass+" "+(a.originalArgs[0].cssClass||""),e={style:"",width:0,height:0,"pointer-events":c,position:"absolute"},b.tooltip&&(e.title=b.tooltip),b.svg=p("svg",e),a.useDivWrapper?(b.canvas=document.createElement("div"),b.canvas.style.position="absolute",jsPlumb.sizeCanvas(b.canvas,0,0,1,1),b.canvas.className=d,b.tooltip&&b.canvas.setAttribute("title",b.tooltip)):(o(b.svg,{"class":d}),b.canvas=b.svg),a._jsPlumb.appendElement(b.canvas,a.originalArgs[0]["parent"]),a.useDivWrapper&&b.canvas.appendChild(b.svg),f=[b.canvas],this.getDisplayElements=function(){return f},this.appendDisplayElement=function(a){f.push(a)},this.paint=function(c,d){var f,g,h;null!=d&&(f=c[0],g=c[1],a.useDivWrapper&&(jsPlumb.sizeCanvas(b.canvas,c[0],c[1],c[2],c[3]),f=0,g=0),h=q([f,g,c[2],c[3]]),b.getZIndex()&&(h+=";z-index:"+b.getZIndex()+";"),o(b.svg,{style:h,width:c[2],height:c[3]}),b._paint.apply(this,arguments))}},z=jsPlumb.SvgConnector=function(a){var b=this;y.apply(this,[{cssClass:a._jsPlumb.connectorClass,originalArgs:arguments,pointerEventsSpec:"none",tooltip:a.tooltip,_jsPlumb:a._jsPlumb}]),this._paint=function(a,c){var g,h,d=b.getPath(a),e={d:d},f=null;e["pointer-events"]="all",c.outlineColor&&(g=c.outlineWidth||1,h=c.lineWidth+2*g,f=jsPlumb.CurrentLibrary.extend({},c),f.strokeStyle=jsPlumbUtil.convertStyle(c.outlineColor),f.lineWidth=h,null==b.bgPath?(b.bgPath=p("path",e),b.svg.appendChild(b.bgPath),b.attachListeners(b.bgPath,b)):o(b.bgPath,e),t(b.svg,b.bgPath,f,a,b)),null==b.path?(b.path=p("path",e),b.svg.appendChild(b.path),b.attachListeners(b.path,b)):o(b.path,e),t(b.svg,b.path,c,a,b)},this.reattachListeners=function(){b.bgPath&&b.reattachListenersForElement(b.bgPath,b),b.path&&b.reattachListenersForElement(b.path,b)}},jsPlumb.Connectors.svg.Bezier=function(){jsPlumb.Connectors.Bezier.apply(this,arguments),z.apply(this,arguments),this.getPath=function(a){var b="M "+a[4]+" "+a[5];return b+=" C "+a[8]+" "+a[9]+" "+a[10]+" "+a[11]+" "+a[6]+" "+a[7]}},jsPlumb.Connectors.svg.Straight=function(){jsPlumb.Connectors.Straight.apply(this,arguments),z.apply(this,arguments),this.getPath=function(a){return"M "+a[4]+" "+a[5]+" L "+a[6]+" "+a[7]}},jsPlumb.Connectors.svg.Flowchart=function(){var a=this;jsPlumb.Connectors.Flowchart.apply(this,arguments),z.apply(this,arguments),this.getPath=function(b){var f,g,h,i,j,k,l,m,n,o,c="M "+b[4]+","+b[5],d=b[4],e=b[5];for(f=0;f<b[8];f++)g=b[9+2*f],h=b[10+2*f],i=b[9+2*(f+1)],j=b[10+2*(f+1)],k=g!=d&&h==e,l=g==d&&h!=e,m=k?g>i?1:-1:0,n=l?h>j?1:-1:0,o=a.lineWidth/2,c=c+" L "+g+" "+h,c=c+" L "+(g+m*o)+" "+(h+n*o),d=g,e=h,c=c+" M "+g+" "+h;return c=c+" L "+b[6]+","+b[7]}},A=window.SvgEndpoint=function(a){var b=this;y.apply(this,[{cssClass:a._jsPlumb.endpointClass,originalArgs:arguments,pointerEventsSpec:"all",useDivWrapper:!0,_jsPlumb:a._jsPlumb}]),this._paint=function(a,c){var d=jsPlumb.extend({},c);d.outlineColor&&(d.strokeWidth=d.outlineWidth,d.strokeStyle=jsPlumbUtil.convertStyle(d.outlineColor,!0)),null==b.node&&(b.node=b.makeNode(a,d),b.svg.appendChild(b.node),b.attachListeners(b.node,b)),t(b.svg,b.node,d,a,b),q(b.node,a)},this.reattachListeners=function(){b.node&&b.reattachListenersForElement(b.node,b)}},jsPlumb.Endpoints.svg.Dot=function(){jsPlumb.Endpoints.Dot.apply(this,arguments),A.apply(this,arguments),this.makeNode=function(a){return p("circle",{cx:a[2]/2,cy:a[3]/2,r:a[2]/2})}},jsPlumb.Endpoints.svg.Rectangle=function(){jsPlumb.Endpoints.Rectangle.apply(this,arguments),A.apply(this,arguments),this.makeNode=function(a){return p("rect",{width:a[2],height:a[3]})}},jsPlumb.Endpoints.svg.Image=jsPlumb.Endpoints.Image,jsPlumb.Endpoints.svg.Blank=jsPlumb.Endpoints.Blank,jsPlumb.Overlays.svg.Label=jsPlumb.Overlays.Label,jsPlumb.Overlays.svg.Custom=jsPlumb.Overlays.Custom,B=function(a,b){var c,d,e;a.apply(this,b),jsPlumb.jsPlumbUIComponent.apply(this,b),this.isAppendedAtTopLevel=!1,c=this,d=null,this.paint=function(a,f,g,h,i){null==d&&(d=p("path",{"pointer-events":"all"}),a.svg.appendChild(d),c.attachListeners(d,a),c.attachListeners(d,c));var j=b&&1==b.length?b[0].cssClass||"":"";o(d,{d:e(f),"class":j,stroke:h?h:null,fill:i?i:null})},e=function(a){return"M"+a.hxy.x+","+a.hxy.y+" L"+a.tail[0].x+","+a.tail[0].y+" L"+a.cxy.x+","+a.cxy.y+" L"+a.tail[1].x+","+a.tail[1].y+" L"+a.hxy.x+","+a.hxy.y},this.reattachListeners=function(){d&&c.reattachListenersForElement(d,c)},this.cleanup=function(){null!=d&&jsPlumb.CurrentLibrary.removeElement(d)}},jsPlumb.Overlays.svg.Arrow=function(){B.apply(this,[jsPlumb.Overlays.Arrow,arguments])},jsPlumb.Overlays.svg.PlainArrow=function(){B.apply(this,[jsPlumb.Overlays.PlainArrow,arguments])},jsPlumb.Overlays.svg.Diamond=function(){B.apply(this,[jsPlumb.Overlays.Diamond,arguments])},jsPlumb.Overlays.svg.GuideLines=function(){var d,e,f,a=null,b=this;jsPlumb.Overlays.GuideLines.apply(this,arguments),this.paint=function(c,g){null==a&&(a=p("path"),c.svg.appendChild(a),b.attachListeners(a,c),b.attachListeners(a,b),d=p("path"),c.svg.appendChild(d),b.attachListeners(d,c),b.attachListeners(d,b),e=p("path"),c.svg.appendChild(e),b.attachListeners(e,c),b.attachListeners(e,b)),o(a,{d:f(g[0],g[1]),stroke:"red",fill:null}),o(d,{d:f(g[2][0],g[2][1]),stroke:"blue",fill:null}),o(e,{d:f(g[3][0],g[3][1]),stroke:"green",fill:null})},f=function(a,b){return"M "+a.x+","+a.y+" L"+b.x+","+b.y}}}(),function(){var l,m,a=null,b=function(a,b){return jsPlumb.CurrentLibrary.hasClass(c(a),b)},c=function(a){return jsPlumb.CurrentLibrary.getElementObject(a)},d=function(a){return jsPlumb.CurrentLibrary.getOffset(c(a))},e=function(a){return jsPlumb.CurrentLibrary.getPageXY(a)},f=function(a){return jsPlumb.CurrentLibrary.getClientXY(a)},g=function(){var h,i,j,k,l,g=this;g.overlayPlacements=[],jsPlumb.jsPlumbUIComponent.apply(this,arguments),jsPlumbUtil.EventGenerator.apply(this,arguments),this._over=function(a){var j,k,l,b=d(c(g.canvas)),f=e(a),h=f[0]-b.left,i=f[1]-b.top;if(h>0&&i>0&&h<g.canvas.width&&i<g.canvas.height){for(j=0;j<g.overlayPlacements.length;j++)if(k=g.overlayPlacements[j],k&&k[0]<=h&&k[1]>=h&&k[2]<=i&&k[3]>=i)return!0;return l=g.canvas.getContext("2d").getImageData(parseInt(h),parseInt(i),1,1),0!=l.data[0]||0!=l.data[1]||0!=l.data[2]||0!=l.data[3]}return!1},h=!1,i=!1,j=null,k=!1,l=function(a,c){return null!=a&&b(a,c)},this.mousemove=function(b){var d=(e(b),f(b)),i=document.elementFromPoint(d[0],d[1]),j=l(i,"_jsPlumb_overlay"),k=null==a&&(l(i,"_jsPlumb_endpoint")||l(i,"_jsPlumb_connector"));return!h&&k&&g._over(b)?(h=!0,g.fire("mouseenter",g,b),!0):(!h||g._over(b)&&k||j||(h=!1,g.fire("mouseexit",g,b)),g.fire("mousemove",g,b),void 0)},this.click=function(a){h&&g._over(a)&&!k&&g.fire("click",g,a),k=!1},this.dblclick=function(a){h&&g._over(a)&&!k&&g.fire("dblclick",g,a),k=!1},this.mousedown=function(a){g._over(a)&&!i&&(i=!0,j=d(c(g.canvas)),g.fire("mousedown",g,a))},this.mouseup=function(a){i=!1,g.fire("mouseup",g,a)},this.contextmenu=function(a){h&&g._over(a)&&!k&&g.fire("contextmenu",g,a),k=!1}},h=function(a){var b=document.createElement("canvas");return a._jsPlumb.appendElement(b,a.parent),b.style.position="absolute",a["class"]&&(b.className=a["class"]),a._jsPlumb.getId(b,a.uuid),a.tooltip&&b.setAttribute("title",a.tooltip),b},i=function(){g.apply(this,arguments);var b=[];this.getDisplayElements=function(){return b},this.appendDisplayElement=function(a){b.push(a)}},j=jsPlumb.CanvasConnector=function(a){var b,c,d;i.apply(this,arguments),b=function(a,b){var d,e;if(c.ctx.save(),jsPlumb.extend(c.ctx,b),b.gradient){for(d=c.createGradient(a,c.ctx),e=0;e<b.gradient.stops.length;e++)d.addColorStop(b.gradient.stops[e][0],b.gradient.stops[e][1]);c.ctx.strokeStyle=d}c._paint(a,b),c.ctx.restore()},c=this,d=c._jsPlumb.connectorClass+" "+(a.cssClass||""),c.canvas=h({"class":d,_jsPlumb:c._jsPlumb,parent:a.parent,tooltip:a.tooltip}),c.ctx=c.canvas.getContext("2d"),c.appendDisplayElement(c.canvas),c.paint=function(a,d){if(null!=d){if(jsPlumb.sizeCanvas(c.canvas,a[0],a[1],a[2],a[3]),c.getZIndex()&&(c.canvas.style.zIndex=c.getZIndex()),null!=d.outlineColor){var e=d.outlineWidth||1,f=d.lineWidth+2*e,g={strokeStyle:d.outlineColor,lineWidth:f};b(a,g)}b(a,d)}}},k=function(a){var c,d,b=this;i.apply(this,arguments),c=b._jsPlumb.endpointClass+" "+(a.cssClass||""),d={"class":c,_jsPlumb:b._jsPlumb,parent:a.parent,tooltip:b.tooltip},b.canvas=h(d),b.ctx=b.canvas.getContext("2d"),b.appendDisplayElement(b.canvas),this.paint=function(a,c){if(jsPlumb.sizeCanvas(b.canvas,a[0],a[1],a[2],a[3]),null!=c.outlineColor){var e=c.outlineWidth||1,f=c.lineWidth+2*e;({strokeStyle:c.outlineColor,lineWidth:f})}b._paint.apply(this,arguments)}};jsPlumb.Endpoints.canvas.Dot=function(){jsPlumb.Endpoints.Dot.apply(this,arguments),k.apply(this,arguments);var b=this,c=function(a){try{return parseInt(a)}catch(b){if("%"==a.substring(a.length-1))return parseInt(a.substring(0,a-1))}},d=function(a){var d=b.defaultOffset,e=b.defaultInnerRadius;return a.offset&&(d=c(a.offset)),a.innerRadius&&(e=c(a.innerRadius)),[d,e]};this._paint=function(a,c,e){var f,g,h,i,j,k,l;if(null!=c){if(f=b.canvas.getContext("2d"),g=e.getOrientation(b),jsPlumb.extend(f,c),c.gradient){for(h=d(c.gradient),i=1==g[1]?-1*h[0]:h[0],j=1==g[0]?-1*h[0]:h[0],k=f.createRadialGradient(a[4],a[4],a[4],a[4]+j,a[4]+i,h[1]),l=0;l<c.gradient.stops.length;l++)k.addColorStop(c.gradient.stops[l][0],c.gradient.stops[l][1]);f.fillStyle=k}f.beginPath(),f.arc(a[4],a[4],a[4],0,2*Math.PI,!0),f.closePath(),(c.fillStyle||c.gradient)&&f.fill(),c.strokeStyle&&f.stroke()}}},jsPlumb.Endpoints.canvas.Rectangle=function(){var b=this;jsPlumb.Endpoints.Rectangle.apply(this,arguments),k.apply(this,arguments),this._paint=function(a,c,d){var g,h,i,j,k,l,e=b.canvas.getContext("2d"),f=d.getOrientation(b);if(jsPlumb.extend(e,c),c.gradient){for(g=1==f[1]?a[3]:0==f[1]?a[3]/2:0,h=-1==f[1]?a[3]:0==f[1]?a[3]/2:0,i=1==f[0]?a[2]:0==f[0]?a[2]/2:0,j=-1==f[0]?a[2]:0==f[0]?a[2]/2:0,k=e.createLinearGradient(i,g,j,h),l=0;l<c.gradient.stops.length;l++)k.addColorStop(c.gradient.stops[l][0],c.gradient.stops[l][1]);e.fillStyle=k}e.beginPath(),e.rect(0,0,a[2],a[3]),e.closePath(),(c.fillStyle||c.gradient)&&e.fill(),c.strokeStyle&&e.stroke()}},jsPlumb.Endpoints.canvas.Triangle=function(){var b=this;jsPlumb.Endpoints.Triangle.apply(this,arguments),k.apply(this,arguments),this._paint=function(a,c,d){var e=a[2],f=a[3],i=(a[0],a[1],b.canvas.getContext("2d")),j=0,k=0,l=0,m=d.getOrientation(b);1==m[0]&&(j=e,k=f,l=180),-1==m[1]&&(j=e,l=90),1==m[1]&&(k=f,l=-90),i.fillStyle=c.fillStyle,i.translate(j,k),i.rotate(l*Math.PI/180),i.beginPath(),i.moveTo(0,0),i.lineTo(e/2,f/2),i.lineTo(0,f),i.closePath(),(c.fillStyle||c.gradient)&&i.fill(),c.strokeStyle&&i.stroke()}},jsPlumb.Endpoints.canvas.Image=jsPlumb.Endpoints.Image,jsPlumb.Endpoints.canvas.Blank=jsPlumb.Endpoints.Blank,jsPlumb.Connectors.canvas.Bezier=function(){var a=this;jsPlumb.Connectors.Bezier.apply(this,arguments),j.apply(this,arguments),this._paint=function(b){a.ctx.beginPath(),a.ctx.moveTo(b[4],b[5]),a.ctx.bezierCurveTo(b[8],b[9],b[10],b[11],b[6],b[7]),a.ctx.stroke()},this.createGradient=function(b){return a.ctx.createLinearGradient(b[6],b[7],b[4],b[5])}},jsPlumb.Connectors.canvas.Straight=function(){var a=this,b=[null,[1,-1],[1,1],[-1,1],[-1,-1]];jsPlumb.Connectors.Straight.apply(this,arguments),j.apply(this,arguments),this._paint=function(c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r;if(a.ctx.beginPath(),d.dashstyle&&2==d.dashstyle.split(" ").length){for(e=d.dashstyle.split(" "),2!=e.length&&(e=[2,2]),f=[e[0]*d.lineWidth,e[1]*d.lineWidth],g=(c[6]-c[4])/(c[7]-c[5]),h=jsPlumbUtil.segment([c[4],c[5]],[c[6],c[7]]),i=b[h],j=Math.atan(g),k=Math.sqrt(Math.pow(c[6]-c[4],2)+Math.pow(c[7]-c[5],2)),l=Math.floor(k/(f[0]+f[1])),m=[c[4],c[5]],n=0;l>n;n++)a.ctx.moveTo(m[0],m[1]),o=m[0]+Math.abs(Math.sin(j)*f[0])*i[0],p=m[1]+Math.abs(Math.cos(j)*f[0])*i[1],q=m[0]+Math.abs(Math.sin(j)*(f[0]+f[1]))*i[0],r=m[1]+Math.abs(Math.cos(j)*(f[0]+f[1]))*i[1],a.ctx.lineTo(o,p),m=[q,r];a.ctx.moveTo(m[0],m[1]),a.ctx.lineTo(c[6],c[7])}else a.ctx.moveTo(c[4],c[5]),a.ctx.lineTo(c[6],c[7]);a.ctx.stroke()},this.createGradient=function(a,b){return b.createLinearGradient(a[4],a[5],a[6],a[7])}},jsPlumb.Connectors.canvas.Flowchart=function(){var a=this;jsPlumb.Connectors.Flowchart.apply(this,arguments),j.apply(this,arguments),this._paint=function(b){a.ctx.beginPath(),a.ctx.moveTo(b[4],b[5]);for(var d=0;d<b[8];d++)a.ctx.lineTo(b[9+2*d],b[10+2*d]);a.ctx.lineTo(b[6],b[7]),a.ctx.stroke()},this.createGradient=function(a,b){return b.createLinearGradient(a[4],a[5],a[6],a[7])}},jsPlumb.Overlays.canvas.Label=jsPlumb.Overlays.Label,jsPlumb.Overlays.canvas.Custom=jsPlumb.Overlays.Custom,l=function(){jsPlumb.jsPlumbUIComponent.apply(this,arguments)},m=function(a,b){a.apply(this,b),l.apply(this,b),this.paint=function(a,b,c,d,e){var f=a.ctx;f.lineWidth=c,f.beginPath(),f.moveTo(b.hxy.x,b.hxy.y),f.lineTo(b.tail[0].x,b.tail[0].y),f.lineTo(b.cxy.x,b.cxy.y),f.lineTo(b.tail[1].x,b.tail[1].y),f.lineTo(b.hxy.x,b.hxy.y),f.closePath(),d&&(f.strokeStyle=d,f.stroke()),e&&(f.fillStyle=e,f.fill())}},jsPlumb.Overlays.canvas.Arrow=function(){m.apply(this,[jsPlumb.Overlays.Arrow,arguments])},jsPlumb.Overlays.canvas.PlainArrow=function(){m.apply(this,[jsPlumb.Overlays.PlainArrow,arguments])},jsPlumb.Overlays.canvas.Diamond=function(){m.apply(this,[jsPlumb.Overlays.Diamond,arguments])}}(),function(a){jsPlumb.CurrentLibrary={addClass:function(a,b){a=jsPlumb.CurrentLibrary.getElementObject(a);try{a[0].className.constructor==SVGAnimatedString&&jsPlumbUtil.svg.addClass(a[0],b)}catch(c){}a.addClass(b)},animate:function(a,b,c){a.animate(b,c)},appendElement:function(a,b){jsPlumb.CurrentLibrary.getElementObject(b).append(a)},ajax:function(b){b=b||{},b.type=b.type||"get",a.ajax(b)},bind:function(a,b,c){a=jsPlumb.CurrentLibrary.getElementObject(a),a.bind(b,c)},dragEvents:{start:"start",stop:"stop",drag:"drag",step:"step",over:"over",out:"out",drop:"drop",complete:"complete"},extend:function(b,c){return a.extend(b,c)},getAttribute:function(a,b){return a.attr(b)},getClientXY:function(a){return[a.clientX,a.clientY]},getDragObject:function(a){return a[1].draggable},getDragScope:function(a){return a.draggable("option","scope")},getDropEvent:function(a){return a[0]},getDropScope:function(a){return a.droppable("option","scope")},getDOMElement:function(a){return"string"==typeof a?document.getElementById(a):a.context||null!=a.length?a[0]:a},getElementObject:function(b){return"string"==typeof b?a("#"+b):a(b)},getOffset:function(a){return a.offset()},getOriginalEvent:function(a){return a.originalEvent},getPageXY:function(a){return[a.pageX,a.pageY]},getParent:function(a){return jsPlumb.CurrentLibrary.getElementObject(a).parent()},getScrollLeft:function(a){return a.scrollLeft()},getScrollTop:function(a){return a.scrollTop()},getSelector:function(b){return a(b)},getSize:function(a){return[a.outerWidth(),a.outerHeight()]},getTagName:function(a){var b=jsPlumb.CurrentLibrary.getElementObject(a);return b.length>0?b[0].tagName:null},getUIPosition:function(a,b){if(b=b||1,1==a.length)ret={left:a[0].pageX,top:a[0].pageY};else{var c=a[1],d=c.offset;ret=d||c.absolutePosition,c.position.left/=b,c.position.top/=b}return{left:ret.left/b,top:ret.top/b}},hasClass:function(a,b){return a.hasClass(b)},initDraggable:function(a,b,c){b=b||{},b.helper=null,c&&(b.scope=b.scope||jsPlumb.Defaults.Scope),a.draggable(b)},initDroppable:function(a,b){b.scope=b.scope||jsPlumb.Defaults.Scope,a.droppable(b)},isAlreadyDraggable:function(a){return a=jsPlumb.CurrentLibrary.getElementObject(a),a.hasClass("ui-draggable")},isDragSupported:function(a){return a.draggable},isDropSupported:function(a){return a.droppable},removeClass:function(a,b){a=jsPlumb.CurrentLibrary.getElementObject(a);try{a[0].className.constructor==SVGAnimatedString&&jsPlumbUtil.svg.removeClass(a[0],b)}catch(c){}a.removeClass(b)},removeElement:function(a){jsPlumb.CurrentLibrary.getElementObject(a).remove()},setAttribute:function(a,b,c){a.attr(b,c)},setDraggable:function(a,b){a.draggable("option","disabled",!b)},setDragScope:function(a,b){a.draggable("option","scope",b)},setOffset:function(a,b){jsPlumb.CurrentLibrary.getElementObject(a).offset(b)},trigger:function(a,b,c){var d=jQuery._data(jsPlumb.CurrentLibrary.getElementObject(a)[0],"handle");d(c)},unbind:function(a,b,c){a=jsPlumb.CurrentLibrary.getElementObject(a),a.unbind(b,c)}},a(document).ready(jsPlumb.init)}(jQuery),function(){"undefined"==typeof Math.sgn&&(Math.sgn=function(a){return 0==a?0:a>0?1:-1});var a={subtract:function(a,b){return{x:a.x-b.x,y:a.y-b.y}},dotProduct:function(a,b){return a.x*b.x+a.y*b.y},square:function(a){return Math.sqrt(a.x*a.x+a.y*a.y)},scale:function(a,b){return{x:a.x*b,y:a.y*b}}},b=Math.pow(2,-65),c=function(b,c){var f,g,h,i,k,l,m,n,o,p;for(f=[],g=c.length-1,h=2*g-1,i=[],k=[],l=[],m=[],n=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],o=0;g>=o;o++)i[o]=a.subtract(c[o],b);for(o=0;g-1>=o;o++)k[o]=a.subtract(c[o+1],c[o]),k[o]=a.scale(k[o],3);for(o=0;g-1>=o;o++)for(p=0;g>=p;p++)l[o]||(l[o]=[]),l[o][p]=a.dotProduct(k[o],i[p]);for(o=0;h>=o;o++)m[o]||(m[o]=[]),m[o].y=0,m[o].x=parseFloat(o)/h;for(h=g-1,i=0;g+h>=i;i++)for(o=Math.max(0,i-h),k=Math.min(i,g);k>=o;o++)j=i-o,m[o+j].y=m[o+j].y+l[j][o]*n[j][o];for(g=c.length-1,m=d(m,2*g-1,f,0),h=a.subtract(b,c[0]),l=a.square(h),o=n=0;m>o;o++)h=a.subtract(b,e(c,g,f[o],null,null)),h=a.square(h),l>h&&(l=h,n=f[o]);return h=a.subtract(b,c[g]),h=a.square(h),l>h&&(l=h,n=1),{location:n,distance:l}},d=function(a,c,f,g){var m,o,p,q,h=[],i=[],j=[],k=[],l=0,n=Math.sgn(a[0].y);for(o=1;c>=o;o++)m=Math.sgn(a[o].y),m!=n&&l++,n=m;switch(l){case 0:return 0;case 1:if(g>=64)return f[0]=(a[0].x+a[c].x)/2,1;for(l=a[0].y-a[c].y,n=a[c].x-a[0].x,o=a[0].x*a[c].y-a[c].x*a[0].y,m=max_distance_below=0,p=1;c>p;p++)q=l*a[p].x+n*a[p].y+o,q>m?m=q:max_distance_below>q&&(max_distance_below=q);if(p=n,m=(1*(o-m)-0*p)*(1/(0*p-1*l)),p=n,n=o-max_distance_below,l=(1*n-0*p)*(1/(0*p-1*l)),n=Math.min(m,l),Math.max(m,l)-n<b)return j=a[c].x-a[0].x,k=a[c].y-a[0].y,f[0]=0+1*(j*(a[0].y-0)-k*(a[0].x-0))*(1/(0*j-1*k)),1}for(e(a,c,.5,h,i),a=d(h,c,j,g+1),c=d(i,c,k,g+1),g=0;a>g;g++)f[g]=j[g];for(g=0;c>g;g++)f[g+a]=k[g];return a+c},e=function(a,b,c,d,e){for(var f=[[]],g=0;b>=g;g++)f[0][g]=a[g];for(a=1;b>=a;a++)for(g=0;b-a>=g;g++)f[a]||(f[a]=[]),f[a][g]||(f[a][g]={}),f[a][g].x=(1-c)*f[a-1][g].x+c*f[a-1][g+1].x,f[a][g].y=(1-c)*f[a-1][g].y+c*f[a-1][g+1].y;if(null!=d)for(g=0;b>=g;g++)d[g]=f[g][0];if(null!=e)for(g=0;b>=g;g++)e[g]=f[b-g][g];return f[b][0]},f={},g=function(a){var c,d,e,g,h,i,j,b=f[a];if(!b){for(b=[],c=function(a){return function(){return a}},d=function(){return function(a){return a}},e=function(){return function(a){return 1-a}},g=function(a){return function(b){for(var c=1,d=0;d<a.length;d++)c*=a[d](b);return c}},b.push(new function(){return function(b){return Math.pow(b,a)}}),h=1;a>h;h++){for(i=[new c(a)],j=0;a-h>j;j++)i.push(new d);for(j=0;h>j;j++)i.push(new e);b.push(new g(i))}b.push(new function(){return function(b){return Math.pow(1-b,a)}}),f[a]=b}return b},h=function(a,b){for(var c=g(a.length-1),d=0,e=0,f=0;f<a.length;f++)d+=a[f].x*c[f](b),e+=a[f].y*c[f](b);return{x:d,y:e}},i=function(a,b,c){for(var d=h(a,b),e=0,f=c>0?1:-1,g=null;e<Math.abs(c);)b+=.005*f,g=h(a,b),e+=Math.sqrt(Math.pow(g.x-d.x,2)+Math.pow(g.y-d.y,2)),d=g;return{point:g,location:b}},k=function(a,b){var c=h(a,b),d=h(a.slice(0,a.length-1),b),e=d.y-c.y,c=d.x-c.x;return 0==e?1/0:Math.atan(e/c)};window.jsBezier={distanceFromCurve:c,gradientAtPoint:k,gradientAtPointAlongCurveFrom:function(a,b,c){return b=i(a,b,c),b.location>1&&(b.location=1),b.location<0&&(b.location=0),k(a,b.location)},nearestPointOnCurve:function(a,b){var d=c(a,b);return{point:e(b,b.length-1,d.location,null,null),location:d.location}},pointOnCurve:h,pointAlongCurveFrom:function(a,b,c){return i(a,b,c).point},perpendicularToCurveAt:function(a,b,c,d){return b=i(a,b,null==d?0:d),a=k(a,b.location),d=Math.atan(-1/a),a=c/2*Math.sin(d),c=c/2*Math.cos(d),[{x:b.point.x+c,y:b.point.y+a},{x:b.point.x-c,y:b.point.y-a}]},locationAlongCurveFrom:function(a,b,c){return i(a,b,c).location}}}();

/*<script src="${ctxStatic}/org/tinygroup/contextmenu/js/contextmenu.js"></script>*/
!function(a){function i(d,h,i){var m,l=f[d];e=a("<div>",{"class":"list-group right-context-menu",style:"box-shadow:0 0 10px rgba(207, 212, 212, 0.5);width:120px;margin-bottom:0"}).html(a("#"+l.id).html()),m=e.children("a"),m.addClass("list-group-item"),b.html(e),l.onShowMenu&&(b=l.onShowMenu(i,b)),a.each(l.bindings,function(c,d){a("#"+c,b).bind("click",function(){j(),d(h,g)})}),m.off("click.contextmenu").on("click.contextmenu",function(){j()}),b.css({left:i[l.eventPosX],top:i[l.eventPosY]}).show(),l.shadow&&c.css({width:b.width(),height:b.height(),left:i.pageX+2,top:i.pageY+2}).show(),a(document).one("click",j)}function j(){b.hide(),c.hide()}var b,c,e,f,g,h={menuStyle:{},itemStyle:{},itemHoverStyle:{},eventPosX:"pageX",eventPosY:"pageY",shadow:!1,onContextMenu:null,onShowMenu:null,defaults:null};a.fn.contextMenu=function(d,e){b||(b=a("<div/>").hide().css({position:"absolute",zIndex:"99999"}).appendTo("body").bind("click",function(){})),c||(c=a("<div></div>").css({backgroundColor:"#000",position:"absolute",opacity:.2,zIndex:499}).appendTo("body").hide()),f=f||[],e||(e=h),f.push({id:d,menuStyle:a.extend({},h.menuStyle,e.menuStyle||{}),itemStyle:a.extend({},h.itemStyle,e.itemStyle||{}),itemHoverStyle:a.extend({},h.itemHoverStyle,e.itemHoverStyle||{}),bindings:e.bindings||{},shadow:e.shadow||e.shadow===!1?e.shadow:h.shadow,onContextMenu:e.onContextMenu||h.onContextMenu,onShowMenu:e.onShowMenu||h.onShowMenu,eventPosX:e.eventPosX||h.eventPosX,eventPosY:e.eventPosY||h.eventPosY});var g=f.length-1;return a(this).bind("contextmenu",function(a){var b=f[g].onContextMenu?f[g].onContextMenu(a):!0;return b&&i(g,this,a,e),!1}),this},a.contextMenu={defaults:function(b){a.each(b,function(b,c){"object"==typeof c&&h[b]?a.extend(h[b],c):h[b]=c})}}}(jQuery);

/*<script src="${ctxStatic}/org/tinygroup/flowprocess/js/flowprocess.js"></script>*/
!function(a){var b={fnClick:function(){},fnDbClick:function(){},connectorPaintStyle:{lineWidth:2,strokeStyle:"#49afcd",joinstyle:"round"},disableConnectorPaintStyle:{lineWidth:2,strokeStyle:"#999",joinstyle:"round",dashstyle:"4 1"},itemSize:{top:10,width:150,height:120}},c=function(c){c.find(".process-flag").each(function(c,d){var e=a(d).parent();jsPlumb.makeSource(a(d),{parent:e,anchor:"Continuous",endpoint:["Dot",{radius:1}],connector:["Flowchart",{stub:[5,5]}],connectorStyle:"disabled"==e.attr("disabled")?b.disableConnectorPaintStyle:b.connectorPaintStyle,dragOptions:{},maxConnections:-1})})},d=function(){try{return jsPlumb.detachEveryConnection(),jsPlumb.deleteEveryEndpoint(),jsPlumb.repaintEverything(),!0}catch(a){return!1}},e=function(c){function l(a){return j[a]?l(j[a])+1:1}var e,f,g,h,i,j,k,m,n,o,p;for(a("<div/>"),e=[],a(".popover").remove(),c.children(".process-step").each(function(){var b=a(this);e.push({id:b.attr("process_id"),pid:b.attr("process_pid")})}).on("mouseover",function(){a(this).popover("show")}).on("mouseout",function(){a(this).popover("hide")}),f=0,g=e.length,h=[],i=[],j=[],k=0;g>k;k++)(""===e[k]["pid"]||null===e[k]["pid"])&&(e[k]["pid"]=0),i[e[k]["pid"]]||(i[e[k]["pid"]]=[]),i[e[k]["pid"]].push(e[k]),h.push(e[k]["pid"]),j[e[k]["id"]]=e[k]["pid"];for(m=0,k=0;g>k;k++)n=l(e[k]["id"]),m=Math.max(m,n),-1==a.inArray(e[k]["id"],h)&&f++;c.css({width:b.itemSize.width*f+180+"px",height:m*b.itemSize.height+50+"px",margin:"0 auto"}),b.itemSize.left=b.itemSize.width*(f-1)/2,o=function(a,c,d){var e,f,j,k,l,m,n,p;if(!i[a])return[];for(e=i[a],f=e.length,d-e.length/2,j="",k="",l=[],m=b.itemSize.width*(f-1)/2,n=0;f>n;n++)j=d-m+n*b.itemSize.width,k=c+b.itemSize.height,i[a][n]["left"]=j,i[a][n]["top"]=k-b.itemSize.height,l.push(e[n]["id"]),p=o(e[n]["id"],k,j),i[a][n]["process_to"]=p.join(",");return l},p=function(){var d,e,f,h,c=[];for(f in i)for(d=0,e=i[f].length;e>d;d++)c.push(i[f][d]);for(f=0;g>f;f++)h=c[f]["id"],a("#process-step-"+h).attr({process_to:c[f]["process_to"]}).css({left:c[f]["left"]+"px",top:c[f]["top"]+"px",width:b.itemSize.width-30+"px"})},o(0,b.itemSize.top,b.itemSize.left),p()};a.fn.flowprocess=function(f){var h,i,j,g=a(this);return f=f||{},a.each(f,function(c,d){"object"==typeof d&&b[c]?a.extend(b[c],d):b[c]=d}),d(),e(g.find(".tiny_flow_process_info:first")),jsPlumb.importDefaults({DragOptions:{cursor:"pointer"},EndpointStyle:{fillStyle:"#225588"},Endpoint:["Dot",{radius:1}],ConnectionOverlays:[["Arrow",{location:1}],["Label",{location:.1,id:"label",cssClass:"aLabel"}]],Anchor:"Continuous",ConnectorZIndex:5,HoverPaintStyle:b.connectorHoverStyle}),a.browser.msie&&a.browser.version<"9.0"?jsPlumb.setRenderMode(jsPlumb.VML):jsPlumb.setRenderMode(jsPlumb.SVG),h=null,g.find(".process-step").on("click",function(){g.find(".tiny_flow_active_id").val(a(this).attr("process_id")),clearTimeout(h),h=setTimeout(b.fnClick,300)}).on("dblclick",function(){clearTimeout(h),b.fnDbClick()}).each(function(){var c=a(this),d=c.attr("process_id");c.mousedown(function(a){3==a.which&&c.contextMenu("process-menu-"+d)})}),c(g),i=function(){g.find(".process-step").each(function(){var e,c=a(this).attr("process_id"),d=a(this).attr("process_to");return d&&c?(e=d.split(","),a.each(e,function(b,e){""!=e&&0!=e&&a("#process-step-"+d).length>0&&jsPlumb.connect({source:"process-step-"+c,target:"process-step-"+e})}),void 0):!0})},i(),j={getActiveId:function(){return g.find(".tiny_flow_active_id").val()},clear:function(){try{return jsPlumb.detachEveryConnection(),jsPlumb.deleteEveryEndpoint(),jsPlumb.repaintEverything(),!0}catch(a){return!1}},refresh:function(){try{return this.clear(),i(),!0}catch(a){return!1}}}}}(jQuery);

/*<script src="${ctxStatic}/org/tinygroup/cropper/js/cropper.min.js"></script>*/
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){"use strict";function b(a){return"number"==typeof a}function c(a){return"undefined"==typeof a}function d(a,c){var d=[];return b(c)&&d.push(c),d.slice.apply(a,d)}function e(a,b){var c=d(arguments,2);return function(){return a.apply(b,c.concat(d(arguments)))}}function f(a){var b=a.match(/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i);return b&&(b[1]!==n.protocol||b[2]!==n.hostname||b[3]!==n.port)}function g(a){var b="timestamp="+(new Date).getTime();return a+(-1===a.indexOf("?")?"?":"&")+b}function h(a){return a?"rotate("+a+"deg)":"none"}function i(a,b){var c,d,e=P(a.degree)%180,f=(e>90?180-e:e)*Math.PI/180,g=Q(f),h=R(f),i=a.width,j=a.height,k=a.aspectRatio;return b?(c=i/(h+g/k),d=c/k):(c=i*h+j*g,d=i*g+j*h),{width:c,height:d}}function j(b,c){var d=a("<canvas>")[0],e=d.getContext("2d"),f=c.naturalWidth,g=c.naturalHeight,h=c.rotate,j=i({width:f,height:g,degree:h});return h?(d.width=j.width,d.height=j.height,e.save(),e.translate(j.width/2,j.height/2),e.rotate(h*Math.PI/180),e.drawImage(b,-f/2,-g/2,f,g),e.restore()):(d.width=f,d.height=g,e.drawImage(b,0,0,f,g)),d}function k(b,c){this.$element=a(b),this.options=a.extend({},k.DEFAULTS,a.isPlainObject(c)&&c),this.ready=!1,this.built=!1,this.rotated=!1,this.cropped=!1,this.disabled=!1,this.load()}var l=a(window),m=a(document),n=window.location,o=".cropper",p=/^(e|n|w|s|ne|nw|sw|se|all|crop|move|zoom)$/,q="cropper-modal",r="cropper-hide",s="cropper-hidden",t="cropper-invisible",u="cropper-move",v="cropper-crop",w="cropper-disabled",x="cropper-bg",y="mousedown touchstart",z="mousemove touchmove",A="mouseup mouseleave touchend touchleave touchcancel",B="wheel mousewheel DOMMouseScroll",C="dblclick",D="resize"+o,E="build"+o,F="built"+o,G="dragstart"+o,H="dragmove"+o,I="dragend"+o,J="zoomin"+o,K="zoomout"+o,L=a.isFunction(a("<canvas>")[0].getContext),M=Math.sqrt,N=Math.min,O=Math.max,P=Math.abs,Q=Math.sin,R=Math.cos,S=parseFloat,T={};T.load=function(b){var c,d,e,h=this.options,i=this.$element;b||(i.is("img")?b=i.prop("src"):i.is("canvas")&&L&&(b=i[0].toDataURL())),b&&(d=a.Event(E),i.one(E,h.build).trigger(d),d.isDefaultPrevented()||(h.checkImageOrigin&&f(b)&&(c=" crossOrigin",i.prop("crossOrigin")||(b=g(b))),this.$clone=e=a("<img>"),e.one("load",a.proxy(function(){var a=e.prop("naturalWidth")||e.width(),c=e.prop("naturalHeight")||e.height();this.image={naturalWidth:a,naturalHeight:c,aspectRatio:a/c,rotate:0},this.url=b,this.ready=!0,this.build()},this)).attr({src:b,crossOrigin:c}),e.addClass(r).insertAfter(i)))},T.build=function(){var b,c,d=this.$element,e=this.$clone,f=this.options;this.ready&&(this.built&&this.unbuild(),this.$cropper=b=a(k.TEMPLATE),d.addClass(s),e.removeClass(r),this.$container=d.parent().append(b),this.$canvas=b.find(".cropper-canvas").append(e),this.$dragBox=b.find(".cropper-drag-box"),this.$cropBox=c=b.find(".cropper-crop-box"),this.$viewBox=b.find(".cropper-view-box"),this.addListeners(),this.initPreview(),f.aspectRatio=S(f.aspectRatio)||0/0,f.autoCrop?(this.cropped=!0,f.modal&&this.$dragBox.addClass(q)):c.addClass(s),f.background&&b.addClass(x),f.highlight||c.find(".cropper-face").addClass(t),f.guides||c.find(".cropper-dashed").addClass(s),f.movable||c.find(".cropper-face").data("drag","move"),f.resizable||c.find(".cropper-line, .cropper-point").addClass(s),this.setDragMode(f.dragCrop?"crop":"move"),this.built=!0,this.render(),d.one(F,f.built).trigger(F))},T.unbuild=function(){this.built&&(this.built=!1,this.removeListeners(),this.$preview.empty(),this.$preview=null,this.$viewBox=null,this.$cropBox=null,this.$dragBox=null,this.$canvas=null,this.$container=null,this.$cropper.remove(),this.$cropper=null)},a.extend(T,{render:function(){this.initContainer(),this.initCanvas(),this.initCropBox()},initContainer:function(){var a=this.$element,b=this.$container,c=this.$cropper,d=this.options;c.addClass(s),a.removeClass(s),c.css(this.container={width:O(b.width(),S(d.minContainerWidth)||200),height:O(b.height(),S(d.minContainerHeight)||100)}),a.addClass(s),c.removeClass(s)},initCanvas:function(){var b=this.options,c=this.container,d=c.width,e=c.height,f=this.image,g=f.aspectRatio,h={aspectRatio:g,width:d,height:e,left:0,top:0,minLeft:-d,minTop:-e,maxLeft:d,maxTop:e,minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0};e*g>d?b.strict?h.width=e*g:h.height=d/g:b.strict?h.height=d/g:h.width=e*g,h.oldLeft=h.left=(d-h.width)/2,h.oldTop=h.top=(e-h.height)/2,this.canvas=h,this.limitCanvas(),this.initialImage=a.extend({},f),this.initialCanvas=a.extend({},this.canvas),this.renderCanvas()},limitCanvas:function(){var a=this.options,b=this.container,c=b.width,d=b.height,e=this.canvas,f=e.aspectRatio,g=c,h=d;d*f>c?a.strict?g=d*f:h=c/f:a.strict?h=c/f:g=d*f,a.strict?(e.minWidth=g,e.minHeight=h,e.maxLeft=0,e.maxTop=0,e.minLeft=c-g,e.minTop=d-h):(e.minLeft=-g,e.minTop=-h)},renderCanvas:function(b){var c,d,e,f=this.options,g=this.container,j=this.canvas,k=this.image;this.rotated&&(this.rotated=!1,e=i({width:k.width,height:k.height,degree:k.rotate}),c=e.width/e.height,c!==j.aspectRatio&&(j.left-=(e.width-j.width)/2,j.top-=(e.height-j.height)/2,j.width=e.width,j.height=e.height,j.aspectRatio=c,this.limitCanvas())),(j.width>j.maxWidth||j.width<j.minWidth)&&(j.left=j.oldLeft),(j.height>j.maxHeight||j.height<j.minHeight)&&(j.top=j.oldTop),j.width=N(O(j.width,j.minWidth),j.maxWidth),j.height=N(O(j.height,j.minHeight),j.maxHeight),f.strict?(j.minLeft=g.width-j.width,j.minTop=g.height-j.height):(j.minLeft=-j.width,j.minTop=-j.height),j.oldLeft=j.left=N(O(j.left,j.minLeft),j.maxLeft),j.oldTop=j.top=N(O(j.top,j.minTop),j.maxTop),this.$canvas.css({width:j.width,height:j.height,left:j.left,top:j.top}),k.rotate?(d=i({width:j.width,height:j.height,degree:k.rotate,aspectRatio:k.aspectRatio},!0),a.extend(k,{width:d.width,height:d.height,left:(j.width-d.width)/2,top:(j.height-d.height)/2})):a.extend(k,{width:j.width,height:j.height,left:0,top:0}),this.$clone.css({width:k.width,height:k.height,marginLeft:k.left,marginTop:k.top,transform:h(k.rotate)}),b&&(this.preview(),f.crop&&f.crop.call(this.$element,this.getData()))},initCropBox:function(){var b=this.options,c=this.container,d=this.canvas,e=b.strict,f=b.aspectRatio,g=S(b.minCropBoxWidth)||0,h=S(b.minCropBoxHeight)||0,i=S(b.autoCropArea)||.8,j=c.width,k=c.height,l={width:e?j:d.width,height:e?k:d.height,minWidth:g,minHeight:h,maxWidth:j,maxHeight:k};f&&(k*f>j?(l.height=l.width/f,l.maxHeight=j/f):(l.width=l.height*f,l.maxWidth=k*f),e||(l.height*d.aspectRatio>l.width?(l.height=d.height,l.width=l.height*f):(l.width=d.width,l.height=l.width/f)),g?l.minHeight=l.minWidth/f:h&&(l.minWidth=l.minHeight*f)),l.minWidth=N(l.maxWidth,l.minWidth),l.minHeight=N(l.maxHeight,l.minHeight),l.width=O(l.minWidth,l.width*i),l.height=O(l.minHeight,l.height*i),l.oldLeft=l.left=(j-l.width)/2,l.oldTop=l.top=(k-l.height)/2,this.initialCropBox=a.extend({},l),this.cropBox=l,this.cropped&&this.renderCropBox()},renderCropBox:function(){var a=this.options,b=this.container,c=b.width,d=b.height,e=this.$cropBox,f=this.cropBox;(f.width>f.maxWidth||f.width<f.minWidth)&&(f.left=f.oldLeft),(f.height>f.maxHeight||f.height<f.minHeight)&&(f.top=f.oldTop),f.width=N(O(f.width,f.minWidth),f.maxWidth),f.height=N(O(f.height,f.minHeight),f.maxHeight),f.oldLeft=f.left=N(O(f.left,0),c-f.width),f.oldTop=f.top=N(O(f.top,0),d-f.height),a.movable&&e.find(".cropper-face").data("drag",f.width===c&&f.height===d?"move":"all"),e.css({width:f.width,height:f.height,left:f.left,top:f.top}),this.disabled||(this.preview(),a.crop&&a.crop.call(this.$element,this.getData()))}}),T.initPreview=function(){var b=this.url;this.$preview=a(this.options.preview),this.$viewBox.html('<img src="'+b+'">'),this.$preview.each(function(){var c=a(this);c.data({width:c.width(),height:c.height()}).html('<img src="'+b+'" style="display:block;width:100%;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation: 0deg!important">')})},T.preview=function(){var b=this.image,c=this.canvas,d=this.cropBox,e=b.width,f=b.height,g=d.left-c.left-b.left,i=d.top-c.top-b.top,j=b.rotate;this.cropped&&!this.disabled&&(this.$viewBox.find("img").css({width:e,height:f,marginLeft:-g,marginTop:-i,transform:h(j)}),this.$preview.each(function(){var b=a(this),c=b.data(),k=c.width/d.width,l=c.width,m=d.height*k;m>c.height&&(k=c.height/d.height,l=d.width*k,m=c.height),b.width(l).height(m).find("img").css({width:e*k,height:f*k,marginLeft:-g*k,marginTop:-i*k,transform:h(j)})}))},T.addListeners=function(){var b=this.options;this.$element.on(G,b.dragstart).on(H,b.dragmove).on(I,b.dragend).on(J,b.zoomin).on(K,b.zoomout),this.$cropper.on(y,a.proxy(this.dragstart,this)).on(C,a.proxy(this.dblclick,this)),b.zoomable&&b.mouseWheelZoom&&this.$cropper.on(B,a.proxy(this.wheel,this)),m.on(z,this._dragmove=e(this.dragmove,this)).on(A,this._dragend=e(this.dragend,this)),b.responsive&&l.on(D,this._resize=e(this.resize,this))},T.removeListeners=function(){var a=this.options;this.$element.off(G,a.dragstart).off(H,a.dragmove).off(I,a.dragend).off(J,a.zoomin).off(K,a.zoomout),this.$cropper.off(y,this.dragstart).off(C,this.dblclick),a.zoomable&&a.mouseWheelZoom&&this.$cropper.off(B,this.wheel),m.off(z,this._dragmove).off(A,this._dragend),a.responsive&&l.off(D,this._resize)},a.extend(T,{resize:function(){var b,c,d,e=this.$container,f=this.container;this.disabled||(d=e.width()/f.width,(1!==d||e.height()!==f.height)&&(b=this.getCanvasData(),c=this.getCropBoxData(),this.render(),this.setCanvasData(a.each(b,function(a,c){b[a]=c*d})),this.setCropBoxData(a.each(c,function(a,b){c[a]=b*d}))))},dblclick:function(){this.disabled||this.setDragMode(this.$dragBox.hasClass(v)?"move":"crop")},wheel:function(a){var b=a.originalEvent,c=1;this.disabled||(a.preventDefault(),b.deltaY?c=b.deltaY>0?1:-1:b.wheelDelta?c=-b.wheelDelta/120:b.detail&&(c=b.detail>0?1:-1),this.zoom(.1*c))},dragstart:function(b){var c,d,e,f=this.options,g=b.originalEvent,h=g&&g.touches,i=b;if(!this.disabled){if(h){if(e=h.length,e>1){if(!f.zoomable||!f.touchDragZoom||2!==e)return;i=h[1],this.startX2=i.pageX,this.startY2=i.pageY,c="zoom"}i=h[0]}if(c=c||a(i.target).data("drag"),p.test(c)){if(b.preventDefault(),d=a.Event(G,{originalEvent:g,dragType:c}),this.$element.trigger(d),d.isDefaultPrevented())return;this.dragType=c,this.cropping=!1,this.startX=i.pageX,this.startY=i.pageY,"crop"===c&&(this.cropping=!0,this.$dragBox.addClass(q))}}},dragmove:function(b){var c,d,e=this.options,f=b.originalEvent,g=f&&f.touches,h=b,i=this.dragType;if(!this.disabled){if(g){if(d=g.length,d>1){if(!e.zoomable||!e.touchDragZoom||2!==d)return;h=g[1],this.endX2=h.pageX,this.endY2=h.pageY}h=g[0]}if(i){if(b.preventDefault(),c=a.Event(H,{originalEvent:f,dragType:i}),this.$element.trigger(c),c.isDefaultPrevented())return;this.endX=h.pageX,this.endY=h.pageY,this.change()}}},dragend:function(b){var c,d=this.dragType;if(!this.disabled&&d){if(b.preventDefault(),c=a.Event(I,{originalEvent:b.originalEvent,dragType:d}),this.$element.trigger(c),c.isDefaultPrevented())return;this.cropping&&(this.cropping=!1,this.$dragBox.toggleClass(q,this.cropped&&this.options.modal)),this.dragType=""}}}),a.extend(T,{reset:function(){this.disabled||(this.image=a.extend({},this.initialImage),this.canvas=a.extend({},this.initialCanvas),this.renderCanvas(),this.cropped&&(this.cropBox=a.extend({},this.initialCropBox),this.renderCropBox()))},clear:function(){this.cropped&&!this.disabled&&(a.extend(this.cropBox,{left:0,top:0,width:0,height:0}),this.renderCropBox(),this.cropped=!1,this.$dragBox.removeClass(q),this.$cropBox.addClass(s))},destroy:function(){var a=this.$element;this.ready||this.$clone.off("load").remove(),this.unbuild(),a.removeClass(s).removeData("cropper")},replace:function(a){this.ready&&!this.disabled&&a&&this.load(a)},enable:function(){this.built&&(this.disabled=!1,this.$cropper.removeClass(w))},disable:function(){this.built&&(this.disabled=!0,this.$cropper.addClass(w))},move:function(a,c){var d=this.canvas;this.built&&!this.disabled&&b(a)&&b(c)&&(d.left+=a,d.top+=c,this.renderCanvas(!0))},zoom:function(b){var c,d,e,f=this.canvas;if(b=S(b),b&&this.built&&!this.disabled&&this.options.zoomable){if(c=a.Event(b>0?J:K),this.$element.trigger(c),c.isDefaultPrevented())return;b=-1>=b?1/(1-b):1>=b?1+b:b,d=f.width*b,e=f.height*b,f.left-=(d-f.width)/2,f.top-=(e-f.height)/2,f.width=d,f.height=e,this.renderCanvas(!0),this.setDragMode("move")}},rotate:function(a){var b=this.image;a=S(a),a&&this.built&&!this.disabled&&this.options.rotatable&&(b.rotate=(b.rotate+a)%360,this.rotated=!0,this.renderCanvas(!0))},getData:function(){var b,c,d=this.cropBox,e=this.canvas,f=this.image,g=f.rotate;return this.built&&this.cropped?(c={x:d.left-e.left,y:d.top-e.top,width:d.width,height:d.height},b=f.width/f.naturalWidth,a.each(c,function(a,d){d/=b,c[a]=d})):c={x:0,y:0,width:0,height:0},c.rotate=g,c},getContainerData:function(){return this.built?this.container:{}},getImageData:function(){return this.ready?this.image:{}},getCanvasData:function(){var a,b=this.canvas;return this.built&&(a={left:b.left,top:b.top,width:b.width,height:b.height}),a||{}},setCanvasData:function(c){var d=this.canvas,e=d.aspectRatio;this.built&&!this.disabled&&a.isPlainObject(c)&&(b(c.left)&&(d.left=c.left),b(c.top)&&(d.top=c.top),b(c.width)?(d.width=c.width,d.height=c.width/e):b(c.height)&&(d.height=c.height,d.width=c.height*e),this.renderCanvas(!0))},getCropBoxData:function(){var a,b=this.cropBox;return this.built&&this.cropped&&(a={left:b.left,top:b.top,width:b.width,height:b.height}),a||{}},setCropBoxData:function(c){var d=this.cropBox,e=this.options.aspectRatio;this.built&&this.cropped&&!this.disabled&&a.isPlainObject(c)&&(b(c.left)&&(d.left=c.left),b(c.top)&&(d.top=c.top),e?b(c.width)?(d.width=c.width,d.height=d.width/e):b(c.height)&&(d.height=c.height,d.width=d.height*e):(b(c.width)&&(d.width=c.width),b(c.height)&&(d.height=c.height)),this.renderCropBox())},getCroppedCanvas:function(b){var c,d,e,f,g,h,i,k,l,m,n;if(this.built&&this.cropped&&L)return a.isPlainObject(b)||(b={}),n=this.getData(),c=n.width,d=n.height,k=c/d,a.isPlainObject(b)&&(g=b.width,h=b.height,g?(h=g/k,i=g/c):h&&(g=h*k,i=h/d)),e=g||c,f=h||d,l=a("<canvas>")[0],l.width=e,l.height=f,m=l.getContext("2d"),b.fillColor&&(m.fillStyle=b.fillColor,m.fillRect(0,0,e,f)),m.drawImage.apply(m,function(){var a,b,e,f,g,h,k=j(this.$clone[0],this.image),l=k.width,m=k.height,o=[k],p=n.x,q=n.y;return-c>=p||p>l?p=a=e=g=0:0>=p?(e=-p,p=0,a=g=N(l,c+p)):l>=p&&(e=0,a=g=N(c,l-p)),0>=a||-d>=q||q>m?q=b=f=h=0:0>=q?(f=-q,q=0,b=h=N(m,d+q)):m>=q&&(f=0,b=h=N(d,m-q)),o.push(p,q,a,b),i&&(e*=i,f*=i,g*=i,h*=i),g>0&&h>0&&o.push(e,f,g,h),o}.call(this)),l},setAspectRatio:function(a){var b=this.options;this.disabled||c(a)||(b.aspectRatio=S(a)||0/0,this.built&&this.initCropBox())},setDragMode:function(a){var b=this.$dragBox,c=!1,d=!1;if(this.ready&&!this.disabled){switch(a){case"crop":this.options.dragCrop?(c=!0,b.data("drag",a)):d=!0;break;case"move":d=!0,b.data("drag",a);break;default:b.removeData("drag")}b.toggleClass(v,c).toggleClass(u,d)}}}),T.change=function(){var a,b=this.dragType,c=this.canvas,d=this.container,e=d.width,f=d.height,g=this.cropBox,h=g.width,i=g.height,j=g.left,k=g.top,l=j+h,m=k+i,n=!0,o=this.options.aspectRatio,p={x:this.endX-this.startX,y:this.endY-this.startY};switch(o&&(p.X=p.y*o,p.Y=p.x/o),b){case"all":j+=p.x,k+=p.y;break;case"e":if(p.x>=0&&(l>=e||o&&(0>=k||m>=f))){n=!1;break}h+=p.x,o&&(i=h/o,k-=p.Y/2),0>h&&(b="w",h=0);break;case"n":if(p.y<=0&&(0>=k||o&&(0>=j||l>=e))){n=!1;break}i-=p.y,k+=p.y,o&&(h=i*o,j+=p.X/2),0>i&&(b="s",i=0);break;case"w":if(p.x<=0&&(0>=j||o&&(0>=k||m>=f))){n=!1;break}h-=p.x,j+=p.x,o&&(i=h/o,k+=p.Y/2),0>h&&(b="e",h=0);break;case"s":if(p.y>=0&&(m>=f||o&&(0>=j||l>=e))){n=!1;break}i+=p.y,o&&(h=i*o,j-=p.X/2),0>i&&(b="n",i=0);break;case"ne":if(o){if(p.y<=0&&(0>=k||l>=e)){n=!1;break}i-=p.y,k+=p.y,h=i*o}else p.x>=0?e>l?h+=p.x:p.y<=0&&0>=k&&(n=!1):h+=p.x,p.y<=0?k>0&&(i-=p.y,k+=p.y):(i-=p.y,k+=p.y);0>h&&0>i?(b="sw",i=0,h=0):0>h?(b="nw",h=0):0>i&&(b="se",i=0);break;case"nw":if(o){if(p.y<=0&&(0>=k||0>=j)){n=!1;break}i-=p.y,k+=p.y,h=i*o,j+=p.X}else p.x<=0?j>0?(h-=p.x,j+=p.x):p.y<=0&&0>=k&&(n=!1):(h-=p.x,j+=p.x),p.y<=0?k>0&&(i-=p.y,k+=p.y):(i-=p.y,k+=p.y);0>h&&0>i?(b="se",i=0,h=0):0>h?(b="ne",h=0):0>i&&(b="sw",i=0);break;case"sw":if(o){if(p.x<=0&&(0>=j||m>=f)){n=!1;break}h-=p.x,j+=p.x,i=h/o}else p.x<=0?j>0?(h-=p.x,j+=p.x):p.y>=0&&m>=f&&(n=!1):(h-=p.x,j+=p.x),p.y>=0?f>m&&(i+=p.y):i+=p.y;0>h&&0>i?(b="ne",i=0,h=0):0>h?(b="se",h=0):0>i&&(b="nw",i=0);break;case"se":if(o){if(p.x>=0&&(l>=e||m>=f)){n=!1;break}h+=p.x,i=h/o}else p.x>=0?e>l?h+=p.x:p.y>=0&&m>=f&&(n=!1):h+=p.x,p.y>=0?f>m&&(i+=p.y):i+=p.y;0>h&&0>i?(b="nw",i=0,h=0):0>h?(b="sw",h=0):0>i&&(b="ne",i=0);break;case"move":c.left+=p.x,c.top+=p.y,this.renderCanvas(!0),n=!1;break;case"zoom":this.zoom(function(a,b,c,d){var e=M(a*a+b*b),f=M(c*c+d*d);return(f-e)/e}(P(this.startX-this.startX2),P(this.startY-this.startY2),P(this.endX-this.endX2),P(this.endY-this.endY2))),this.startX2=this.endX2,this.startY2=this.endY2,n=!1;break;case"crop":p.x&&p.y&&(a=this.$cropper.offset(),j=this.startX-a.left,k=this.startY-a.top,h=g.minWidth,i=g.minHeight,p.x>0?p.y>0?b="se":(b="ne",k-=i):p.y>0?(b="sw",j-=h):(b="nw",j-=h,k-=i),this.cropped||(this.cropped=!0,this.$cropBox.removeClass(s)))}n&&(g.width=h,g.height=i,g.left=j,g.top=k,this.dragType=b,this.renderCropBox()),this.startX=this.endX,this.startY=this.endY},a.extend(k.prototype,T),k.DEFAULTS={aspectRatio:0/0,autoCropArea:.8,crop:null,preview:"",strict:!0,responsive:!0,checkImageOrigin:!0,modal:!0,guides:!0,highlight:!0,background:!0,autoCrop:!0,dragCrop:!0,movable:!0,resizable:!0,rotatable:!0,zoomable:!0,touchDragZoom:!0,mouseWheelZoom:!0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,build:null,built:null,dragstart:null,dragmove:null,dragend:null,zoomin:null,zoomout:null},k.setDefaults=function(b){a.extend(k.DEFAULTS,b)},k.TEMPLATE=function(a,b){return b=b.split(","),a.replace(/\d+/g,function(a){return b[a]})}('<0 6="5-container"><0 6="5-canvas"></0><0 6="5-2-9" 3-2="move"></0><0 6="5-crop-9"><1 6="5-view-9"></1><1 6="5-8 8-h"></1><1 6="5-8 8-v"></1><1 6="5-face" 3-2="all"></1><1 6="5-7 7-e" 3-2="e"></1><1 6="5-7 7-n" 3-2="n"></1><1 6="5-7 7-w" 3-2="w"></1><1 6="5-7 7-s" 3-2="s"></1><1 6="5-4 4-e" 3-2="e"></1><1 6="5-4 4-n" 3-2="n"></1><1 6="5-4 4-w" 3-2="w"></1><1 6="5-4 4-s" 3-2="s"></1><1 6="5-4 4-ne" 3-2="ne"></1><1 6="5-4 4-nw" 3-2="nw"></1><1 6="5-4 4-sw" 3-2="sw"></1><1 6="5-4 4-se" 3-2="se"></1></0></0>',"div,span,drag,data,point,cropper,class,line,dashed,box"),k.other=a.fn.cropper,a.fn.cropper=function(b){var e,f=d(arguments,1);return this.each(function(){var c,d=a(this),g=d.data("cropper");g||d.data("cropper",g=new k(this,b)),"string"==typeof b&&a.isFunction(c=g[b])&&(e=c.apply(g,f))}),c(e)?this:e},a.fn.cropper.Constructor=k,a.fn.cropper.setDefaults=k.setDefaults,a.fn.cropper.noConflict=function(){return a.fn.cropper=k.other,this}});

/*<script src="${ctxStatic}/org/tinygroup/timeline/js/main.js"></script>*/
!function(a){function b(){(a("#headSty").length||a("#bnr").length)&&(function(){var a,b;navigator.userAgent.toLocaleLowerCase().indexOf("opera")>=0||(a=document.createElement("script"),a.type="text/javascript",a.async=!0,a.src="script/SmoothScroll.js",b=document.getElementsByTagName("script")[0],b.parentNode.insertBefore(a,b))}(),a(window).scroll(function(){var c,b=a(this).scrollTop();a(".bnr-box").css({"margin-top":.48*-b}),a(".bnr-txt").css({"margin-top":.68*-b}),a(".bnr-btn").css({"margin-top":.68*-b}),a(".warper").css({"background-position":"50% "+.2*b+"px"}),200>b?(a(".txt-warp").css({"margin-top":1.5*-b}),a(".txt-nav-warp").removeAttr("style")):(a(".txt-warp").css({"margin-top":-240}),a(".txt-nav-warp").css({position:"fixed",top:0,left:0,"box-shadow":"0 2px 6px #eee"})),c=0,b>=200&&577>b||(b>=577&&1072>b?c=1:b>=1072&&1165>b?c=2:b>=1165&&(c=3)),a(".txt-nav li a").eq(c).addClass("on").parent().siblings().children().removeClass("on"),200>b&&a(".txt-nav li a").removeClass("on")}))}function c(){if(!a(".help-side dl").length)return!1;var b=a(".help-side dl").find(".cur a"),c=a(".help-side dl dd a"),d=a(".side-slider"),e=b.position().top-3;d.stop(!0,!0).animate({top:e}),c.mouseenter(function(){var b=a(this).position().top-3;d.stop(!0,!0).animate({top:b},240)}).parents(".help-side").mouseleave(function(a){a=e,d.stop(!0,!0).animate({top:a})})}function d(){if(a(".help-cont dl dt a").length){var b=a(".help-cont dl dt a");b.toggle(function(){return a(this).parent().css({"background-position":"0 -20px"}).siblings().slideDown(),!1},function(){return a(this).parent().removeAttr("style").siblings().slideUp(),!1})}}function e(){if(a(".mainBox").length){var d,b=a(".history-date"),c=b.find("h2 a,ul li dl dt a"),e=[];d=b.parent().height(),b.parent().css({height:59}),setTimeout(function(){b.find("ul").children(":not('h2:first')").each(function(b){e.push(a(this).position().top),a(this).css({"margin-top":-e[b]}).children().hide()}).animate({"margin-top":0},1600).children().fadeIn(),b.parent().animate({height:d},2600),b.find("ul").children(":not('h2:first')").addClass("bounceInDown").css({"-webkit-animation-duration":"2s","-webkit-animation-delay":"0","-webkit-animation-timing-function":"ease","-webkit-animation-fill-mode":"both"}).end().children("h2").css({position:"relative"})},600),c.click(function(){return a(this).parent().css({position:"relative"}),a(this).parent().siblings().slideToggle(),b.parent().removeAttr("style"),!1})}}(!window.ActiveXObject||window.XMLHttpRequest||"http://www.tinygroup.org"!=location.href&&"http://www.tinygroup.org/"!=location.href)&&a(function(){b(),c(),d(),e();var a=document.createElement("img");a.onload=function(){window.onload=function(){skinShow()}}})}(jQuery);

/*<script src="${ctxStatic}/org/tinygroup/timeline/js/jquery.timelinr.js"></script>*/
function autoPlay(){var a=$(settings.datesDiv).find("a."+settings.datesSelectedClass);"forward"==settings.autoPlayDirection?a.parent().is("li:last-child")?$(settings.datesDiv+" li:first-child").find("a").trigger("click"):a.parent().next().find("a").trigger("click"):"backward"==settings.autoPlayDirection&&(a.parent().is("li:first-child")?$(settings.datesDiv+" li:last-child").find("a").trigger("click"):a.parent().prev().find("a").trigger("click"))}jQuery.fn.timelinr=function(a){settings=jQuery.extend({orientation:"horizontal",containerDiv:"#timeline",datesDiv:"#dates",datesSelectedClass:"selected",datesSpeed:500,issuesDiv:"#issues",issuesSelectedClass:"selected",issuesSpeed:200,issuesTransparency:.2,issuesTransparencySpeed:500,prevButton:"#prev",nextButton:"#next",arrowKeys:"false",startAt:1,autoPlay:"false",autoPlayDirection:"forward",autoPlayPause:2e3},a),$(function(){var e,f,i,j,m,n,o,a=$(settings.datesDiv+" li").length,b=$(settings.issuesDiv+" li").length;$(settings.datesDiv).find("a."+settings.datesSelectedClass),$(settings.issuesDiv).find("li."+settings.issuesSelectedClass),e=$(settings.containerDiv).width(),f=$(settings.containerDiv).height(),$(settings.issuesDiv).width(),$(settings.issuesDiv).height(),i=$(settings.issuesDiv+" li").width(),j=$(settings.issuesDiv+" li").height(),$(settings.datesDiv).width(),$(settings.datesDiv).height(),m=$(settings.datesDiv+" li").width(),n=$(settings.datesDiv+" li").height(),"horizontal"==settings.orientation?($(settings.issuesDiv).width(i*b),$(settings.datesDiv).width(m*a).css("marginLeft",e/2-m/2),o=parseInt($(settings.datesDiv).css("marginLeft").substring(0,$(settings.datesDiv).css("marginLeft").indexOf("px")))):"vertical"==settings.orientation&&($(settings.issuesDiv).height(j*b),$(settings.datesDiv).height(n*a).css("marginTop",f/2-n/2),o=parseInt($(settings.datesDiv).css("marginTop").substring(0,$(settings.datesDiv).css("marginTop").indexOf("px")))),$(settings.datesDiv+" a").click(function(a){a.preventDefault(),$(this).text();var c=$(this).parent().prevAll().length;"horizontal"==settings.orientation?$(settings.issuesDiv).animate({marginLeft:-i*c},{queue:!1,duration:settings.issuesSpeed}):"vertical"==settings.orientation&&$(settings.issuesDiv).animate({marginTop:-j*c},{queue:!1,duration:settings.issuesSpeed}),$(settings.issuesDiv+" li").animate({opacity:settings.issuesTransparency},{queue:!1,duration:settings.issuesSpeed}).removeClass(settings.issuesSelectedClass).eq(c).addClass(settings.issuesSelectedClass).fadeTo(settings.issuesTransparencySpeed,1),$(settings.datesDiv+" a").removeClass(settings.datesSelectedClass),$(this).addClass(settings.datesSelectedClass),"horizontal"==settings.orientation?$(settings.datesDiv).animate({marginLeft:o-m*c},{queue:!1,duration:settings.datesSpeed}):"vertical"==settings.orientation&&$(settings.datesDiv).animate({marginTop:o-n*c},{queue:!1,duration:settings.datesSpeed})}),$(settings.nextButton).bind("click",function(a){var c,e,f;a.preventDefault(),"horizontal"==settings.orientation?(c=parseInt($(settings.issuesDiv).css("marginLeft").substring(0,$(settings.issuesDiv).css("marginLeft").indexOf("px"))),e=parseInt($(settings.datesDiv).css("marginLeft").substring(0,$(settings.datesDiv).css("marginLeft").indexOf("px"))),f=e-m,-(i*b-i)>=c?($(settings.issuesDiv).stop(),$(settings.datesDiv+" li:last-child a").click()):$(settings.issuesDiv).is(":animated")||($(settings.issuesDiv).animate({marginLeft:c-i},{queue:!1,duration:settings.issuesSpeed}),$(settings.issuesDiv+" li").animate({opacity:settings.issuesTransparency},{queue:!1,duration:settings.issuesSpeed}),$(settings.issuesDiv+" li."+settings.issuesSelectedClass).removeClass(settings.issuesSelectedClass).next().fadeTo(settings.issuesTransparencySpeed,1).addClass(settings.issuesSelectedClass),$(settings.datesDiv).animate({marginLeft:f},{queue:!1,duration:settings.datesSpeed}),$(settings.datesDiv+" a."+settings.datesSelectedClass).removeClass(settings.datesSelectedClass).parent().next().children().addClass(settings.datesSelectedClass))):"vertical"==settings.orientation&&(c=parseInt($(settings.issuesDiv).css("marginTop").substring(0,$(settings.issuesDiv).css("marginTop").indexOf("px"))),e=parseInt($(settings.datesDiv).css("marginTop").substring(0,$(settings.datesDiv).css("marginTop").indexOf("px"))),f=e-n,-(j*b-j)>=c?($(settings.issuesDiv).stop(),$(settings.datesDiv+" li:last-child a").click()):$(settings.issuesDiv).is(":animated")||($(settings.issuesDiv).animate({marginTop:c-j},{queue:!1,duration:settings.issuesSpeed}),$(settings.issuesDiv+" li").animate({opacity:settings.issuesTransparency},{queue:!1,duration:settings.issuesSpeed}),$(settings.issuesDiv+" li."+settings.issuesSelectedClass).removeClass(settings.issuesSelectedClass).next().fadeTo(settings.issuesTransparencySpeed,1).addClass(settings.issuesSelectedClass),$(settings.datesDiv).animate({marginTop:f},{queue:!1,duration:settings.datesSpeed}),$(settings.datesDiv+" a."+settings.datesSelectedClass).removeClass(settings.datesSelectedClass).parent().next().children().addClass(settings.datesSelectedClass)))}),$(settings.prevButton).click(function(a){var b,d,e;a.preventDefault(),"horizontal"==settings.orientation?(b=parseInt($(settings.issuesDiv).css("marginLeft").substring(0,$(settings.issuesDiv).css("marginLeft").indexOf("px"))),d=parseInt($(settings.datesDiv).css("marginLeft").substring(0,$(settings.datesDiv).css("marginLeft").indexOf("px"))),e=d+m,b>=0?($(settings.issuesDiv).stop(),$(settings.datesDiv+" li:first-child a").click()):$(settings.issuesDiv).is(":animated")||($(settings.issuesDiv).animate({marginLeft:b+i},{queue:!1,duration:settings.issuesSpeed}),$(settings.issuesDiv+" li").animate({opacity:settings.issuesTransparency},{queue:!1,duration:settings.issuesSpeed}),$(settings.issuesDiv+" li."+settings.issuesSelectedClass).removeClass(settings.issuesSelectedClass).prev().fadeTo(settings.issuesTransparencySpeed,1).addClass(settings.issuesSelectedClass),$(settings.datesDiv).animate({marginLeft:e},{queue:!1,duration:settings.datesSpeed}),$(settings.datesDiv+" a."+settings.datesSelectedClass).removeClass(settings.datesSelectedClass).parent().prev().children().addClass(settings.datesSelectedClass))):"vertical"==settings.orientation&&(b=parseInt($(settings.issuesDiv).css("marginTop").substring(0,$(settings.issuesDiv).css("marginTop").indexOf("px"))),d=parseInt($(settings.datesDiv).css("marginTop").substring(0,$(settings.datesDiv).css("marginTop").indexOf("px"))),e=d+n,b>=0?($(settings.issuesDiv).stop(),$(settings.datesDiv+" li:first-child a").click()):$(settings.issuesDiv).is(":animated")||($(settings.issuesDiv).animate({marginTop:b+j},{queue:!1,duration:settings.issuesSpeed}),$(settings.issuesDiv+" li").animate({opacity:settings.issuesTransparency},{queue:!1,duration:settings.issuesSpeed}),$(settings.issuesDiv+" li."+settings.issuesSelectedClass).removeClass(settings.issuesSelectedClass).prev().fadeTo(settings.issuesTransparencySpeed,1).addClass(settings.issuesSelectedClass),$(settings.datesDiv).animate({marginTop:e},{queue:!1,duration:settings.datesSpeed},{queue:!1,duration:settings.issuesSpeed}),$(settings.datesDiv+" a."+settings.datesSelectedClass).removeClass(settings.datesSelectedClass).parent().prev().children().addClass(settings.datesSelectedClass)))}),"true"==settings.arrowKeys&&("horizontal"==settings.orientation?$(document).keydown(function(a){39==a.keyCode&&$(settings.nextButton).click(),37==a.keyCode&&$(settings.prevButton).click()}):"vertical"==settings.orientation&&$(document).keydown(function(a){40==a.keyCode&&$(settings.nextButton).click(),38==a.keyCode&&$(settings.prevButton).click()})),$(settings.datesDiv+" li").eq(settings.startAt-1).find("a").trigger("click"),"true"==settings.autoPlay&&setInterval("autoPlay()",settings.autoPlayPause)})};

/*<script src="${ctxStatic}/org/tinygroup/clockpicker/js/bootstrap-clockpicker.js"></script>*/
!function(){function m(a){return document.createElementNS(e,a)}function n(a){return(10>a?"0":"")+a}function p(a){var b=++o+"";return a?a+b:b}function x(b,e){function M(a,b){var u,g=h.offset(),i=/^touch/.test(a.type),l=g.left+q,m=g.top+q,n=(i?a.originalEvent.touches[0]:a).pageX-l,o=(i?a.originalEvent.touches[0]:a).pageY-m,p=Math.sqrt(n*n+o*o),s=!1;b&&(r-t>p||p>r+t)||(a.preventDefault(),u=setTimeout(function(){d.addClass("clockpicker-moving")},200),f&&h.append(C.canvas),C.setHand(n,o,!b,!0),c.off(j).on(j,function(a){a.preventDefault();var b=/^touch/.test(a.type),c=(b?a.originalEvent.touches[0]:a).pageX-l,d=(b?a.originalEvent.touches[0]:a).pageY-m;(s||c!==n||d!==o)&&(s=!0,C.setHand(c,d,!1,!0))}),c.off(k).on(k,function(a){c.off(k),a.preventDefault();var f=/^touch/.test(a.type),g=(f?a.originalEvent.changedTouches[0]:a).pageX-l,i=(f?a.originalEvent.changedTouches[0]:a).pageY-m;(b||s)&&g===n&&i===o&&C.setHand(g,i),"hours"===C.currentView?C.toggleView("minutes",v/2):e.autoclose&&(C.minutesView.addClass("clockpicker-dial-out"),setTimeout(function(){C.done()},v/2)),h.prepend(N),clearTimeout(u),d.removeClass("clockpicker-moving"),c.off(j)}))}var E,H,I,J,K,G,L,N,O,P,Q,R,S,T,g=a(w),h=g.find(".clockpicker-plate"),l=g.find(".clockpicker-hours"),o=g.find(".clockpicker-minutes"),x=g.find(".clockpicker-am-pm-block"),z="INPUT"===b.prop("tagName"),A=z?b:b.find("input"),B=b.find(".input-group-addon"),C=this;if(this.id=p("cp"),this.element=b,this.options=e,this.isAppended=!1,this.isShown=!1,this.currentView="hours",this.isInput=z,this.input=A,this.addon=B,this.popover=g,this.plate=h,this.hoursView=l,this.minutesView=o,this.amPmBlock=x,this.spanHours=g.find(".clockpicker-span-hours"),this.spanMinutes=g.find(".clockpicker-span-minutes"),this.spanAmPm=g.find(".clockpicker-span-am-pm"),this.amOrPm="PM",e.twelvehour&&(E=['<div class="clockpicker-am-pm-block">','<button type="button" class="btn btn-sm btn-default clockpicker-button clockpicker-am-button">',"AM</button>",'<button type="button" class="btn btn-sm btn-default clockpicker-button clockpicker-pm-button">',"PM</button>","</div>"].join(""),a(E),a('<button type="button" class="btn btn-sm btn-default clockpicker-button am-button">AM</button>').on("click",function(){C.amOrPm="AM",a(".clockpicker-span-am-pm").empty().append("AM")}).appendTo(this.amPmBlock),a('<button type="button" class="btn btn-sm btn-default clockpicker-button pm-button">PM</button>').on("click",function(){C.amOrPm="PM",a(".clockpicker-span-am-pm").empty().append("PM")}).appendTo(this.amPmBlock)),e.autoclose||a('<button type="button" class="btn btn-sm btn-default btn-block clockpicker-button">'+e.donetext+"</button>").click(a.proxy(this.done,this)).appendTo(g),"top"!==e.placement&&"bottom"!==e.placement||"top"!==e.align&&"bottom"!==e.align||(e.align="left"),"left"!==e.placement&&"right"!==e.placement||"left"!==e.align&&"right"!==e.align||(e.align="top"),g.addClass(e.placement),g.addClass("clockpicker-align-"+e.align),this.spanHours.click(a.proxy(this.toggleView,this,"hours")),this.spanMinutes.click(a.proxy(this.toggleView,this,"minutes")),A.on("focus.clockpicker click.clockpicker",a.proxy(this.show,this)),B.on("click.clockpicker",a.proxy(this.toggle,this)),G=a('<div class="clockpicker-tick"></div>'),e.twelvehour)for(H=1;13>H;H+=1)I=G.clone(),J=H/6*Math.PI,K=r,I.css("font-size","120%"),I.css({left:q+Math.sin(J)*K-t,top:q-Math.cos(J)*K-t}),I.html(0===H?"00":H),l.append(I),I.on(i,M);else for(H=0;24>H;H+=1)I=G.clone(),J=H/6*Math.PI,L=H>0&&13>H,K=L?s:r,I.css({left:q+Math.sin(J)*K-t,top:q-Math.cos(J)*K-t}),L&&I.css("font-size","120%"),I.html(0===H?"00":H),l.append(I),I.on(i,M);for(H=0;60>H;H+=5)I=G.clone(),J=H/30*Math.PI,I.css({left:q+Math.sin(J)*r-t,top:q-Math.cos(J)*r-t}),I.css("font-size","120%"),I.html(n(H)),o.append(I),I.on(i,M);h.on(i,function(b){0===a(b.target).closest(".clockpicker-tick").length&&M(b,!0)}),f&&(N=g.find(".clockpicker-canvas"),O=m("svg"),O.setAttribute("class","clockpicker-svg"),O.setAttribute("width",u),O.setAttribute("height",u),P=m("g"),P.setAttribute("transform","translate("+q+","+q+")"),Q=m("circle"),Q.setAttribute("class","clockpicker-canvas-bearing"),Q.setAttribute("cx",0),Q.setAttribute("cy",0),Q.setAttribute("r",2),R=m("line"),R.setAttribute("x1",0),R.setAttribute("y1",0),S=m("circle"),S.setAttribute("class","clockpicker-canvas-bg"),S.setAttribute("r",t),T=m("circle"),T.setAttribute("class","clockpicker-canvas-fg"),T.setAttribute("r",3.5),P.appendChild(R),P.appendChild(S),P.appendChild(T),P.appendChild(Q),O.appendChild(P),N.append(O),this.hand=R,this.bg=S,this.fg=T,this.bearing=Q,this.g=P,this.canvas=N),y(this.options.init)}function y(a){a&&"function"==typeof a&&a()}var d,a=window.jQuery,b=a(window),c=a(document),e="http://www.w3.org/2000/svg",f="SVGAngle"in window&&function(){var a,b=document.createElement("div");return b.innerHTML="<svg/>",a=(b.firstChild&&b.firstChild.namespaceURI)==e,b.innerHTML="",a}(),g=function(){var a=document.createElement("div").style;return"transition"in a||"WebkitTransition"in a||"MozTransition"in a||"msTransition"in a||"OTransition"in a}(),h="ontouchstart"in window,i="mousedown"+(h?" touchstart":""),j="mousemove.clockpicker"+(h?" touchmove.clockpicker":""),k="mouseup.clockpicker"+(h?" touchend.clockpicker":""),l=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null,o=0,q=100,r=80,s=54,t=13,u=2*q,v=g?350:1,w=['<div class="popover clockpicker-popover">','<div class="arrow"></div>','<div class="popover-title">','<span class="clockpicker-span-hours text-primary"></span>'," : ",'<span class="clockpicker-span-minutes"></span>','<span class="clockpicker-span-am-pm"></span>',"</div>",'<div class="popover-content">','<div class="clockpicker-plate">','<div class="clockpicker-canvas"></div>','<div class="clockpicker-dial clockpicker-hours"></div>','<div class="clockpicker-dial clockpicker-minutes clockpicker-dial-out"></div>',"</div>",'<span class="clockpicker-am-pm-block">',"</span>","</div>","</div>"].join("");x.DEFAULTS={"default":"",fromnow:0,placement:"bottom",align:"left",donetext:"完成",autoclose:!1,twelvehour:!1,vibrate:!0},x.prototype.toggle=function(){this[this.isShown?"hide":"show"]()},x.prototype.locate=function(){var a=this.element,b=this.popover,c=a.offset(),d=a.outerWidth(),e=a.outerHeight(),f=this.options.placement,g=this.options.align,h={};switch(b.show(),f){case"bottom":h.top=c.top+e;break;case"right":h.left=c.left+d;break;case"top":h.top=c.top-b.outerHeight();break;case"left":h.left=c.left-b.outerWidth()}switch(g){case"left":h.left=c.left;break;case"right":h.left=c.left+d-b.outerWidth();break;case"top":h.top=c.top;break;case"bottom":h.top=c.top+e-b.outerHeight()}h["z-index"]=this.options["z-index"]||"",b.css(h)},x.prototype.show=function(){var f,g,h;this.isShown||(y(this.options.beforeShow),f=this,this.isAppended||(d=a(document.body).append(this.popover),b.on("resize.clockpicker"+this.id,function(){f.isShown&&f.locate()}),this.isAppended=!0),g=((this.input.prop("value")||this.options["default"]||"")+"").split(":"),"now"===g[0]&&(h=new Date(+new Date+this.options.fromnow),g=[h.getHours(),h.getMinutes()]),this.hours=+g[0]||0,this.minutes=+g[1]||0,this.spanHours.html(n(this.hours)),this.spanMinutes.html(n(this.minutes)),this.toggleView("hours"),this.locate(),this.isShown=!0,c.on("click.clockpicker."+this.id+" focusin.clockpicker."+this.id,function(b){var c=a(b.target);0===c.closest(f.popover).length&&0===c.closest(f.addon).length&&0===c.closest(f.input).length&&f.hide()}),c.on("keyup.clockpicker."+this.id,function(a){27===a.keyCode&&f.hide()}),y(this.options.afterShow))},x.prototype.hide=function(){y(this.options.beforeHide),this.isShown=!1,c.off("click.clockpicker."+this.id+" focusin.clockpicker."+this.id),c.off("keyup.clockpicker."+this.id),this.popover.hide(),y(this.options.afterHide)},x.prototype.toggleView=function(b,c){var e,f,g,d=!1;"minutes"===b&&"visible"===a(this.hoursView).css("visibility")&&(y(this.options.beforeHourSelect),d=!0),e="hours"===b,f=e?this.hoursView:this.minutesView,g=e?this.minutesView:this.hoursView,this.currentView=b,this.spanHours.toggleClass("text-primary",e),this.spanMinutes.toggleClass("text-primary",!e),g.addClass("clockpicker-dial-out"),f.css("visibility","visible").removeClass("clockpicker-dial-out"),this.resetClock(c),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout(function(){g.css("visibility","hidden")},v),d&&y(this.options.afterHourSelect)},x.prototype.resetClock=function(a){var b=this.currentView,c=this[b],d="hours"===b,e=Math.PI/(d?6:30),g=c*e,h=d&&c>0&&13>c?s:r,i=Math.sin(g)*h,j=-Math.cos(g)*h,k=this;f&&a?(k.canvas.addClass("clockpicker-canvas-out"),setTimeout(function(){k.canvas.removeClass("clockpicker-canvas-out"),k.setHand(i,j)},a)):this.setHand(i,j)},x.prototype.setHand=function(b,c,d,e){var p,q,t,g=Math.atan2(b,-c),h="hours"===this.currentView,i=Math.PI/(h||d?6:30),j=Math.sqrt(b*b+c*c),k=this.options,m=h&&(r+s)/2>j,o=m?s:r;return k.twelvehour&&(o=r),0>g&&(g=2*Math.PI+g),p=Math.round(g/i),g=p*i,k.twelvehour?h?0===p&&(p=12):(d&&(p*=5),60===p&&(p=0)):h?(12===p&&(p=0),p=m?0===p?12:p:0===p?0:p+12):(d&&(p*=5),60===p&&(p=0)),this[this.currentView]!==p&&l&&this.options.vibrate&&(this.vibrateTimer||(navigator[l](10),this.vibrateTimer=setTimeout(a.proxy(function(){this.vibrateTimer=null},this),100))),this[this.currentView]=p,this[h?"spanHours":"spanMinutes"].html(n(p)),f?(e||!h&&p%5?(this.g.insertBefore(this.hand,this.bearing),this.g.insertBefore(this.bg,this.fg),this.bg.setAttribute("class","clockpicker-canvas-bg clockpicker-canvas-bg-trans")):(this.g.insertBefore(this.hand,this.bg),this.g.insertBefore(this.fg,this.bg),this.bg.setAttribute("class","clockpicker-canvas-bg")),q=Math.sin(g)*o,t=-Math.cos(g)*o,this.hand.setAttribute("x2",q),this.hand.setAttribute("y2",t),this.bg.setAttribute("cx",q),this.bg.setAttribute("cy",t),this.fg.setAttribute("cx",q),this.fg.setAttribute("cy",t),void 0):(this[h?"hoursView":"minutesView"].find(".clockpicker-tick").each(function(){var b=a(this);b.toggleClass("active",p===+b.html())}),void 0)},x.prototype.done=function(){y(this.options.beforeDone),this.hide();var a=this.input.prop("value"),b=n(this.hours)+":"+n(this.minutes);this.options.twelvehour&&(b+=this.amOrPm),this.input.prop("value",b),b!==a&&(this.input.triggerHandler("change"),this.isInput||this.element.trigger("change")),this.options.autoclose&&this.input.trigger("blur"),y(this.options.afterDone)},x.prototype.remove=function(){this.element.removeData("clockpicker"),this.input.off("focus.clockpicker click.clockpicker"),this.addon.off("click.clockpicker"),this.isShown&&this.hide(),this.isAppended&&(b.off("resize.clockpicker"+this.id),this.popover.remove())},a.fn.clockpicker=function(b){var c=Array.prototype.slice.call(arguments,1);return this.each(function(){var f,d=a(this),e=d.data("clockpicker");e?"function"==typeof e[b]&&e[b].apply(e,c):(f=a.extend({},x.DEFAULTS,d.data(),"object"==typeof b&&b),d.data("clockpicker",new x(d,f)))})}}();

/*<script src="${ctxStatic}/org/tinygroup/rolling/js/jcarousellite.min.js"></script>*/
(function($){$.fn.jCarouselLite=function(o){o=$.extend({btnPrev:null,btnNext:null,btnGo:null,mouseWheel:false,auto:null,speed:200,easing:null,vertical:false,circular:true,visible:3,start:0,scroll:1,beforeStart:null,afterEnd:null},o||{});return this.each(function(){var b=false,animCss=o.vertical?"top":"left",sizeCss=o.vertical?"height":"width";var c=$(this),ul=$("ul",c),tLi=$("li",ul),tl=tLi.size(),v=o.visible;if(o.circular){ul.prepend(tLi.slice(tl-v-1+1).clone()).append(tLi.slice(0,v).clone());o.start+=v}var f=$("li",ul),itemLength=f.size(),curr=o.start;c.css("visibility","visible");f.css({overflow:"hidden",float:o.vertical?"none":"left"});ul.css({margin:"0",padding:"0",position:"relative","list-style-type":"none","z-index":"1"});c.css({overflow:"hidden",position:"relative","z-index":"2",left:"0px"});var g=o.vertical?height(f):width(f);var h=g*itemLength;var j=g*v;f.css({width:f.width(),height:f.height()});ul.css(sizeCss,h+"px").css(animCss,-(curr*g));c.css(sizeCss,j+"px");if(o.btnPrev)$(o.btnPrev).click(function(){return go(curr-o.scroll)});if(o.btnNext)$(o.btnNext).click(function(){return go(curr+o.scroll)});if(o.btnGo)$.each(o.btnGo,function(i,a){$(a).click(function(){return go(o.circular?o.visible+i:i)})});if(o.mouseWheel&&c.mousewheel)c.mousewheel(function(e,d){return d>0?go(curr-o.scroll):go(curr+o.scroll)});if(o.auto)setInterval(function(){go(curr+o.scroll)},o.auto+o.speed);function vis(){return f.slice(curr).slice(0,v)};function go(a){if(!b){if(o.beforeStart)o.beforeStart.call(this,vis());if(o.circular){if(a<=o.start-v-1){ul.css(animCss,-((itemLength-(v*2))*g)+"px");curr=a==o.start-v-1?itemLength-(v*2)-1:itemLength-(v*2)-o.scroll}else if(a>=itemLength-v+1){ul.css(animCss,-((v)*g)+"px");curr=a==itemLength-v+1?v+1:v+o.scroll}else curr=a}else{if(a<0||a>itemLength-v)return;else curr=a}b=true;ul.animate(animCss=="left"?{left:-(curr*g)}:{top:-(curr*g)},o.speed,o.easing,function(){if(o.afterEnd)o.afterEnd.call(this,vis());b=false});if(!o.circular){$(o.btnPrev+","+o.btnNext).removeClass("disabled");$((curr-o.scroll<0&&o.btnPrev)||(curr+o.scroll>itemLength-v&&o.btnNext)||[]).addClass("disabled")}}return false}})};function css(a,b){return parseInt($.css(a[0],b))||0};function width(a){return a[0].offsetWidth+css(a,'marginLeft')+css(a,'marginRight')};function height(a){return a[0].offsetHeight+css(a,'marginTop')+css(a,'marginBottom')}})(jQuery);

/*<script src="${ctxStatic}/org/tinygroup/rolling/js/jquery.textSlider.js"></script>*/
!function(a){a.fn.textSlider=function(b){return b=jQuery.extend({speed:"normal",line:2,timer:1e3},b),this.each(function(){a.fn.textSlider.scllor(a(this),b)})},a.fn.textSlider.scllor=function(b,c){var e,d=a("ul:eq(0)",b),f=d.children(),g=a(".up:eq(0)",b),h=a(".down:eq(0)",b),j=a(f[0]).height(),k=0-c.line*j,l=function(){g.unbind("click",l),d.animate({marginTop:k},c.speed,function(){for(i=0;i<c.line;i++)d.find("li:first").appendTo(d);d.css({marginTop:0}),g.bind("click",l)})},m=function(){for(h.unbind("click",m),d.css({marginTop:k}),i=0;i<c.line;i++)d.find("li:last").prependTo(d);d.animate({marginTop:0},c.speed,function(){h.bind("click",m)})},n=function(){e=window.setInterval(l,c.timer)},o=function(){window.clearInterval(e)};d.hover(o,n).mouseout(),g.css("cursor","pointer").click(l),g.hover(o,n),h.css("cursor","pointer").click(m),h.hover(o,n)}}(jQuery);

/*<script src="${ctxStatic}/org/tinygroup/rolling/js/dropDown.js"></script>*/
function marquee(a,b,c){function h(){d=setInterval(i,b),e||(f.scrollTop+=2)}function i(){0!=f.scrollTop%a?(f.scrollTop+=2,f.scrollTop>=f.scrollHeight/2&&(f.scrollTop=0)):(clearInterval(d),setTimeout(h,c))}var d,g,e=!1,f=document.getElementById("marquee");document.getElementById("holder").offsetHeight<=a||(g=f.innerHTML.replace("holder","holder2"),f.innerHTML+=g,f.onmouseover=function(){e=!0},f.onmouseout=function(){e=!1},f.scrollTop=0,setTimeout(h,c))};

/*<script src="${ctxStatic}/org/tinygroup/modal/js/jquery-drag.js"></script>*/
function Tinymodal_alert(a,b){$(document.body).append('<div id="modal-alert" class="modal hide modal-alert"><div class="modal-alert-info">'+a+"</div>"+"</div>"),$("#modal-alert").fadeIn(),setTimeout("Tinymodal_alert_hide()",b)}function Tinymodal_alert_hide(){$("#modal-alert").fadeOut("normal",function(){$("#modal-alert").remove()})}!function(a,b){"use strict";function i(a,b){this.element=a,this.options=b}var c=a.$,d=a.document,e=c(d),f=c(d.body),g="jquery-drag",h={handle:null,drag:null,axis:"xy",cursor:"move",min:null,max:null,zIndex:9999,ondragbefore:c.noop,ondragstart:c.noop,ondrag:c.noop,ondragend:c.noop};c.fn.drag=function(a){var j,k,d="string"===c.type(a),e=[].slice.call(arguments,1),f=c.extend({},h);if(d&&"_"!==d[0]){if(!this.length)return;return j=c(this[0]),k=j.data(g),k||j.data(g,k=new i(j[0],f)._init()),i.prototype[a]?i.prototype[a].apply(k,e):b}return d||(f=c.extend(f,a)),this.each(function(){var a=this,b=c(a).data(g);b||c(a).data(g,b=new i(a,f)._init())})},c.fn.drag.defaults=h,i.prototype={_init:function(){var a=this,b=a.options,d=c(a.element);return a.$element=d,b.handle?d.on("mousedown taphold",b.handle,c.proxy(a._start,a)):d.on("mousedown taphold",c.proxy(a._start,a)),e.mousemove(c.proxy(a._move,a)).mouseup(c.proxy(a._end,a)).bind("touchmove",c.proxy(a._move,a)).bind("touchend",c.proxy(a._end,a)).bind("touchcancel",c.proxy(a._end,a)),a},_start:function(a){if(!this.is){a=a.originalEvent,a.preventDefault();var i,j,b=this,d=b.options,e=b.$element,g=d.handle?c(a.target).closest(d.handle):c(a.target),h=d.drag?g.closest(d.drag):e,k=a.touches?a.touches[0]:a;e.has(h).length||(h=e),b.$drag=h,d.ondragbefore.call(h[0],a,b),b.zIndex=h.css("z-index"),b.cursor=f.css("cursor"),b.$drag=h.css("z-index",d.zIndex),i=h.css("position"),j=h.offset(),"static"===i?h.css("position","relative"):("fixed"===i||"absolute"===i)&&h.css(h.position()),b.pos={x:k.pageX,y:k.pageY,l:j.left,t:j.top},b.is=!0,b.options.cursor&&f.css("cursor",d.cursor),d.ondragstart.call(h[0],a,b)}},_move:function(a){if(this.is){a=a.originalEvent,a.preventDefault();var j,k,l,m,c=this,d=c.options,e=d.min,f=d.max,g=c.pos,h=c.$drag,i=h.parent(!0).offset(),n={},o=a.touches?a.touches[0]:a;~d.axis.indexOf("x")&&(n.left=o.pageX-g.x+g.l),~d.axis.indexOf("y")&&(n.top=o.pageY-g.y+g.t),e&&e.left!==b&&n.left<(j=e.left+i.left)&&(n.left=j),e&&e.top!==b&&n.top<(k=e.top+i.top)&&(n.top=k),f&&f.left!==b&&n.left>(l=f.left+i.left)&&(n.left=l),f&&f.top!==b&&n.top>f.top&&n.top>(m=f.top+i.top)&&(n.top=m),h.offset(n),d.ondrag.call(h[0],a,c)}},_end:function(a){if(this.is){var b=this,c=b.$drag;a.preventDefault(),b.is=!1,b.options.cursor&&f.css("cursor",b.cursor),c.css("z-index",b.zIndex),b.options.ondragend.call(c[0],a,b)}},options:function(a,d){if("string"===c.type(a)&&d===b)return this.options[a];var e={};"object"===c.type(a)?e=a:e[a]=d,this.options=c.extend(this.options,e)}}}(this);

/*<script src="${ctxStatic}/org/tinygroup/modal/js/bootstrap-modalmanager.js"></script>*/
!function(a){"use strict";function d(a){return function(b){return void 0!=b?this===b.target?a.apply(this,arguments):void 0:void 0}}var c,b=function(a,b){this.init(a,b)};b.prototype={constructor:b,init:function(b,c){if(this.$element=a(b),this.options=a.extend({},a.fn.modalmanager.defaults,this.$element.data(),"object"==typeof c&&c),this.stack=[],this.backdropCount=0,this.options.resize){var d,e=this;a(window).on("resize.modal",function(){d&&clearTimeout(d),d=setTimeout(function(){for(var a=0;a<e.stack.length;a++)e.stack[a].isShown&&e.stack[a].layout()},10)})}},createModal:function(b,c){a(b).modal(a.extend({manager:this},c))},appendModal:function(b){this.stack.push(b);var c=this;b.$element.on("show.modalmanager",d(function(){var e=function(){b.isShown=!0;var d=a.support.transition&&b.$element.hasClass("fade");c.$element.toggleClass("page-overflow",a(window).height()<c.$element.height()).toggleClass("modal-open",c.hasOpenModal()),b.$parent=b.$element.parent(),b.$container=c.createContainer(b),b.$element.appendTo(b.$container),c.backdrop(b,function(){b.$element.show(),d&&b.$element[0].offsetWidth,b.layout(),b.$element.addClass("in").attr("aria-hidden",!1);var e=function(){c.setFocus(),b.$element.trigger("shown")};d?b.$element.one(a.support.transition.end,e):e()})};b.options.replace?c.replace(e):e()})),b.$element.on("hidden.modalmanager",d(function(){if(c.backdrop(b),b.$element.parent().length)if(b.$backdrop){var e=a.support.transition&&b.$element.hasClass("fade");e&&b.$element[0].offsetWidth,a.support.transition&&b.$element.hasClass("fade")?b.$backdrop.one(a.support.transition.end,function(){b.destroy()}):b.destroy()}else b.destroy();else c.destroyModal(b)})),b.$element.on("destroyed.modalmanager",d(function(){c.destroyModal(b)}))},getOpenModals:function(){var b,a=[];for(b=0;b<this.stack.length;b++)this.stack[b].isShown&&a.push(this.stack[b]);return a},hasOpenModal:function(){return this.getOpenModals().length>0},setFocus:function(){var a,b;for(b=0;b<this.stack.length;b++)this.stack[b].isShown&&(a=this.stack[b]);a&&a.focus()},destroyModal:function(a){a.$element.off(".modalmanager"),a.$backdrop&&this.removeBackdrop(a),this.stack.splice(this.getIndexOfModal(a),1);var b=this.hasOpenModal();this.$element.toggleClass("modal-open",b),b||this.$element.removeClass("page-overflow"),this.removeContainer(a),this.setFocus()},getModalAt:function(a){return this.stack[a]},getIndexOfModal:function(a){for(var b=0;b<this.stack.length;b++)if(a===this.stack[b])return b},replace:function(b){var c,e;for(e=0;e<this.stack.length;e++)this.stack[e].isShown&&(c=this.stack[e]);c?(this.$backdropHandle=c.$backdrop,c.$backdrop=null,b&&c.$element.one("hidden",d(a.proxy(b,this))),c.hide()):b&&b()},removeBackdrop:function(a){a.$backdrop.remove(),a.$backdrop=null},createBackdrop:function(b,c){var d;return this.$backdropHandle?(d=this.$backdropHandle,d.off(".modalmanager"),this.$backdropHandle=null,this.isLoading&&this.removeSpinner()):d=a(c).addClass(b).appendTo(this.$element),d},removeContainer:function(a){a.$container.remove(),a.$container=null},createContainer:function(b){var e;return e=a('<div class="modal-scrollable">').css("z-index",c("modal",this.getOpenModals().length)).appendTo(this.$element),b&&"static"!=b.options.backdrop?e.on("click.modal",d(function(){b.hide()})):b&&e.on("click.modal",d(function(){b.attention()})),e},backdrop:function(b,d){var g,h,e=b.$element.hasClass("fade")?"fade":"",f=b.options.backdrop&&this.backdropCount<this.options.backdropLimit;b.isShown&&f?(g=a.support.transition&&e&&!this.$backdropHandle,b.$backdrop=this.createBackdrop(e,b.options.backdropTemplate),b.$backdrop.css("z-index",c("backdrop",this.getOpenModals().length)),g&&b.$backdrop[0].offsetWidth,b.$backdrop.addClass("in"),this.backdropCount+=1,g?b.$backdrop.one(a.support.transition.end,d):d()):!b.isShown&&b.$backdrop?(b.$backdrop.removeClass("in"),this.backdropCount-=1,h=this,a.support.transition&&b.$element.hasClass("fade")?b.$backdrop.one(a.support.transition.end,function(){h.removeBackdrop(b)}):h.removeBackdrop(b)):d&&d()},removeSpinner:function(){this.$spinner&&this.$spinner.remove(),this.$spinner=null,this.isLoading=!1},removeLoading:function(){this.$backdropHandle&&this.$backdropHandle.remove(),this.$backdropHandle=null,this.removeSpinner()},loading:function(b){var d,e,f;b=b||function(){},this.$element.toggleClass("page-overflow",a(window).height()<this.$element.height()).toggleClass("modal-open",!this.isLoading||this.hasOpenModal()),this.isLoading?this.isLoading&&this.$backdropHandle?(this.$backdropHandle.removeClass("in"),f=this,a.support.transition?this.$backdropHandle.one(a.support.transition.end,function(){f.removeLoading()}):f.removeLoading()):b&&b(this.isLoading):(this.$backdropHandle=this.createBackdrop("fade",this.options.backdropTemplate),this.$backdropHandle[0].offsetWidth,d=this.getOpenModals(),this.$backdropHandle.css("z-index",c("backdrop",d.length+1)).addClass("in"),e=a(this.options.spinner).css("z-index",c("modal",d.length+1)).appendTo(this.$element).addClass("in"),this.$spinner=a(this.createContainer()).append(e).on("click.modalmanager",a.proxy(this.loading,this)),this.isLoading=!0,a.support.transition?this.$backdropHandle.one(a.support.transition.end,b):b())}},c=function(){var b,c={};return function(d,e){if("undefined"==typeof b){var f=a('<div class="modal hide" />').appendTo("body"),g=a('<div class="modal-backdrop hide" />').appendTo("body");c["modal"]=+f.css("z-index"),c["backdrop"]=+g.css("z-index"),b=c["modal"]-c["backdrop"],f.remove(),g.remove(),g=f=null}return c[d]+b*e}}(),a.fn.modalmanager=function(c,d){return this.each(function(){var e=a(this),f=e.data("modalmanager");f||e.data("modalmanager",f=new b(this,c)),"string"==typeof c&&f[c].apply(f,[].concat(d))})},a.fn.modalmanager.defaults={backdropLimit:999,resize:!1,spinner:'<div class="loading-spinner fade" style="width:32px;margin-left:-16px; "><img src="data:image/gif;base64,R0lGODlhIAAgALMAAP///7Ozs/v7+9bW1uHh4fLy8rq6uoGBgTQ0NAEBARsbG8TExJeXl/39/VRUVAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFBQAAACwAAAAAIAAgAAAE5xDISSlLrOrNp0pKNRCdFhxVolJLEJQUoSgOpSYT4RowNSsvyW1icA16k8MMMRkCBjskBTFDAZyuAEkqCfxIQ2hgQRFvAQEEIjNxVDW6XNE4YagRjuBCwe60smQUDnd4Rz1ZAQZnFAGDd0hihh12CEE9kjAEVlycXIg7BAsMB6SlnJ87paqbSKiKoqusnbMdmDC2tXQlkUhziYtyWTxIfy6BE8WJt5YEvpJivxNaGmLHT0VnOgGYf0dZXS7APdpB309RnHOG5gDqXGLDaC457D1zZ/V/nmOM82XiHQjYKhKP1oZmADdEAAAh+QQFBQAAACwAAAAAGAAXAAAEchDISasKNeuJFKoHs4mUYlJIkmjIV54Soypsa0wmLSnqoTEtBw52mG0AjhYpBxioEqRNy8V0qFzNw+GGwlJki4lBqx1IBgjMkRIghwjrzcDti2/Gh7D9qN774wQGAYOEfwCChIV/gYmDho+QkZKTR3p7EQAh+QQFBQAAACwBAAAAHQAOAAAEchDISWdANesNHHJZwE2DUSEo5SjKKB2HOKGYFLD1CB/DnEoIlkti2PlyuKGEATMBaAACSyGbEDYD4zN1YIEmh0SCQQgYehNmTNNaKsQJXmBuuEYPi9ECAU/UFnNzeUp9VBQEBoFOLmFxWHNoQw6RWEocEQAh+QQFBQAAACwHAAAAGQARAAAEaRDICdZZNOvNDsvfBhBDdpwZgohBgE3nQaki0AYEjEqOGmqDlkEnAzBUjhrA0CoBYhLVSkm4SaAAWkahCFAWTU0A4RxzFWJnzXFWJJWb9pTihRu5dvghl+/7NQmBggo/fYKHCX8AiAmEEQAh+QQFBQAAACwOAAAAEgAYAAAEZXCwAaq9ODAMDOUAI17McYDhWA3mCYpb1RooXBktmsbt944BU6zCQCBQiwPB4jAihiCK86irTB20qvWp7Xq/FYV4TNWNz4oqWoEIgL0HX/eQSLi69boCikTkE2VVDAp5d1p0CW4RACH5BAUFAAAALA4AAAASAB4AAASAkBgCqr3YBIMXvkEIMsxXhcFFpiZqBaTXisBClibgAnd+ijYGq2I4HAamwXBgNHJ8BEbzgPNNjz7LwpnFDLvgLGJMdnw/5DRCrHaE3xbKm6FQwOt1xDnpwCvcJgcJMgEIeCYOCQlrF4YmBIoJVV2CCXZvCooHbwGRcAiKcmFUJhEAIfkEBQUAAAAsDwABABEAHwAABHsQyAkGoRivELInnOFlBjeM1BCiFBdcbMUtKQdTN0CUJru5NJQrYMh5VIFTTKJcOj2HqJQRhEqvqGuU+uw6AwgEwxkOO55lxIihoDjKY8pBoThPxmpAYi+hKzoeewkTdHkZghMIdCOIhIuHfBMOjxiNLR4KCW1ODAlxSxEAIfkEBQUAAAAsCAAOABgAEgAABGwQyEkrCDgbYvvMoOF5ILaNaIoGKroch9hacD3MFMHUBzMHiBtgwJMBFolDB4GoGGBCACKRcAAUWAmzOWJQExysQsJgWj0KqvKalTiYPhp1LBFTtp10Is6mT5gdVFx1bRN8FTsVCAqDOB9+KhEAIfkEBQUAAAAsAgASAB0ADgAABHgQyEmrBePS4bQdQZBdR5IcHmWEgUFQgWKaKbWwwSIhc4LonsXhBSCsQoOSScGQDJiWwOHQnAxWBIYJNXEoFCiEWDI9jCzESey7GwMM5doEwW4jJoypQQ743u1WcTV0CgFzbhJ5XClfHYd/EwZnHoYVDgiOfHKQNREAIfkEBQUAAAAsAAAPABkAEQAABGeQqUQruDjrW3vaYCZ5X2ie6EkcKaooTAsi7ytnTq046BBsNcTvItz4AotMwKZBIC6H6CVAJaCcT0CUBTgaTg5nTCu9GKiDEMPJg5YBBOpwlnVzLwtqyKnZagZWahoMB2M3GgsHSRsRACH5BAUFAAAALAEACAARABgAAARcMKR0gL34npkUyyCAcAmyhBijkGi2UW02VHFt33iu7yiDIDaD4/erEYGDlu/nuBAOJ9Dvc2EcDgFAYIuaXS3bbOh6MIC5IAP5Eh5fk2exC4tpgwZyiyFgvhEMBBEAIfkEBQUAAAAsAAACAA4AHQAABHMQyAnYoViSlFDGXBJ808Ep5KRwV8qEg+pRCOeoioKMwJK0Ekcu54h9AoghKgXIMZgAApQZcCCu2Ax2O6NUud2pmJcyHA4L0uDM/ljYDCnGfGakJQE5YH0wUBYBAUYfBIFkHwaBgxkDgX5lgXpHAXcpBIsRADs="></div></div>',backdropTemplate:'<div class="modal-backdrop" />'},a.fn.modalmanager.Constructor=b,a(function(){a(document).off("show.bs.modal").off("hidden.bs.modal")})}(jQuery);

/*<script src="${ctxStatic}/org/tinygroup/modal/js/bootstrap-modal.js"></script>*/
!function(a){"use strict";var b=function(a,b){this.init(a,b)};b.prototype={constructor:b,init:function(b,c){var e,d=this;this.options=c,this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this)),this.$element.delegate('[data-expand="modal"]',"click.expand.modal",a.proxy(this.fullScreen,this)),this.options.remote?(this.$element.on("hide",function(){a(this).children(".modal-body").html("<p>&nbsp;</p>")}),d.loading(),this.$element.children(".modal-body").html('<div class="clear">&nbsp;</div>'),a.ajax({url:this.options.remote,type:"GET",cache:!1,dataType:"html",success:function(b){d.$element.children(".modal-body").children("div:first").html(b+'<div class="clear"></div>');var c=a.Event("loaded");d.$element.trigger(c),d.removeLoading(),d.layout()}})):d.show(),e="function"==typeof this.options.manager?this.options.manager.call(this):this.options.manager,e=e.appendModal?e:a(e).modalmanager().data("modalmanager"),e.appendModal(this),this.$element.resizable({resize:function(a,b){d.$element.children(".modal-body").css("height",b.element.height()-d.$element.otherHeight+"px")}})},toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=a.Event("show");this.isShown||(this.$element.trigger(b),b.isDefaultPrevented()||(this.escape(),this.tab(),this.options.loading&&this.loading()))},hide:function(b){return b&&b.preventDefault(),b=a.Event("hide"),this.$element.trigger(b),!this.isShown||b.isDefaultPrevented()?this.isShown=!1:(this.fullscreen&&this.fullScreen(),this.isShown=!1,this.escape(),this.tab(),this.isLoading&&this.loading(),a(document).off("focusin.modal"),this.$element.removeClass("in").removeClass("animated").removeClass(this.options.attentionAnimation).removeClass("modal-overflow").attr("aria-hidden",!0),a.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal(),void 0)},layout:function(){var h,i,b="height",c=this.options.modalTitle,d=this.options.height,e=2,f=this.$element.children(".modal-header"),g=this.$element.children(".modal-footer");f.size()>0&&(e+=f.outerHeight()),g.size()>0&&(e+=g.outerHeight()+parseInt(g.css("bottom"))),this.$element.otherHeight=e,this.options.width?(this.$element.css("width",this.options.width),h=this,this.$element.css("margin-left",function(){return/%/gi.test(h.options.width)?-(parseInt(h.options.width)/2)+"%":-(a(this).width()/2)+"px"})):(this.$element.css("width",""),this.$element.css("margin-left","")),c&&this.$element.children(".modal-header").children("h3").html(c),this.$element.css(b,""),d?this.$element.children(".modal-body").css("height",d-this.$element.otherHeight+"px"):this.$element.children(".modal-body").children("div:first").height()>this.options.maxHeight?this.$element.children(".modal-body").css("height",this.options.maxHeight-this.$element.otherHeight+"px"):this.$element.children(".modal-body").css("height","auto"),this.$element.css("height",this.$element.children(".modal-body").outerHeight()+this.$element.otherHeight+"px"),i=a(window).height()-10<this.$element.height(),i||this.options.modalOverflow?this.$element.css("margin-top",0).addClass("modal-overflow"):this.$element.css("margin-top",0-this.$element.height()/2).removeClass("modal-overflow"),this.$element.trigger("resize")},fullScreen:function(){var a=this;return this.$element.find(".modal-header span[data-expand='modal'] i").toggleClass("fa-expand fa-compress"),a.fullscreen?(this.$element.css({top:a.oTop,left:a.oLeft,width:a.oWidth,height:a.oHeight,position:a.oPos,maxHeight:a.oMaxHeight,margin:a.oMargin}),a.fullscreen=!1):(a.oWidth=this.$element.outerWidth(),a.oHeight=this.$element.outerHeight(),a.oTop=this.$element.position().top,a.oLeft=this.$element.position().left,a.oMargin=this.$element.css("margin"),a.oPos=this.$element.css("position"),a.oMaxHeight=this.$element.css("max-height"),this.$element.css({top:0,left:0,width:jQuery(window).width(),height:jQuery(window).height(),position:"fixed",margin:0}),this.$element.css("max-height",""),a.fullscreen=!0),this.$element.children(".modal-body").css("height",this.$element.outerHeight()-this.$element.otherHeight+"px"),a.$},tab:function(){var b=this;this.isShown&&this.options.consumeTab?this.$element.on("keydown.tabindex.modal","[data-tabindex]",function(c){if(c.keyCode&&9===c.keyCode){var d=a(this),e=a(this);b.$element.find("[data-tabindex]:enabled:not([readonly])").each(function(b){d=b.shiftKey?d.data("tabindex")>a(this).data("tabindex")?d=a(this):e=a(this):d.data("tabindex")<a(this).data("tabindex")?d=a(this):e=a(this)}),d[0]!==a(this)[0]?d.focus():e.focus(),c.preventDefault()}}):this.isShown||this.$element.off("keydown.tabindex.modal")},escape:function(){var a=this;this.isShown&&this.options.keyboard?(this.$element.attr("tabindex")||this.$element.attr("tabindex",-1),this.$element.on("keyup.dismiss.modal",function(b){27===b.which&&a.hide()})):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end),b.hideModal()},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c),b.hideModal()})},hideModal:function(){var a=this.options.height||this.options.maxHeight;a&&this.$element.children(".modal-body").css("overflow","").css({"max-height":"",height:""}),this.$element.hide().trigger("hidden")},removeLoading:function(){this.$loading.remove(),this.$loading=null,this.isLoading=!1},loading:function(b){var c,d,e;b=b||function(){},c=this.$element.hasClass("fade")?"fade":"",this.isLoading?this.isLoading&&this.$loading?(this.$loading.removeClass("in"),e=this,a.support.transition&&this.$element.hasClass("fade")?this.$loading.one(a.support.transition.end,function(){e.removeLoading()}):e.removeLoading()):b&&b(this.isLoading):(d=a.support.transition&&c,this.$loading=a('<div class="loading-mask '+c+'">').append(this.options.spinner).appendTo(this.$element),d&&this.$loading[0].offsetWidth,this.$loading.addClass("in"),this.isLoading=!0,d?this.$loading.one(a.support.transition.end,b):b())},focus:function(){var a=this.$element.find(this.options.focusOn);a=a.length?a:this.$element,a.focus()},attention:function(){if(this.options.attentionAnimation){this.$element.removeClass("animated").removeClass(this.options.attentionAnimation);var a=this;setTimeout(function(){a.$element.addClass("animated").addClass(a.options.attentionAnimation)},0)}this.focus()},destroy:function(){var b=a.Event("destroy");this.$element.trigger(b),b.isDefaultPrevented()||(this.$element.off(".modal").removeData("modal").removeClass("in").attr("aria-hidden",!0),this.$parent!==this.$element.parent()?this.$element.appendTo(this.$parent):this.$parent.length||(this.$element.remove(),this.$element=null),this.$element.trigger("destroyed"))}},a.fn.modal=function(c,d){return this.each(function(){var e=a(this),f=e.data("modal"),g=a.extend({},a.fn.modal.defaults,e.data(),"object"==typeof c&&c);f||e.data("modal",f=new b(this,g)),"string"==typeof c?f[c].apply(f,[].concat(d)):g.show&&f.show()})},a.fn.modal.defaults={keyboard:!0,backdrop:"static",loading:!1,show:!0,width:null,height:null,maxHeight:null,modalOverflow:!1,consumeTab:!1,focusOn:null,replace:!1,resize:!1,modalTitle:null,modalUrl:null,modalData:null,attentionAnimation:"shake",manager:"body",spinner:'<div class="loading-spinner" style="width:32px;margin-left:-16px;"><img src="data:image/gif;base64,R0lGODlhIAAgALMAAP///7Ozs/v7+9bW1uHh4fLy8rq6uoGBgTQ0NAEBARsbG8TExJeXl/39/VRUVAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFBQAAACwAAAAAIAAgAAAE5xDISSlLrOrNp0pKNRCdFhxVolJLEJQUoSgOpSYT4RowNSsvyW1icA16k8MMMRkCBjskBTFDAZyuAEkqCfxIQ2hgQRFvAQEEIjNxVDW6XNE4YagRjuBCwe60smQUDnd4Rz1ZAQZnFAGDd0hihh12CEE9kjAEVlycXIg7BAsMB6SlnJ87paqbSKiKoqusnbMdmDC2tXQlkUhziYtyWTxIfy6BE8WJt5YEvpJivxNaGmLHT0VnOgGYf0dZXS7APdpB309RnHOG5gDqXGLDaC457D1zZ/V/nmOM82XiHQjYKhKP1oZmADdEAAAh+QQFBQAAACwAAAAAGAAXAAAEchDISasKNeuJFKoHs4mUYlJIkmjIV54Soypsa0wmLSnqoTEtBw52mG0AjhYpBxioEqRNy8V0qFzNw+GGwlJki4lBqx1IBgjMkRIghwjrzcDti2/Gh7D9qN774wQGAYOEfwCChIV/gYmDho+QkZKTR3p7EQAh+QQFBQAAACwBAAAAHQAOAAAEchDISWdANesNHHJZwE2DUSEo5SjKKB2HOKGYFLD1CB/DnEoIlkti2PlyuKGEATMBaAACSyGbEDYD4zN1YIEmh0SCQQgYehNmTNNaKsQJXmBuuEYPi9ECAU/UFnNzeUp9VBQEBoFOLmFxWHNoQw6RWEocEQAh+QQFBQAAACwHAAAAGQARAAAEaRDICdZZNOvNDsvfBhBDdpwZgohBgE3nQaki0AYEjEqOGmqDlkEnAzBUjhrA0CoBYhLVSkm4SaAAWkahCFAWTU0A4RxzFWJnzXFWJJWb9pTihRu5dvghl+/7NQmBggo/fYKHCX8AiAmEEQAh+QQFBQAAACwOAAAAEgAYAAAEZXCwAaq9ODAMDOUAI17McYDhWA3mCYpb1RooXBktmsbt944BU6zCQCBQiwPB4jAihiCK86irTB20qvWp7Xq/FYV4TNWNz4oqWoEIgL0HX/eQSLi69boCikTkE2VVDAp5d1p0CW4RACH5BAUFAAAALA4AAAASAB4AAASAkBgCqr3YBIMXvkEIMsxXhcFFpiZqBaTXisBClibgAnd+ijYGq2I4HAamwXBgNHJ8BEbzgPNNjz7LwpnFDLvgLGJMdnw/5DRCrHaE3xbKm6FQwOt1xDnpwCvcJgcJMgEIeCYOCQlrF4YmBIoJVV2CCXZvCooHbwGRcAiKcmFUJhEAIfkEBQUAAAAsDwABABEAHwAABHsQyAkGoRivELInnOFlBjeM1BCiFBdcbMUtKQdTN0CUJru5NJQrYMh5VIFTTKJcOj2HqJQRhEqvqGuU+uw6AwgEwxkOO55lxIihoDjKY8pBoThPxmpAYi+hKzoeewkTdHkZghMIdCOIhIuHfBMOjxiNLR4KCW1ODAlxSxEAIfkEBQUAAAAsCAAOABgAEgAABGwQyEkrCDgbYvvMoOF5ILaNaIoGKroch9hacD3MFMHUBzMHiBtgwJMBFolDB4GoGGBCACKRcAAUWAmzOWJQExysQsJgWj0KqvKalTiYPhp1LBFTtp10Is6mT5gdVFx1bRN8FTsVCAqDOB9+KhEAIfkEBQUAAAAsAgASAB0ADgAABHgQyEmrBePS4bQdQZBdR5IcHmWEgUFQgWKaKbWwwSIhc4LonsXhBSCsQoOSScGQDJiWwOHQnAxWBIYJNXEoFCiEWDI9jCzESey7GwMM5doEwW4jJoypQQ743u1WcTV0CgFzbhJ5XClfHYd/EwZnHoYVDgiOfHKQNREAIfkEBQUAAAAsAAAPABkAEQAABGeQqUQruDjrW3vaYCZ5X2ie6EkcKaooTAsi7ytnTq046BBsNcTvItz4AotMwKZBIC6H6CVAJaCcT0CUBTgaTg5nTCu9GKiDEMPJg5YBBOpwlnVzLwtqyKnZagZWahoMB2M3GgsHSRsRACH5BAUFAAAALAEACAARABgAAARcMKR0gL34npkUyyCAcAmyhBijkGi2UW02VHFt33iu7yiDIDaD4/erEYGDlu/nuBAOJ9Dvc2EcDgFAYIuaXS3bbOh6MIC5IAP5Eh5fk2exC4tpgwZyiyFgvhEMBBEAIfkEBQUAAAAsAAACAA4AHQAABHMQyAnYoViSlFDGXBJ808Ep5KRwV8qEg+pRCOeoioKMwJK0Ekcu54h9AoghKgXIMZgAApQZcCCu2Ax2O6NUud2pmJcyHA4L0uDM/ljYDCnGfGakJQE5YH0wUBYBAUYfBIFkHwaBgxkDgX5lgXpHAXcpBIsRADs="></div></div>',backdropTemplate:'<div class="modal-backdrop" />'},a.fn.modal.Constructor=b,a(function(){a(document).off("click.modal").on("click.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=c.attr("data-height"),f=c.attr("modal-title"),g=c.attr("modal-url"),h=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),i=h.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d,height:e?e:0,maxHeight:.8*a(window).height()-100,modalTitle:f?f:null,modalUrl:g?g:null},h.data(),c.data());h.drag({handle:".modal-header"}),b.preventDefault(),h.modal(i).one("hide",function(){c.focus()})}).off("shown.bs.modal").on("shown.bs.modal",".modal",function(){a(this).find("form:first").find("select,input[type='text'],textarea").eq(0).focus()})})}(window.jQuery);

/*<script src="${ctxStatic}/org/tinygroup/fullCalendar/js/fullcalendar.min.js"></script>*/
(function(t){"function"==typeof define&&define.amd?define(["jquery","moment"],t):"object"==typeof exports?module.exports=t(require("jquery"),require("moment")):t(jQuery,moment)})(function(t,e){function n(){var e,n,i,r,s,o=Array.prototype.slice.call(arguments),l={};for(e=0;Pe.length>e;e++){for(n=Pe[e],i=null,r=0;o.length>r;r++)s=o[r][n],t.isPlainObject(s)?i=t.extend(i||{},s):null!=s&&(i=null);null!==i&&(l[n]=i)}return o.unshift({}),o.push(l),t.extend.apply(t,o)}function i(e){var n,i={views:e.views||{}};return t.each(e,function(e,r){"views"!=e&&(t.isPlainObject(r)&&!/(time|duration|interval)$/i.test(e)&&-1==t.inArray(e,Pe)?(n=null,t.each(r,function(t,r){/^(month|week|day|default|basic(Week|Day)?|agenda(Week|Day)?)$/.test(t)?(i.views[t]||(i.views[t]={}),i.views[t][e]=r):(n||(n={}),n[t]=r)}),n&&(i[e]=n)):i[e]=r)}),i}function r(t,e){e.left&&t.css({"border-left-width":1,"margin-left":e.left-1}),e.right&&t.css({"border-right-width":1,"margin-right":e.right-1})}function s(t){t.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function o(){t("body").addClass("fc-not-allowed")}function l(){t("body").removeClass("fc-not-allowed")}function a(e,n,i){var r=Math.floor(n/e.length),s=Math.floor(n-r*(e.length-1)),o=[],l=[],a=[],c=0;u(e),e.each(function(n,i){var u=n===e.length-1?s:r,d=t(i).outerHeight(!0);u>d?(o.push(i),l.push(d),a.push(t(i).height())):c+=d}),i&&(n-=c,r=Math.floor(n/o.length),s=Math.floor(n-r*(o.length-1))),t(o).each(function(e,n){var i=e===o.length-1?s:r,u=l[e],c=a[e],d=i-(u-c);i>u&&t(n).height(d)})}function u(t){t.height("")}function c(e){var n=0;return e.find("> *").each(function(e,i){var r=t(i).outerWidth();r>n&&(n=r)}),n++,e.width(n),n}function d(t,e){return t.height(e).addClass("fc-scroller"),t[0].scrollHeight-1>t[0].clientHeight?!0:(h(t),!1)}function h(t){t.height("").removeClass("fc-scroller")}function f(e){var n=e.css("position"),i=e.parents().filter(function(){var e=t(this);return/(auto|scroll)/.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==n&&i.length?i:t(e[0].ownerDocument||document)}function g(t){var e=t.offset();return{left:e.left,right:e.left+t.outerWidth(),top:e.top,bottom:e.top+t.outerHeight()}}function p(t){var e=t.offset(),n=v(t),i=e.left+E(t,"border-left-width")+n.left,r=e.top+E(t,"border-top-width")+n.top;return{left:i,right:i+t[0].clientWidth,top:r,bottom:r+t[0].clientHeight}}function m(t){var e=t.offset(),n=e.left+E(t,"border-left-width")+E(t,"padding-left"),i=e.top+E(t,"border-top-width")+E(t,"padding-top");return{left:n,right:n+t.width(),top:i,bottom:i+t.height()}}function v(t){var e=t.innerWidth()-t[0].clientWidth,n={left:0,right:0,top:0,bottom:t.innerHeight()-t[0].clientHeight};return y()&&"rtl"==t.css("direction")?n.left=e:n.right=e,n}function y(){return null===Ve&&(Ve=w()),Ve}function w(){var e=t("<div><div/></div>").css({position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}).appendTo("body"),n=e.children(),i=n.offset().left>e.offset().left;return e.remove(),i}function E(t,e){return parseFloat(t.css(e))||0}function S(t){return 1==t.which&&!t.ctrlKey}function b(t,e){var n={left:Math.max(t.left,e.left),right:Math.min(t.right,e.right),top:Math.max(t.top,e.top),bottom:Math.min(t.bottom,e.bottom)};return n.left<n.right&&n.top<n.bottom?n:!1}function D(t,e){return{left:Math.min(Math.max(t.left,e.left),e.right),top:Math.min(Math.max(t.top,e.top),e.bottom)}}function C(t){return{left:(t.left+t.right)/2,top:(t.top+t.bottom)/2}}function T(t,e){return{left:t.left-e.left,top:t.top-e.top}}function H(t,e){var n,i,r,s,o=t.start,l=t.end,a=e.start,u=e.end;return l>a&&u>o?(o>=a?(n=o.clone(),r=!0):(n=a.clone(),r=!1),u>=l?(i=l.clone(),s=!0):(i=u.clone(),s=!1),{start:n,end:i,isStart:r,isEnd:s}):void 0}function x(t,n){return e.duration({days:t.clone().stripTime().diff(n.clone().stripTime(),"days"),ms:t.time()-n.time()})}function R(t,n){return e.duration({days:t.clone().stripTime().diff(n.clone().stripTime(),"days")})}function k(t,n,i){return e.duration(Math.round(t.diff(n,i,!0)),i)}function M(t,e){var n,i,r;for(n=0;Ye.length>n&&(i=Ye[n],r=F(i,t,e),!(r>=1&&U(r)));n++);return i}function F(t,n,i){return null!=i?i.diff(n,t,!0):e.isDuration(n)?n.as(t):n.end.diff(n.start,t,!0)}function z(t){return Boolean(t.hours()||t.minutes()||t.seconds()||t.milliseconds())}function G(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function L(t){return/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(t)}function _(t){var e=function(){};return e.prototype=t,new e}function P(t,e){for(var n in t)A(t,n)&&(e[n]=t[n])}function V(t,e){var n,i,r=["constructor","toString","valueOf"];for(n=0;r.length>n;n++)i=r[n],t[i]!==Object.prototype[i]&&(e[i]=t[i])}function A(t,e){return Ie.call(t,e)}function O(e){return/undefined|null|boolean|number|string/.test(t.type(e))}function N(e,n,i){if(t.isFunction(e)&&(e=[e]),e){var r,s;for(r=0;e.length>r;r++)s=e[r].apply(n,i)||s;return s}}function B(){for(var t=0;arguments.length>t;t++)if(void 0!==arguments[t])return arguments[t]}function Y(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function I(t){return t.replace(/&.*?;/g,"")}function W(e){var n=[];return t.each(e,function(t,e){null!=e&&n.push(t+":"+e)}),n.join(";")}function Z(t){return t.charAt(0).toUpperCase()+t.slice(1)}function j(t,e){return t-e}function U(t){return 0===t%1}function q(t,e){var n=t[e];return function(){return n.apply(t,arguments)}}function $(t,e){var n,i,r,s,o=function(){var l=+new Date-s;e>l&&l>0?n=setTimeout(o,e-l):(n=null,t.apply(r,i),n||(r=i=null))};return function(){r=this,i=arguments,s=+new Date,n||(n=setTimeout(o,e))}}function X(n,i,r){var s,o,l,a,u=n[0],c=1==n.length&&"string"==typeof u;return e.isMoment(u)?(a=e.apply(null,n),Q(u,a)):G(u)||void 0===u?a=e.apply(null,n):(s=!1,o=!1,c?We.test(u)?(u+="-01",n=[u],s=!0,o=!0):(l=Ze.exec(u))&&(s=!l[5],o=!0):t.isArray(u)&&(o=!0),a=i||s?e.utc.apply(e,n):e.apply(null,n),s?(a._ambigTime=!0,a._ambigZone=!0):r&&(o?a._ambigZone=!0:c&&(a.utcOffset?a.utcOffset(u):a.zone(u)))),a._fullCalendar=!0,a}function K(t,n){var i,r,s=!1,o=!1,l=t.length,a=[];for(i=0;l>i;i++)r=t[i],e.isMoment(r)||(r=Le.moment.parseZone(r)),s=s||r._ambigTime,o=o||r._ambigZone,a.push(r);for(i=0;l>i;i++)r=a[i],n||!s||r._ambigTime?o&&!r._ambigZone&&(a[i]=r.clone().stripZone()):a[i]=r.clone().stripTime();return a}function Q(t,e){t._ambigTime?e._ambigTime=!0:e._ambigTime&&(e._ambigTime=!1),t._ambigZone?e._ambigZone=!0:e._ambigZone&&(e._ambigZone=!1)}function J(t,e){t.year(e[0]||0).month(e[1]||0).date(e[2]||0).hours(e[3]||0).minutes(e[4]||0).seconds(e[5]||0).milliseconds(e[6]||0)}function te(t,e){return Ue.format.call(t,e)}function ee(t,e){return ne(t,le(e))}function ne(t,e){var n,i="";for(n=0;e.length>n;n++)i+=ie(t,e[n]);return i}function ie(t,e){var n,i;return"string"==typeof e?e:(n=e.token)?qe[n]?qe[n](t):te(t,n):e.maybe&&(i=ne(t,e.maybe),i.match(/[1-9]/))?i:""}function re(t,e,n,i,r){var s;return t=Le.moment.parseZone(t),e=Le.moment.parseZone(e),s=(t.localeData||t.lang).call(t),n=s.longDateFormat(n)||n,i=i||" - ",se(t,e,le(n),i,r)}function se(t,e,n,i,r){var s,o,l,a,u="",c="",d="",h="",f="";for(o=0;n.length>o&&(s=oe(t,e,n[o]),s!==!1);o++)u+=s;for(l=n.length-1;l>o&&(s=oe(t,e,n[l]),s!==!1);l--)c=s+c;for(a=o;l>=a;a++)d+=ie(t,n[a]),h+=ie(e,n[a]);return(d||h)&&(f=r?h+i+d:d+i+h),u+f+c}function oe(t,e,n){var i,r;return"string"==typeof n?n:(i=n.token)&&(r=$e[i.charAt(0)],r&&t.isSame(e,r))?te(t,i):!1}function le(t){return t in Xe?Xe[t]:Xe[t]=ae(t)}function ae(t){for(var e,n=[],i=/\[([^\]]*)\]|\(([^\)]*)\)|(LTS|LT|(\w)\4*o?)|([^\w\[\(]+)/g;e=i.exec(t);)e[1]?n.push(e[1]):e[2]?n.push({maybe:ae(e[2])}):e[3]?n.push({token:e[3]}):e[5]&&n.push(e[5]);return n}function ue(){}function ce(t,e){return t||e?t&&e?t.grid===e.grid&&t.row===e.row&&t.col===e.col:!1:!0}function de(t){var e=fe(t);return"background"===e||"inverse-background"===e}function he(t){return"inverse-background"===fe(t)}function fe(t){return B((t.source||{}).rendering,t.rendering)}function ge(t){var e,n,i={};for(e=0;t.length>e;e++)n=t[e],(i[n._id]||(i[n._id]=[])).push(n);return i}function pe(t,e){return t.eventStartMS-e.eventStartMS}function me(t,e){return t.eventStartMS-e.eventStartMS||e.eventDurationMS-t.eventDurationMS||e.event.allDay-t.event.allDay||(t.event.title||"").localeCompare(e.event.title)}function ve(n){var i,r,s,o,l=Le.dataAttrPrefix;return l&&(l+="-"),i=n.data(l+"event")||null,i&&(i="object"==typeof i?t.extend({},i):{},r=i.start,null==r&&(r=i.time),s=i.duration,o=i.stick,delete i.start,delete i.time,delete i.duration,delete i.stick),null==r&&(r=n.data(l+"start")),null==r&&(r=n.data(l+"time")),null==s&&(s=n.data(l+"duration")),null==o&&(o=n.data(l+"stick")),r=null!=r?e.duration(r):null,s=null!=s?e.duration(s):null,o=Boolean(o),{eventProps:i,startTime:r,duration:s,stick:o}}function ye(t,e){var n,i;for(n=0;e.length>n;n++)if(i=e[n],i.leftCol<=t.rightCol&&i.rightCol>=t.leftCol)return!0;return!1}function we(t,e){return t.leftCol-e.leftCol}function Ee(t){var e,n,i;if(t.sort(me),e=Se(t),be(e),n=e[0]){for(i=0;n.length>i;i++)De(n[i]);for(i=0;n.length>i;i++)Ce(n[i],0,0)}}function Se(t){var e,n,i,r=[];for(e=0;t.length>e;e++){for(n=t[e],i=0;r.length>i&&Te(n,r[i]).length;i++);n.level=i,(r[i]||(r[i]=[])).push(n)}return r}function be(t){var e,n,i,r,s;for(e=0;t.length>e;e++)for(n=t[e],i=0;n.length>i;i++)for(r=n[i],r.forwardSegs=[],s=e+1;t.length>s;s++)Te(r,t[s],r.forwardSegs)}function De(t){var e,n,i=t.forwardSegs,r=0;if(void 0===t.forwardPressure){for(e=0;i.length>e;e++)n=i[e],De(n),r=Math.max(r,1+n.forwardPressure);t.forwardPressure=r}}function Ce(t,e,n){var i,r=t.forwardSegs;if(void 0===t.forwardCoord)for(r.length?(r.sort(xe),Ce(r[0],e+1,n),t.forwardCoord=r[0].backwardCoord):t.forwardCoord=1,t.backwardCoord=t.forwardCoord-(t.forwardCoord-n)/(e+1),i=0;r.length>i;i++)Ce(r[i],0,t.forwardCoord)}function Te(t,e,n){n=n||[];for(var i=0;e.length>i;i++)He(t,e[i])&&n.push(e[i]);return n}function He(t,e){return t.bottom>e.top&&t.top<e.bottom}function xe(t,e){return e.forwardPressure-t.forwardPressure||(t.backwardCoord||0)-(e.backwardCoord||0)||me(t,e)}function Re(n,i){function r(){j?l()&&(c(),a()):s()}function s(){U=B.theme?"ui":"fc",n.addClass("fc"),B.isRTL?n.addClass("fc-rtl"):n.addClass("fc-ltr"),B.theme?n.addClass("ui-widget"):n.addClass("fc-unthemed"),j=t("<div class='fc-view-container'/>").prependTo(n),W=N.header=new Fe(N,B),Z=W.render(),Z&&n.prepend(Z),a(B.defaultView),B.handleWindowResize&&(K=$(h,B.windowResizeDelay),t(window).resize(K))}function o(){q&&q.removeElement(),W.destroy(),j.remove(),n.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget"),K&&t(window).unbind("resize",K)}function l(){return n.is(":visible")}function a(e){ie++,q&&e&&q.type!==e&&(W.deactivateButton(q.type),G(),q.removeElement(),q=N.view=null),!q&&e&&(q=N.view=ne[e]||(ne[e]=N.instantiateView(e)),q.setElement(t("<div class='fc-view fc-"+e+"-view' />").appendTo(j)),W.activateButton(e)),q&&(Q=q.massageCurrentDate(Q),q.isDisplayed&&Q.isWithin(q.intervalStart,q.intervalEnd)||l()&&(G(),q.display(Q),L(),E(),S(),m())),L(),ie--}function u(t){return l()?(t&&d(),ie++,q.updateSize(!0),ie--,!0):void 0}function c(){l()&&d()}function d(){X="number"==typeof B.contentHeight?B.contentHeight:"number"==typeof B.height?B.height-(Z?Z.outerHeight(!0):0):Math.round(j.width()/Math.max(B.aspectRatio,.5))}function h(t){!ie&&t.target===window&&q.start&&u(!0)&&q.trigger("windowResize",ee)}function f(){p(),v()}function g(){l()&&(G(),q.displayEvents(re),L())}function p(){G(),q.clearEvents(),L()}function m(){!B.lazyFetching||J(q.start,q.end)?v():g()}function v(){te(q.start,q.end)}function y(t){re=t,g()}function w(){g()}function E(){W.updateTitle(q.title)}function S(){var t=N.getNow();t.isWithin(q.intervalStart,q.intervalEnd)?W.disableButton("today"):W.enableButton("today")}function b(t,e){t=N.moment(t),e=e?N.moment(e):t.hasTime()?t.clone().add(N.defaultTimedEventDuration):t.clone().add(N.defaultAllDayEventDuration),q.select({start:t,end:e})}function D(){q&&q.unselect()}function C(){Q=q.computePrevDate(Q),a()}function T(){Q=q.computeNextDate(Q),a()}function H(){Q.add(-1,"years"),a()}function x(){Q.add(1,"years"),a()}function R(){Q=N.getNow(),a()}function k(t){Q=N.moment(t),a()}function M(t){Q.add(e.duration(t)),a()}function F(t,e){var n;e=e||"day",n=N.getViewSpec(e)||N.getUnitViewSpec(e),Q=t,a(n?n.type:null)}function z(){return Q.clone()}function G(){j.css({width:"100%",height:j.height(),overflow:"hidden"})}function L(){j.css({width:"",height:"",overflow:""})}function P(){return N}function V(){return q}function A(t,e){return void 0===e?B[t]:(("height"==t||"contentHeight"==t||"aspectRatio"==t)&&(B[t]=e,u(!0)),void 0)}function O(t,e){return B[t]?B[t].apply(e||ee,Array.prototype.slice.call(arguments,2)):void 0}var N=this;N.initOptions(i||{});var B=this.options;N.render=r,N.destroy=o,N.refetchEvents=f,N.reportEvents=y,N.reportEventChange=w,N.rerenderEvents=g,N.changeView=a,N.select=b,N.unselect=D,N.prev=C,N.next=T,N.prevYear=H,N.nextYear=x,N.today=R,N.gotoDate=k,N.incrementDate=M,N.zoomTo=F,N.getDate=z,N.getCalendar=P,N.getView=V,N.option=A,N.trigger=O;var Y=_(Me(B.lang));if(B.monthNames&&(Y._months=B.monthNames),B.monthNamesShort&&(Y._monthsShort=B.monthNamesShort),B.dayNames&&(Y._weekdays=B.dayNames),B.dayNamesShort&&(Y._weekdaysShort=B.dayNamesShort),null!=B.firstDay){var I=_(Y._week);I.dow=B.firstDay,Y._week=I}Y._fullCalendar_weekCalc=function(t){return"function"==typeof t?t:"local"===t?t:"iso"===t||"ISO"===t?"ISO":void 0}(B.weekNumberCalculation),N.defaultAllDayEventDuration=e.duration(B.defaultAllDayEventDuration),N.defaultTimedEventDuration=e.duration(B.defaultTimedEventDuration),N.moment=function(){var t;return"local"===B.timezone?(t=Le.moment.apply(null,arguments),t.hasTime()&&t.local()):t="UTC"===B.timezone?Le.moment.utc.apply(null,arguments):Le.moment.parseZone.apply(null,arguments),"_locale"in t?t._locale=Y:t._lang=Y,t},N.getIsAmbigTimezone=function(){return"local"!==B.timezone&&"UTC"!==B.timezone},N.rezoneDate=function(t){return N.moment(t.toArray())},N.getNow=function(){var t=B.now;return"function"==typeof t&&(t=t()),N.moment(t)},N.getEventEnd=function(t){return t.end?t.end.clone():N.getDefaultEventEnd(t.allDay,t.start)},N.getDefaultEventEnd=function(t,e){var n=e.clone();return t?n.stripTime().add(N.defaultAllDayEventDuration):n.add(N.defaultTimedEventDuration),N.getIsAmbigTimezone()&&n.stripZone(),n},N.humanizeDuration=function(t){return(t.locale||t.lang).call(t,B.lang).humanize()},ze.call(N,B);var W,Z,j,U,q,X,K,Q,J=N.isFetchNeeded,te=N.fetchEvents,ee=n[0],ne={},ie=0,re=[];Q=null!=B.defaultDate?N.moment(B.defaultDate):N.getNow(),N.getSuggestedViewHeight=function(){return void 0===X&&c(),X},N.isHeightAuto=function(){return"auto"===B.contentHeight||"auto"===B.height}}function ke(e){t.each(fn,function(t,n){null==e[t]&&(e[t]=n(e))})}function Me(t){var n=e.localeData||e.langData;return n.call(e,t)||n.call(e,"en")}function Fe(e,n){function i(){var e=n.header;return f=n.theme?"ui":"fc",e?g=t("<div class='fc-toolbar'/>").append(s("left")).append(s("right")).append(s("center")).append('<div class="fc-clear"/>'):void 0}function r(){g.remove()}function s(i){var r=t('<div class="fc-'+i+'"/>'),s=n.header[i];return s&&t.each(s.split(" "),function(){var i,s=t(),o=!0;t.each(this.split(","),function(i,r){var l,a,u,c,d,h,g,m,v;"title"==r?(s=s.add(t("<h2>&nbsp;</h2>")),o=!1):(l=e.getViewSpec(r),l?(a=function(){e.changeView(r)},p.push(r),u=l.buttonTextOverride,c=l.buttonTextDefault):e[r]&&(a=function(){e[r]()},u=(e.overrides.buttonText||{})[r],c=n.buttonText[r]),a&&(d=n.themeButtonIcons[r],h=n.buttonIcons[r],g=u?Y(u):d&&n.theme?"<span class='ui-icon ui-icon-"+d+"'></span>":h&&!n.theme?"<span class='fc-icon fc-icon-"+h+"'></span>":Y(c),m=["fc-"+r+"-button",f+"-button",f+"-state-default"],v=t('<button type="button" class="'+m.join(" ")+'">'+g+"</button>").click(function(){v.hasClass(f+"-state-disabled")||(a(),(v.hasClass(f+"-state-active")||v.hasClass(f+"-state-disabled"))&&v.removeClass(f+"-state-hover"))}).mousedown(function(){v.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-down")}).mouseup(function(){v.removeClass(f+"-state-down")}).hover(function(){v.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-hover")},function(){v.removeClass(f+"-state-hover").removeClass(f+"-state-down")}),s=s.add(v)))}),o&&s.first().addClass(f+"-corner-left").end().last().addClass(f+"-corner-right").end(),s.length>1?(i=t("<div/>"),o&&i.addClass("fc-button-group"),i.append(s),r.append(i)):r.append(s)}),r}function o(t){g.find("h2").text(t)}function l(t){g.find(".fc-"+t+"-button").addClass(f+"-state-active")}function a(t){g.find(".fc-"+t+"-button").removeClass(f+"-state-active")}function u(t){g.find(".fc-"+t+"-button").attr("disabled","disabled").addClass(f+"-state-disabled")}function c(t){g.find(".fc-"+t+"-button").removeAttr("disabled").removeClass(f+"-state-disabled")}function d(){return p}var h=this;h.render=i,h.destroy=r,h.updateTitle=o,h.activateButton=l,h.deactivateButton=a,h.disableButton=u,h.enableButton=c,h.getViewsWithButtons=d;var f,g=t(),p=[]}function ze(n){function i(t,e){return!W||t.clone().stripZone()<W.clone().stripZone()||e.clone().stripZone()>Z.clone().stripZone()}function r(t,e){W=t,Z=e,te=[];var n=++K,i=X.length;Q=i;for(var r=0;i>r;r++)s(X[r],n)}function s(e,n){o(e,function(i){var r,s,o,l=t.isArray(e.events);if(n==K){if(i)for(r=0;i.length>r;r++)s=i[r],o=l?s:E(s,e),o&&te.push.apply(te,T(o));Q--,Q||q(te)}})}function o(e,i){var r,s,l=Le.sourceFetchers;for(r=0;l.length>r;r++){if(s=l[r].call(I,e,W.clone(),Z.clone(),n.timezone,i),s===!0)return;if("object"==typeof s)return o(s,i),void 0}var a=e.events;if(a)t.isFunction(a)?(y(),a.call(I,W.clone(),Z.clone(),n.timezone,function(t){i(t),w()})):t.isArray(a)?i(a):i();else{var u=e.url;if(u){var c,d=e.success,h=e.error,f=e.complete;c=t.isFunction(e.data)?e.data():e.data;var g=t.extend({},c||{}),p=B(e.startParam,n.startParam),m=B(e.endParam,n.endParam),v=B(e.timezoneParam,n.timezoneParam);p&&(g[p]=W.format()),m&&(g[m]=Z.format()),n.timezone&&"local"!=n.timezone&&(g[v]=n.timezone),y(),t.ajax(t.extend({},gn,e,{data:g,success:function(e){e=e||[];var n=N(d,this,arguments);t.isArray(n)&&(e=n),i(e)},error:function(){N(h,this,arguments),i()},complete:function(){N(f,this,arguments),w()}}))}else i()}}function l(t){var e=a(t);e&&(X.push(e),Q++,s(e,K))}function a(e){var n,i,r=Le.sourceNormalizers;if(t.isFunction(e)||t.isArray(e)?n={events:e}:"string"==typeof e?n={url:e}:"object"==typeof e&&(n=t.extend({},e)),n){for(n.className?"string"==typeof n.className&&(n.className=n.className.split(/\s+/)):n.className=[],t.isArray(n.events)&&(n.origArray=n.events,n.events=t.map(n.events,function(t){return E(t,n)})),i=0;r.length>i;i++)r[i].call(I,n);return n}}function u(e){X=t.grep(X,function(t){return!c(t,e)}),te=t.grep(te,function(t){return!c(t.source,e)}),q(te)}function c(t,e){return t&&e&&d(t)==d(e)}function d(t){return("object"==typeof t?t.origArray||t.googleCalendarId||t.url||t.events:null)||t}function h(t){t.start=I.moment(t.start),t.end=t.end?I.moment(t.end):null,H(t,f(t)),q(te)}function f(e){var n={};return t.each(e,function(t,e){g(t)&&void 0!==e&&O(e)&&(n[t]=e)}),n}function g(t){return!/^_|^(id|allDay|start|end)$/.test(t)}function p(t,e){var n,i,r,s=E(t);if(s){for(n=T(s),i=0;n.length>i;i++)r=n[i],r.source||(e&&($.events.push(r),r.source=$),te.push(r));return q(te),n}return[]}function m(e){var n,i;for(null==e?e=function(){return!0}:t.isFunction(e)||(n=e+"",e=function(t){return t._id==n}),te=t.grep(te,e,!0),i=0;X.length>i;i++)t.isArray(X[i].events)&&(X[i].events=t.grep(X[i].events,e,!0));q(te)}function v(e){return t.isFunction(e)?t.grep(te,e):null!=e?(e+="",t.grep(te,function(t){return t._id==e})):te}function y(){J++||j("loading",null,!0,U())}function w(){--J||j("loading",null,!1,U())}function E(i,r){var s,o,l,a={};if(n.eventDataTransform&&(i=n.eventDataTransform(i)),r&&r.eventDataTransform&&(i=r.eventDataTransform(i)),t.extend(a,i),r&&(a.source=r),a._id=i._id||(void 0===i.id?"_fc"+pn++:i.id+""),a.className=i.className?"string"==typeof i.className?i.className.split(/\s+/):i.className:[],s=i.start||i.date,o=i.end,L(s)&&(s=e.duration(s)),L(o)&&(o=e.duration(o)),i.dow||e.isDuration(s)||e.isDuration(o))a.start=s?e.duration(s):null,a.end=o?e.duration(o):null,a._recurring=!0;else{if(s&&(s=I.moment(s),!s.isValid()))return!1;o&&(o=I.moment(o),o.isValid()||(o=null)),l=i.allDay,void 0===l&&(l=B(r?r.allDayDefault:void 0,n.allDayDefault)),S(s,o,l,a)}return a}function S(t,e,n,i){i.start=t,i.end=e,i.allDay=n,b(i),Ge(i)}function b(t){D(t),t.end&&!t.end.isAfter(t.start)&&(t.end=null),t.end||(t.end=n.forceEventDuration?I.getDefaultEventEnd(t.allDay,t.start):null)}function D(t){null==t.allDay&&(t.allDay=!(t.start.hasTime()||t.end&&t.end.hasTime())),t.allDay?(t.start.stripTime(),t.end&&t.end.stripTime()):(t.start.hasTime()||(t.start=I.rezoneDate(t.start)),t.end&&!t.end.hasTime()&&(t.end=I.rezoneDate(t.end)))}function C(e){var n;return e.end||(n=e.allDay,null==n&&(n=!e.start.hasTime()),e=t.extend({},e),e.end=I.getDefaultEventEnd(n,e.start)),e}function T(e,n,i){var r,s,o,l,a,u,c,d,h,f=[];if(n=n||W,i=i||Z,e)if(e._recurring){if(s=e.dow)for(r={},o=0;s.length>o;o++)r[s[o]]=!0;for(l=n.clone().stripTime();l.isBefore(i);)(!r||r[l.day()])&&(a=e.start,u=e.end,c=l.clone(),d=null,a&&(c=c.time(a)),u&&(d=l.clone().time(u)),h=t.extend({},e),S(c,d,!a&&!u,h),f.push(h)),l.add(1,"days")}else f.push(e);return f}function H(e,n,i){function r(t,e){return i?k(t,e,i):n.allDay?R(t,e):x(t,e)}var s,o,l,a,u,c,d={};return n=n||{},n.start||(n.start=e.start.clone()),void 0===n.end&&(n.end=e.end?e.end.clone():null),null==n.allDay&&(n.allDay=e.allDay),b(n),s={start:e._start.clone(),end:e._end?e._end.clone():I.getDefaultEventEnd(e._allDay,e._start),allDay:n.allDay},b(s),o=null!==e._end&&null===n.end,l=r(n.start,s.start),n.end?(a=r(n.end,s.end),u=a.subtract(l)):u=null,t.each(n,function(t,e){g(t)&&void 0!==e&&(d[t]=e)}),c=M(v(e._id),o,n.allDay,l,u,d),{dateDelta:l,durationDelta:u,undo:c}}function M(e,n,i,r,s,o){var l=I.getIsAmbigTimezone(),a=[];return r&&!r.valueOf()&&(r=null),s&&!s.valueOf()&&(s=null),t.each(e,function(e,u){var c,d;c={start:u.start.clone(),end:u.end?u.end.clone():null,allDay:u.allDay},t.each(o,function(t){c[t]=u[t]}),d={start:u._start,end:u._end,allDay:i},b(d),n?d.end=null:s&&!d.end&&(d.end=I.getDefaultEventEnd(d.allDay,d.start)),r&&(d.start.add(r),d.end&&d.end.add(r)),s&&d.end.add(s),l&&!d.allDay&&(r||s)&&(d.start.stripZone(),d.end&&d.end.stripZone()),t.extend(u,o,d),Ge(u),a.push(function(){t.extend(u,c),Ge(u)})}),function(){for(var t=0;a.length>t;t++)a[t]()}}function F(e){var i,r=n.businessHours,s={className:"fc-nonbusiness",start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"},o=I.getView();return r&&(i=t.extend({},s,"object"==typeof r?r:{})),i?(e&&(i.start=null,i.end=null),T(E(i),o.start,o.end)):[]}function z(t,e){var i=e.source||{},r=B(e.constraint,i.constraint,n.eventConstraint),s=B(e.overlap,i.overlap,n.eventOverlap);return t=C(t),P(t,r,s,e)}function G(t){return P(t,n.selectConstraint,n.selectOverlap)}function _(e,n){var i,r;return n&&(i=t.extend({},n,e),r=T(E(i))[0]),r?z(e,r):(e=C(e),G(e))}function P(e,n,i,r){var s,o,l,a,u,c;if(e=t.extend({},e),e.start=e.start.clone().stripZone(),e.end=e.end.clone().stripZone(),null!=n){for(s=V(n),o=!1,a=0;s.length>a;a++)if(A(s[a],e)){o=!0;break}if(!o)return!1}for(l=I.getPeerEvents(r,e),a=0;l.length>a;a++)if(u=l[a],Y(u,e)){if(i===!1)return!1;if("function"==typeof i&&!i(u,r))return!1;if(r){if(c=B(u.overlap,(u.source||{}).overlap),c===!1)return!1;if("function"==typeof c&&!c(r,u))return!1}}return!0}function V(t){return"businessHours"===t?F():"object"==typeof t?T(E(t)):v(t)}function A(t,e){var n=t.start.clone().stripZone(),i=I.getEventEnd(t).stripZone();return e.start>=n&&i>=e.end}function Y(t,e){var n=t.start.clone().stripZone(),i=I.getEventEnd(t).stripZone();return i>e.start&&e.end>n}var I=this;I.isFetchNeeded=i,I.fetchEvents=r,I.addEventSource=l,I.removeEventSource=u,I.updateEvent=h,I.renderEvent=p,I.removeEvents=m,I.clientEvents=v,I.mutateEvent=H,I.normalizeEventRange=b,I.normalizeEventRangeTimes=D,I.ensureVisibleEventRange=C;var W,Z,j=I.trigger,U=I.getView,q=I.reportEvents,$={events:[]},X=[$],K=0,Q=0,J=0,te=[];t.each((n.events?[n.events]:[]).concat(n.eventSources||[]),function(t,e){var n=a(e);n&&X.push(n)}),I.getBusinessHoursEvents=F,I.isEventRangeAllowed=z,I.isSelectionRangeAllowed=G,I.isExternalDropRangeAllowed=_,I.getEventCache=function(){return te}}function Ge(t){t._allDay=t.allDay,t._start=t.start.clone(),t._end=t.end?t.end.clone():null}var Le=t.fullCalendar={version:"2.3.1"},_e=Le.views={};t.fn.fullCalendar=function(e){var n=Array.prototype.slice.call(arguments,1),i=this;return this.each(function(r,s){var o,l=t(s),a=l.data("fullCalendar");"string"==typeof e?a&&t.isFunction(a[e])&&(o=a[e].apply(a,n),r||(i=o),"destroy"===e&&l.removeData("fullCalendar")):a||(a=new Le.CalendarBase(l,e),l.data("fullCalendar",a),a.render())}),i};var Pe=["header","buttonText","buttonIcons","themeButtonIcons"];Le.intersectionToSeg=H,Le.applyAll=N,Le.debounce=$,Le.isInt=U,Le.htmlEscape=Y,Le.cssToStr=W,Le.proxy=q,Le.getClientRect=p,Le.getContentRect=m,Le.getScrollbarWidths=v;var Ve=null;Le.computeIntervalUnit=M,Le.durationHasTime=z;var Ae,Oe,Ne,Be=["sun","mon","tue","wed","thu","fri","sat"],Ye=["year","month","week","day","hour","minute","second","millisecond"],Ie={}.hasOwnProperty,We=/^\s*\d{4}-\d\d$/,Ze=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/,je=e.fn,Ue=t.extend({},je);Le.moment=function(){return X(arguments)},Le.moment.utc=function(){var t=X(arguments,!0);return t.hasTime()&&t.utc(),t},Le.moment.parseZone=function(){return X(arguments,!0,!0)},je.clone=function(){var t=Ue.clone.apply(this,arguments);return Q(this,t),this._fullCalendar&&(t._fullCalendar=!0),t},je.week=je.weeks=function(t){var e=(this._locale||this._lang)._fullCalendar_weekCalc;return null==t&&"function"==typeof e?e(this):"ISO"===e?Ue.isoWeek.apply(this,arguments):Ue.week.apply(this,arguments)},je.time=function(t){if(!this._fullCalendar)return Ue.time.apply(this,arguments);if(null==t)return e.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});this._ambigTime=!1,e.isDuration(t)||e.isMoment(t)||(t=e.duration(t));var n=0;return e.isDuration(t)&&(n=24*Math.floor(t.asDays())),this.hours(n+t.hours()).minutes(t.minutes()).seconds(t.seconds()).milliseconds(t.milliseconds())},je.stripTime=function(){var t;return this._ambigTime||(t=this.toArray(),this.utc(),Oe(this,t.slice(0,3)),this._ambigTime=!0,this._ambigZone=!0),this},je.hasTime=function(){return!this._ambigTime},je.stripZone=function(){var t,e;return this._ambigZone||(t=this.toArray(),e=this._ambigTime,this.utc(),Oe(this,t),this._ambigTime=e||!1,this._ambigZone=!0),this},je.hasZone=function(){return!this._ambigZone},je.local=function(){var t=this.toArray(),e=this._ambigZone;return Ue.local.apply(this,arguments),this._ambigTime=!1,this._ambigZone=!1,e&&Ne(this,t),this},je.utc=function(){return Ue.utc.apply(this,arguments),this._ambigTime=!1,this._ambigZone=!1,this},t.each(["zone","utcOffset"],function(t,e){Ue[e]&&(je[e]=function(t){return null!=t&&(this._ambigTime=!1,this._ambigZone=!1),Ue[e].apply(this,arguments)})}),je.format=function(){return this._fullCalendar&&arguments[0]?ee(this,arguments[0]):this._ambigTime?te(this,"YYYY-MM-DD"):this._ambigZone?te(this,"YYYY-MM-DD[T]HH:mm:ss"):Ue.format.apply(this,arguments)},je.toISOString=function(){return this._ambigTime?te(this,"YYYY-MM-DD"):this._ambigZone?te(this,"YYYY-MM-DD[T]HH:mm:ss"):Ue.toISOString.apply(this,arguments)},je.isWithin=function(t,e){var n=K([this,t,e]);return n[0]>=n[1]&&n[0]<n[2]},je.isSame=function(t,e){var n;return this._fullCalendar?e?(n=K([this,t],!0),Ue.isSame.call(n[0],n[1],e)):(t=Le.moment.parseZone(t),Ue.isSame.call(this,t)&&Boolean(this._ambigTime)===Boolean(t._ambigTime)&&Boolean(this._ambigZone)===Boolean(t._ambigZone)):Ue.isSame.apply(this,arguments)},t.each(["isBefore","isAfter"],function(t,e){je[e]=function(t,n){var i;return this._fullCalendar?(i=K([this,t]),Ue[e].call(i[0],i[1],n)):Ue[e].apply(this,arguments)}}),Ae="_d"in e()&&"updateOffset"in e,Oe=Ae?function(t,n){t._d.setTime(Date.UTC.apply(Date,n)),e.updateOffset(t,!1)}:J,Ne=Ae?function(t,n){t._d.setTime(+new Date(n[0]||0,n[1]||0,n[2]||0,n[3]||0,n[4]||0,n[5]||0,n[6]||0)),e.updateOffset(t,!1)}:J;var qe={t:function(t){return te(t,"a").charAt(0)},T:function(t){return te(t,"A").charAt(0)}};Le.formatRange=re;var $e={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"},Xe={};Le.Class=ue,ue.extend=function(t){var e,n=this;return t=t||{},A(t,"constructor")&&(e=t.constructor),"function"!=typeof e&&(e=t.constructor=function(){n.apply(this,arguments)}),e.prototype=_(n.prototype),P(t,e.prototype),V(t,e.prototype),P(n,e),e},ue.mixin=function(t){P(t.prototype||t,this.prototype)};var Ke=ue.extend({isHidden:!0,options:null,el:null,documentMousedownProxy:null,margin:10,constructor:function(t){this.options=t||{}},show:function(){this.isHidden&&(this.el||this.render(),this.el.show(),this.position(),this.isHidden=!1,this.trigger("show"))},hide:function(){this.isHidden||(this.el.hide(),this.isHidden=!0,this.trigger("hide"))},render:function(){var e=this,n=this.options;this.el=t('<div class="fc-popover"/>').addClass(n.className||"").css({top:0,left:0}).append(n.content).appendTo(n.parentEl),this.el.on("click",".fc-close",function(){e.hide()}),n.autoHide&&t(document).on("mousedown",this.documentMousedownProxy=q(this,"documentMousedown"))},documentMousedown:function(e){this.el&&!t(e.target).closest(this.el).length&&this.hide()},destroy:function(){this.hide(),this.el&&(this.el.remove(),this.el=null),t(document).off("mousedown",this.documentMousedownProxy)},position:function(){var e,n,i,r,s,o=this.options,l=this.el.offsetParent().offset(),a=this.el.outerWidth(),u=this.el.outerHeight(),c=t(window),d=f(this.el);r=o.top||0,s=void 0!==o.left?o.left:void 0!==o.right?o.right-a:0,d.is(window)||d.is(document)?(d=c,e=0,n=0):(i=d.offset(),e=i.top,n=i.left),e+=c.scrollTop(),n+=c.scrollLeft(),o.viewportConstrain!==!1&&(r=Math.min(r,e+d.outerHeight()-u-this.margin),r=Math.max(r,e+this.margin),s=Math.min(s,n+d.outerWidth()-a-this.margin),s=Math.max(s,n+this.margin)),this.el.css({top:r-l.top,left:s-l.left})},trigger:function(t){this.options[t]&&this.options[t].apply(this,Array.prototype.slice.call(arguments,1))}}),Qe=ue.extend({grid:null,rowCoords:null,colCoords:null,containerEl:null,bounds:null,constructor:function(t){this.grid=t},build:function(){this.rowCoords=this.grid.computeRowCoords(),this.colCoords=this.grid.computeColCoords(),this.computeBounds()},clear:function(){this.rowCoords=null,this.colCoords=null},getCell:function(e,n){var i,r,s,o=this.rowCoords,l=o.length,a=this.colCoords,u=a.length,c=null,d=null;if(this.inBounds(e,n)){for(i=0;l>i;i++)if(r=o[i],n>=r.top&&r.bottom>n){c=i;break}for(i=0;u>i;i++)if(r=a[i],e>=r.left&&r.right>e){d=i;break}if(null!==c&&null!==d)return s=this.grid.getCell(c,d),s.grid=this.grid,t.extend(s,o[c],a[d]),s}return null},computeBounds:function(){this.bounds=this.containerEl?p(this.containerEl):null},inBounds:function(t,e){var n=this.bounds;return n?t>=n.left&&n.right>t&&e>=n.top&&n.bottom>e:!0}}),Je=ue.extend({coordMaps:null,constructor:function(t){this.coordMaps=t},build:function(){var t,e=this.coordMaps;for(t=0;e.length>t;t++)e[t].build()},getCell:function(t,e){var n,i=this.coordMaps,r=null;for(n=0;i.length>n&&!r;n++)r=i[n].getCell(t,e);return r},clear:function(){var t,e=this.coordMaps;for(t=0;e.length>t;t++)e[t].clear()}}),tn=Le.DragListener=ue.extend({options:null,isListening:!1,isDragging:!1,originX:null,originY:null,mousemoveProxy:null,mouseupProxy:null,subjectEl:null,subjectHref:null,scrollEl:null,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollHandlerProxy:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,constructor:function(t){t=t||{},this.options=t,this.subjectEl=t.subjectEl
},mousedown:function(t){S(t)&&(t.preventDefault(),this.startListening(t),this.options.distance||this.startDrag(t))},startListening:function(e){var n;this.isListening||(e&&this.options.scroll&&(n=f(t(e.target)),n.is(window)||n.is(document)||(this.scrollEl=n,this.scrollHandlerProxy=$(q(this,"scrollHandler"),100),this.scrollEl.on("scroll",this.scrollHandlerProxy))),t(document).on("mousemove",this.mousemoveProxy=q(this,"mousemove")).on("mouseup",this.mouseupProxy=q(this,"mouseup")).on("selectstart",this.preventDefault),e?(this.originX=e.pageX,this.originY=e.pageY):(this.originX=0,this.originY=0),this.isListening=!0,this.listenStart(e))},listenStart:function(t){this.trigger("listenStart",t)},mousemove:function(t){var e,n,i=t.pageX-this.originX,r=t.pageY-this.originY;this.isDragging||(e=this.options.distance||1,n=i*i+r*r,n>=e*e&&this.startDrag(t)),this.isDragging&&this.drag(i,r,t)},startDrag:function(t){this.isListening||this.startListening(),this.isDragging||(this.isDragging=!0,this.dragStart(t))},dragStart:function(t){var e=this.subjectEl;this.trigger("dragStart",t),(this.subjectHref=e?e.attr("href"):null)&&e.removeAttr("href")},drag:function(t,e,n){this.trigger("drag",t,e,n),this.updateScroll(n)},mouseup:function(t){this.stopListening(t)},stopDrag:function(t){this.isDragging&&(this.stopScrolling(),this.dragStop(t),this.isDragging=!1)},dragStop:function(t){var e=this;this.trigger("dragStop",t),setTimeout(function(){e.subjectHref&&e.subjectEl.attr("href",e.subjectHref)},0)},stopListening:function(e){this.stopDrag(e),this.isListening&&(this.scrollEl&&(this.scrollEl.off("scroll",this.scrollHandlerProxy),this.scrollHandlerProxy=null),t(document).off("mousemove",this.mousemoveProxy).off("mouseup",this.mouseupProxy).off("selectstart",this.preventDefault),this.mousemoveProxy=null,this.mouseupProxy=null,this.isListening=!1,this.listenStop(e))},listenStop:function(t){this.trigger("listenStop",t)},trigger:function(t){this.options[t]&&this.options[t].apply(this,Array.prototype.slice.call(arguments,1))},preventDefault:function(t){t.preventDefault()},computeScrollBounds:function(){var t=this.scrollEl;this.scrollBounds=t?g(t):null},updateScroll:function(t){var e,n,i,r,s=this.scrollSensitivity,o=this.scrollBounds,l=0,a=0;o&&(e=(s-(t.pageY-o.top))/s,n=(s-(o.bottom-t.pageY))/s,i=(s-(t.pageX-o.left))/s,r=(s-(o.right-t.pageX))/s,e>=0&&1>=e?l=-1*e*this.scrollSpeed:n>=0&&1>=n&&(l=n*this.scrollSpeed),i>=0&&1>=i?a=-1*i*this.scrollSpeed:r>=0&&1>=r&&(a=r*this.scrollSpeed)),this.setScrollVel(l,a)},setScrollVel:function(t,e){this.scrollTopVel=t,this.scrollLeftVel=e,this.constrainScrollVel(),!this.scrollTopVel&&!this.scrollLeftVel||this.scrollIntervalId||(this.scrollIntervalId=setInterval(q(this,"scrollIntervalFunc"),this.scrollIntervalMs))},constrainScrollVel:function(){var t=this.scrollEl;0>this.scrollTopVel?0>=t.scrollTop()&&(this.scrollTopVel=0):this.scrollTopVel>0&&t.scrollTop()+t[0].clientHeight>=t[0].scrollHeight&&(this.scrollTopVel=0),0>this.scrollLeftVel?0>=t.scrollLeft()&&(this.scrollLeftVel=0):this.scrollLeftVel>0&&t.scrollLeft()+t[0].clientWidth>=t[0].scrollWidth&&(this.scrollLeftVel=0)},scrollIntervalFunc:function(){var t=this.scrollEl,e=this.scrollIntervalMs/1e3;this.scrollTopVel&&t.scrollTop(t.scrollTop()+this.scrollTopVel*e),this.scrollLeftVel&&t.scrollLeft(t.scrollLeft()+this.scrollLeftVel*e),this.constrainScrollVel(),this.scrollTopVel||this.scrollLeftVel||this.stopScrolling()},stopScrolling:function(){this.scrollIntervalId&&(clearInterval(this.scrollIntervalId),this.scrollIntervalId=null,this.scrollStop())},scrollHandler:function(){this.scrollIntervalId||this.scrollStop()},scrollStop:function(){}}),en=tn.extend({coordMap:null,origCell:null,cell:null,coordAdjust:null,constructor:function(t,e){tn.prototype.constructor.call(this,e),this.coordMap=t},listenStart:function(t){var e,n,i,r=this.subjectEl;tn.prototype.listenStart.apply(this,arguments),this.computeCoords(),t?(n={left:t.pageX,top:t.pageY},i=n,r&&(e=g(r),i=D(i,e)),this.origCell=this.getCell(i.left,i.top),r&&this.options.subjectCenter&&(this.origCell&&(e=b(this.origCell,e)||e),i=C(e)),this.coordAdjust=T(i,n)):(this.origCell=null,this.coordAdjust=null)},computeCoords:function(){this.coordMap.build(),this.computeScrollBounds()},dragStart:function(t){var e;tn.prototype.dragStart.apply(this,arguments),e=this.getCell(t.pageX,t.pageY),e&&this.cellOver(e)},drag:function(t,e,n){var i;tn.prototype.drag.apply(this,arguments),i=this.getCell(n.pageX,n.pageY),ce(i,this.cell)||(this.cell&&this.cellOut(),i&&this.cellOver(i))},dragStop:function(){this.cellDone(),tn.prototype.dragStop.apply(this,arguments)},cellOver:function(t){this.cell=t,this.trigger("cellOver",t,ce(t,this.origCell),this.origCell)},cellOut:function(){this.cell&&(this.trigger("cellOut",this.cell),this.cellDone(),this.cell=null)},cellDone:function(){this.cell&&this.trigger("cellDone",this.cell)},listenStop:function(){tn.prototype.listenStop.apply(this,arguments),this.origCell=this.cell=null,this.coordMap.clear()},scrollStop:function(){tn.prototype.scrollStop.apply(this,arguments),this.computeCoords()},getCell:function(t,e){return this.coordAdjust&&(t+=this.coordAdjust.left,e+=this.coordAdjust.top),this.coordMap.getCell(t,e)}}),nn=ue.extend({options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,mouseY0:null,mouseX0:null,topDelta:null,leftDelta:null,mousemoveProxy:null,isFollowing:!1,isHidden:!1,isAnimating:!1,constructor:function(e,n){this.options=n=n||{},this.sourceEl=e,this.parentEl=n.parentEl?t(n.parentEl):e.parent()},start:function(e){this.isFollowing||(this.isFollowing=!0,this.mouseY0=e.pageY,this.mouseX0=e.pageX,this.topDelta=0,this.leftDelta=0,this.isHidden||this.updatePosition(),t(document).on("mousemove",this.mousemoveProxy=q(this,"mousemove")))},stop:function(e,n){function i(){this.isAnimating=!1,r.destroyEl(),this.top0=this.left0=null,n&&n()}var r=this,s=this.options.revertDuration;this.isFollowing&&!this.isAnimating&&(this.isFollowing=!1,t(document).off("mousemove",this.mousemoveProxy),e&&s&&!this.isHidden?(this.isAnimating=!0,this.el.animate({top:this.top0,left:this.left0},{duration:s,complete:i})):i())},getEl:function(){var t=this.el;return t||(this.sourceEl.width(),t=this.el=this.sourceEl.clone().css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}).appendTo(this.parentEl)),t},destroyEl:function(){this.el&&(this.el.remove(),this.el=null)},updatePosition:function(){var t,e;this.getEl(),null===this.top0&&(this.sourceEl.width(),t=this.sourceEl.offset(),e=this.el.offsetParent().offset(),this.top0=t.top-e.top,this.left0=t.left-e.left),this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},mousemove:function(t){this.topDelta=t.pageY-this.mouseY0,this.leftDelta=t.pageX-this.mouseX0,this.isHidden||this.updatePosition()},hide:function(){this.isHidden||(this.isHidden=!0,this.el&&this.el.hide())},show:function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())}}),rn=ue.extend({view:null,isRTL:null,cellHtml:"<td/>",constructor:function(t){this.view=t,this.isRTL=t.opt("isRTL")},rowHtml:function(t,e){var n,i,r=this.getHtmlRenderer("cell",t),s="";for(e=e||0,n=0;this.colCnt>n;n++)i=this.getCell(e,n),s+=r(i);return s=this.bookendCells(s,t,e),"<tr>"+s+"</tr>"},bookendCells:function(t,e,n){var i=this.getHtmlRenderer("intro",e)(n||0),r=this.getHtmlRenderer("outro",e)(n||0),s=this.isRTL?r:i,o=this.isRTL?i:r;return"string"==typeof t?s+t+o:t.prepend(s).append(o)},getHtmlRenderer:function(t,e){var n,i,r,s,o=this.view;return n=t+"Html",e&&(i=e+Z(t)+"Html"),i&&(s=o[i])?r=o:i&&(s=this[i])?r=this:(s=o[n])?r=o:(s=this[n])&&(r=this),"function"==typeof s?function(){return s.apply(r,arguments)||""}:function(){return s||""}}}),sn=Le.Grid=rn.extend({start:null,end:null,rowCnt:0,colCnt:0,rowData:null,colData:null,el:null,coordMap:null,elsByFill:null,externalDragStartProxy:null,colHeadFormat:null,eventTimeFormat:null,displayEventTime:null,displayEventEnd:null,cellDuration:null,largeUnit:null,constructor:function(){rn.apply(this,arguments),this.coordMap=new Qe(this),this.elsByFill={},this.externalDragStartProxy=q(this,"externalDragStart")},computeColHeadFormat:function(){},computeEventTimeFormat:function(){return this.view.opt("smallTimeFormat")},computeDisplayEventTime:function(){return!0},computeDisplayEventEnd:function(){return!0},setRange:function(t){var e,n,i=this.view;this.start=t.start.clone(),this.end=t.end.clone(),this.rowData=[],this.colData=[],this.updateCells(),this.colHeadFormat=i.opt("columnFormat")||this.computeColHeadFormat(),this.eventTimeFormat=i.opt("eventTimeFormat")||i.opt("timeFormat")||this.computeEventTimeFormat(),e=i.opt("displayEventTime"),null==e&&(e=this.computeDisplayEventTime()),n=i.opt("displayEventEnd"),null==n&&(n=this.computeDisplayEventEnd()),this.displayEventTime=e,this.displayEventEnd=n},updateCells:function(){},rangeToSegs:function(){},diffDates:function(t,e){return this.largeUnit?k(t,e,this.largeUnit):x(t,e)},getCell:function(e,n){var i;return null==n&&("number"==typeof e?(n=e%this.colCnt,e=Math.floor(e/this.colCnt)):(n=e.col,e=e.row)),i={row:e,col:n},t.extend(i,this.getRowData(e),this.getColData(n)),t.extend(i,this.computeCellRange(i)),i},computeCellRange:function(t){var e=this.computeCellDate(t);return{start:e,end:e.clone().add(this.cellDuration)}},computeCellDate:function(){},getRowData:function(t){return this.rowData[t]||{}},getColData:function(t){return this.colData[t]||{}},getRowEl:function(){},getColEl:function(){},getCellDayEl:function(t){return this.getColEl(t.col)||this.getRowEl(t.row)},computeRowCoords:function(){var t,e,n,i=[];for(t=0;this.rowCnt>t;t++)e=this.getRowEl(t),n=e.offset().top,i.push({top:n,bottom:n+e.outerHeight()});return i},computeColCoords:function(){var t,e,n,i=[];for(t=0;this.colCnt>t;t++)e=this.getColEl(t),n=e.offset().left,i.push({left:n,right:n+e.outerWidth()});return i},setElement:function(e){var n=this;this.el=e,e.on("mousedown",function(e){t(e.target).is(".fc-event-container *, .fc-more")||t(e.target).closest(".fc-popover").length||n.dayMousedown(e)}),this.bindSegHandlers(),this.bindGlobalHandlers()},removeElement:function(){this.unbindGlobalHandlers(),this.el.remove()},renderSkeleton:function(){},renderDates:function(){},destroyDates:function(){},bindGlobalHandlers:function(){t(document).on("dragstart sortstart",this.externalDragStartProxy)},unbindGlobalHandlers:function(){t(document).off("dragstart sortstart",this.externalDragStartProxy)},dayMousedown:function(t){var e,n,i=this,r=this.view,s=r.opt("selectable"),a=new en(this.coordMap,{scroll:r.opt("dragScroll"),dragStart:function(){r.unselect()},cellOver:function(t,r,l){l&&(e=r?t:null,s&&(n=i.computeSelection(l,t),n?i.renderSelection(n):o()))},cellOut:function(){e=null,n=null,i.destroySelection(),l()},listenStop:function(t){e&&r.trigger("dayClick",i.getCellDayEl(e),e.start,t),n&&r.reportSelection(n,t),l()}});a.mousedown(t)},renderRangeHelper:function(t,e){var n=this.fabricateHelperEvent(t,e);this.renderHelper(n,e)},fabricateHelperEvent:function(t,e){var n=e?_(e.event):{};return n.start=t.start.clone(),n.end=t.end?t.end.clone():null,n.allDay=null,this.view.calendar.normalizeEventRange(n),n.className=(n.className||[]).concat("fc-helper"),e||(n.editable=!1),n},renderHelper:function(){},destroyHelper:function(){},renderSelection:function(t){this.renderHighlight(t)},destroySelection:function(){this.destroyHighlight()},computeSelection:function(t,e){var n,i=[t.start,t.end,e.start,e.end];return i.sort(j),n={start:i[0].clone(),end:i[3].clone()},this.view.calendar.isSelectionRangeAllowed(n)?n:null},renderHighlight:function(t){this.renderFill("highlight",this.rangeToSegs(t))},destroyHighlight:function(){this.destroyFill("highlight")},highlightSegClasses:function(){return["fc-highlight"]},renderFill:function(){},destroyFill:function(t){var e=this.elsByFill[t];e&&(e.remove(),delete this.elsByFill[t])},renderFillSegEls:function(e,n){var i,r=this,s=this[e+"SegEl"],o="",l=[];if(n.length){for(i=0;n.length>i;i++)o+=this.fillSegHtml(e,n[i]);t(o).each(function(e,i){var o=n[e],a=t(i);s&&(a=s.call(r,o,a)),a&&(a=t(a),a.is(r.fillSegTag)&&(o.el=a,l.push(o)))})}return l},fillSegTag:"div",fillSegHtml:function(t,e){var n=this[t+"SegClasses"],i=this[t+"SegCss"],r=n?n.call(this,e):[],s=W(i?i.call(this,e):{});return"<"+this.fillSegTag+(r.length?' class="'+r.join(" ")+'"':"")+(s?' style="'+s+'"':"")+" />"},headHtml:function(){return'<div class="fc-row '+this.view.widgetHeaderClass+'">'+"<table>"+"<thead>"+this.rowHtml("head")+"</thead>"+"</table>"+"</div>"},headCellHtml:function(t){var e=this.view,n=t.start;return'<th class="fc-day-header '+e.widgetHeaderClass+" fc-"+Be[n.day()]+'">'+Y(n.format(this.colHeadFormat))+"</th>"},bgCellHtml:function(t){var e=this.view,n=t.start,i=this.getDayClasses(n);return i.unshift("fc-day",e.widgetContentClass),'<td class="'+i.join(" ")+'"'+' data-date="'+n.format("YYYY-MM-DD")+'"'+"></td>"},getDayClasses:function(t){var e=this.view,n=e.calendar.getNow().stripTime(),i=["fc-"+Be[t.day()]];return 1==e.intervalDuration.as("months")&&t.month()!=e.intervalStart.month()&&i.push("fc-other-month"),t.isSame(n,"day")?i.push("fc-today",e.highlightStateClass):n>t?i.push("fc-past"):i.push("fc-future"),i}});sn.mixin({mousedOverSeg:null,isDraggingSeg:!1,isResizingSeg:!1,isDraggingExternal:!1,segs:null,renderEvents:function(t){var e,n,i=this.eventsToSegs(t),r=[],s=[];for(e=0;i.length>e;e++)n=i[e],de(n.event)?r.push(n):s.push(n);r=this.renderBgSegs(r)||r,s=this.renderFgSegs(s)||s,this.segs=r.concat(s)},destroyEvents:function(){this.triggerSegMouseout(),this.destroyFgSegs(),this.destroyBgSegs(),this.segs=null},getEventSegs:function(){return this.segs||[]},renderFgSegs:function(){},destroyFgSegs:function(){},renderFgSegEls:function(e,n){var i,r=this.view,s="",o=[];if(e.length){for(i=0;e.length>i;i++)s+=this.fgSegHtml(e[i],n);t(s).each(function(n,i){var s=e[n],l=r.resolveEventEl(s.event,t(i));l&&(l.data("fc-seg",s),s.el=l,o.push(s))})}return o},fgSegHtml:function(){},renderBgSegs:function(t){return this.renderFill("bgEvent",t)},destroyBgSegs:function(){this.destroyFill("bgEvent")},bgEventSegEl:function(t,e){return this.view.resolveEventEl(t.event,e)},bgEventSegClasses:function(t){var e=t.event,n=e.source||{};return["fc-bgevent"].concat(e.className,n.className||[])},bgEventSegCss:function(t){var e=this.view,n=t.event,i=n.source||{};return{"background-color":n.backgroundColor||n.color||i.backgroundColor||i.color||e.opt("eventBackgroundColor")||e.opt("eventColor")}},businessHoursSegClasses:function(){return["fc-nonbusiness","fc-bgevent"]},bindSegHandlers:function(){var e=this,n=this.view;t.each({mouseenter:function(t,n){e.triggerSegMouseover(t,n)},mouseleave:function(t,n){e.triggerSegMouseout(t,n)},click:function(t,e){return n.trigger("eventClick",this,t.event,e)},mousedown:function(i,r){t(r.target).is(".fc-resizer")&&n.isEventResizable(i.event)?e.segResizeMousedown(i,r,t(r.target).is(".fc-start-resizer")):n.isEventDraggable(i.event)&&e.segDragMousedown(i,r)}},function(n,i){e.el.on(n,".fc-event-container > *",function(n){var r=t(this).data("fc-seg");return!r||e.isDraggingSeg||e.isResizingSeg?void 0:i.call(this,r,n)})})},triggerSegMouseover:function(t,e){this.mousedOverSeg||(this.mousedOverSeg=t,this.view.trigger("eventMouseover",t.el[0],t.event,e))},triggerSegMouseout:function(t,e){e=e||{},this.mousedOverSeg&&(t=t||this.mousedOverSeg,this.mousedOverSeg=null,this.view.trigger("eventMouseout",t.el[0],t.event,e))},segDragMousedown:function(t,e){var n,i=this,r=this.view,s=r.calendar,a=t.el,u=t.event,c=new nn(t.el,{parentEl:r.el,opacity:r.opt("dragOpacity"),revertDuration:r.opt("dragRevertDuration"),zIndex:2}),d=new en(r.coordMap,{distance:5,scroll:r.opt("dragScroll"),subjectEl:a,subjectCenter:!0,listenStart:function(t){c.hide(),c.start(t)},dragStart:function(e){i.triggerSegMouseout(t,e),i.segDragStart(t,e),r.hideEvent(u)},cellOver:function(e,l,a){t.cell&&(a=t.cell),n=i.computeEventDrop(a,e,u),n&&!s.isEventRangeAllowed(n,u)&&(o(),n=null),n&&r.renderDrag(n,t)?c.hide():c.show(),l&&(n=null)},cellOut:function(){r.destroyDrag(),c.show(),n=null},cellDone:function(){l()},dragStop:function(e){c.stop(!n,function(){r.destroyDrag(),r.showEvent(u),i.segDragStop(t,e),n&&r.reportEventDrop(u,n,this.largeUnit,a,e)})},listenStop:function(){c.stop()}});d.mousedown(e)},segDragStart:function(t,e){this.isDraggingSeg=!0,this.view.trigger("eventDragStart",t.el[0],t.event,e,{})},segDragStop:function(t,e){this.isDraggingSeg=!1,this.view.trigger("eventDragStop",t.el[0],t.event,e,{})},computeEventDrop:function(t,e,n){var i,r,s=this.view.calendar,o=t.start,l=e.start;return o.hasTime()===l.hasTime()?(i=this.diffDates(l,o),n.allDay&&z(i)?(r={start:n.start.clone(),end:s.getEventEnd(n),allDay:!1},s.normalizeEventRangeTimes(r)):r={start:n.start.clone(),end:n.end?n.end.clone():null,allDay:n.allDay},r.start.add(i),r.end&&r.end.add(i)):r={start:l.clone(),end:null,allDay:!l.hasTime()},r},applyDragOpacity:function(t){var e=this.view.opt("dragOpacity");null!=e&&t.each(function(t,n){n.style.opacity=e})},externalDragStart:function(e,n){var i,r,s=this.view;s.opt("droppable")&&(i=t((n?n.item:null)||e.target),r=s.opt("dropAccept"),(t.isFunction(r)?r.call(i[0],i):i.is(r))&&(this.isDraggingExternal||this.listenToExternalDrag(i,e,n)))},listenToExternalDrag:function(t,e,n){var i,r,s=this,a=ve(t);i=new en(this.coordMap,{listenStart:function(){s.isDraggingExternal=!0},cellOver:function(t){r=s.computeExternalDrop(t,a),r?s.renderDrag(r):o()},cellOut:function(){r=null,s.destroyDrag(),l()},dragStop:function(){s.destroyDrag(),l(),r&&s.view.reportExternalDrop(a,r,t,e,n)},listenStop:function(){s.isDraggingExternal=!1}}),i.startDrag(e)},computeExternalDrop:function(t,e){var n={start:t.start.clone(),end:null};return e.startTime&&!n.start.hasTime()&&n.start.time(e.startTime),e.duration&&(n.end=n.start.clone().add(e.duration)),this.view.calendar.isExternalDropRangeAllowed(n,e.eventProps)?n:null},renderDrag:function(){},destroyDrag:function(){},segResizeMousedown:function(t,e,n){var i,r,s=this,a=this.view,u=a.calendar,c=t.el,d=t.event,h=u.getEventEnd(d);i=new en(this.coordMap,{distance:5,scroll:a.opt("dragScroll"),subjectEl:c,dragStart:function(e){s.triggerSegMouseout(t,e),s.segResizeStart(t,e)},cellOver:function(e,i,l){r=n?s.computeEventStartResize(l,e,d):s.computeEventEndResize(l,e,d),r&&(u.isEventRangeAllowed(r,d)?r.start.isSame(d.start)&&r.end.isSame(h)&&(r=null):(o(),r=null)),r&&(a.hideEvent(d),s.renderEventResize(r,t))},cellOut:function(){r=null},cellDone:function(){s.destroyEventResize(),a.showEvent(d),l()},dragStop:function(e){s.segResizeStop(t,e),r&&a.reportEventResize(d,r,this.largeUnit,c,e)}}),i.mousedown(e)},segResizeStart:function(t,e){this.isResizingSeg=!0,this.view.trigger("eventResizeStart",t.el[0],t.event,e,{})},segResizeStop:function(t,e){this.isResizingSeg=!1,this.view.trigger("eventResizeStop",t.el[0],t.event,e,{})},computeEventStartResize:function(t,e,n){return this.computeEventResize("start",t,e,n)},computeEventEndResize:function(t,e,n){return this.computeEventResize("end",t,e,n)},computeEventResize:function(t,e,n,i){var r,s,o=this.view.calendar,l=this.diffDates(n[t],e[t]);return r={start:i.start.clone(),end:o.getEventEnd(i),allDay:i.allDay},r.allDay&&z(l)&&(r.allDay=!1,o.normalizeEventRangeTimes(r)),r[t].add(l),r.start.isBefore(r.end)||(s=i.allDay?o.defaultAllDayEventDuration:o.defaultTimedEventDuration,this.cellDuration&&s>this.cellDuration&&(s=this.cellDuration),"start"==t?r.start=r.end.clone().subtract(s):r.end=r.start.clone().add(s)),r},renderEventResize:function(){},destroyEventResize:function(){},getEventTimeText:function(t,e,n){return null==e&&(e=this.eventTimeFormat),null==n&&(n=this.displayEventEnd),this.displayEventTime&&t.start.hasTime()?n&&t.end?this.view.formatRange(t,e):t.start.format(e):""},getSegClasses:function(t,e,n){var i=t.event,r=["fc-event",t.isStart?"fc-start":"fc-not-start",t.isEnd?"fc-end":"fc-not-end"].concat(i.className,i.source?i.source.className:[]);return e&&r.push("fc-draggable"),n&&r.push("fc-resizable"),r},getEventSkinCss:function(t){var e=this.view,n=t.source||{},i=t.color,r=n.color,s=e.opt("eventColor");return{"background-color":t.backgroundColor||i||n.backgroundColor||r||e.opt("eventBackgroundColor")||s,"border-color":t.borderColor||i||n.borderColor||r||e.opt("eventBorderColor")||s,color:t.textColor||n.textColor||e.opt("eventTextColor")}},eventsToSegs:function(t,e){var n,i=this.eventsToRanges(t),r=[];for(n=0;i.length>n;n++)r.push.apply(r,this.eventRangeToSegs(i[n],e));return r},eventsToRanges:function(e){var n=this,i=ge(e),r=[];return t.each(i,function(t,e){e.length&&r.push.apply(r,he(e[0])?n.eventsToInverseRanges(e):n.eventsToNormalRanges(e))}),r},eventsToNormalRanges:function(t){var e,n,i,r,s=this.view.calendar,o=[];for(e=0;t.length>e;e++)n=t[e],i=n.start.clone().stripZone(),r=s.getEventEnd(n).stripZone(),o.push({event:n,start:i,end:r,eventStartMS:+i,eventDurationMS:r-i});return o},eventsToInverseRanges:function(t){var e,n,i=this.view,r=i.start.clone().stripZone(),s=i.end.clone().stripZone(),o=this.eventsToNormalRanges(t),l=[],a=t[0],u=r;for(o.sort(pe),e=0;o.length>e;e++)n=o[e],n.start>u&&l.push({event:a,start:u,end:n.start}),u=n.end;return s>u&&l.push({event:a,start:u,end:s}),l},eventRangeToSegs:function(t,e){var n,i,r;for(n=e?e(t):this.rangeToSegs(t),i=0;n.length>i;i++)r=n[i],r.event=t.event,r.eventStartMS=t.eventStartMS,r.eventDurationMS=t.eventDurationMS;return n}}),Le.compareSegs=me,Le.dataAttrPrefix="";var on=sn.extend({numbersVisible:!1,bottomCoordPadding:0,breakOnWeeks:null,cellDates:null,dayToCellOffsets:null,rowEls:null,dayEls:null,helperEls:null,constructor:function(){sn.apply(this,arguments),this.cellDuration=e.duration(1,"day")},renderDates:function(t){var e,n,i,r=this.view,s=this.rowCnt,o=this.colCnt,l=s*o,a="";for(e=0;s>e;e++)a+=this.dayRowHtml(e,t);for(this.el.html(a),this.rowEls=this.el.find(".fc-row"),this.dayEls=this.el.find(".fc-day"),n=0;l>n;n++)i=this.getCell(n),r.trigger("dayRender",null,i.start,this.dayEls.eq(n))},destroyDates:function(){this.destroySegPopover()},renderBusinessHours:function(){var t=this.view.calendar.getBusinessHoursEvents(!0),e=this.eventsToSegs(t);this.renderFill("businessHours",e,"bgevent")},dayRowHtml:function(t,e){var n=this.view,i=["fc-row","fc-week",n.widgetContentClass];return e&&i.push("fc-rigid"),'<div class="'+i.join(" ")+'">'+'<div class="fc-bg">'+"<table>"+this.rowHtml("day",t)+"</table>"+"</div>"+'<div class="fc-content-skeleton">'+"<table>"+(this.numbersVisible?"<thead>"+this.rowHtml("number",t)+"</thead>":"")+"</table>"+"</div>"+"</div>"},dayCellHtml:function(t){return this.bgCellHtml(t)},computeColHeadFormat:function(){return this.rowCnt>1?"ddd":this.colCnt>1?this.view.opt("dayOfMonthFormat"):"dddd"},computeEventTimeFormat:function(){return this.view.opt("extraSmallTimeFormat")},computeDisplayEventEnd:function(){return 1==this.colCnt},updateCells:function(){var t,e,n,i;if(this.updateCellDates(),t=this.cellDates,this.breakOnWeeks){for(e=t[0].day(),i=1;t.length>i&&t[i].day()!=e;i++);n=Math.ceil(t.length/i)}else n=1,i=t.length;this.rowCnt=n,this.colCnt=i},updateCellDates:function(){for(var t=this.view,e=this.start.clone(),n=[],i=-1,r=[];e.isBefore(this.end);)t.isHiddenDay(e)?r.push(i+.5):(i++,r.push(i),n.push(e.clone())),e.add(1,"days");this.cellDates=n,this.dayToCellOffsets=r},computeCellDate:function(t){var e=this.colCnt,n=t.row*e+(this.isRTL?e-t.col-1:t.col);return this.cellDates[n].clone()},getRowEl:function(t){return this.rowEls.eq(t)},getColEl:function(t){return this.dayEls.eq(t)},getCellDayEl:function(t){return this.dayEls.eq(t.row*this.colCnt+t.col)},computeRowCoords:function(){var t=sn.prototype.computeRowCoords.call(this);return t[t.length-1].bottom+=this.bottomCoordPadding,t},rangeToSegs:function(t){var e,n,i,r,s,o,l,a,u,c,d=this.isRTL,h=this.rowCnt,f=this.colCnt,g=[];for(t=this.view.computeDayRange(t),e=this.dateToCellOffset(t.start),n=this.dateToCellOffset(t.end.subtract(1,"days")),i=0;h>i;i++)r=i*f,s=r+f-1,a=Math.max(r,e),u=Math.min(s,n),a=Math.ceil(a),u=Math.floor(u),u>=a&&(o=a===e,l=u===n,a-=r,u-=r,c={row:i,isStart:o,isEnd:l},d?(c.leftCol=f-u-1,c.rightCol=f-a-1):(c.leftCol=a,c.rightCol=u),g.push(c));return g},dateToCellOffset:function(t){var e=this.dayToCellOffsets,n=t.diff(this.start,"days");return 0>n?e[0]-1:n>=e.length?e[e.length-1]+1:e[n]},renderDrag:function(t,e){return this.renderHighlight(this.view.calendar.ensureVisibleEventRange(t)),e&&!e.el.closest(this.el).length?(this.renderRangeHelper(t,e),this.applyDragOpacity(this.helperEls),!0):void 0},destroyDrag:function(){this.destroyHighlight(),this.destroyHelper()},renderEventResize:function(t,e){this.renderHighlight(t),this.renderRangeHelper(t,e)},destroyEventResize:function(){this.destroyHighlight(),this.destroyHelper()},renderHelper:function(e,n){var i,r=[],s=this.eventsToSegs([e]);s=this.renderFgSegEls(s),i=this.renderSegRows(s),this.rowEls.each(function(e,s){var o,l=t(s),a=t('<div class="fc-helper-skeleton"><table/></div>');o=n&&n.row===e?n.el.position().top:l.find(".fc-content-skeleton tbody").position().top,a.css("top",o).find("table").append(i[e].tbodyEl),l.append(a),r.push(a[0])}),this.helperEls=t(r)},destroyHelper:function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},fillSegTag:"td",renderFill:function(e,n,i){var r,s,o,l=[];for(n=this.renderFillSegEls(e,n),r=0;n.length>r;r++)s=n[r],o=this.renderFillRow(e,s,i),this.rowEls.eq(s.row).append(o),l.push(o[0]);return this.elsByFill[e]=t(l),n},renderFillRow:function(e,n,i){var r,s,o=this.colCnt,l=n.leftCol,a=n.rightCol+1;return i=i||e.toLowerCase(),r=t('<div class="fc-'+i+'-skeleton">'+"<table><tr/></table>"+"</div>"),s=r.find("tr"),l>0&&s.append('<td colspan="'+l+'"/>'),s.append(n.el.attr("colspan",a-l)),o>a&&s.append('<td colspan="'+(o-a)+'"/>'),this.bookendCells(s,e),r}});on.mixin({rowStructs:null,destroyEvents:function(){this.destroySegPopover(),sn.prototype.destroyEvents.apply(this,arguments)},getEventSegs:function(){return sn.prototype.getEventSegs.call(this).concat(this.popoverSegs||[])},renderBgSegs:function(e){var n=t.grep(e,function(t){return t.event.allDay});return sn.prototype.renderBgSegs.call(this,n)},renderFgSegs:function(e){var n;return e=this.renderFgSegEls(e),n=this.rowStructs=this.renderSegRows(e),this.rowEls.each(function(e,i){t(i).find(".fc-content-skeleton > table").append(n[e].tbodyEl)}),e},destroyFgSegs:function(){for(var t,e=this.rowStructs||[];t=e.pop();)t.tbodyEl.remove();this.rowStructs=null},renderSegRows:function(t){var e,n,i=[];for(e=this.groupSegRows(t),n=0;e.length>n;n++)i.push(this.renderSegRow(n,e[n]));return i},fgSegHtml:function(t,e){var n,i,r=this.view,s=t.event,o=r.isEventDraggable(s),l=!e&&s.allDay&&t.isStart&&r.isEventResizableFromStart(s),a=!e&&s.allDay&&t.isEnd&&r.isEventResizableFromEnd(s),u=this.getSegClasses(t,o,l||a),c=W(this.getEventSkinCss(s)),d="";return u.unshift("fc-day-grid-event","fc-h-event"),t.isStart&&(n=this.getEventTimeText(s),n&&(d='<span class="fc-time">'+Y(n)+"</span>")),i='<span class="fc-title">'+(Y(s.title||"")||"&nbsp;")+"</span>",'<a class="'+u.join(" ")+'"'+(s.url?' href="'+Y(s.url)+'"':"")+(c?' style="'+c+'"':"")+">"+'<div class="fc-content">'+(this.isRTL?i+" "+d:d+" "+i)+"</div>"+(l?'<div class="fc-resizer fc-start-resizer" />':"")+(a?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},renderSegRow:function(e,n){function i(e){for(;e>o;)c=(v[r-1]||[])[o],c?c.attr("rowspan",parseInt(c.attr("rowspan")||1,10)+1):(c=t("<td/>"),l.append(c)),m[r][o]=c,v[r][o]=c,o++}var r,s,o,l,a,u,c,d=this.colCnt,h=this.buildSegLevels(n),f=Math.max(1,h.length),g=t("<tbody/>"),p=[],m=[],v=[];for(r=0;f>r;r++){if(s=h[r],o=0,l=t("<tr/>"),p.push([]),m.push([]),v.push([]),s)for(a=0;s.length>a;a++){for(u=s[a],i(u.leftCol),c=t('<td class="fc-event-container"/>').append(u.el),u.leftCol!=u.rightCol?c.attr("colspan",u.rightCol-u.leftCol+1):v[r][o]=c;u.rightCol>=o;)m[r][o]=c,p[r][o]=u,o++;l.append(c)}i(d),this.bookendCells(l,"eventSkeleton"),g.append(l)}return{row:e,tbodyEl:g,cellMatrix:m,segMatrix:p,segLevels:h,segs:n}},buildSegLevels:function(t){var e,n,i,r=[];for(t.sort(me),e=0;t.length>e;e++){for(n=t[e],i=0;r.length>i&&ye(n,r[i]);i++);n.level=i,(r[i]||(r[i]=[])).push(n)}for(i=0;r.length>i;i++)r[i].sort(we);return r},groupSegRows:function(t){var e,n=[];for(e=0;this.rowCnt>e;e++)n.push([]);for(e=0;t.length>e;e++)n[t[e].row].push(t[e]);return n}}),on.mixin({segPopover:null,popoverSegs:null,destroySegPopover:function(){this.segPopover&&this.segPopover.hide()},limitRows:function(t){var e,n,i=this.rowStructs||[];for(e=0;i.length>e;e++)this.unlimitRow(e),n=t?"number"==typeof t?t:this.computeRowLevelLimit(e):!1,n!==!1&&this.limitRow(e,n)},computeRowLevelLimit:function(e){function n(e,n){s=Math.max(s,t(n).outerHeight())}var i,r,s,o=this.rowEls.eq(e),l=o.height(),a=this.rowStructs[e].tbodyEl.children();for(i=0;a.length>i;i++)if(r=a.eq(i).removeClass("fc-limited"),s=0,r.find("> td > :first-child").each(n),r.position().top+s>l)return i;return!1},limitRow:function(e,n){function i(i){for(;i>D;)r=E.getCell(e,D),c=E.getCellSegs(r,n),c.length&&(f=o[n-1][D],w=E.renderMoreLink(r,c),y=t("<div/>").append(w),f.append(y),b.push(y[0])),D++}var r,s,o,l,a,u,c,d,h,f,g,p,m,v,y,w,E=this,S=this.rowStructs[e],b=[],D=0;if(n&&S.segLevels.length>n){for(s=S.segLevels[n-1],o=S.cellMatrix,l=S.tbodyEl.children().slice(n).addClass("fc-limited").get(),a=0;s.length>a;a++){for(u=s[a],i(u.leftCol),h=[],d=0;u.rightCol>=D;)r=this.getCell(e,D),c=this.getCellSegs(r,n),h.push(c),d+=c.length,D++;if(d){for(f=o[n-1][u.leftCol],g=f.attr("rowspan")||1,p=[],m=0;h.length>m;m++)v=t('<td class="fc-more-cell"/>').attr("rowspan",g),c=h[m],r=this.getCell(e,u.leftCol+m),w=this.renderMoreLink(r,[u].concat(c)),y=t("<div/>").append(w),v.append(y),p.push(v[0]),b.push(v[0]);f.addClass("fc-limited").after(t(p)),l.push(f[0])}}i(this.colCnt),S.moreEls=t(b),S.limitedEls=t(l)}},unlimitRow:function(t){var e=this.rowStructs[t];e.moreEls&&(e.moreEls.remove(),e.moreEls=null),e.limitedEls&&(e.limitedEls.removeClass("fc-limited"),e.limitedEls=null)},renderMoreLink:function(e,n){var i=this,r=this.view;return t('<a class="fc-more"/>').text(this.getMoreLinkText(n.length)).on("click",function(s){var o=r.opt("eventLimitClick"),l=e.start,a=t(this),u=i.getCellDayEl(e),c=i.getCellSegs(e),d=i.resliceDaySegs(c,l),h=i.resliceDaySegs(n,l);"function"==typeof o&&(o=r.trigger("eventLimitClick",null,{date:l,dayEl:u,moreEl:a,segs:d,hiddenSegs:h},s)),"popover"===o?i.showSegPopover(e,a,d):"string"==typeof o&&r.calendar.zoomTo(l,o)})},showSegPopover:function(t,e,n){var i,r,s=this,o=this.view,l=e.parent();i=1==this.rowCnt?o.el:this.rowEls.eq(t.row),r={className:"fc-more-popover",content:this.renderSegPopoverContent(t,n),parentEl:this.el,top:i.offset().top,autoHide:!0,viewportConstrain:o.opt("popoverViewportConstrain"),hide:function(){s.segPopover.destroy(),s.segPopover=null,s.popoverSegs=null}},this.isRTL?r.right=l.offset().left+l.outerWidth()+1:r.left=l.offset().left-1,this.segPopover=new Ke(r),this.segPopover.show()},renderSegPopoverContent:function(e,n){var i,r=this.view,s=r.opt("theme"),o=e.start.format(r.opt("dayPopoverFormat")),l=t('<div class="fc-header '+r.widgetHeaderClass+'">'+'<span class="fc-close '+(s?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span>'+'<span class="fc-title">'+Y(o)+"</span>"+'<div class="fc-clear"/>'+"</div>"+'<div class="fc-body '+r.widgetContentClass+'">'+'<div class="fc-event-container"></div>'+"</div>"),a=l.find(".fc-event-container");for(n=this.renderFgSegEls(n,!0),this.popoverSegs=n,i=0;n.length>i;i++)n[i].cell=e,a.append(n[i].el);return l},resliceDaySegs:function(e,n){var i=t.map(e,function(t){return t.event}),r=n.clone().stripTime(),s=r.clone().add(1,"days"),o={start:r,end:s};return e=this.eventsToSegs(i,function(t){var e=H(t,o);return e?[e]:[]}),e.sort(me),e},getMoreLinkText:function(t){var e=this.view.opt("eventLimitText");
return"function"==typeof e?e(t):"+"+t+" "+e},getCellSegs:function(t,e){for(var n,i=this.rowStructs[t.row].segMatrix,r=e||0,s=[];i.length>r;)n=i[r][t.col],n&&s.push(n),r++;return s}});var ln=sn.extend({slotDuration:null,snapDuration:null,minTime:null,maxTime:null,axisFormat:null,dayEls:null,slatEls:null,slatTops:null,helperEl:null,businessHourSegs:null,constructor:function(){sn.apply(this,arguments),this.processOptions()},renderDates:function(){this.el.html(this.renderHtml()),this.dayEls=this.el.find(".fc-day"),this.slatEls=this.el.find(".fc-slats tr")},renderBusinessHours:function(){var t=this.view.calendar.getBusinessHoursEvents();this.businessHourSegs=this.renderFill("businessHours",this.eventsToSegs(t),"bgevent")},renderHtml:function(){return'<div class="fc-bg"><table>'+this.rowHtml("slotBg")+"</table>"+"</div>"+'<div class="fc-slats">'+"<table>"+this.slatRowHtml()+"</table>"+"</div>"},slotBgCellHtml:function(t){return this.bgCellHtml(t)},slatRowHtml:function(){for(var t,n,i,r=this.view,s=this.isRTL,o="",l=0===this.slotDuration.asMinutes()%15,a=e.duration(+this.minTime);this.maxTime>a;)t=this.start.clone().time(a),n=t.minutes(),i='<td class="fc-axis fc-time '+r.widgetContentClass+'" '+r.axisStyleAttr()+">"+(l&&n?"":"<span>"+Y(t.format(this.axisFormat))+"</span>")+"</td>",o+="<tr "+(n?'class="fc-minor"':"")+">"+(s?"":i)+'<td class="'+r.widgetContentClass+'"/>'+(s?i:"")+"</tr>",a.add(this.slotDuration);return o},processOptions:function(){var t=this.view,n=t.opt("slotDuration"),i=t.opt("snapDuration");n=e.duration(n),i=i?e.duration(i):n,this.slotDuration=n,this.snapDuration=i,this.cellDuration=i,this.minTime=e.duration(t.opt("minTime")),this.maxTime=e.duration(t.opt("maxTime")),this.axisFormat=t.opt("axisFormat")||t.opt("smallTimeFormat")},computeColHeadFormat:function(){return this.colCnt>1?this.view.opt("dayOfMonthFormat"):"dddd"},computeEventTimeFormat:function(){return this.view.opt("noMeridiemTimeFormat")},computeDisplayEventEnd:function(){return!0},updateCells:function(){var t,e=this.view,n=[];for(t=this.start.clone();t.isBefore(this.end);)n.push({day:t.clone()}),t.add(1,"day"),t=e.skipHiddenDays(t);this.isRTL&&n.reverse(),this.colData=n,this.colCnt=n.length,this.rowCnt=Math.ceil((this.maxTime-this.minTime)/this.snapDuration)},computeCellDate:function(t){var e=this.computeSnapTime(t.row);return this.view.calendar.rezoneDate(t.day).time(e)},getColEl:function(t){return this.dayEls.eq(t)},computeSnapTime:function(t){return e.duration(this.minTime+this.snapDuration*t)},rangeToSegs:function(t){var e,n,i,r,s=this.colCnt,o=[];for(t={start:t.start.clone().stripZone(),end:t.end.clone().stripZone()},n=0;s>n;n++)i=this.colData[n].day,r={start:i.clone().time(this.minTime),end:i.clone().time(this.maxTime)},e=H(t,r),e&&(e.col=n,o.push(e));return o},updateSize:function(t){this.computeSlatTops(),t&&this.updateSegVerticals()},computeRowCoords:function(){var t,e,n=this.el.offset().top,i=[];for(t=0;this.rowCnt>t;t++)e={top:n+this.computeTimeTop(this.computeSnapTime(t))},t>0&&(i[t-1].bottom=e.top),i.push(e);return e.bottom=e.top+this.computeTimeTop(this.computeSnapTime(t)),i},computeDateTop:function(t,n){return this.computeTimeTop(e.duration(t.clone().stripZone()-n.clone().stripTime()))},computeTimeTop:function(t){var e,n,i,r,s=(t-this.minTime)/this.slotDuration;return s=Math.max(0,s),s=Math.min(this.slatEls.length,s),e=Math.floor(s),n=s-e,i=this.slatTops[e],n?(r=this.slatTops[e+1],i+(r-i)*n):i},computeSlatTops:function(){var e,n=[];this.slatEls.each(function(i,r){e=t(r).position().top,n.push(e)}),n.push(e+this.slatEls.last().outerHeight()),this.slatTops=n},renderDrag:function(t,e){return e?(this.renderRangeHelper(t,e),this.applyDragOpacity(this.helperEl),!0):(this.renderHighlight(this.view.calendar.ensureVisibleEventRange(t)),void 0)},destroyDrag:function(){this.destroyHelper(),this.destroyHighlight()},renderEventResize:function(t,e){this.renderRangeHelper(t,e)},destroyEventResize:function(){this.destroyHelper()},renderHelper:function(e,n){var i,r,s,o,l=this.eventsToSegs([e]);for(l=this.renderFgSegEls(l),i=this.renderSegTable(l),r=0;l.length>r;r++)s=l[r],n&&n.col===s.col&&(o=n.el,s.el.css({left:o.css("left"),right:o.css("right"),"margin-left":o.css("margin-left"),"margin-right":o.css("margin-right")}));this.helperEl=t('<div class="fc-helper-skeleton"/>').append(i).appendTo(this.el)},destroyHelper:function(){this.helperEl&&(this.helperEl.remove(),this.helperEl=null)},renderSelection:function(t){this.view.opt("selectHelper")?this.renderRangeHelper(t):this.renderHighlight(t)},destroySelection:function(){this.destroyHelper(),this.destroyHighlight()},renderFill:function(e,n,i){var r,s,o,l,a,u,c,d,h,f;if(n.length){for(n=this.renderFillSegEls(e,n),r=this.groupSegCols(n),i=i||e.toLowerCase(),s=t('<div class="fc-'+i+'-skeleton">'+"<table><tr/></table>"+"</div>"),o=s.find("tr"),l=0;r.length>l;l++)if(a=r[l],u=t("<td/>").appendTo(o),a.length)for(c=t('<div class="fc-'+i+'-container"/>').appendTo(u),d=this.colData[l].day,h=0;a.length>h;h++)f=a[h],c.append(f.el.css({top:this.computeDateTop(f.start,d),bottom:-this.computeDateTop(f.end,d)}));this.bookendCells(o,e),this.el.append(s),this.elsByFill[e]=s}return n}});ln.mixin({eventSkeletonEl:null,renderFgSegs:function(e){return e=this.renderFgSegEls(e),this.el.append(this.eventSkeletonEl=t('<div class="fc-content-skeleton"/>').append(this.renderSegTable(e))),e},destroyFgSegs:function(){this.eventSkeletonEl&&(this.eventSkeletonEl.remove(),this.eventSkeletonEl=null)},renderSegTable:function(e){var n,i,r,s,o,l,a=t("<table><tr/></table>"),u=a.find("tr");for(n=this.groupSegCols(e),this.computeSegVerticals(e),s=0;n.length>s;s++){for(o=n[s],Ee(o),l=t('<div class="fc-event-container"/>'),i=0;o.length>i;i++)r=o[i],r.el.css(this.generateSegPositionCss(r)),30>r.bottom-r.top&&r.el.addClass("fc-short"),l.append(r.el);u.append(t("<td/>").append(l))}return this.bookendCells(u,"eventSkeleton"),a},updateSegVerticals:function(){var t,e=(this.segs||[]).concat(this.businessHourSegs||[]);for(this.computeSegVerticals(e),t=0;e.length>t;t++)e[t].el.css(this.generateSegVerticalCss(e[t]))},computeSegVerticals:function(t){var e,n;for(e=0;t.length>e;e++)n=t[e],n.top=this.computeDateTop(n.start,n.start),n.bottom=this.computeDateTop(n.end,n.start)},fgSegHtml:function(t,e){var n,i,r,s=this.view,o=t.event,l=s.isEventDraggable(o),a=!e&&t.isStart&&s.isEventResizableFromStart(o),u=!e&&t.isEnd&&s.isEventResizableFromEnd(o),c=this.getSegClasses(t,l,a||u),d=W(this.getEventSkinCss(o));return c.unshift("fc-time-grid-event","fc-v-event"),s.isMultiDayEvent(o)?(t.isStart||t.isEnd)&&(n=this.getEventTimeText(t),i=this.getEventTimeText(t,"LT"),r=this.getEventTimeText(t,null,!1)):(n=this.getEventTimeText(o),i=this.getEventTimeText(o,"LT"),r=this.getEventTimeText(o,null,!1)),'<a class="'+c.join(" ")+'"'+(o.url?' href="'+Y(o.url)+'"':"")+(d?' style="'+d+'"':"")+">"+'<div class="fc-content">'+(n?'<div class="fc-time" data-start="'+Y(r)+'"'+' data-full="'+Y(i)+'"'+">"+"<span>"+Y(n)+"</span>"+"</div>":"")+(o.title?'<div class="fc-title">'+Y(o.title)+"</div>":"")+"</div>"+'<div class="fc-bg"/>'+(u?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},generateSegPositionCss:function(t){var e,n,i=this.view.opt("slotEventOverlap"),r=t.backwardCoord,s=t.forwardCoord,o=this.generateSegVerticalCss(t);return i&&(s=Math.min(1,r+2*(s-r))),this.isRTL?(e=1-s,n=r):(e=r,n=1-s),o.zIndex=t.level+1,o.left=100*e+"%",o.right=100*n+"%",i&&t.forwardPressure&&(o[this.isRTL?"marginLeft":"marginRight"]=20),o},generateSegVerticalCss:function(t){return{top:t.top,bottom:-t.bottom}},groupSegCols:function(t){var e,n=[];for(e=0;this.colCnt>e;e++)n.push([]);for(e=0;t.length>e;e++)n[t[e].col].push(t[e]);return n}});var an=Le.View=ue.extend({type:null,name:null,title:null,calendar:null,options:null,coordMap:null,el:null,isDisplayed:!1,isSkeletonRendered:!1,isEventsRendered:!1,start:null,end:null,intervalStart:null,intervalEnd:null,intervalDuration:null,intervalUnit:null,isSelected:!1,scrollerEl:null,scrollTop:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,nextDayThreshold:null,isHiddenDayHash:null,documentMousedownProxy:null,constructor:function(t,n,i,r){this.calendar=t,this.type=this.name=n,this.options=i,this.intervalDuration=r||e.duration(1,"day"),this.nextDayThreshold=e.duration(this.opt("nextDayThreshold")),this.initThemingProps(),this.initHiddenDays(),this.documentMousedownProxy=q(this,"documentMousedown"),this.initialize()},initialize:function(){},opt:function(t){return this.options[t]},trigger:function(t,e){var n=this.calendar;return n.trigger.apply(n,[t,e||this].concat(Array.prototype.slice.call(arguments,2),[this]))},setDate:function(t){this.setRange(this.computeRange(t))},setRange:function(e){t.extend(this,e),this.updateTitle()},computeRange:function(t){var e,n,i=M(this.intervalDuration),r=t.clone().startOf(i),s=r.clone().add(this.intervalDuration);return/year|month|week|day/.test(i)?(r.stripTime(),s.stripTime()):(r.hasTime()||(r=this.calendar.rezoneDate(r)),s.hasTime()||(s=this.calendar.rezoneDate(s))),e=r.clone(),e=this.skipHiddenDays(e),n=s.clone(),n=this.skipHiddenDays(n,-1,!0),{intervalUnit:i,intervalStart:r,intervalEnd:s,start:e,end:n}},computePrevDate:function(t){return this.massageCurrentDate(t.clone().startOf(this.intervalUnit).subtract(this.intervalDuration),-1)},computeNextDate:function(t){return this.massageCurrentDate(t.clone().startOf(this.intervalUnit).add(this.intervalDuration))},massageCurrentDate:function(t,e){return 1>=this.intervalDuration.as("days")&&this.isHiddenDay(t)&&(t=this.skipHiddenDays(t,e),t.startOf("day")),t},updateTitle:function(){this.title=this.computeTitle()},computeTitle:function(){return this.formatRange({start:this.intervalStart,end:this.intervalEnd},this.opt("titleFormat")||this.computeTitleFormat(),this.opt("titleRangeSeparator"))},computeTitleFormat:function(){return"year"==this.intervalUnit?"YYYY":"month"==this.intervalUnit?this.opt("monthYearFormat"):this.intervalDuration.as("days")>1?"ll":"LL"},formatRange:function(t,e,n){var i=t.end;return i.hasTime()||(i=i.clone().subtract(1)),re(t.start,i,e,n,this.opt("isRTL"))},setElement:function(t){this.el=t,this.bindGlobalHandlers()},removeElement:function(){this.clear(),this.isSkeletonRendered&&(this.destroySkeleton(),this.isSkeletonRendered=!1),this.unbindGlobalHandlers(),this.el.remove()},display:function(t){var e=null;this.isDisplayed&&(e=this.queryScroll()),this.clear(),this.setDate(t),this.render(),this.updateSize(),this.renderBusinessHours(),this.isDisplayed=!0,e=this.computeInitialScroll(e),this.forceScroll(e),this.triggerRender()},clear:function(){this.isDisplayed&&(this.unselect(),this.clearEvents(),this.triggerDestroy(),this.destroyBusinessHours(),this.destroy(),this.isDisplayed=!1)},render:function(){this.isSkeletonRendered||(this.renderSkeleton(),this.isSkeletonRendered=!0),this.renderDates()},destroy:function(){this.destroyDates()},renderSkeleton:function(){},destroySkeleton:function(){},renderDates:function(){},destroyDates:function(){},renderBusinessHours:function(){},destroyBusinessHours:function(){},triggerRender:function(){this.trigger("viewRender",this,this,this.el)},triggerDestroy:function(){this.trigger("viewDestroy",this,this,this.el)},bindGlobalHandlers:function(){t(document).on("mousedown",this.documentMousedownProxy)},unbindGlobalHandlers:function(){t(document).off("mousedown",this.documentMousedownProxy)},initThemingProps:function(){var t=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=t+"-widget-header",this.widgetContentClass=t+"-widget-content",this.highlightStateClass=t+"-state-highlight"},updateSize:function(t){var e;t&&(e=this.queryScroll()),this.updateHeight(),this.updateWidth(),t&&this.setScroll(e)},updateWidth:function(){},updateHeight:function(){var t=this.calendar;this.setHeight(t.getSuggestedViewHeight(),t.isHeightAuto())},setHeight:function(){},computeScrollerHeight:function(t){var e,n,i=this.scrollerEl;return e=this.el.add(i),e.css({position:"relative",left:-1}),n=this.el.outerHeight()-i.height(),e.css({position:"",left:""}),t-n},computeInitialScroll:function(){return 0},queryScroll:function(){return this.scrollerEl?this.scrollerEl.scrollTop():void 0},setScroll:function(t){return this.scrollerEl?this.scrollerEl.scrollTop(t):void 0},forceScroll:function(t){var e=this;this.setScroll(t),setTimeout(function(){e.setScroll(t)},0)},displayEvents:function(t){var e=this.queryScroll();this.clearEvents(),this.renderEvents(t),this.isEventsRendered=!0,this.setScroll(e),this.triggerEventRender()},clearEvents:function(){this.isEventsRendered&&(this.triggerEventDestroy(),this.destroyEvents(),this.isEventsRendered=!1)},renderEvents:function(){},destroyEvents:function(){},triggerEventRender:function(){this.renderedEventSegEach(function(t){this.trigger("eventAfterRender",t.event,t.event,t.el)}),this.trigger("eventAfterAllRender")},triggerEventDestroy:function(){this.renderedEventSegEach(function(t){this.trigger("eventDestroy",t.event,t.event,t.el)})},resolveEventEl:function(e,n){var i=this.trigger("eventRender",e,e,n);return i===!1?n=null:i&&i!==!0&&(n=t(i)),n},showEvent:function(t){this.renderedEventSegEach(function(t){t.el.css("visibility","")},t)},hideEvent:function(t){this.renderedEventSegEach(function(t){t.el.css("visibility","hidden")},t)},renderedEventSegEach:function(t,e){var n,i=this.getEventSegs();for(n=0;i.length>n;n++)e&&i[n].event._id!==e._id||i[n].el&&t.call(this,i[n])},getEventSegs:function(){return[]},isEventDraggable:function(t){var e=t.source||{};return B(t.startEditable,e.startEditable,this.opt("eventStartEditable"),t.editable,e.editable,this.opt("editable"))},reportEventDrop:function(t,e,n,i,r){var s=this.calendar,o=s.mutateEvent(t,e,n),l=function(){o.undo(),s.reportEventChange()};this.triggerEventDrop(t,o.dateDelta,l,i,r),s.reportEventChange()},triggerEventDrop:function(t,e,n,i,r){this.trigger("eventDrop",i[0],t,e,n,r,{})},reportExternalDrop:function(e,n,i,r,s){var o,l,a=e.eventProps;a&&(o=t.extend({},a,n),l=this.calendar.renderEvent(o,e.stick)[0]),this.triggerExternalDrop(l,n,i,r,s)},triggerExternalDrop:function(t,e,n,i,r){this.trigger("drop",n[0],e.start,i,r),t&&this.trigger("eventReceive",null,t)},renderDrag:function(){},destroyDrag:function(){},isEventResizableFromStart:function(t){return this.opt("eventResizableFromStart")&&this.isEventResizable(t)},isEventResizableFromEnd:function(t){return this.isEventResizable(t)},isEventResizable:function(t){var e=t.source||{};return B(t.durationEditable,e.durationEditable,this.opt("eventDurationEditable"),t.editable,e.editable,this.opt("editable"))},reportEventResize:function(t,e,n,i,r){var s=this.calendar,o=s.mutateEvent(t,e,n),l=function(){o.undo(),s.reportEventChange()};this.triggerEventResize(t,o.durationDelta,l,i,r),s.reportEventChange()},triggerEventResize:function(t,e,n,i,r){this.trigger("eventResize",i[0],t,e,n,r,{})},select:function(t,e){this.unselect(e),this.renderSelection(t),this.reportSelection(t,e)},renderSelection:function(){},reportSelection:function(t,e){this.isSelected=!0,this.trigger("select",null,t.start,t.end,e)},unselect:function(t){this.isSelected&&(this.isSelected=!1,this.destroySelection(),this.trigger("unselect",null,t))},destroySelection:function(){},documentMousedown:function(e){var n;this.isSelected&&this.opt("unselectAuto")&&S(e)&&(n=this.opt("unselectCancel"),n&&t(e.target).closest(n).length||this.unselect(e))},initHiddenDays:function(){var e,n=this.opt("hiddenDays")||[],i=[],r=0;for(this.opt("weekends")===!1&&n.push(0,6),e=0;7>e;e++)(i[e]=-1!==t.inArray(e,n))||r++;if(!r)throw"invalid hiddenDays";this.isHiddenDayHash=i},isHiddenDay:function(t){return e.isMoment(t)&&(t=t.day()),this.isHiddenDayHash[t]},skipHiddenDays:function(t,e,n){var i=t.clone();for(e=e||1;this.isHiddenDayHash[(i.day()+(n?e:0)+7)%7];)i.add(e,"days");return i},computeDayRange:function(t){var e,n=t.start.clone().stripTime(),i=t.end,r=null;return i&&(r=i.clone().stripTime(),e=+i.time(),e&&e>=this.nextDayThreshold&&r.add(1,"days")),(!i||n>=r)&&(r=n.clone().add(1,"days")),{start:n,end:r}},isMultiDayEvent:function(t){var e=this.computeDayRange(t);return e.end.diff(e.start,"days")>1}}),un=Le.Calendar=Le.CalendarBase=ue.extend({dirDefaults:null,langDefaults:null,overrides:null,options:null,viewSpecCache:null,view:null,header:null,constructor:Re,initOptions:function(t){var e,r,s,o;t=i(t),e=t.lang,r=cn[e],r||(e=un.defaults.lang,r=cn[e]||{}),s=B(t.isRTL,r.isRTL,un.defaults.isRTL),o=s?un.rtlDefaults:{},this.dirDefaults=o,this.langDefaults=r,this.overrides=t,this.options=n(un.defaults,o,r,t),ke(this.options),this.viewSpecCache={}},getViewSpec:function(t){var e=this.viewSpecCache;return e[t]||(e[t]=this.buildViewSpec(t))},getUnitViewSpec:function(e){var n,i,r;if(-1!=t.inArray(e,Ye))for(n=this.header.getViewsWithButtons(),t.each(Le.views,function(t){n.push(t)}),i=0;n.length>i;i++)if(r=this.getViewSpec(n[i]),r&&r.singleUnit==e)return r},buildViewSpec:function(t){for(var i,r,s,o,l,a,u=this.overrides.views||{},c=[],d=[],h=t;h&&!i;)r=_e[h]||{},s=u[h]||{},o=o||s.duration||r.duration,h=s.type||r.type,"function"==typeof r?(i=r,c.unshift(i.defaults||{})):c.unshift(r),d.unshift(s);return i?(a={"class":i,type:t},o&&(o=e.duration(o),o.valueOf()||(o=null)),o&&(a.duration=o,l=M(o),1===o.as(l)&&(a.singleUnit=l,d.unshift(u[l]||{}))),a.defaults=n.apply(null,c),a.overrides=n.apply(null,d),this.buildViewSpecOptions(a),this.buildViewSpecButtonText(a,t),a):void 0},buildViewSpecOptions:function(t){t.options=n(un.defaults,t.defaults,this.dirDefaults,this.langDefaults,this.overrides,t.overrides),ke(t.options)},buildViewSpecButtonText:function(t,e){function n(n){var i=n.buttonText||{};return i[e]||(t.singleUnit?i[t.singleUnit]:null)}t.buttonTextOverride=n(this.overrides)||t.overrides.buttonText,t.buttonTextDefault=n(this.langDefaults)||n(this.dirDefaults)||t.defaults.buttonText||n(un.defaults)||(t.duration?this.humanizeDuration(t.duration):null)||e},instantiateView:function(t){var e=this.getViewSpec(t);return new e["class"](this,t,e.options,e.duration)},isValidViewType:function(t){return Boolean(this.getViewSpec(t))}});un.defaults={titleRangeSeparator:" — ",monthYearFormat:"MMMM YYYY",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"今天 prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,isRTL:!1,buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"年",today:"今天",month:"月",week:"周",day:"日"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:"*",eventLimit:!1,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:!0,windowResizeDelay:200},un.englishDefaults={dayPopoverFormat:"dddd, MMMM D"},un.rtlDefaults={header:{left:"next,prev 今天",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}};var cn=Le.langs={};Le.datepickerLang=function(e,n,i){var r=cn[e]||(cn[e]={});r.isRTL=i.isRTL,r.weekNumberTitle=i.weekHeader,t.each(dn,function(t,e){r[t]=e(i)}),t.datepicker&&(t.datepicker.regional[n]=t.datepicker.regional[e]=i,t.datepicker.regional.en=t.datepicker.regional[""],t.datepicker.setDefaults(i))},Le.lang=function(e,i){var r,s;r=cn[e]||(cn[e]={}),i&&(r=cn[e]=n(r,i)),s=Me(e),t.each(hn,function(t,e){null==r[t]&&(r[t]=e(s,r))}),un.defaults.lang=e};var dn={buttonText:function(t){return{prev:I(t.prevText),next:I(t.nextText),today:I(t.currentText)}},monthYearFormat:function(t){return t.showMonthAfterYear?"YYYY["+t.yearSuffix+"] MMMM":"MMMM YYYY["+t.yearSuffix+"]"}},hn={dayOfMonthFormat:function(t,e){var n=t.longDateFormat("l");return n=n.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,""),e.isRTL?n+=" ddd":n="ddd "+n,n},mediumTimeFormat:function(t){return t.longDateFormat("LT").replace(/\s*a$/i,"a")},smallTimeFormat:function(t){return t.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")},extraSmallTimeFormat:function(t){return t.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")},hourFormat:function(t){return t.longDateFormat("LT").replace(":mm","").replace(/(\Wmm)$/,"").replace(/\s*a$/i,"a")},noMeridiemTimeFormat:function(t){return t.longDateFormat("LT").replace(/\s*a$/i,"")}},fn={smallDayDateFormat:function(t){return t.isRTL?"D dd":"dd D"},weekFormat:function(t){return t.isRTL?"w[ "+t.weekNumberTitle+"]":"["+t.weekNumberTitle+" ]w"},smallWeekFormat:function(t){return t.isRTL?"w["+t.weekNumberTitle+"]":"["+t.weekNumberTitle+"]w"}};Le.lang("en",un.englishDefaults),Le.sourceNormalizers=[],Le.sourceFetchers=[];var gn={dataType:"json",cache:!1},pn=1;un.prototype.getPeerEvents=function(t){var e,n,i=this.getEventCache(),r=[];for(e=0;i.length>e;e++)n=i[e],t&&t._id===n._id||r.push(n);return r};var mn=_e.basic=an.extend({dayGrid:null,dayNumbersVisible:!1,weekNumbersVisible:!1,weekNumberWidth:null,headRowEl:null,initialize:function(){this.dayGrid=new on(this),this.coordMap=this.dayGrid.coordMap},setRange:function(t){an.prototype.setRange.call(this,t),this.dayGrid.breakOnWeeks=/year|month|week/.test(this.intervalUnit),this.dayGrid.setRange(t)},computeRange:function(t){var e=an.prototype.computeRange.call(this,t);return/year|month/.test(e.intervalUnit)&&(e.start.startOf("week"),e.start=this.skipHiddenDays(e.start),e.end.weekday()&&(e.end.add(1,"week").startOf("week"),e.end=this.skipHiddenDays(e.end,-1,!0))),e},render:function(){this.dayNumbersVisible=this.dayGrid.rowCnt>1,this.weekNumbersVisible=this.opt("weekNumbers"),this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible,this.el.addClass("fc-basic-view").html(this.renderHtml()),this.headRowEl=this.el.find("thead .fc-row"),this.scrollerEl=this.el.find(".fc-day-grid-container"),this.dayGrid.coordMap.containerEl=this.scrollerEl,this.dayGrid.setElement(this.el.find(".fc-day-grid")),this.dayGrid.renderDates(this.hasRigidRows())},destroy:function(){this.dayGrid.destroyDates(),this.dayGrid.removeElement()},renderBusinessHours:function(){this.dayGrid.renderBusinessHours()},renderHtml:function(){return'<table><thead class="fc-head"><tr><td class="'+this.widgetHeaderClass+'">'+this.dayGrid.headHtml()+"</td>"+"</tr>"+"</thead>"+'<tbody class="fc-body">'+"<tr>"+'<td class="'+this.widgetContentClass+'">'+'<div class="fc-day-grid-container">'+'<div class="fc-day-grid"/>'+"</div>"+"</td>"+"</tr>"+"</tbody>"+"</table>"},headIntroHtml:function(){return this.weekNumbersVisible?'<th class="fc-week-number '+this.widgetHeaderClass+'" '+this.weekNumberStyleAttr()+">"+"<span>"+Y(this.opt("weekNumberTitle"))+"</span>"+"</th>":void 0},numberIntroHtml:function(t){return this.weekNumbersVisible?'<td class="fc-week-number" '+this.weekNumberStyleAttr()+">"+"<span>"+this.dayGrid.getCell(t,0).start.format("w")+"</span>"+"</td>":void 0},dayIntroHtml:function(){return this.weekNumbersVisible?'<td class="fc-week-number '+this.widgetContentClass+'" '+this.weekNumberStyleAttr()+"></td>":void 0},introHtml:function(){return this.weekNumbersVisible?'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"></td>":void 0},numberCellHtml:function(t){var e,n=t.start;return this.dayNumbersVisible?(e=this.dayGrid.getDayClasses(n),e.unshift("fc-day-number"),'<td class="'+e.join(" ")+'" data-date="'+n.format()+'">'+n.date()+"</td>"):"<td/>"},weekNumberStyleAttr:function(){return null!==this.weekNumberWidth?'style="width:'+this.weekNumberWidth+'px"':""},hasRigidRows:function(){var t=this.opt("eventLimit");return t&&"number"!=typeof t},updateWidth:function(){this.weekNumbersVisible&&(this.weekNumberWidth=c(this.el.find(".fc-week-number")))},setHeight:function(t,e){var n,i=this.opt("eventLimit");h(this.scrollerEl),s(this.headRowEl),this.dayGrid.destroySegPopover(),i&&"number"==typeof i&&this.dayGrid.limitRows(i),n=this.computeScrollerHeight(t),this.setGridHeight(n,e),i&&"number"!=typeof i&&this.dayGrid.limitRows(i),!e&&d(this.scrollerEl,n)&&(r(this.headRowEl,v(this.scrollerEl)),n=this.computeScrollerHeight(t),this.scrollerEl.height(n))},setGridHeight:function(t,e){e?u(this.dayGrid.rowEls):a(this.dayGrid.rowEls,t,!0)},renderEvents:function(t){this.dayGrid.renderEvents(t),this.updateHeight()},getEventSegs:function(){return this.dayGrid.getEventSegs()},destroyEvents:function(){this.dayGrid.destroyEvents()},renderDrag:function(t,e){return this.dayGrid.renderDrag(t,e)},destroyDrag:function(){this.dayGrid.destroyDrag()},renderSelection:function(t){this.dayGrid.renderSelection(t)},destroySelection:function(){this.dayGrid.destroySelection()}}),vn=_e.month=mn.extend({computeRange:function(t){var e,n=mn.prototype.computeRange.call(this,t);return this.isFixedWeeks()&&(e=Math.ceil(n.end.diff(n.start,"weeks",!0)),n.end.add(6-e,"weeks")),n},setGridHeight:function(t,e){e=e||"variable"===this.opt("weekMode"),e&&(t*=this.rowCnt/6),a(this.dayGrid.rowEls,t,!e)},isFixedWeeks:function(){var t=this.opt("weekMode");return t?"fixed"===t:this.opt("fixedWeekCount")}});vn.duration={months:1},vn.defaults={fixedWeekCount:!0},_e.basicWeek={type:"basic",duration:{weeks:1}},_e.basicDay={type:"basic",duration:{days:1}};var yn={allDaySlot:!0,allDayText:"all-day",scrollTime:"06:00:00",slotDuration:"00:30:00",minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!0},wn=5,En=_e.agenda=an.extend({timeGrid:null,dayGrid:null,axisWidth:null,noScrollRowEls:null,bottomRuleEl:null,bottomRuleHeight:null,initialize:function(){this.timeGrid=new ln(this),this.opt("allDaySlot")?(this.dayGrid=new on(this),this.coordMap=new Je([this.dayGrid.coordMap,this.timeGrid.coordMap])):this.coordMap=this.timeGrid.coordMap},setRange:function(t){an.prototype.setRange.call(this,t),this.timeGrid.setRange(t),this.dayGrid&&this.dayGrid.setRange(t)},render:function(){this.el.addClass("fc-agenda-view").html(this.renderHtml()),this.scrollerEl=this.el.find(".fc-time-grid-container"),this.timeGrid.coordMap.containerEl=this.scrollerEl,this.timeGrid.setElement(this.el.find(".fc-time-grid")),this.timeGrid.renderDates(),this.bottomRuleEl=t('<hr class="fc-divider '+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el),this.dayGrid&&(this.dayGrid.setElement(this.el.find(".fc-day-grid")),this.dayGrid.renderDates(),this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()),this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)")},destroy:function(){this.timeGrid.destroyDates(),this.timeGrid.removeElement(),this.dayGrid&&(this.dayGrid.destroyDates(),this.dayGrid.removeElement())},renderBusinessHours:function(){this.timeGrid.renderBusinessHours(),this.dayGrid&&this.dayGrid.renderBusinessHours()},renderHtml:function(){return'<table><thead class="fc-head"><tr><td class="'+this.widgetHeaderClass+'">'+this.timeGrid.headHtml()+"</td>"+"</tr>"+"</thead>"+'<tbody class="fc-body">'+"<tr>"+'<td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="fc-divider '+this.widgetHeaderClass+'"/>':"")+'<div class="fc-time-grid-container">'+'<div class="fc-time-grid"/>'+"</div>"+"</td>"+"</tr>"+"</tbody>"+"</table>"},headIntroHtml:function(){var t,e;return this.opt("weekNumbers")?(t=this.timeGrid.getCell(0).start,e=t.format(this.opt("smallWeekFormat")),'<th class="fc-axis fc-week-number '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+">"+"<span>"+Y(e)+"</span>"+"</th>"):'<th class="fc-axis '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"></th>"},dayIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+">"+"<span>"+(this.opt("allDayHtml")||Y(this.opt("allDayText")))+"</span>"+"</td>"},slotBgIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"></td>"},introHtml:function(){return'<td class="fc-axis" '+this.axisStyleAttr()+"></td>"},axisStyleAttr:function(){return null!==this.axisWidth?'style="width:'+this.axisWidth+'px"':""},updateSize:function(t){this.timeGrid.updateSize(t),an.prototype.updateSize.call(this,t)},updateWidth:function(){this.axisWidth=c(this.el.find(".fc-axis"))},setHeight:function(t,e){var n,i;null===this.bottomRuleHeight&&(this.bottomRuleHeight=this.bottomRuleEl.outerHeight()),this.bottomRuleEl.hide(),this.scrollerEl.css("overflow",""),h(this.scrollerEl),s(this.noScrollRowEls),this.dayGrid&&(this.dayGrid.destroySegPopover(),n=this.opt("eventLimit"),n&&"number"!=typeof n&&(n=wn),n&&this.dayGrid.limitRows(n)),e||(i=this.computeScrollerHeight(t),d(this.scrollerEl,i)?(r(this.noScrollRowEls,v(this.scrollerEl)),i=this.computeScrollerHeight(t),this.scrollerEl.height(i)):(this.scrollerEl.height(i).css("overflow","hidden"),this.bottomRuleEl.show()))},computeInitialScroll:function(){var t=e.duration(this.opt("scrollTime")),n=this.timeGrid.computeTimeTop(t);return n=Math.ceil(n),n&&n++,n},renderEvents:function(t){var e,n,i=[],r=[],s=[];for(n=0;t.length>n;n++)t[n].allDay?i.push(t[n]):r.push(t[n]);e=this.timeGrid.renderEvents(r),this.dayGrid&&(s=this.dayGrid.renderEvents(i)),this.updateHeight()},getEventSegs:function(){return this.timeGrid.getEventSegs().concat(this.dayGrid?this.dayGrid.getEventSegs():[])},destroyEvents:function(){this.timeGrid.destroyEvents(),this.dayGrid&&this.dayGrid.destroyEvents()},renderDrag:function(t,e){return t.start.hasTime()?this.timeGrid.renderDrag(t,e):this.dayGrid?this.dayGrid.renderDrag(t,e):void 0},destroyDrag:function(){this.timeGrid.destroyDrag(),this.dayGrid&&this.dayGrid.destroyDrag()},renderSelection:function(t){t.start.hasTime()||t.end.hasTime()?this.timeGrid.renderSelection(t):this.dayGrid&&this.dayGrid.renderSelection(t)},destroySelection:function(){this.timeGrid.destroySelection(),this.dayGrid&&this.dayGrid.destroySelection()}});return En.defaults=yn,_e.agendaWeek={type:"agenda",duration:{weeks:1}},_e.agendaDay={type:"agenda",duration:{days:1}},Le});
!function(a){"function"==typeof define&&define.amd?define(["jquery","moment"],a):a(jQuery,moment)}(function(a,b){(b.defineLocale||b.lang).call(b,"zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah点mm",LTS:"Ah点m分s秒",L:"YYYY-MM-DD",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日LT",LLLL:"YYYY年MMMD日ddddLT",l:"YYYY-MM-DD",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日LT",llll:"YYYY年MMMD日ddddLT"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(a,b){return 12===a&&(a=0),"凌晨"===b||"早上"===b||"上午"===b?a:"下午"===b||"晚上"===b?a+12:a>=11?a:a+12},meridiem:function(a,b){var d=100*a+b;return 600>d?"凌晨":900>d?"早上":1130>d?"上午":1230>d?"中午":1800>d?"下午":"晚上"},calendar:{sameDay:function(){return 0===this.minutes()?"[今天]Ah[点整]":"[今天]LT"},nextDay:function(){return 0===this.minutes()?"[明天]Ah[点整]":"[明天]LT"},lastDay:function(){return 0===this.minutes()?"[昨天]Ah[点整]":"[昨天]LT"},nextWeek:function(){var a,c;return a=b().startOf("week"),c=this.unix()-a.unix()>=604800?"[下]":"[本]",0===this.minutes()?c+"dddAh点整":c+"dddAh点mm"},lastWeek:function(){var a,c;return a=b().startOf("week"),c=this.unix()<a.unix()?"[上]":"[本]",0===this.minutes()?c+"dddAh点整":c+"dddAh点mm"},sameElse:"LL"},ordinalParse:/\d{1,2}(日|月|周)/,ordinal:function(a,b){switch(b){case"d":case"D":case"DDD":return a+"日";case"M":return a+"月";case"w":case"W":return a+"周";default:return a}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1分钟",mm:"%d分钟",h:"1小时",hh:"%d小时",d:"1天",dd:"%d天",M:"1个月",MM:"%d个月",y:"1年",yy:"%d年"}}),a.fullCalendar.datepickerLang("zh-cn","zh-CN",{closeText:"关闭",prevText:"&#x3C;上月",nextText:"下月&#x3E;",currentText:"今天",monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],dayNamesMin:["日","一","二","三","四","五","六"],weekHeader:"周",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"年"}),a.fullCalendar.lang("zh-cn",{buttonText:{month:"月",week:"周",day:"日",list:"日程"},allDayText:"全天",eventLimitText:function(a){return"另外 "+a+" 个"}})});

/*<script src="${ctxStatic}/org/tinygroup/rangeslider/js/ion.rangeSlider.js"></script>*/

/*<script src="${ctxStatic}/org/tinygroup/superBox/js/superbox.js"></script>*/
!function(a){a.fn.SuperBox=function(){var c=a('<div class="superbox-show"></div>'),d=a('<img src="" class="superbox-current-img">'),e=a('<div class="superbox-close"></div>');return c.append(d).append(e),this.each(function(){a(".superbox-list").click(function(){var b=a(this).find(".superbox-img"),e=b.data("img");d.attr("src",e),0==a(".superbox-current-img").css("opacity")&&a(".superbox-current-img").animate({opacity:1}),a(this).next().hasClass("superbox-show")?c.toggle():c.insertAfter(this).css("display","block"),a("html, body").animate({scrollTop:c.position().top-b.width()},"medium")}),a(".superbox").on("click",".superbox-close",function(){a(".superbox-current-img").animate({opacity:0},200,function(){a(".superbox-show").slideUp()})})})}}(jQuery);

/*<script src="${ctxStatic}/org/tinygroup/webupload/lib/webuploader.js"></script>*/
!function(a,b){var j,c={},d=function(a,b){var c,d,e;if("string"==typeof a)return g(a);for(c=[],d=a.length,e=0;d>e;e++)c.push(g(a[e]));return b.apply(null,c)},e=function(a,b,c){2===arguments.length&&(c=b,b=null),d(b||[],function(){f(a,c,arguments)})},f=function(a,b,e){var g,f={exports:b};"function"==typeof b&&(e.length||(e=[d,f.exports,f]),g=b.apply(null,e),void 0!==g&&(f.exports=g)),c[a]=f.exports},g=function(b){var d=c[b]||a[b];if(!d)throw new Error("`"+b+"` is undefined");return d},h=function(a){var b,d,e,f,g,h;h=function(a){return a&&a.charAt(0).toUpperCase()+a.substr(1)};for(b in c)if(d=a,c.hasOwnProperty(b)){for(e=b.split("/"),g=h(e.pop());f=h(e.shift());)d[f]=d[f]||{},d=d[f];d[g]=c[b]}return a},i=function(c){return a.__dollar=c,h(b(a,e,d))};"object"==typeof module&&"object"==typeof module.exports?module.exports=i():"function"==typeof define&&define.amd?define(["jquery"],i):(j=a.WebUploader,a.WebUploader=i(),a.WebUploader.noConflict=function(){a.WebUploader=j})}(window,function(a,b,c){return b("dollar-third",[],function(){var b=a.__dollar||a.jQuery||a.Zepto;if(!b)throw new Error("jQuery or Zepto not found!");return b}),b("dollar",["dollar-third"],function(a){return a}),b("promise-third",["dollar"],function(a){return{Deferred:a.Deferred,when:a.when,isPromise:function(a){return a&&"function"==typeof a.then}}}),b("promise",["promise-third"],function(a){return a}),b("base",["dollar","promise"],function(b,c){function f(a){return function(){return e.apply(a,arguments)}}function g(a,b){return function(){return a.apply(b,arguments)}}function h(a){var b;return Object.create?Object.create(a):(b=function(){},b.prototype=a,new b)}var d=function(){},e=Function.call;return{version:"0.1.5",$:b,Deferred:c.Deferred,isPromise:c.isPromise,when:c.when,browser:function(a){var b={},c=a.match(/WebKit\/([\d.]+)/),d=a.match(/Chrome\/([\d.]+)/)||a.match(/CriOS\/([\d.]+)/),e=a.match(/MSIE\s([\d\.]+)/)||a.match(/(?:trident)(?:.*rv:([\w.]+))?/i),f=a.match(/Firefox\/([\d.]+)/),g=a.match(/Safari\/([\d.]+)/),h=a.match(/OPR\/([\d.]+)/);return c&&(b.webkit=parseFloat(c[1])),d&&(b.chrome=parseFloat(d[1])),e&&(b.ie=parseFloat(e[1])),f&&(b.firefox=parseFloat(f[1])),g&&(b.safari=parseFloat(g[1])),h&&(b.opera=parseFloat(h[1])),b}(navigator.userAgent),os:function(a){var b={},c=a.match(/(?:Android);?[\s\/]+([\d.]+)?/),d=a.match(/(?:iPad|iPod|iPhone).*OS\s([\d_]+)/);return c&&(b.android=parseFloat(c[1])),d&&(b.ios=parseFloat(d[1].replace(/_/g,"."))),b}(navigator.userAgent),inherits:function(a,c,d){var e;return"function"==typeof c?(e=c,c=null):e=c&&c.hasOwnProperty("constructor")?c.constructor:function(){return a.apply(this,arguments)},b.extend(!0,e,a,d||{}),e.__super__=a.prototype,e.prototype=h(a.prototype),c&&b.extend(!0,e.prototype,c),e},noop:d,bindFn:g,log:function(){return a.console?g(console.log,console):d}(),nextTick:function(){return function(a){setTimeout(a,1)}}(),slice:f([].slice),guid:function(){var a=0;return function(b){for(var c=(+new Date).toString(32),d=0;5>d;d++)c+=Math.floor(65535*Math.random()).toString(32);return(b||"wu_")+c+(a++).toString(32)}}(),formatSize:function(a,b,c){var d;for(c=c||["B","K","M","G","TB"];(d=c.shift())&&a>1024;)a/=1024;return("B"===d?a:a.toFixed(b||2))+d}}}),b("mediator",["base"],function(a){function f(a,c,d,e){return b.grep(a,function(a){return!(!a||c&&a.e!==c||d&&a.cb!==d&&a.cb._cb!==d||e&&a.ctx!==e)})}function g(a,c,e){b.each((a||"").split(d),function(a,b){e(b,c)})}function h(a,b){for(var f,c=!1,d=-1,e=a.length;++d<e;)if(f=a[d],f.cb.apply(f.ctx2,b)===!1){c=!0;break}return!c}var e,b=a.$,c=[].slice,d=/\s+/;return e={on:function(a,b,c){var e,d=this;return b?(e=this._events||(this._events=[]),g(a,b,function(a,b){var f={e:a};f.cb=b,f.ctx=c,f.ctx2=c||d,f.id=e.length,e.push(f)}),this):this},once:function(a,b,c){var d=this;return b?(g(a,b,function(a,b){var e=function(){return d.off(a,e),b.apply(c||d,arguments)};e._cb=b,d.on(a,e,c)}),d):d},off:function(a,c,d){var e=this._events;return e?a||c||d?(g(a,c,function(a,c){b.each(f(e,a,c,d),function(){delete e[this.id]})}),this):(this._events=[],this):this},trigger:function(a){var b,d,e;return this._events&&a?(b=c.call(arguments,1),d=f(this._events,a),e=f(this._events,"all"),h(d,b)&&h(e,arguments)):this}},b.extend({installTo:function(a){return b.extend(a,e)}},e)}),b("uploader",["base","mediator"],function(a,b){function d(a){this.options=c.extend(!0,{},d.options,a),this._init(this.options)}var c=a.$;return d.options={},b.installTo(d.prototype),c.each({upload:"start-upload",stop:"stop-upload",getFile:"get-file",getFiles:"get-files",addFile:"add-file",addFiles:"add-file",sort:"sort-files",removeFile:"remove-file",cancelFile:"cancel-file",skipFile:"skip-file",retry:"retry",isInProgress:"is-in-progress",makeThumb:"make-thumb",md5File:"md5-file",getDimension:"get-dimension",addButton:"add-btn",predictRuntimeType:"predict-runtime-type",refresh:"refresh",disable:"disable",enable:"enable",reset:"reset"},function(a,b){d.prototype[a]=function(){return this.request(b,arguments)}}),c.extend(d.prototype,{state:"pending",_init:function(a){var b=this;b.request("init",a,function(){b.state="ready",b.trigger("ready")})},option:function(a,b){var d=this.options;return arguments.length>1?(c.isPlainObject(b)&&c.isPlainObject(d[a])?c.extend(d[a],b):d[a]=b,void 0):a?d[a]:d},getStats:function(){var a=this.request("get-stats");return a?{successNum:a.numOfSuccess,progressNum:a.numOfProgress,cancelNum:a.numOfCancel,invalidNum:a.numOfInvalid,uploadFailNum:a.numOfUploadFailed,queueNum:a.numOfQueue,interruptNum:a.numofInterrupt}:{}},trigger:function(a){var d=[].slice.call(arguments,1),e=this.options,f="on"+a.substring(0,1).toUpperCase()+a.substring(1);return b.trigger.apply(this,arguments)===!1||c.isFunction(e[f])&&e[f].apply(this,d)===!1||c.isFunction(this[f])&&this[f].apply(this,d)===!1||b.trigger.apply(b,[this,a].concat(d))===!1?!1:!0},destroy:function(){this.request("destroy",arguments),this.off()},request:a.noop}),a.create=d.create=function(a){return new d(a)},a.Uploader=d,d}),b("runtime/runtime",["base","mediator"],function(a,b){function f(b){this.options=c.extend({container:document.body},b),this.uid=a.guid("rt_")}var c=a.$,d={},e=function(a){for(var b in a)if(a.hasOwnProperty(b))return b;return null};return c.extend(f.prototype,{getContainer:function(){var b,d,a=this.options;return this._container?this._container:(b=c(a.container||document.body),d=c(document.createElement("div")),d.attr("id","rt_"+this.uid),d.css({position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),b.append(d),b.addClass("webuploader-container"),this._container=d,this._parent=b,d)},init:a.noop,exec:a.noop,destroy:function(){this._container&&this._container.remove(),this._parent&&this._parent.removeClass("webuploader-container"),this.off()}}),f.orders="html5,flash",f.addRuntime=function(a,b){d[a]=b},f.hasRuntime=function(a){return!!(a?d[a]:e(d))},f.create=function(a,b){var g,h;if(b=b||f.orders,c.each(b.split(/\s*,\s*/g),function(){return d[this]?(g=this,!1):void 0}),g=g||e(d),!g)throw new Error("Runtime Error");return h=new d[g](a)},b.installTo(f.prototype),f}),b("runtime/client",["base","mediator","runtime/runtime"],function(a,b,c){function e(b,e){var g,f=a.Deferred();this.uid=a.guid("client_"),this.runtimeReady=function(a){return f.done(a)},this.connectRuntime=function(b,h){if(g)throw new Error("already connected!");return f.done(h),"string"==typeof b&&d.get(b)&&(g=d.get(b)),g=g||d.get(null,e),g?(a.$.extend(g.options,b),g.__promise.then(f.resolve),g.__client++):(g=c.create(b,b.runtimeOrder),g.__promise=f.promise(),g.once("ready",f.resolve),g.init(),d.add(g),g.__client=1),e&&(g.__standalone=e),g},this.getRuntime=function(){return g},this.disconnectRuntime=function(){g&&(g.__client--,g.__client<=0&&(d.remove(g),delete g.__promise,g.destroy()),g=null)},this.exec=function(){if(g){var c=a.slice(arguments);return b&&c.unshift(b),g.exec.apply(this,c)}},this.getRuid=function(){return g&&g.uid},this.destroy=function(a){return function(){a&&a.apply(this,arguments),this.trigger("destroy"),this.off(),this.exec("destroy"),this.disconnectRuntime()}}(this.destroy)}var d;return d=function(){var a={};return{add:function(b){a[b.uid]=b},get:function(b,c){var d;if(b)return a[b];for(d in a)if(!c||!a[d].__standalone)return a[d];return null},remove:function(b){delete a[b.uid]}}}(),b.installTo(e.prototype),e}),b("lib/dnd",["base","mediator","runtime/client"],function(a,b,c){function e(a){a=this.options=d.extend({},e.options,a),a.container=d(a.container),a.container.length&&c.call(this,"DragAndDrop")}var d=a.$;return e.options={accept:null,disableGlobalDnd:!1},a.inherits(c,{constructor:e,init:function(){var a=this;a.connectRuntime(a.options,function(){a.exec("init"),a.trigger("ready")})}}),b.installTo(e.prototype),e}),b("widgets/widget",["base","uploader"],function(a,b){function h(a){if(!a)return!1;var b=a.length,d=c.type(a);return 1===a.nodeType&&b?!0:"array"===d||"function"!==d&&"string"!==d&&(0===b||"number"==typeof b&&b>0&&b-1 in a)}function i(a){this.owner=a,this.options=a.options}var c=a.$,d=b.prototype._init,e=b.prototype.destroy,f={},g=[];return c.extend(i.prototype,{init:a.noop,invoke:function(a,b){var d=this.responseMap;return d&&a in d&&d[a]in this&&c.isFunction(this[d[a]])?this[d[a]].apply(this,b):f},request:function(){return this.owner.request.apply(this.owner,arguments)}}),c.extend(b.prototype,{_init:function(){var a=this,b=a._widgets=[],e=a.options.disableWidgets||"";return c.each(g,function(c,d){(!e||!~e.indexOf(d._name))&&b.push(new d(a))}),d.apply(a,arguments)},request:function(b,c,d){var l,m,n,o,e=0,g=this._widgets,i=g&&g.length,j=[],k=[];for(c=h(c)?c:[c];i>e;e++)l=g[e],m=l.invoke(b,c),m!==f&&(a.isPromise(m)?k.push(m):j.push(m));return d||k.length?(n=a.when.apply(a,k),o=n.pipe?"pipe":"then",n[o](function(){var b=a.Deferred(),c=arguments;return 1===c.length&&(c=c[0]),setTimeout(function(){b.resolve(c)},1),b.promise()})[d?o:"done"](d||a.noop)):j[0]},destroy:function(){e.apply(this,arguments),this._widgets=null}}),b.register=i.register=function(b,d){var f,e={init:"init",destroy:"destroy",name:"anonymous"};return 1===arguments.length?(d=b,c.each(d,function(a){return"_"===a[0]||"name"===a?("name"===a&&(e.name=d.name),void 0):(e[a.replace(/[A-Z]/g,"-$&").toLowerCase()]=a,void 0)})):e=c.extend(e,b),d.responseMap=e,f=a.inherits(i,d),f._name=e.name,g.push(f),f},b.unRegister=i.unRegister=function(a){if(a&&"anonymous"!==a)for(var b=g.length;b--;)g[b]._name===a&&g.splice(b,1)},i}),b("widgets/filednd",["base","uploader","lib/dnd","widgets/widget"],function(a,b,c){var d=a.$;return b.options.dnd="",b.register({name:"dnd",init:function(b){if(b.dnd&&"html5"===this.request("predict-runtime-type")){var h,e=this,f=a.Deferred(),g=d.extend({},{disableGlobalDnd:b.disableGlobalDnd,container:b.dnd,accept:b.accept});return this.dnd=h=new c(g),h.once("ready",f.resolve),h.on("drop",function(a){e.request("add-file",[a])}),h.on("accept",function(a){return e.owner.trigger("dndAccept",a)}),h.init(),f.promise()}},destroy:function(){this.dnd&&this.dnd.destroy()}})}),b("lib/filepaste",["base","mediator","runtime/client"],function(a,b,c){function e(a){a=this.options=d.extend({},a),a.container=d(a.container||document.body),c.call(this,"FilePaste")}var d=a.$;return a.inherits(c,{constructor:e,init:function(){var a=this;a.connectRuntime(a.options,function(){a.exec("init"),a.trigger("ready")})}}),b.installTo(e.prototype),e}),b("widgets/filepaste",["base","uploader","lib/filepaste","widgets/widget"],function(a,b,c){var d=a.$;return b.register({name:"paste",init:function(b){if(b.paste&&"html5"===this.request("predict-runtime-type")){var h,e=this,f=a.Deferred(),g=d.extend({},{container:b.paste,accept:b.accept});return this.paste=h=new c(g),h.once("ready",f.resolve),h.on("paste",function(a){e.owner.request("add-file",[a])}),h.init(),f.promise()}},destroy:function(){this.paste&&this.paste.destroy()}})}),b("lib/blob",["base","runtime/client"],function(a,b){function c(a,c){var d=this;d.source=c,d.ruid=a,this.size=c.size||0,this.type=!c.type&&this.ext&&~"jpg,jpeg,png,gif,bmp,GIF,JPG,JPEG,BMP,PNG".indexOf(this.ext)?"image/"+("jpg"===this.ext?"jpeg":this.ext):c.type||"application/octet-stream",b.call(d,"Blob"),this.uid=c.uid||this.uid,a&&d.connectRuntime(a)}return a.inherits(b,{constructor:c,slice:function(a,b){return this.exec("slice",a,b)},getSource:function(){return this.source}}),c}),b("lib/file",["base","lib/blob"],function(a,b){function e(a,e){var f;this.name=e.name||"untitled"+c++,f=d.exec(e.name)?RegExp.$1.toLowerCase():"",!f&&e.type&&(f=/\/(jpg|jpeg|png|gif|bmp)$/i.exec(e.type)?RegExp.$1.toLowerCase():"",this.name+="."+f),this.ext=f,this.lastModifiedDate=e.lastModifiedDate||(new Date).toLocaleString(),b.apply(this,arguments)}var c=1,d=/\.([^.]+)$/;return a.inherits(b,e)}),b("lib/filepicker",["base","runtime/client","lib/file"],function(b,c,d){function f(a){if(a=this.options=e.extend({},f.options,a),a.container=e(a.id),!a.container.length)throw new Error("按钮指定错误");a.innerHTML=a.innerHTML||a.label||a.container.html()||"",a.button=e(a.button||document.createElement("div")),a.button.html(a.innerHTML),a.container.html(a.button),c.call(this,"FilePicker",!0)}var e=b.$;return f.options={button:null,container:null,label:null,innerHTML:null,multiple:!0,accept:null,name:"file"},b.inherits(c,{constructor:f,init:function(){var c=this,f=c.options,g=f.button;g.addClass("webuploader-pick"),c.on("all",function(a){var b;switch(a){case"mouseenter":g.addClass("webuploader-pick-hover");break;case"mouseleave":g.removeClass("webuploader-pick-hover");break;case"change":b=c.exec("getFiles"),c.trigger("select",e.map(b,function(a){return a=new d(c.getRuid(),a),a._refer=f.container,a}),f.container)}}),c.connectRuntime(f,function(){c.refresh(),c.exec("init",f),c.trigger("ready")}),this._resizeHandler=b.bindFn(this.refresh,this),e(a).on("resize",this._resizeHandler)},refresh:function(){var a=this.getRuntime().getContainer(),b=this.options.button,c=b.outerWidth?b.outerWidth():b.width(),d=b.outerHeight?b.outerHeight():b.height(),e=b.offset();c&&d&&a.css({bottom:"auto",right:"auto",width:c+"px",height:d+"px"}).offset(e)},enable:function(){var a=this.options.button;a.removeClass("webuploader-pick-disable"),this.refresh()},disable:function(){var a=this.options.button;this.getRuntime().getContainer().css({top:"-99999px"}),a.addClass("webuploader-pick-disable")},destroy:function(){var b=this.options.button;e(a).off("resize",this._resizeHandler),b.removeClass("webuploader-pick-disable webuploader-pick-hover webuploader-pick")}}),f}),b("widgets/filepicker",["base","uploader","lib/filepicker","widgets/widget"],function(a,b,c){var d=a.$;return d.extend(b.options,{pick:null,accept:null}),b.register({name:"picker",init:function(a){return this.pickers=[],a.pick&&this.addBtn(a.pick)},refresh:function(){d.each(this.pickers,function(){this.refresh()})},addBtn:function(b){var e=this,f=e.options,g=f.accept,h=[];if(b)return d.isPlainObject(b)||(b={id:b}),d(b.id).each(function(){var i,j,k;k=a.Deferred(),i=d.extend({},b,{accept:d.isPlainObject(g)?[g]:g,swf:f.swf,runtimeOrder:f.runtimeOrder,id:this}),j=new c(i),j.once("ready",k.resolve),j.on("select",function(a){e.owner.request("add-file",[a])}),j.init(),e.pickers.push(j),h.push(k.promise())}),a.when.apply(a,h)},disable:function(){d.each(this.pickers,function(){this.disable()})},enable:function(){d.each(this.pickers,function(){this.enable()})},destroy:function(){d.each(this.pickers,function(){this.destroy()}),this.pickers=null}})}),b("lib/image",["base","runtime/client","lib/blob"],function(a,b,c){function e(a){this.options=d.extend({},e.options,a),b.call(this,"Image"),this.on("load",function(){this._info=this.exec("info"),this._meta=this.exec("meta")})}var d=a.$;return e.options={quality:90,crop:!1,preserveHeaders:!1,allowMagnify:!1},a.inherits(b,{constructor:e,info:function(a){return a?(this._info=a,this):this._info},meta:function(a){return a?(this._meta=a,this):this._meta},loadFromBlob:function(a){var b=this,c=a.getRuid();this.connectRuntime(c,function(){b.exec("init",b.options),b.exec("loadFromBlob",a)})},resize:function(){var b=a.slice(arguments);return this.exec.apply(this,["resize"].concat(b))},crop:function(){var b=a.slice(arguments);return this.exec.apply(this,["crop"].concat(b))},getAsDataUrl:function(a){return this.exec("getAsDataUrl",a)},getAsBlob:function(a){var b=this.exec("getAsBlob",a);return new c(this.getRuid(),b)}}),e}),b("widgets/image",["base","uploader","lib/image","widgets/widget"],function(a,b,c){var e,d=a.$;return e=function(a){var b=0,c=[],d=function(){for(var d;c.length&&a>b;)d=c.shift(),b+=d[0],d[1]()};return function(a,e,f){c.push([e,f]),a.once("destroy",function(){b-=e,setTimeout(d,1)}),setTimeout(d,1)}}(5242880),d.extend(b.options,{thumb:{width:110,height:110,quality:70,allowMagnify:!0,crop:!0,preserveHeaders:!1,type:"image/jpeg"},compress:{width:1600,height:1600,quality:90,allowMagnify:!1,crop:!1,preserveHeaders:!0}}),b.register({name:"image",makeThumb:function(a,b,f,g){var h,i;return a=this.request("get-file",a),a.type.match(/^image/)?(h=d.extend({},this.options.thumb),d.isPlainObject(f)&&(h=d.extend(h,f),f=null),f=f||h.width,g=g||h.height,i=new c(h),i.once("load",function(){a._info=a._info||i.info(),a._meta=a._meta||i.meta(),1>=f&&f>0&&(f=a._info.width*f),1>=g&&g>0&&(g=a._info.height*g),i.resize(f,g)}),i.once("complete",function(){b(!1,i.getAsDataUrl(h.type)),i.destroy()}),i.once("error",function(a){b(a||!0),i.destroy()}),e(i,a.source.size,function(){a._info&&i.info(a._info),a._meta&&i.meta(a._meta),i.loadFromBlob(a.source)}),void 0):(b(!0),void 0)},beforeSendFile:function(b){var h,i,e=this.options.compress||this.options.resize,f=e&&e.compressSize||0,g=e&&e.noCompressIfLarger||!1;return b=this.request("get-file",b),!e||!~"image/jpeg,image/jpg".indexOf(b.type)||b.size<f||b._compressed?void 0:(e=d.extend({},e),i=a.Deferred(),h=new c(e),i.always(function(){h.destroy(),h=null}),h.once("error",i.reject),h.once("load",function(){var a=e.width,c=e.height;b._info=b._info||h.info(),b._meta=b._meta||h.meta(),1>=a&&a>0&&(a=b._info.width*a),1>=c&&c>0&&(c=b._info.height*c),h.resize(a,c)}),h.once("complete",function(){var a,c;try{a=h.getAsBlob(e.type),c=b.size,(!g||a.size<c)&&(b.source=a,b.size=a.size,b.trigger("resize",a.size,c)),b._compressed=!0,i.resolve()}catch(d){i.resolve()}}),b._info&&h.info(b._info),b._meta&&h.meta(b._meta),h.loadFromBlob(b.source),i.promise())}})}),b("file",["base","mediator"],function(a,b){function h(){return d+e++}function i(a){this.name=a.name||"Untitled",this.size=a.size||0,this.type=a.type||"application/octet-stream",this.lastModifiedDate=a.lastModifiedDate||1*new Date,this.id=h(),this.ext=f.exec(this.name)?RegExp.$1:"",this.statusText="",g[this.id]=i.Status.INITED,this.source=a,this.loaded=0,this.on("error",function(a){this.setStatus(i.Status.ERROR,a)})}var c=a.$,d="WU_FILE_",e=0,f=/\.([^.]+)$/,g={};return c.extend(i.prototype,{setStatus:function(a,b){var c=g[this.id];"undefined"!=typeof b&&(this.statusText=b),a!==c&&(g[this.id]=a,this.trigger("statuschange",a,c))},getStatus:function(){return g[this.id]},getSource:function(){return this.source},destroy:function(){this.off(),delete g[this.id]}}),b.installTo(i.prototype),i.Status={INITED:"inited",QUEUED:"queued",PROGRESS:"progress",ERROR:"error",COMPLETE:"complete",CANCELLED:"cancelled",INTERRUPT:"interrupt",INVALID:"invalid"},i}),b("queue",["base","mediator","file"],function(a,b,c){function f(){this.stats={numOfQueue:0,numOfSuccess:0,numOfCancel:0,numOfProgress:0,numOfUploadFailed:0,numOfInvalid:0,numofDeleted:0,numofInterrupt:0},this._queue=[],this._map={}}var d=a.$,e=c.Status;return d.extend(f.prototype,{append:function(a){return this._queue.push(a),this._fileAdded(a),this},prepend:function(a){return this._queue.unshift(a),this._fileAdded(a),this},getFile:function(a){return"string"!=typeof a?a:this._map[a]},fetch:function(a){var c,d,b=this._queue.length;for(a=a||e.QUEUED,c=0;b>c;c++)if(d=this._queue[c],a===d.getStatus())return d;return null},sort:function(a){"function"==typeof a&&this._queue.sort(a)},getFiles:function(){for(var f,a=[].slice.call(arguments,0),b=[],c=0,e=this._queue.length;e>c;c++)f=this._queue[c],(!a.length||~d.inArray(f.getStatus(),a))&&b.push(f);return b},removeFile:function(a){var c=this._map[a.id];c&&(delete this._map[a.id],a.destroy(),this.stats.numofDeleted++)},_fileAdded:function(a){var b=this,c=this._map[a.id];c||(this._map[a.id]=a,a.on("statuschange",function(a,c){b._onFileStatusChange(a,c)}))},_onFileStatusChange:function(a,b){var c=this.stats;switch(b){case e.PROGRESS:c.numOfProgress--;break;case e.QUEUED:c.numOfQueue--;break;case e.ERROR:c.numOfUploadFailed--;break;case e.INVALID:c.numOfInvalid--;break;case e.INTERRUPT:c.numofInterrupt--}switch(a){case e.QUEUED:c.numOfQueue++;break;case e.PROGRESS:c.numOfProgress++;break;case e.ERROR:c.numOfUploadFailed++;break;case e.COMPLETE:c.numOfSuccess++;break;case e.CANCELLED:c.numOfCancel++;break;case e.INVALID:c.numOfInvalid++;break;case e.INTERRUPT:c.numofInterrupt++}}}),b.installTo(f.prototype),f}),b("widgets/queue",["base","uploader","queue","file","lib/file","runtime/client","widgets/widget"],function(a,b,c,d,e,f){var g=a.$,h=/\.\w+$/,i=d.Status;return b.register({name:"queue",init:function(b){var e,h,i,j,k,l,m,d=this;if(g.isPlainObject(b.accept)&&(b.accept=[b.accept]),b.accept){for(k=[],i=0,h=b.accept.length;h>i;i++)j=b.accept[i].extensions,j&&k.push(j);k.length&&(l="\\."+k.join(",").replace(/,/g,"$|\\.").replace(/\*/g,".*")+"$"),d.accept=new RegExp(l,"i")}return d.queue=new c,d.stats=d.queue.stats,"html5"===this.request("predict-runtime-type")?(e=a.Deferred(),this.placeholder=m=new f("Placeholder"),m.connectRuntime({runtimeOrder:"html5"},function(){d._ruid=m.getRuid(),e.resolve()}),e.promise()):void 0},_wrapFile:function(a){if(!(a instanceof d)){if(!(a instanceof e)){if(!this._ruid)throw new Error("Can't add external files.");a=new e(this._ruid,a)}a=new d(a)}return a},acceptFile:function(a){var b=!a||!a.size||this.accept&&h.exec(a.name)&&!this.accept.test(a.name);return!b},_addFile:function(a){var b=this;return a=b._wrapFile(a),b.owner.trigger("beforeFileQueued",a)?b.acceptFile(a)?(b.queue.append(a),b.owner.trigger("fileQueued",a),a):(b.owner.trigger("error","Q_TYPE_DENIED",a),void 0):void 0},getFile:function(a){return this.queue.getFile(a)},addFile:function(a){var b=this;a.length||(a=[a]),a=g.map(a,function(a){return b._addFile(a)}),b.owner.trigger("filesQueued",a),b.options.auto&&setTimeout(function(){b.request("start-upload")},20)},getStats:function(){return this.stats},removeFile:function(a,b){var c=this;a=a.id?a:c.queue.getFile(a),this.request("cancel-file",a),b&&this.queue.removeFile(a)},getFiles:function(){return this.queue.getFiles.apply(this.queue,arguments)},fetchFile:function(){return this.queue.fetch.apply(this.queue,arguments)},retry:function(a,b){var d,e,f,c=this;if(a)return a=a.id?a:c.queue.getFile(a),a.setStatus(i.QUEUED),b||c.request("start-upload"),void 0;for(d=c.queue.getFiles(i.ERROR),e=0,f=d.length;f>e;e++)a=d[e],a.setStatus(i.QUEUED);c.request("start-upload")},sortFiles:function(){return this.queue.sort.apply(this.queue,arguments)},reset:function(){this.owner.trigger("reset"),this.queue=new c,this.stats=this.queue.stats},destroy:function(){this.reset(),this.placeholder&&this.placeholder.destroy()}})}),b("widgets/runtime",["uploader","runtime/runtime","widgets/widget"],function(a,b){return a.support=function(){return b.hasRuntime.apply(b,arguments)},a.register({name:"runtime",init:function(){if(!this.predictRuntimeType())throw Error("Runtime Error")},predictRuntimeType:function(){var d,e,a=this.options.runtimeOrder||b.orders,c=this.type;if(!c)for(a=a.split(/\s*,\s*/g),d=0,e=a.length;e>d;d++)if(b.hasRuntime(a[d])){this.type=c=a[d];break}return c}})}),b("lib/transport",["base","runtime/client","mediator"],function(a,b,c){function e(a){var c=this;a=c.options=d.extend(!0,{},e.options,a||{}),b.call(this,"Transport"),this._blob=null,this._formData=a.formData||{},this._headers=a.headers||{},this.on("progress",this._timeout),this.on("load error",function(){c.trigger("progress",1),clearTimeout(c._timer)})}var d=a.$;return e.options={server:"",method:"POST",withCredentials:!1,fileVal:"file",timeout:12e4,formData:{},headers:{},sendAsBinary:!1},d.extend(e.prototype,{appendBlob:function(a,b,c){var d=this,e=d.options;d.getRuid()&&d.disconnectRuntime(),d.connectRuntime(b.ruid,function(){d.exec("init")}),d._blob=b,e.fileVal=a||e.fileVal,e.filename=c||e.filename},append:function(a,b){"object"==typeof a?d.extend(this._formData,a):this._formData[a]=b},setRequestHeader:function(a,b){"object"==typeof a?d.extend(this._headers,a):this._headers[a]=b},send:function(a){this.exec("send",a),this._timeout()},abort:function(){return clearTimeout(this._timer),this.exec("abort")},destroy:function(){this.trigger("destroy"),this.off(),this.exec("destroy"),this.disconnectRuntime()},getResponse:function(){return this.exec("getResponse")},getResponseAsJson:function(){return this.exec("getResponseAsJson")},getStatus:function(){return this.exec("getStatus")},_timeout:function(){var a=this,b=a.options.timeout;b&&(clearTimeout(a._timer),a._timer=setTimeout(function(){a.abort(),a.trigger("error","timeout")},b))}}),c.installTo(e.prototype),e}),b("widgets/upload",["base","uploader","file","lib/transport","widgets/widget"],function(a,b,c,d){function h(a,b){var i,j,c=[],d=a.source,e=d.size,f=b?Math.ceil(e/b):1,g=0,h=0;for(j={file:a,has:function(){return!!c.length},shift:function(){return c.shift()},unshift:function(a){c.unshift(a)}};f>h;)i=Math.min(b,e-g),c.push({file:a,start:g,end:b?g+i:e,total:e,chunks:f,chunk:h++,cuted:j}),g+=i;return a.blocks=c.concat(),a.remaning=c.length,j}var e=a.$,f=a.isPromise,g=c.Status;e.extend(b.options,{prepareNextFile:!1,chunked:!1,chunkSize:5242880,chunkRetry:2,threads:3,formData:{}}),b.register({name:"upload",init:function(){var b=this.owner,c=this;this.runing=!1,this.progress=!1,b.on("startUpload",function(){c.progress=!0}).on("uploadFinished",function(){c.progress=!1}),this.pool=[],this.stack=[],this.pending=[],this.remaning=0,this.__tick=a.bindFn(this._tick,this),b.on("uploadComplete",function(a){a.blocks&&e.each(a.blocks,function(a,b){b.transport&&(b.transport.abort(),b.transport.destroy()),delete b.transport}),delete a.blocks,delete a.remaning})},reset:function(){this.request("stop-upload",!0),this.runing=!1,this.pool=[],this.stack=[],this.pending=[],this.remaning=0,this._trigged=!1,this._promise=null},startUpload:function(b){var d,c=this;if(e.each(c.request("get-files",g.INVALID),function(){c.request("remove-file",this)}),b)if(b=b.id?b:c.request("get-file",b),b.getStatus()===g.INTERRUPT)e.each(c.pool,function(a,c){c.file===b&&c.transport&&c.transport.send()}),b.setStatus(g.QUEUED);else{if(b.getStatus()===g.PROGRESS)return;b.setStatus(g.QUEUED)}else e.each(c.request("get-files",[g.INITED]),function(){this.setStatus(g.QUEUED)});if(!c.runing){for(c.runing=!0,d=[],e.each(c.pool,function(a,b){var e=b.file;e.getStatus()===g.INTERRUPT&&(d.push(e),c._trigged=!1,b.transport&&b.transport.send())});b=d.shift();)b.setStatus(g.PROGRESS);b||e.each(c.request("get-files",g.INTERRUPT),function(){this.setStatus(g.PROGRESS)}),c._trigged=!1,a.nextTick(c.__tick),c.owner.trigger("startUpload")}},stopUpload:function(b,c){var d=this;if(b===!0&&(c=b,b=null),d.runing!==!1){if(b){if(b=b.id?b:d.request("get-file",b),b.getStatus()!==g.PROGRESS&&b.getStatus()!==g.QUEUED)return;return b.setStatus(g.INTERRUPT),e.each(d.pool,function(a,c){c.file===b&&(c.transport&&c.transport.abort(),d._putback(c),d._popBlock(c))}),a.nextTick(d.__tick)}d.runing=!1,this._promise&&this._promise.file&&this._promise.file.setStatus(g.INTERRUPT),c&&e.each(d.pool,function(a,b){b.transport&&b.transport.abort(),b.file.setStatus(g.INTERRUPT)}),d.owner.trigger("stopUpload")}},cancelFile:function(a){a=a.id?a:this.request("get-file",a),a.blocks&&e.each(a.blocks,function(a,b){var c=b.transport;c&&(c.abort(),c.destroy(),delete b.transport)}),a.setStatus(g.CANCELLED),this.owner.trigger("fileDequeued",a)},isInProgress:function(){return!!this.progress},_getStats:function(){return this.request("get-stats")},skipFile:function(a,b){a=a.id?a:this.request("get-file",a),a.setStatus(b||g.COMPLETE),a.skipped=!0,a.blocks&&e.each(a.blocks,function(a,b){var c=b.transport;c&&(c.abort(),c.destroy(),delete b.transport)}),this.owner.trigger("uploadSkip",a)},_tick:function(){var d,e,b=this,c=b.options;return b._promise?b._promise.always(b.__tick):(b.pool.length<c.threads&&(e=b._nextBlock())?(b._trigged=!1,d=function(c){b._promise=null,c&&c.file&&b._startSend(c),a.nextTick(b.__tick)},b._promise=f(e)?e.always(d):d(e)):b.remaning||b._getStats().numOfQueue||b._getStats().numofInterrupt||(b.runing=!1,b._trigged||a.nextTick(function(){b.owner.trigger("uploadFinished")}),b._trigged=!0),void 0)},_putback:function(a){var b;a.cuted.unshift(a),b=this.stack.indexOf(a.cuted),~b||this.stack.unshift(a.cuted)},_getStack:function(){for(var b,a=0;b=this.stack[a++];){if(b.has()&&b.file.getStatus()===g.PROGRESS)return b;(!b.has()||b.file.getStatus()!==g.PROGRESS&&b.file.getStatus()!==g.INTERRUPT)&&this.stack.splice(--a,1)}return null},_nextBlock:function(){var c,d,e,g,a=this,b=a.options;return(c=this._getStack())?(b.prepareNextFile&&!a.pending.length&&a._prepareNextFile(),c.shift()):a.runing?(!a.pending.length&&a._getStats().numOfQueue&&a._prepareNextFile(),d=a.pending.shift(),e=function(d){return d?(c=h(d,b.chunked?b.chunkSize:0),a.stack.push(c),c.shift()):null},f(d)?(g=d.file,d=d[d.pipe?"pipe":"then"](e),d.file=g,d):e(d)):void 0},_prepareNextFile:function(){var d,a=this,b=a.request("fetch-file"),c=a.pending;b&&(d=a.request("before-send-file",b,function(){return b.getStatus()===g.PROGRESS||b.getStatus()===g.INTERRUPT?b:a._finishFile(b)}),a.owner.trigger("uploadStart",b),b.setStatus(g.PROGRESS),d.file=b,d.done(function(){var a=e.inArray(d,c);~a&&c.splice(a,1,b)}),d.fail(function(c){b.setStatus(g.ERROR,c),a.owner.trigger("uploadError",b,c),a.owner.trigger("uploadComplete",b)}),c.push(d))},_popBlock:function(a){var b=e.inArray(a,this.pool);this.pool.splice(b,1),a.file.remaning--,this.remaning--},_startSend:function(b){var e,c=this,d=b.file;return d.getStatus()!==g.PROGRESS?(d.getStatus()===g.INTERRUPT&&c._putback(b),void 0):(c.pool.push(b),c.remaning++,b.blob=1===b.chunks?d.source:d.source.slice(b.start,b.end),e=c.request("before-send",b,function(){d.getStatus()===g.PROGRESS?c._doSend(b):(c._popBlock(b),a.nextTick(c.__tick))}),e.fail(function(){1===d.remaning?c._finishFile(d).always(function(){b.percentage=1,c._popBlock(b),c.owner.trigger("uploadComplete",d),a.nextTick(c.__tick)}):(b.percentage=1,c.updateFileProgress(d),c._popBlock(b),a.nextTick(c.__tick))}),void 0)},_doSend:function(b){var m,n,c=this,f=c.owner,h=c.options,i=b.file,j=new d(h),k=e.extend({},h.formData),l=e.extend({},h.headers);b.transport=j,j.on("destroy",function(){delete b.transport,c._popBlock(b),a.nextTick(c.__tick)}),j.on("progress",function(a){b.percentage=a,c.updateFileProgress(i)}),m=function(a){var c;return n=j.getResponseAsJson()||{},n._raw=j.getResponse(),c=function(b){a=b},f.trigger("uploadAccept",b,n,c)||(a=a||"server"),a},j.on("error",function(a,c){b.retried=b.retried||0,b.chunks>1&&~"http,abort".indexOf(a)&&b.retried<h.chunkRetry?(b.retried++,j.send()):(c||"server"!==a||(a=m(a)),i.setStatus(g.ERROR,a),f.trigger("uploadError",i,a),f.trigger("uploadComplete",i))}),j.on("load",function(){var a;return(a=m())?(j.trigger("error",a,!0),void 0):(1===i.remaning?c._finishFile(i,n):j.destroy(),void 0)}),k=e.extend(k,{}),b.chunks>1&&e.extend(k,{chunks:b.chunks,chunk:b.chunk}),f.trigger("uploadBeforeSend",b,k,l),j.appendBlob(h.fileVal,b.blob,i.name),j.append(k),j.setRequestHeader(l),j.send()},_finishFile:function(a,b,c){var d=this.owner;return d.request("after-send-file",arguments,function(){a.setStatus(g.COMPLETE),d.trigger("uploadSuccess",a,b,c)}).fail(function(b){a.getStatus()===g.PROGRESS&&a.setStatus(g.ERROR,b),d.trigger("uploadError",a,b)}).always(function(){d.trigger("uploadComplete",a)
})},updateFileProgress:function(a){var b=0,c=0;a.blocks&&(e.each(a.blocks,function(a,b){c+=(b.percentage||0)*(b.end-b.start)}),b=c/a.size,this.owner.trigger("uploadProgress",a,b||0))}})}),b("widgets/validator",["base","uploader","file","widgets/widget"],function(a,b,c){var f,d=a.$,e={};return f={addValidator:function(a,b){e[a]=b},removeValidator:function(a){delete e[a]}},b.register({name:"validator",init:function(){var b=this;a.nextTick(function(){d.each(e,function(){this.call(b.owner)})})}}),f.addValidator("fileNumLimit",function(){var a=this,b=a.options,c=0,d=parseInt(b.fileNumLimit,10),e=!0;d&&(a.on("beforeFileQueued",function(a){return c>=d&&e&&(e=!1,this.trigger("error","Q_EXCEED_NUM_LIMIT",d,a),setTimeout(function(){e=!0},1)),c>=d?!1:!0}),a.on("fileQueued",function(){c++}),a.on("fileDequeued",function(){c--}),a.on("reset",function(){c=0}))}),f.addValidator("fileSizeLimit",function(){var a=this,b=a.options,c=0,d=parseInt(b.fileSizeLimit,10),e=!0;d&&(a.on("beforeFileQueued",function(a){var b=c+a.size>d;return b&&e&&(e=!1,this.trigger("error","Q_EXCEED_SIZE_LIMIT",d,a),setTimeout(function(){e=!0},1)),b?!1:!0}),a.on("fileQueued",function(a){c+=a.size}),a.on("fileDequeued",function(a){c-=a.size}),a.on("reset",function(){c=0}))}),f.addValidator("fileSingleSizeLimit",function(){var a=this,b=a.options,d=b.fileSingleSizeLimit;d&&a.on("beforeFileQueued",function(a){return a.size>d?(a.setStatus(c.Status.INVALID,"exceed_size"),this.trigger("error","F_EXCEED_SIZE",d,a),!1):void 0})}),f.addValidator("duplicate",function(){function d(a){for(var e,b=0,c=0,d=a.length;d>c;c++)e=a.charCodeAt(c),b=e+(b<<6)+(b<<16)-b;return b}var a=this,b=a.options,c={};b.duplicate||(a.on("beforeFileQueued",function(a){var b=a.__hash||(a.__hash=d(a.name+a.size+a.lastModifiedDate));return c[b]?(this.trigger("error","F_DUPLICATE",a),!1):void 0}),a.on("fileQueued",function(a){var b=a.__hash;b&&(c[b]=!0)}),a.on("fileDequeued",function(a){var b=a.__hash;b&&delete c[b]}),a.on("reset",function(){c={}}))}),f}),b("lib/md5",["runtime/client","mediator"],function(a,b){function c(){a.call(this,"Md5")}return b.installTo(c.prototype),c.prototype.loadFromBlob=function(a){var b=this;b.getRuid()&&b.disconnectRuntime(),b.connectRuntime(a.ruid,function(){b.exec("init"),b.exec("loadFromBlob",a)})},c.prototype.getResult=function(){return this.exec("getResult")},c}),b("widgets/md5",["base","uploader","lib/md5","lib/blob","widgets/widget"],function(a,b,c,d){return b.register({name:"md5",md5File:function(b,e,f){var g=new c,h=a.Deferred(),i=b instanceof d?b:this.request("get-file",b).source;return g.on("progress load",function(a){a=a||{},h.notify(a.total?a.loaded/a.total:1)}),g.on("complete",function(){h.resolve(g.getResult())}),g.on("error",function(a){h.reject(a)}),arguments.length>1&&(e=e||0,f=f||0,0>e&&(e=i.size+e),0>f&&(f=i.size+f),f=Math.min(f,i.size),i=i.slice(e,f)),g.loadFromBlob(i),h.promise()}})}),b("runtime/compbase",[],function(){function a(a,b){this.owner=a,this.options=a.options,this.getRuntime=function(){return b},this.getRuid=function(){return b.uid},this.trigger=function(){return a.trigger.apply(a,arguments)}}return a}),b("runtime/html5/runtime",["base","runtime/runtime","runtime/compbase"],function(b,c,d){function g(){var a={},d=this,g=this.destroy;c.apply(d,arguments),d.type=e,d.exec=function(c,e){var j,g=this,h=g.uid,i=b.slice(arguments,2);return f[c]&&(j=a[h]=a[h]||new f[c](g,d),j[e])?j[e].apply(j,i):void 0},d.destroy=function(){return g&&g.apply(this,arguments)}}var e="html5",f={};return b.inherits(c,{constructor:g,init:function(){var a=this;setTimeout(function(){a.trigger("ready")},1)}}),g.register=function(a,c){var e=f[a]=b.inherits(d,c);return e},a.Blob&&a.FileReader&&a.DataView&&c.addRuntime(e,g),g}),b("runtime/html5/blob",["runtime/html5/runtime","lib/blob"],function(a,b){return a.register("Blob",{slice:function(a,c){var d=this.owner.source,e=d.slice||d.webkitSlice||d.mozSlice;return d=e.call(d,a,c),new b(this.getRuid(),d)}})}),b("runtime/html5/dnd",["base","runtime/html5/runtime","lib/file"],function(a,b,c){var d=a.$,e="webuploader-dnd-";return b.register("DragAndDrop",{init:function(){var b=this.elem=this.options.container;this.dragEnterHandler=a.bindFn(this._dragEnterHandler,this),this.dragOverHandler=a.bindFn(this._dragOverHandler,this),this.dragLeaveHandler=a.bindFn(this._dragLeaveHandler,this),this.dropHandler=a.bindFn(this._dropHandler,this),this.dndOver=!1,b.on("dragenter",this.dragEnterHandler),b.on("dragover",this.dragOverHandler),b.on("dragleave",this.dragLeaveHandler),b.on("drop",this.dropHandler),this.options.disableGlobalDnd&&(d(document).on("dragover",this.dragOverHandler),d(document).on("drop",this.dropHandler))},_dragEnterHandler:function(a){var d,b=this,c=b._denied||!1;return a=a.originalEvent||a,b.dndOver||(b.dndOver=!0,d=a.dataTransfer.items,d&&d.length&&(b._denied=c=!b.trigger("accept",d)),b.elem.addClass(e+"over"),b.elem[c?"addClass":"removeClass"](e+"denied")),a.dataTransfer.dropEffect=c?"none":"copy",!1},_dragOverHandler:function(a){var b=this.elem.parent().get(0);return b&&!d.contains(b,a.currentTarget)?!1:(clearTimeout(this._leaveTimer),this._dragEnterHandler.call(this,a),!1)},_dragLeaveHandler:function(){var b,a=this;return b=function(){a.dndOver=!1,a.elem.removeClass(e+"over "+e+"denied")},clearTimeout(a._leaveTimer),a._leaveTimer=setTimeout(b,100),!1},_dropHandler:function(a){var h,i,b=this,f=b.getRuid(),g=b.elem.parent().get(0);if(g&&!d.contains(g,a.currentTarget))return!1;a=a.originalEvent||a,h=a.dataTransfer;try{i=h.getData("text/html")}catch(j){}return i?void 0:(b._getTansferFiles(h,function(a){b.trigger("drop",d.map(a,function(a){return new c(f,a)}))}),b.dndOver=!1,b.elem.removeClass(e+"over"),!1)},_getTansferFiles:function(b,c){var f,g,h,i,j,k,l,d=[],e=[];for(f=b.items,g=b.files,l=!(!f||!f[0].webkitGetAsEntry),j=0,k=g.length;k>j;j++)h=g[j],i=f&&f[j],l&&i.webkitGetAsEntry().isDirectory?e.push(this._traverseDirectoryTree(i.webkitGetAsEntry(),d)):d.push(h);a.when.apply(a,e).done(function(){d.length&&c(d)})},_traverseDirectoryTree:function(b,c){var d=a.Deferred(),e=this;return b.isFile?b.file(function(a){c.push(a),d.resolve()}):b.isDirectory&&b.createReader().readEntries(function(b){var i,f=b.length,g=[],h=[];for(i=0;f>i;i++)g.push(e._traverseDirectoryTree(b[i],h));a.when.apply(a,g).then(function(){c.push.apply(c,h),d.resolve()},d.reject)}),d.promise()},destroy:function(){var a=this.elem;a&&(a.off("dragenter",this.dragEnterHandler),a.off("dragover",this.dragOverHandler),a.off("dragleave",this.dragLeaveHandler),a.off("drop",this.dropHandler),this.options.disableGlobalDnd&&(d(document).off("dragover",this.dragOverHandler),d(document).off("drop",this.dropHandler)))}})}),b("runtime/html5/filepaste",["base","runtime/html5/runtime","lib/file"],function(a,b,c){return b.register("FilePaste",{init:function(){var e,f,g,h,b=this.options,c=this.elem=b.container,d=".*";if(b.accept){for(e=[],f=0,g=b.accept.length;g>f;f++)h=b.accept[f].mimeTypes,h&&e.push(h);e.length&&(d=e.join(","),d=d.replace(/,/g,"|").replace(/\*/g,".*"))}this.accept=d=new RegExp(d,"i"),this.hander=a.bindFn(this._pasteHander,this),c.on("paste",this.hander)},_pasteHander:function(a){var e,f,g,h,i,b=[],d=this.getRuid();for(a=a.originalEvent||a,e=a.clipboardData.items,h=0,i=e.length;i>h;h++)f=e[h],"file"===f.kind&&(g=f.getAsFile())&&b.push(new c(d,g));b.length&&(a.preventDefault(),a.stopPropagation(),this.trigger("paste",b))},destroy:function(){this.elem.off("paste",this.hander)}})}),b("runtime/html5/filepicker",["base","runtime/html5/runtime"],function(a,b){var c=a.$;return b.register("FilePicker",{init:function(){var h,i,j,k,a=this.getRuntime().getContainer(),b=this,d=b.owner,e=b.options,f=this.label=c(document.createElement("label")),g=this.input=c(document.createElement("input"));if(g.attr("type","file"),g.attr("name",e.name),g.addClass("webuploader-element-invisible"),f.on("click",function(){g.trigger("click")}),f.css({opacity:0,width:"100%",height:"100%",display:"block",cursor:"pointer",background:"#ffffff"}),e.multiple&&g.attr("multiple","multiple"),e.accept&&e.accept.length>0){for(h=[],i=0,j=e.accept.length;j>i;i++)h.push(e.accept[i].mimeTypes);g.attr("accept",h.join(","))}a.append(g),a.append(f),k=function(a){d.trigger(a.type)},g.on("change",function(a){var f,e=arguments.callee;b.files=a.target.files,f=this.cloneNode(!0),f.value=null,this.parentNode.replaceChild(f,this),g.off(),g=c(f).on("change",e).on("mouseenter mouseleave",k),d.trigger("change")}),f.on("mouseenter mouseleave",k)},getFiles:function(){return this.files},destroy:function(){this.input.off(),this.label.off()}})}),b("runtime/html5/util",["base"],function(b){var c=a.createObjectURL&&a||a.URL&&URL.revokeObjectURL&&URL||a.webkitURL,d=b.noop,e=d;return c&&(d=function(){return c.createObjectURL.apply(c,arguments)},e=function(){return c.revokeObjectURL.apply(c,arguments)}),{createObjectURL:d,revokeObjectURL:e,dataURL2Blob:function(a){var b,c,d,e,f,g;for(g=a.split(","),b=~g[0].indexOf("base64")?atob(g[1]):decodeURIComponent(g[1]),d=new ArrayBuffer(b.length),c=new Uint8Array(d),e=0;e<b.length;e++)c[e]=b.charCodeAt(e);return f=g[0].split(":")[1].split(";")[0],this.arrayBufferToBlob(d,f)},dataURL2ArrayBuffer:function(a){var b,c,d,e;for(e=a.split(","),b=~e[0].indexOf("base64")?atob(e[1]):decodeURIComponent(e[1]),c=new Uint8Array(b.length),d=0;d<b.length;d++)c[d]=b.charCodeAt(d);return c.buffer},arrayBufferToBlob:function(b,c){var e,d=a.BlobBuilder||a.WebKitBlobBuilder;return d?(e=new d,e.append(b),e.getBlob(c)):new Blob([b],c?{type:c}:{})},canvasToDataUrl:function(a,b,c){return a.toDataURL(b,c/100)},parseMeta:function(a,b){b(!1,{})},updateImageHead:function(a){return a}}}),b("runtime/html5/imagemeta",["runtime/html5/util"],function(a){var b;return b={parsers:{65505:[]},maxMetaDataSize:262144,parse:function(a,b){var c=this,d=new FileReader;d.onload=function(){b(!1,c._parse(this.result)),d=d.onload=d.onerror=null},d.onerror=function(a){b(a.message),d=d.onload=d.onerror=null},a=a.slice(0,c.maxMetaDataSize),d.readAsArrayBuffer(a.getSource())},_parse:function(a,c){if(!(a.byteLength<6)){var i,j,k,l,d=new DataView(a),e=2,f=d.byteLength-4,g=e,h={};if(65496===d.getUint16(0)){for(;f>e&&(i=d.getUint16(e),i>=65504&&65519>=i||65534===i)&&(j=d.getUint16(e+2)+2,!(e+j>d.byteLength));){if(k=b.parsers[i],!c&&k)for(l=0;l<k.length;l+=1)k[l].call(b,d,e,j,h);e+=j,g=e}g>6&&(h.imageHead=a.slice?a.slice(2,g):new Uint8Array(a).subarray(2,g))}return h}},updateImageHead:function(a,b){var d,e,f,c=this._parse(a,!0);return f=2,c.imageHead&&(f=2+c.imageHead.byteLength),e=a.slice?a.slice(f):new Uint8Array(a).subarray(f),d=new Uint8Array(b.byteLength+2+e.byteLength),d[0]=255,d[1]=216,d.set(new Uint8Array(b),2),d.set(new Uint8Array(e),b.byteLength+2),d.buffer}},a.parseMeta=function(){return b.parse.apply(b,arguments)},a.updateImageHead=function(){return b.updateImageHead.apply(b,arguments)},b}),b("runtime/html5/imagemeta/exif",["base","runtime/html5/imagemeta"],function(a,b){var c={};return c.ExifMap=function(){return this},c.ExifMap.prototype.map={Orientation:274},c.ExifMap.prototype.get=function(a){return this[a]||this[this.map[a]]},c.exifTagTypes={1:{getValue:function(a,b){return a.getUint8(b)},size:1},2:{getValue:function(a,b){return String.fromCharCode(a.getUint8(b))},size:1,ascii:!0},3:{getValue:function(a,b,c){return a.getUint16(b,c)},size:2},4:{getValue:function(a,b,c){return a.getUint32(b,c)},size:4},5:{getValue:function(a,b,c){return a.getUint32(b,c)/a.getUint32(b+4,c)},size:8},9:{getValue:function(a,b,c){return a.getInt32(b,c)},size:4},10:{getValue:function(a,b,c){return a.getInt32(b,c)/a.getInt32(b+4,c)},size:8}},c.exifTagTypes[7]=c.exifTagTypes[1],c.getExifValue=function(b,d,e,f,g,h){var j,k,l,m,n,o,i=c.exifTagTypes[f];if(!i)return a.log("Invalid Exif data: Invalid tag type."),void 0;if(j=i.size*g,k=j>4?d+b.getUint32(e+8,h):e+8,k+j>b.byteLength)return a.log("Invalid Exif data: Invalid data offset."),void 0;if(1===g)return i.getValue(b,k,h);for(l=[],m=0;g>m;m+=1)l[m]=i.getValue(b,k+m*i.size,h);if(i.ascii){for(n="",m=0;m<l.length&&(o=l[m],"\0"!==o);m+=1)n+=o;return n}return l},c.parseExifTag=function(a,b,d,e,f){var g=a.getUint16(d,e);f.exif[g]=c.getExifValue(a,b,d,a.getUint16(d+2,e),a.getUint32(d+4,e),e)},c.parseExifTags=function(b,c,d,e,f){var g,h,i;if(d+6>b.byteLength)return a.log("Invalid Exif data: Invalid directory offset."),void 0;if(g=b.getUint16(d,e),h=d+2+12*g,h+4>b.byteLength)return a.log("Invalid Exif data: Invalid directory size."),void 0;for(i=0;g>i;i+=1)this.parseExifTag(b,c,d+2+12*i,e,f);return b.getUint32(h,e)},c.parseExifData=function(b,d,e,f){var h,i,g=d+10;if(1165519206===b.getUint32(d+4)){if(g+8>b.byteLength)return a.log("Invalid Exif data: Invalid segment size."),void 0;if(0!==b.getUint16(d+8))return a.log("Invalid Exif data: Missing byte alignment offset."),void 0;switch(b.getUint16(g)){case 18761:h=!0;break;case 19789:h=!1;break;default:return a.log("Invalid Exif data: Invalid byte alignment marker."),void 0}if(42!==b.getUint16(g+2,h))return a.log("Invalid Exif data: Missing TIFF marker."),void 0;i=b.getUint32(g+4,h),f.exif=new c.ExifMap,i=c.parseExifTags(b,g,g+i,h,f)}},b.parsers[65505].push(c.parseExifData),c}),b("runtime/html5/jpegencoder",[],function(){function d(a){function I(a){var c,i,j,k,l,m,n,o,p,b=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99];for(c=0;64>c;c++)i=d((b[c]*a+50)/100),1>i?i=1:i>255&&(i=255),e[z[c]]=i;for(j=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],k=0;64>k;k++)l=d((j[k]*a+50)/100),1>l?l=1:l>255&&(l=255),f[z[k]]=l;for(m=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],n=0,o=0;8>o;o++)for(p=0;8>p;p++)g[n]=1/(8*e[z[n]]*m[o]*m[p]),h[n]=1/(8*f[z[n]]*m[o]*m[p]),n++}function J(a,b){var f,g,c=0,d=0,e=new Array;for(f=1;16>=f;f++){for(g=1;g<=a[f];g++)e[b[d]]=[],e[b[d]][0]=c,e[b[d]][1]=f,d++,c++;c*=2}return e}function K(){i=J(A,B),j=J(E,F),k=J(C,D),l=J(G,H)}function L(){var c,d,e,a=1,b=2;for(c=1;15>=c;c++){for(d=a;b>d;d++)n[32767+d]=c,m[32767+d]=[],m[32767+d][1]=c,m[32767+d][0]=d;for(e=-(b-1);-a>=e;e++)n[32767+e]=c,m[32767+e]=[],m[32767+e][1]=c,m[32767+e][0]=b-1+e;a<<=1,b<<=1}}function M(){for(var a=0;256>a;a++)x[a]=19595*a,x[a+256>>0]=38470*a,x[a+512>>0]=7471*a+32768,x[a+768>>0]=-11059*a,x[a+1024>>0]=-21709*a,x[a+1280>>0]=32768*a+8421375,x[a+1536>>0]=-27439*a,x[a+1792>>0]=-5329*a}function N(a){for(var b=a[0],c=a[1]-1;c>=0;)b&1<<c&&(r|=1<<s),c--,s--,0>s&&(255==r?(O(255),O(0)):O(r),s=7,r=0)}function O(a){q.push(w[a])}function P(a){O(255&a>>8),O(255&a)}function Q(a,b){var c,d,e,f,g,h,i,j,l,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,k=0,m=8,n=64;for(l=0;m>l;++l)c=a[k],d=a[k+1],e=a[k+2],f=a[k+3],g=a[k+4],h=a[k+5],i=a[k+6],j=a[k+7],p=c+j,q=c-j,r=d+i,s=d-i,t=e+h,u=e-h,v=f+g,w=f-g,x=p+v,y=p-v,z=r+t,A=r-t,a[k]=x+z,a[k+4]=x-z,B=.707106781*(A+y),a[k+2]=y+B,a[k+6]=y-B,x=w+u,z=u+s,A=s+q,C=.382683433*(x-A),D=.5411961*x+C,E=1.306562965*A+C,F=.707106781*z,G=q+F,H=q-F,a[k+5]=H+D,a[k+3]=H-D,a[k+1]=G+E,a[k+7]=G-E,k+=8;for(k=0,l=0;m>l;++l)c=a[k],d=a[k+8],e=a[k+16],f=a[k+24],g=a[k+32],h=a[k+40],i=a[k+48],j=a[k+56],I=c+j,J=c-j,K=d+i,L=d-i,M=e+h,N=e-h,O=f+g,P=f-g,Q=I+O,R=I-O,S=K+M,T=K-M,a[k]=Q+S,a[k+32]=Q-S,U=.707106781*(T+R),a[k+16]=R+U,a[k+48]=R-U,Q=P+N,S=N+L,T=L+J,V=.382683433*(Q-T),W=.5411961*Q+V,X=1.306562965*T+V,Y=.707106781*S,Z=J+Y,$=J-Y,a[k+40]=$+W,a[k+24]=$-W,a[k+8]=Z+X,a[k+56]=Z-X,k++;for(l=0;n>l;++l)_=a[l]*b[l],o[l]=_>0?0|_+.5:0|_-.5;return o}function R(){P(65504),P(16),O(74),O(70),O(73),O(70),O(0),O(1),O(1),O(0),P(1),P(1),O(0),O(0)}function S(a,b){P(65472),P(17),O(8),P(b),P(a),O(3),O(1),O(17),O(0),O(2),O(17),O(1),O(3),O(17),O(1)}function T(){var a,b;for(P(65499),P(132),O(0),a=0;64>a;a++)O(e[a]);for(O(1),b=0;64>b;b++)O(f[b])}function U(){var a,b,c,d,e,f,g,h;for(P(65476),P(418),O(0),a=0;16>a;a++)O(A[a+1]);for(b=0;11>=b;b++)O(B[b]);for(O(16),c=0;16>c;c++)O(C[c+1]);for(d=0;161>=d;d++)O(D[d]);for(O(1),e=0;16>e;e++)O(E[e+1]);for(f=0;11>=f;f++)O(F[f]);for(O(17),g=0;16>g;g++)O(G[g+1]);for(h=0;161>=h;h++)O(H[h])}function V(){P(65498),P(12),O(3),O(1),O(0),O(2),O(17),O(3),O(17),O(0),O(63),O(0)}function W(a,b,c,d,e){var h,o,q,r,s,t,u,v,w,f=e[0],g=e[240],i=16,j=63,k=64,l=Q(a,b);for(o=0;k>o;++o)p[z[o]]=l[o];for(q=p[0]-c,c=p[0],0==q?N(d[0]):(h=32767+q,N(d[n[h]]),N(m[h])),r=63;r>0&&0==p[r];r--);if(0==r)return N(f),c;for(s=1;r>=s;){for(u=s;0==p[s]&&r>=s;++s);if(v=s-u,v>=i){for(t=v>>4,w=1;t>=w;++w)N(g);v=15&v}h=32767+p[s],N(e[(v<<4)+n[h]]),N(m[h]),s++}return r!=j&&N(f),c}function X(){var b,a=String.fromCharCode;for(b=0;256>b;b++)w[b]=a(b)}function Y(a){if(0>=a&&(a=1),a>100&&(a=100),y!=a){var b=0;b=50>a?Math.floor(5e3/a):Math.floor(200-2*a),I(b),y=a}}function Z(){a||(a=50),X(),K(),L(),M(),Y(a)}var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H;Math.round,d=Math.floor,e=new Array(64),f=new Array(64),g=new Array(64),h=new Array(64),m=new Array(65535),n=new Array(65535),o=new Array(64),p=new Array(64),q=[],r=0,s=7,t=new Array(64),u=new Array(64),v=new Array(64),w=new Array(256),x=new Array(2048),z=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],A=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],C=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],D=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],E=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],G=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],H=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250],this.encode=function(a,b){var c,d,e,f,m,n,o,w,y,z,A,B,C,D,E,F,G,H,I;for(b&&Y(b),q=new Array,r=0,s=7,P(65496),R(),T(),S(a.width,a.height),U(),V(),c=0,d=0,e=0,r=0,s=7,this.encode.displayName="_encode_",f=a.data,m=a.width,n=a.height,o=4*m,y=0;n>y;){for(w=0;o>w;){for(C=o*y+w,D=C,E=-1,F=0,G=0;64>G;G++)F=G>>3,E=4*(7&G),D=C+F*o+E,y+F>=n&&(D-=o*(y+1+F-n)),w+E>=o&&(D-=w+E-o+4),z=f[D++],A=f[D++],B=f[D++],t[G]=(x[z]+x[A+256>>0]+x[B+512>>0]>>16)-128,u[G]=(x[z+768>>0]+x[A+1024>>0]+x[B+1280>>0]>>16)-128,v[G]=(x[z+1280>>0]+x[A+1536>>0]+x[B+1792>>0]>>16)-128;c=W(t,g,c,i,k),d=W(u,h,d,j,l),e=W(v,h,e,j,l),w+=32}y+=8}return s>=0&&(H=[],H[1]=s+1,H[0]=(1<<s+1)-1,N(H)),P(65497),I="data:image/jpeg;base64,"+btoa(q.join("")),q=[],I},Z()}return d.encode=function(a,b){var c=new d(b);return c.encode(a)},d}),b("runtime/html5/androidpatch",["runtime/html5/util","runtime/html5/jpegencoder","base"],function(a,b,c){var e,d=a.canvasToDataUrl;a.canvasToDataUrl=function(a,f,g){var h,i,j,k,l;return c.os.android?("image/jpeg"===f&&"undefined"==typeof e&&(k=d.apply(null,arguments),l=k.split(","),k=~l[0].indexOf("base64")?atob(l[1]):decodeURIComponent(l[1]),k=k.substring(0,2),e=255===k.charCodeAt(0)&&216===k.charCodeAt(1)),"image/jpeg"!==f||e?d.apply(null,arguments):(i=a.width,j=a.height,h=a.getContext("2d"),b.encode(h.getImageData(0,0,i,j),g))):d.apply(null,arguments)}}),b("runtime/html5/image",["base","runtime/html5/runtime","runtime/html5/util"],function(a,b,c){var d="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D";return b.register("Image",{modified:!1,init:function(){var a=this,b=new Image;b.onload=function(){a._info={type:a.type,width:this.width,height:this.height},a._metas||"image/jpeg"!==a.type?a.owner.trigger("load"):c.parseMeta(a._blob,function(b,c){a._metas=c,a.owner.trigger("load")})},b.onerror=function(){a.owner.trigger("error")},a._img=b},loadFromBlob:function(a){var b=this,d=b._img;b._blob=a,b.type=a.type,d.src=c.createObjectURL(a.getSource()),b.owner.once("load",function(){c.revokeObjectURL(d.src)})},resize:function(a,b){var c=this._canvas||(this._canvas=document.createElement("canvas"));this._resize(this._img,c,a,b),this._blob=null,this.modified=!0,this.owner.trigger("complete","resize")},crop:function(a,b,c,d,e){var f=this._canvas||(this._canvas=document.createElement("canvas")),g=this.options,h=this._img,i=h.naturalWidth,j=h.naturalHeight,k=this.getOrientation();e=e||1,f.width=c,f.height=d,g.preserveHeaders||this._rotate2Orientaion(f,k),this._renderImageToCanvas(f,h,-a,-b,i*e,j*e),this._blob=null,this.modified=!0,this.owner.trigger("complete","crop")},getAsBlob:function(a){var e,b=this._blob,d=this.options;if(a=a||this.type,this.modified||this.type!==a){if(e=this._canvas,"image/jpeg"===a){if(b=c.canvasToDataUrl(e,a,d.quality),d.preserveHeaders&&this._metas&&this._metas.imageHead)return b=c.dataURL2ArrayBuffer(b),b=c.updateImageHead(b,this._metas.imageHead),b=c.arrayBufferToBlob(b,a)}else b=c.canvasToDataUrl(e,a);b=c.dataURL2Blob(b)}return b},getAsDataUrl:function(a){var b=this.options;return a=a||this.type,"image/jpeg"===a?c.canvasToDataUrl(this._canvas,a,b.quality):this._canvas.toDataURL(a)},getOrientation:function(){return this._metas&&this._metas.exif&&this._metas.exif.get("Orientation")||1},info:function(a){return a?(this._info=a,this):this._info},meta:function(a){return a?(this._meta=a,this):this._meta},destroy:function(){var a=this._canvas;this._img.onload=null,a&&(a.getContext("2d").clearRect(0,0,a.width,a.height),a.width=a.height=0,this._canvas=null),this._img.src=d,this._img=this._blob=null},_resize:function(a,b,c,d){var i,j,k,l,m,e=this.options,f=a.width,g=a.height,h=this.getOrientation();~[5,6,7,8].indexOf(h)&&(c^=d,d^=c,c^=d),i=Math[e.crop?"max":"min"](c/f,d/g),e.allowMagnify||(i=Math.min(1,i)),j=f*i,k=g*i,e.crop?(b.width=c,b.height=d):(b.width=j,b.height=k),l=(b.width-j)/2,m=(b.height-k)/2,e.preserveHeaders||this._rotate2Orientaion(b,h),this._renderImageToCanvas(b,a,l,m,j,k)},_rotate2Orientaion:function(a,b){var c=a.width,d=a.height,e=a.getContext("2d");switch(b){case 5:case 6:case 7:case 8:a.width=d,a.height=c}switch(b){case 2:e.translate(c,0),e.scale(-1,1);break;case 3:e.translate(c,d),e.rotate(Math.PI);break;case 4:e.translate(0,d),e.scale(1,-1);break;case 5:e.rotate(.5*Math.PI),e.scale(1,-1);break;case 6:e.rotate(.5*Math.PI),e.translate(0,-d);break;case 7:e.rotate(.5*Math.PI),e.translate(c,-d),e.scale(-1,1);break;case 8:e.rotate(-.5*Math.PI),e.translate(-c,0)}},_renderImageToCanvas:function(){function b(a,b,c){var i,j,k,d=document.createElement("canvas"),e=d.getContext("2d"),f=0,g=c,h=c;for(d.width=1,d.height=c,e.drawImage(a,0,0),i=e.getImageData(0,0,1,c).data;h>f;)j=i[4*(h-1)+3],0===j?g=h:f=h,h=g+f>>1;return k=h/c,0===k?1:k}function c(a){var d,e,b=a.naturalWidth,c=a.naturalHeight;return b*c>1048576?(d=document.createElement("canvas"),d.width=d.height=1,e=d.getContext("2d"),e.drawImage(a,-b+1,0),0===e.getImageData(0,0,1,1).data[3]):!1}return a.os.ios?a.os.ios>=7?function(a,c,d,e,f,g){var h=c.naturalWidth,i=c.naturalHeight,j=b(c,h,i);return a.getContext("2d").drawImage(c,0,0,h*j,i*j,d,e,f,g)}:function(a,d,e,f,g,h){var q,r,s,t,u,v,w,i=d.naturalWidth,j=d.naturalHeight,k=a.getContext("2d"),l=c(d),m="image/jpeg"===this.type,n=1024,o=0,p=0;for(l&&(i/=2,j/=2),k.save(),q=document.createElement("canvas"),q.width=q.height=n,r=q.getContext("2d"),s=m?b(d,i,j):1,t=Math.ceil(n*g/i),u=Math.ceil(n*h/j/s);j>o;){for(v=0,w=0;i>v;)r.clearRect(0,0,n,n),r.drawImage(d,-v,-o),k.drawImage(q,0,0,n,n,e+w,f+p,t,u),v+=n,w+=t;o+=n,p+=u}k.restore(),q=r=null}:function(b){var c=a.slice(arguments,1),d=b.getContext("2d");d.drawImage.apply(d,c)}}()})}),b("runtime/html5/transport",["base","runtime/html5/runtime"],function(a,b){var c=a.noop,d=a.$;return b.register("Transport",{init:function(){this._status=0,this._response=null},send:function(){var h,i,j,b=this.owner,c=this.options,e=this._initAjax(),f=b._blob,g=c.server;c.sendAsBinary?(g+=(/\?/.test(g)?"&":"?")+d.param(b._formData),i=f.getSource()):(h=new FormData,d.each(b._formData,function(a,b){h.append(a,b)}),h.append(c.fileVal,f.getSource(),c.filename||b._formData.name||"")),c.withCredentials&&"withCredentials"in e?(e.open(c.method,g,!0),e.withCredentials=!0):e.open(c.method,g),this._setRequestHeader(e,c.headers),i?(e.overrideMimeType&&e.overrideMimeType("application/octet-stream"),a.os.android?(j=new FileReader,j.onload=function(){e.send(this.result),j=j.onload=null},j.readAsArrayBuffer(i)):e.send(i)):e.send(h)},getResponse:function(){return this._response},getResponseAsJson:function(){return this._parseJson(this._response)},getStatus:function(){return this._status},abort:function(){var a=this._xhr;a&&(a.upload.onprogress=c,a.onreadystatechange=c,a.abort(),this._xhr=a=null)},destroy:function(){this.abort()},_initAjax:function(){var a=this,b=new XMLHttpRequest,d=this.options;return!d.withCredentials||"withCredentials"in b||"undefined"==typeof XDomainRequest||(b=new XDomainRequest),b.upload.onprogress=function(b){var c=0;return b.lengthComputable&&(c=b.loaded/b.total),a.trigger("progress",c)},b.onreadystatechange=function(){return 4===b.readyState?(b.upload.onprogress=c,b.onreadystatechange=c,a._xhr=null,a._status=b.status,b.status>=200&&b.status<300?(a._response=b.responseText,a.trigger("load")):b.status>=500&&b.status<600?(a._response=b.responseText,a.trigger("error","server")):a.trigger("error",a._status?"http":"abort")):void 0},a._xhr=b,b},_setRequestHeader:function(a,b){d.each(b,function(b,c){a.setRequestHeader(b,c)})},_parseJson:function(a){var b;try{b=JSON.parse(a)}catch(c){b={}}return b}})}),b("runtime/html5/md5",["runtime/html5/runtime"],function(a){var b=function(a,b){return 4294967295&a+b},c=function(a,c,d,e,f,g){return c=b(b(c,a),b(e,g)),b(c<<f|c>>>32-f,d)},d=function(a,b,d,e,f,g,h){return c(b&d|~b&e,a,b,f,g,h)},e=function(a,b,d,e,f,g,h){return c(b&e|d&~e,a,b,f,g,h)},f=function(a,b,d,e,f,g,h){return c(b^d^e,a,b,f,g,h)},g=function(a,b,d,e,f,g,h){return c(d^(b|~e),a,b,f,g,h)},h=function(a,c){var h=a[0],i=a[1],j=a[2],k=a[3];h=d(h,i,j,k,c[0],7,-680876936),k=d(k,h,i,j,c[1],12,-389564586),j=d(j,k,h,i,c[2],17,606105819),i=d(i,j,k,h,c[3],22,-1044525330),h=d(h,i,j,k,c[4],7,-176418897),k=d(k,h,i,j,c[5],12,1200080426),j=d(j,k,h,i,c[6],17,-1473231341),i=d(i,j,k,h,c[7],22,-45705983),h=d(h,i,j,k,c[8],7,1770035416),k=d(k,h,i,j,c[9],12,-1958414417),j=d(j,k,h,i,c[10],17,-42063),i=d(i,j,k,h,c[11],22,-1990404162),h=d(h,i,j,k,c[12],7,1804603682),k=d(k,h,i,j,c[13],12,-40341101),j=d(j,k,h,i,c[14],17,-1502002290),i=d(i,j,k,h,c[15],22,1236535329),h=e(h,i,j,k,c[1],5,-165796510),k=e(k,h,i,j,c[6],9,-1069501632),j=e(j,k,h,i,c[11],14,643717713),i=e(i,j,k,h,c[0],20,-373897302),h=e(h,i,j,k,c[5],5,-701558691),k=e(k,h,i,j,c[10],9,38016083),j=e(j,k,h,i,c[15],14,-660478335),i=e(i,j,k,h,c[4],20,-405537848),h=e(h,i,j,k,c[9],5,568446438),k=e(k,h,i,j,c[14],9,-1019803690),j=e(j,k,h,i,c[3],14,-187363961),i=e(i,j,k,h,c[8],20,1163531501),h=e(h,i,j,k,c[13],5,-1444681467),k=e(k,h,i,j,c[2],9,-51403784),j=e(j,k,h,i,c[7],14,1735328473),i=e(i,j,k,h,c[12],20,-1926607734),h=f(h,i,j,k,c[5],4,-378558),k=f(k,h,i,j,c[8],11,-2022574463),j=f(j,k,h,i,c[11],16,1839030562),i=f(i,j,k,h,c[14],23,-35309556),h=f(h,i,j,k,c[1],4,-1530992060),k=f(k,h,i,j,c[4],11,1272893353),j=f(j,k,h,i,c[7],16,-155497632),i=f(i,j,k,h,c[10],23,-1094730640),h=f(h,i,j,k,c[13],4,681279174),k=f(k,h,i,j,c[0],11,-358537222),j=f(j,k,h,i,c[3],16,-722521979),i=f(i,j,k,h,c[6],23,76029189),h=f(h,i,j,k,c[9],4,-640364487),k=f(k,h,i,j,c[12],11,-421815835),j=f(j,k,h,i,c[15],16,530742520),i=f(i,j,k,h,c[2],23,-995338651),h=g(h,i,j,k,c[0],6,-198630844),k=g(k,h,i,j,c[7],10,1126891415),j=g(j,k,h,i,c[14],15,-1416354905),i=g(i,j,k,h,c[5],21,-57434055),h=g(h,i,j,k,c[12],6,1700485571),k=g(k,h,i,j,c[3],10,-1894986606),j=g(j,k,h,i,c[10],15,-1051523),i=g(i,j,k,h,c[1],21,-2054922799),h=g(h,i,j,k,c[8],6,1873313359),k=g(k,h,i,j,c[15],10,-30611744),j=g(j,k,h,i,c[6],15,-1560198380),i=g(i,j,k,h,c[13],21,1309151649),h=g(h,i,j,k,c[4],6,-145523070),k=g(k,h,i,j,c[11],10,-1120210379),j=g(j,k,h,i,c[2],15,718787259),i=g(i,j,k,h,c[9],21,-343485551),a[0]=b(h,a[0]),a[1]=b(i,a[1]),a[2]=b(j,a[2]),a[3]=b(k,a[3])},i=function(a){var c,b=[];for(c=0;64>c;c+=4)b[c>>2]=a.charCodeAt(c)+(a.charCodeAt(c+1)<<8)+(a.charCodeAt(c+2)<<16)+(a.charCodeAt(c+3)<<24);return b},j=function(a){var c,b=[];for(c=0;64>c;c+=4)b[c>>2]=a[c]+(a[c+1]<<8)+(a[c+2]<<16)+(a[c+3]<<24);return b},k=function(a){var d,e,f,g,j,k,b=a.length,c=[1732584193,-271733879,-1732584194,271733878];for(d=64;b>=d;d+=64)h(c,i(a.substring(d-64,d)));for(a=a.substring(d-64),e=a.length,f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],d=0;e>d;d+=1)f[d>>2]|=a.charCodeAt(d)<<(d%4<<3);if(f[d>>2]|=128<<(d%4<<3),d>55)for(h(c,f),d=0;16>d;d+=1)f[d]=0;return g=8*b,g=g.toString(16).match(/(.*?)(.{0,8})$/),j=parseInt(g[2],16),k=parseInt(g[1],16)||0,f[14]=j,f[15]=k,h(c,f),c},l=function(a){var d,e,f,g,i,k,b=a.length,c=[1732584193,-271733879,-1732584194,271733878];for(d=64;b>=d;d+=64)h(c,j(a.subarray(d-64,d)));for(a=b>d-64?a.subarray(d-64):new Uint8Array(0),e=a.length,f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],d=0;e>d;d+=1)f[d>>2]|=a[d]<<(d%4<<3);if(f[d>>2]|=128<<(d%4<<3),d>55)for(h(c,f),d=0;16>d;d+=1)f[d]=0;return g=8*b,g=g.toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(g[2],16),k=parseInt(g[1],16)||0,f[14]=i,f[15]=k,h(c,f),c},m=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=function(a){var c,b="";for(c=0;4>c;c+=1)b+=m[15&a>>8*c+4]+m[15&a>>8*c];return b},o=function(a){var b;for(b=0;b<a.length;b+=1)a[b]=n(a[b]);return a.join("")},p=function(a){return o(k(a))},q=function(){this.reset()};return"5d41402abc4b2a76b9719d911017c592"!==p("hello")&&(b=function(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}),q.prototype.append=function(a){return/[\u0080-\uFFFF]/.test(a)&&(a=unescape(encodeURIComponent(a))),this.appendBinary(a),this},q.prototype.appendBinary=function(a){this._buff+=a,this._length+=a.length;var c,b=this._buff.length;for(c=64;b>=c;c+=64)h(this._state,i(this._buff.substring(c-64,c)));return this._buff=this._buff.substr(c-64),this},q.prototype.end=function(a){var d,f,b=this._buff,c=b.length,e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(d=0;c>d;d+=1)e[d>>2]|=b.charCodeAt(d)<<(d%4<<3);return this._finish(e,c),f=a?this._state:o(this._state),this.reset(),f},q.prototype._finish=function(a,b){var d,e,f,c=b;if(a[c>>2]|=128<<(c%4<<3),c>55)for(h(this._state,a),c=0;16>c;c+=1)a[c]=0;d=8*this._length,d=d.toString(16).match(/(.*?)(.{0,8})$/),e=parseInt(d[2],16),f=parseInt(d[1],16)||0,a[14]=e,a[15]=f,h(this._state,a)},q.prototype.reset=function(){return this._buff="",this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},q.prototype.destroy=function(){delete this._state,delete this._buff,delete this._length},q.hash=function(a,b){/[\u0080-\uFFFF]/.test(a)&&(a=unescape(encodeURIComponent(a)));var c=k(a);return b?c:o(c)},q.hashBinary=function(a,b){var c=k(a);return b?c:o(c)},q.ArrayBuffer=function(){this.reset()},q.ArrayBuffer.prototype.append=function(a){var d,b=this._concatArrayBuffer(this._buff,a),c=b.length;for(this._length+=a.byteLength,d=64;c>=d;d+=64)h(this._state,j(b.subarray(d-64,d)));return this._buff=c>d-64?b.subarray(d-64):new Uint8Array(0),this
},q.ArrayBuffer.prototype.end=function(a){var e,f,b=this._buff,c=b.length,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;c>e;e+=1)d[e>>2]|=b[e]<<(e%4<<3);return this._finish(d,c),f=a?this._state:o(this._state),this.reset(),f},q.ArrayBuffer.prototype._finish=q.prototype._finish,q.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},q.ArrayBuffer.prototype.destroy=q.prototype.destroy,q.ArrayBuffer.prototype._concatArrayBuffer=function(a,b){var c=a.length,d=new Uint8Array(c+b.byteLength);return d.set(a),d.set(new Uint8Array(b),c),d},q.ArrayBuffer.hash=function(a,b){var c=l(new Uint8Array(a));return b?c:o(c)},a.register("Md5",{init:function(){},loadFromBlob:function(a){var j,k,b=a.getSource(),c=2097152,d=Math.ceil(b.size/c),e=0,f=this.owner,g=new q.ArrayBuffer,h=this,i=b.mozSlice||b.webkitSlice||b.slice;k=new FileReader,j=function(){var l,m;l=e*c,m=Math.min(l+c,b.size),k.onload=function(b){g.append(b.target.result),f.trigger("progress",{total:a.size,loaded:m})},k.onloadend=function(){k.onloadend=k.onload=null,++e<d?setTimeout(j,1):setTimeout(function(){f.trigger("load"),h.result=g.end(),j=a=b=g=null,f.trigger("complete")},50)},k.readAsArrayBuffer(i.call(b,l,m))},j()},getResult:function(){return this.result}})}),b("runtime/flash/runtime",["base","runtime/runtime","runtime/compbase"],function(b,c,d){function h(){var a;try{a=navigator.plugins["Shockwave Flash"],a=a.description}catch(b){try{a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(c){a="0.0"}}return a=a.match(/\d+/g),parseFloat(a[0]+"."+a[1],10)}function i(){function k(a,b){var d,f,c=a.type||a;d=c.split("::"),f=d[0],c=d[1],"Ready"===c&&f===i.uid?i.trigger("ready"):e[f]&&e[f].trigger(c.toLowerCase(),a,b)}var d={},e={},h=this.destroy,i=this,j=b.guid("webuploader_");c.apply(i,arguments),i.type=f,i.exec=function(a,c){var k,f=this,h=f.uid,j=b.slice(arguments,2);return e[h]=f,g[a]&&(d[h]||(d[h]=new g[a](f,i)),k=d[h],k[c])?k[c].apply(k,j):i.flashExec.apply(f,arguments)},a[j]=function(){var a=arguments;setTimeout(function(){k.apply(null,a)},1)},this.jsreciver=j,this.destroy=function(){return h&&h.apply(this,arguments)},this.flashExec=function(a,c){var d=i.getFlash(),e=b.slice(arguments,2);return d.exec(this.uid,a,c,e)}}var e=b.$,f="flash",g={};return b.inherits(c,{constructor:i,init:function(){var d,a=this.getContainer(),c=this.options;a.css({position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"}),d='<object id="'+this.uid+'" type="application/'+'x-shockwave-flash" data="'+c.swf+'" ',b.browser.ie&&(d+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),d+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+c.swf+'" />'+'<param name="flashvars" value="uid='+this.uid+"&jsreciver="+this.jsreciver+'" />'+'<param name="wmode" value="transparent" />'+'<param name="allowscriptaccess" value="always" />'+"</object>",a.html(d)},getFlash:function(){return this._flash?this._flash:(this._flash=e("#"+this.uid).get(0),this._flash)}}),i.register=function(a,c){return c=g[a]=b.inherits(d,e.extend({flashExec:function(){var a=this.owner,b=this.getRuntime();return b.flashExec.apply(a,arguments)}},c))},h()>=11.4&&c.addRuntime(f,i),i}),b("runtime/flash/filepicker",["base","runtime/flash/runtime"],function(a,b){var c=a.$;return b.register("FilePicker",{init:function(a){var d,e,b=c.extend({},a);for(d=b.accept&&b.accept.length,e=0;d>e;e++)b.accept[e].title||(b.accept[e].title="Files");delete b.button,delete b.id,delete b.container,this.flashExec("FilePicker","init",b)},destroy:function(){this.flashExec("FilePicker","destroy")}})}),b("runtime/flash/image",["runtime/flash/runtime"],function(a){return a.register("Image",{loadFromBlob:function(a){var b=this.owner;b.info()&&this.flashExec("Image","info",b.info()),b.meta()&&this.flashExec("Image","meta",b.meta()),this.flashExec("Image","loadFromBlob",a.uid)}})}),b("runtime/flash/transport",["base","runtime/flash/runtime","runtime/client"],function(b,c,d){var e=b.$;return c.register("Transport",{init:function(){this._status=0,this._response=null,this._responseJson=null},send:function(){var g,a=this.owner,b=this.options,c=this._initAjax(),d=a._blob,f=b.server;c.connectRuntime(d.ruid),b.sendAsBinary?(f+=(/\?/.test(f)?"&":"?")+e.param(a._formData),g=d.uid):(e.each(a._formData,function(a,b){c.exec("append",a,b)}),c.exec("appendBlob",b.fileVal,d.uid,b.filename||a._formData.name||"")),this._setRequestHeader(c,b.headers),c.exec("send",{method:b.method,url:f,forceURLStream:b.forceURLStream,mimeType:"application/octet-stream"},g)},getStatus:function(){return this._status},getResponse:function(){return this._response||""},getResponseAsJson:function(){return this._responseJson},abort:function(){var a=this._xhr;a&&(a.exec("abort"),a.destroy(),this._xhr=a=null)},destroy:function(){this.abort()},_initAjax:function(){var b=this,c=new d("XMLHttpRequest");return c.on("uploadprogress progress",function(a){var c=a.loaded/a.total;return c=Math.min(1,Math.max(0,c)),b.trigger("progress",c)}),c.on("load",function(){var g,d=c.exec("getStatus"),e=!1,f="";if(c.off(),b._xhr=null,d>=200&&300>d?e=!0:d>=500&&600>d?(e=!0,f="server"):f="http",e){b._response=c.exec("getResponse"),b._response=decodeURIComponent(b._response);try{b._responseJson=c.exec("getResponseAsJson")}catch(h){g=a.JSON&&a.JSON.parse||function(a){try{return new Function("return "+a).call()}catch(b){return{}}},b._responseJson=b._response?g(b._response):{}}}return c.destroy(),c=null,f?b.trigger("error",f):b.trigger("load")}),c.on("error",function(){c.off(),b._xhr=null,b.trigger("error","http")}),b._xhr=c,c},_setRequestHeader:function(a,b){e.each(b,function(b,c){a.exec("setRequestHeader",b,c)})}})}),b("runtime/flash/blob",["runtime/flash/runtime","lib/blob"],function(a,b){return a.register("Blob",{slice:function(a,c){var d=this.flashExec("Blob","slice",a,c);return new b(d.uid,d)}})}),b("runtime/flash/md5",["runtime/flash/runtime"],function(a){return a.register("Md5",{init:function(){},loadFromBlob:function(a){return this.flashExec("Md5","loadFromBlob",a.uid)}})}),b("preset/all",["base","widgets/filednd","widgets/filepaste","widgets/filepicker","widgets/image","widgets/queue","widgets/runtime","widgets/upload","widgets/validator","widgets/md5","runtime/html5/blob","runtime/html5/dnd","runtime/html5/filepaste","runtime/html5/filepicker","runtime/html5/imagemeta/exif","runtime/html5/androidpatch","runtime/html5/image","runtime/html5/transport","runtime/html5/md5","runtime/flash/filepicker","runtime/flash/image","runtime/flash/transport","runtime/flash/blob","runtime/flash/md5"],function(a){return a}),b("widgets/log",["base","uploader","widgets/widget"],function(a,b){function h(a){var b=c.extend({},g,a),e=d.replace(/^(.*)\?/,"$1"+c.param(b)),f=new Image;f.src=e}var g,c=a.$,d=" http://static.tieba.baidu.com/tb/pms/img/st.gif??",e=(location.hostname||location.host||"protected").toLowerCase(),f=e&&/baidu/i.exec(e);if(f)return g={dv:3,master:"webuploader",online:/test/.exec(e)?0:1,module:"",product:e,type:0},b.register({name:"log",init:function(){var a=this.owner,b=0,c=0;a.on("error",function(a){h({type:2,c_error_code:a})}).on("uploadError",function(a,b){h({type:2,c_error_code:"UPLOAD_ERROR",c_reason:""+b})}).on("uploadComplete",function(a){b++,c+=a.size}).on("uploadFinished",function(){h({c_count:b,c_size:c}),b=c=0}),h({c_usage:1})}})}),b("webuploader",["preset/all","widgets/log"],function(a){return a}),c("webuploader")});

/*<script src="${ctxStatic}/org/tinygroup/webupload/lib/jquery.webuploader.js"></script>*/
!function(a,b,c){function n(b,c,d,e,f){var i,j,k,g=a('<div id="'+d.id+'" class="file-item thumbnail filelist">'+'<img style="width:100px;height:100px" title="'+d.name+'" >'+"</div>"),h=g.find("img");g.data("file",d),b.settings.btns.length>0&&(i=a('<div class="file-panel"><span class="cancel">删除</span></div>').appendTo(g),e||(o(b,c.find("div.file-item").data("file")),c.html("")),d.rotation=0,g.on("mouseenter",function(){i.stop().animate({height:30})}),g.on("mouseleave",function(){i.stop().animate({height:0})}),i.on("click","span",function(){var c=a(this).index();switch(c){case 0:return o(b,d),void 0}})),f?h.attr("src",f):(j=100,k=100,b.uploader.makeThumb(d,function(a,b){return a?(h.replaceWith("<span>不能预览</span>"),void 0):(h.attr("src",b),void 0)},j,k)),c.append(g)}function o(b,c){if(c){var d=a("#"+c.id);b.settings.isForce&&(d.attr("data-attid")||d.attr("data-newFile"))&&m.fnDelFile({id:d.attr("data-attId"),newFileName:d.attr("data-newFile"),type:b.settings.attachment.type}),c.self||b.uploader.removeFile(c),d.off().find(".file-panel").off().end().remove()}}var d,e,l,m;Array.indexOf||(Array.prototype.indexOf=function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1}),d="fileUploader",e="thelist",l={acceptExt:"gif,jpg,jpeg,bmp,png,GIF,JPG,JPEG,BMP,PNG",btns:["picker","ctlBtn"],btnsClass:["","btn btn-default"],btnsName:["选择文件","开始上传"],isMul:!0,auto:!0,isForce:!0},m={url:{delAttachment:rootAdminPath+"/sys/attachment/delete?t="+(new Date).getTime(),findAttachment:rootAdminPath+"/sys/attachment/list?t="+(new Date).getTime(),saveAttachment:rootAdminPath+"/sys/attachment/save?t="+(new Date).getTime(),getPic:rootAdminPath+"/sys/attachment/getPic?t="+(new Date).getTime()},fnDelFile:function(a){Svc.AjaxJson.post(m.url.delAttachment,a)}},b.FileUploader=b.FileUploader||{},FileUploader=function(b,c){this.isCanVisible=!1,this.fileSize=0,this.$element=a(b),this.settings=a.extend({},l,c),this._defaults=l,this.settings.auto&&(this.settings=a.extend(this.settings,{btns:["picker"]}),this._defaults=a.extend(this._defaults,{btns:["picker"]})),c.btns&&0==c.btns.length&&(this.settings=a.extend(this.settings,{btns:[]}),this._defaults=a.extend(this._defaults,{btns:[]})),this._name=d,this.init(),this.initWebUploader(),this.registerEvents()},FileUploader.prototype={init:function(){var c,h,g,b=this,d=this._defaults,f=this._defaults.btns;b.r=c=parseInt(1e3*Math.random()),b.$fileListContainter=a('<div id="'+e+b.r+'" class="uploader-list"></div>').appendTo(b.$element),b.$operBtnsContanter=a('<div class="btns"></div>').appendTo(b.$element),g="",a.each(b.settings.btns,function(a,b){(h=d.btns.indexOf(b))>=0&&(g+=["<div id=",b+c,' class="',d.btnsClass[h],'"  style="margin-right:10px;vertical-align: top;">',d.btnsName[h],"</div>"].join(""))}),a(g).appendTo(b.$operBtnsContanter),b.$uploadBtn=a(f[1])},initWebUploader:function(){var h,b=this,d=b.$fileListContainter,e=b.$uploadBtn,f="pending",g={auto:!0,headers:{accept:"*/*"},accept:{extensions:b.settings.acceptExt,mimeTypes:"image/*"},swf:"Uploader.swf",server:m.url.saveAttachment,resize:!1,fileVal:"ajaxFile",pick:"#picker"+this.r,fileSingleSizeLimit:2097152,fileSizeLimit:209715200};b.settings.auto&&a.extend(g,{auto:b.settings.auto}),!b.settings.isMul&&a.extend(g,{fileNumLimit:1}),b.settings.attachment.fromId||(b.settings.attachment.fromId=c),h=WebUploader.create(a.extend({},g,{formData:b.settings.attachment})),b.uploader=h,h.on("beforeFileQueued",function(){b.settings.isForce||(this.options.formData.fromId="")}),h.on("fileQueued",function(a){n(b,d,a,b.settings.isMul)}),h.on("uploadProgress",function(b,c){var d=a("#"+b.id),e=d.find(".progress span");e.length||(e=a('<p class="progress"><span></span></p>').appendTo(d).find("span")),e.css("width",100*c+"%")}),h.on("uploadSuccess",function(b,c){var e,f,g,d=c.data;return 0==d?!1:(e=a("#"+b.id),e.attr("data-flag","1"),e.attr("data-newFile",d.newFileName),e.attr("data-oldFile",d.oldFileName),e.attr("data-attId",d.id?d.id:""),e.addClass("upload-state-done"),f=500,g=500,b._info&&(f=b._info.width,g=b._info.height),h.makeThumb(b,function(a,b){e.find("img").attr("data-src",b)},f,g),void 0)}),h.on("uploadError",function(b){var c=a("#"+b.id),d=c.find("div.error");d.length||(d=a('<div class="error"></div>').appendTo(c)),d.text("上传失败")}),h.on("all",function(b){"startUpload"===b?f="uploading":"stopUpload"===b?f="paused":"uploadFinished"===b&&(f="done",a(".form-actions input[type='button']").removeAttr("disabled")),"uploading"===f?(e.text("暂停上传"),a(".form-actions input[type='button']").attr("disabled","disabled")):e.text("开始上传")}),h.on("uploadComplete",function(b){a("#"+b.id).find(".progress").remove()}),h.onError=function(a){switch(a){case"F_DUPLICATE":layer.msg("不能同时上传文件相同文件");break;case"Q_EXCEED_NUM_LIMIT":layer.msg("已达允许上传文件数量");break;case"F_EXCEED_SIZE":layer.msg("单个文件超出2M");break;case"Q_EXCEED_SIZE_LIMIT":layer.msg("上传文件超出200M");break;case"Q_TYPE_DENIED":layer.msg("上传文件格式错误");break;default:layer.msg("错误: "+a)}},e.click(function(){"uploading"===f?h.stop():h.upload()}),b.settings.attachment.fromId&&b.loaderData()},loaderData:function(){var c=this;c.fileSize=0,_settings=c.settings,Svc.AjaxJson.post(m.url.findAttachment,_settings.attachment,function(b){b.length>0&&a.each(b,function(b,d){var g,e={},f=m.url.getPic+"&id="+d.id;return e.id="SELF"+c.r+"_WU_FILE_10000"+b,e.name=d.oldFileName,e.self=!0,n(c,c.$fileListContainter,e,c.settings.isMul,f),g=a("#"+e.id),g.attr("data-flag","1"),g.attr("data-newFile",d.newFileName),g.attr("data-oldFile",d.oldFileName),g.attr("data-attId",d.id?d.id:""),g.data("file",e),c.settings.btns.length>0&&g.addClass("upload-state-done"),c.settings.isMul?void 0:!1})})},registerEvents:function(){var b=this,c=b.$fileListContainter;c.delegate("div[data-flag='1'] img","click",function(){var b=c.find("div[data-flag='1'] img"),d={};d.activeImage=a(this).attr("data-src")?a(this).attr("data-src"):a(this).attr("src"),d.aData=b,LightBox&&LightBox.showImg(d)})},getUploadFiles:function(){var b=this,c=b.$fileListContainter.find("div[data-flag='1']"),d=[],e=[];return a.each(c,function(){var c=a(this);c.attr("data-attId")&&b.settings.isForce||(d.push(c.attr("data-oldFile")),e.push(c.attr("data-newFile")))}),{oldFileNames:d,newFileNames:e,fileType:b.settings.attachment.type}}}}(jQuery,window);


/*<script src="${ctxStatic}/org/tinygroup/tab/js/tab.js"></script>*/
jQuery.Huitab=function(a,b,c,d,e){var f=$(a);f.removeClass(c),$(a).eq(e).addClass(c),$(b).hide(),$(b).eq(e).show(),f.bind(d,function(){f.removeClass(c),$(this).addClass(c);var a=f.index(this);$(b).hide(),$(b).eq(a).show()})};

/*<script src="${ctxStatic}/org/tinygroup/bootstrapDate/js/daterangepicker.js"></script>*/
!function(a,b){var c=function(b,c,d){var e,f;this.parentEl="body",this.element=a(b),e='<div class="daterangepicker dropdown-menu"><div class="calendar left"></div><div class="calendar right"></div><div class="ranges"><div class="range_inputs"><div class="daterangepicker_start_input"><label for="daterangepicker_start"></label><input class="input-mini" type="text" name="daterangepicker_start" value="" disabled="disabled" /></div><div class="daterangepicker_end_input"><label for="daterangepicker_end"></label><input class="input-mini" type="text" name="daterangepicker_end" value="" disabled="disabled" /></div><button class="applyBtn" disabled="disabled"></button>&nbsp;<button class="cancelBtn"></button></div></div></div>',("object"!=typeof c||null===c)&&(c={}),this.parentEl="object"==typeof c&&c.parentEl&&a(c.parentEl).length||a(this.parentEl),this.container=a(e).appendTo(this.parentEl),this.setOptions(c,d),f=this.container,a.each(this.buttonClasses,function(a,b){f.find("button").addClass(b)}),this.container.find(".daterangepicker_start_input label").html(this.locale.fromLabel),this.container.find(".daterangepicker_end_input label").html(this.locale.toLabel),this.applyClass.length&&this.container.find(".applyBtn").addClass(this.applyClass),this.cancelClass.length&&this.container.find(".cancelBtn").addClass(this.cancelClass),this.container.find(".applyBtn").html(this.locale.applyLabel),this.container.find(".cancelBtn").html(this.locale.cancelLabel),this.container.find(".calendar").on("click.daterangepicker",".prev",a.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",a.proxy(this.clickNext,this)).on("click.daterangepicker","td.available",a.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",a.proxy(this.enterDate,this)).on("mouseleave.daterangepicker","td.available",a.proxy(this.updateFormInputs,this)).on("change.daterangepicker","select.yearselect",a.proxy(this.updateMonthYear,this)).on("change.daterangepicker","select.monthselect",a.proxy(this.updateMonthYear,this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.ampmselect",a.proxy(this.updateTime,this)),this.container.find(".ranges").on("click.daterangepicker","button.applyBtn",a.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",a.proxy(this.clickCancel,this)).on("click.daterangepicker",".daterangepicker_start_input,.daterangepicker_end_input",a.proxy(this.showCalendars,this)).on("click.daterangepicker","li",a.proxy(this.clickRange,this)).on("mouseenter.daterangepicker","li",a.proxy(this.enterRange,this)).on("mouseleave.daterangepicker","li",a.proxy(this.updateFormInputs,this)),this.element.is("input")?this.element.on({"click.daterangepicker":a.proxy(this.show,this),"focus.daterangepicker":a.proxy(this.show,this),"keyup.daterangepicker":a.proxy(this.updateFromControl,this)}):this.element.on("click.daterangepicker",a.proxy(this.toggle,this))};c.prototype={constructor:c,setOptions:function(c,d){var e,f,g,h,i,j,k,l,m;if(this.startDate=b().startOf("day"),this.endDate=b().endOf("day"),this.minDate=!1,this.maxDate=!1,this.dateLimit=!1,this.showDropdowns=!1,this.showWeekNumbers=!1,this.timePicker=!1,this.timePickerIncrement=30,this.timePicker12Hour=!0,this.singleDatePicker=!1,this.ranges={},this.opens="right",this.element.hasClass("pull-right")&&(this.opens="left"),this.buttonClasses=["btn","btn-small"],this.applyClass="btn-success",this.cancelClass="btn-default",this.format="YYYY/MM/DD",this.separator=" - ",this.locale={applyLabel:"应用",cancelLabel:"取消",fromLabel:"开始",toLabel:"结束",weekLabel:"W",customRangeLabel:"自定义范围",daysOfWeek:b()._lang._weekdaysMin.slice(),monthNames:b()._lang._monthsShort.slice(),firstDay:0},this.cb=function(){},"string"==typeof c.format&&(this.format=c.format),"string"==typeof c.separator&&(this.separator=c.separator),"string"==typeof c.startDate&&(this.startDate=b(c.startDate,this.format)),"string"==typeof c.endDate&&(this.endDate=b(c.endDate,this.format)),"string"==typeof c.minDate&&(this.minDate=b(c.minDate,this.format)),"string"==typeof c.maxDate&&(this.maxDate=b(c.maxDate,this.format)),"object"==typeof c.startDate&&(this.startDate=b(c.startDate)),"object"==typeof c.endDate&&(this.endDate=b(c.endDate)),"object"==typeof c.minDate&&(this.minDate=b(c.minDate)),"object"==typeof c.maxDate&&(this.maxDate=b(c.maxDate)),"string"==typeof c.applyClass&&(this.applyClass=c.applyClass),"string"==typeof c.cancelClass&&(this.cancelClass=c.cancelClass),"object"==typeof c.dateLimit&&(this.dateLimit=c.dateLimit),"object"==typeof c.locale){if("object"==typeof c.locale.daysOfWeek&&(this.locale.daysOfWeek=c.locale.daysOfWeek.slice()),"object"==typeof c.locale.monthNames&&(this.locale.monthNames=c.locale.monthNames.slice()),"number"==typeof c.locale.firstDay)for(this.locale.firstDay=c.locale.firstDay,e=c.locale.firstDay;e>0;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),e--;"string"==typeof c.locale.applyLabel&&(this.locale.applyLabel=c.locale.applyLabel),"string"==typeof c.locale.cancelLabel&&(this.locale.cancelLabel=c.locale.cancelLabel),"string"==typeof c.locale.fromLabel&&(this.locale.fromLabel=c.locale.fromLabel),"string"==typeof c.locale.toLabel&&(this.locale.toLabel=c.locale.toLabel),"string"==typeof c.locale.weekLabel&&(this.locale.weekLabel=c.locale.weekLabel),"string"==typeof c.locale.customRangeLabel&&(this.locale.customRangeLabel=c.locale.customRangeLabel)}if("string"==typeof c.opens&&(this.opens=c.opens),"boolean"==typeof c.showWeekNumbers&&(this.showWeekNumbers=c.showWeekNumbers),"string"==typeof c.buttonClasses&&(this.buttonClasses=[c.buttonClasses]),"object"==typeof c.buttonClasses&&(this.buttonClasses=c.buttonClasses),"boolean"==typeof c.showDropdowns&&(this.showDropdowns=c.showDropdowns),"boolean"==typeof c.singleDatePicker&&(this.singleDatePicker=c.singleDatePicker),"boolean"==typeof c.timePicker&&(this.timePicker=c.timePicker),"number"==typeof c.timePickerIncrement&&(this.timePickerIncrement=c.timePickerIncrement),"boolean"==typeof c.timePicker12Hour&&(this.timePicker12Hour=c.timePicker12Hour),"undefined"==typeof c.startDate&&"undefined"==typeof c.endDate&&a(this.element).is("input[type=text]")&&(i=a(this.element).val(),j=i.split(this.separator),f=g=null,2==j.length?(f=b(j[0],this.format),g=b(j[1],this.format)):this.singleDatePicker&&(f=b(i,this.format),g=b(i,this.format)),null!==f&&null!==g&&(this.startDate=f,this.endDate=g)),"object"==typeof c.ranges){for(h in c.ranges)f=b(c.ranges[h][0]),g=b(c.ranges[h][1]),this.minDate&&f.isBefore(this.minDate)&&(f=b(this.minDate)),this.maxDate&&g.isAfter(this.maxDate)&&(g=b(this.maxDate)),this.minDate&&g.isBefore(this.minDate)||this.maxDate&&f.isAfter(this.maxDate)||(this.ranges[h]=[f,g]);k="<ul>";for(h in this.ranges)k+="<li>"+h+"</li>";k+="<li>"+this.locale.customRangeLabel+"</li>",k+="</ul>",this.container.find(".ranges ul").remove(),this.container.find(".ranges").prepend(k)}"function"==typeof d&&(this.cb=d),this.timePicker||(this.startDate=this.startDate.startOf("day"),this.endDate=this.endDate.endOf("day")),this.singleDatePicker?(this.opens="right",this.container.find(".calendar.right").show(),this.container.find(".calendar.left").hide(),this.container.find(".ranges").hide(),this.container.find(".calendar.right").hasClass("single")||this.container.find(".calendar.right").addClass("single")):(this.container.find(".calendar.right").removeClass("single"),this.container.find(".ranges").show()),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.oldChosenLabel=this.chosenLabel,this.leftCalendar={month:b([this.startDate.year(),this.startDate.month(),1,this.startDate.hour(),this.startDate.minute()]),calendar:[]},this.rightCalendar={month:b([this.endDate.year(),this.endDate.month(),1,this.endDate.hour(),this.endDate.minute()]),calendar:[]},"right"==this.opens&&(l=this.container.find(".calendar.left"),m=this.container.find(".calendar.right"),l.removeClass("left").addClass("right"),m.removeClass("right").addClass("left")),"undefined"!=typeof c.ranges||this.singleDatePicker||this.container.addClass("show-calendar"),this.container.addClass("opens"+this.opens),this.updateView(),this.updateCalendars()},setStartDate:function(a){"string"==typeof a&&(this.startDate=b(a,this.format)),"object"==typeof a&&(this.startDate=b(a)),this.timePicker||(this.startDate=this.startDate.startOf("day")),this.oldStartDate=this.startDate.clone(),this.updateView(),this.updateCalendars()},setEndDate:function(a){"string"==typeof a&&(this.endDate=b(a,this.format)),"object"==typeof a&&(this.endDate=b(a)),this.timePicker||(this.endDate=this.endDate.endOf("day")),this.oldEndDate=this.endDate.clone(),this.updateView(),this.updateCalendars()},updateView:function(){this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()),this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()),this.updateFormInputs()},updateFormInputs:function(){this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.format)),this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.format)),this.startDate.isSame(this.endDate)||this.startDate.isBefore(this.endDate)?this.container.find("button.applyBtn").removeAttr("disabled"):this.container.find("button.applyBtn").attr("disabled","disabled")},updateFromControl:function(){var a,c,d;this.element.is("input")&&this.element.val().length&&(a=this.element.val().split(this.separator),c=b(a[0],this.format),d=b(a[1],this.format),this.singleDatePicker&&(c=b(this.element.val(),this.format),d=c),d.isBefore(c)||(this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.startDate=c,this.endDate=d,this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.notify(),this.updateCalendars()))},notify:function(){this.updateView(),this.cb(this.startDate,this.endDate,this.chosenLabel)},move:function(){var b={top:0,left:0};this.parentEl.is("body")||(b={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()}),"left"==this.opens?(this.container.css({top:this.element.offset().top+this.element.outerHeight()-b.top,right:a(window).width()-this.element.offset().left-this.element.outerWidth()-b.left,left:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):(this.container.css({top:this.element.offset().top+this.element.outerHeight()-b.top,left:this.element.offset().left-b.left,right:"auto"}),this.container.offset().left+this.container.outerWidth()>a(window).width()&&this.container.css({left:"auto",right:0}))},toggle:function(){this.element.hasClass("active")?this.hide():this.show()},show:function(){this.element.addClass("active"),this.container.show(),this.move(),a(document).on("click.daterangepicker",a.proxy(this.outsideClick,this)),a(document).on("click.daterangepicker","[data-toggle=dropdown]",a.proxy(this.outsideClick,this)),this.element.trigger("show.daterangepicker",this)},outsideClick:function(b){var c=a(b.target);c.closest(this.element).length||c.closest(this.container).length||c.closest(".calendar-date").length||this.hide()},hide:function(){this.element.removeClass("active"),this.container.hide(),this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.notify(),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),a(document).off("click.daterangepicker",this.outsideClick),this.element.trigger("hide.daterangepicker",this)},enterRange:function(a){var c,b=a.target.innerHTML;b==this.locale.customRangeLabel?this.updateView():(c=this.ranges[b],this.container.find("input[name=daterangepicker_start]").val(c[0].format(this.format)),this.container.find("input[name=daterangepicker_end]").val(c[1].format(this.format)))},showCalendars:function(){this.container.addClass("show-calendar"),this.move()},hideCalendars:function(){this.container.removeClass("show-calendar")},updateInputText:function(){this.element.is("input")&&!this.singleDatePicker?this.element.val(this.startDate.format(this.format)+this.separator+this.endDate.format(this.format)):this.element.is("input")&&this.element.val(this.startDate.format(this.format))},clickRange:function(a){var c,b=a.target.innerHTML;this.chosenLabel=b,b==this.locale.customRangeLabel?this.showCalendars():(c=this.ranges[b],this.startDate=c[0],this.endDate=c[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.endOf("day")),this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()).hour(this.startDate.hour()).minute(this.startDate.minute()),this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()).hour(this.endDate.hour()).minute(this.endDate.minute()),this.updateCalendars(),this.updateInputText(),this.hideCalendars(),this.hide(),this.element.trigger("apply.daterangepicker",this))},clickPrev:function(b){var c=a(b.target).parents(".calendar");c.hasClass("left")?this.leftCalendar.month.subtract("month",1):this.rightCalendar.month.subtract("month",1),this.updateCalendars()},clickNext:function(b){var c=a(b.target).parents(".calendar");c.hasClass("left")?this.leftCalendar.month.add("month",1):this.rightCalendar.month.add("month",1),this.updateCalendars()},enterDate:function(b){var c=a(b.target).attr("data-title"),d=c.substr(1,1),e=c.substr(3,1),f=a(b.target).parents(".calendar");f.hasClass("left")?this.container.find("input[name=daterangepicker_start]").val(this.leftCalendar.calendar[d][e].format(this.format)):this.container.find("input[name=daterangepicker_end]").val(this.rightCalendar.calendar[d][e].format(this.format))},clickDate:function(c){var h,i,j,k,l,d=a(c.target).attr("data-title"),e=d.substr(1,1),f=d.substr(3,1),g=a(c.target).parents(".calendar");g.hasClass("left")?(h=this.leftCalendar.calendar[e][f],i=this.endDate,"object"==typeof this.dateLimit&&(j=b(h).add(this.dateLimit).startOf("day"),i.isAfter(j)&&(i=j))):(h=this.startDate,i=this.rightCalendar.calendar[e][f],"object"==typeof this.dateLimit&&(k=b(i).subtract(this.dateLimit).startOf("day"),h.isBefore(k)&&(h=k))),this.singleDatePicker&&g.hasClass("left")?i=h.clone():this.singleDatePicker&&g.hasClass("right")&&(h=i.clone()),g.find("td").removeClass("active"),h.isSame(i)||h.isBefore(i)?(a(c.target).addClass("active"),this.startDate=h,this.endDate=i,this.chosenLabel=this.locale.customRangeLabel):h.isAfter(i)&&(a(c.target).addClass("active"),l=this.endDate.diff(this.startDate),this.startDate=h,this.endDate=b(h).add("ms",l),this.chosenLabel=this.locale.customRangeLabel),this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()),this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()),this.updateCalendars(),i.endOf("day"),this.singleDatePicker&&this.clickApply()},clickApply:function(){this.updateInputText(),this.hide(),this.element.trigger("apply.daterangepicker",this)},clickCancel:function(){this.startDate=this.oldStartDate,this.endDate=this.oldEndDate,this.chosenLabel=this.oldChosenLabel,this.updateView(),this.updateCalendars(),this.hide(),this.element.trigger("cancel.daterangepicker",this)},updateMonthYear:function(b){var c=a(b.target).closest(".calendar").hasClass("left"),d=c?"left":"right",e=this.container.find(".calendar."+d),f=parseInt(e.find(".monthselect").val(),10),g=e.find(".yearselect").val();this[d+"Calendar"].month.month(f).year(g),this.updateCalendars()},updateTime:function(b){var h,i,j,c=a(b.target).closest(".calendar").hasClass("left"),d=c?"left":"right",e=this.container.find(".calendar."+d),f=parseInt(e.find(".hourselect").val(),10),g=parseInt(e.find(".minuteselect").val(),10);this.timePicker12Hour&&(h=e.find(".ampmselect").val(),"下午"===h&&12>f&&(f+=12),"上午"===h&&12===f&&(f=0)),c?(i=this.startDate.clone(),i.hour(f),i.minute(g),this.startDate=i,this.leftCalendar.month.hour(f).minute(g)):(j=this.endDate.clone(),j.hour(f),j.minute(g),this.endDate=j,this.rightCalendar.month.hour(f).minute(g)),this.updateCalendars()},updateCalendars:function(){var a,b,c;this.leftCalendar.calendar=this.buildCalendar(this.leftCalendar.month.month(),this.leftCalendar.month.year(),this.leftCalendar.month.hour(),this.leftCalendar.month.minute(),"left"),this.rightCalendar.calendar=this.buildCalendar(this.rightCalendar.month.month(),this.rightCalendar.month.year(),this.rightCalendar.month.hour(),this.rightCalendar.month.minute(),"right"),this.container.find(".calendar.left").html(this.renderCalendar(this.leftCalendar.calendar,this.startDate,this.minDate,this.maxDate)),this.container.find(".calendar.right").html(this.renderCalendar(this.rightCalendar.calendar,this.endDate,this.startDate,this.maxDate)),this.container.find(".ranges li").removeClass("active"),a=!0,b=0;for(c in this.ranges)this.timePicker?this.startDate.isSame(this.ranges[c][0])&&this.endDate.isSame(this.ranges[c][1])&&(a=!1,this.chosenLabel=this.container.find(".ranges li:eq("+b+")").addClass("active").html()):this.startDate.format("YYYY-MM-DD")==this.ranges[c][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[c][1].format("YYYY-MM-DD")&&(a=!1,this.chosenLabel=this.container.find(".ranges li:eq("+b+")").addClass("active").html()),b++;a&&(this.chosenLabel=this.container.find(".ranges li:last").addClass("active").html())},buildCalendar:function(a,c,d,e){var l,n,o,p,q,g=b([c,a,1]),h=b(g).subtract("month",1).month(),i=b(g).subtract("month",1).year(),j=b([i,h]).daysInMonth(),k=g.day(),m=[];for(l=0;6>l;l++)m[l]=[];for(n=j-k+this.locale.firstDay+1,n>j&&(n-=7),k==this.locale.firstDay&&(n=j-6),o=b([i,h,n,12,e]),l=0,p=0,q=0;42>l;l++,p++,o=b(o).add("hour",24))l>0&&0===p%7&&(p=0,q++),m[q][p]=o.clone().hour(d),o.hour(12);return m},renderDropdowns:function(a,b,c){var h,i,j,k,l,m,d=a.month(),e='<select class="monthselect">',f=!1,g=!1;for(h=0;12>h;h++)(!f||h>=b.month())&&(!g||h<=c.month())&&(e+="<option value='"+h+"'"+(h===d?" selected='selected'":"")+">"+this.locale.monthNames[h]+"</option>");for(e+="</select>",i=a.year(),j=c&&c.year()||i+5,k=b&&b.year()||i-50,l='<select class="yearselect">',m=k;j>=m;m++)l+='<option value="'+m+'"'+(m===i?' selected="selected"':"")+">"+m+"</option>";return l+="</select>",e+l},renderCalendar:function(b,c,d,e){var g,h,i,j,k,l,m,n,o,p,f='<div class="calendar-date">';for(f+='<table class="table-condensed">',f+="<thead>",f+="<tr>",this.showWeekNumbers&&(f+="<th></th>"),f+=!d||d.isBefore(b[1][1])?'<th class="prev available"><i class="fa fa-arrow-left icon-arrow-left glyphicon glyphicon-arrow-left"></i></th>':"<th></th>",g=this.locale.monthNames[b[1][1].month()]+b[1][1].format(" YYYY"),this.showDropdowns&&(g=this.renderDropdowns(b[1][1],d,e)),f+='<th colspan="5" class="month">'+g+"</th>",f+=!e||e.isAfter(b[1][1])?'<th class="next available"><i class="fa fa-arrow-right icon-arrow-right glyphicon glyphicon-arrow-right"></i></th>':"<th></th>",f+="</tr>",f+="<tr>",this.showWeekNumbers&&(f+='<th class="week">'+this.locale.weekLabel+"</th>"),a.each(this.locale.daysOfWeek,function(a,b){f+="<th>"+b+"</th>"}),f+="</tr>",f+="</thead>",f+="<tbody>",h=0;6>h;h++){for(f+="<tr>",this.showWeekNumbers&&(f+='<td class="week">'+b[h][0].week()+"</td>"),i=0;7>i;i++)j="available ",j+=b[h][i].month()==b[1][1].month()?"":"off",d&&b[h][i].isBefore(d)||e&&b[h][i].isAfter(e)?j=" off disabled ":b[h][i].format("YYYY-MM-DD")==c.format("YYYY-MM-DD")?(j+=" active ",b[h][i].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")&&(j+=" start-date "),b[h][i].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&(j+=" end-date ")):b[h][i]>=this.startDate&&b[h][i]<=this.endDate&&(j+=" in-range ",b[h][i].isSame(this.startDate)&&(j+=" start-date "),b[h][i].isSame(this.endDate)&&(j+=" end-date ")),k="r"+h+"c"+i,f+='<td class="'+j.replace(/\s+/g," ").replace(/^\s?(.*?)\s?$/,"$1")+'" data-title="'+k+'">'+b[h][i].date()+"</td>";f+="</tr>"}if(f+="</tbody>",f+="</table>",f+="</div>",this.timePicker){for(f+='<div class="calendar-time">',f+='<select class="hourselect">',m=0,n=23,o=c.hour(),this.timePicker12Hour&&(m=1,n=12,o>=12&&(o-=12),0===o&&(o=12)),l=m;n>=l;l++)f+=l==o?'<option value="'+l+'" selected="selected">'+l+"</option>":'<option value="'+l+'">'+l+"</option>";for(f+="</select> : ",f+='<select class="minuteselect">',l=0;60>l;l+=this.timePickerIncrement)p=l,10>p&&(p="0"+p),f+=l==c.minute()?'<option value="'+l+'" selected="selected">'+p+"</option>":'<option value="'+l+'">'+p+"</option>";f+="</select> ",this.timePicker12Hour&&(f+='<select class="ampmselect">',f+=c.hour()>=12?'<option value="上午">上午</option><option value="下午" selected="selected">下午</option>':'<option value="上午" selected="selected">上午</option><option value="下午">下午</option>',f+="</select>"),f+="</div>"}return f},remove:function(){this.container.remove(),this.element.off(".daterangepicker"),this.element.removeData("daterangepicker")}},a.fn.daterangepicker=function(b,d){return this.each(function(){var e=a(this);e.data("daterangepicker")&&e.data("daterangepicker").remove(),e.data("daterangepicker",new c(e,b,d))}),this}}(window.jQuery,window.moment);

/*<script src="${ctxStatic}/org/tinygroup/bootstrapDate/js/WdatePicker.js"></script>*/
var $dp,WdatePicker;!function(){function n(){var c,e;try{g[d],g.$dp=g.$dp||{}}catch(a){g=b,$dp=$dp||{}}c={win:b,$:function(a){return"string"==typeof a?b[d].getElementById(a):a},$D:function(a,b){return this.$DV(this.$(a).value,b)},$DV:function(a,b){var c,d,e;if(""!=a){if(this.dt=$dp.cal.splitDate(a,$dp.cal.dateFmt),b)for(c in b)void 0===this.dt[c]?this.errMsg="invalid property:"+c:(this.dt[c]+=b[c],"M"==c&&(d=b["M"]>0?1:0,e=new Date(this.dt["y"],this.dt["M"],0).getDate(),this.dt["d"]=Math.min(e+d,this.dt["d"])));if(this.dt.refresh())return this.dt}return""},show:function(){var c,e,a=g[d].getElementsByTagName("div"),b=1e5;for(c=0;c<a.length;c++)e=parseInt(a[c].style.zIndex),e>b&&(b=e);this.dd.style.zIndex=b+2,D(this.dd,"block"),D(this.dd.firstChild,"")},unbind:function(a){a=this.$(a),a.initcfg&&(p(a,"onclick",function(){B(a.initcfg)}),p(a,"onfocus",function(){B(a.initcfg)}))},hide:function(){D(this.dd,"none")},attachEvent:o};for(e in c)g.$dp[e]=c[e];$dp=g.$dp}function o(a,b,c,d){if(a.addEventListener){var e=b.replace(/on/,"");c._ieEmuEventHandler=function(a){return c(a)},a.addEventListener(e,c._ieEmuEventHandler,d)}else a.attachEvent(b,c)}function p(a,b,c){if(a.removeEventListener){var d=b.replace(/on/,"");c._ieEmuEventHandler=function(a){return c(a)},a.removeEventListener(d,c._ieEmuEventHandler,!1)}else a.detachEvent(b,c)}function q(a,b,c){if(typeof a!=typeof b)return!1;if("object"==typeof a){if(!c)for(var d in a){if("undefined"==typeof b[d])return!1;if(!q(a[d],b[d],!0))return!1}return!0}return"function"==typeof a&&"function"==typeof b?a.toString()==b.toString():a==b}function r(){var a,c,g,e=b[d][f]("script");for(g=0;g<e.length&&(a=e[g].getAttribute("src")||"",a=a.substr(0,a.toLowerCase().indexOf("wdatepicker.js")),c=a.lastIndexOf("/"),c>0&&(a=a.substring(0,c+1)),!a);g++);return a}function t(a){var b,c,e,h,i;for(a=a||g,b=0,c=0;a!=g;){for(e=a.parent[d][f]("iframe"),h=0;h<e.length;h++)try{if(e[h].contentWindow==a){i=u(e[h]),b+=i.left,c+=i.top;break}}catch(j){}a=a.parent}return{leftM:b,topM:c}}function u(a){var c,d,e,f,g,h,i,j,l;if(a.getBoundingClientRect)return a.getBoundingClientRect();if(c={ROOT_TAG:/^body|html$/i,OP_SCROLL:/^(?:inline|table-row)$/i},d=!1,e=null,f=a.offsetTop,g=a.offsetLeft,h=a.offsetWidth,i=a.offsetHeight,j=a.offsetParent,j!=a)for(;j;)g+=j.offsetLeft,f+=j.offsetTop,"fixed"==C(j,"position").toLowerCase()?d=!0:"body"==j.tagName.toLowerCase()&&(e=j.ownerDocument.defaultView),j=j.offsetParent;for(j=a.parentNode;j.tagName&&!c.ROOT_TAG.test(j.tagName);)(j.scrollTop||j.scrollLeft)&&(c.OP_SCROLL.test(D(j))||k&&"visible"===j.style.overflow||(g-=j.scrollLeft,f-=j.scrollTop)),j=j.parentNode;return d||(l=w(e),g-=l.left,f-=l.top),h+=g,i+=f,{left:g,top:f,right:h,bottom:i}}function v(a){a=a||g;var b=a[d],c=a.innerWidth?a.innerWidth:b[e]&&b[e].clientWidth?b[e].clientWidth:b.body.offsetWidth,f=a.innerHeight?a.innerHeight:b[e]&&b[e].clientHeight?b[e].clientHeight:b.body.offsetHeight;return{width:c,height:f}}function w(a){a=a||g;var b=a[d],c=b[e],f=b.body;return b=c&&null!=c.scrollTop&&(c.scrollTop>f.scrollTop||c.scrollLeft>f.scrollLeft)?c:f,{top:b.scrollTop,left:b.scrollLeft}}function x(a){try{var b=a?a.srcElement||a.target:null;$dp.cal&&!$dp.eCont&&$dp.dd&&b!=$dp.el&&"block"==$dp.dd.style.display&&$dp.cal.close()}catch(a){}}function y(){$dp.status=2}function B(e,f){function p(){return i&&g!=b&&"complete"!=g[d].readyState?!1:!0}function r(){if(j){for(func=r.caller;null!=func;){var a=func.arguments[0];if(a&&(a+"").indexOf("Event")>=0)return a;func=func.caller}return null}return event}var h,k,l;if($dp){n(),h={};for(k in e)h[k]=e[k];for(k in a)"$"!=k.substring(0,1)&&void 0===h[k]&&(h[k]=a[k]);if(f){if(!p())return A=A||setInterval(function(){"complete"==g[d].readyState&&clearInterval(A),B(null,!0)},50),void 0;if(0!=$dp.status)return;$dp.status=1,h.el=c,E(h,!0)}else if(h.eCont)h.eCont=$dp.$(h.eCont),h.el=c,h.autoPickDate=!0,h.qsEnabled=!1,E(h);else{if(a.$preLoad&&2!=$dp.status)return;if(l=r(),(b.event===l||l)&&(h.srcEl=l.srcElement||l.target,l.cancelBubble=!0),h.el=h.el=$dp.$(h.el||h.srcEl),!h.el||h.el["My97Mark"]===!0||h.el.disabled||$dp.dd&&"none"!=D($dp.dd)&&"-970px"!=$dp.dd.style.left){try{h.el["My97Mark"]&&(h.el["My97Mark"]=!1)}catch(m){}return}l&&1==h.el.nodeType&&!q(h.el.initcfg,e)&&($dp.unbind(h.el),o(h.el,"focus"==l.type?"onclick":"onfocus",function(){B(e)}),h.el.initcfg=e),E(h)}}}function C(a,b){return a.currentStyle?a.currentStyle[b]:document.defaultView.getComputedStyle(a,!1)[b]}function D(a,b){if(a){if(null==b)return C(a,"display");a.style.display=b}}function E(e,f){function k(b,c){function o(){var g,h,a=contextPath+"/static/org/tinygroup/bootstrapDate/",d=c.getRealLang();for(b.lang=d.name,b.skin=c.skin,g=["<head><script>","","var doc=document, $d, $dp, $cfg=doc.cfg, $pdp = parent.$dp, $dt, $tdt, $sdt, $lastInput, $IE=$pdp.ie, $FF = $pdp.ff,$OPERA=$pdp.opera, $ny, $cMark = false;","if($cfg.eCont){$dp = {};for(var p in $pdp)$dp[p]=$pdp[p];}else{$dp=$pdp;};for(var p in $cfg){$dp[p]=$cfg[p];}","doc.oncontextmenu=function(){try{$c._fillQS(!$dp.has.d,1);showB($d.qsDivSel);}catch(e){};return false;};","</script>"],f&&(g[1]='document.domain="'+e+'";'),h=0;h<j.length;h++)j[h].name==c.skin&&g.push('<link rel="stylesheet" type="text/css" href="'+a+'css/datepicker.css" charset="'+j[h].charset+'"/>');g.push('<script src="'+a+'js/calendar.js"></script>'),g.push('</head><body leftmargin="0" topmargin="0" tabindex=0></body></html>'),g.push("<script>var t;t=t||setInterval(function(){if(doc.ready){new My97DP();$cfg.onload();$c.autoSize();$cfg.setPos($dp);clearInterval(t);}},20);</script>"),c.setPos=l,c.onload=y,k.write("<html>"),k.cfg=c,k.write(g.join("")),k.close()}var k,j,n,e=g[d].domain,f=!1,h='<iframe hideFocus=true width=9 height=7 frameborder=0 border=0 scrolling=no src="about:blank"></iframe>';b.innerHTML=h,a.$langList,j=a.$skinList;try{k=b.lastChild.contentWindow[d]}catch(m){return f=!0,b.removeChild(b.lastChild),n=g[d].createElement("iframe"),n.hideFocus=!0,n.frameBorder=0,n.scrolling="no",n.src="javascript:(function(){var d=document;d.open();d.domain='"+e+"';})()",b.appendChild(n),setTimeout(function(){k=b.lastChild.contentWindow[d],o()},97),void 0}o()}function l(a){var h,j,k,l,m,n,o,d=a.position.left,e=a.position.top,f=a.el;f!=c&&(f==a.srcEl||"none"!=D(f)&&"hidden"!=f.type||(f=a.srcEl),h=u(f),j=t(b),k=v(g),l=w(g),m=$dp.dd.offsetHeight,n=$dp.dd.offsetWidth,isNaN(e)&&(e=0),j.topM+h.bottom+m>k.height&&j.topM+h.top-m>0?e+=l.top+j.topM+h.top-m-2:(e+=l.top+j.topM+h.bottom,o=e-l.top+m-k.height,o>0&&(e-=o)),isNaN(d)&&(d=0),d+=l.left+Math.min(j.leftM+h.left,k.width-n-5)-(i?2:0),a.dd.style.top=e+"px",a.dd.style.left=d+"px")}var j,h=e.el?e.el.nodeName:"INPUT";if(f||e.eCont||new RegExp(/input|textarea|div|span|p|a/gi).test(h)){if(e.elProp="INPUT"==h?"value":"innerHTML","auto"==e.lang&&(e.lang=i?navigator.browserLanguage.toLowerCase():navigator.language.toLowerCase()),!e.eCont)for(j in e)$dp[j]=e[j];!$dp.dd||e.eCont||$dp.dd&&(e.getRealLang().name!=$dp.dd.lang||e.skin!=$dp.dd.skin)?e.eCont?k(e.eCont,e):($dp.dd=g[d].createElement("DIV"),$dp.dd.style.cssText="position:absolute",g[d].body.appendChild($dp.dd),k($dp.dd,e),f?$dp.dd.style.left=$dp.dd.style.top="-970px":($dp.show(),l($dp))):$dp.cal&&($dp.show(),$dp.cal.init(),$dp.eCont||l($dp))}}var g,h,i,j,k,b,c,d,e,f,l,A,a={$langList:[{name:"zh-cn",charset:"gb2312"}],$skinList:[{name:"default",charset:"gb2312"}],$wdate:!0,$crossFrame:!0,$preLoad:!1,$dpPath:"",doubleCalendar:!1,enableKeyboard:!0,enableInputMask:!0,autoUpdateOnChanged:null,weekMethod:"ISO8601",position:{},lang:"auto",skin:"default",dateFmt:"yyyy-MM-dd",realDateFmt:"yyyy-MM-dd",realTimeFmt:"HH:mm:ss",realFullFmt:"%Date %Time",minDate:"1900-01-01 00:00:00",maxDate:"2099-12-31 23:59:59",startDate:"",alwaysUseStartDate:!1,yearOffset:1911,firstDayOfWeek:0,isShowWeek:!1,highLineWeekDay:!0,isShowClear:!0,isShowToday:!0,isShowOK:!0,isShowOthers:!0,readOnly:!1,errDealMode:0,autoPickDate:null,qsEnabled:!0,autoShowQS:!1,opposite:!1,hmsMenuCfg:{H:[1,6],m:[5,6],s:[15,4]},specialDates:null,specialDays:null,disabledDates:null,disabledDays:null,onpicking:null,onpicked:null,onclearing:null,oncleared:null,ychanging:null,ychanged:null,Mchanging:null,Mchanged:null,dchanging:null,dchanged:null,Hchanging:null,Hchanged:null,mchanging:null,mchanged:null,schanging:null,schanged:null,eCont:null,vel:null,elProp:"",errMsg:"",quickSel:[],has:{},getRealLang:function(){var c,b=a.$langList;for(c=0;c<b.length;c++)if(b[c].name==this.lang)return b[c];return b[0]}};if(WdatePicker=B,b=window,c={innerHTML:""},d="document",e="documentElement",f="getElementsByTagName",l=navigator.appName,"Microsoft Internet Explorer"==l?i=!0:"Opera"==l?k=!0:j=!0,h=a.$dpPath||r(),g=b,a.$crossFrame)try{for(;g.parent!=g&&0==g.parent[d][f]("frameset").length;)g=g.parent}catch(m){}g.$dp||(g.$dp={ff:j,ie:i,opera:k,status:0,defMinDate:a.minDate,defMaxDate:a.maxDate}),n(),a.$preLoad&&0==$dp.status&&o(b,"onload",function(){B(null,!0)}),b[d].docMD||(o(b[d],"onmousedown",x,!0),b[d].docMD=!0),g[d].docMD||(o(g[d],"onmousedown",x,!0),g[d].docMD=!0),o(b,"onunload",function(){$dp.dd&&D($dp.dd,"none")})}();

/*<script src="${ctxStatic}/org/tinygroup/select2/js/select2.min.js"></script>*/
/*! Select2 4.0.0-rc.2 | https://github.com/select2/select2/blob/master/LICENSE.md */!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){var b=function(){if(a&&a.fn&&a.fn.select2&&a.fn.select2.amd)var b=a.fn.select2.amd;var b;return function(){if(!b||!b.requirejs){b?c=b:b={};var a,c,d;!function(b){function e(a,b){return u.call(a,b)}function f(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=b&&b.split("/"),o=s.map,p=o&&o["*"]||{};if(a&&"."===a.charAt(0))if(b){for(n=n.slice(0,n.length-1),a=a.split("/"),g=a.length-1,s.nodeIdCompat&&w.test(a[g])&&(a[g]=a[g].replace(w,"")),a=n.concat(a),k=0;k<a.length;k+=1)if(m=a[k],"."===m)a.splice(k,1),k-=1;else if(".."===m){if(1===k&&(".."===a[2]||".."===a[0]))break;k>0&&(a.splice(k-1,2),k-=2)}a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((n||p)&&o){for(c=a.split("/"),k=c.length;k>0;k-=1){if(d=c.slice(0,k).join("/"),n)for(l=n.length;l>0;l-=1)if(e=o[n.slice(0,l).join("/")],e&&(e=e[d])){f=e,h=k;break}if(f)break;!i&&p&&p[d]&&(i=p[d],j=k)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join("/"))}return a}function g(a,c){return function(){return n.apply(b,v.call(arguments,0).concat([a,c]))}}function h(a){return function(b){return f(b,a)}}function i(a){return function(b){q[a]=b}}function j(a){if(e(r,a)){var c=r[a];delete r[a],t[a]=!0,m.apply(b,c)}if(!e(q,a)&&!e(t,a))throw new Error("No "+a);return q[a]}function k(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function l(a){return function(){return s&&s.config&&s.config[a]||{}}}var m,n,o,p,q={},r={},s={},t={},u=Object.prototype.hasOwnProperty,v=[].slice,w=/\.js$/;o=function(a,b){var c,d=k(a),e=d[0];return a=d[1],e&&(e=f(e,b),c=j(e)),e?a=c&&c.normalize?c.normalize(a,h(b)):f(a,b):(a=f(a,b),d=k(a),e=d[0],a=d[1],e&&(c=j(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},p={require:function(a){return g(a)},exports:function(a){var b=q[a];return"undefined"!=typeof b?b:q[a]={}},module:function(a){return{id:a,uri:"",exports:q[a],config:l(a)}}},m=function(a,c,d,f){var h,k,l,m,n,s,u=[],v=typeof d;if(f=f||a,"undefined"===v||"function"===v){for(c=!c.length&&d.length?["require","exports","module"]:c,n=0;n<c.length;n+=1)if(m=o(c[n],f),k=m.f,"require"===k)u[n]=p.require(a);else if("exports"===k)u[n]=p.exports(a),s=!0;else if("module"===k)h=u[n]=p.module(a);else if(e(q,k)||e(r,k)||e(t,k))u[n]=j(k);else{if(!m.p)throw new Error(a+" missing "+k);m.p.load(m.n,g(f,!0),i(k),{}),u[n]=q[k]}l=d?d.apply(q[a],u):void 0,a&&(h&&h.exports!==b&&h.exports!==q[a]?q[a]=h.exports:l===b&&s||(q[a]=l))}else a&&(q[a]=d)},a=c=n=function(a,c,d,e,f){if("string"==typeof a)return p[a]?p[a](c):j(o(a,c).f);if(!a.splice){if(s=a,s.deps&&n(s.deps,s.callback),!c)return;c.splice?(a=c,c=d,d=null):a=b}return c=c||function(){},"function"==typeof d&&(d=e,e=f),e?m(b,a,c,d):setTimeout(function(){m(b,a,c,d)},4),n},n.config=function(a){return n(a)},a._defined=q,d=function(a,b,c){b.splice||(c=b,b=[]),e(q,a)||e(r,a)||(r[a]=[a,b,c])},d.amd={jQuery:!0}}(),b.requirejs=a,b.require=c,b.define=d}}(),b.define("almond",function(){}),b.define("jquery",[],function(){var b=a||$;return null==b&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),b}),b.define("select2/utils",["jquery"],function(a){function b(a){var b=a.prototype,c=[];for(var d in b){var e=b[d];"function"==typeof e&&"constructor"!==d&&c.push(d)}return c}var c={};c.Extend=function(a,b){function c(){this.constructor=a}var d={}.hasOwnProperty;for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},c.Decorate=function(a,c){function d(){var b=Array.prototype.unshift,d=c.prototype.constructor.length,e=a.prototype.constructor;d>0&&(b.call(arguments,a.prototype.constructor),e=c.prototype.constructor),e.apply(this,arguments)}function e(){this.constructor=d}var f=b(c),g=b(a);c.displayName=a.displayName,d.prototype=new e;for(var h=0;h<g.length;h++){var i=g[h];d.prototype[i]=a.prototype[i]}for(var j=(function(a){var b=function(){};a in d.prototype&&(b=d.prototype[a]);var e=c.prototype[a];return function(){var a=Array.prototype.unshift;return a.call(arguments,b),e.apply(this,arguments)}}),k=0;k<f.length;k++){var l=f[k];d.prototype[l]=j(l)}return d};var d=function(){this.listeners={}};return d.prototype.on=function(a,b){this.listeners=this.listeners||{},a in this.listeners?this.listeners[a].push(b):this.listeners[a]=[b]},d.prototype.trigger=function(a){var b=Array.prototype.slice;this.listeners=this.listeners||{},a in this.listeners&&this.invoke(this.listeners[a],b.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},d.prototype.invoke=function(a,b){for(var c=0,d=a.length;d>c;c++)a[c].apply(this,b)},c.Observable=d,c.generateChars=function(a){for(var b="",c=0;a>c;c++){var d=Math.floor(36*Math.random());b+=d.toString(36)}return b},c.bind=function(a,b){return function(){a.apply(b,arguments)}},c._convertData=function(a){for(var b in a){var c=b.split("-"),d=a;if(1!==c.length){for(var e=0;e<c.length;e++){var f=c[e];f=f.substring(0,1).toLowerCase()+f.substring(1),f in d||(d[f]={}),e==c.length-1&&(d[f]=a[b]),d=d[f]}delete a[b]}}return a},c.hasScroll=function(b,c){var d=a(c),e=c.style.overflowX,f=c.style.overflowY;return e!==f||"hidden"!==f&&"visible"!==f?"scroll"===e||"scroll"===f?!0:d.innerHeight()<c.scrollHeight||d.innerWidth()<c.scrollWidth:!1},c.escapeMarkup=function(a){var b={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof a?a:String(a).replace(/[&<>"'\/\\]/g,function(a){return b[a]})},c}),b.define("select2/results",["jquery","./utils"],function(a,b){function c(a,b,d){this.$element=a,this.data=d,this.options=b,c.__super__.constructor.call(this)}return b.Extend(c,b.Observable),c.prototype.render=function(){var b=a('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&b.attr("aria-multiselectable","true"),this.$results=b,b},c.prototype.clear=function(){this.$results.empty()},c.prototype.displayMessage=function(b){var c=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var d=a('<li role="treeitem" class="select2-results__option"></li>'),e=this.options.get("translations").get(b.message);d.append(c(e(b.args))),this.$results.append(d)},c.prototype.append=function(a){this.hideLoading();var b=[];if(null==a.results||0===a.results.length)return void(0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"}));a.results=this.sort(a.results);for(var c=0;c<a.results.length;c++){var d=a.results[c],e=this.option(d);b.push(e)}this.$results.append(b)},c.prototype.position=function(a,b){var c=b.find(".select2-results");c.append(a)},c.prototype.sort=function(a){var b=this.options.get("sorter");return b(a)},c.prototype.setClasses=function(){var b=this;this.data.current(function(c){var d=a.map(c,function(a){return a.id.toString()}),e=b.$results.find(".select2-results__option[aria-selected]");e.each(function(){var b=a(this),c=a.data(this,"data"),e=""+c.id;null!=c.element&&c.element.selected||null==c.element&&a.inArray(e,d)>-1?b.attr("aria-selected","true"):b.attr("aria-selected","false")});var f=e.filter("[aria-selected=true]");f.length>0?f.first().trigger("mouseenter"):e.first().trigger("mouseenter")})},c.prototype.showLoading=function(a){this.hideLoading();var b=this.options.get("translations").get("searching"),c={disabled:!0,loading:!0,text:b(a)},d=this.option(c);d.className+=" loading-results",this.$results.prepend(d)},c.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},c.prototype.option=function(b){var c=document.createElement("li");c.className="select2-results__option";var d={role:"treeitem","aria-selected":"false"};b.disabled&&(delete d["aria-selected"],d["aria-disabled"]="true"),null==b.id&&delete d["aria-selected"],null!=b._resultId&&(c.id=b._resultId),b.title&&(c.title=b.title),b.children&&(d.role="group",d["aria-label"]=b.text,delete d["aria-selected"]);for(var e in d){var f=d[e];c.setAttribute(e,f)}if(b.children){var g=a(c),h=document.createElement("strong");h.className="select2-results__group";{a(h)}this.template(b,h);for(var i=[],j=0;j<b.children.length;j++){var k=b.children[j],l=this.option(k);i.push(l)}var m=a("<ul></ul>",{"class":"select2-results__options select2-results__options--nested"});m.append(i),g.append(h),g.append(m)}else this.template(b,c);return a.data(c,"data",b),c},c.prototype.bind=function(b){var c=this,d=b.id+"-results";this.$results.attr("id",d),b.on("results:all",function(a){c.clear(),c.append(a.data),b.isOpen()&&c.setClasses()}),b.on("results:append",function(a){c.append(a.data),b.isOpen()&&c.setClasses()}),b.on("query",function(a){c.showLoading(a)}),b.on("select",function(){b.isOpen()&&c.setClasses()}),b.on("unselect",function(){b.isOpen()&&c.setClasses()}),b.on("open",function(){c.$results.attr("aria-expanded","true"),c.$results.attr("aria-hidden","false"),c.setClasses(),c.ensureHighlightVisible()}),b.on("close",function(){c.$results.attr("aria-expanded","false"),c.$results.attr("aria-hidden","true"),c.$results.removeAttr("aria-activedescendant")}),b.on("results:toggle",function(){var a=c.getHighlightedResults();0!==a.length&&a.trigger("mouseup")}),b.on("results:select",function(){var a=c.getHighlightedResults();if(0!==a.length){var b=a.data("data");"true"==a.attr("aria-selected")?c.trigger("close"):c.trigger("select",{data:b})}}),b.on("results:previous",function(){var a=c.getHighlightedResults(),b=c.$results.find("[aria-selected]"),d=b.index(a);if(0!==d){var e=d-1;0===a.length&&(e=0);var f=b.eq(e);f.trigger("mouseenter");var g=c.$results.offset().top,h=f.offset().top,i=c.$results.scrollTop()+(h-g);0===e?c.$results.scrollTop(0):0>h-g&&c.$results.scrollTop(i)}}),b.on("results:next",function(){var a=c.getHighlightedResults(),b=c.$results.find("[aria-selected]"),d=b.index(a),e=d+1;if(!(e>=b.length)){var f=b.eq(e);f.trigger("mouseenter");var g=c.$results.offset().top+c.$results.outerHeight(!1),h=f.offset().top+f.outerHeight(!1),i=c.$results.scrollTop()+h-g;0===e?c.$results.scrollTop(0):h>g&&c.$results.scrollTop(i)}}),b.on("results:focus",function(a){a.element.addClass("select2-results__option--highlighted")}),b.on("results:message",function(a){c.displayMessage(a)}),a.fn.mousewheel&&this.$results.on("mousewheel",function(a){var b=c.$results.scrollTop(),d=c.$results.get(0).scrollHeight-c.$results.scrollTop()+a.deltaY,e=a.deltaY>0&&b-a.deltaY<=0,f=a.deltaY<0&&d<=c.$results.height();e?(c.$results.scrollTop(0),a.preventDefault(),a.stopPropagation()):f&&(c.$results.scrollTop(c.$results.get(0).scrollHeight-c.$results.height()),a.preventDefault(),a.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(b){var d=a(this),e=d.data("data");return"true"===d.attr("aria-selected")?void(c.options.get("multiple")?c.trigger("unselect",{originalEvent:b,data:e}):c.trigger("close")):void c.trigger("select",{originalEvent:b,data:e})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(){var b=a(this).data("data");c.getHighlightedResults().removeClass("select2-results__option--highlighted"),c.trigger("results:focus",{data:b,element:a(this)})})},c.prototype.getHighlightedResults=function(){var a=this.$results.find(".select2-results__option--highlighted");return a},c.prototype.destroy=function(){this.$results.remove()},c.prototype.ensureHighlightVisible=function(){var a=this.getHighlightedResults();if(0!==a.length){var b=this.$results.find("[aria-selected]"),c=b.index(a),d=this.$results.offset().top,e=a.offset().top,f=this.$results.scrollTop()+(e-d),g=e-d;f-=2*a.outerHeight(!1),2>=c?this.$results.scrollTop(0):(g>this.$results.outerHeight()||0>g)&&this.$results.scrollTop(f)}},c.prototype.template=function(b,c){var d=this.options.get("templateResult"),e=this.options.get("escapeMarkup"),f=d(b);null==f?c.style.display="none":"string"==typeof f?c.innerHTML=e(f):a(c).append(f)},c}),b.define("select2/keys",[],function(){var a={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46};return a}),b.define("select2/selection/base",["jquery","../utils","../keys"],function(a,b,c){function d(a,b){this.$element=a,this.options=b,d.__super__.constructor.call(this)}return b.Extend(d,b.Observable),d.prototype.render=function(){var b=a('<span class="select2-selection" role="combobox" aria-autocomplete="list" aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),b.attr("title",this.$element.attr("title")),b.attr("tabindex",this._tabindex),this.$selection=b,b},d.prototype.bind=function(a){var b=this,d=(a.id+"-container",a.id+"-results");this.container=a,this.$selection.on("focus",function(a){b.trigger("focus",a)}),this.$selection.on("blur",function(a){b.trigger("blur",a)}),this.$selection.on("keydown",function(a){b.trigger("keypress",a),a.which===c.SPACE&&a.preventDefault()}),a.on("results:focus",function(a){b.$selection.attr("aria-activedescendant",a.data._resultId)}),a.on("selection:update",function(a){b.update(a.data)}),a.on("open",function(){b.$selection.attr("aria-expanded","true"),b.$selection.attr("aria-owns",d),b._attachCloseHandler(a)}),a.on("close",function(){b.$selection.attr("aria-expanded","false"),b.$selection.removeAttr("aria-activedescendant"),b.$selection.removeAttr("aria-owns"),b.$selection.focus(),b._detachCloseHandler(a)}),a.on("enable",function(){b.$selection.attr("tabindex",b._tabindex)}),a.on("disable",function(){b.$selection.attr("tabindex","-1")})},d.prototype._attachCloseHandler=function(b){a(document.body).on("mousedown.select2."+b.id,function(b){var c=a(b.target),d=c.closest(".select2"),e=a(".select2.select2-container--open");e.each(function(){var b=a(this);if(this!=d[0]){var c=b.data("element");c.select2("close")}})})},d.prototype._detachCloseHandler=function(b){a(document.body).off("mousedown.select2."+b.id)},d.prototype.position=function(a,b){var c=b.find(".selection");c.append(a)},d.prototype.destroy=function(){this._detachCloseHandler(this.container)},d.prototype.update=function(){throw new Error("The `update` method must be defined in child classes.")},d}),b.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(a,b,c){function d(){d.__super__.constructor.apply(this,arguments)}return c.Extend(d,b),d.prototype.render=function(){var a=d.__super__.render.call(this);return a.addClass("select2-selection--single"),a.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),a},d.prototype.bind=function(a){var b=this;d.__super__.bind.apply(this,arguments);var c=a.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",c),this.$selection.attr("aria-labelledby",c),this.$selection.on("mousedown",function(a){1===a.which&&b.trigger("toggle",{originalEvent:a})}),this.$selection.on("focus",function(){}),this.$selection.on("blur",function(){}),a.on("selection:update",function(a){b.update(a.data)})},d.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},d.prototype.display=function(a){var b=this.options.get("templateSelection"),c=this.options.get("escapeMarkup");return c(b(a))},d.prototype.selectionContainer=function(){return a("<span></span>")},d.prototype.update=function(a){if(0===a.length)return void this.clear();var b=a[0],c=this.display(b),d=this.$selection.find(".select2-selection__rendered");d.empty().append(c),d.prop("title",b.title||b.text)},d}),b.define("select2/selection/multiple",["jquery","./base","../utils"],function(a,b,c){function d(){d.__super__.constructor.apply(this,arguments)}return c.Extend(d,b),d.prototype.render=function(){var a=d.__super__.render.call(this);return a.addClass("select2-selection--multiple"),a.html('<ul class="select2-selection__rendered"></ul>'),a},d.prototype.bind=function(){var b=this;d.__super__.bind.apply(this,arguments),this.$selection.on("click",function(a){b.trigger("toggle",{originalEvent:a})}),this.$selection.on("click",".select2-selection__choice__remove",function(c){var d=a(this),e=d.parent(),f=e.data("data");b.trigger("unselect",{originalEvent:c,data:f})})},d.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},d.prototype.display=function(a){var b=this.options.get("templateSelection"),c=this.options.get("escapeMarkup");return c(b(a))},d.prototype.selectionContainer=function(){var b=a('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>');return b},d.prototype.update=function(b){if(this.clear(),0!==b.length){for(var c=a(),d=0;d<b.length;d++){var e=b[d],f=this.display(e),g=this.selectionContainer();g.append(f),g.prop("title",e.title||e.text),g.data("data",e),c=c.add(g)}this.$selection.find(".select2-selection__rendered").append(c)}},d}),b.define("select2/selection/placeholder",["../utils"],function(){function a(a,b,c){this.placeholder=this.normalizePlaceholder(c.get("placeholder")),a.call(this,b,c)}return a.prototype.normalizePlaceholder=function(a,b){return"string"==typeof b&&(b={id:"",text:b}),b},a.prototype.createPlaceholder=function(a,b){var c=this.selectionContainer();return c.html(this.display(b)),c.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),c},a.prototype.update=function(a,b){var c=1==b.length&&b[0].id!=this.placeholder.id,d=b.length>1;if(d||c)return a.call(this,b);this.clear();var e=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(e)},a}),b.define("select2/selection/allowClear",["jquery"],function(a){function b(){}return b.prototype.bind=function(b,c,d){var e=this;b.call(this,c,d),null==e.placeholder&&e.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(b){if(!e.options.get("disabled")){b.stopPropagation();for(var c=a(this).data("data"),d=0;d<c.length;d++){var f={data:c[d]};if(e.trigger("unselect",f),f.prevented)return}e.$element.val(e.placeholder.id).trigger("change"),e.trigger("toggle")}})},b.prototype.update=function(b,c){if(b.call(this,c),!(this.$selection.find(".select2-selection__placeholder").length>0||0===c.length)){var d=a('<span class="select2-selection__clear">&times;</span>');d.data("data",c),this.$selection.find(".select2-selection__rendered").prepend(d)}},b}),b.define("select2/selection/search",["jquery","../utils","../keys"],function(a,b,c){function d(a,b,c){a.call(this,b,c)}return d.prototype.render=function(b){var c=a('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></li>');this.$searchContainer=c,this.$search=c.find("input");var d=b.call(this);return d},d.prototype.bind=function(a,b,d){var e=this;a.call(this,b,d),b.on("open",function(){e.$search.attr("tabindex",0),e.$search.focus()}),b.on("close",function(){e.$search.attr("tabindex",-1),e.$search.val(""),e.$search.focus()}),b.on("enable",function(){e.$search.prop("disabled",!1)}),b.on("disable",function(){e.$search.prop("disabled",!0)}),this.$selection.on("focusin",".select2-search--inline",function(a){e.trigger("focus",a)}),this.$selection.on("focusout",".select2-search--inline",function(a){e.trigger("blur",a)}),this.$selection.on("keydown",".select2-search--inline",function(a){a.stopPropagation(),e.trigger("keypress",a),e._keyUpPrevented=a.isDefaultPrevented();var b=a.which;if(b===c.BACKSPACE&&""===e.$search.val()){var d=e.$searchContainer.prev(".select2-selection__choice");if(d.length>0){var f=d.data("data");e.searchRemoveChoice(f),a.preventDefault()}}}),this.$selection.on("input",".select2-search--inline",function(){e.$selection.off("keyup.search")}),this.$selection.on("keyup.search input",".select2-search--inline",function(a){e.handleSearch(a)})},d.prototype.createPlaceholder=function(a,b){this.$search.attr("placeholder",b.text)},d.prototype.update=function(a,b){this.$search.attr("placeholder",""),a.call(this,b),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch()},d.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var a=this.$search.val();this.trigger("query",{term:a})}this._keyUpPrevented=!1},d.prototype.searchRemoveChoice=function(a,b){this.trigger("unselect",{data:b}),this.trigger("open"),this.$search.val(b.text+" ")},d.prototype.resizeSearch=function(){this.$search.css("width","25px");var a="";if(""!==this.$search.attr("placeholder"))a=this.$selection.find(".select2-selection__rendered").innerWidth();else{var b=this.$search.val().length+1;a=.75*b+"em"}this.$search.css("width",a)},d}),b.define("select2/selection/eventRelay",["jquery"],function(a){function b(){}return b.prototype.bind=function(b,c,d){var e=this,f=["open","opening","close","closing","select","selecting","unselect","unselecting"],g=["opening","closing","selecting","unselecting"];b.call(this,c,d),c.on("*",function(b,c){if(-1!==a.inArray(b,f)){c=c||{};var d=a.Event("select2:"+b,{params:c});e.$element.trigger(d),-1!==a.inArray(b,g)&&(c.prevented=d.isDefaultPrevented())}})},b}),b.define("select2/translation",["jquery","require"],function(a,b){function c(a){this.dict=a||{}}return c.prototype.all=function(){return this.dict},c.prototype.get=function(a){return this.dict[a]},c.prototype.extend=function(b){this.dict=a.extend({},b.all(),this.dict)},c._cache={},c.loadPath=function(a){if(!(a in c._cache)){var d=b(a);c._cache[a]=d}return new c(c._cache[a])},c}),b.define("select2/diacritics",[],function(){var a={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"};return a}),b.define("select2/data/base",["../utils"],function(a){function b(){b.__super__.constructor.call(this)}return a.Extend(b,a.Observable),b.prototype.current=function(){throw new Error("The `current` method must be defined in child classes.")},b.prototype.query=function(){throw new Error("The `query` method must be defined in child classes.")},b.prototype.bind=function(){},b.prototype.destroy=function(){},b.prototype.generateResultId=function(b,c){var d=b.id+"-result-";return d+=a.generateChars(4),d+=null!=c.id?"-"+c.id.toString():"-"+a.generateChars(4)},b}),b.define("select2/data/select",["./base","../utils","jquery"],function(a,b,c){function d(a,b){this.$element=a,this.options=b,d.__super__.constructor.call(this)}return b.Extend(d,a),d.prototype.current=function(a){var b=[],d=this;this.$element.find(":selected").each(function(){var a=c(this),e=d.item(a);b.push(e)}),a(b)},d.prototype.select=function(a){var b=this;if(a.selected=!0,c(a.element).is("option"))return a.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current(function(d){var e=[];a=[a],a.push.apply(a,d);for(var f=0;f<a.length;f++){var g=a[f].id;-1===c.inArray(g,e)&&e.push(g)}b.$element.val(e),b.$element.trigger("change")});else{var d=a.id;this.$element.val(d),this.$element.trigger("change")}},d.prototype.unselect=function(a){var b=this;if(this.$element.prop("multiple"))return a.selected=!1,c(a.element).is("option")?(a.element.selected=!1,void this.$element.trigger("change")):void this.current(function(d){for(var e=[],f=0;f<d.length;f++){var g=d[f].id;g!==a.id&&-1===c.inArray(g,e)&&e.push(g)}b.$element.val(e),b.$element.trigger("change")})},d.prototype.bind=function(a){var b=this;this.container=a,a.on("select",function(a){b.select(a.data)}),a.on("unselect",function(a){b.unselect(a.data)})},d.prototype.destroy=function(){this.$element.find("*").each(function(){c.removeData(this,"data")})},d.prototype.query=function(a,b){var d=[],e=this,f=this.$element.children();f.each(function(){var b=c(this);if(b.is("option")||b.is("optgroup")){var f=e.item(b),g=e.matches(a,f);null!==g&&d.push(g)}}),b({results:d})},d.prototype.addOptions=function(a){this.$element.append(a)},d.prototype.option=function(a){var b;a.children?(b=document.createElement("optgroup"),b.label=a.text):(b=document.createElement("option"),void 0!==b.textContent?b.textContent=a.text:b.innerText=a.text),a.id&&(b.value=a.id),a.disabled&&(b.disabled=!0),a.selected&&(b.selected=!0),a.title&&(b.title=a.title);var d=c(b),e=this._normalizeItem(a);return e.element=b,c.data(b,"data",e),d},d.prototype.item=function(a){var b={};if(b=c.data(a[0],"data"),null!=b)return b;if(a.is("option"))b={id:a.val(),text:a.text(),disabled:a.prop("disabled"),selected:a.prop("selected"),title:a.prop("title")};else if(a.is("optgroup")){b={text:a.prop("label"),children:[],title:a.prop("title")};for(var d=a.children("option"),e=[],f=0;f<d.length;f++){var g=c(d[f]),h=this.item(g);e.push(h)}b.children=e}return b=this._normalizeItem(b),b.element=a[0],c.data(a[0],"data",b),b},d.prototype._normalizeItem=function(a){c.isPlainObject(a)||(a={id:a,text:a}),a=c.extend({},{text:""},a);
var b={selected:!1,disabled:!1};return null!=a.id&&(a.id=a.id.toString()),null!=a.text&&(a.text=a.text.toString()),null==a._resultId&&a.id&&null!=this.container&&(a._resultId=this.generateResultId(this.container,a)),c.extend({},b,a)},d.prototype.matches=function(a,b){var c=this.options.get("matcher");return c(a,b)},d}),b.define("select2/data/array",["./select","../utils","jquery"],function(a,b,c){function d(a,b){var c=b.get("data")||[];d.__super__.constructor.call(this,a,b),this.addOptions(this.convertToOptions(c))}return b.Extend(d,a),d.prototype.select=function(a){var b=this.$element.find("option").filter(function(b,c){return c.value==a.id.toString()});0===b.length&&(b=this.option(a),this.addOptions(b)),d.__super__.select.call(this,a)},d.prototype.convertToOptions=function(a){function b(a){return function(){return c(this).val()==a.id}}for(var d=this,e=this.$element.find("option"),f=e.map(function(){return d.item(c(this)).id}).get(),g=c(),h=0;h<a.length;h++){var i=this._normalizeItem(a[h]);if(c.inArray(i.id,f)>=0){var j=e.filter(b(i)),k=this.item(j),l=(c.extend(!0,{},k,i),this.option(k));j.replaceWith(l)}else{var m=this.option(i);if(i.children){var n=this.convertToOptions(i.children);m.append(n)}g=g.add(m)}}return g},d}),b.define("select2/data/ajax",["./array","../utils","jquery"],function(a,b,c){function d(b,c){this.ajaxOptions=this._applyDefaults(c.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),a.__super__.constructor.call(this,b,c)}return b.Extend(d,a),d.prototype._applyDefaults=function(a){var b={data:function(a){return{q:a.term}},transport:function(a,b,d){var e=c.ajax(a);return e.then(b),e.fail(d),e}};return c.extend({},b,a,!0)},d.prototype.processResults=function(a){return a},d.prototype.query=function(a,b){function d(){var d=f.transport(f,function(d){var f=e.processResults(d,a);e.options.get("debug")&&window.console&&console.error&&(f&&f.results&&c.isArray(f.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),b(f)},function(){});e._request=d}var e=this;this._request&&(this._request.abort(),this._request=null);var f=c.extend({type:"GET"},this.ajaxOptions);"function"==typeof f.url&&(f.url=f.url(a)),"function"==typeof f.data&&(f.data=f.data(a)),this.ajaxOptions.delay&&""!==a.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(d,this.ajaxOptions.delay)):d()},d}),b.define("select2/data/tags",["jquery"],function(a){function b(b,c,d){var e=d.get("tags"),f=d.get("createTag");if(void 0!==f&&(this.createTag=f),b.call(this,c,d),a.isArray(e))for(var g=0;g<e.length;g++){var h=e[g],i=this._normalizeItem(h),j=this.option(i);this.$element.append(j)}}return b.prototype.query=function(a,b,c){function d(a,f){for(var g=a.results,h=0;h<g.length;h++){var i=g[h],j=null!=i.children&&!d({results:i.children},!0),k=i.text===b.term;if(k||j)return f?!1:(a.data=g,void c(a))}if(f)return!0;var l=e.createTag(b);if(null!=l){var m=e.option(l);m.attr("data-select2-tag",!0),e.addOptions(m),e.insertTag(g,l)}a.results=g,c(a)}var e=this;return this._removeOldTags(),null==b.term||null!=b.page?void a.call(this,b,c):void a.call(this,b,d)},b.prototype.createTag=function(b,c){var d=a.trim(c.term);return""===d?null:{id:d,text:d}},b.prototype.insertTag=function(a,b,c){b.unshift(c)},b.prototype._removeOldTags=function(){var b=(this._lastTag,this.$element.find("option[data-select2-tag]"));b.each(function(){this.selected||a(this).remove()})},b}),b.define("select2/data/tokenizer",["jquery"],function(a){function b(a,b,c){var d=c.get("tokenizer");void 0!==d&&(this.tokenizer=d),a.call(this,b,c)}return b.prototype.bind=function(a,b,c){a.call(this,b,c),this.$search=b.dropdown.$search||b.selection.$search||c.find(".select2-search__field")},b.prototype.query=function(a,b,c){function d(a){e.select(a)}var e=this;b.term=b.term||"";var f=this.tokenizer(b,this.options,d);f.term!==b.term&&(this.$search.length&&(this.$search.val(f.term),this.$search.focus()),b.term=f.term),a.call(this,b,c)},b.prototype.tokenizer=function(b,c,d,e){for(var f=d.get("tokenSeparators")||[],g=c.term,h=0,i=this.createTag||function(a){return{id:a.term,text:a.term}};h<g.length;){var j=g[h];if(-1!==a.inArray(j,f)){var k=g.substr(0,h),l=a.extend({},c,{term:k}),m=i(l);e(m),g=g.substr(h+1)||"",h=0}else h++}return{term:g}},b}),b.define("select2/data/minimumInputLength",[],function(){function a(a,b,c){this.minimumInputLength=c.get("minimumInputLength"),a.call(this,b,c)}return a.prototype.query=function(a,b,c){return b.term=b.term||"",b.term.length<this.minimumInputLength?void this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:b.term,params:b}}):void a.call(this,b,c)},a}),b.define("select2/data/maximumInputLength",[],function(){function a(a,b,c){this.maximumInputLength=c.get("maximumInputLength"),a.call(this,b,c)}return a.prototype.query=function(a,b,c){return b.term=b.term||"",this.maximumInputLength>0&&b.term.length>this.maximumInputLength?void this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:b.term,params:b}}):void a.call(this,b,c)},a}),b.define("select2/data/maximumSelectionLength",[],function(){function a(a,b,c){this.maximumSelectionLength=c.get("maximumSelectionLength"),a.call(this,b,c)}return a.prototype.query=function(a,b,c){var d=this;this.current(function(e){var f=null!=e?e.length:0;return d.maximumSelectionLength>0&&f>=d.maximumSelectionLength?void d.trigger("results:message",{message:"maximumSelected",args:{maximum:d.maximumSelectionLength}}):void a.call(d,b,c)})},a}),b.define("select2/dropdown",["jquery","./utils"],function(a,b){function c(a,b){this.$element=a,this.options=b,c.__super__.constructor.call(this)}return b.Extend(c,b.Observable),c.prototype.render=function(){var b=a('<span class="select2-dropdown"><span class="select2-results"></span></span>');return b.attr("dir",this.options.get("dir")),this.$dropdown=b,b},c.prototype.position=function(){},c.prototype.destroy=function(){this.$dropdown.remove()},c}),b.define("select2/dropdown/search",["jquery","../utils"],function(a){function b(){}return b.prototype.render=function(b){var c=b.call(this),d=a('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=d,this.$search=d.find("input"),c.prepend(d),c},b.prototype.bind=function(b,c,d){var e=this;b.call(this,c,d),this.$search.on("keydown",function(a){e.trigger("keypress",a),e._keyUpPrevented=a.isDefaultPrevented()}),this.$search.on("input",function(){a(this).off("keyup")}),this.$search.on("keyup input",function(a){e.handleSearch(a)}),c.on("open",function(){e.$search.attr("tabindex",0),e.$search.focus(),window.setTimeout(function(){e.$search.focus()},0)}),c.on("close",function(){e.$search.attr("tabindex",-1),e.$search.val("")}),c.on("results:all",function(a){if(null==a.query.term||""===a.query.term){var b=e.showSearch(a);b?e.$searchContainer.removeClass("select2-search--hide"):e.$searchContainer.addClass("select2-search--hide")}})},b.prototype.handleSearch=function(){if(!this._keyUpPrevented){var a=this.$search.val();this.trigger("query",{term:a})}this._keyUpPrevented=!1},b.prototype.showSearch=function(){return!0},b}),b.define("select2/dropdown/hidePlaceholder",[],function(){function a(a,b,c,d){this.placeholder=this.normalizePlaceholder(c.get("placeholder")),a.call(this,b,c,d)}return a.prototype.append=function(a,b){b.results=this.removePlaceholder(b.results),a.call(this,b)},a.prototype.normalizePlaceholder=function(a,b){return"string"==typeof b&&(b={id:"",text:b}),b},a.prototype.removePlaceholder=function(a,b){for(var c=b.slice(0),d=b.length-1;d>=0;d--){var e=b[d];this.placeholder.id===e.id&&c.splice(d,1)}return c},a}),b.define("select2/dropdown/infiniteScroll",["jquery"],function(a){function b(a,b,c,d){this.lastParams={},a.call(this,b,c,d),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return b.prototype.append=function(a,b){this.$loadingMore.remove(),this.loading=!1,a.call(this,b),this.showLoadingMore(b)&&this.$results.append(this.$loadingMore)},b.prototype.bind=function(b,c,d){var e=this;b.call(this,c,d),c.on("query",function(a){e.lastParams=a,e.loading=!0}),c.on("query:append",function(a){e.lastParams=a,e.loading=!0}),this.$results.on("scroll",function(){var b=a.contains(document.documentElement,e.$loadingMore[0]);if(!e.loading&&b){var c=e.$results.offset().top+e.$results.outerHeight(!1),d=e.$loadingMore.offset().top+e.$loadingMore.outerHeight(!1);c+50>=d&&e.loadMore()}})},b.prototype.loadMore=function(){this.loading=!0;var b=a.extend({},{page:1},this.lastParams);b.page++,this.trigger("query:append",b)},b.prototype.showLoadingMore=function(a,b){return b.pagination&&b.pagination.more},b.prototype.createLoadingMore=function(){var b=a('<li class="option load-more" role="treeitem"></li>'),c=this.options.get("translations").get("loadingMore");return b.html(c(this.lastParams)),b},b}),b.define("select2/dropdown/attachBody",["jquery","../utils"],function(a,b){function c(a,b,c){this.$dropdownParent=c.get("dropdownParent")||document.body,a.call(this,b,c)}return c.prototype.bind=function(a,b,c){var d=this,e=!1;a.call(this,b,c),b.on("open",function(){d._showDropdown(),d._attachPositioningHandler(b),e||(e=!0,b.on("results:all",function(){d._positionDropdown(),d._resizeDropdown()}),b.on("results:append",function(){d._positionDropdown(),d._resizeDropdown()}))}),b.on("close",function(){d._hideDropdown(),d._detachPositioningHandler(b)}),this.$dropdownContainer.on("mousedown",function(a){a.stopPropagation()})},c.prototype.position=function(a,b,c){b.attr("class",c.attr("class")),b.removeClass("select2"),b.addClass("select2-container--open"),b.css({position:"absolute",top:-999999}),this.$container=c},c.prototype.render=function(b){var c=a("<span></span>"),d=b.call(this);return c.append(d),this.$dropdownContainer=c,c},c.prototype._hideDropdown=function(){this.$dropdownContainer.detach()},c.prototype._attachPositioningHandler=function(c){var d=this,e="scroll.select2."+c.id,f="resize.select2."+c.id,g="orientationchange.select2."+c.id,h=this.$container.parents().filter(b.hasScroll);h.each(function(){a(this).data("select2-scroll-position",{x:a(this).scrollLeft(),y:a(this).scrollTop()})}),h.on(e,function(){var b=a(this).data("select2-scroll-position");a(this).scrollTop(b.y)}),a(window).on(e+" "+f+" "+g,function(){d._positionDropdown(),d._resizeDropdown()})},c.prototype._detachPositioningHandler=function(c){var d="scroll.select2."+c.id,e="resize.select2."+c.id,f="orientationchange.select2."+c.id,g=this.$container.parents().filter(b.hasScroll);g.off(d),a(window).off(d+" "+e+" "+f)},c.prototype._positionDropdown=function(){var b=a(window),c=this.$dropdown.hasClass("select2-dropdown--above"),d=this.$dropdown.hasClass("select2-dropdown--below"),e=null,f=(this.$container.position(),this.$container.offset());f.bottom=f.top+this.$container.outerHeight(!1);var g={height:this.$container.outerHeight(!1)};g.top=f.top,g.bottom=f.top+g.height;var h={height:this.$dropdown.outerHeight(!1)},i={top:b.scrollTop(),bottom:b.scrollTop()+b.height()},j=i.top<f.top-h.height,k=i.bottom>f.bottom+h.height,l={left:f.left,top:g.bottom};c||d||(e="below"),k||!j||c?!j&&k&&c&&(e="below"):e="above",("above"==e||c&&"below"!==e)&&(l.top=g.top-h.height),null!=e&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+e),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+e)),this.$dropdownContainer.css(l)},c.prototype._resizeDropdown=function(){this.$dropdownContainer.width(),this.$dropdown.css({width:this.$container.outerWidth(!1)+"px"})},c.prototype._showDropdown=function(){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},c}),b.define("select2/dropdown/minimumResultsForSearch",[],function(){function a(b){for(var c=0,d=0;d<b.length;d++){var e=b[d];e.children?c+=a(e.children):c++}return c}function b(a,b,c,d){this.minimumResultsForSearch=c.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),a.call(this,b,c,d)}return b.prototype.showSearch=function(b,c){return a(c.data.results)<this.minimumResultsForSearch?!1:b.call(this,c)},b}),b.define("select2/dropdown/selectOnClose",[],function(){function a(){}return a.prototype.bind=function(a,b,c){var d=this;a.call(this,b,c),b.on("close",function(){d._handleSelectOnClose()})},a.prototype._handleSelectOnClose=function(){var a=this.getHighlightedResults();a.length<1||a.trigger("mouseup")},a}),b.define("select2/dropdown/closeOnSelect",[],function(){function a(){}return a.prototype.bind=function(a,b,c){var d=this;a.call(this,b,c),b.on("select",function(a){d._selectTriggered(a)}),b.on("unselect",function(a){d._selectTriggered(a)})},a.prototype._selectTriggered=function(a,b){var c=b.originalEvent;c&&c.ctrlKey||this.trigger("close")},a}),b.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(a){var b=a.input.length-a.maximum,c="Please delete "+b+" character";return 1!=b&&(c+="s"),c},inputTooShort:function(a){var b=a.minimum-a.input.length,c="Please enter "+b+" or more characters";return c},loadingMore:function(){return"Loading more results…"},maximumSelected:function(a){var b="You can only select "+a.maximum+" item";return 1!=a.maximum&&(b+="s"),b},noResults:function(){return"No results found"},searching:function(){return"Searching…"}}}),b.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C){function D(){this.reset()}D.prototype.apply=function(l){if(l=a.extend({},this.defaults,l),null==l.dataAdapter){if(l.dataAdapter=null!=l.ajax?o:null!=l.data?n:m,l.minimumInputLength>0&&(l.dataAdapter=j.Decorate(l.dataAdapter,r)),l.maximumInputLength>0&&(l.dataAdapter=j.Decorate(l.dataAdapter,s)),l.maximumSelectionLength>0&&(l.dataAdapter=j.Decorate(l.dataAdapter,t)),l.tags&&(l.dataAdapter=j.Decorate(l.dataAdapter,p)),(null!=l.tokenSeparators||null!=l.tokenizer)&&(l.dataAdapter=j.Decorate(l.dataAdapter,q)),null!=l.query){var C=b(l.amdBase+"compat/query");l.dataAdapter=j.Decorate(l.dataAdapter,C)}if(null!=l.initSelection){var D=b(l.amdBase+"compat/initSelection");l.dataAdapter=j.Decorate(l.dataAdapter,D)}}if(null==l.resultsAdapter&&(l.resultsAdapter=c,null!=l.ajax&&(l.resultsAdapter=j.Decorate(l.resultsAdapter,x)),null!=l.placeholder&&(l.resultsAdapter=j.Decorate(l.resultsAdapter,w)),l.selectOnClose&&(l.resultsAdapter=j.Decorate(l.resultsAdapter,A))),null==l.dropdownAdapter){if(l.multiple)l.dropdownAdapter=u;else{var E=j.Decorate(u,v);l.dropdownAdapter=E}0!==l.minimumResultsForSearch&&(l.dropdownAdapter=j.Decorate(l.dropdownAdapter,z)),l.closeOnSelect&&(l.dropdownAdapter=j.Decorate(l.dropdownAdapter,B)),l.dropdownAdapter=j.Decorate(l.dropdownAdapter,y)}if(null==l.selectionAdapter&&(l.selectionAdapter=l.multiple?e:d,null!=l.placeholder&&(l.selectionAdapter=j.Decorate(l.selectionAdapter,f)),l.allowClear&&(l.selectionAdapter=j.Decorate(l.selectionAdapter,g)),l.multiple&&(l.selectionAdapter=j.Decorate(l.selectionAdapter,h)),l.selectionAdapter=j.Decorate(l.selectionAdapter,i)),"string"==typeof l.language)if(l.language.indexOf("-")>0){var F=l.language.split("-"),G=F[0];l.language=[l.language,G]}else l.language=[l.language];if(a.isArray(l.language)){var H=new k;l.language.push("en");for(var I=l.language,J=0;J<I.length;J++){var K=I[J],L={};try{L=k.loadPath(K)}catch(M){try{K=this.defaults.amdLanguageBase+K,L=k.loadPath(K)}catch(N){l.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+K+'" could not be automatically loaded. A fallback will be used instead.');continue}}H.extend(L)}l.translations=H}else l.translations=new k(l.language);return l},D.prototype.reset=function(){function b(a){function b(a){return l[a]||a}return a.replace(/[^\u0000-\u007E]/g,b)}function c(d,e){if(""===a.trim(d.term))return e;if(e.children&&e.children.length>0){for(var f=a.extend(!0,{},e),g=e.children.length-1;g>=0;g--){var h=e.children[g],i=c(d,h);null==i&&f.children.splice(g,1)}return f.children.length>0?f:c(d,f)}var j=b(e.text).toUpperCase(),k=b(d.term).toUpperCase();return j.indexOf(k)>-1?e:null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,escapeMarkup:j.escapeMarkup,language:C,matcher:c,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(a){return a},templateResult:function(a){return a.text},templateSelection:function(a){return a.text},theme:"default",width:"resolve"}},D.prototype.set=function(b,c){var d=a.camelCase(b),e={};e[d]=c;var f=j._convertData(e);a.extend(this.defaults,f)};var E=new D;return E}),b.define("select2/options",["jquery","./defaults","./utils"],function(a,b,c){function d(a,d){if(this.options=a,null!=d&&this.fromElement(d),this.options=b.apply(this.options),d&&d.is("input")){var e=require(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=c.Decorate(this.options.dataAdapter,e)}}return d.prototype.fromElement=function(b){var d=["select2"];null==this.options.multiple&&(this.options.multiple=b.prop("multiple")),null==this.options.disabled&&(this.options.disabled=b.prop("disabled")),null==this.options.language&&(b.prop("lang")?this.options.language=b.prop("lang").toLowerCase():b.closest("[lang]").prop("lang")&&(this.options.language=b.closest("[lang]").prop("lang"))),null==this.options.dir&&(this.options.dir=b.prop("dir")?b.prop("dir"):b.closest("[dir]").prop("dir")?b.closest("[dir]").prop("dir"):"ltr"),b.prop("disabled",this.options.disabled),b.prop("multiple",this.options.multiple),b.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),b.data("data",b.data("select2Tags")),b.data("tags",!0)),b.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),b.attr("ajax--url",b.data("ajaxUrl")),b.data("ajax--url",b.data("ajaxUrl")));var e={};e=a.fn.jquery&&"1."==a.fn.jquery.substr(0,2)&&b[0].dataset?a.extend(!0,{},b[0].dataset,b.data()):b.data();var f=a.extend(!0,{},e);f=c._convertData(f);for(var g in f)a.inArray(g,d)>-1||(a.isPlainObject(this.options[g])?a.extend(this.options[g],f[g]):this.options[g]=f[g]);return this},d.prototype.get=function(a){return this.options[a]},d.prototype.set=function(a,b){this.options[a]=b},d}),b.define("select2/core",["jquery","./options","./utils","./keys"],function(a,b,c,d){var e=function(a,c){null!=a.data("select2")&&a.data("select2").destroy(),this.$element=a,this.id=this._generateId(a),c=c||{},this.options=new b(c,a),e.__super__.constructor.call(this);var d=a.attr("tabindex")||0;a.data("old-tabindex",d),a.attr("tabindex","-1");var f=this.options.get("dataAdapter");this.dataAdapter=new f(a,this.options);var g=this.render();this._placeContainer(g);var h=this.options.get("selectionAdapter");this.selection=new h(a,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,g);var i=this.options.get("dropdownAdapter");this.dropdown=new i(a,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,g);var j=this.options.get("resultsAdapter");this.results=new j(a,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var k=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(a){k.trigger("selection:update",{data:a})}),a.hide(),this._syncAttributes(),a.data("select2",this)};return c.Extend(e,c.Observable),e.prototype._generateId=function(a){var b="";return b=null!=a.attr("id")?a.attr("id"):null!=a.attr("name")?a.attr("name")+"-"+c.generateChars(2):c.generateChars(4),b="select2-"+b},e.prototype._placeContainer=function(a){a.insertAfter(this.$element);var b=this._resolveWidth(this.$element,this.options.get("width"));null!=b&&a.css("width",b)},e.prototype._resolveWidth=function(a,b){var c=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==b){var d=this._resolveWidth(a,"style");return null!=d?d:this._resolveWidth(a,"element")}if("element"==b){var e=a.outerWidth(!1);return 0>=e?"auto":e+"px"}if("style"==b){var f=a.attr("style");if("string"!=typeof f)return null;for(var g=f.split(";"),h=0,i=g.length;i>h;h+=1){var j=g[h].replace(/\s/g,""),k=j.match(c);if(null!==k&&k.length>=1)return k[1]}return null}return b},e.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},e.prototype._registerDomEvents=function(){var b=this;this.$element.on("change.select2",function(){b.dataAdapter.current(function(a){b.trigger("selection:update",{data:a})})}),this._sync=c.bind(this._syncAttributes,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._sync);var d=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=d?(this._observer=new d(function(c){a.each(c,b._sync)}),this._observer.observe(this.$element[0],{attributes:!0,subtree:!1})):this.$element[0].addEventListener&&this.$element[0].addEventListener("DOMAttrModified",b._sync,!1)},e.prototype._registerDataEvents=function(){var a=this;this.dataAdapter.on("*",function(b,c){a.trigger(b,c)})},e.prototype._registerSelectionEvents=function(){var b=this,c=["toggle"];this.selection.on("toggle",function(){b.toggleDropdown()}),this.selection.on("*",function(d,e){-1===a.inArray(d,c)&&b.trigger(d,e)})},e.prototype._registerDropdownEvents=function(){var a=this;this.dropdown.on("*",function(b,c){a.trigger(b,c)})},e.prototype._registerResultsEvents=function(){var a=this;this.results.on("*",function(b,c){a.trigger(b,c)})},e.prototype._registerEvents=function(){var a=this;this.on("open",function(){a.$container.addClass("select2-container--open")}),this.on("close",function(){a.$container.removeClass("select2-container--open")}),this.on("enable",function(){a.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){a.$container.addClass("select2-container--disabled")}),this.on("focus",function(){a.$container.addClass("select2-container--focus")}),this.on("blur",function(){a.$container.removeClass("select2-container--focus")}),this.on("query",function(b){a.isOpen()||a.trigger("open"),this.dataAdapter.query(b,function(c){a.trigger("results:all",{data:c,query:b})})}),this.on("query:append",function(b){this.dataAdapter.query(b,function(c){a.trigger("results:append",{data:c,query:b})})}),this.on("keypress",function(b){var c=b.which;a.isOpen()?c===d.ENTER?(a.trigger("results:select"),b.preventDefault()):c===d.SPACE&&b.ctrlKey?(a.trigger("results:toggle"),b.preventDefault()):c===d.UP?(a.trigger("results:previous"),b.preventDefault()):c===d.DOWN?(a.trigger("results:next"),b.preventDefault()):(c===d.ESC||c===d.TAB)&&(a.close(),b.preventDefault()):(c===d.ENTER||c===d.SPACE||(c===d.DOWN||c===d.UP)&&b.altKey)&&(a.open(),b.preventDefault())})},e.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable")):this.trigger("enable")},e.prototype.trigger=function(a,b){var c=e.__super__.trigger,d={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(a in d){var f=d[a],g={prevented:!1,name:a,args:b};if(c.call(this,f,g),g.prevented)return void(b.prevented=!0)}c.call(this,a,b)},e.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},e.prototype.open=function(){this.isOpen()||(this.trigger("query",{}),this.trigger("open"))},e.prototype.close=function(){this.isOpen()&&this.trigger("close")},e.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},e.prototype.enable=function(a){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),(null==a||0===a.length)&&(a=[!0]);var b=!a[0];this.$element.prop("disabled",b)},e.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var a=[];return this.dataAdapter.current(function(b){a=b}),a},e.prototype.val=function(b){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==b||0===b.length)return this.$element.val();var c=b[0];a.isArray(c)&&(c=a.map(c,function(a){return a.toString()})),this.$element.val(c).trigger("change")},e.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._sync),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&this.$element[0].removeEventListener("DOMAttrModified",this._sync,!1),this._sync=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.show(),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},e.prototype.render=function(){var b=a('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return b.attr("dir",this.options.get("dir")),this.$container=b,this.$container.addClass("select2-container--"+this.options.get("theme")),b.data("element",this.$element),b},e}),b.define("jquery.select2",["jquery","./select2/core","./select2/defaults"],function(a,b,c){try{require("jquery.mousewheel")}catch(d){}return null==a.fn.select2&&(a.fn.select2=function(c){if(c=c||{},"object"==typeof c)return this.each(function(){{var d=a.extend({},c,!0);new b(a(this),d)}}),this;if("string"==typeof c){var d=this.data("select2"),e=Array.prototype.slice.call(arguments,1);return d[c](e)}throw new Error("Invalid arguments for Select2: "+c)}),null==a.fn.select2.defaults&&(a.fn.select2.defaults=c),b}),{define:b.define,require:b.require}}(),c=b.require("jquery.select2");return a.fn.select2.amd=b,c});
(function($){
    $(document).off("click.select2formreset").on("click.select2formreset","button[type='reset'],input[type='reset']",function(event){
        var myForm = $(this).closest('form').get(0);
        myForm.reset();
        $("select.select2", myForm).each(function () {
            $(this).select2('val',$(this).val())
        });
    });
})(jQuery);

/*<script src="${ctxStatic}/org/tinygroup/select2/js/select2_locale_zh-CN.js"></script>*/
!function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var a=jQuery.fn.select2.amd;return a.define("select2/i18n/zh-CN",[],function(){return{errorLoading:function(){return"无法载入结果。"},inputTooLong:function(a){var b=a.input.length-a.maximum,c="请删除"+b+"个字符";return c},inputTooShort:function(a){var b=a.minimum-a.input.length,c="请再输入至少"+b+"个字符";return c},loadingMore:function(){return"载入更多结果…"},maximumSelected:function(a){var b="最多只能选择"+a.maximum+"个项目";return b},noResults:function(){return"未找到结果"},searching:function(){return"搜索中…"}}}),{define:a.define,require:a.require}}();

/*<script src="${ctxStatic}/org/tinygroup/toTop/js/toTop.js"></script>*/
$(function(){var a="返回顶部";$backToTopEle=$('<a href="javascript:void(0)" class="toTop" title=backToTopTxt alt=backToTopTxt></a>').appendTo($("body")).text(a).attr("title",a).click(function(){$("html, body").animate({scrollTop:0},120)}),$backToTopFun=function(){var a=$(document).scrollTop(),b=$(window).height();a>0?$backToTopEle.show():$backToTopEle.hide(),window.XMLHttpRequest||$backToTopEle.css("top",a+b-166)},$(window).bind("scroll",$backToTopFun),$backToTopFun()});

/*<script src="${ctxStatic}/org/tinygroup/zTree/js/jquery.ztree.core-3.5.js"></script>*/
!function($){var zt,$$,consts,settings={},roots={},caches={},_consts={className:{BUTTON:"button",LEVEL:"level",ICO_LOADING:"ico_loading",SWITCH:"switch"},event:{NODECREATED:"ztree_nodeCreated",CLICK:"ztree_click",EXPAND:"ztree_expand",COLLAPSE:"ztree_collapse",ASYNC_SUCCESS:"ztree_async_success",ASYNC_ERROR:"ztree_async_error",REMOVE:"ztree_remove"},id:{A:"_a",ICON:"_ico",SPAN:"_span",SWITCH:"_switch",UL:"_ul"},line:{ROOT:"root",ROOTS:"roots",CENTER:"center",BOTTOM:"bottom",NOLINE:"noline",LINE:"line"},folder:{OPEN:"open",CLOSE:"close",DOCU:"docu"},node:{CURSELECTED:"curSelectedNode"}},_setting={treeId:"",treeObj:null,view:{addDiyDom:null,autoCancelSelected:!0,dblClickExpand:!0,expandSpeed:"fast",fontCss:{},nameIsHTML:!1,selectedMulti:!0,showIcon:!0,showLine:!0,showTitle:!0,txtSelectedEnable:!1},data:{key:{children:"children",name:"name",title:"",url:"url"},simpleData:{enable:!1,idKey:"id",pIdKey:"pId",rootPId:null},keep:{parent:!1,leaf:!1}},async:{enable:!1,contentType:"application/x-www-form-urlencoded",type:"post",dataType:"text",url:"",autoParam:[],otherParam:[],dataFilter:null},callback:{beforeAsync:null,beforeClick:null,beforeDblClick:null,beforeRightClick:null,beforeMouseDown:null,beforeMouseUp:null,beforeExpand:null,beforeCollapse:null,beforeRemove:null,onAsyncError:null,onAsyncSuccess:null,onNodeCreated:null,onClick:null,onDblClick:null,onRightClick:null,onMouseDown:null,onMouseUp:null,onExpand:null,onCollapse:null,onRemove:null}},_initRoot=function(a){var b=data.getRoot(a);b||(b={},data.setRoot(a,b)),b[a.data.key.children]=[],b.expandTriggerFlag=!1,b.curSelectedList=[],b.noSelection=!0,b.createdNodes=[],b.zId=0,b._ver=(new Date).getTime()},_initCache=function(a){var b=data.getCache(a);b||(b={},data.setCache(a,b)),b.nodes=[],b.doms=[]},_bindEvent=function(a){var b=a.treeObj,c=consts.event;b.bind(c.NODECREATED,function(b,c,d){tools.apply(a.callback.onNodeCreated,[b,c,d])}),b.bind(c.CLICK,function(b,c,d,e,f){tools.apply(a.callback.onClick,[c,d,e,f])}),b.bind(c.EXPAND,function(b,c,d){tools.apply(a.callback.onExpand,[b,c,d])}),b.bind(c.COLLAPSE,function(b,c,d){tools.apply(a.callback.onCollapse,[b,c,d])}),b.bind(c.ASYNC_SUCCESS,function(b,c,d,e){tools.apply(a.callback.onAsyncSuccess,[b,c,d,e])}),b.bind(c.ASYNC_ERROR,function(b,c,d,e,f,g){tools.apply(a.callback.onAsyncError,[b,c,d,e,f,g])}),b.bind(c.REMOVE,function(b,c,d){tools.apply(a.callback.onRemove,[b,c,d])})},_unbindEvent=function(a){var b=a.treeObj,c=consts.event;b.unbind(c.NODECREATED).unbind(c.CLICK).unbind(c.EXPAND).unbind(c.COLLAPSE).unbind(c.ASYNC_SUCCESS).unbind(c.ASYNC_ERROR).unbind(c.REMOVE)},_eventProxy=function(a){var k,b=a.target,c=data.getSetting(a.data.treeId),d="",e=null,f="",g="",h=null,i=null,j=null;if(tools.eqs(a.type,"mousedown")?g="mousedown":tools.eqs(a.type,"mouseup")?g="mouseup":tools.eqs(a.type,"contextmenu")?g="contextmenu":tools.eqs(a.type,"click")?tools.eqs(b.tagName,"span")&&null!==b.getAttribute("treeNode"+consts.id.SWITCH)?(d=tools.getNodeMainDom(b).id,f="switchNode"):(j=tools.getMDom(c,b,[{tagName:"a",attrName:"treeNode"+consts.id.A}]),j&&(d=tools.getNodeMainDom(j).id,f="clickNode")):tools.eqs(a.type,"dblclick")&&(g="dblclick",j=tools.getMDom(c,b,[{tagName:"a",attrName:"treeNode"+consts.id.A}]),j&&(d=tools.getNodeMainDom(j).id,f="switchNode")),g.length>0&&0==d.length&&(j=tools.getMDom(c,b,[{tagName:"a",attrName:"treeNode"+consts.id.A}]),j&&(d=tools.getNodeMainDom(j).id)),d.length>0)switch(e=data.getNodeCache(c,d),f){case"switchNode":e.isParent?tools.eqs(a.type,"click")||tools.eqs(a.type,"dblclick")&&tools.apply(c.view.dblClickExpand,[c.treeId,e],c.view.dblClickExpand)?h=handler.onSwitchNode:f="":f="";break;case"clickNode":h=handler.onClickNode}switch(g){case"mousedown":i=handler.onZTreeMousedown;break;case"mouseup":i=handler.onZTreeMouseup;break;case"dblclick":i=handler.onZTreeDblclick;break;case"contextmenu":i=handler.onZTreeContextmenu}return k={stop:!1,node:e,nodeEventType:f,nodeEventCallback:h,treeEventType:g,treeEventCallback:i}},_initNode=function(a,b,c,d,e,f){if(c){var h=data.getRoot(a),i=a.data.key.children;c.level=b,c.tId=a.treeId+"_"+ ++h.zId,c.parentTId=d?d.tId:null,c.open="string"==typeof c.open?tools.eqs(c.open,"true"):!!c.open,c[i]&&c[i].length>0?(c.isParent=!0,c.zAsync=!0):(c.isParent="string"==typeof c.isParent?tools.eqs(c.isParent,"true"):!!c.isParent,c.open=c.isParent&&!a.async.enable?c.open:!1,c.zAsync=!c.isParent),c.isFirstNode=e,c.isLastNode=f,c.getParentNode=function(){return data.getNodeCache(a,c.parentTId)},c.getPreNode=function(){return data.getPreNode(a,c)},c.getNextNode=function(){return data.getNextNode(a,c)},c.isAjaxing=!1,data.fixPIdKeyValue(a,c)}},_init={bind:[_bindEvent],unbind:[_unbindEvent],caches:[_initCache],nodes:[_initNode],proxys:[_eventProxy],roots:[_initRoot],beforeA:[],afterA:[],innerBeforeA:[],innerAfterA:[],zTreeTools:[]},data={addNodeCache:function(a,b){data.getCache(a).nodes[data.getNodeCacheId(b.tId)]=b},getNodeCacheId:function(a){return a.substring(a.lastIndexOf("_")+1)},addAfterA:function(a){_init.afterA.push(a)},addBeforeA:function(a){_init.beforeA.push(a)},addInnerAfterA:function(a){_init.innerAfterA.push(a)},addInnerBeforeA:function(a){_init.innerBeforeA.push(a)},addInitBind:function(a){_init.bind.push(a)},addInitUnBind:function(a){_init.unbind.push(a)},addInitCache:function(a){_init.caches.push(a)},addInitNode:function(a){_init.nodes.push(a)},addInitProxy:function(a,b){b?_init.proxys.splice(0,0,a):_init.proxys.push(a)},addInitRoot:function(a){_init.roots.push(a)},addNodesData:function(a,b,c){var d=a.data.key.children;b[d]||(b[d]=[]),b[d].length>0&&(b[d][b[d].length-1].isLastNode=!1,view.setNodeLineIcos(a,b[d][b[d].length-1])),b.isParent=!0,b[d]=b[d].concat(c)},addSelectedNode:function(a,b){var c=data.getRoot(a);data.isSelectedNode(a,b)||c.curSelectedList.push(b)},addCreatedNode:function(a,b){if(a.callback.onNodeCreated||a.view.addDiyDom){var c=data.getRoot(a);c.createdNodes.push(b)}},addZTreeTools:function(a){_init.zTreeTools.push(a)},exSetting:function(a){$.extend(!0,_setting,a)},fixPIdKeyValue:function(a,b){a.data.simpleData.enable&&(b[a.data.simpleData.pIdKey]=b.parentTId?b.getParentNode()[a.data.simpleData.idKey]:a.data.simpleData.rootPId)},getAfterA:function(){for(var d=0,e=_init.afterA.length;e>d;d++)_init.afterA[d].apply(this,arguments)},getBeforeA:function(){for(var d=0,e=_init.beforeA.length;e>d;d++)_init.beforeA[d].apply(this,arguments)},getInnerAfterA:function(){for(var d=0,e=_init.innerAfterA.length;e>d;d++)_init.innerAfterA[d].apply(this,arguments)},getInnerBeforeA:function(){for(var d=0,e=_init.innerBeforeA.length;e>d;d++)_init.innerBeforeA[d].apply(this,arguments)},getCache:function(a){return caches[a.treeId]},getNextNode:function(a,b){var c,d,e,f;if(!b)return null;for(c=a.data.key.children,d=b.parentTId?b.getParentNode():data.getRoot(a),e=0,f=d[c].length-1;f>=e;e++)if(d[c][e]===b)return e==f?null:d[c][e+1];return null},getNodeByParam:function(a,b,c,d){var e,f,g,h;if(!b||!c)return null;for(e=a.data.key.children,f=0,g=b.length;g>f;f++){if(b[f][c]==d)return b[f];if(h=data.getNodeByParam(a,b[f][e],c,d))return h}return null},getNodeCache:function(a,b){if(!b)return null;var c=caches[a.treeId].nodes[data.getNodeCacheId(b)];return c?c:null},getNodeName:function(a,b){var c=a.data.key.name;return""+b[c]},getNodeTitle:function(a,b){var c=""===a.data.key.title?a.data.key.name:a.data.key.title;return""+b[c]},getNodes:function(a){return data.getRoot(a)[a.data.key.children]},getNodesByParam:function(a,b,c,d){var e,f,g,h;if(!b||!c)return[];for(e=a.data.key.children,f=[],g=0,h=b.length;h>g;g++)b[g][c]==d&&f.push(b[g]),f=f.concat(data.getNodesByParam(a,b[g][e],c,d));return f},getNodesByParamFuzzy:function(a,b,c,d){var e,f,g,h;if(!b||!c)return[];for(e=a.data.key.children,f=[],d=d.toLowerCase(),g=0,h=b.length;h>g;g++)"string"==typeof b[g][c]&&b[g][c].toLowerCase().indexOf(d)>-1&&f.push(b[g]),f=f.concat(data.getNodesByParamFuzzy(a,b[g][e],c,d));return f},getNodesByFilter:function(a,b,c,d,e){var f,g,h,i,j;if(!b)return d?null:[];for(f=a.data.key.children,g=d?null:[],h=0,i=b.length;i>h;h++){if(tools.apply(c,[b[h],e],!1)){if(d)return b[h];g.push(b[h])}if(j=data.getNodesByFilter(a,b[h][f],c,d,e),d&&j)return j;g=d?j:g.concat(j)}return g},getPreNode:function(a,b){var c,d,e,f;if(!b)return null;for(c=a.data.key.children,d=b.parentTId?b.getParentNode():data.getRoot(a),e=0,f=d[c].length;f>e;e++)if(d[c][e]===b)return 0==e?null:d[c][e-1];return null},getRoot:function(a){return a?roots[a.treeId]:null},getRoots:function(){return roots},getSetting:function(a){return settings[a]},getSettings:function(){return settings},getZTreeTools:function(a){var b=this.getRoot(this.getSetting(a));return b?b.treeTools:null},initCache:function(){for(var b=0,c=_init.caches.length;c>b;b++)_init.caches[b].apply(this,arguments)},initNode:function(){for(var g=0,h=_init.nodes.length;h>g;g++)_init.nodes[g].apply(this,arguments)},initRoot:function(){for(var b=0,c=_init.roots.length;c>b;b++)_init.roots[b].apply(this,arguments)},isSelectedNode:function(a,b){var d,e,c=data.getRoot(a);for(d=0,e=c.curSelectedList.length;e>d;d++)if(b===c.curSelectedList[d])return!0;return!1},removeNodeCache:function(a,b){var d,e,c=a.data.key.children;if(b[c])for(d=0,e=b[c].length;e>d;d++)arguments.callee(a,b[c][d]);data.getCache(a).nodes[data.getNodeCacheId(b.tId)]=null},removeSelectedNode:function(a,b){var d,e,c=data.getRoot(a);for(d=0,e=c.curSelectedList.length;e>d;d++)b!==c.curSelectedList[d]&&data.getNodeCache(a,c.curSelectedList[d].tId)||(c.curSelectedList.splice(d,1),d--,e--)},setCache:function(a,b){caches[a.treeId]=b},setRoot:function(a,b){roots[a.treeId]=b},setZTreeTools:function(){for(var c=0,d=_init.zTreeTools.length;d>c;c++)_init.zTreeTools[c].apply(this,arguments)},transformToArrayFormat:function(a,b){var c,d,e,f;if(!b)return[];if(c=a.data.key.children,d=[],tools.isArray(b))for(e=0,f=b.length;f>e;e++)d.push(b[e]),b[e][c]&&(d=d.concat(data.transformToArrayFormat(a,b[e][c])));else d.push(b),b[c]&&(d=d.concat(data.transformToArrayFormat(a,b[c])));return d},transformTozTreeFormat:function(a,b){var c,d,h,i,e=a.data.simpleData.idKey,f=a.data.simpleData.pIdKey,g=a.data.key.children;if(!e||""==e||!b)return[];if(tools.isArray(b)){for(h=[],i=[],c=0,d=b.length;d>c;c++)i[b[c][e]]=b[c];for(c=0,d=b.length;d>c;c++)i[b[c][f]]&&b[c][e]!=b[c][f]?(i[b[c][f]][g]||(i[b[c][f]][g]=[]),i[b[c][f]][g].push(b[c])):h.push(b[c]);return h}return[b]}},event={bindEvent:function(){for(var b=0,c=_init.bind.length;c>b;b++)_init.bind[b].apply(this,arguments)},unbindEvent:function(){for(var b=0,c=_init.unbind.length;c>b;b++)_init.unbind[b].apply(this,arguments)},bindTree:function(a){var b={treeId:a.treeId},c=a.treeObj;a.view.txtSelectedEnable||c.bind("selectstart",function(a){var c=a.originalEvent.srcElement.nodeName.toLowerCase();return"input"===c||"textarea"===c}).css({"-moz-user-select":"-moz-none"}),c.bind("click",b,event.proxy),c.bind("dblclick",b,event.proxy),c.bind("mouseover",b,event.proxy),c.bind("mouseout",b,event.proxy),c.bind("mousedown",b,event.proxy),c.bind("mouseup",b,event.proxy),c.bind("contextmenu",b,event.proxy)},unbindTree:function(a){var b=a.treeObj;b.unbind("click",event.proxy).unbind("dblclick",event.proxy).unbind("mouseover",event.proxy).unbind("mouseout",event.proxy).unbind("mousedown",event.proxy).unbind("mouseup",event.proxy).unbind("contextmenu",event.proxy)},doProxy:function(){var c,d,e,b=[];for(c=0,d=_init.proxys.length;d>c&&(e=_init.proxys[c].apply(this,arguments),b.push(e),!e.stop);c++);return b},proxy:function(a){var c,d,e,f,g,h,b=data.getSetting(a.data.treeId);if(!tools.uCanDo(b,a))return!0;for(c=event.doProxy(a),d=!0,e=!1,f=0,g=c.length;g>f;f++)h=c[f],h.nodeEventCallback&&(e=!0,d=h.nodeEventCallback.apply(h,[a,h.node])&&d),h.treeEventCallback&&(e=!0,d=h.treeEventCallback.apply(h,[a,h.node])&&d);return d}},handler={onSwitchNode:function(a,b){var c=data.getSetting(a.data.treeId);if(b.open){if(0==tools.apply(c.callback.beforeCollapse,[c.treeId,b],!0))return!0;data.getRoot(c).expandTriggerFlag=!0,view.switchNode(c,b)}else{if(0==tools.apply(c.callback.beforeExpand,[c.treeId,b],!0))return!0;data.getRoot(c).expandTriggerFlag=!0,view.switchNode(c,b)}return!0},onClickNode:function(a,b){var c=data.getSetting(a.data.treeId),d=c.view.autoCancelSelected&&(a.ctrlKey||a.metaKey)&&data.isSelectedNode(c,b)?0:c.view.autoCancelSelected&&(a.ctrlKey||a.metaKey)&&c.view.selectedMulti?2:1;return 0==tools.apply(c.callback.beforeClick,[c.treeId,b,d],!0)?!0:(0===d?view.cancelPreSelectedNode(c,b):view.selectNode(c,b,2===d),c.treeObj.trigger(consts.event.CLICK,[a,c.treeId,b,d]),!0)},onZTreeMousedown:function(a,b){var c=data.getSetting(a.data.treeId);return tools.apply(c.callback.beforeMouseDown,[c.treeId,b],!0)&&tools.apply(c.callback.onMouseDown,[a,c.treeId,b]),!0},onZTreeMouseup:function(a,b){var c=data.getSetting(a.data.treeId);return tools.apply(c.callback.beforeMouseUp,[c.treeId,b],!0)&&tools.apply(c.callback.onMouseUp,[a,c.treeId,b]),!0},onZTreeDblclick:function(a,b){var c=data.getSetting(a.data.treeId);return tools.apply(c.callback.beforeDblClick,[c.treeId,b],!0)&&tools.apply(c.callback.onDblClick,[a,c.treeId,b]),!0},onZTreeContextmenu:function(a,b){var c=data.getSetting(a.data.treeId);return tools.apply(c.callback.beforeRightClick,[c.treeId,b],!0)&&tools.apply(c.callback.onRightClick,[a,c.treeId,b]),"function"!=typeof c.callback.onRightClick}},tools={apply:function(a,b,c){return"function"==typeof a?a.apply(zt,b?b:[]):c},canAsync:function(a,b){var c=a.data.key.children;return a.async.enable&&b&&b.isParent&&!(b.zAsync||b[c]&&b[c].length>0)},clone:function(a){var b,c;if(null===a)return null;b=tools.isArray(a)?[]:{};for(c in a)b[c]=a[c]instanceof Date?new Date(a[c].getTime()):"object"==typeof a[c]?arguments.callee(a[c]):a[c];return b},eqs:function(a,b){return a.toLowerCase()===b.toLowerCase()},isArray:function(a){return"[object Array]"===Object.prototype.toString.apply(a)},$:function(a,b,c){return b&&"string"!=typeof b&&(c=b,b=""),"string"==typeof a?$(a,c?c.treeObj.get(0).ownerDocument:null):$("#"+a.tId+b,c?c.treeObj:null)},getMDom:function(a,b,c){if(!b)return null;for(;b&&b.id!==a.treeId;){for(var d=0,e=c.length;b.tagName&&e>d;d++)if(tools.eqs(b.tagName,c[d].tagName)&&null!==b.getAttribute(c[d].attrName))return b;b=b.parentNode}return null},getNodeMainDom:function(a){return $(a).parent("li").get(0)||$(a).parentsUntil("li").parent().get(0)},isChildOrSelf:function(a,b){return $(a).closest("#"+b).length>0},uCanDo:function(){return!0}},view={addNodes:function(a,b,c,d){if(!a.data.keep.leaf||!b||b.isParent)if(tools.isArray(c)||(c=[c]),a.data.simpleData.enable&&(c=data.transformTozTreeFormat(a,c)),b){var e=$$(b,consts.id.SWITCH,a),f=$$(b,consts.id.ICON,a),g=$$(b,consts.id.UL,a);b.open||(view.replaceSwitchClass(b,e,consts.folder.CLOSE),view.replaceIcoClass(b,f,consts.folder.CLOSE),b.open=!1,g.css({display:"none"})),data.addNodesData(a,b,c),view.createNodes(a,b.level+1,c,b),d||view.expandCollapseParentNode(a,b,!0)}else data.addNodesData(a,data.getRoot(a),c),view.createNodes(a,0,c,null)},appendNodes:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p;if(!c)return[];for(g=[],h=a.data.key.children,i=0,j=c.length;j>i;i++)k=c[i],e&&(l=d?d:data.getRoot(a),m=l[h],n=m.length==c.length&&0==i,o=i==c.length-1,data.initNode(a,b,k,d,n,o,f),data.addNodeCache(a,k)),p=[],k[h]&&k[h].length>0&&(p=view.appendNodes(a,b+1,k[h],k,e,f&&k.open)),f&&(view.makeDOMNodeMainBefore(g,a,k),view.makeDOMNodeLine(g,a,k),data.getBeforeA(a,k,g),view.makeDOMNodeNameBefore(g,a,k),data.getInnerBeforeA(a,k,g),view.makeDOMNodeIcon(g,a,k),data.getInnerAfterA(a,k,g),view.makeDOMNodeNameAfter(g,a,k),data.getAfterA(a,k,g),k.isParent&&k.open&&view.makeUlHtml(a,k,g,p.join("")),view.makeDOMNodeMainAfter(g,a,k),data.addCreatedNode(a,k));return g},appendParentULDom:function(a,b){var e,f,g,c=[],d=$$(b,a);!d.get(0)&&b.parentTId&&(view.appendParentULDom(a,b.getParentNode()),d=$$(b,a)),e=$$(b,consts.id.UL,a),e.get(0)&&e.remove(),f=a.data.key.children,g=view.appendNodes(a,b.level+1,b[f],b,!1,!0),view.makeUlHtml(a,b,c,g.join("")),d.append(c.join(""))},asyncNode:function(setting,node,isSilent,callback){var i,l,icoObj,tmpParam,pKey,spKey,p,_tmpV;if(node&&!node.isParent)return tools.apply(callback),!1;if(node&&node.isAjaxing)return!1;if(0==tools.apply(setting.callback.beforeAsync,[setting.treeId,node],!0))return tools.apply(callback),!1;for(node&&(node.isAjaxing=!0,icoObj=$$(node,consts.id.ICON,setting),icoObj.attr({style:"","class":consts.className.BUTTON+" "+consts.className.ICO_LOADING})),tmpParam={},i=0,l=setting.async.autoParam.length;node&&l>i;i++)pKey=setting.async.autoParam[i].split("="),spKey=pKey,pKey.length>1&&(spKey=pKey[1],pKey=pKey[0]),tmpParam[spKey]=node[pKey];if(tools.isArray(setting.async.otherParam))for(i=0,l=setting.async.otherParam.length;l>i;i+=2)tmpParam[setting.async.otherParam[i]]=setting.async.otherParam[i+1];else for(p in setting.async.otherParam)tmpParam[p]=setting.async.otherParam[p];return _tmpV=data.getRoot(setting)._ver,$.ajax({contentType:setting.async.contentType,cache:!1,type:setting.async.type,url:tools.apply(setting.async.url,[setting.treeId,node],setting.async.url),data:tmpParam,dataType:setting.async.dataType,success:function(msg){if(_tmpV==data.getRoot(setting)._ver){var newNodes=[];try{newNodes=msg&&0!=msg.length?"string"==typeof msg?eval("("+msg+")"):msg:[]}catch(err){newNodes=msg}node&&(node.isAjaxing=null,node.zAsync=!0),view.setNodeLineIcos(setting,node),newNodes&&""!==newNodes?(newNodes=tools.apply(setting.async.dataFilter,[setting.treeId,node,newNodes],newNodes),view.addNodes(setting,node,newNodes?tools.clone(newNodes):[],!!isSilent)):view.addNodes(setting,node,[],!!isSilent),setting.treeObj.trigger(consts.event.ASYNC_SUCCESS,[setting.treeId,node,msg]),tools.apply(callback)}},error:function(a,b,c){_tmpV==data.getRoot(setting)._ver&&(node&&(node.isAjaxing=null),view.setNodeLineIcos(setting,node),setting.treeObj.trigger(consts.event.ASYNC_ERROR,[setting.treeId,node,a,b,c]))}}),!0},cancelPreSelectedNode:function(a,b){var d,e,c=data.getRoot(a).curSelectedList;for(d=0,e=c.length-1;e>=d;e--)if((!b||b===c[e])&&($$(c[e],consts.id.A,a).removeClass(consts.node.CURSELECTED),b)){data.removeSelectedNode(a,b);break}b||(data.getRoot(a).curSelectedList=[])},createNodeCallback:function(a){var b,c;if(a.callback.onNodeCreated||a.view.addDiyDom)for(b=data.getRoot(a);b.createdNodes.length>0;)c=b.createdNodes.shift(),tools.apply(a.view.addDiyDom,[a.treeId,c]),a.callback.onNodeCreated&&a.treeObj.trigger(consts.event.NODECREATED,[a.treeId,c])},createNodes:function(a,b,c,d){var e,f,g,h,i;c&&0!=c.length&&(e=data.getRoot(a),f=a.data.key.children,g=!d||d.open||!!$$(d[f][0],a).get(0),e.createdNodes=[],h=view.appendNodes(a,b,c,d,!0,g),d?(i=$$(d,consts.id.UL,a),i.get(0)&&i.append(h.join(""))):a.treeObj.append(h.join("")),view.createNodeCallback(a))},destroy:function(a){a&&(data.initCache(a),data.initRoot(a),event.unbindTree(a),event.unbindEvent(a),a.treeObj.empty(),delete settings[a.treeId])},expandCollapseNode:function(a,b,c,d,e){var h,i,j,k,f=data.getRoot(a),g=a.data.key.children;return b?(f.expandTriggerFlag&&(h=e,e=function(){h&&h(),b.open?a.treeObj.trigger(consts.event.EXPAND,[a.treeId,b]):a.treeObj.trigger(consts.event.COLLAPSE,[a.treeId,b])},f.expandTriggerFlag=!1),!b.open&&b.isParent&&(!$$(b,consts.id.UL,a).get(0)||b[g]&&b[g].length>0&&!$$(b[g][0],a).get(0))&&(view.appendParentULDom(a,b),view.createNodeCallback(a)),b.open==c?(tools.apply(e,[]),void 0):(i=$$(b,consts.id.UL,a),j=$$(b,consts.id.SWITCH,a),k=$$(b,consts.id.ICON,a),b.isParent?(b.open=!b.open,b.iconOpen&&b.iconClose&&k.attr("style",view.makeNodeIcoStyle(a,b)),b.open?(view.replaceSwitchClass(b,j,consts.folder.OPEN),view.replaceIcoClass(b,k,consts.folder.OPEN),0==d||""==a.view.expandSpeed?(i.show(),tools.apply(e,[])):b[g]&&b[g].length>0?i.slideDown(a.view.expandSpeed,e):(i.show(),tools.apply(e,[]))):(view.replaceSwitchClass(b,j,consts.folder.CLOSE),view.replaceIcoClass(b,k,consts.folder.CLOSE),0!=d&&""!=a.view.expandSpeed&&b[g]&&b[g].length>0?i.slideUp(a.view.expandSpeed,e):(i.hide(),tools.apply(e,[])))):tools.apply(e,[]),void 0)):(tools.apply(e,[]),void 0)},expandCollapseParentNode:function(a,b,c,d,e){if(b){if(!b.parentTId)return view.expandCollapseNode(a,b,c,d,e),void 0;view.expandCollapseNode(a,b,c,d),b.parentTId&&view.expandCollapseParentNode(a,b.getParentNode(),c,d,e)}},expandCollapseSonNode:function(a,b,c,d,e){var k,l,f=data.getRoot(a),g=a.data.key.children,h=b?b[g]:f[g],i=b?!1:d,j=data.getRoot(a).expandTriggerFlag;if(data.getRoot(a).expandTriggerFlag=!1,h)for(k=0,l=h.length;l>k;k++)h[k]&&view.expandCollapseSonNode(a,h[k],c,i);data.getRoot(a).expandTriggerFlag=j,view.expandCollapseNode(a,b,c,d,e)},makeDOMNodeIcon:function(a,b,c){var d=data.getNodeName(b,c),e=b.view.nameIsHTML?d:d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");a.push("<span id='",c.tId,consts.id.ICON,"' title='' treeNode",consts.id.ICON," class='",view.makeNodeIcoClass(b,c),"' style='",view.makeNodeIcoStyle(b,c),"'></span><span id='",c.tId,consts.id.SPAN,"'>",e,"</span>")},makeDOMNodeLine:function(a,b,c){a.push("<span id='",c.tId,consts.id.SWITCH,"' title='' class='",view.makeNodeLineClass(b,c),"' treeNode",consts.id.SWITCH,"></span>")},makeDOMNodeMainAfter:function(a){a.push("</li>")},makeDOMNodeMainBefore:function(a,b,c){a.push("<li id='",c.tId,"' class='",consts.className.LEVEL,c.level,"' tabindex='0' hidefocus='true' treenode>")},makeDOMNodeNameAfter:function(a){a.push("</a>")},makeDOMNodeNameBefore:function(a,b,c){var h,d=data.getNodeTitle(b,c),e=view.makeNodeUrl(b,c),f=view.makeNodeFontCss(b,c),g=[];for(h in f)g.push(h,":",f[h],";");a.push("<a id='",c.tId,consts.id.A,"' class='",consts.className.LEVEL,c.level,"' treeNode",consts.id.A,' onclick="',c.click||"",'" ',null!=e&&e.length>0?"href='"+e+"'":""," target='",view.makeNodeTarget(c),"' style='",g.join(""),"'"),tools.apply(b.view.showTitle,[b.treeId,c],b.view.showTitle)&&d&&a.push("title='",d.replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"'"),a.push(">")},makeNodeFontCss:function(a,b){var c=tools.apply(a.view.fontCss,[a.treeId,b],a.view.fontCss);return c&&"function"!=typeof c?c:{}},makeNodeIcoClass:function(a,b){var c=["ico"];return b.isAjaxing||(c[0]=(b.iconSkin?b.iconSkin+"_":"")+c[0],b.isParent?c.push(b.open?consts.folder.OPEN:consts.folder.CLOSE):c.push(consts.folder.DOCU)),consts.className.BUTTON+" "+c.join("_")},makeNodeIcoStyle:function(a,b){var d,c=[];return b.isAjaxing||(d=b.isParent&&b.iconOpen&&b.iconClose?b.open?b.iconOpen:b.iconClose:b.icon,d&&c.push("background:url(",d,") 0 0 no-repeat;"),0!=a.view.showIcon&&tools.apply(a.view.showIcon,[a.treeId,b],!0)||c.push("width:0px;height:0px;")),c.join("")},makeNodeLineClass:function(a,b){var c=[];return a.view.showLine?0==b.level&&b.isFirstNode&&b.isLastNode?c.push(consts.line.ROOT):0==b.level&&b.isFirstNode?c.push(consts.line.ROOTS):b.isLastNode?c.push(consts.line.BOTTOM):c.push(consts.line.CENTER):c.push(consts.line.NOLINE),b.isParent?c.push(b.open?consts.folder.OPEN:consts.folder.CLOSE):c.push(consts.folder.DOCU),view.makeNodeLineClassEx(b)+c.join("_")},makeNodeLineClassEx:function(a){return consts.className.BUTTON+" "+consts.className.LEVEL+a.level+" "+consts.className.SWITCH+" "},makeNodeTarget:function(a){return a.target||"_self"},makeNodeUrl:function(a,b){var c=a.data.key.url;return b[c]?b[c]:null},makeUlHtml:function(a,b,c,d){c.push("<ul id='",b.tId,consts.id.UL,"' class='",consts.className.LEVEL,b.level," ",view.makeUlLineClass(a,b),"' style='display:",b.open?"block":"none","'>"),c.push(d),c.push("</ul>")},makeUlLineClass:function(a,b){return a.view.showLine&&!b.isLastNode?consts.line.LINE:""},removeChildNodes:function(a,b){var c,d,e,f,g,h;if(b&&(c=a.data.key.children,d=b[c])){for(e=0,f=d.length;f>e;e++)data.removeNodeCache(a,d[e]);data.removeSelectedNode(a),delete b[c],a.data.keep.parent?$$(b,consts.id.UL,a).empty():(b.isParent=!1,b.open=!1,g=$$(b,consts.id.SWITCH,a),h=$$(b,consts.id.ICON,a),view.replaceSwitchClass(b,g,consts.folder.DOCU),view.replaceIcoClass(b,h,consts.folder.DOCU),$$(b,consts.id.UL,a).remove())}},setFirstNode:function(a,b){var c=a.data.key.children,d=b[c].length;d>0&&(b[c][0].isFirstNode=!0)},setLastNode:function(a,b){var c=a.data.key.children,d=b[c].length;d>0&&(b[c][d-1].isLastNode=!0)},removeNode:function(a,b){var f,g,h,i,j,k,l,m,c=data.getRoot(a),d=a.data.key.children,e=b.parentTId?b.getParentNode():c;if(b.isFirstNode=!1,b.isLastNode=!1,b.getPreNode=function(){return null},b.getNextNode=function(){return null},data.getNodeCache(a,b.tId)){for($$(b,a).remove(),data.removeNodeCache(a,b),data.removeSelectedNode(a,b),f=0,g=e[d].length;g>f;f++)if(e[d][f].tId==b.tId){e[d].splice(f,1);break}view.setFirstNode(a,e),view.setLastNode(a,e),k=e[d].length,a.data.keep.parent||0!=k?a.view.showLine&&k>0&&(l=e[d][k-1],h=$$(l,consts.id.UL,a),i=$$(l,consts.id.SWITCH,a),j=$$(l,consts.id.ICON,a),e==c?1==e[d].length?view.replaceSwitchClass(l,i,consts.line.ROOT):(m=$$(e[d][0],consts.id.SWITCH,a),view.replaceSwitchClass(e[d][0],m,consts.line.ROOTS),view.replaceSwitchClass(l,i,consts.line.BOTTOM)):view.replaceSwitchClass(l,i,consts.line.BOTTOM),h.removeClass(consts.line.LINE)):(e.isParent=!1,e.open=!1,h=$$(e,consts.id.UL,a),i=$$(e,consts.id.SWITCH,a),j=$$(e,consts.id.ICON,a),view.replaceSwitchClass(e,i,consts.folder.DOCU),view.replaceIcoClass(e,j,consts.folder.DOCU),h.css("display","none"))}},replaceIcoClass:function(a,b,c){var d,e;if(b&&!a.isAjaxing&&(d=b.attr("class"),void 0!=d)){switch(e=d.split("_"),c){case consts.folder.OPEN:case consts.folder.CLOSE:case consts.folder.DOCU:e[e.length-1]=c}b.attr("class",e.join("_"))}},replaceSwitchClass:function(a,b,c){var d,e;if(b&&(d=b.attr("class"),void 0!=d)){switch(e=d.split("_"),c){case consts.line.ROOT:case consts.line.ROOTS:case consts.line.CENTER:case consts.line.BOTTOM:case consts.line.NOLINE:e[0]=view.makeNodeLineClassEx(a)+c;break;case consts.folder.OPEN:case consts.folder.CLOSE:case consts.folder.DOCU:e[1]=c}b.attr("class",e.join("_")),c!==consts.folder.DOCU?b.removeAttr("disabled"):b.attr("disabled","disabled")}},selectNode:function(a,b,c){c||view.cancelPreSelectedNode(a),$$(b,consts.id.A,a).addClass(consts.node.CURSELECTED),data.addSelectedNode(a,b)},setNodeFontCss:function(a,b){var c=$$(b,consts.id.A,a),d=view.makeNodeFontCss(a,b);d&&c.css(d)},setNodeLineIcos:function(a,b){if(b){var c=$$(b,consts.id.SWITCH,a),d=$$(b,consts.id.UL,a),e=$$(b,consts.id.ICON,a),f=view.makeUlLineClass(a,b);0==f.length?d.removeClass(consts.line.LINE):d.addClass(f),c.attr("class",view.makeNodeLineClass(a,b)),b.isParent?c.removeAttr("disabled"):c.attr("disabled","disabled"),e.removeAttr("style"),e.attr("style",view.makeNodeIcoStyle(a,b)),e.attr("class",view.makeNodeIcoClass(a,b))}},setNodeName:function(a,b){var e,c=data.getNodeTitle(a,b),d=$$(b,consts.id.SPAN,a);d.empty(),a.view.nameIsHTML?d.html(data.getNodeName(a,b)):d.text(data.getNodeName(a,b)),tools.apply(a.view.showTitle,[a.treeId,b],a.view.showTitle)&&(e=$$(b,consts.id.A,a),e.attr("title",c?c:""))},setNodeTarget:function(a,b){var c=$$(b,consts.id.A,a);c.attr("target",view.makeNodeTarget(b))},setNodeUrl:function(a,b){var c=$$(b,consts.id.A,a),d=view.makeNodeUrl(a,b);null==d||0==d.length?c.removeAttr("href"):c.attr("href",d)},switchNode:function(a,b){if(b.open||!tools.canAsync(a,b))view.expandCollapseNode(a,b,!b.open);else if(a.async.enable){if(!view.asyncNode(a,b))return view.expandCollapseNode(a,b,!b.open),void 0}else b&&view.expandCollapseNode(a,b,!b.open)}};$.fn.zTree={consts:_consts,_z:{tools:tools,view:view,event:event,data:data},getZTreeObj:function(a){var b=data.getZTreeTools(a);return b?b:null},destroy:function(a){if(a&&a.length>0)view.destroy(data.getSetting(a));else for(var b in settings)view.destroy(settings[b])},init:function(a,b,c){var e,f,g,d=tools.clone(_setting);return $.extend(!0,d,b),d.treeId=a.attr("id"),d.treeObj=a,d.treeObj.empty(),settings[d.treeId]=d,"undefined"==typeof document.body.style.maxHeight&&(d.view.expandSpeed=""),data.initRoot(d),e=data.getRoot(d),f=d.data.key.children,c=c?tools.clone(tools.isArray(c)?c:[c]):[],e[f]=d.data.simpleData.enable?data.transformTozTreeFormat(d,c):c,data.initCache(d),event.unbindTree(d),event.bindTree(d),event.unbindEvent(d),event.bindEvent(d),g={setting:d,addNodes:function(a,b,c){function f(){view.addNodes(d,a,e,1==c)}if(!b)return null;if(a||(a=null),a&&!a.isParent&&d.data.keep.leaf)return null;var e=tools.clone(tools.isArray(b)?b:[b]);return tools.canAsync(d,a)?view.asyncNode(d,a,c,f):f(),e},cancelSelectedNode:function(a){view.cancelPreSelectedNode(d,a)},destroy:function(){view.destroy(d)},expandAll:function(a){return a=!!a,view.expandCollapseSonNode(d,null,a,!0),a},expandNode:function(a,b,c,e,f){if(!a||!a.isParent)return null;if(b!==!0&&b!==!1&&(b=!a.open),f=!!f,f&&b&&0==tools.apply(d.callback.beforeExpand,[d.treeId,a],!0))return null;if(f&&!b&&0==tools.apply(d.callback.beforeCollapse,[d.treeId,a],!0))return null;if(b&&a.parentTId&&view.expandCollapseParentNode(d,a.getParentNode(),b,!1),b===a.open&&!c)return null;if(data.getRoot(d).expandTriggerFlag=f,!tools.canAsync(d,a)&&c)view.expandCollapseSonNode(d,a,b,!0,function(){if(e!==!1)try{$$(a,d).focus().blur()}catch(b){}});else if(a.open=!b,view.switchNode(this.setting,a),e!==!1)try{$$(a,d).focus().blur()}catch(g){}return b},getNodes:function(){return data.getNodes(d)},getNodeByParam:function(a,b,c){return a?data.getNodeByParam(d,c?c[d.data.key.children]:data.getNodes(d),a,b):null},getNodeByTId:function(a){return data.getNodeCache(d,a)},getNodesByParam:function(a,b,c){return a?data.getNodesByParam(d,c?c[d.data.key.children]:data.getNodes(d),a,b):null},getNodesByParamFuzzy:function(a,b,c){return a?data.getNodesByParamFuzzy(d,c?c[d.data.key.children]:data.getNodes(d),a,b):null},getNodesByFilter:function(a,b,c,e){return b=!!b,a&&"function"==typeof a?data.getNodesByFilter(d,c?c[d.data.key.children]:data.getNodes(d),a,b,e):b?null:[]},getNodeIndex:function(a){var b,c,e,f;if(!a)return null;for(b=d.data.key.children,c=a.parentTId?a.getParentNode():data.getRoot(d),e=0,f=c[b].length;f>e;e++)if(c[b][e]==a)return e;return-1},getSelectedNodes:function(){var c,e,a=[],b=data.getRoot(d).curSelectedList;for(c=0,e=b.length;e>c;c++)a.push(b[c]);return a},isSelectedNode:function(a){return data.isSelectedNode(d,a)},reAsyncChildNodes:function(a,b,c){var e,f,g,h,i;if(this.setting.async.enable){if(e=!a,e&&(a=data.getRoot(d)),"refresh"==b){for(f=this.setting.data.key.children,g=0,h=a[f]?a[f].length:0;h>g;g++)data.removeNodeCache(d,a[f][g]);data.removeSelectedNode(d),a[f]=[],e?this.setting.treeObj.empty():(i=$$(a,consts.id.UL,d),i.empty())}view.asyncNode(this.setting,e?null:a,!!c)}},refresh:function(){this.setting.treeObj.empty();var a=data.getRoot(d),b=a[d.data.key.children];data.initRoot(d),a[d.data.key.children]=b,data.initCache(d),view.createNodes(d,0,a[d.data.key.children])},removeChildNodes:function(a){if(!a)return null;var b=d.data.key.children,c=a[b];return view.removeChildNodes(d,a),c?c:null},removeNode:function(a,b){a&&(b=!!b,b&&0==tools.apply(d.callback.beforeRemove,[d.treeId,a],!0)||(view.removeNode(d,a),b&&this.setting.treeObj.trigger(consts.event.REMOVE,[d.treeId,a])))},selectNode:function(a,b){if(a&&tools.uCanDo(d)){if(b=d.view.selectedMulti&&b,a.parentTId)view.expandCollapseParentNode(d,a.getParentNode(),!0,!1,function(){try{$$(a,d).focus().blur()}catch(b){}});else try{$$(a,d).focus().blur()}catch(c){}view.selectNode(d,a,b)}},transformTozTreeNodes:function(a){return data.transformTozTreeFormat(d,a)},transformToArray:function(a){return data.transformToArrayFormat(d,a)},updateNode:function(a){if(a){var c=$$(a,d);c.get(0)&&tools.uCanDo(d)&&(view.setNodeName(d,a),view.setNodeTarget(d,a),view.setNodeUrl(d,a),view.setNodeLineIcos(d,a),view.setNodeFontCss(d,a))}}},e.treeTools=g,data.setZTreeTools(d,g),e[f]&&e[f].length>0?view.createNodes(d,0,e[f]):d.async.enable&&d.async.url&&""!==d.async.url&&view.asyncNode(d),g}},zt=$.fn.zTree,$$=tools.$,consts=zt.consts}(jQuery);

/*<script src="${ctxStatic}/org/tinygroup/zTree/js/jquery.ztree.exhide-3.5.js"></script>*/
!function(a){var h,i,j,k,l,n,o,p,q,r,s,t,u,b=function(a,b,c){"string"==typeof c.isHidden&&(c.isHidden=i.eqs(c.isHidden,"true")),c.isHidden=!!c.isHidden,l.initHideForExCheck(a,c)},c=function(){},d=function(a,b){b.showNodes=function(b,c){k.showNodes(a,b,c)},b.showNode=function(b,c){b&&k.showNodes(a,[b],c)},b.hideNodes=function(b,c){k.hideNodes(a,b,c)},b.hideNode=function(b,c){b&&k.hideNodes(a,[b],c)};var c=b.checkNode;c&&(b.checkNode=function(a){a&&a.isHidden||c.apply(b,arguments)})},e={initHideForExCheck:function(a,b){b.isHidden&&a.check&&a.check.enable&&("undefined"==typeof b._nocheck&&(b._nocheck=!!b.nocheck,b.nocheck=!0),b.check_Child_State=-1,k.repairParentChkClassWithSelf&&k.repairParentChkClassWithSelf(a,b))},initShowForExCheck:function(a,b){if(!b.isHidden&&a.check&&a.check.enable){if("undefined"!=typeof b._nocheck&&(b.nocheck=b._nocheck,delete b._nocheck),k.setChkClass){var c=n(b,j.id.CHECK,a);k.setChkClass(a,c,b)}k.repairParentChkClassWithSelf&&k.repairParentChkClassWithSelf(a,b)}}},f={clearOldFirstNode:function(a,b){for(var c=b.getNextNode();c;){if(c.isFirstNode){c.isFirstNode=!1,k.setNodeLineIcos(a,c);break}if(c.isLastNode)break;c=c.getNextNode()}},clearOldLastNode:function(a,b,c){for(var d=b.getPreNode();d;){if(d.isLastNode){d.isLastNode=!1,c&&k.setNodeLineIcos(a,d);break}if(d.isFirstNode)break;d=d.getPreNode()}},makeDOMNodeMainBefore:function(a,b,c){a.push("<li ",c.isHidden?"style='display:none;' ":"","id='",c.tId,"' class='",j.className.LEVEL,c.level,"' tabindex='0' hidefocus='true' treenode>")},showNode:function(a,b){b.isHidden=!1,l.initShowForExCheck(a,b),n(b,a).show()},showNodes:function(a,b,c){var e,f,d,g,h,i,j;if(b&&0!=b.length){for(d={},e=0,f=b.length;f>e;e++)g=b[e],d[g.parentTId]||(h=g.getParentNode(),d[g.parentTId]=null===h?l.getRoot(a):g.getParentNode()),k.showNode(a,g,c);for(i in d)j=d[i][a.data.key.children],k.setFirstNodeForShow(a,j),k.setLastNodeForShow(a,j)}},hideNode:function(a,b){b.isHidden=!0,b.isFirstNode=!1,b.isLastNode=!1,l.initHideForExCheck(a,b),k.cancelPreSelectedNode(a,b),n(b,a).hide()},hideNodes:function(a,b,c){var e,f,d,g,h,i,j;if(b&&0!=b.length){for(d={},e=0,f=b.length;f>e;e++)g=b[e],!g.isFirstNode&&!g.isLastNode||d[g.parentTId]||(h=g.getParentNode(),d[g.parentTId]=null===h?l.getRoot(a):g.getParentNode()),k.hideNode(a,g,c);for(i in d)j=d[i][a.data.key.children],k.setFirstNodeForHide(a,j),k.setLastNodeForHide(a,j)}},setFirstNode:function(a,b){var c=a.data.key.children,d=b[c].length;d>0&&!b[c][0].isHidden?b[c][0].isFirstNode=!0:d>0&&k.setFirstNodeForHide(a,b[c])},setLastNode:function(a,b){var c=a.data.key.children,d=b[c].length;d>0&&!b[c][0].isHidden?b[c][d-1].isLastNode=!0:d>0&&k.setLastNodeForHide(a,b[c])},setFirstNodeForHide:function(a,b){var c,d,e;for(d=0,e=b.length;e>d&&(c=b[d],!c.isFirstNode);d++){if(!c.isHidden&&!c.isFirstNode){c.isFirstNode=!0,k.setNodeLineIcos(a,c);break}c=null}return c},setFirstNodeForShow:function(a,b){var c,d,e,f,g;for(d=0,e=b.length;e>d;d++){if(c=b[d],!f&&!c.isHidden&&c.isFirstNode){f=c;break}if(f||c.isHidden||c.isFirstNode){if(f&&c.isFirstNode){c.isFirstNode=!1,g=c,k.setNodeLineIcos(a,c);break}c=null}else c.isFirstNode=!0,f=c,k.setNodeLineIcos(a,c)}return{"new":f,old:g}},setLastNodeForHide:function(a,b){var c,d;for(d=b.length-1;d>=0&&(c=b[d],!c.isLastNode);d--){if(!c.isHidden&&!c.isLastNode){c.isLastNode=!0,k.setNodeLineIcos(a,c);break}c=null}return c},setLastNodeForShow:function(a,b){var c,d,f,g;for(d=b.length-1;d>=0;d--){if(c=b[d],!f&&!c.isHidden&&c.isLastNode){f=c;break}if(f||c.isHidden||c.isLastNode){if(f&&c.isLastNode){c.isLastNode=!1,g=c,k.setNodeLineIcos(a,c);break}c=null}else c.isLastNode=!0,f=c,k.setNodeLineIcos(a,c)}return{"new":f,old:g}}},g={view:f,data:e};a.extend(!0,a.fn.zTree._z,g),h=a.fn.zTree,i=h._z.tools,j=h.consts,k=h._z.view,l=h._z.data,h._z.event,n=i.$,l.addInitNode(b),l.addBeforeA(c),l.addZTreeTools(d),o=l.initNode,l.initNode=function(a,b,c,d,e,f,g){var h=d?d:l.getRoot(a),i=h[a.data.key.children];l.tmpHideFirstNode=k.setFirstNodeForHide(a,i),l.tmpHideLastNode=k.setLastNodeForHide(a,i),g&&(k.setNodeLineIcos(a,l.tmpHideFirstNode),k.setNodeLineIcos(a,l.tmpHideLastNode)),e=l.tmpHideFirstNode===c,f=l.tmpHideLastNode===c,o&&o.apply(l,arguments),g&&f&&k.clearOldLastNode(a,c,g)},p=l.makeChkFlag,p&&(l.makeChkFlag=function(a,b){b&&b.isHidden||p.apply(l,arguments)}),q=l.getTreeCheckedNodes,q&&(l.getTreeCheckedNodes=function(a,b){if(b&&b.length>0){var e=b[0].getParentNode();if(e&&e.isHidden)return[]}return q.apply(l,arguments)}),r=l.getTreeChangeCheckedNodes,r&&(l.getTreeChangeCheckedNodes=function(a,b){if(b&&b.length>0){var d=b[0].getParentNode();if(d&&d.isHidden)return[]}return r.apply(l,arguments)}),s=k.expandCollapseSonNode,s&&(k.expandCollapseSonNode=function(a,b){b&&b.isHidden||s.apply(k,arguments)}),t=k.setSonNodeCheckBox,t&&(k.setSonNodeCheckBox=function(a,b){b&&b.isHidden||t.apply(k,arguments)}),u=k.repairParentChkClassWithSelf,u&&(k.repairParentChkClassWithSelf=function(a,b){b&&b.isHidden||u.apply(k,arguments)})}(jQuery);

/*<script src="${ctxStatic}/org/tinygroup/zTree/js/jquery.ztree.excheck-3.5.js"></script>*/
!function(a){var r,s,t,u,v,x,y,z,A,b={event:{CHECK:"ztree_check"},id:{CHECK:"_check"},checkbox:{STYLE:"checkbox",DEFAULT:"chk",DISABLED:"disable",FALSE:"false",TRUE:"true",FULL:"full",PART:"part",FOCUS:"focus"},radio:{STYLE:"radio",TYPE_ALL:"all",TYPE_LEVEL:"level"}},c={check:{enable:!1,autoCheckTrigger:!1,chkStyle:b.checkbox.STYLE,nocheckInherit:!1,chkDisabledInherit:!1,radioType:b.radio.TYPE_LEVEL,chkboxType:{Y:"ps",N:"ps"}},data:{key:{checked:"checked"}},callback:{beforeCheck:null,onCheck:null}},d=function(a){var b=v.getRoot(a);b.radioCheckedList=[]},e=function(){},f=function(a){var b=a.treeObj,c=t.event;b.bind(c.CHECK,function(b,c,d,e){b.srcEvent=c,s.apply(a.callback.onCheck,[b,d,e])})},g=function(a){var b=a.treeObj,c=t.event;b.unbind(c.CHECK)},h=function(a){var j,b=a.target,c=v.getSetting(a.data.treeId),d="",e=null,f="",g="",h=null,i=null;if(s.eqs(a.type,"mouseover")?c.check.enable&&s.eqs(b.tagName,"span")&&null!==b.getAttribute("treeNode"+t.id.CHECK)&&(d=s.getNodeMainDom(b).id,f="mouseoverCheck"):s.eqs(a.type,"mouseout")?c.check.enable&&s.eqs(b.tagName,"span")&&null!==b.getAttribute("treeNode"+t.id.CHECK)&&(d=s.getNodeMainDom(b).id,f="mouseoutCheck"):s.eqs(a.type,"click")&&c.check.enable&&s.eqs(b.tagName,"span")&&null!==b.getAttribute("treeNode"+t.id.CHECK)&&(d=s.getNodeMainDom(b).id,f="checkNode"),d.length>0)switch(e=v.getNodeCache(c,d),f){case"checkNode":h=n.onCheckNode;break;case"mouseoverCheck":h=n.onMouseoverCheck;break;case"mouseoutCheck":h=n.onMouseoutCheck}return j={stop:"checkNode"===f,node:e,nodeEventType:f,nodeEventCallback:h,treeEventType:g,treeEventCallback:i}},i=function(a,b,c,d){var h,i;c&&(h=a.data.key.checked,"string"==typeof c[h]&&(c[h]=s.eqs(c[h],"true")),c[h]=!!c[h],c.checkedOld=c[h],"string"==typeof c.nocheck&&(c.nocheck=s.eqs(c.nocheck,"true")),c.nocheck=!!c.nocheck||a.check.nocheckInherit&&d&&!!d.nocheck,"string"==typeof c.chkDisabled&&(c.chkDisabled=s.eqs(c.chkDisabled,"true")),c.chkDisabled=!!c.chkDisabled||a.check.chkDisabledInherit&&d&&!!d.chkDisabled,"string"==typeof c.halfCheck&&(c.halfCheck=s.eqs(c.halfCheck,"true")),c.halfCheck=!!c.halfCheck,c.check_Child_State=-1,c.check_Focus=!1,c.getCheckStatus=function(){return v.getCheckStatus(a,c)},a.check.chkStyle==t.radio.STYLE&&a.check.radioType==t.radio.TYPE_ALL&&c[h]&&(i=v.getRoot(a),i.radioCheckedList.push(c)))},j=function(a,b,c){a.data.key.checked,a.check.enable&&(v.makeChkFlag(a,b),c.push("<span ID='",b.tId,t.id.CHECK,"' class='",u.makeChkClass(a,b),"' treeNode",t.id.CHECK,b.nocheck===!0?" style='display:none;'":"","></span>"))},k=function(a,b){b.checkNode=function(a,b,c,d){var f,e=this.setting.data.key.checked;a.chkDisabled!==!0&&(b!==!0&&b!==!1&&(b=!a[e]),d=!!d,(a[e]!==b||c)&&(d&&0==s.apply(this.setting.callback.beforeCheck,[this.setting.treeId,a],!0)||s.uCanDo(this.setting)&&this.setting.check.enable&&a.nocheck!==!0&&(a[e]=b,f=x(a,t.id.CHECK,this.setting),(c||this.setting.check.chkStyle===t.radio.STYLE)&&u.checkNodeRelation(this.setting,a),u.setChkClass(this.setting,f,a),u.repairParentChkClassWithSelf(this.setting,a),d&&this.setting.treeObj.trigger(t.event.CHECK,[null,this.setting.treeId,a]))))},b.checkAllNodes=function(a){u.repairAllChk(this.setting,!!a)},b.getCheckedNodes=function(a){var b=this.setting.data.key.children;return a=a!==!1,v.getTreeCheckedNodes(this.setting,v.getRoot(this.setting)[b],a)},b.getChangeCheckedNodes=function(){var a=this.setting.data.key.children;return v.getTreeChangeCheckedNodes(this.setting,v.getRoot(this.setting)[a])},b.setChkDisabled=function(a,b,c,d){b=!!b,c=!!c,d=!!d,u.repairSonChkDisabled(this.setting,a,b,d),u.repairParentChkDisabled(this.setting,a.getParentNode(),b,c)};var c=b.updateNode;b.updateNode=function(a,d){var e,f;c&&c.apply(b,arguments),a&&this.setting.check.enable&&(e=x(a,this.setting),e.get(0)&&s.uCanDo(this.setting)&&(f=x(a,t.id.CHECK,this.setting),(1==d||this.setting.check.chkStyle===t.radio.STYLE)&&u.checkNodeRelation(this.setting,a),u.setChkClass(this.setting,f,a),u.repairParentChkClassWithSelf(this.setting,a)))}},l={getRadioCheckedList:function(a){var c,d,b=v.getRoot(a).radioCheckedList;for(c=0,d=b.length;d>c;c++)v.getNodeCache(a,b[c].tId)||(b.splice(c,1),c--,d--);return b},getCheckStatus:function(a,b){if(!a.check.enable||b.nocheck||b.chkDisabled)return null;var c=a.data.key.checked,d={checked:b[c],half:b.halfCheck?b.halfCheck:a.check.chkStyle==t.radio.STYLE?2===b.check_Child_State:b[c]?b.check_Child_State>-1&&b.check_Child_State<2:b.check_Child_State>0};return d},getTreeCheckedNodes:function(a,b,c,d){var e,f,g,h,i;if(!b)return[];for(e=a.data.key.children,f=a.data.key.checked,g=c&&a.check.chkStyle==t.radio.STYLE&&a.check.radioType==t.radio.TYPE_ALL,d=d?d:[],h=0,i=b.length;i>h&&(b[h].nocheck===!0||b[h].chkDisabled===!0||b[h][f]!=c||(d.push(b[h]),!g))&&(v.getTreeCheckedNodes(a,b[h][e],c,d),!(g&&d.length>0));h++);return d},getTreeChangeCheckedNodes:function(a,b,c){var d,e,f,g;if(!b)return[];for(d=a.data.key.children,e=a.data.key.checked,c=c?c:[],f=0,g=b.length;g>f;f++)b[f].nocheck!==!0&&b[f].chkDisabled!==!0&&b[f][e]!=b[f].checkedOld&&c.push(b[f]),v.getTreeChangeCheckedNodes(a,b[f][d],c);return c},makeChkFlag:function(a,b){var c,d,e,f,g,h,i;if(b){if(c=a.data.key.children,d=a.data.key.checked,e=-1,b[c])for(f=0,g=b[c].length;g>f;f++)if(h=b[c][f],i=-1,a.check.chkStyle==t.radio.STYLE){if(i=h.nocheck===!0||h.chkDisabled===!0?h.check_Child_State:h.halfCheck===!0?2:h[d]?2:h.check_Child_State>0?2:0,2==i){e=2;break}0==i&&(e=0)}else if(a.check.chkStyle==t.checkbox.STYLE){if(i=h.nocheck===!0||h.chkDisabled===!0?h.check_Child_State:h.halfCheck===!0?1:h[d]?-1===h.check_Child_State||2===h.check_Child_State?2:1:h.check_Child_State>0?1:0,1===i){e=1;break}if(2===i&&e>-1&&f>0&&i!==e){e=1;break}if(2===e&&i>-1&&2>i){e=1;break}i>-1&&(e=i)}b.check_Child_State=e}}},m={},n={onCheckNode:function(a,b){var c,d,e;return b.chkDisabled===!0?!1:(c=v.getSetting(a.data.treeId),d=c.data.key.checked,0==s.apply(c.callback.beforeCheck,[c.treeId,b],!0)?!0:(b[d]=!b[d],u.checkNodeRelation(c,b),e=x(b,t.id.CHECK,c),u.setChkClass(c,e,b),u.repairParentChkClassWithSelf(c,b),c.treeObj.trigger(t.event.CHECK,[a,c.treeId,b]),!0))},onMouseoverCheck:function(a,b){if(b.chkDisabled===!0)return!1;var c=v.getSetting(a.data.treeId),d=x(b,t.id.CHECK,c);return b.check_Focus=!0,u.setChkClass(c,d,b),!0},onMouseoutCheck:function(a,b){if(b.chkDisabled===!0)return!1;var c=v.getSetting(a.data.treeId),d=x(b,t.id.CHECK,c);return b.check_Focus=!1,u.setChkClass(c,d,b),!0}},o={},p={checkNodeRelation:function(a,b){var c,d,e,i,j,f=a.data.key.children,g=a.data.key.checked,h=t.radio;if(a.check.chkStyle==h.STYLE){if(i=v.getRadioCheckedList(a),b[g])if(a.check.radioType==h.TYPE_ALL){for(d=i.length-1;d>=0;d--)c=i[d],c[g]&&c!=b&&(c[g]=!1,i.splice(d,1),u.setChkClass(a,x(c,t.id.CHECK,a),c),c.parentTId!=b.parentTId&&u.repairParentChkClassWithSelf(a,c));i.push(b)}else for(j=b.parentTId?b.getParentNode():v.getRoot(a),d=0,e=j[f].length;e>d;d++)c=j[f][d],c[g]&&c!=b&&(c[g]=!1,u.setChkClass(a,x(c,t.id.CHECK,a),c));else if(a.check.radioType==h.TYPE_ALL)for(d=0,e=i.length;e>d;d++)if(b==i[d]){i.splice(d,1);break}}else b[g]&&(!b[f]||0==b[f].length||a.check.chkboxType.Y.indexOf("s")>-1)&&u.setSonNodeCheckBox(a,b,!0),b[g]||b[f]&&0!=b[f].length&&!(a.check.chkboxType.N.indexOf("s")>-1)||u.setSonNodeCheckBox(a,b,!1),b[g]&&a.check.chkboxType.Y.indexOf("p")>-1&&u.setParentNodeCheckBox(a,b,!0),!b[g]&&a.check.chkboxType.N.indexOf("p")>-1&&u.setParentNodeCheckBox(a,b,!1)},makeChkClass:function(a,b){var g,c=a.data.key.checked,d=t.checkbox,e=t.radio,f="";return f=b.chkDisabled===!0?d.DISABLED:b.halfCheck?d.PART:a.check.chkStyle==e.STYLE?b.check_Child_State<1?d.FULL:d.PART:b[c]?2===b.check_Child_State||-1===b.check_Child_State?d.FULL:d.PART:b.check_Child_State<1?d.FULL:d.PART,g=a.check.chkStyle+"_"+(b[c]?d.TRUE:d.FALSE)+"_"+f,g=b.check_Focus&&b.chkDisabled!==!0?g+"_"+d.FOCUS:g,t.className.BUTTON+" "+d.DEFAULT+" "+g},repairAllChk:function(a,b){var c,d,e,f,g,h;if(a.check.enable&&a.check.chkStyle===t.checkbox.STYLE)for(c=a.data.key.checked,d=a.data.key.children,e=v.getRoot(a),f=0,g=e[d].length;g>f;f++)h=e[d][f],h.nocheck!==!0&&h.chkDisabled!==!0&&(h[c]=b),u.setSonNodeCheckBox(a,h,b)},repairChkClass:function(a,b){if(b&&(v.makeChkFlag(a,b),b.nocheck!==!0)){var c=x(b,t.id.CHECK,a);u.setChkClass(a,c,b)}},repairParentChkClass:function(a,b){if(b&&b.parentTId){var c=b.getParentNode();u.repairChkClass(a,c),u.repairParentChkClass(a,c)}},repairParentChkClassWithSelf:function(a,b){if(b){var c=a.data.key.children;b[c]&&b[c].length>0?u.repairParentChkClass(a,b[c][0]):u.repairParentChkClass(a,b)}},repairSonChkDisabled:function(a,b,c,d){var e,f,g,h;if(b&&(e=a.data.key.children,b.chkDisabled!=c&&(b.chkDisabled=c),u.repairChkClass(a,b),b[e]&&d))for(f=0,g=b[e].length;g>f;f++)h=b[e][f],u.repairSonChkDisabled(a,h,c,d)},repairParentChkDisabled:function(a,b,c,d){b&&(b.chkDisabled!=c&&d&&(b.chkDisabled=c),u.repairChkClass(a,b),u.repairParentChkDisabled(a,b.getParentNode(),c,d))},setChkClass:function(a,b,c){b&&(c.nocheck===!0?b.hide():b.show(),b.attr("class",u.makeChkClass(a,c)))},setParentNodeCheckBox:function(a,b,c,d){var h,i,j,k,e=a.data.key.children,f=a.data.key.checked,g=x(b,t.id.CHECK,a);if(d||(d=b),v.makeChkFlag(a,b),b.nocheck!==!0&&b.chkDisabled!==!0&&(b[f]=c,u.setChkClass(a,g,b),a.check.autoCheckTrigger&&b!=d&&a.treeObj.trigger(t.event.CHECK,[null,a.treeId,b])),b.parentTId){if(h=!0,!c)for(i=b.getParentNode()[e],j=0,k=i.length;k>j;j++)if(i[j].nocheck!==!0&&i[j].chkDisabled!==!0&&i[j][f]||(i[j].nocheck===!0||i[j].chkDisabled===!0)&&i[j].check_Child_State>0){h=!1;break}h&&u.setParentNodeCheckBox(a,b.getParentNode(),c,d)}},setSonNodeCheckBox:function(a,b,c,d){var e,f,g,h,i,j,k;if(b){if(e=a.data.key.children,f=a.data.key.checked,g=x(b,t.id.CHECK,a),d||(d=b),h=!1,b[e])for(i=0,j=b[e].length;j>i&&b.chkDisabled!==!0;i++)k=b[e][i],u.setSonNodeCheckBox(a,k,c,d),k.chkDisabled===!0&&(h=!0);b!=v.getRoot(a)&&b.chkDisabled!==!0&&(h&&b.nocheck!==!0&&v.makeChkFlag(a,b),b.nocheck!==!0&&b.chkDisabled!==!0?(b[f]=c,h||(b.check_Child_State=b[e]&&b[e].length>0?c?2:0:-1)):b.check_Child_State=-1,u.setChkClass(a,g,b),a.check.autoCheckTrigger&&b!=d&&b.nocheck!==!0&&b.chkDisabled!==!0&&a.treeObj.trigger(t.event.CHECK,[null,a.treeId,b]))}}},q={tools:o,view:p,event:m,data:l};a.extend(!0,a.fn.zTree.consts,b),a.extend(!0,a.fn.zTree._z,q),r=a.fn.zTree,s=r._z.tools,t=r.consts,u=r._z.view,v=r._z.data,r._z.event,x=s.$,v.exSetting(c),v.addInitBind(f),v.addInitUnBind(g),v.addInitCache(e),v.addInitNode(i),v.addInitProxy(h,!0),v.addInitRoot(d),v.addBeforeA(j),v.addZTreeTools(k),y=u.createNodes,u.createNodes=function(a,b,c,d){y&&y.apply(u,arguments),c&&u.repairParentChkClassWithSelf(a,d)},z=u.removeNode,u.removeNode=function(a,b){var c=b.getParentNode();z&&z.apply(u,arguments),b&&c&&(u.repairChkClass(a,c),u.repairParentChkClass(a,c))},A=u.appendNodes,u.appendNodes=function(a,b,c,d){var g="";return A&&(g=A.apply(u,arguments)),d&&v.makeChkFlag(a,d),g}}(jQuery);

/*<script src="${ctxStatic}/org/tinygroup/zTree/js/jquery.ztree.exedit-3.5.js"></script>*/
!function(a){var q,r,s,t,u,w,x,y,z,A,B,C,b={event:{DRAG:"ztree_drag",DROP:"ztree_drop",RENAME:"ztree_rename",DRAGMOVE:"ztree_dragmove"},id:{EDIT:"_edit",INPUT:"_input",REMOVE:"_remove"},move:{TYPE_INNER:"inner",TYPE_PREV:"prev",TYPE_NEXT:"next"},node:{CURSELECTED_EDIT:"curSelectedNode_Edit",TMPTARGET_TREE:"tmpTargetzTree",TMPTARGET_NODE:"tmpTargetNode"}},c={edit:{enable:!1,editNameSelectAll:!1,showRemoveBtn:!0,showRenameBtn:!0,removeTitle:"remove",renameTitle:"rename",drag:{autoExpandTrigger:!1,isCopy:!0,isMove:!0,prev:!0,next:!0,inner:!0,minMoveSize:5,borderMax:10,borderMin:-5,maxShowNodeNum:5,autoOpenTime:500}},view:{addHoverDom:null,removeHoverDom:null},callback:{beforeDrag:null,beforeDragOpen:null,beforeDrop:null,beforeEditName:null,beforeRename:null,onDrag:null,onDragMove:null,onDrop:null,onRename:null}},d=function(a){var b=u.getRoot(a),c=u.getRoots();b.curEditNode=null,b.curEditInput=null,b.curHoverNode=null,b.dragFlag=0,b.dragNodeShowBefore=[],b.dragMaskList=new Array,c.showHoverDom=!0},e=function(){},f=function(a){var b=a.treeObj,c=s.event;b.bind(c.RENAME,function(b,c,d,e){r.apply(a.callback.onRename,[b,c,d,e])}),b.bind(c.DRAG,function(b,c,d,e){r.apply(a.callback.onDrag,[c,d,e])}),b.bind(c.DRAGMOVE,function(b,c,d,e){r.apply(a.callback.onDragMove,[c,d,e])}),b.bind(c.DROP,function(b,c,d,e,f,g,h){r.apply(a.callback.onDrop,[c,d,e,f,g,h])})},g=function(a){var b=a.treeObj,c=s.event;b.unbind(c.RENAME),b.unbind(c.DRAG),b.unbind(c.DRAGMOVE),b.unbind(c.DROP)},h=function(a){var l,b=a.target,c=u.getSetting(a.data.treeId),d=a.relatedTarget,e="",f=null,g="",h="",i=null,j=null,k=null;if(r.eqs(a.type,"mouseover")?(k=r.getMDom(c,b,[{tagName:"a",attrName:"treeNode"+s.id.A}]),k&&(e=r.getNodeMainDom(k).id,g="hoverOverNode")):r.eqs(a.type,"mouseout")?(k=r.getMDom(c,d,[{tagName:"a",attrName:"treeNode"+s.id.A}]),k||(e="remove",g="hoverOutNode")):r.eqs(a.type,"mousedown")&&(k=r.getMDom(c,b,[{tagName:"a",attrName:"treeNode"+s.id.A}]),k&&(e=r.getNodeMainDom(k).id,g="mousedownNode")),e.length>0)switch(f=u.getNodeCache(c,e),g){case"mousedownNode":i=m.onMousedownNode;break;case"hoverOverNode":i=m.onHoverOverNode;break;case"hoverOutNode":i=m.onHoverOutNode}return l={stop:!1,node:f,nodeEventType:g,nodeEventCallback:i,treeEventType:h,treeEventCallback:j}},i=function(a,b,c){c&&(c.isHover=!1,c.editNameFlag=!1)},j=function(a,b){b.cancelEditName=function(a){var b=u.getRoot(this.setting);b.curEditNode&&t.cancelCurEditNode(this.setting,a?a:null,!0)},b.copyNode=function(a,b,c,d){function g(){t.addNodes(e.setting,a,[f],d)}if(!b)return null;if(a&&!a.isParent&&this.setting.data.keep.leaf&&c===s.move.TYPE_INNER)return null;var e=this,f=r.clone(b);return a||(a=null,c=s.move.TYPE_INNER),c==s.move.TYPE_INNER?r.canAsync(this.setting,a)?t.asyncNode(this.setting,a,d,g):g():(t.addNodes(this.setting,a.parentNode,[f],d),t.moveNode(this.setting,a,f,c,!1,d)),f},b.editName=function(a){a&&a.tId&&a===u.getNodeCache(this.setting,a.tId)&&(a.parentTId&&t.expandCollapseParentNode(this.setting,a.getParentNode(),!0),t.editNode(this.setting,a))},b.moveNode=function(a,b,c,d){function f(){t.moveNode(e.setting,a,b,c,!1,d)}if(!b)return b;if(a&&!a.isParent&&this.setting.data.keep.leaf&&c===s.move.TYPE_INNER)return null;if(a&&(b.parentTId==a.tId&&c==s.move.TYPE_INNER||w(b,this.setting).find("#"+a.tId).length>0))return null;a||(a=null);var e=this;return r.canAsync(this.setting,a)&&c===s.move.TYPE_INNER?t.asyncNode(this.setting,a,d,f):f(),b},b.setEditable=function(a){return this.setting.edit.enable=a,this.refresh()}},k={setSonNodeLevel:function(a,b,c){var d,e,f;if(c&&(d=a.data.key.children,c.level=b?b.level+1:0,c[d]))for(e=0,f=c[d].length;f>e;e++)c[d][e]&&u.setSonNodeLevel(a,c,c[d][e])}},l={},m={onHoverOverNode:function(a,b){var c=u.getSetting(a.data.treeId),d=u.getRoot(c);d.curHoverNode!=b&&m.onHoverOutNode(a),d.curHoverNode=b,t.addHoverDom(c,b)},onHoverOutNode:function(a){var c=u.getSetting(a.data.treeId),d=u.getRoot(c);d.curHoverNode&&!u.isSelectedNode(c,d.curHoverNode)&&(t.removeTreeDom(c,d.curHoverNode),d.curHoverNode=null)},onMousedownNode:function(c,d){function I(c){var d,e,f,j,k,y,I,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb,yb;if(0==h.dragFlag&&Math.abs(F-c.clientX)<g.edit.drag.minMoveSize&&Math.abs(G-c.clientY)<g.edit.drag.minMoveSize)return!0;if(y=g.data.key.children,n.css("cursor","pointer"),0==h.dragFlag){if(0==r.apply(g.callback.beforeDrag,[g.treeId,l],!0))return J(c),!0;for(d=0,e=l.length;e>d;d++)0==d&&(h.dragNodeShowBefore=[]),f=l[d],f.isParent&&f.open?(t.expandCollapseNode(g,f,!f.open),h.dragNodeShowBefore[f.tId]=!0):h.dragNodeShowBefore[f.tId]=!1;if(h.dragFlag=1,i.showHoverDom=!1,r.showIfameMask(g,!0),I=!0,K=-1,l.length>1)for(L=l[0].parentTId?l[0].getParentNode()[y]:u.getNodes(g),k=[],d=0,e=L.length;e>d;d++)if(void 0!==h.dragNodeShowBefore[L[d].tId]&&(I&&K>-1&&K+1!==d&&(I=!1),k.push(L[d]),K=d),l.length===k.length){l=k;break}for(I&&(z=l[0].getPreNode(),A=l[l.length-1].getNextNode()),o=w("<ul class='zTreeDragUL'></ul>",g),d=0,e=l.length;e>d;d++)f=l[d],f.editNameFlag=!1,t.selectNode(g,f,d>0),t.removeTreeDom(g,f),d>g.edit.drag.maxShowNodeNum-1||(j=w("<li id='"+f.tId+"_tmp'></li>",g),j.append(w(f,s.id.A,g).clone()),j.css("padding","0"),j.children("#"+f.tId+s.id.A).removeClass(s.node.CURSELECTED),o.append(j),d==g.edit.drag.maxShowNodeNum-1&&(j=w("<li id='"+f.tId+"_moretmp'><a>  ...  </a></li>",g),o.append(j)));o.attr("id",l[0].tId+s.id.UL+"_tmp"),o.addClass(g.treeObj.attr("class")),o.appendTo(n),p=w("<span class='tmpzTreeMove_arrow'></span>",g),p.attr("id","zTreeMove_arrow_tmp"),p.appendTo(n),g.treeObj.trigger(s.event.DRAG,[c,g.treeId,l])}if(1==h.dragFlag){q&&p.attr("id")==c.target.id&&D&&c.clientX+m.scrollLeft()+2>a("#"+D+s.id.A,q).offset().left?(M=a("#"+D+s.id.A,q),c.target=M.length>0?M.get(0):c.target):q&&(q.removeClass(s.node.TMPTARGET_TREE),D&&a("#"+D+s.id.A,q).removeClass(s.node.TMPTARGET_NODE+"_"+s.move.TYPE_PREV).removeClass(s.node.TMPTARGET_NODE+"_"+b.move.TYPE_NEXT).removeClass(s.node.TMPTARGET_NODE+"_"+b.move.TYPE_INNER)),q=null,D=null,v=!1,x=g,N=u.getSettings();for(O in N)N[O].treeId&&N[O].edit.enable&&N[O].treeId!=g.treeId&&(c.target.id==N[O].treeId||a(c.target).parents("#"+N[O].treeId).length>0)&&(v=!0,x=N[O]);if(P=m.scrollTop(),Q=m.scrollLeft(),R=x.treeObj.offset(),S=x.treeObj.get(0).scrollHeight,T=x.treeObj.get(0).scrollWidth,U=c.clientY+P-R.top,V=x.treeObj.height()+R.top-c.clientY-P,W=c.clientX+Q-R.left,X=x.treeObj.width()+R.left-c.clientX-Q,Y=U<g.edit.drag.borderMax&&U>g.edit.drag.borderMin,Z=V<g.edit.drag.borderMax&&V>g.edit.drag.borderMin,$=W<g.edit.drag.borderMax&&W>g.edit.drag.borderMin,_=X<g.edit.drag.borderMax&&X>g.edit.drag.borderMin,ab=U>g.edit.drag.borderMin&&V>g.edit.drag.borderMin&&W>g.edit.drag.borderMin&&X>g.edit.drag.borderMin,bb=Y&&x.treeObj.scrollTop()<=0,cb=Z&&x.treeObj.scrollTop()+x.treeObj.height()+10>=S,db=$&&x.treeObj.scrollLeft()<=0,eb=_&&x.treeObj.scrollLeft()+x.treeObj.width()+10>=T,c.target&&r.isChildOrSelf(c.target,x.treeId)){for(fb=c.target;fb&&fb.tagName&&!r.eqs(fb.tagName,"li")&&fb.id!=x.treeId;)fb=fb.parentNode;for(gb=!0,d=0,e=l.length;e>d;d++){if(f=l[d],fb.id===f.tId){gb=!1;break}if(w(f,g).find("#"+fb.id).length>0){gb=!1;break}}gb&&c.target&&r.isChildOrSelf(c.target,fb.id+s.id.A)&&(q=a(fb),D=fb.id)}f=l[0],ab&&r.isChildOrSelf(c.target,x.treeId)&&(!q&&(c.target.id==x.treeId||bb||cb||db||eb)&&(v||!v&&f.parentTId)&&(q=x.treeObj),Y?x.treeObj.scrollTop(x.treeObj.scrollTop()-10):Z&&x.treeObj.scrollTop(x.treeObj.scrollTop()+10),$?x.treeObj.scrollLeft(x.treeObj.scrollLeft()-10):_&&x.treeObj.scrollLeft(x.treeObj.scrollLeft()+10),q&&q!=x.treeObj&&q.offset().left<x.treeObj.offset().left&&x.treeObj.scrollLeft(x.treeObj.scrollLeft()+q.offset().left-x.treeObj.offset().left)),o.css({top:c.clientY+P+3+"px",left:c.clientX+Q+3+"px"}),hb=0,ib=0,q&&q.attr("id")!=x.treeId?(jb=null==D?null:u.getNodeCache(x,D),kb=(c.ctrlKey||c.metaKey)&&g.edit.drag.isMove&&g.edit.drag.isCopy||!g.edit.drag.isMove&&g.edit.drag.isCopy,lb=!(!z||D!==z.tId),mb=!(!A||D!==A.tId),nb=f.parentTId&&f.parentTId==D,ob=(kb||!mb)&&r.apply(x.edit.drag.prev,[x.treeId,l,jb],!!x.edit.drag.prev),pb=(kb||!lb)&&r.apply(x.edit.drag.next,[x.treeId,l,jb],!!x.edit.drag.next),qb=!(!kb&&nb||x.data.keep.leaf&&!jb.isParent||!r.apply(x.edit.drag.inner,[x.treeId,l,jb],!!x.edit.drag.inner)),ob||pb||qb?(rb=a("#"+D+s.id.A,q),sb=jb.isLastNode?null:a("#"+jb.getNextNode().tId+s.id.A,q.next()),tb=rb.offset().top,ub=rb.offset().left,vb=ob?qb?.25:pb?.5:1:-1,wb=pb?qb?.75:ob?.5:0:-1,xb=(c.clientY+P-tb)/rb.height(),(1==vb||vb>=xb&&xb>=-.2)&&ob?(hb=1-p.width(),ib=tb-p.height()/2,E=s.move.TYPE_PREV):(0==wb||xb>=wb&&1.2>=xb)&&pb?(hb=1-p.width(),ib=null==sb||jb.isParent&&jb.open?tb+rb.height()-p.height()/2:sb.offset().top-p.height()/2,E=s.move.TYPE_NEXT):(hb=5-p.width(),ib=tb,E=s.move.TYPE_INNER),p.css({display:"block",top:ib+"px",left:ub+hb+"px"}),rb.addClass(s.node.TMPTARGET_NODE+"_"+E),(B!=D||C!=E)&&(H=(new Date).getTime()),jb&&jb.isParent&&E==s.move.TYPE_INNER&&(yb=!0,window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId!==jb.tId?(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null):window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId===jb.tId&&(yb=!1),yb&&(window.zTreeMoveTimer=setTimeout(function(){E==s.move.TYPE_INNER&&jb&&jb.isParent&&!jb.open&&(new Date).getTime()-H>x.edit.drag.autoOpenTime&&r.apply(x.callback.beforeDragOpen,[x.treeId,jb],!0)&&(t.switchNode(x,jb),x.edit.drag.autoExpandTrigger&&x.treeObj.trigger(s.event.EXPAND,[x.treeId,jb]))},x.edit.drag.autoOpenTime+50),window.zTreeMoveTargetNodeTId=jb.tId))):(q=null,D="",E=s.move.TYPE_INNER,p.css({display:"none"}),window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null))):(E=s.move.TYPE_INNER,q&&r.apply(x.edit.drag.inner,[x.treeId,l,null],!!x.edit.drag.inner)?q.addClass(s.node.TMPTARGET_TREE):q=null,p.css({display:"none"}),window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null)),B=D,C=E,g.treeObj.trigger(s.event.DRAGMOVE,[c,g.treeId,l])}return!1}function J(c){function A(){if(v){if(!j)for(var a=0,b=l.length;b>a;a++)t.removeNode(g,l[a]);if(E==s.move.TYPE_INNER)t.addNodes(x,k,z);else if(t.addNodes(x,k.getParentNode(),z),E==s.move.TYPE_PREV)for(a=0,b=z.length;b>a;a++)t.moveNode(x,k,z[a],E,!1);else for(a=-1,b=z.length-1;b>a;b--)t.moveNode(x,k,z[b],E,!1)}else if(j&&E==s.move.TYPE_INNER)t.addNodes(x,k,z);else if(j&&t.addNodes(x,k.getParentNode(),z),E!=s.move.TYPE_NEXT)for(a=0,b=z.length;b>a;a++)t.moveNode(x,k,z[a],E,!1);else for(a=-1,b=z.length-1;b>a;b--)t.moveNode(x,k,z[b],E,!1);t.selectNodes(x,z),w(z[0],g).focus().blur(),g.treeObj.trigger(s.event.DROP,[c,x.treeId,z,k,E,j])}var d,e,f,j,k,z;if(window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null),B=null,C=null,m.unbind("mousemove",I),m.unbind("mouseup",J),m.unbind("selectstart",K),n.css("cursor","auto"),q&&(q.removeClass(s.node.TMPTARGET_TREE),D&&a("#"+D+s.id.A,q).removeClass(s.node.TMPTARGET_NODE+"_"+s.move.TYPE_PREV).removeClass(s.node.TMPTARGET_NODE+"_"+b.move.TYPE_NEXT).removeClass(s.node.TMPTARGET_NODE+"_"+b.move.TYPE_INNER)),r.showIfameMask(g,!1),i.showHoverDom=!0,0!=h.dragFlag){for(h.dragFlag=0,d=0,e=l.length;e>d;d++)f=l[d],f.isParent&&h.dragNodeShowBefore[f.tId]&&!f.open&&(t.expandCollapseNode(g,f,!f.open),delete h.dragNodeShowBefore[f.tId]);if(o&&o.remove(),p&&p.remove(),j=(c.ctrlKey||c.metaKey)&&g.edit.drag.isMove&&g.edit.drag.isCopy||!g.edit.drag.isMove&&g.edit.drag.isCopy,!j&&q&&D&&l[0].parentTId&&D==l[0].parentTId&&E==s.move.TYPE_INNER&&(q=null),q){if(k=null==D?null:u.getNodeCache(x,D),0==r.apply(g.callback.beforeDrop,[x.treeId,l,k,E,j],!0))return t.selectNodes(y,l),void 0;z=j?r.clone(l):l,E==s.move.TYPE_INNER&&r.canAsync(x,k)?t.asyncNode(x,k,!1,A):A()}else t.selectNodes(y,l),g.treeObj.trigger(s.event.DROP,[c,g.treeId,l,null,null,null])}}function K(){return!1}var e,f,j,k,l,o,p,q,z,A,m,n,v,x,y,B,C,D,E,F,G,H,g=u.getSetting(c.data.treeId),h=u.getRoot(g),i=u.getRoots();if(2==c.button||!g.edit.enable||!g.edit.drag.isCopy&&!g.edit.drag.isMove)return!0;if(j=c.target,k=u.getRoot(g).curSelectedList,l=[],u.isSelectedNode(g,d))for(e=0,f=k.length;f>e;e++){if(k[e].editNameFlag&&r.eqs(j.tagName,"input")&&null!==j.getAttribute("treeNode"+s.id.INPUT))return!0;if(l.push(k[e]),l[0].parentTId!==k[e].parentTId){l=[d];break}}else l=[d];return t.editNodeBlur=!0,t.cancelCurEditNode(g),m=a(g.treeObj.get(0).ownerDocument),n=a(g.treeObj.get(0).ownerDocument.body),v=!1,x=g,y=g,B=null,C=null,D=null,E=s.move.TYPE_INNER,F=c.clientX,G=c.clientY,H=(new Date).getTime(),r.uCanDo(g)&&m.bind("mousemove",I),m.bind("mouseup",J),m.bind("selectstart",K),c.preventDefault&&c.preventDefault(),!0}},n={getAbs:function(a){var b=a.getBoundingClientRect(),c=document.body.scrollTop+document.documentElement.scrollTop,d=document.body.scrollLeft+document.documentElement.scrollLeft;return[b.left+d,b.top+c]},inputFocus:function(a){a.get(0)&&(a.focus(),r.setCursorPosition(a.get(0),a.val().length))},inputSelect:function(a){a.get(0)&&(a.focus(),a.select())},setCursorPosition:function(a,b){if(a.setSelectionRange)a.focus(),a.setSelectionRange(b,b);else if(a.createTextRange){var c=a.createTextRange();c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",b),c.select()}},showIfameMask:function(a,b){for(var d,e,f,g,h,i,c=u.getRoot(a);c.dragMaskList.length>0;)c.dragMaskList[0].remove(),c.dragMaskList.shift();if(b)for(d=w("iframe",a),e=0,f=d.length;f>e;e++)g=d.get(e),h=r.getAbs(g),i=w("<div id='zTreeMask_"+e+"' class='zTreeMask' style='top:"+h[1]+"px; left:"+h[0]+"px; width:"+g.offsetWidth+"px; height:"+g.offsetHeight+"px;'></div>",a),i.appendTo(w("body",a)),c.dragMaskList.push(i)}},o={addEditBtn:function(a,b){if(!(b.editNameFlag||w(b,s.id.EDIT,a).length>0)&&r.apply(a.edit.showRenameBtn,[a.treeId,b],a.edit.showRenameBtn)){var c=w(b,s.id.A,a),d="<span class='"+s.className.BUTTON+" edit' id='"+b.tId+s.id.EDIT+"' title='"+r.apply(a.edit.renameTitle,[a.treeId,b],a.edit.renameTitle)+"' treeNode"+s.id.EDIT+" style='display:none;'></span>";c.append(d),w(b,s.id.EDIT,a).bind("click",function(){return r.uCanDo(a)&&0!=r.apply(a.callback.beforeEditName,[a.treeId,b],!0)?(t.editNode(a,b),!1):!1}).show()}},addRemoveBtn:function(a,b){if(!(b.editNameFlag||w(b,s.id.REMOVE,a).length>0)&&r.apply(a.edit.showRemoveBtn,[a.treeId,b],a.edit.showRemoveBtn)){var c=w(b,s.id.A,a),d="<span class='"+s.className.BUTTON+" remove' id='"+b.tId+s.id.REMOVE+"' title='"+r.apply(a.edit.removeTitle,[a.treeId,b],a.edit.removeTitle)+"' treeNode"+s.id.REMOVE+" style='display:none;'></span>";c.append(d),w(b,s.id.REMOVE,a).bind("click",function(){return r.uCanDo(a)&&0!=r.apply(a.callback.beforeRemove,[a.treeId,b],!0)?(t.removeNode(a,b),a.treeObj.trigger(s.event.REMOVE,[a.treeId,b]),!1):!1}).bind("mousedown",function(){return!0}).show()}},addHoverDom:function(a,b){u.getRoots().showHoverDom&&(b.isHover=!0,a.edit.enable&&(t.addEditBtn(a,b),t.addRemoveBtn(a,b)),r.apply(a.view.addHoverDom,[a.treeId,b]))},cancelCurEditNode:function(a,b,c){var g,h,i,d=u.getRoot(a),e=a.data.key.name,f=d.curEditNode;if(f){if(g=d.curEditInput,h=b?b:c?f[e]:g.val(),r.apply(a.callback.beforeRename,[a.treeId,f,h,c],!0)===!1)return!1;f[e]=h,a.treeObj.trigger(s.event.RENAME,[a.treeId,f,c]),i=w(f,s.id.A,a),i.removeClass(s.node.CURSELECTED_EDIT),g.unbind(),t.setNodeName(a,f),f.editNameFlag=!1,d.curEditNode=null,d.curEditInput=null,t.selectNode(a,f,!1)}return d.noSelection=!0,!0},editNode:function(a,b){var d,e,c=u.getRoot(a);return t.editNodeBlur=!1,u.isSelectedNode(a,b)&&c.curEditNode==b&&b.editNameFlag?(setTimeout(function(){r.inputFocus(c.curEditInput)},0),void 0):(d=a.data.key.name,b.editNameFlag=!0,t.removeTreeDom(a,b),t.cancelCurEditNode(a),t.selectNode(a,b,!1),w(b,s.id.SPAN,a).html("<input type=text class='rename' id='"+b.tId+s.id.INPUT+"' treeNode"+s.id.INPUT+" >"),e=w(b,s.id.INPUT,a),e.attr("value",b[d]),a.edit.editNameSelectAll?r.inputSelect(e):r.inputFocus(e),e.bind("blur",function(){t.editNodeBlur||t.cancelCurEditNode(a)}).bind("keydown",function(b){"13"==b.keyCode?(t.editNodeBlur=!0,t.cancelCurEditNode(a)):"27"==b.keyCode&&t.cancelCurEditNode(a,null,!0)}).bind("click",function(){return!1}).bind("dblclick",function(){return!1}),w(b,s.id.A,a).addClass(s.node.CURSELECTED_EDIT),c.curEditInput=e,c.noSelection=!1,c.curEditNode=b,void 0)},moveNode:function(a,b,c,d,e,f){var i,j,k,l,m,n,o,p,q,r,v,x,y,z,A,B,C,g=u.getRoot(a),h=a.data.key.children;if(b!=c&&(!a.data.keep.leaf||!b||b.isParent||d!=s.move.TYPE_INNER)){if(i=c.parentTId?c.getParentNode():g,j=null===b||b==g,j&&null===b&&(b=g),j&&(d=s.move.TYPE_INNER),k=b.parentTId?b.getParentNode():g,d!=s.move.TYPE_PREV&&d!=s.move.TYPE_NEXT&&(d=s.move.TYPE_INNER),d==s.move.TYPE_INNER&&(j?c.parentTId=null:(b.isParent||(b.isParent=!0,b.open=!!b.open,t.setNodeLineIcos(a,b)),c.parentTId=b.tId)),j?(l=a.treeObj,m=l):(f||d!=s.move.TYPE_INNER?f||t.expandCollapseNode(a,b.getParentNode(),!0,!1):t.expandCollapseNode(a,b,!0,!1),l=w(b,a),m=w(b,s.id.UL,a),l.get(0)&&!m.get(0)&&(n=[],t.makeUlHtml(a,b,n,""),l.append(n.join(""))),m=w(b,s.id.UL,a)),o=w(c,a),o.get(0)?l.get(0)||o.remove():o=t.appendNodes(a,c.level,[c],null,!1,!0).join(""),m.get(0)&&d==s.move.TYPE_INNER?m.append(o):l.get(0)&&d==s.move.TYPE_PREV?l.before(o):l.get(0)&&d==s.move.TYPE_NEXT&&l.after(o),r=-1,v=0,x=null,y=null,z=c.level,c.isFirstNode)r=0,i[h].length>1&&(x=i[h][1],x.isFirstNode=!0);else if(c.isLastNode)r=i[h].length-1,x=i[h][r-1],x.isLastNode=!0;else for(p=0,q=i[h].length;q>p;p++)if(i[h][p].tId==c.tId){r=p;break}if(r>=0&&i[h].splice(r,1),d!=s.move.TYPE_INNER)for(p=0,q=k[h].length;q>p;p++)k[h][p].tId==b.tId&&(v=p);d==s.move.TYPE_INNER?(b[h]||(b[h]=new Array),b[h].length>0&&(y=b[h][b[h].length-1],y.isLastNode=!1),b[h].splice(b[h].length,0,c),c.isLastNode=!0,c.isFirstNode=1==b[h].length):b.isFirstNode&&d==s.move.TYPE_PREV?(k[h].splice(v,0,c),y=b,y.isFirstNode=!1,c.parentTId=b.parentTId,c.isFirstNode=!0,c.isLastNode=!1):b.isLastNode&&d==s.move.TYPE_NEXT?(k[h].splice(v+1,0,c),y=b,y.isLastNode=!1,c.parentTId=b.parentTId,c.isFirstNode=!1,c.isLastNode=!0):(d==s.move.TYPE_PREV?k[h].splice(v,0,c):k[h].splice(v+1,0,c),c.parentTId=b.parentTId,c.isFirstNode=!1,c.isLastNode=!1),u.fixPIdKeyValue(a,c),u.setSonNodeLevel(a,c.getParentNode(),c),t.setNodeLineIcos(a,c),t.repairNodeLevelClass(a,c,z),!a.data.keep.parent&&i[h].length<1?(i.isParent=!1,i.open=!1,A=w(i,s.id.UL,a),B=w(i,s.id.SWITCH,a),C=w(i,s.id.ICON,a),t.replaceSwitchClass(i,B,s.folder.DOCU),t.replaceIcoClass(i,C,s.folder.DOCU),A.css("display","none")):x&&t.setNodeLineIcos(a,x),y&&t.setNodeLineIcos(a,y),a.check&&a.check.enable&&t.repairChkClass&&(t.repairChkClass(a,i),t.repairParentChkClassWithSelf(a,i),i!=c.parent&&t.repairParentChkClassWithSelf(a,c)),f||t.expandCollapseParentNode(a,c.getParentNode(),!0,e)}},removeEditBtn:function(a,b){w(b,s.id.EDIT,a).unbind().remove()},removeRemoveBtn:function(a,b){w(b,s.id.REMOVE,a).unbind().remove()},removeTreeDom:function(a,b){b.isHover=!1,t.removeEditBtn(a,b),t.removeRemoveBtn(a,b),r.apply(a.view.removeHoverDom,[a.treeId,b])},repairNodeLevelClass:function(a,b,c){if(c!==b.level){var d=w(b,a),e=w(b,s.id.A,a),f=w(b,s.id.UL,a),g=s.className.LEVEL+c,h=s.className.LEVEL+b.level;d.removeClass(g),d.addClass(h),e.removeClass(g),e.addClass(h),f.removeClass(g),f.addClass(h)}},selectNodes:function(a,b){for(var c=0,d=b.length;d>c;c++)t.selectNode(a,b[c],c>0)}},p={tools:n,view:o,event:l,data:k};a.extend(!0,a.fn.zTree.consts,b),a.extend(!0,a.fn.zTree._z,p),q=a.fn.zTree,r=q._z.tools,s=q.consts,t=q._z.view,u=q._z.data,q._z.event,w=r.$,u.exSetting(c),u.addInitBind(f),u.addInitUnBind(g),u.addInitCache(e),u.addInitNode(i),u.addInitProxy(h),u.addInitRoot(d),u.addZTreeTools(j),x=t.cancelPreSelectedNode,t.cancelPreSelectedNode=function(a,b){var d,e,c=u.getRoot(a).curSelectedList;for(d=0,e=c.length;e>d&&(b&&b!==c[d]||(t.removeTreeDom(a,c[d]),!b));d++);x&&x.apply(t,arguments)},y=t.createNodes,t.createNodes=function(a,b,c,d){y&&y.apply(t,arguments),c&&t.repairParentChkClassWithSelf&&t.repairParentChkClassWithSelf(a,d)},z=t.makeNodeUrl,t.makeNodeUrl=function(a){return a.edit.enable?null:z.apply(t,arguments)},A=t.removeNode,t.removeNode=function(a,b){var c=u.getRoot(a);c.curEditNode===b&&(c.curEditNode=null),A&&A.apply(t,arguments)},B=t.selectNode,t.selectNode=function(a,b){var d=u.getRoot(a);return u.isSelectedNode(a,b)&&d.curEditNode==b&&b.editNameFlag?!1:(B&&B.apply(t,arguments),t.addHoverDom(a,b),!0)},C=r.uCanDo,r.uCanDo=function(a,b){var c=u.getRoot(a);return b&&(r.eqs(b.type,"mouseover")||r.eqs(b.type,"mouseout")||r.eqs(b.type,"mousedown")||r.eqs(b.type,"mouseup"))?!0:(c.curEditNode&&(t.editNodeBlur=!1,c.curEditInput.focus()),!c.curEditNode&&(C?C.apply(t,arguments):!0))}}(jQuery);

/*<script src="${ctxStatic}/org/tinygroup/zTree/js/ztree.selected.js"></script>*/
function getSelectedNodeText(a){return getSelectedNodeByKey(a,a.setting.data.key.name)}function getSelectedNodeId(a){return getSelectedNodeByKey(a,a.setting.data.simpleData.idKey)}function getCheckedNodeText(a){return getCheckedNodeByKey(a,a.setting.data.key.name)}function getCheckedNodeId(a){return getCheckedNodeByKey(a,a.setting.data.simpleData.idKey)}function getSelectedNodeByKey(a,b){nodes=a.getSelectedNodes(!0),v="",nodes.sort(function(a,b){return a.id-b.id});for(var c=0,d=nodes.length;d>c;c++)v+=nodes[c][b]+",";return v.length>0&&(v=v.substring(0,v.length-1)),v}function getCheckedNodeByKey(a,b){nodes=a.getCheckedNodes(!0),v="",nodes.sort(function(a,b){return a.id-b.id});for(var c=0,d=nodes.length;d>c;c++)v+=nodes[c][b]+",";return v.length>0&&(v=v.substring(0,v.length-1)),v};

/*<script src="${ctxStatic}/org/tinygroup/multiselect/js/bootstrap-multiselect.js"></script>*/
!function(a){"use strict";function b(a,b){for(var c=0;c<a.length;++c)b(a[c],c)}function c(b,c){this.$select=a(b),this.options=this.mergeOptions(a.extend({},c,this.$select.data())),this.$select.attr("data-placeholder")&&(this.options.nonSelectedText=this.$select.data("placeholder")),this.originalOptions=this.$select.clone()[0].options,this.query="",this.searchTimeout=null,this.lastToggledInput=null,this.options.multiple="multiple"===this.$select.attr("multiple"),this.options.onChange=a.proxy(this.options.onChange,this),this.options.onSelectAll=a.proxy(this.options.onSelectAll,this),this.options.onDeselectAll=a.proxy(this.options.onDeselectAll,this),this.options.onDropdownShow=a.proxy(this.options.onDropdownShow,this),this.options.onDropdownHide=a.proxy(this.options.onDropdownHide,this),this.options.onDropdownShown=a.proxy(this.options.onDropdownShown,this),this.options.onDropdownHidden=a.proxy(this.options.onDropdownHidden,this),this.options.onInitialized=a.proxy(this.options.onInitialized,this),this.options.onFiltering=a.proxy(this.options.onFiltering,this),this.buildContainer(),this.buildButton(),this.buildDropdown(),this.buildSelectAll(),this.buildDropdownOptions(),this.buildFilter(),this.updateButtonText(),this.updateSelectAll(!0),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups(),this.options.wasDisabled=this.$select.prop("disabled"),this.options.disableIfEmpty&&a("option",this.$select).length<=0&&this.disable(),this.$select.wrap('<span class="multiselect-native-select" />').after(this.$container),this.options.onInitialized(this.$select,this.$container)}"undefined"!=typeof ko&&ko.bindingHandlers&&!ko.bindingHandlers.multiselect&&(ko.bindingHandlers.multiselect={after:["options","value","selectedOptions","enable","disable"],init:function(b,c,d){var i,j,k,l,m,n,g=a(b),h=ko.toJS(c());g.multiselect(h),d.has("options")&&(i=d.get("options"),ko.isObservable(i)&&ko.computed({read:function(){i(),setTimeout(function(){var a=g.data("multiselect");a&&a.updateOriginalOptions(),g.multiselect("rebuild")},1)},disposeWhenNodeIsRemoved:b})),d.has("value")&&(j=d.get("value"),ko.isObservable(j)&&ko.computed({read:function(){j(),setTimeout(function(){g.multiselect("refresh")},1)},disposeWhenNodeIsRemoved:b}).extend({rateLimit:100,notifyWhenChangesStop:!0})),d.has("selectedOptions")&&(k=d.get("selectedOptions"),ko.isObservable(k)&&ko.computed({read:function(){k(),setTimeout(function(){g.multiselect("refresh")},1)},disposeWhenNodeIsRemoved:b}).extend({rateLimit:100,notifyWhenChangesStop:!0})),l=function(a){setTimeout(function(){a?g.multiselect("enable"):g.multiselect("disable")})},d.has("enable")&&(m=d.get("enable"),ko.isObservable(m)?ko.computed({read:function(){l(m())},disposeWhenNodeIsRemoved:b}).extend({rateLimit:100,notifyWhenChangesStop:!0}):l(m)),d.has("disable")&&(n=d.get("disable"),ko.isObservable(n)?ko.computed({read:function(){l(!n())},disposeWhenNodeIsRemoved:b}).extend({rateLimit:100,notifyWhenChangesStop:!0}):l(!n)),ko.utils.domNodeDisposal.addDisposeCallback(b,function(){g.multiselect("destroy")})},update:function(b,c){var g=a(b),h=ko.toJS(c());g.multiselect("setOptions",h),g.multiselect("rebuild")}}),c.prototype={defaults:{buttonText:function(b,c){var d,e;return this.disabledText.length>0&&(c.prop("disabled")||0==b.length&&this.disableIfEmpty)?this.disabledText:0===b.length?this.nonSelectedText:this.allSelectedText&&b.length===a("option",a(c)).length&&1!==a("option",a(c)).length&&this.multiple?this.selectAllNumber?this.allSelectedText+" ("+b.length+")":this.allSelectedText:b.length>this.numberDisplayed?b.length+" "+this.nSelectedText:(d="",e=this.delimiterText,b.each(function(){var b=void 0!==a(this).attr("label")?a(this).attr("label"):a(this).text();d+=b+e}),d.substr(0,d.length-this.delimiterText.length))},buttonTitle:function(b){var d,e;return 0===b.length?this.nonSelectedText:(d="",e=this.delimiterText,b.each(function(){var b=void 0!==a(this).attr("label")?a(this).attr("label"):a(this).text();d+=b+e}),d.substr(0,d.length-this.delimiterText.length))},checkboxName:function(){return!1},optionLabel:function(b){return a(b).attr("label")||a(b).text()},optionClass:function(b){return a(b).attr("class")||""},onChange:function(){},onDropdownShow:function(){},onDropdownHide:function(){},onDropdownShown:function(){},onDropdownHidden:function(){},onSelectAll:function(){},onDeselectAll:function(){},onInitialized:function(){},onFiltering:function(){},enableHTML:!1,buttonClass:"btn btn-default",inheritClass:!1,buttonWidth:"auto",buttonContainer:'<div class="btn-group" />',dropRight:!1,dropUp:!1,selectedClass:"active",maxHeight:!1,includeSelectAllOption:!1,includeSelectAllIfMoreThan:0,selectAllText:"全选",selectAllValue:"multiselect-all",selectAllName:!1,selectAllNumber:!0,selectAllJustVisible:!0,enableFiltering:!1,enableCaseInsensitiveFiltering:!1,enableFullValueFiltering:!1,enableClickableOptGroups:!1,enableCollapsibleOptGroups:!1,filterPlaceholder:"查找信息...",filterBehavior:"text",includeFilterClearBtn:!0,preventInputChangeEvent:!1,nonSelectedText:"请选择",nSelectedText:"selected",allSelectedText:"全选",numberDisplayed:3,disableIfEmpty:!1,disabledText:"",delimiterText:", ",templates:{button:'<button type="button" class="multiselect dropdown-toggle" data-toggle="dropdown"><span class="multiselect-selected-text"></span> <b class="caret"></b></button>',ul:'<ul class="multiselect-container dropdown-menu"></ul>',filter:'<li class="multiselect-item multiselect-filter"><div class="input-group"><input class="form-control multiselect-search" type="text"></div></li>',filterClearBtn:"",li:'<li><a tabindex="0"><label></label></a></li>',divider:'<li class="multiselect-item divider"></li>',liGroup:'<li class="multiselect-item multiselect-group"><label></label></li>'}},constructor:c,buildContainer:function(){this.$container=a(this.options.buttonContainer),this.$container.on("show.bs.dropdown",this.options.onDropdownShow),this.$container.on("hide.bs.dropdown",this.options.onDropdownHide),this.$container.on("shown.bs.dropdown",this.options.onDropdownShown),this.$container.on("hidden.bs.dropdown",this.options.onDropdownHidden)},buildButton:function(){this.$button=a(this.options.templates.button).addClass(this.options.buttonClass),this.$select.attr("class")&&this.options.inheritClass&&this.$button.addClass(this.$select.attr("class")),this.$select.prop("disabled")?this.disable():this.enable(),this.options.buttonWidth&&"auto"!==this.options.buttonWidth&&(this.$button.css({width:"100%",overflow:"hidden","text-overflow":"ellipsis"}),this.$container.css({width:this.options.buttonWidth}));var b=this.$select.attr("tabindex");b&&this.$button.attr("tabindex",b),this.$container.prepend(this.$button)},buildDropdown:function(){var b,c;this.$ul=a(this.options.templates.ul),this.options.dropRight&&this.$ul.addClass("pull-right"),this.options.maxHeight&&this.$ul.css({"max-height":this.options.maxHeight+"px","overflow-y":"auto","overflow-x":"hidden"}),this.options.dropUp&&(b=Math.min(this.options.maxHeight,26*a('option[data-role!="divider"]',this.$select).length+19*a('option[data-role="divider"]',this.$select).length+(this.options.includeSelectAllOption?26:0)+(this.options.enableFiltering||this.options.enableCaseInsensitiveFiltering?44:0)),c=b+34,this.$ul.css({"max-height":b+"px","overflow-y":"auto","overflow-x":"hidden","margin-top":"-"+c+"px"})),this.$container.append(this.$ul)},buildDropdownOptions:function(){this.$select.children().each(a.proxy(function(b,c){var d=a(c),e=d.prop("tagName").toLowerCase();d.prop("value")!==this.options.selectAllValue&&("optgroup"===e?this.createOptgroup(c):"option"===e&&("divider"===d.data("role")?this.createDivider():this.createOptionValue(c)))},this)),a("li:not(.multiselect-group) input",this.$ul).on("change",a.proxy(function(b){var f,g,h,i,c=a(b.target),d=c.prop("checked")||!1,e=c.val()===this.options.selectAllValue;return this.options.selectedClass&&(d?c.closest("li").addClass(this.options.selectedClass):c.closest("li").removeClass(this.options.selectedClass)),f=c.val(),g=this.getOptionByValue(f),h=a("option",this.$select).not(g),i=a("input",this.$container).not(c),e?d?this.selectAll(this.options.selectAllJustVisible,!0):this.deselectAll(this.options.selectAllJustVisible,!0):(d?(g.prop("selected",!0),this.options.multiple?g.prop("selected",!0):(this.options.selectedClass&&a(i).closest("li").removeClass(this.options.selectedClass),a(i).prop("checked",!1),h.prop("selected",!1),this.$button.click()),"active"===this.options.selectedClass&&h.closest("a").css("outline","")):g.prop("selected",!1),this.options.onChange(g,d),this.updateSelectAll(),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups()),this.$select.change(),this.updateButtonText(),this.options.preventInputChangeEvent?!1:void 0},this)),a("li a",this.$ul).on("mousedown",function(a){return a.shiftKey?!1:void 0}),a("li a",this.$ul).on("touchstart click",a.proxy(function(b){var c,d,e,f,g,h,i,j,k,l;if(b.stopPropagation(),c=a(b.target),b.shiftKey&&this.options.multiple){if(c.is("label")&&(b.preventDefault(),c=c.find("input"),c.prop("checked",!c.prop("checked"))),d=c.prop("checked")||!1,null!==this.lastToggledInput&&this.lastToggledInput!==c)for(e=c.closest("li").index(),f=this.lastToggledInput.closest("li").index(),e>f&&(g=f,f=e,e=g),++f,h=this.$ul.find("li").slice(e,f).find("input"),h.prop("checked",d),this.options.selectedClass&&h.closest("li").toggleClass(this.options.selectedClass,d),i=0,j=h.length;j>i;i++)k=a(h[i]),l=this.getOptionByValue(k.val()),l.prop("selected",d);c.trigger("change")}c.is("input")&&!c.closest("li").is(".multiselect-item")&&(this.lastToggledInput=c),c.blur()},this)),this.$container.off("keydown.multiselect").on("keydown.multiselect",a.proxy(function(b){var c,d,e,f;if(!a('input[type="text"]',this.$container).is(":focus"))if(9===b.keyCode&&this.$container.hasClass("open"))this.$button.click();else{if(c=a(this.$container).find("li:not(.divider):not(.disabled) a").filter(":visible"),!c.length)return;d=c.index(c.filter(":focus")),38===b.keyCode&&d>0?d--:40===b.keyCode&&d<c.length-1?d++:~d||(d=0),e=c.eq(d),e.focus(),(32===b.keyCode||13===b.keyCode)&&(f=e.find("input"),f.prop("checked",!f.prop("checked")),f.change()),b.stopPropagation(),b.preventDefault()}},this)),this.options.enableClickableOptGroups&&this.options.multiple&&a("li.multiselect-group input",this.$ul).on("change",a.proxy(function(b){var c,d,e,f,g,i;b.stopPropagation(),c=a(b.target),d=c.prop("checked")||!1,e=a(b.target).closest("li"),f=e.nextUntil("li.multiselect-group").not(".multiselect-filter-hidden").not(".disabled"),g=f.find("input"),i=[],this.options.selectedClass&&(d?e.addClass(this.options.selectedClass):e.removeClass(this.options.selectedClass)),a.each(g,a.proxy(function(b,c){var e=a(c).val(),f=this.getOptionByValue(e);d?(a(c).prop("checked",!0),a(c).closest("li").addClass(this.options.selectedClass),f.prop("selected",!0)):(a(c).prop("checked",!1),a(c).closest("li").removeClass(this.options.selectedClass),f.prop("selected",!1)),i.push(this.getOptionByValue(e))},this)),this.options.onChange(i,d),this.updateButtonText(),this.updateSelectAll()},this)),this.options.enableCollapsibleOptGroups&&this.options.multiple&&(a("li.multiselect-group .caret-container",this.$ul).on("click",a.proxy(function(b){var c=a(b.target).closest("li"),d=c.nextUntil("li.multiselect-group").not(".multiselect-filter-hidden"),e=!0;d.each(function(){e=e&&a(this).is(":visible")}),e?d.hide().addClass("multiselect-collapsible-hidden"):d.show().removeClass("multiselect-collapsible-hidden")},this)),a("li.multiselect-all",this.$ul).css("background","#f3f3f3").css("border-bottom","1px solid #eaeaea"),a("li.multiselect-all > a > label.checkbox",this.$ul).css("padding","3px 20px 3px 35px"),a("li.multiselect-group > a > input",this.$ul).css("margin","4px 0px 5px -20px"))},createOptionValue:function(b){var d,e,f,g,h,i,j,k,l,c=a(b);c.is(":selected")&&c.prop("selected",!0),d=this.options.optionLabel(b),e=this.options.optionClass(b),f=c.val(),g=this.options.multiple?"checkbox":"radio",h=a(this.options.templates.li),i=a("label",h),i.addClass(g),h.addClass(e),this.options.enableHTML?i.html(" "+d):i.text(" "+d),j=a("<input/>").attr("type",g),k=this.options.checkboxName(c),k&&j.attr("name",k),i.prepend(j),l=c.prop("selected")||!1,j.val(f),f===this.options.selectAllValue&&(h.addClass("multiselect-item multiselect-all"),j.parent().parent().addClass("multiselect-all")),i.attr("title",c.attr("title")),this.$ul.append(h),c.is(":disabled")&&j.attr("disabled","disabled").prop("disabled",!0).closest("a").attr("tabindex","-1").closest("li").addClass("disabled"),j.prop("checked",l),l&&this.options.selectedClass&&j.closest("li").addClass(this.options.selectedClass)},createDivider:function(){var c=a(this.options.templates.divider);this.$ul.append(c)},createOptgroup:function(b){var c=a(b).attr("label"),d=a(b).attr("value"),e=a('<li class="multiselect-item multiselect-group"><a href="javascript:void(0);"><label><b></b></label></a></li>'),f=this.options.optionClass(b);e.addClass(f),this.options.enableHTML?a("label b",e).html(" "+c):a("label b",e).text(" "+c),this.options.enableCollapsibleOptGroups&&this.options.multiple&&a("a",e).append('<span class="caret-container"><b class="caret"></b></span>'),this.options.enableClickableOptGroups&&this.options.multiple&&a("a label",e).prepend('<input type="checkbox" value="'+d+'"/>'),a(b).is(":disabled")&&e.addClass("disabled"),this.$ul.append(e),a("option",b).each(a.proxy(function(a,b){this.createOptionValue(b)},this))},buildSelectAll:function(){var b,c,d;"number"==typeof this.options.selectAllValue&&(this.options.selectAllValue=this.options.selectAllValue.toString()),b=this.hasSelectAll(),!b&&this.options.includeSelectAllOption&&this.options.multiple&&a("option",this.$select).length>this.options.includeSelectAllIfMoreThan&&(this.options.includeSelectAllDivider&&this.$ul.prepend(a(this.options.templates.divider)),c=a(this.options.templates.li),a("label",c).addClass("checkbox"),this.options.enableHTML?a("label",c).html(" "+this.options.selectAllText):a("label",c).text(" "+this.options.selectAllText),this.options.selectAllName?a("label",c).prepend('<input type="checkbox" name="'+this.options.selectAllName+'" />'):a("label",c).prepend('<input type="checkbox" />'),d=a("input",c),d.val(this.options.selectAllValue),c.addClass("multiselect-item multiselect-all"),d.parent().parent().addClass("multiselect-all"),this.$ul.prepend(c),d.prop("checked",!1))},buildFilter:function(){var b,c;(this.options.enableFiltering||this.options.enableCaseInsensitiveFiltering)&&(b=Math.max(this.options.enableFiltering,this.options.enableCaseInsensitiveFiltering),this.$select.find("option").length>=b&&(this.$filter=a(this.options.templates.filter),a("input",this.$filter).attr("placeholder",this.options.filterPlaceholder),this.options.includeFilterClearBtn&&(c=a(this.options.templates.filterClearBtn),c.on("click",a.proxy(function(){clearTimeout(this.searchTimeout),this.$filter.find(".multiselect-search").val(""),a("li",this.$ul).show().removeClass("multiselect-filter-hidden"),this.updateSelectAll(),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups()},this)),this.$filter.find(".input-group").append(c)),this.$ul.prepend(this.$filter),this.$filter.val(this.query).on("click",function(a){a.stopPropagation()}).on("input keydown",a.proxy(function(b){13===b.which&&b.preventDefault(),clearTimeout(this.searchTimeout),this.searchTimeout=this.asyncFunction(a.proxy(function(){if(this.query!==b.target.value){this.query=b.target.value;var c,d;a.each(a("li",this.$ul),a.proxy(function(b,e){var i,j,f=a("input",e).length>0?a("input",e).val():"",g=a("label",e).text(),h="";"text"===this.options.filterBehavior?h=g:"value"===this.options.filterBehavior?h=f:"both"===this.options.filterBehavior&&(h=g+"\n"+f),f!==this.options.selectAllValue&&g&&(i=!1,this.options.enableCaseInsensitiveFiltering&&(h=h.toLowerCase(),this.query=this.query.toLowerCase()),this.options.enableFullValueFiltering&&"both"!==this.options.filterBehavior?(j=h.trim().substring(0,this.query.length),this.query.indexOf(j)>-1&&(i=!0)):h.indexOf(this.query)>-1&&(i=!0),a(e).toggle(i).toggleClass("multiselect-filter-hidden",!i),a(e).hasClass("multiselect-group")?(c=e,d=i):(i&&a(c).show().removeClass("multiselect-filter-hidden"),!i&&d&&a(e).show().removeClass("multiselect-filter-hidden")))},this))}this.updateSelectAll(),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups(),this.options.onFiltering(b.target)},this),300,this)},this))))},destroy:function(){this.$container.remove(),this.$select.show(),this.$select.prop("disabled",this.options.wasDisabled),this.$select.data("multiselect",null)},refresh:function(){var b=a.map(a("li input",this.$ul),a);a("option",this.$select).each(a.proxy(function(c,d){var g,h,e=a(d),f=e.val();for(h=b.length;0<h--;)if(f===(g=b[h]).val()){e.is(":selected")?(g.prop("checked",!0),this.options.selectedClass&&g.closest("li").addClass(this.options.selectedClass)):(g.prop("checked",!1),this.options.selectedClass&&g.closest("li").removeClass(this.options.selectedClass)),e.is(":disabled")?g.attr("disabled","disabled").prop("disabled",!0).closest("li").addClass("disabled"):g.prop("disabled",!1).closest("li").removeClass("disabled");break}},this)),this.updateButtonText(),this.updateSelectAll(),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups()},select:function(b,c){var d,e,f,g;for(a.isArray(b)||(b=[b]),d=0;d<b.length;d++)e=b[d],null!==e&&void 0!==e&&(f=this.getOptionByValue(e),g=this.getInputByValue(e),void 0!==f&&void 0!==g&&(this.options.multiple||this.deselectAll(!1),this.options.selectedClass&&g.closest("li").addClass(this.options.selectedClass),g.prop("checked",!0),f.prop("selected",!0),c&&this.options.onChange(f,!0)));this.updateButtonText(),this.updateSelectAll(),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups()},clearSelection:function(){this.deselectAll(!1),this.updateButtonText(),this.updateSelectAll(),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups()},deselect:function(b,c){var d,e,f,g;for(a.isArray(b)||(b=[b]),d=0;d<b.length;d++)e=b[d],null!==e&&void 0!==e&&(f=this.getOptionByValue(e),g=this.getInputByValue(e),void 0!==f&&void 0!==g&&(this.options.selectedClass&&g.closest("li").removeClass(this.options.selectedClass),g.prop("checked",!1),f.prop("selected",!1),c&&this.options.onChange(f,!1)));this.updateButtonText(),this.updateSelectAll(),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups()},selectAll:function(b,c){var d,e;b="undefined"==typeof b?!0:b,d=a("li:not(.divider):not(.disabled):not(.multiselect-group)",this.$ul),e=a("li:not(.divider):not(.disabled):not(.multiselect-group):not(.multiselect-filter-hidden):not(.multiselect-collapisble-hidden)",this.$ul).filter(":visible"),b?(a("input:enabled",e).prop("checked",!0),e.addClass(this.options.selectedClass),a("input:enabled",e).each(a.proxy(function(b,c){var d=a(c).val(),e=this.getOptionByValue(d);a(e).prop("selected",!0)},this))):(a("input:enabled",d).prop("checked",!0),d.addClass(this.options.selectedClass),a("input:enabled",d).each(a.proxy(function(b,c){var d=a(c).val(),e=this.getOptionByValue(d);a(e).prop("selected",!0)},this))),a('li input[value="'+this.options.selectAllValue+'"]',this.$ul).prop("checked",!0),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups(),c&&this.options.onSelectAll()},deselectAll:function(b,c){var d,e;b="undefined"==typeof b?!0:b,d=a("li:not(.divider):not(.disabled):not(.multiselect-group)",this.$ul),e=a("li:not(.divider):not(.disabled):not(.multiselect-group):not(.multiselect-filter-hidden):not(.multiselect-collapisble-hidden)",this.$ul).filter(":visible"),b?(a('input[type="checkbox"]:enabled',e).prop("checked",!1),e.removeClass(this.options.selectedClass),a('input[type="checkbox"]:enabled',e).each(a.proxy(function(b,c){var d=a(c).val(),e=this.getOptionByValue(d);a(e).prop("selected",!1)},this))):(a('input[type="checkbox"]:enabled',d).prop("checked",!1),d.removeClass(this.options.selectedClass),a('input[type="checkbox"]:enabled',d).each(a.proxy(function(b,c){var d=a(c).val(),e=this.getOptionByValue(d);a(e).prop("selected",!1)},this))),a('li input[value="'+this.options.selectAllValue+'"]',this.$ul).prop("checked",!1),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups(),c&&this.options.onDeselectAll()},rebuild:function(){this.$ul.html(""),this.options.multiple="multiple"===this.$select.attr("multiple"),this.buildSelectAll(),this.buildDropdownOptions(),this.buildFilter(),this.updateButtonText(),this.updateSelectAll(!0),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups(),this.options.disableIfEmpty&&a("option",this.$select).length<=0?this.disable():this.enable(),this.options.dropRight&&this.$ul.addClass("pull-right")},dataprovider:function(c){var d=0,e=this.$select.empty();a.each(c,function(c,f){var g,h,i;if(a.isArray(f.children))d++,g=a("<optgroup/>").attr({label:f.label||"Group "+d,disabled:!!f.disabled}),b(f.children,function(b){var d,c={value:b.value,label:b.label||b.value,title:b.title,selected:!!b.selected,disabled:!!b.disabled};for(d in b.attributes)c["data-"+d]=b.attributes[d];g.append(a("<option/>").attr(c))});else{h={value:f.value,label:f.label||f.value,title:f.title,"class":f["class"],selected:!!f.selected,disabled:!!f.disabled};for(i in f.attributes)h["data-"+i]=f.attributes[i];g=a("<option/>").attr(h),g.text(f.label||f.value)}e.append(g)}),this.rebuild()},enable:function(){this.$select.prop("disabled",!1),this.$button.prop("disabled",!1).removeClass("disabled")},disable:function(){this.$select.prop("disabled",!0),this.$button.prop("disabled",!0).addClass("disabled")},setOptions:function(a){this.options=this.mergeOptions(a)},mergeOptions:function(b){return a.extend(!0,{},this.defaults,this.options,b)},hasSelectAll:function(){return a("li.multiselect-all",this.$ul).length>0},updateOptGroups:function(){var b=a("li.multiselect-group",this.$ul),c=this.options.selectedClass;b.each(function(){var b=a(this).nextUntil("li.multiselect-group").not(".multiselect-filter-hidden").not(".disabled"),d=!0;b.each(function(){var b=a("input",this);b.prop("checked")||(d=!1)}),c&&(d?a(this).addClass(c):a(this).removeClass(c)),a("input",this).prop("checked",d)})},updateSelectAll:function(){var c,d,e,f,g;this.hasSelectAll()&&(c=a("li:not(.multiselect-item):not(.multiselect-filter-hidden):not(.multiselect-group):not(.disabled) input:enabled",this.$ul),d=c.length,e=c.filter(":checked").length,f=a("li.multiselect-all",this.$ul),g=f.find("input"),e>0&&e===d?(g.prop("checked",!0),f.addClass(this.options.selectedClass)):(g.prop("checked",!1),f.removeClass(this.options.selectedClass)))},updateButtonText:function(){var b=this.getSelected();this.options.enableHTML?a(".multiselect .multiselect-selected-text",this.$container).html(this.options.buttonText(b,this.$select)):a(".multiselect .multiselect-selected-text",this.$container).text(this.options.buttonText(b,this.$select)),a(".multiselect",this.$container).attr("title",this.options.buttonTitle(b,this.$select))},getSelected:function(){return a("option",this.$select).filter(":selected")},getOptionByValue:function(b){var e,f,c=a("option",this.$select),d=b.toString();for(e=0;e<c.length;e+=1)if(f=c[e],f.value===d)return a(f)},getInputByValue:function(b){var e,f,c=a("li input:not(.multiselect-search)",this.$ul),d=b.toString();for(e=0;e<c.length;e+=1)if(f=c[e],f.value===d)return a(f)},updateOriginalOptions:function(){this.originalOptions=this.$select.clone()[0].options},asyncFunction:function(a,b,c){var d=Array.prototype.slice.call(arguments,3);return setTimeout(function(){a.apply(c||window,d)},b)},setAllSelectedText:function(a){this.options.allSelectedText=a,this.updateButtonText()}},a.fn.multiselect=function(b,d,e){return this.each(function(){var f=a(this).data("multiselect"),g="object"==typeof b&&b;f||(f=new c(this,g),a(this).data("multiselect",f)),"string"==typeof b&&(f[b](d,e),"destroy"===b&&a(this).data("multiselect",!1))})},a.fn.multiselect.Constructor=c,a(function(){a("select[data-role=multiselect]").multiselect()})}(window.jQuery);

/*<script src="${ctxStatic}/org/tinygroup/ratymaster/js/jquery.raty.js"></script>*/
!function(a){"use strict";var b={init:function(c){return this.each(function(){this.self=a(this),b.destroy.call(this.self),this.opt=a.extend(!0,{},a.fn.raty.defaults,c),b._adjustCallback.call(this),b._adjustNumber.call(this),b._adjustHints.call(this),this.opt.score=b._adjustedScore.call(this,this.opt.score),"img"!==this.opt.starType&&b._adjustStarType.call(this),b._adjustPath.call(this),b._createStars.call(this),this.opt.cancel&&b._createCancel.call(this),this.opt.precision&&b._adjustPrecision.call(this),b._createScore.call(this),b._apply.call(this,this.opt.score),b._setTitle.call(this,this.opt.score),b._target.call(this,this.opt.score),this.opt.readOnly?b._lock.call(this):(this.style.cursor="pointer",b._binds.call(this))})},_adjustCallback:function(){var b,a=["number","readOnly","score","scoreName","target","path"];for(b=0;b<a.length;b++)"function"==typeof this.opt[a[b]]&&(this.opt[a[b]]=this.opt[a[b]].call(this))},_adjustedScore:function(a){return a?b._between(a,0,this.opt.number):a},_adjustHints:function(){var a,b,c,d,e,f;if(this.opt.hints||(this.opt.hints=[]),this.opt.halfShow||this.opt.half)for(a=this.opt.precision?10:2,b=0;b<this.opt.number;b++)for(c=this.opt.hints[b],"[object Array]"!==Object.prototype.toString.call(c)&&(c=[c]),this.opt.hints[b]=[],d=0;a>d;d++)e=c[d],f=c[c.length-1],void 0===f&&(f=null),this.opt.hints[b][d]=void 0===e?f:e},_adjustNumber:function(){this.opt.number=b._between(this.opt.number,1,this.opt.numberMax)},_adjustPath:function(){this.opt.path=this.opt.path||"",this.opt.path&&"/"!==this.opt.path.charAt(this.opt.path.length-1)&&(this.opt.path+="/")},_adjustPrecision:function(){this.opt.half=!0},_adjustStarType:function(){var b,a=["cancelOff","cancelOn","starHalf","starOff","starOn"];for(this.opt.path="",b=0;b<a.length;b++)this.opt[a[b]]=this.opt[a[b]].replace(".","-")},_apply:function(a){b._fill.call(this,a),a&&(a>0&&this.score.val(a),b._roundStars.call(this,a))},_between:function(a,b,c){return Math.min(Math.max(parseFloat(a),b),c)},_binds:function(){this.cancel&&(b._bindOverCancel.call(this),b._bindClickCancel.call(this),b._bindOutCancel.call(this)),b._bindOver.call(this),b._bindClick.call(this),b._bindOut.call(this)},_bindClick:function(){var c=this;c.stars.on("click.raty",function(d){var e=!0,f=c.opt.half||c.opt.precision?c.self.data("score"):this.alt||a(this).data("alt");c.opt.click&&(e=c.opt.click.call(c,+f,d)),(e||void 0===e)&&(c.opt.half&&!c.opt.precision&&(f=b._roundHalfScore.call(c,f)),b._apply.call(c,f))})},_bindClickCancel:function(){var a=this;a.cancel.on("click.raty",function(b){a.score.removeAttr("value"),a.opt.click&&a.opt.click.call(a,null,b)})},_bindOut:function(){var a=this;a.self.on("mouseleave.raty",function(c){var d=+a.score.val()||void 0;b._apply.call(a,d),b._target.call(a,d,c),b._resetTitle.call(a),a.opt.mouseout&&a.opt.mouseout.call(a,d,c)})},_bindOutCancel:function(){var a=this;a.cancel.on("mouseleave.raty",function(c){var e,d=a.opt.cancelOff;"img"!==a.opt.starType&&(d=a.opt.cancelClass+" "+d),b._setIcon.call(a,this,d),a.opt.mouseout&&(e=+a.score.val()||void 0,a.opt.mouseout.call(a,e,c))})},_bindOver:function(){var a=this,c=a.opt.half?"mousemove.raty":"mouseover.raty";a.stars.on(c,function(c){var d=b._getScoreByPosition.call(a,c,this);b._fill.call(a,d),a.opt.half&&(b._roundStars.call(a,d,c),b._setTitle.call(a,d,c),a.self.data("score",d)),b._target.call(a,d,c),a.opt.mouseover&&a.opt.mouseover.call(a,d,c)})},_bindOverCancel:function(){var a=this;a.cancel.on("mouseover.raty",function(c){var d=a.opt.path+a.opt.starOff,e=a.opt.cancelOn;"img"===a.opt.starType?a.stars.attr("src",d):(e=a.opt.cancelClass+" "+e,a.stars.attr("class",d)),b._setIcon.call(a,this,e),b._target.call(a,null,c),a.opt.mouseover&&a.opt.mouseover.call(a,null)})},_buildScoreField:function(){return a("<input />",{name:this.opt.scoreName,type:"hidden"}).appendTo(this)},_createCancel:function(){var b=this.opt.path+this.opt.cancelOff,c=a("<"+this.opt.starType+" />",{title:this.opt.cancelHint,"class":this.opt.cancelClass});"img"===this.opt.starType?c.attr({src:b,alt:"x"}):c.attr("data-alt","x").addClass(b),"left"===this.opt.cancelPlace?this.self.prepend("&#160;").prepend(c):this.self.append("&#160;").append(c),this.cancel=c},_createScore:function(){var c=a(this.opt.targetScore);this.score=c.length?c:b._buildScoreField.call(this)},_createStars:function(){var c,d,e;for(c=1;c<=this.opt.number;c++)d=b._nameForIndex.call(this,c),e={alt:c,src:this.opt.path+this.opt[d]},"img"!==this.opt.starType&&(e={"data-alt":c,"class":e.src}),e.title=b._getHint.call(this,c),a("<"+this.opt.starType+" />",e).appendTo(this),this.opt.space&&this.self.append(c<this.opt.number?"&#160;":"");this.stars=this.self.children(this.opt.starType)},_error:function(b){a(this).text(b),a.error(b)},_fill:function(a){var d,e,f,g,h,c=0;for(d=1;d<=this.stars.length;d++)f=this.stars[d-1],g=b._turnOn.call(this,d,a),this.opt.iconRange&&this.opt.iconRange.length>c?(h=this.opt.iconRange[c],e=b._getRangeIcon.call(this,h,g),d<=h.range&&b._setIcon.call(this,f,e),d===h.range&&c++):(e=this.opt[g?"starOn":"starOff"],b._setIcon.call(this,f,e))},_getFirstDecimal:function(a){var b=a.toString().split(".")[1],c=0;return b&&(c=parseInt(b.charAt(0),10),"9999"===b.slice(1,5)&&c++),c},_getRangeIcon:function(a,b){return b?a.on||this.opt.starOn:a.off||this.opt.starOff},_getScoreByPosition:function(c,d){var f,g,e=parseInt(d.alt||d.getAttribute("data-alt"),10);return this.opt.half&&(f=b._getWidth.call(this),g=parseFloat((c.pageX-a(d).offset().left)/f),e=e-1+g),e},_getHint:function(a,c){if(0!==a&&!a)return this.opt.noRatedMsg;var d=b._getFirstDecimal.call(this,a),e=Math.ceil(a),f=this.opt.hints[(e||1)-1],g=f,h=!c||this.move;return this.opt.precision?(h&&(d=0===d?9:d-1),g=f[d]):(this.opt.halfShow||this.opt.half)&&(d=h&&0===d?1:d>5?1:0,g=f[d]),""===g?"":g||a},_getWidth:function(){var a=this.stars[0].width||parseFloat(this.stars.eq(0).css("font-size"));return a||b._error.call(this,"Could not get the icon width!"),a},_lock:function(){var a=b._getHint.call(this,this.score.val());this.style.cursor="",this.title=a,this.score.prop("readonly",!0),this.stars.prop("title",a),this.cancel&&this.cancel.hide(),this.self.data("readonly",!0)},_nameForIndex:function(a){return this.opt.score&&this.opt.score>=a?"starOn":"starOff"},_resetTitle:function(){for(var c=0;c<this.opt.number;c++)this.stars[c].title=b._getHint.call(this,c+1)},_roundHalfScore:function(a){var c=parseInt(a,10),d=b._getFirstDecimal.call(this,a);return 0!==d&&(d=d>5?1:.5),c+d},_roundStars:function(a,c){var e,f,g,d=(a%1).toFixed(2);c||this.move?e=d>.5?"starOn":"starHalf":d>this.opt.round.down&&(e="starOn",this.opt.halfShow&&d<this.opt.round.up?e="starHalf":d<this.opt.round.full&&(e="starOff")),e&&(f=this.opt[e],g=this.stars[Math.ceil(a)-1],b._setIcon.call(this,g,f))},_setIcon:function(a,b){a["img"===this.opt.starType?"src":"className"]=this.opt.path+b},_setTarget:function(a,b){b&&(b=this.opt.targetFormat.toString().replace("{score}",b)),a.is(":input")?a.val(b):a.html(b)},_setTitle:function(a,c){if(a){var d=parseInt(Math.ceil(a),10),e=this.stars[d-1];e.title=b._getHint.call(this,a,c)}},_target:function(c,d){var e,f,g;this.opt.target&&(e=a(this.opt.target),e.length||b._error.call(this,"Target selector invalid or missing!"),f=d&&"mouseover"===d.type,void 0===c?c=this.opt.targetText:null===c?c=f?this.opt.cancelHint:this.opt.targetText:("hint"===this.opt.targetType?c=b._getHint.call(this,c,d):this.opt.precision&&(c=parseFloat(c).toFixed(1)),g=d&&"mousemove"===d.type,f||g||this.opt.targetKeep||(c=this.opt.targetText)),b._setTarget.call(this,e,c))},_turnOn:function(a,b){return this.opt.single?a===b:b>=a},_unlock:function(){this.style.cursor="pointer",this.removeAttribute("title"),this.score.removeAttr("readonly"),this.self.data("readonly",!1);for(var a=0;a<this.opt.number;a++)this.stars[a].title=b._getHint.call(this,a+1);this.cancel&&this.cancel.css("display","")},cancel:function(c){return this.each(function(){var d=a(this);d.data("readonly")!==!0&&(b[c?"click":"score"].call(d,null),this.score.removeAttr("value"))})},click:function(c){return this.each(function(){a(this).data("readonly")!==!0&&(c=b._adjustedScore.call(this,c),b._apply.call(this,c),this.opt.click&&this.opt.click.call(this,c,a.Event("click")),b._target.call(this,c))})},destroy:function(){return this.each(function(){var b=a(this),c=b.data("raw");c?b.off(".raty").empty().css({cursor:c.style.cursor}).removeData("readonly"):b.data("raw",b.clone()[0])})},getScore:function(){var b,a=[];return this.each(function(){b=this.score.val(),a.push(b?+b:void 0)}),a.length>1?a:a[0]},move:function(c){return this.each(function(){var f,g,h,i,j,d=parseInt(c,10),e=b._getFirstDecimal.call(this,c);d>=this.opt.number&&(d=this.opt.number-1,e=10),f=b._getWidth.call(this),g=f/10,h=a(this.stars[d]),i=h.offset().left+g*e,j=a.Event("mousemove",{pageX:i}),this.move=!0,h.trigger(j),this.move=!1})},readOnly:function(c){return this.each(function(){var d=a(this);d.data("readonly")!==c&&(c?(d.off(".raty").children(this.opt.starType).off(".raty"),b._lock.call(this)):(b._binds.call(this),b._unlock.call(this)),d.data("readonly",c))})},reload:function(){return b.set.call(this,{})},score:function(){var c=a(this);return arguments.length?b.setScore.apply(c,arguments):b.getScore.call(c)},set:function(b){return this.each(function(){a(this).raty(a.extend({},this.opt,b))})},setScore:function(c){return this.each(function(){a(this).data("readonly")!==!0&&(c=b._adjustedScore.call(this,c),b._apply.call(this,c),b._target.call(this,c))})}};a.fn.raty=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?(a.error("Method "+c+" does not exist!"),void 0):b.init.apply(this,arguments)},a.fn.raty.defaults={cancel:!1,cancelClass:"raty-cancel",cancelHint:"Cancel this rating!",cancelOff:"cancel-off.png",cancelOn:"cancel-on.png",cancelPlace:"left",click:void 0,half:!1,halfShow:!0,hints:["bad","poor","regular","good","gorgeous"],iconRange:void 0,mouseout:void 0,mouseover:void 0,noRatedMsg:"Not rated yet!",number:5,numberMax:20,path:void 0,precision:!1,readOnly:!1,round:{down:.25,full:.6,up:.76},score:void 0,scoreName:"score",single:!1,space:!0,starHalf:"star-half.png",starOff:"star-off.png",starOn:"star-on.png",starType:"img",target:void 0,targetFormat:"{score}",targetKeep:!1,targetScore:void 0,targetText:"",targetType:"hint"}}(jQuery);

/*<script src="${ctxStatic}/org/tinygroup/submainmenu/js/submainmenu.js"></script>*/
!function(a){var b=function(a){var c,d;a=a||{},c=b.defaults;for(d in c)void 0===a[d]&&(a[d]=c[d]);return new b.fn._init(a)};b.fn=b.prototype={_init:function(b){this.groups={},this.config=b,this.pid=b.pid,this.name=b.name,this.menuData=b.menu,this.getRootMenu(),this.group();var c=this.getDom(this.groups["tiny_menu_nav"+b.id]);return a("#"+b.id).append(c),this.editDom(b.id),this._bindEnv(b.id),this.currentEvn(b.id,b.currentId),this},getRootMenu:function(){var d,e,a=this.menuData,b=a.length,c=!1;for(d=0;b>d;d++){for(c=!0,e=0;b>e;e++)if(a[d][this.pid]==a[e].id){c=!1;break}c&&(this.menuData[d][this.pid]="tiny_menu_nav"+this.config.id)}},group:function(){var b,a=this.menuData;for(b=0;b<a.length;b++)(""===a[b][this.pid]||null===a[b][this.pid])&&(a[b][this.pid]=0),this.groups[a[b][this.pid]]?this.groups[a[b][this.pid]].push(a[b]):(this.groups[a[b][this.pid]]=[],this.groups[a[b][this.pid]].push(a[b]))},getDom:function(a){var b,c;if(!a)return"";for(b="<ul>",c=0;c<a.length;c++)b+='<li><a id="'+a[c].id+'" href="'+this.config.linkUrl+a[c].id+'"><div class="nav-icon"><span class="fa fa-chevron-down"></span></div><div class="menu-title">'+a[c][this.name]+"</div></a>",b+=this.getDom(this.groups[a[c].id]),b+="</li>";return b+="</ul>"},editDom:function(b){a("#"+b).find("a").each(function(){0===a(this).siblings("ul").length&&a(this).children("div.nav-icon").empty()})},currentEvn:function(b,c){a("#"+b).find("a").removeClass("active"),a("#"+c).addClass("active")},_bindEnv:function(b){a("#"+b).off("click.treetoggle").on("click.treetoggle","span.fa",function(b){b.preventDefault(),b.stopPropagation(),a(this).parents("a").siblings("ul").length>0&&a(this).parents("a").siblings("ul").slideToggle(0).end().children("div").children("span").toggleClass("fa-chevron-down fa-chevron-right")})}},b.fn._init.prototype=b.fn,a.fn.menuNav=function(){var a=arguments;return this[this.live?"live":"bind"]("click",function(){return b.apply(this,a),!1}),this},b.defaults={id:null,menu:null,currentId:null,rootId:0,linkUrl:null,pid:"pId",name:"name"},window.menuNav=a.menuNav=b}(jQuery);

/*<script src="${ctxStatic}/org/tinygroup/tabShow/js/artTabs.js"></script>*/
function setCursorPosition(a,b){var c=a.value,d=c.length;b=b||d,b>d||setTimeout(function(){if(a.focus(),a.setSelectionRange)a.setSelectionRange(b,b);else{var c=a.createTextRange();c.moveStart("character",-d),c.moveEnd("character",-d),c.moveStart("character",b),c.moveEnd("character",0),c.select()}},10)}var idArray=[];!function(a){var b=function(a){var c,d;a=a||{},c=b.defaults;for(d in c)void 0===a[d]&&(a[d]=c[d]);return new b.fn._init(a)};b.fn=b.prototype={_init:function(b){var d,e,c=this;return c.config=b,a("#mm",top.document).hasClass("m-menu")?(d=c.curId(),null!==b.addTab&&c.addIframe(b.addTab.items)&&(b.isRefresh&&c.refreshIframe(b.addTab.items),b.closeTab&&c.closeIframe(d)),null!==b.toTab&&c.toIframe(b.toTab.id)&&(b.isRefresh&&c.refreshIframe(b.toTab.id),b.closeTab&&c.closeIframe(d)),null==b.toTab&&null==b.addTab&&b.closeTab&&(c.prevShow(d),c.closeIframe(d)),null==b.toTab&&null==b.addTab&&b.isRefresh&&c.refreshIframe(d),void 0):(c._getMenu(b.menu),e=a(".m-nav ul").find("li"),a("#0Con").css({overflow:"auto"}).height(a(window).height()-76),c.menuHover(e),c.menuClick(e),c.closeTab_a(),c.tabCut(),c.resize(),c.nextPrev(),c._getRighthand(),c.tabCloseEven(),c)},curId:function(){var b=top.document,c=a("#tabList",b).find("li").filter(".on"),d=c.attr("id"),e=d.indexOf("list"),f=d.substring(0,e);return f},addIframe:function(b){var c=this,d=top.document;return b=b,b.height=a("#0Con",d).height(),-1==jQuery.inArray(b.id,top.idArray)?(c._getIframe(b),c._getTablist(b),top.idArray.push(b.id),c.addShow(b.id)):c.cutShow(b.id),c},toIframe:function(a){var b=this;return-1==jQuery.inArray(a,top.idArray)?(alert('指定ID= "'+a+'" 的页面不存在，请重新打开'),!1):(b.cutShow(a),b)},closeIframe:function(a){var c,b=this;a=a,c=jQuery.inArray(a,top.idArray),top.idArray.splice(c,1),b.removeTab(a)},tabCut:function(){var b=this;a("#tabList").delegate("li","click",function(){var c=a(this).attr("id"),d=c.indexOf("list"),e=c.substring(0,d);b.cutShow(e)})},menuClick:function(b){var c=this;return b.each(function(){a(this).find("dd").click(function(){var b={};return b.url=a(this).find("a").attr("href"),b.title=a(this).find("a").text(),b.id=a(this).find("a").attr("id"),b.height=a(window).height()-76,-1==jQuery.inArray(b.id,idArray)?(c._getIframe(b),c._getTablist(b),idArray.push(b.id),c.addShow(b.id)):c.cutShow(b.id),!1})}),c},addShow:function(b){var c=top.document;return a("#"+b+"list",c).addClass("on").siblings().removeClass("on"),a("#"+b+"Con",c).siblings("div").hide(),this},cutShow:function(b){var c=top.document;return a("#"+b+"list",c).addClass("on").siblings().removeClass("on"),a("#"+b+"Con",c).show().siblings("div").hide(),this},prevShow:function(b){var c=top.document;return a("#"+b+"list",c).prev().addClass("on"),a("#"+b+"Con",c).prev().show(),this},removeTab:function(b){var c=top.document;return a("#"+b+"list",c).remove(),a("#"+b+"Con",c).remove(),this},closeTab_a:function(){var b=this;return a("#tabList").delegate("a.m-tab-close","click",function(){var c=a(this).parent().attr("id"),d=c.indexOf("list"),e=c.substring(0,d),f=jQuery.inArray(e,idArray);idArray.splice(f,1),a(this).parent().hasClass("on")?(b.prevShow(e),b.removeTab(e)):b.removeTab(e)}),b},nextPrev:function(){var b=0,c=120;a("#tabLeft").on("click",function(){var e,f,g;for(a("#tabList").parent().innerWidth(),e=0,f=a("#tabList").find("li"),g=0;g<f.length;g++)e+=f.eq(g).outerWidth(!0);return b>=0?!1:(a("#tabList").animate({left:b+c}),b+=c,void 0)}),a("#tabRight").on("click",function(){var g,d=a("#tabList").parent().innerWidth(),e=0,f=a("#tabList").find("li");for(g=0;g<f.length;g++)e+=f.eq(g).outerWidth(!0);return d>=e?!1:e-Math.abs(b)<=d?!1:(a("#tabList").animate({left:b-c}),b-=c,void 0)})},menuHover:function(b){return b.hover(function(){a(this).children("dl").fadeIn(300)},function(){a(this).children("dl").fadeOut(0)}),this},resize:function(){return a(window).resize(function(){var b=a(window).height()-76;a("#tabCon").children("div").height(b)}),this},refreshIframe:function(b){var c=top.document;return b.id?a("#"+b.id+"Con",c).find(".m-frameCon")[0].contentWindow.location.href=b.url:a("#"+b+"Con",c).find(".m-frameCon")[0].contentWindow.location.reload(),this},_getMenu:function(b){var c=a('<div class="m-nav"></div>'),d=a("<ul></ul>");return a(b).each(function(c){var e=a("<li><span>"+b[c].text+"</span></li>"),f=a("<dl></dl>");a(b[c].items).each(function(a){var d='<dd><a id="'+b[c].items[a].id+'" href="'+b[c].items[a].href+'">'+b[c].items[a].text+"</a>";f.append(d)}),e.append(f),d.append(e)}),c.append(d),a(".m-container").prepend(c),this},_getIframe:function(b){var c=top.document,d="";return d+='<div id="'+b.id+'Con" style="height:'+b.height+'px;" class="m-tab-content"><iframe scrolling="auto" src="'+b.url+'" frameborder="0" class="m-frameCon"></iframe></div>',a("#tabCon",c).append(d),this},_getTablist:function(b){var c=top.document,d="";return d+='<li id="'+b.id+'list"><span>'+b.title+'</span><a href="javascript:" class="m-tab-close"></a></li>',a("#tabList",c).append(d),this},_getRighthand:function(){var c=this;if(!a("#mm",top.document).hasClass("m-menu"))return a("body").append(b.rightHand),a("#tabList").delegate("li","contextmenu",function(b){var g,d=a(this).attr("id"),e=d.indexOf("list"),f=d.substring(0,e);return c.cutShow(f),g=a("#tabList").find("li").eq(0).attr("id"),g==d?!1:(a("#mm").show().css({top:b.pageY-2,left:b.pageX-4}),!1)}),a("#mm").find(".menu-item").hover(function(){a(this).addClass("menu-active")},function(){a(this).removeClass("menu-active")}),a("#mm").bind("mouseleave",function(){a(this).hide()}),c},tabCloseEven:function(){var b=this;return a("#mm-tabupdate").click(function(){var c=a("#tabList").find("li").filter(".on").attr("id"),d=c.indexOf("list"),e=c.substring(0,d);b.refreshIframe(e),a("#mm").hide()}),a("#mm-tabclose").click(function(){var c=a("#tabList").find("li").filter(".on").attr("id"),d=c.indexOf("list"),e=c.substring(0,d),f=jQuery.inArray(e,idArray);idArray.splice(f,1),b.prevShow(e),b.removeTab(e),a("#mm").hide()}),a("#mm-tabcloseall").click(function(){a("#tabList").children("li").each(function(b){0==b||a(this).remove()}),a("#tabCon").children("div").each(function(b){0==b||a(this).remove()}),a("#tabList").find("li").eq(0).addClass("on"),a("#tabCon").find("div").eq(0).show(),idArray=[],a("#mm").hide()}),a("#mm-tabcloseother").click(function(){var b=a("#tabList").find("li").filter(".on").attr("id"),c=b.indexOf("list"),d=b.substring(0,c),e=a("#tabList").find("li").filter(".on").index();a("#tabList").children("li").each(function(b){0==b||b==e||a(this).remove()}),a("#tabCon").children("div").each(function(b){0==b||b==e||a(this).remove()}),idArray=[],idArray.push(d),a("#mm").hide()}),this}},b.fn._init.prototype=b.fn,a.fn.tabs=a.fn.artTabs=function(){var a=arguments;return this[this.live?"live":"bind"]("click",function(){return b.apply(this,a),!1}),this},b.rightHand='<div id="mm" class="m-menu"><div class="menu-line"></div><div class="menu-item" id="mm-tabupdate"><div class="menu-text">刷新</div></div><div class="menu-sep"></div><div class="menu-item" id="mm-tabclose"><div class="menu-text">关闭</div></div><div class="menu-item" id="mm-tabcloseother"><div class="menu-text">关闭其他</div></div><div class="menu-item" id="mm-tabcloseall"><div class="menu-text">关闭全部</div></div></div>',b.defaults={menu:null,addTab:null,toTab:null,closeTab:!1,isRefresh:!1},window.artTabs=a.tabs=a.artTabs=b}(jQuery);

/*<script src="${ctxStatic}/org/tinygroup/bootstrapvalidator/js/bootstrapValidator.js"></script>*/
!function(a){var b=function(c,d){var e,f;this.$form=a(c),this.options=a.extend({},b.DEFAULT_OPTIONS,d),this.$invalidField=null,this.$submitButton=null,this.STATUS_NOT_VALIDATED="NOT_VALIDATED",this.STATUS_VALIDATING="VALIDATING",this.STATUS_INVALID="INVALID",this.STATUS_VALID="VALID",e=function(){for(var a=3,b=document.createElement("div"),c=b.all||[];b.innerHTML="<!--[if gt IE "+ ++a+"]><br><![endif]-->",c[0];);return a>4?a:!a}(),f=document.createElement("div"),this._changeEvent=9!==e&&"oninput"in f?"input":"keyup",this._submitIfValid=null,this._init()};b.DEFAULT_OPTIONS={elementClass:"bv-form",message:"输入正常的数据格式",threshold:null,excluded:[":disabled",":hidden",":not(:visible)"],feedbackIcons:{valid:"fa fa-check",invalid:"fa fa-times",validating:"fa fa-refresh"},submitButtons:'[type="submit"]',submitHandler:null,live:"enabled",fields:null},b.prototype={constructor:b,_init:function(){var d,e,f,g,h,i,j,k,b=this,c={excluded:this.$form.attr("data-bv-excluded"),trigger:this.$form.attr("data-bv-trigger"),message:this.$form.attr("data-bv-message"),submitButtons:this.$form.attr("data-bv-submitbuttons"),threshold:this.$form.attr("data-bv-threshold"),live:this.$form.attr("data-bv-live"),fields:{},feedbackIcons:{valid:this.$form.attr("data-bv-feedbackicons-valid"),invalid:this.$form.attr("data-bv-feedbackicons-invalid"),validating:this.$form.attr("data-bv-feedbackicons-validating")}};this.$form.attr("novalidate","novalidate").addClass(this.options.elementClass).on("submit.bv",function(a){a.preventDefault(),b.validate()}).on("click",this.options.submitButtons,function(){b.$submitButton=a(this),b._submitIfValid=!0}).find("[name], [data-bv-field]").each(function(){var l,m,n,k=a(this);if(!b._isExcluded(k)){l=k.attr("name")||k.attr("data-bv-field"),m={};for(e in a.fn.bootstrapValidator.validators)if(d=a.fn.bootstrapValidator.validators[e],f=k.attr("data-bv-"+e.toLowerCase())+"",j="function"==typeof d.enableByHtml5?d.enableByHtml5(a(this)):null,j&&"false"!=f||j!==!0&&(""==f||"true"==f)){d.html5Attributes=d.html5Attributes||{message:"message"},m[e]=a.extend({},1==j?{}:j,m[e]);for(i in d.html5Attributes)g=d.html5Attributes[i],h=k.attr("data-bv-"+e.toLowerCase()+"-"+i),h&&("true"==h?h=!0:"false"==h&&(h=!1),m[e][g]=h)}n={trigger:k.attr("data-bv-trigger"),message:k.attr("data-bv-message"),container:k.attr("data-bv-container"),selector:k.attr("data-bv-selector"),threshold:k.attr("data-bv-threshold"),validators:m},a.isEmptyObject(n.validators)||a.isEmptyObject(n)||(k.attr("data-bv-field",l),c.fields[l]=a.extend({},n,c.fields[l]))}}).end().find(this.options.submitButtons).each(function(){a("<input/>").attr("type","hidden").attr("name",a(this).attr("name")).val(a(this).val()).appendTo(b.$form)}),this.options=a.extend(!0,this.options,c);for(k in this.options.fields)this._initField(k);this.setLiveMode(this.options.live)},_initField:function(b){var c,d,e,f,g,h,i,j,k,l,m,n;if(null!=this.options.fields[b]&&null!=this.options.fields[b].validators){if(c=this.getFieldElements(b),null==c)return delete this.options.fields[b],void 0;for(d in this.options.fields[b].validators)a.fn.bootstrapValidator.validators[d]||delete this.options.fields[b].validators[d];for(e=this,f=c.attr("type"),g="radio"==f||"checkbox"==f||"file"==f||"SELECT"==c[0].tagName?"change":e._changeEvent,h=c.length,i=1==h||"radio"==f||"checkbox"==f,j=0;h>j;j++){k=a(c[j]),l=k.parents(".form-group"),m=this.options.fields[b].container?l.find(this.options.fields[b].container):this._getMessageContainer(k),k.attr("data-bv-field")||k.attr("data-bv-field",b),k.on(g+".update.bv",function(){e._submitIfValid=!1,i?e.updateStatus(b,e.STATUS_NOT_VALIDATED,null):e.updateElementStatus(a(this),e.STATUS_NOT_VALIDATED,null)}),k.data("bv.messages",m);for(d in this.options.fields[b].validators)k.data("bv.result."+d,this.STATUS_NOT_VALIDATED),i&&j!=h-1||a("<small/>").css("display","none").attr("data-bv-validator",d).attr("data-bv-validator-for",b).html(this.options.fields[b].validators[d].message||this.options.fields[b].message||this.options.message).addClass("help-block").appendTo(m);this.options.feedbackIcons&&this.options.feedbackIcons.validating&&this.options.feedbackIcons.invalid&&this.options.feedbackIcons.valid&&(!i||j==h-1)&&(l.addClass("has-feedback"),n=a("<i/>").css("display","none").addClass("form-control-feedback").attr("data-bv-icon-for",b).insertAfter(k),0==l.find("label").length&&n.css("top",0))}null==this.options.fields[b]["enabled"]&&(this.options.fields[b]["enabled"]=!0)}},_getMessageContainer:function(a){var c,d,e,b=a.parent();if(b.hasClass("form-group"))return b;if(c=b.attr("class"),!c)return this._getMessageContainer(b);for(c=c.split(" "),d=c.length,e=0;d>e;e++)if(/^col-(xs|sm|md|lg)-\d+$/.test(c[e])||/^col-(xs|sm|md|lg)-offset-\d+$/.test(c[e]))return b;return this._getMessageContainer(b)},_submit:function(){if(this.isValid())this.options.submitHandler&&"function"==typeof this.options.submitHandler?this.options.submitHandler.call(this,this,this.$form,this.$submitButton):this.disableSubmitButtons(!0).defaultSubmit();else if("submitted"==this.options.live&&this.setLiveMode("enabled"),this.$invalidField){var c,b=this.$invalidField.parents(".tab-pane");b&&(c=b.attr("id"))&&a('a[href="#'+c+'"][data-toggle="tab"]').trigger("click.bs.tab.data-api"),this.$invalidField.focus()}},_isExcluded:function(b){var c,d;if(this.options.excluded)for("string"==typeof this.options.excluded&&(this.options.excluded=a.map(this.options.excluded.split(","),function(b){return a.trim(b)})),c=this.options.excluded.length,d=0;c>d;d++)if("string"==typeof this.options.excluded[d]&&b.is(this.options.excluded[d])||"function"==typeof this.options.excluded[d]&&1==this.options.excluded[d].call(this,b,this))return!0;return!1},_exceedThreshold:function(a){var d,e,b=a.attr("data-bv-field"),c=this.options.fields[b].threshold||this.options.threshold;return c?(d=a.attr("type"),e=-1!=["button","checkbox","file","hidden","image","radio","reset","submit"].indexOf(d),e||a.val().length>=c):!0},getFieldElements:function(b){var c=this.options.fields[b].selector?a(this.options.fields[b].selector):this.$form.find('[name="'+b+'"]');return 0==c.length?null:c},setLiveMode:function(b){var c,d;if(this.options.live=b,"submitted"==b)return this;c=this;for(d in this.options.fields)!function(e){var g,h,i,j,k,l,f=c.getFieldElements(e);if(f)for(g=f.attr("type"),h=f.length,i=1==h||"radio"==g||"checkbox"==g,j=c.options.fields[d].trigger||c.options.trigger||("radio"==g||"checkbox"==g||"file"==g||"SELECT"==f[0].tagName?"change":c._changeEvent),k=a.map(j.split(" "),function(a){return a+".live.bv"}).join(" "),l=0;h>l;l++)"enabled"==b?a(f[l]).on(k,function(){c._exceedThreshold(a(this))&&(i?c.validateField(e):c.validateFieldElement(a(this),!1))}):a(f[l]).off(k)}(d);return this},disableSubmitButtons:function(a){return a?"disabled"!=this.options.live&&this.$form.find(this.options.submitButtons).attr("disabled","disabled"):this.$form.find(this.options.submitButtons).removeAttr("disabled"),this},validate:function(){if(!this.options.fields)return this;this.disableSubmitButtons(!0);for(var a in this.options.fields)this.validateField(a);return this.$submitButton&&this._submit(),this},validateField:function(b){var f,c=this.getFieldElements(b),d=c.attr("type"),e="radio"==d||"checkbox"==d?1:c.length;for(f=0;e>f;f++)this.validateFieldElement(a(c[f]),1==e);return this},validateFieldElement:function(b,c){var g,h,i,d=this,e=b.attr("data-bv-field"),f=this.options.fields[e].validators;if(!this.options.fields[e]["enabled"]||this._isExcluded(b))return this;for(g in f)b.data("bv.dfs."+g)&&b.data("bv.dfs."+g).reject(),i=b.data("bv.result."+g),i!=this.STATUS_VALID&&i!=this.STATUS_INVALID&&(b.data("bv.result."+g,this.STATUS_VALIDATING),h=a.fn.bootstrapValidator.validators[g].validate(this,b,f[g]),"object"==typeof h?(c?this.updateStatus(e,this.STATUS_VALIDATING,g):this.updateElementStatus(b,this.STATUS_VALIDATING,g),b.data("bv.dfs."+g,h),h.done(function(a,b,e){a.removeData("bv.dfs."+b),c?d.updateStatus(a.attr("data-bv-field"),e?d.STATUS_VALID:d.STATUS_INVALID,b):d.updateElementStatus(a,e?d.STATUS_VALID:d.STATUS_INVALID,b),e&&1==d._submitIfValid&&d._submit()})):"boolean"==typeof h&&(c?this.updateStatus(e,h?this.STATUS_VALID:this.STATUS_INVALID,g):this.updateElementStatus(b,h?this.STATUS_VALID:this.STATUS_INVALID,g)));return this},updateStatus:function(b,c,d){var h,e=this.getFieldElements(b),f=e.attr("type"),g="radio"==f||"checkbox"==f?1:e.length;for(h=0;g>h;h++)this.updateElementStatus(a(e[h]),c,d);return this},updateElementStatus:function(b,c,d){var k,m,n,l,o,p,e=this,f=b.attr("data-bv-field"),g=b.parents(".form-group"),h=b.data("bv.messages"),i=h.find(".help-block[data-bv-validator]"),j=g.find('.form-control-feedback[data-bv-icon-for="'+f+'"]');if(d)b.data("bv.result."+d,c);else for(k in this.options.fields[f].validators)b.data("bv.result."+k,c);switch(l=b.parents(".tab-pane"),l&&(m=l.attr("id"))&&(n=a('a[href="#'+m+'"][data-toggle="tab"]').parent()),c){case this.STATUS_VALIDATING:this.disableSubmitButtons(!0),g.removeClass("has-success").removeClass("has-error"),d?i.filter('.help-block[data-bv-validator="'+d+'"]').hide():i.hide(),j&&j.removeClass(this.options.feedbackIcons.valid).removeClass(this.options.feedbackIcons.invalid).addClass(this.options.feedbackIcons.validating).show(),n&&n.removeClass("bv-tab-success").removeClass("bv-tab-error");break;case this.STATUS_INVALID:this.disableSubmitButtons(!0),g.removeClass("has-success").addClass("has-error"),d?i.filter('[data-bv-validator="'+d+'"]').show():i.show(),j&&j.removeClass(this.options.feedbackIcons.valid).removeClass(this.options.feedbackIcons.validating).addClass(this.options.feedbackIcons.invalid).show(),n&&n.removeClass("bv-tab-success").addClass("bv-tab-error");break;case this.STATUS_VALID:d?i.filter('[data-bv-validator="'+d+'"]').hide():i.hide(),o=0==i.filter(function(){var c=a(this).css("display"),d=a(this).attr("data-bv-validator");return"block"==c||b.data("bv.result."+d)!=e.STATUS_VALID}).length,this.disableSubmitButtons(!o),j&&j.removeClass(this.options.feedbackIcons.invalid).removeClass(this.options.feedbackIcons.validating).removeClass(this.options.feedbackIcons.valid).addClass(o?this.options.feedbackIcons.valid:this.options.feedbackIcons.invalid).show(),p=function(c){return 0==c.find(".help-block[data-bv-validator]").filter(function(){var c=a(this).css("display"),d=a(this).attr("data-bv-validator");return"block"==c||b.data("bv.result."+d)&&b.data("bv.result."+d)!=e.STATUS_VALID}).length},g.removeClass("has-error has-success").addClass(p(g)?"has-success":"has-error"),n&&n.removeClass("bv-tab-success").removeClass("bv-tab-error").addClass(p(l)?"bv-tab-success":"bv-tab-error");break;case this.STATUS_NOT_VALIDATED:default:this.disableSubmitButtons(!1),g.removeClass("has-success").removeClass("has-error"),d?i.filter('.help-block[data-bv-validator="'+d+'"]').hide():i.hide(),j&&j.removeClass(this.options.feedbackIcons.valid).removeClass(this.options.feedbackIcons.invalid).removeClass(this.options.feedbackIcons.validating).hide(),n&&n.removeClass("bv-tab-success").removeClass("bv-tab-error")}return this},isValid:function(){var b,c,d,e,f,g,h,i;for(c in this.options.fields)if(null!=this.options.fields[c]&&this.options.fields[c]["enabled"])for(b=this.getFieldElements(c),e=b.attr("type"),h="radio"==e||"checkbox"==e?1:b.length,i=0;h>i;i++)if(d=a(b[i]),!this._isExcluded(d))for(g in this.options.fields[c].validators){if(f=d.data("bv.result."+g),f==this.STATUS_NOT_VALIDATED||f==this.STATUS_VALIDATING)return!1;if(f==this.STATUS_INVALID)return this.$invalidField=d,!1}return!0},defaultSubmit:function(){this.$form.off("submit.bv").submit()},resetForm:function(b){var c,d,e,f,g,h;for(c in this.options.fields){for(d=this.getFieldElements(c),e=d.length,h=0;e>h;h++)for(g in this.options.fields[c].validators)a(d[h]).removeData("bv.dfs."+g);this.updateStatus(c,this.STATUS_NOT_VALIDATED,null),b&&(f=d.attr("type"),"radio"==f||"checkbox"==f?d.removeAttr("checked").removeAttr("selected"):d.val(""))}return this.$invalidField=null,this.$submitButton=null,this.disableSubmitButtons(!1),this},enableFieldValidators:function(a,b){return this.options.fields[a]["enabled"]=b,this.updateStatus(a,this.STATUS_NOT_VALIDATED,null),this}},a.fn.bootstrapValidator=function(c){var d=arguments;return this.each(function(){var e=a(this),f=e.data("bootstrapValidator"),g="object"==typeof c&&c;f||(f=new b(this,g),e.data("bootstrapValidator",f)),"string"==typeof c&&f[c].apply(f,Array.prototype.slice.call(d,1))})},a.fn.bootstrapValidator.validators={},a.fn.bootstrapValidator.Constructor=b,a.fn.bootstrapValidator.helpers={date:function(a,b,c,d){var e,f,g,h,i;return 1e3>a||a>9999||0==b||b>12?!1:(e=[31,28,31,30,31,30,31,31,30,31,30,31],(0==a%400||0!=a%100&&0==a%4)&&(e[1]=29),0>c||c>e[b-1]?!1:d===!0?(f=new Date,g=f.getFullYear(),h=f.getMonth(),i=f.getDate(),g>a||a==g&&h>b-1||a==g&&b-1==h&&i>c):!0)},luhn:function(a){for(var b=a.length,c=0,d=[[0,1,2,3,4,5,6,7,8,9],[0,2,4,6,8,1,3,5,7,9]],e=0;b--;)e+=d[c][parseInt(a.charAt(b),10)],c^=1;return 0===e%10&&e>0},mod_11_10:function(a){var d,b=5,c=a.length;for(d=0;c>d;d++)b=(2*(b||10)%11+parseInt(a.charAt(d),10))%10;return 1==b},mod_37_36:function(a,b){var c,d,e,f;for(b=b||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",c=b.length,d=a.length,e=Math.floor(c/2),f=0;d>f;f++)e=(2*(e||c)%(c+1)+b.indexOf(a.charAt(f)))%c;return 1==e}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.base64={validate:function(a,b){var d=b.val();return""==d?!0:/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=|[A-Za-z0-9+\/]{4})$/.test(d)}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.between={html5Attributes:{message:"message",min:"min",max:"max",inclusive:"inclusive"},enableByHtml5:function(a){return"range"==a.attr("type")?{min:a.attr("min"),max:a.attr("max")}:!1},validate:function(a,b,c){var d=b.val();return""==d?!0:(d=parseFloat(d),c.inclusive===!0?d>c.min&&d<c.max:d>=c.min&&d<=c.max)}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.callback={validate:function(b,c,d){var f,e=c.val();return d.callback&&"function"==typeof d.callback?(f=new a.Deferred,f.resolve(c,"callback",d.callback.call(this,e,b)),f):!0}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.choice={html5Attributes:{message:"message",min:"min",max:"max"},validate:function(a,b,c){var d=b.is("select")?a.getFieldElements(b.attr("data-bv-field")).find("option").filter(":selected").length:a.getFieldElements(b.attr("data-bv-field")).filter(":checked").length;return c.min&&d<c.min||c.max&&d>c.max?!1:!0}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.creditCard={validate:function(b,c){var f,g,h,e=c.val();if(""==e)return!0;if(/[^0-9-\s]+/.test(e))return!1;if(e=e.replace(/\D/g,""),!a.fn.bootstrapValidator.helpers.luhn(e))return!1;f={AMERICAN_EXPRESS:{length:[15],prefix:["34","37"]},DINERS_CLUB:{length:[14],prefix:["300","301","302","303","304","305","36"]},DINERS_CLUB_US:{length:[16],prefix:["54","55"]},DISCOVER:{length:[16],prefix:["6011","622126","622127","622128","622129","62213","62214","62215","62216","62217","62218","62219","6222","6223","6224","6225","6226","6227","6228","62290","62291","622920","622921","622922","622923","622924","622925","644","645","646","647","648","649","65"]},JCB:{length:[16],prefix:["3528","3529","353","354","355","356","357","358"]},LASER:{length:[16,17,18,19],prefix:["6304","6706","6771","6709"]},MAESTRO:{length:[12,13,14,15,16,17,18,19],prefix:["5018","5020","5038","6304","6759","6761","6762","6763","6764","6765","6766"]},MASTERCARD:{length:[16],prefix:["51","52","53","54","55"]},SOLO:{length:[16,18,19],prefix:["6334","6767"]},UNIONPAY:{length:[16,17,18,19],prefix:["622126","622127","622128","622129","62213","62214","62215","62216","62217","62218","62219","6222","6223","6224","6225","6226","6227","6228","62290","62291","622920","622921","622922","622923","622924","622925"]},VISA:{length:[16],prefix:["4"]}};for(g in f)for(h in f[g]["prefix"])if(e.substr(0,f[g]["prefix"][h].length)==f[g]["prefix"][h]&&-1!=f[g]["length"].indexOf(e.length))return!0;return!1}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.cusip={validate:function(b,c){var f,g,h,i,j,e=c.val();if(""==e)return!0;if(e=e.toUpperCase(),!/^[0-9A-Z]{9}$/.test(e))return!1;for(f=a.map(e.split(""),function(a){var b=a.charCodeAt(0);return b>="A".charCodeAt(0)&&b<="Z".charCodeAt(0)?b-"A".charCodeAt(0)+10:a}),g=f.length,h=0,i=0;g-1>i;i++)j=parseInt(f[i]),0!=i%2&&(j*=2),j>9&&(j-=9),h+=j;return h=(10-h%10)%10,h==f[g-1]}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.cvv={html5Attributes:{message:"message",ccfield:"creditCardField"},validate:function(a,b,c){var e,f,g,h,i,d=b.val();if(""==d)return!0;if(!/^[0-9]{3,4}$/.test(d))return!1;if(!c.creditCardField)return!0;if(e=a.getFieldElements(c.creditCardField).val(),""==e)return!0;e=e.replace(/\D/g,""),f={AMERICAN_EXPRESS:{length:[15],prefix:["34","37"]},DINERS_CLUB:{length:[14],prefix:["300","301","302","303","304","305","36"]},DINERS_CLUB_US:{length:[16],prefix:["54","55"]},DISCOVER:{length:[16],prefix:["6011","622126","622127","622128","622129","62213","62214","62215","62216","62217","62218","62219","6222","6223","6224","6225","6226","6227","6228","62290","62291","622920","622921","622922","622923","622924","622925","644","645","646","647","648","649","65"]},JCB:{length:[16],prefix:["3528","3529","353","354","355","356","357","358"]},LASER:{length:[16,17,18,19],prefix:["6304","6706","6771","6709"]},MAESTRO:{length:[12,13,14,15,16,17,18,19],prefix:["5018","5020","5038","6304","6759","6761","6762","6763","6764","6765","6766"]},MASTERCARD:{length:[16],prefix:["51","52","53","54","55"]},SOLO:{length:[16,18,19],prefix:["6334","6767"]},UNIONPAY:{length:[16,17,18,19],prefix:["622126","622127","622128","622129","62213","62214","62215","62216","62217","62218","62219","6222","6223","6224","6225","6226","6227","6228","62290","62291","622920","622921","622922","622923","622924","622925"]},VISA:{length:[16],prefix:["4"]}},i=null;for(g in f)for(h in f[g]["prefix"])if(e.substr(0,f[g]["prefix"][h].length)==f[g]["prefix"][h]&&-1!=f[g]["length"].indexOf(e.length)){i=g;break}return null==i?!1:"AMERICAN_EXPRESS"==i?4==d.length:3==d.length}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.date={html5Attributes:{message:"message",format:"format"},validate:function(b,c,d){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,e=c.val();if(""==e)return!0;if(d.format=d.format||"MM/DD/YYYY",f=d.format.split(" "),g=f[0],h=f.length>1?f[1]:null,i=f.length>2?f[2]:null,j=e.split(" "),k=j[0],l=j.length>1?j[1]:null,f.length!=j.length)return!1;if(m=-1!=k.indexOf("/")?"/":-1!=k.indexOf("-")?"-":null,null==m)return!1;if(k=k.split(m),g=g.split(m),n=k[g.indexOf("YYYY")],o=k[g.indexOf("MM")],p=k[g.indexOf("DD")],q=null,r=null,s=null,h){if(h=h.split(":"),l=l.split(":"),h.length!=l.length)return!1;if(r=l.length>0?l[0]:null,q=l.length>1?l[1]:null,s=l.length>2?l[2]:null,s&&(s=parseInt(s,10),0>s||s>60))return!1;if(r&&(r=parseInt(r,10),0>r||r>=24||i&&r>12))return!1;if(q&&(q=parseInt(q,10),0>q||q>59))return!1}return p=parseInt(p,10),o=parseInt(o,10),n=parseInt(n,10),a.fn.bootstrapValidator.helpers.date(n,o,p)}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.different={html5Attributes:{message:"message",field:"field"},validate:function(a,b,c){var e,d=b.val();return""==d?!0:(e=a.getFieldElements(c.field),null==e?!0:d!=e.val()?(a.updateStatus(c.field,a.STATUS_VALID,"different"),!0):!1)}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.digits={validate:function(a,b){var d=b.val();return""==d?!0:/^\d+$/.test(d)}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.ean={validate:function(a,b){var e,f,g,h,d=b.val();if(""==d)return!0;if(!/^(\d{8}|\d{12}|\d{13})$/.test(d))return!1;for(e=d.length,f=0,g=8==e?[3,1]:[1,3],h=0;e-1>h;h++)f+=parseInt(d.charAt(h))*g[h%2];return f=10-f%10,f==d.charAt(e-1)}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.emailAddress={enableByHtml5:function(a){return"email"==a.attr("type")},validate:function(a,b){var e,d=b.val();return""==d?!0:(e=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,e.test(d))}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.file={html5Attributes:{extension:"extension",maxsize:"maxSize",message:"message",type:"type"},validate:function(a,b,c){var e,f,g,h,i,j,k,d=b.val();if(""==d)return!0;if(f=c.extension?c.extension.split(","):null,g=c.type?c.type.split(","):null,h=window.File&&window.FileList&&window.FileReader,h)for(i=b.get(0).files,j=i.length,k=0;j>k;k++){if(c.maxSize&&i[k].size>parseInt(c.maxSize))return!1;if(e=i[k].name.substr(i[k].name.lastIndexOf(".")+1),f&&-1==f.indexOf(e))return!1;if(g&&-1==g.indexOf(i[k].type))return!1}else if(e=d.substr(d.lastIndexOf(".")+1),f&&-1==f.indexOf(e))return!1;return!0}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.greaterThan={html5Attributes:{message:"message",value:"value",inclusive:"inclusive"},enableByHtml5:function(a){var b=a.attr("min");return b?{value:b}:!1},validate:function(a,b,c){var d=b.val();return""==d?!0:(d=parseFloat(d),c.inclusive===!0?d>c.value:d>=c.value)}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.grid={validate:function(b,c){var e=c.val();return""==e?!0:(e=e.toUpperCase(),/^[GRID:]*([0-9A-Z]{2})[-\s]*([0-9A-Z]{5})[-\s]*([0-9A-Z]{10})[-\s]*([0-9A-Z]{1})$/g.test(e)?(e=e.replace(/\s/g,"").replace(/-/g,""),"GRID:"==e.substr(0,5)&&(e=e.substr(5)),a.fn.bootstrapValidator.helpers.mod_37_36(e)):!1)}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.hex={validate:function(a,b){var d=b.val();return""==d?!0:/^[0-9a-fA-F]+$/.test(d)}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.hexColor={enableByHtml5:function(a){return"color"==a.attr("type")},validate:function(a,b){var d=b.val();return""==d?!0:/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(d)}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.iban={html5Attributes:{message:"message",country:"country"},validate:function(b,c,d){var f,g,h,i,j,e=c.val();if(""==e)return!0;if(f={AD:"AD[0-9]{2}[0-9]{4}[0-9]{4}[A-Z0-9]{12}",AE:"AE[0-9]{2}[0-9]{3}[0-9]{16}",AL:"AL[0-9]{2}[0-9]{8}[A-Z0-9]{16}",AO:"AO[0-9]{2}[0-9]{21}",AT:"AT[0-9]{2}[0-9]{5}[0-9]{11}",AZ:"AZ[0-9]{2}[A-Z]{4}[A-Z0-9]{20}",BA:"BA[0-9]{2}[0-9]{3}[0-9]{3}[0-9]{8}[0-9]{2}",BE:"BE[0-9]{2}[0-9]{3}[0-9]{7}[0-9]{2}",BF:"BF[0-9]{2}[0-9]{23}",BG:"BG[0-9]{2}[A-Z]{4}[0-9]{4}[0-9]{2}[A-Z0-9]{8}",BH:"BH[0-9]{2}[A-Z]{4}[A-Z0-9]{14}",BI:"BI[0-9]{2}[0-9]{12}",BJ:"BJ[0-9]{2}[A-Z]{1}[0-9]{23}",BR:"BR[0-9]{2}[0-9]{8}[0-9]{5}[0-9]{10}[A-Z][A-Z0-9]",CH:"CH[0-9]{2}[0-9]{5}[A-Z0-9]{12}",CI:"CI[0-9]{2}[A-Z]{1}[0-9]{23}",CM:"CM[0-9]{2}[0-9]{23}",CR:"CR[0-9]{2}[0-9]{3}[0-9]{14}",CV:"CV[0-9]{2}[0-9]{21}",CY:"CY[0-9]{2}[0-9]{3}[0-9]{5}[A-Z0-9]{16}",CZ:"CZ[0-9]{2}[0-9]{20}",DE:"DE[0-9]{2}[0-9]{8}[0-9]{10}",DK:"DK[0-9]{2}[0-9]{14}",DO:"DO[0-9]{2}[A-Z0-9]{4}[0-9]{20}",DZ:"DZ[0-9]{2}[0-9]{20}",EE:"EE[0-9]{2}[0-9]{2}[0-9]{2}[0-9]{11}[0-9]{1}",ES:"ES[0-9]{2}[0-9]{4}[0-9]{4}[0-9]{1}[0-9]{1}[0-9]{10}",FI:"FI[0-9]{2}[0-9]{6}[0-9]{7}[0-9]{1}",FO:"FO[0-9]{2}[0-9]{4}[0-9]{9}[0-9]{1}",FR:"FR[0-9]{2}[0-9]{5}[0-9]{5}[A-Z0-9]{11}[0-9]{2}",GB:"GB[0-9]{2}[A-Z]{4}[0-9]{6}[0-9]{8}",GE:"GE[0-9]{2}[A-Z]{2}[0-9]{16}",GI:"GI[0-9]{2}[A-Z]{4}[A-Z0-9]{15}",GL:"GL[0-9]{2}[0-9]{4}[0-9]{9}[0-9]{1}",GR:"GR[0-9]{2}[0-9]{3}[0-9]{4}[A-Z0-9]{16}",GT:"GT[0-9]{2}[A-Z0-9]{4}[A-Z0-9]{20}",HR:"HR[0-9]{2}[0-9]{7}[0-9]{10}",HU:"HU[0-9]{2}[0-9]{3}[0-9]{4}[0-9]{1}[0-9]{15}[0-9]{1}",IE:"IE[0-9]{2}[A-Z]{4}[0-9]{6}[0-9]{8}",IL:"IL[0-9]{2}[0-9]{3}[0-9]{3}[0-9]{13}",IR:"IR[0-9]{2}[0-9]{22}",IS:"IS[0-9]{2}[0-9]{4}[0-9]{2}[0-9]{6}[0-9]{10}",IT:"IT[0-9]{2}[A-Z]{1}[0-9]{5}[0-9]{5}[A-Z0-9]{12}",JO:"JO[0-9]{2}[A-Z]{4}[0-9]{4}[0]{8}[A-Z0-9]{10}",KW:"KW[0-9]{2}[A-Z]{4}[0-9]{22}",KZ:"KZ[0-9]{2}[0-9]{3}[A-Z0-9]{13}",LB:"LB[0-9]{2}[0-9]{4}[A-Z0-9]{20}",LI:"LI[0-9]{2}[0-9]{5}[A-Z0-9]{12}",LT:"LT[0-9]{2}[0-9]{5}[0-9]{11}",LU:"LU[0-9]{2}[0-9]{3}[A-Z0-9]{13}",LV:"LV[0-9]{2}[A-Z]{4}[A-Z0-9]{13}",MC:"MC[0-9]{2}[0-9]{5}[0-9]{5}[A-Z0-9]{11}[0-9]{2}",MD:"MD[0-9]{2}[A-Z0-9]{20}",ME:"ME[0-9]{2}[0-9]{3}[0-9]{13}[0-9]{2}",MG:"MG[0-9]{2}[0-9]{23}",MK:"MK[0-9]{2}[0-9]{3}[A-Z0-9]{10}[0-9]{2}",ML:"ML[0-9]{2}[A-Z]{1}[0-9]{23}",MR:"MR13[0-9]{5}[0-9]{5}[0-9]{11}[0-9]{2}",MT:"MT[0-9]{2}[A-Z]{4}[0-9]{5}[A-Z0-9]{18}",MU:"MU[0-9]{2}[A-Z]{4}[0-9]{2}[0-9]{2}[0-9]{12}[0-9]{3}[A-Z]{3}",MZ:"MZ[0-9]{2}[0-9]{21}",NL:"NL[0-9]{2}[A-Z]{4}[0-9]{10}",NO:"NO[0-9]{2}[0-9]{4}[0-9]{6}[0-9]{1}",PK:"PK[0-9]{2}[A-Z]{4}[A-Z0-9]{16}",PL:"PL[0-9]{2}[0-9]{8}[0-9]{16}",PS:"PS[0-9]{2}[A-Z]{4}[A-Z0-9]{21}",PT:"PT[0-9]{2}[0-9]{4}[0-9]{4}[0-9]{11}[0-9]{2}",QA:"QA[0-9]{2}[A-Z]{4}[A-Z0-9]{21}",RO:"RO[0-9]{2}[A-Z]{4}[A-Z0-9]{16}",RS:"RS[0-9]{2}[0-9]{3}[0-9]{13}[0-9]{2}",SA:"SA[0-9]{2}[0-9]{2}[A-Z0-9]{18}",SE:"SE[0-9]{2}[0-9]{3}[0-9]{16}[0-9]{1}",SI:"SI[0-9]{2}[0-9]{5}[0-9]{8}[0-9]{2}",SK:"SK[0-9]{2}[0-9]{4}[0-9]{6}[0-9]{10}",SM:"SM[0-9]{2}[A-Z]{1}[0-9]{5}[0-9]{5}[A-Z0-9]{12}",SN:"SN[0-9]{2}[A-Z]{1}[0-9]{23}",TN:"TN59[0-9]{2}[0-9]{3}[0-9]{13}[0-9]{2}",TR:"TR[0-9]{2}[0-9]{5}[A-Z0-9]{1}[A-Z0-9]{16}",VG:"VG[0-9]{2}[A-Z]{4}[0-9]{16}"},e=e.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),g=d.country||e.substr(0,2),!f[g])return!1;if(!new RegExp("^"+f[g]+"$").test(e))return!1;for(e=e.substr(4)+e.substr(0,4),e=a.map(e.split(""),function(a){var b=a.charCodeAt(0);return b>="A".charCodeAt(0)&&b<="Z".charCodeAt(0)?b-"A".charCodeAt(0)+10:a}),e=e.join(""),h=parseInt(e.substr(0,1),10),i=e.length,j=1;i>j;++j)h=(10*h+parseInt(e.substr(j,1),10))%97;return 1==h}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.id={html5Attributes:{message:"message",country:"country"},validate:function(a,b,c){var e,f,d=b.val();return""==d?!0:(e=c.country||d.substr(0,2),f=["_",e.toLowerCase()].join(""),this[f]&&"function"==typeof this[f]?this[f](d):!0)},_validateJMBG:function(a,b){var c,d,f,g,h,i;if(!/^\d{13}$/.test(a))return!1;if(c=parseInt(a.substr(0,2),10),d=parseInt(a.substr(2,2),10),parseInt(a.substr(4,3),10),f=parseInt(a.substr(7,2),10),g=parseInt(a.substr(12,1),10),c>31||d>12)return!1;for(h=0,i=0;6>i;i++)h+=(7-i)*(parseInt(a.charAt(i))+parseInt(a.charAt(i+6)));if(h=11-h%11,(10==h||11==h)&&(h=0),h!=g)return!1;switch(b.toUpperCase()){case"BA":return f>=10&&19>=f;case"MK":return f>=41&&49>=f;case"ME":return f>=20&&29>=f;case"RS":return f>=70&&99>=f;case"SI":return f>=50&&59>=f;default:return!0}},_ba:function(a){return this._validateJMBG(a,"BA")},_mk:function(a){return this._validateJMBG(a,"MK")},_me:function(a){return this._validateJMBG(a,"ME")},_rs:function(a){return this._validateJMBG(a,"RS")},_si:function(a){return this._validateJMBG(a,"SI")},_bg:function(b){var c,d,e,f,g,h;if(!/^\d{10}$/.test(b)&&!/^\d{6}\s\d{3}\s\d{1}$/.test(b))return!1;if(b=b.replace(/\s/g,""),c=parseInt(b.substr(0,2),10)+1900,d=parseInt(b.substr(2,2),10),e=parseInt(b.substr(4,2),10),d>40?(c+=100,d-=40):d>20&&(c-=100,d-=20),!a.fn.bootstrapValidator.helpers.date(c,d,e))return!1;for(f=0,g=[2,4,8,5,10,9,7,3,6],h=0;9>h;h++)f+=parseInt(b.charAt(h))*g[h];return f=f%11%10,f==b.substr(9,1)},_br:function(a){var b,c,d;if(/^1{11}|2{11}|3{11}|4{11}|5{11}|6{11}|7{11}|8{11}|9{11}|0{11}$/.test(a))return!1;if(!/^\d{11}$/.test(a)&&!/^\d{3}\.\d{3}\.\d{3}-\d{2}$/.test(a))return!1;for(a=a.replace(/\./g,"").replace(/-/g,""),b=0,c=0;9>c;c++)b+=(10-c)*parseInt(a.charAt(c));if(b=11-b%11,(10==b||11==b)&&(b=0),b!=a.charAt(9))return!1;for(d=0,c=0;10>c;c++)d+=(11-c)*parseInt(a.charAt(c));return d=11-d%11,(10==d||11==d)&&(d=0),d==a.charAt(10)},_ch:function(a){var b,c,d,e;if(!/^756[\.]{0,1}[0-9]{4}[\.]{0,1}[0-9]{4}[\.]{0,1}[0-9]{2}$/.test(a))return!1;for(a=a.replace(/\D/g,"").substr(3),b=a.length,c=0,d=8==b?[3,1]:[1,3],e=0;b-1>e;e++)c+=parseInt(a.charAt(e))*d[e%2];return c=10-c%10,c==a.charAt(b-1)},_cl:function(a){var b,c,d;if(!/^\d{7,8}[-]{0,1}[0-9K]$/.test(a))return!1;for(a=a.replace(/\D/g,"");a.length<9;)a="0"+a;for(b=0,c=[3,2,7,6,5,4,3,2],d=0;8>d;d++)b+=parseInt(a.charAt(d))*c[d];return b=11-b%11,11==b?b=0:10==b&&(b="K"),b==a.charAt(8)},_cz:function(b){var c,d,e,f;if(!/^\d{9,10}$/.test(b))return!1;if(c=1900+parseInt(b.substr(0,2)),d=parseInt(b.substr(2,2))%50%20,e=parseInt(b.substr(4,2)),9==b.length){if(c>=1980&&(c-=100),c>1953)return!1}else 1954>c&&(c+=100);return a.fn.bootstrapValidator.helpers.date(c,d,e)?10==b.length?(f=parseInt(b.substr(0,9),10)%11,1985>c&&(f%=10),f==b.substr(9,1)):!0:!1},_dk:function(b){if(!/^[0-9]{6}[-]{0,1}[0-9]{4}$/.test(b))return!1;b=b.replace(/-/g,"");var c=parseInt(b.substr(0,2),10),d=parseInt(b.substr(2,2),10),e=parseInt(b.substr(4,2),10);switch(!0){case-1!="5678".indexOf(b.charAt(6))&&e>=58:e+=1800;break;case-1!="0123".indexOf(b.charAt(6)):case-1!="49".indexOf(b.charAt(6))&&e>=37:e+=1900;break;default:e+=2e3}return a.fn.bootstrapValidator.helpers.date(e,d,c)},_ee:function(a){return this._lt(a)},_es:function(a){var b,c;return/^[0-9A-Z]{8}[-]{0,1}[0-9A-Z]$/.test(a)||/^[XYZ][-]{0,1}[0-9]{7}[-]{0,1}[0-9A-Z]$/.test(a)?(a=a.replace(/-/g,""),b="XYZ".indexOf(a.charAt(0)),-1!=b&&(a=b+a.substr(1)+""),c=parseInt(a.substr(0,8),10),c="TRWAGMYFPDXBNJZSQVHLCKE"[c%23],c==a.substr(8,1)):!1},_fi:function(b){var c,d,e,f,g,h;return/^[0-9]{6}[-+A][0-9]{3}[0-9ABCDEFHJKLMNPRSTUVWXY]$/.test(b)?(c=parseInt(b.substr(0,2),10),d=parseInt(b.substr(2,2),10),e=parseInt(b.substr(4,2),10),f={"+":1800,"-":1900,A:2e3},e=f[b.charAt(6)]+e,a.fn.bootstrapValidator.helpers.date(e,d,c)?(g=parseInt(b.substr(7,3)),2>g?!1:(h=b.substr(0,6)+b.substr(7,3)+"",h=parseInt(h),"0123456789ABCDEFHJKLMNPRSTUVWXY".charAt(h%31)==b.charAt(10))):!1):!1},_hr:function(b){return/^[0-9]{11}$/.test(b)?a.fn.bootstrapValidator.helpers.mod_11_10(b):!1},_ie:function(a){if(!/^\d{7}[A-W][AHWTX]?$/.test(a))return!1;var b=function(a){for(var b,c,d;a.length<7;)a="0"+a;for(b="WABCDEFGHIJKLMNOPQRSTUV",c=0,d=0;7>d;d++)c+=parseInt(a.charAt(d))*(8-d);return c+=9*b.indexOf(a.substr(7)),b[c%23]};return 9!=a.length||"A"!=a.charAt(8)&&"H"!=a.charAt(8)?a.charAt(7)==b(a.substr(0,7)):a.charAt(7)==b(a.substr(0,7)+a.substr(8)+"")},_is:function(b){var c,d,e,f,g,h,i;if(!/^[0-9]{6}[-]{0,1}[0-9]{4}$/.test(b))return!1;if(b=b.replace(/-/g,""),c=parseInt(b.substr(0,2),10),d=parseInt(b.substr(2,2),10),e=parseInt(b.substr(4,2),10),f=parseInt(b.charAt(9)),e=9==f?1900+e:100*(20+f)+e,!a.fn.bootstrapValidator.helpers.date(e,d,c,!0))return!1;for(g=0,h=[3,2,7,6,5,4,3,2],i=0;8>i;i++)g+=parseInt(b.charAt(i))*h[i];return g=11-g%11,g==b.charAt(8)},_lt:function(b){var c,d,e,f,g,h,i,j;if(!/^[0-9]{11}$/.test(b))return!1;if(c=parseInt(b.charAt(0)),d=parseInt(b.substr(1,2),10),e=parseInt(b.substr(3,2),10),f=parseInt(b.substr(5,2),10),g=0==c%2?17+c/2:17+(c+1)/2,d=100*g+d,!a.fn.bootstrapValidator.helpers.date(d,e,f,!0))return!1;for(h=0,i=[1,2,3,4,5,6,7,8,9,1],j=0;10>j;j++)h+=parseInt(b.charAt(j))*i[j];if(h%=11,10!=h)return h==b.charAt(10);for(h=0,i=[3,4,5,6,7,8,9,1,2,3],j=0;10>j;j++)h+=parseInt(b.charAt(j))*i[j];return h%=11,10==h&&(h=0),h==b.charAt(10)},_lv:function(b){var c,d,e,f,g,h;if(!/^[0-9]{6}[-]{0,1}[0-9]{5}$/.test(b))return!1;if(b=b.replace(/\D/g,""),c=parseInt(b.substr(0,2)),d=parseInt(b.substr(2,2)),e=parseInt(b.substr(4,2)),e=e+1800+100*parseInt(b.charAt(6)),!a.fn.bootstrapValidator.helpers.date(e,d,c,!0))return!1;for(f=0,g=[10,5,8,4,2,1,6,3,7,9],h=0;10>h;h++)f+=parseInt(b.charAt(h))*g[h];return f=(f+1)%11%10,f==b.charAt(10)},_nl:function(a){for(var b,c,d;a.length<9;)a="0"+a;if(!/^[0-9]{4}[.]{0,1}[0-9]{2}[.]{0,1}[0-9]{3}$/.test(a))return!1;if(a=a.replace(/\./g,""),0==parseInt(a,10))return!1;for(b=0,c=a.length,d=0;c-1>d;d++)b+=(9-d)*parseInt(a.charAt(d));return b%=11,10==b&&(b=0),b==a.charAt(c-1)},_ro:function(b){var c,d,e,f,g,h,i,j,k;if(!/^[0-9]{13}$/.test(b))return!1;if(c=parseInt(b.charAt(0)),0==c||7==c||8==c)return!1;if(d=parseInt(b.substr(1,2),10),e=parseInt(b.substr(3,2),10),f=parseInt(b.substr(5,2),10),g={1:1900,2:1900,3:1800,4:1800,5:2e3,6:2e3},f>31&&e>12)return!1;if(9!=c&&(d=g[c+""]+d,!a.fn.bootstrapValidator.helpers.date(d,e,f)))return!1;
for(h=0,i=[2,7,9,1,4,6,3,5,8,2,7,9],j=b.length,k=0;j-1>k;k++)h+=parseInt(b.charAt(k))*i[k];return h%=11,10==h&&(h=1),h==b.charAt(j-1)},_se:function(b){if(!/^[0-9]{10}$/.test(b)&&!/^[0-9]{6}[-|+][0-9]{4}$/.test(b))return!1;b=b.replace(/[^0-9]/g,"");var c=parseInt(b.substr(0,2))+1900,d=parseInt(b.substr(2,2)),e=parseInt(b.substr(4,2));return a.fn.bootstrapValidator.helpers.date(c,d,e)?a.fn.bootstrapValidator.helpers.luhn(b):!1},_sk:function(a){return this._cz(a)},_sm:function(a){return/^\d{5}$/.test(a)},_za:function(b){if(!/^[0-9]{10}[0|1][8|9][0-9]$/.test(b))return!1;var c=parseInt(b.substr(0,2)),d=(new Date).getFullYear()%100,e=parseInt(b.substr(2,2)),f=parseInt(b.substr(4,2));return c=c>=d?c+1900:c+2e3,a.fn.bootstrapValidator.helpers.date(c,e,f)?a.fn.bootstrapValidator.helpers.luhn(b):!1}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.identical={html5Attributes:{message:"message",field:"field"},validate:function(a,b,c){var e,d=b.val();return""==d?!0:(e=a.getFieldElements(c.field),null==e?!0:d==e.val()?(a.updateStatus(c.field,a.STATUS_VALID,"identical"),!0):!1)}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.imei={validate:function(b,c){var e=c.val();if(""==e)return!0;switch(!0){case/^\d{15}$/.test(e):case/^\d{2}-\d{6}-\d{6}-\d{1}$/.test(e):case/^\d{2}\s\d{6}\s\d{6}\s\d{1}$/.test(e):return e=e.replace(/[^0-9]/g,""),a.fn.bootstrapValidator.helpers.luhn(e);case/^\d{14}$/.test(e):case/^\d{16}$/.test(e):case/^\d{2}-\d{6}-\d{6}(|-\d{2})$/.test(e):case/^\d{2}\s\d{6}\s\d{6}(|\s\d{2})$/.test(e):return!0;default:return!1}}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.integer={enableByHtml5:function(a){return"number"==a.attr("type")},validate:function(a,b){var d=b.val();return""==d?!0:/^(?:-?(?:0|[1-9][0-9]*))$/.test(d)}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.ip={html5Attributes:{message:"message",ipv4:"ipv4",ipv6:"ipv6"},validate:function(b,c,d){var e=c.val();return""==e?!0:(d=a.extend({},{ipv4:!0,ipv6:!0},d),d.ipv4?/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e):d.ipv6?/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/.test(str):!1)}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.isbn={validate:function(a,b){var e,i,f,g,h,j,d=b.val();if(""==d)return!0;switch(!0){case/^\d{9}[\dX]$/.test(d):case 13==d.length&&/^(\d+)-(\d+)-(\d+)-([\dX])$/.test(d):case 13==d.length&&/^(\d+)\s(\d+)\s(\d+)\s([\dX])$/.test(d):e="ISBN10";break;case/^(978|979)\d{9}[\dX]$/.test(d):case 17==d.length&&/^(978|979)-(\d+)-(\d+)-(\d+)-([\dX])$/.test(d):case 17==d.length&&/^(978|979)\s(\d+)\s(\d+)\s(\d+)\s([\dX])$/.test(d):e="ISBN13";break;default:return!1}switch(d=d.replace(/[^0-9X]/gi,""),f=d.split(""),g=f.length,h=0,e){case"ISBN10":for(h=0,j=0;g-1>j;j++)h+=(10-j)*parseInt(f[j]);return i=11-h%11,11==i?i=0:10==i&&(i="X"),i+""==f[g-1];case"ISBN13":for(h=0,j=0;g-1>j;j++)h+=0==j%2?parseInt(f[j]):3*parseInt(f[j]);return i=10-h%10,10==i&&(i="0"),i+""==f[g-1];default:return!1}}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.isin={COUNTRY_CODES:"AF|AX|AL|DZ|AS|AD|AO|AI|AQ|AG|AR|AM|AW|AU|AT|AZ|BS|BH|BD|BB|BY|BE|BZ|BJ|BM|BT|BO|BQ|BA|BW|BV|BR|IO|BN|BG|BF|BI|KH|CM|CA|CV|KY|CF|TD|CL|CN|CX|CC|CO|KM|CG|CD|CK|CR|CI|HR|CU|CW|CY|CZ|DK|DJ|DM|DO|EC|EG|SV|GQ|ER|EE|ET|FK|FO|FJ|FI|FR|GF|PF|TF|GA|GM|GE|DE|GH|GI|GR|GL|GD|GP|GU|GT|GG|GN|GW|GY|HT|HM|VA|HN|HK|HU|IS|IN|ID|IR|IQ|IE|IM|IL|IT|JM|JP|JE|JO|KZ|KE|KI|KP|KR|KW|KG|LA|LV|LB|LS|LR|LY|LI|LT|LU|MO|MK|MG|MW|MY|MV|ML|MT|MH|MQ|MR|MU|YT|MX|FM|MD|MC|MN|ME|MS|MA|MZ|MM|NA|NR|NP|NL|NC|NZ|NI|NE|NG|NU|NF|MP|NO|OM|PK|PW|PS|PA|PG|PY|PE|PH|PN|PL|PT|PR|QA|RE|RO|RU|RW|BL|SH|KN|LC|MF|PM|VC|WS|SM|ST|SA|SN|RS|SC|SL|SG|SX|SK|SI|SB|SO|ZA|GS|SS|ES|LK|SD|SR|SJ|SZ|SE|CH|SY|TW|TJ|TZ|TH|TL|TG|TK|TO|TT|TN|TR|TM|TC|TV|UG|UA|AE|GB|US|UM|UY|UZ|VU|VE|VN|VG|VI|WF|EH|YE|ZM|ZW",validate:function(a,b){var e,f,g,h,i,j,k,l,m,d=b.val();if(""==d)return!0;if(d=d.toUpperCase(),e=new RegExp("^("+this.COUNTRY_CODES+")[0-9A-Z]{10}$"),!e.test(d))return!1;for(f="",g=d.length,h=0;g-1>h;h++)i=d.charCodeAt(h),f+=i>57?(i-55).toString():d.charAt(h);for(j="",k=f.length,l=0!=k%2?0:1,h=0;k>h;h++)j+=parseInt(f[h])*(h%2==l?2:1)+"";for(m=0,h=0;h<j.length;h++)m+=parseInt(j.charAt(h));return m=(10-m%10)%10,m==d.charAt(g-1)}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.ismn={validate:function(a,b){var e,f,g,h,i,d=b.val();if(""==d)return!0;switch(!0){case/^M\d{9}$/.test(d):case/^M-\d{4}-\d{4}-\d{1}$/.test(d):case/^M\s\d{4}\s\d{4}\s\d{1}$/.test(d):e="ISMN10";break;case/^9790\d{9}$/.test(d):case/^979-0-\d{4}-\d{4}-\d{1}$/.test(d):case/^979\s0\s\d{4}\s\d{4}\s\d{1}$/.test(d):e="ISMN13";break;default:return!1}for("ISMN10"==e&&(d="9790"+d.substr(1)),d=d.replace(/[^0-9]/gi,""),f=d.length,g=0,h=[1,3],i=0;f-1>i;i++)g+=parseInt(d.charAt(i))*h[i%2];return g=10-g%10,g==d.charAt(f-1)}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.issn={validate:function(a,b){var e,f,g,h,d=b.val();if(""==d)return!0;if(!/^\d{4}\-\d{3}[\dX]$/.test(d))return!1;for(d=d.replace(/[^0-9X]/gi,""),e=d.split(""),f=e.length,g=0,"X"==e[7]&&(e[7]=10),h=0;f>h;h++)g+=(8-h)*parseInt(e[h]);return 0==g%11}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.lessThan={html5Attributes:{message:"message",value:"value",inclusive:"inclusive"},enableByHtml5:function(a){var b=a.attr("max");return b?{value:b}:!1},validate:function(a,b,c){var d=b.val();return""==d?!0:(d=parseFloat(d),c.inclusive===!1?d<=c.value:d<c.value)}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.mac={validate:function(a,b){var d=b.val();return""==d?!0:/^([0-9A-F]{2}[:-]){5}([0-9A-F]{2})$/.test(d)}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.notEmpty={enableByHtml5:function(a){var b=a.attr("required")+"";return"required"==b||"true"==b},validate:function(b,c){var e=c.attr("type");return"radio"==e||"checkbox"==e?b.getFieldElements(c.attr("data-bv-field")).filter(":checked").length>0:""!=a.trim(c.val())||"ignore"==c.attr("ignore")}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.numeric={html5Attributes:{message:"message",separator:"separator"},validate:function(a,b,c){var e,d=b.val();return""==d?!0:(e=c.separator||".","."!=e&&(d=d.replace(e,".")),!isNaN(parseFloat(d))&&isFinite(d))}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.phone={html5Attributes:{message:"message",country:"country"},validate:function(a,b,c){var e,d=b.val();if(""==d)return!0;switch(e=(c.country||"US").toUpperCase()){case"US":default:return d=d.replace(/\D/g,""),/^(?:(1\-?)|(\+1 ?))?\(?(\d{3})[\)\-\.]?(\d{3})[\-\.]?(\d{4})$/.test(d)&&10==d.length}}}}(window.jQuery),function(a){var b={"*":/[\w\W]+/,"*6-16":/^[\w\W]{6,16}$/,n:/^\d+$/,"n6-16":/^\d{6,16}$/,s:/^[\u4E00-\u9FA5\uf900-\ufa2d\w\.\s]+$/,"s6-18":/^[\u4E00-\u9FA5\uf900-\ufa2d\w\.\s]{6,18}$/,p:/^[0-9]{6}$/,m:/^1[345678][0-9]{9}$/,e:/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,url:/^(\w+:\/\/)?\w+(\.\w+)+.*$/},c=/\/.+\//g,d=/^(.+?)(\d+)-(\d+)$/;a.fn.bootstrapValidator.validators.regexp={html5Attributes:{message:"message",regexp:"regexp"},enableByHtml5:function(a){var f,g,h,i,j,k,l,e=a.attr("pattern");if(e)return{regexp:e};if(f=a.attr("dataType"),!f)return!1;if(c.test(f))return g=f.match(c)[0].slice(1,-1),h=f.replace(c,""),{regexp:RegExp(g,h)};if(f in b)return{regexp:b[f]};if(i=f.match(d))for(j in b)if(temp=j.match(d),temp&&i[1]===temp[1])return k=b[j].toString(),h=k.match(/\/[mgi]*/g)[1].replace("/",""),l=new RegExp("\\{"+temp[2]+","+temp[3]+"\\}","g"),k=k.replace(/\/[mgi]*/g,"/").replace(l,"{"+i[2]+","+i[3]+"}").replace(/^\//,"").replace(/\/$/,""),{regexp:new RegExp(k,h)};return!1},validate:function(a,b,c){var e,d=b.val();return""==d&&"ignore"==b.attr("ignore")?!0:(e="string"==typeof c.regexp?new RegExp(c.regexp):c.regexp,e.test(d))}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.remote={html5Attributes:{message:"message",url:"url",name:"name"},enableByHtml5:function(a){var b=a.attr("ajaxurl");return b?{url:b}:!1},validate:function(b,c,d){var f,g,h,i,e=c.val();return""==e?!0:(f=c.attr("data-bv-field"),g=d.data,null==g&&(g={}),"function"==typeof g&&(g=g.call(this,b)),g[d.name||f]=e,h=new a.Deferred,i=a.ajax({type:"POST",url:d.url,dataType:"json",data:g}),i.then(function(a){h.resolve(c,"remote",a.valid===!0||"true"===a.valid||"y"===a.status)}),h.fail(function(){i.abort()}),h)}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.rtn={validate:function(a,b){var e,f,d=b.val();if(""==d)return!0;if(!/^\d{9}$/.test(d))return!1;for(e=0,f=0;f<d.length;f+=3)e+=3*parseInt(d.charAt(f),10)+7*parseInt(d.charAt(f+1),10)+parseInt(d.charAt(f+2),10);return 0!=e&&0==e%10}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.sedol={validate:function(a,b){var e,f,g,h,d=b.val();if(""==d)return!0;if(d=d.toUpperCase(),!/^[0-9A-Z]{7}$/.test(d))return!1;for(e=0,f=[1,3,1,7,3,9,1],g=d.length,h=0;g-1>h;h++)e+=f[h]*parseInt(d.charAt(h),36);return e=(10-e%10)%10,e==d.charAt(g-1)}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.siren={validate:function(b,c){var e=c.val();return""==e?!0:/^\d{9}$/.test(e)?a.fn.bootstrapValidator.helpers.luhn(e):!1}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.siret={validate:function(a,b){var g,e,f,h,d=b.val();if(""==d)return!0;for(e=0,f=d.length,h=0;f>h;h++)g=parseInt(d.charAt(h),10),0==h%2&&(g=2*g,g>9&&(g-=9)),e+=g;return 0==e%10}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.step={html5Attributes:{message:"message",base:"baseValue",step:"step"},validate:function(b,c,d){var f,g,h,e=c.val();return""==e?!0:(d=a.extend({},{baseValue:0,step:1},d),e=parseFloat(e),isNaN(e)||!isFinite(e)?!1:(f=function(a,b){var d,e,c=Math.pow(10,b);return a*=c,d=a>0|-(0>a),e=a%1===.5*d,e?(Math.floor(a)+(d>0))/c:Math.round(a)/c},g=function(a,b){if(0==b)return 1;var c=(a+"").split("."),d=(b+"").split("."),e=(1==c.length?0:c[1].length)+(1==d.length?0:d[1].length);return f(a-b*Math.floor(a/b),e)},h=g(e-d.baseValue,d.step),0==h||h==d.step))}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.stringCase={html5Attributes:{message:"message","case":"case"},validate:function(a,b,c){var e,d=b.val();if(""==d)return!0;switch(e=(c["case"]||"lower").toLowerCase()){case"upper":return d===d.toUpperCase();case"lower":default:return d===d.toLowerCase()}}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.stringLength={html5Attributes:{message:"message",min:"min",max:"max"},enableByHtml5:function(a){var b=a.attr("maxlength");return b?{max:parseInt(b,10)}:!1},validate:function(b,c,d){var f,e=c.val();return""==e?!0:(f=a.trim(e).length,d.min&&f<d.min||d.max&&f>d.max?!1:!0)}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.uri={enableByHtml5:function(a){return"url"==a.attr("type")},validate:function(a,b){var e,d=b.val();return""==d?!0:(e=new RegExp("^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!10(?:\\.\\d{1,3}){3})(?!127(?:\\.\\d{1,3}){3})(?!169\\.254(?:\\.\\d{1,3}){2})(?!192\\.168(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:/[^\\s]*)?$","i"),e.test(d))}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.uuid={html5Attributes:{message:"message",version:"version"},validate:function(a,b,c){var e,f,d=b.val();return""==d?!0:(e={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i},f=c.version?c.version+"":"all",null==e[f]?!0:e[f].test(d))}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.vat={html5Attributes:{message:"message",country:"country"},validate:function(a,b,c){var e,f,d=b.val();return""==d?!0:(e=c.country||d.substr(0,2),f=["_",e.toLowerCase()].join(""),this[f]&&"function"==typeof this[f]?this[f](d):!0)},_at:function(a){var b,c,d,e;if(!/^ATU[0-9]{8}$/.test(a))return!1;for(a=a.substr(3),b=0,c=[1,2,1,2,1,2,1],d=0,e=0;7>e;e++)d=parseInt(a.charAt(e))*c[e],d>9&&(d=Math.floor(d/10)+d%10),b+=d;return b=10-(b+4)%10,10==b&&(b=0),b==a.substr(7,1)},_be:function(a){if(!/^BE[0]{0,1}[0-9]{9}$/.test(a))return!1;if(a=a.substr(2),9==a.length&&(a="0"+a),0==a.substr(1,1))return!1;var b=parseInt(a.substr(0,8),10)+parseInt(a.substr(8,2),10);return 0==b%97},_bg:function(b){var d,f,g,h,i;if(!/^BG[0-9]{9,10}$/.test(b))return!1;if(b=b.substr(2),d=0,f=0,9==b.length){for(f=0;8>f;f++)d+=parseInt(b.charAt(f))*(f+1);if(d%=11,10==d)for(d=0,f=0;8>f;f++)d+=parseInt(b.charAt(f))*(f+3);return d%=10,d==b.substr(8)}return 10==b.length?(g=function(b){var f,g,h,c=parseInt(b.substr(0,2),10)+1900,d=parseInt(b.substr(2,2),10),e=parseInt(b.substr(4,2),10);if(d>40?(c+=100,d-=40):d>20&&(c-=100,d-=20),!a.fn.bootstrapValidator.helpers.date(c,d,e))return!1;for(f=0,g=[2,4,8,5,10,9,7,3,6],h=0;9>h;h++)f+=parseInt(b.charAt(h))*g[h];return f=f%11%10,f==b.substr(9,1)},h=function(a){var d,b=0,c=[21,19,17,13,11,9,7,3,1];for(d=0;9>d;d++)b+=parseInt(a.charAt(d))*c[d];return b%=10,b==a.substr(9,1)},i=function(a){var d,b=0,c=[4,3,2,7,6,5,4,3,2];for(d=0;9>d;d++)b+=parseInt(a.charAt(d))*c[d];return b=11-b%11,10==b?!1:(11==b&&(b=0),b==a.substr(9,1))},g(b)||h(b)||i(b)):!1},_ch:function(a){var b,c,d;if(!/^CHE[0-9]{9}(MWST)?$/.test(a))return!1;for(a=a.substr(3),b=0,c=[5,4,3,2,7,6,5,4],d=0;8>d;d++)b+=parseInt(a.charAt(d),10)*c[d];return b=11-b%11,10==b?!1:(11==b&&(b=0),b==a.substr(8,1))},_cy:function(a){var b,c,d,e;if(!/^CY[0-5|9]{1}[0-9]{7}[A-Z]{1}$/.test(a))return!1;if(a=a.substr(2),"12"==a.substr(0,2))return!1;for(b=0,c={0:1,1:0,2:5,3:7,4:9,5:13,6:15,7:17,8:19,9:21},d=0;8>d;d++)e=parseInt(a.charAt(d),10),0==d%2&&(e=c[e+""]),b+=e;return b="ABCDEFGHIJKLMNOPQRSTUVWXYZ"[b%26],b==a.substr(8,1)},_cz:function(b){var c,d,e,f,g,h;if(!/^CZ[0-9]{8,10}$/.test(b))return!1;if(b=b.substr(2),c=0,d=0,8==b.length){if("9"==b.charAt(0)+"")return!1;for(c=0,d=0;7>d;d++)c+=parseInt(b.charAt(d),10)*(8-d);return c=11-c%11,10==c&&(c=0),11==c&&(c=1),c==b.substr(7,1)}if(9==b.length&&"6"==b.charAt(0)+""){for(c=0,d=0;7>d;d++)c+=parseInt(b.charAt(d+1),10)*(8-d);return c=11-c%11,10==c&&(c=0),11==c&&(c=1),c=[8,7,6,5,4,3,2,1,0,9,10][c-1],c==b.substr(8,1)}if(9==b.length||10==b.length){if(e=1900+parseInt(b.substr(0,2)),f=parseInt(b.substr(2,2))%50%20,g=parseInt(b.substr(4,2)),9==b.length){if(e>=1980&&(e-=100),e>1953)return!1}else 1954>e&&(e+=100);return a.fn.bootstrapValidator.helpers.date(e,f,g)?10==b.length?(h=parseInt(b.substr(0,9),10)%11,1985>e&&(h%=10),h==b.substr(9,1)):!0:!1}return!1},_de:function(b){return/^DE[0-9]{9}$/.test(b)?(b=b.substr(2),a.fn.bootstrapValidator.helpers.mod_11_10(b)):!1},_dk:function(a){var b,c,d;if(!/^DK[0-9]{8}$/.test(a))return!1;for(a=a.substr(2),b=0,c=[2,7,6,5,4,3,2,1],d=0;8>d;d++)b+=parseInt(a.charAt(d),10)*c[d];return 0==b%11},_ee:function(a){var b,c,d;if(!/^EE[0-9]{9}$/.test(a))return!1;for(a=a.substr(2),b=0,c=[3,7,1,3,7,1,3,7,1],d=0;9>d;d++)b+=parseInt(a.charAt(d))*c[d];return 0==b%10},_es:function(a){var b,c,d,e;return/^ES[0-9A-Z][0-9]{7}[0-9A-Z]$/.test(a)?(a=a.substr(2),b=function(a){var b=parseInt(a.substr(0,8),10);return b="TRWAGMYFPDXBNJZSQVHLCKE"[b%23],b==a.substr(8,1)},c=function(a){var b=["XYZ".indexOf(a.charAt(0)),a.substr(1)].join("");return b=parseInt(b,10),b="TRWAGMYFPDXBNJZSQVHLCKE"[b%23],b==a.substr(8,1)},d=function(a){var c,d,e,f,g,b=a.charAt(0);if(-1!="KLM".indexOf(b))return c=parseInt(a.substr(1,8),10),c="TRWAGMYFPDXBNJZSQVHLCKE"[c%23],c==a.substr(8,1);if(-1!="ABCDEFGHJNPQRSUVW".indexOf(b)){for(d=0,e=[2,1,2,1,2,1,2],f=0,g=0;7>g;g++)f=parseInt(a.charAt(g+1))*e[g],f>9&&(f=Math.floor(f/10)+f%10),d+=f;return d=10-d%10,d==a.substr(8,1)||"JABCDEFGHI"[d]==a.substr(8,1)}return!1},e=a.charAt(0),/^[0-9]$/.test(e)?b(a):/^[XYZ]$/.test(e)?c(a):d(a)):!1},_fi:function(a){var b,c,d;if(!/^FI[0-9]{8}$/.test(a))return!1;for(a=a.substr(2),b=0,c=[7,9,10,5,8,4,2,1],d=0;8>d;d++)b+=parseInt(a.charAt(d))*c[d];return 0==b%11},_fr:function(b){if(!/^FR[0-9A-Z]{2}[0-9]{9}$/.test(b))return!1;if(b=b.substr(2),!a.fn.bootstrapValidator.helpers.luhn(b.substr(2)))return!1;if(/^[0-9]{2}$/.test(b.substr(0,2)))return b.substr(0,2)==parseInt(b.substr(2)+"12",10)%97;var d,c="0123456789ABCDEFGHJKLMNPQRSTUVWXYZ";return d=/^[0-9]{1}$/.test(b.charAt(0))?24*c.indexOf(b.charAt(0))+c.indexOf(b.charAt(1))-10:34*c.indexOf(b.charAt(0))+c.indexOf(b.charAt(1))-100,(parseInt(b.substr(2),10)+1+Math.floor(d/11))%11==d%11},_gb:function(a){var b,c,d,e,f,g;if(!(/^GB[0-9]{9}$/.test(a)||/^GB[0-9]{12}$/.test(a)||/^GBGD[0-9]{3}$/.test(a)||/^GBHA[0-9]{3}$/.test(a)||/^GB(GD|HA)8888[0-9]{5}$/.test(a)))return!1;if(a=a.substr(2),b=a.length,5==b)return c=a.substr(0,2),d=parseInt(a.substr(2)),"GD"==c&&500>d||"HA"==c&&d>=500;if(11==b&&("GD8888"==a.substr(0,6)||"HA8888"==a.substr(0,6)))return"GD"==a.substr(0,2)&&parseInt(a.substr(6,3))>=500||"HA"==a.substr(0,2)&&parseInt(a.substr(6,3))<500?!1:parseInt(a.substr(6,3))%97==parseInt(a.substr(9,2));if(9==b||12==b){for(e=0,f=[8,7,6,5,4,3,2,10,1],g=0;9>g;g++)e+=parseInt(a.charAt(g))*f[g];return e%=97,parseInt(a.substr(0,3))>=100?0==e||42==e||55==e:0==e}return!0},_gr:function(a){var b,c,d;if(!/^GR[0-9]{9}$/.test(a))return!1;for(a=a.substr(2),8==a.length&&(a="0"+a),b=0,c=[256,128,64,32,16,8,4,2],d=0;8>d;d++)b+=parseInt(a.charAt(d))*c[d];return b=b%11%10,b==a.substr(8,1)},_el:function(a){return/^EL[0-9]{9}$/.test(a)?(a="GR"+a.substr(2),this._gr(a)):!1},_hu:function(a){var b,c,d;if(!/^HU[0-9]{8}$/.test(a))return!1;for(a=a.substr(2),b=0,c=[9,7,3,1,9,7,3,1],d=0;8>d;d++)b+=parseInt(a.charAt(d))*c[d];return 0==b%10},_hr:function(b){return/^HR[0-9]{11}$/.test(b)?(b=b.substr(2),a.fn.bootstrapValidator.helpers.mod_11_10(b)):!1},_ie:function(a){if(!/^IE[0-9]{1}[0-9A-Z\*\+]{1}[0-9]{5}[A-Z]{1,2}$/.test(a))return!1;a=a.substr(2);var b=function(a){for(var b,c,d;a.length<7;)a="0"+a;for(b="WABCDEFGHIJKLMNOPQRSTUV",c=0,d=0;7>d;d++)c+=parseInt(a.charAt(d))*(8-d);return c+=9*b.indexOf(a.substr(7)),b[c%23]};return/^[0-9]+$/.test(a.substr(0,7))?a.charAt(7)==b(a.substr(0,7)+a.substr(8)+""):-1!="ABCDEFGHIJKLMNOPQRSTUVWXYZ+*".indexOf(a.charAt(1))?a.charAt(7)==b(a.substr(2,5)+a.substr(0,1)+""):!0},_it:function(b){if(!/^IT[0-9]{11}$/.test(b))return!1;if(b=b.substr(2),0==parseInt(b.substr(0,7)))return!1;var c=parseInt(b.substr(7,3));return 1>c||c>201&&999!=c&&888!=c?!1:a.fn.bootstrapValidator.helpers.luhn(b)},_lt:function(a){var b,c,d,e;if(!/^LT([0-9]{7}1[0-9]{1}|[0-9]{10}1[0-9]{1})$/.test(a))return!1;for(a=a.substr(2),b=a.length,c=0,d=0;b-1>d;d++)c+=parseInt(a.charAt(d))*(1+d%9);if(e=c%11,10==e)for(c=0,d=0;b-1>d;d++)c+=parseInt(a.charAt(d))*(1+(d+2)%9);return e=e%11%10,e==a.charAt(b-1)},_lu:function(a){return/^LU[0-9]{8}$/.test(a)?(a=a.substr(2),a.substr(0,6)%89==a.substr(6,2)):!1},_lv:function(b){var c,d,e,f,g,h,i,j;if(!/^LV[0-9]{11}$/.test(b))return!1;if(b=b.substr(2),c=parseInt(b.charAt(0)),d=0,e=[],f=0,g=b.length,c>3){for(d=0,e=[9,1,4,8,3,10,2,5,7,6,1],f=0;g>f;f++)d+=parseInt(b.charAt(f))*e[f];return d%=11,3==d}if(h=parseInt(b.substr(0,2)),i=parseInt(b.substr(2,2)),j=parseInt(b.substr(4,2)),j=j+1800+100*parseInt(b.charAt(6)),!a.fn.bootstrapValidator.helpers.date(j,i,h))return!1;for(d=0,e=[10,5,8,4,2,1,6,3,7,9],f=0;g-1>f;f++)d+=parseInt(b.charAt(f))*e[f];return d=(d+1)%11%10,d==b.charAt(g-1)},_mt:function(a){var b,c,d;if(!/^MT[0-9]{8}$/.test(a))return!1;for(a=a.substr(2),b=0,c=[3,4,6,7,8,9,10,1],d=0;8>d;d++)b+=parseInt(a.charAt(d))*c[d];return 0==b%37},_nl:function(a){var b,c,d;if(!/^NL[0-9]{9}B[0-9]{2}$/.test(a))return!1;for(a=a.substr(2),b=0,c=[9,8,7,6,5,4,3,2],d=0;8>d;d++)b+=parseInt(a.charAt(d))*c[d];return b%=11,b>9&&(b=0),b==a.substr(8,1)},_no:function(a){var b,c,d;if(!/^NO[0-9]{9}$/.test(a))return!1;for(a=a.substr(2),b=0,c=[3,2,7,6,5,4,3,2],d=0;8>d;d++)b+=parseInt(a.charAt(d))*c[d];return b=11-b%11,11==b&&(b=0),b==a.substr(8,1)},_pl:function(a){var b,c,d;if(!/^PL[0-9]{10}$/.test(a))return!1;for(a=a.substr(2),b=0,c=[6,5,7,2,3,4,5,6,7,-1],d=0;10>d;d++)b+=parseInt(a.charAt(d))*c[d];return 0==b%11},_pt:function(a){var b,c,d;if(!/^PT[0-9]{9}$/.test(a))return!1;for(a=a.substr(2),b=0,c=[9,8,7,6,5,4,3,2],d=0;8>d;d++)b+=parseInt(a.charAt(d))*c[d];return b=11-b%11,b>9&&(b=0),b==a.substr(8,1)},_ro:function(a){var b,c,d,e;if(!/^RO[1-9][0-9]{1,9}$/.test(a))return!1;for(a=a.substr(2),b=a.length,c=[7,5,3,2,1,7,5,3,2].slice(10-b),d=0,e=0;b-1>e;e++)d+=parseInt(a.charAt(e))*c[e];return d=10*d%11%10,d==a.substr(b-1,1)},_ru:function(a){var b,c,d,e,f,g,h;if(!/^RU([0-9]{9}|[0-9]{12})$/.test(a))return!1;if(a=a.substr(2),10==a.length){for(b=0,c=[2,4,10,3,5,9,4,6,8,0],d=0;10>d;d++)b+=parseInt(a.charAt(d))*c[d];return b%=11,b>9&&(b%=10),b==a.substr(9,1)}if(12==a.length){for(e=0,f=[7,2,4,10,3,5,9,4,6,8,0],g=0,h=[3,7,2,4,10,3,5,9,4,6,8,0],d=0;11>d;d++)e+=parseInt(a.charAt(d))*f[d],g+=parseInt(a.charAt(d))*h[d];return e%=11,e>9&&(e%=10),g%=11,g>9&&(g%=10),e==a.substr(10,1)&&g==a.substr(11,1)}return!1},_rs:function(a){var b,c,d;if(!/^RS[0-9]{9}$/.test(a))return!1;for(a=a.substr(2),b=10,c=0,d=0;8>d;d++)c=(parseInt(a.charAt(d))+b)%10,0==c&&(c=10),b=2*c%11;return 1==(b+parseInt(a.substr(8,1)))%10},_se:function(b){return/^SE[0-9]{10}01$/.test(b)?(b=b.substr(2,10),a.fn.bootstrapValidator.helpers.luhn(b)):!1},_si:function(a){var b,c,d;if(!/^SI[0-9]{8}$/.test(a))return!1;for(a=a.substr(2),b=0,c=[8,7,6,5,4,3,2],d=0;7>d;d++)b+=parseInt(a.charAt(d))*c[d];return b=11-b%11,10==b&&(b=0),b==a.substr(7,1)},_sk:function(a){return/^SK[1-9][0-9][(2-4)|(6-9)][0-9]{7}$/.test(a)?(a=a.substr(2),0==a%11):!1}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.vin={validate:function(a,b){var e,f,g,h,i,j,d=b.val();if(""==d)return!0;if(!/^[a-hj-npr-z0-9]{8}[0-9xX][a-hj-npr-z0-9]{8}$/i.test(d))return!1;for(d=d.toUpperCase(),e={A:1,B:2,C:3,D:4,E:5,F:6,G:7,H:8,J:1,K:2,L:3,M:4,N:5,P:7,R:9,S:2,T:3,U:4,V:5,W:6,X:7,Y:8,Z:9,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,0:0},f=[8,7,6,5,4,3,2,10,0,9,8,7,6,5,4,3,2],g=0,h=d.length,i=0;h>i;i++)g+=e[d.charAt(i)+""]*f[i];return j=g%11,10==j&&(j="X"),j==d.charAt(8)}}}(window.jQuery),function(a){a.fn.bootstrapValidator.validators.zipCode={html5Attributes:{message:"message",country:"country"},validate:function(a,b,c){var e,d=b.val();if(""==d||!c.country)return!0;switch(e=(c.country||"US").toUpperCase()){case"CA":return/(?:A|B|C|E|G|J|K|L|M|N|P|R|S|T|V|X|Y){1}[0-9]{1}(?:A|B|C|E|G|J|K|L|M|N|P|R|S|T|V|X|Y){1}\s?[0-9]{1}(?:A|B|C|E|G|J|K|L|M|N|P|R|S|T|V|X|Y){1}[0-9]{1}/i.test(d);case"DK":return/^(DK(-|\s)?)?\d{4}$/i.test(d);case"GB":return this._gb(d);case"IT":return/^(I-|IT-)?\d{5}$/i.test(d);case"NL":return/^[1-9][0-9]{3} ?(?!sa|sd|ss)[a-z]{2}$/i.test(d);case"SE":return/^(S-)?\d{3}\s?\d{2}$/i.test(d);case"US":default:return/^\d{4,5}([\-]\d{4})?$/.test(d)}},_gb:function(a){var h,b="[ABCDEFGHIJKLMNOPRSTUWYZ]",c="[ABCDEFGHKLMNOPQRSTUVWXY]",d="[ABCDEFGHJKPMNRSTUVWXY]",e="[ABEHMNPRVWXY]",f="[ABDEFGHJLNPQRSTUWXYZ]",g=[new RegExp("^("+b+"{1}"+c+"?[0-9]{1,2})(\\s*)([0-9]{1}"+f+"{2})$","i"),new RegExp("^("+b+"{1}[0-9]{1}"+d+"{1})(\\s*)([0-9]{1}"+f+"{2})$","i"),new RegExp("^("+b+"{1}"+c+"{1}?[0-9]{1}"+e+"{1})(\\s*)([0-9]{1}"+f+"{2})$","i"),new RegExp("^(BF1)(\\s*)([0-6]{1}[ABDEFGHJLNPQRST]{1}[ABDEFGHJLNPQRSTUWZYZ]{1})$","i"),/^(GIR)(\s*)(0AA)$/i,/^(BFPO)(\s*)([0-9]{1,4})$/i,/^(BFPO)(\s*)(c\/o\s*[0-9]{1,3})$/i,/^([A-Z]{4})(\s*)(1ZZ)$/i,/^(AI-2640)$/i];for(h=0;h<g.length;h++)if(g[h].test(a))return!0;return!1}}}(window.jQuery);

/*<script src="${ctxStatic}/org/tinygroup/tourbus/js/jquery.scrollTo.min.js"></script>*/
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function c(b){return a.isFunction(b)||"object"==typeof b?b:{top:b,left:b}}var b=a.scrollTo=function(b,c,d){return a(window).scrollTo(b,c,d)};return b.defaults={axis:"xy",duration:parseFloat(a.fn.jquery)>=1.3?0:1,limit:!0},b.window=function(){return a(window)._scrollable()},a.fn._scrollable=function(){return this.map(function(){var d,b=this,c=!b.nodeName||-1!=a.inArray(b.nodeName.toLowerCase(),["iframe","#document","html","body"]);return c?(d=(b.contentWindow||b).document||b.ownerDocument||b,/webkit/i.test(navigator.userAgent)||"BackCompat"==d.compatMode?d.body:d.documentElement):b})},a.fn.scrollTo=function(d,e,f){return"object"==typeof e&&(f=e,e=0),"function"==typeof f&&(f={onAfter:f}),"max"==d&&(d=9e9),f=a.extend({},b.defaults,f),e=e||f.duration,f.queue=f.queue&&f.axis.length>1,f.queue&&(e/=2),f.offset=c(f.offset),f.over=c(f.over),this._scrollable().each(function(){function n(a){h.animate(k,e,f.easing,a&&function(){a.call(this,i,f)})}var j,g,h,i,k,l,m;if(null!=d){switch(g=this,h=a(g),i=d,k={},l=h.is("html,body"),typeof i){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(i)){i=c(i);break}if(i=l?a(i):a(i,this),!i.length)return;case"object":(i.is||i.style)&&(j=(i=a(i)).offset())}m=a.isFunction(f.offset)&&f.offset(g,i)||f.offset,a.each(f.axis.split(""),function(a,c){var r,d="x"==c?"Left":"Top",e=d.toLowerCase(),o="scroll"+d,p=g[o],q=b.max(g,c);j?(k[o]=j[e]+(l?0:p-h.offset()[e]),f.margin&&(k[o]-=parseInt(i.css("margin"+d))||0,k[o]-=parseInt(i.css("border"+d+"Width"))||0),k[o]+=m[e]||0,f.over[e]&&(k[o]+=i["x"==c?"width":"height"]()*f.over[e])):(r=i[e],k[o]=r.slice&&"%"==r.slice(-1)?parseFloat(r)/100*q:r),f.limit&&/^\d+$/.test(k[o])&&(k[o]=k[o]<=0?0:Math.min(k[o],q)),!a&&f.queue&&(p!=k[o]&&n(f.onAfterFirst),delete k[o])}),n(f.onAfter)}}).end()},b.max=function(b,c){var f,g,h,d="x"==c?"Width":"Height",e="scroll"+d;return a(b).is("html,body")?(f="client"+d,g=b.ownerDocument.documentElement,h=b.ownerDocument.body,Math.max(g[e],h[e])-Math.min(g[f],h[f])):b[e]-a(b)[d.toLowerCase()]()},b});

/*<script src="${ctxStatic}/org/tinygroup/tourbus/js/jquery-tourbus.js"></script>*/
!function a(b,c,d){function e(g,h){var i,j;if(!c[g]){if(!b[g]){if(i="function"==typeof require&&require,!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}j=c[g]={exports:{}},b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}var g,f="function"==typeof require&&require;for(g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a){!function(){var b,c,d,e,f,g=[].slice;b=jQuery,c=a("./modules/bus"),d=a("./modules/leg"),f=b.tourbus=function(){var a,c;return a=1<=arguments.length?g.call(arguments,0):[],c=a[0],e.hasOwnProperty(c)?a=a.slice(1):c instanceof b?c="build":"string"==typeof c?(c="build",a[0]=b(a[0])):b.error("Unknown method of $.tourbus --",a),e[c].apply(this,a)},b.fn.tourbus=function(){var a;return a=1<=arguments.length?g.call(arguments,0):[],this.each(function(){return a.unshift(b(this)),f.apply(null,["build"].concat(g.call(a))),this})},e={build:function(a,d){var e;return null==d&&(d={}),d=b.extend(!0,{},f.defaults,d),e=[],a instanceof b||(a=b(a)),a.each(function(){return e.push(new c(this,d))}),0===e.length&&b.error(""+a.selector+" was not found!"),1===e.length?e[0]:e},destroyAll:function(){var a,b,d,e;d=c._busses,e=[];for(b in d)a=d[b],e.push(a.destroy());return e},expose:function(a){return a.tourbus={Bus:c,Leg:d}}},f.defaults={debug:!1,autoDepart:!1,container:"body","class":null,startAt:0,onDepart:function(){return null},onStop:function(){return null},onLegStart:function(){return null},onLegEnd:function(){return null},leg:{"class":null,scrollTo:null,scrollSpeed:150,scrollContext:100,orientation:"bottom",align:"left",width:"auto",margin:10,top:null,left:null,zindex:9999,arrow:"50%"}}}.call(this)},{"./modules/bus":2,"./modules/leg":3}],2:[function(a,b){!function(){var c,d,e,f,g=[].slice;c=jQuery,e=a("./leg"),f=a("./utils"),b.exports=d=function(){function a(a,b){this.options=b,this.id=this.constructor.uniqueId(),this.elId="tourbus-"+this.id,this.constructor._busses[this.id]=this,this.$original=c(a),this.rawData=this.$original.data(),this.$container=c(f.dataProp(this.rawData.container,this.options.container)),this.$original.data({tourbus:this}),this.currentLegIndex=null,this.legs=[],this.legEls=this.$original.children("li"),this.totalLegs=this.legEls.length,this._configureElement(),this._setupEvents(),f.dataProp(this.rawData.autoDepart,this.options.autoDepart)&&this.$original.trigger("depart.tourbus"),this._log("built tourbus with el",a.toString(),"and options",this.options)}return a._busses={},a._tours=0,a.uniqueId=function(){return this._tours++},a.prototype.depart=function(){return this.running=!0,this.options.onDepart(this),this._log("departing",this),this.currentLegIndex=f.dataProp(this.rawData.startAt,this.options.startAt),this.showLeg()},a.prototype.stop=function(){return this.running?(c.each(this.legs,c.proxy(this.hideLeg,this)),this.currentLegIndex=null,this.options.onStop(this),this.running=!1):void 0},a.prototype.on=function(a,b,c){return this.$container.on(a,b,c)},a.prototype.currentLeg=function(){return null===this.currentLegIndex?null:this.legs[this.currentLegIndex]},a.prototype.buildLeg=function(a){var b,d,f;return b=c(this.legEls[a]),d=b.data(),this.legs[a]=f=new e({bus:this,original:b,target:d.el||"body",index:a,rawData:d}),f.render(),this.$el.append(f.$el),f._position(),f.hide(),f},a.prototype.showLeg=function(a){var b,c;return null==a&&(a=this.currentLegIndex),b=this.legs[a]||this.buildLeg(a),this._log("showLeg:",b),c=this.options.onLegStart(b,this),c!==!1&&b.show(),++a<this.totalLegs&&!this.legs[a]?this.buildLeg(a):void 0},a.prototype.hideLeg=function(a){var b,c;return null==a&&(a=this.currentLegIndex),b=this.legs[a],b&&b.visible&&(this._log("hideLeg:",b),c=this.options.onLegEnd(b,this),c!==!1&&b.hide()),--a>0&&!this.legs[a]?this.buildLeg(a):void 0},a.prototype.repositionLegs=function(){return c.each(this.legs,function(){return this.reposition()})},a.prototype.next=function(){return this.hideLeg(),this.currentLegIndex++,this.currentLegIndex>this.totalLegs-1?this.$original.trigger("stop.tourbus"):this.showLeg()},a.prototype.prev=function(){return this.hideLeg(),this.currentLegIndex--,this.currentLegIndex<0?this.$original.trigger("stop.tourbus"):this.showLeg()},a.prototype.destroy=function(){return c.each(this.legs,function(){return this.destroy()}),this.legs=[],delete this.constructor._busses[this.id],this._teardownEvents(),this.$original.removeData("tourbus"),this.$el.remove()},a.prototype._configureElement=function(){return this.$el=c("<div class='tourbus-container'></div>"),this.el=this.$el[0],this.$el.attr({id:this.elId}),this.$el.addClass(f.dataProp(this.rawData["class"],this.options["class"])),this.$container.append(this.$el)},a.prototype._log=function(){return f.dataProp(this.rawData.debug,this.options.debug)?console.log.apply(console,["TOURBUS "+this.id+":"].concat(g.call(arguments))):void 0},a.prototype._setupEvents=function(){return this.$original.on("depart.tourbus",c.proxy(this.depart,this)),this.$original.on("stop.tourbus",c.proxy(this.stop,this)),this.$original.on("next.tourbus",c.proxy(this.next,this)),this.$original.on("prev.tourbus",c.proxy(this.prev,this))},a.prototype._teardownEvents=function(){return this.$original.off(".tourbus")},a}()}.call(this)},{"./leg":3,"./utils":4}],3:[function(a,b){!function(){var c,d,e,f;c=jQuery,e=a("./utils"),b.exports=d=function(){function a(a){if(this.options=a,this.$original=this.options.original,this.bus=this.options.bus,this.rawData=this.options.rawData,this.index=this.options.index,this.$target=c(this.options.target),this.id=""+this.bus.id+"-"+this.options.index,this.elId="tourbus-leg-"+this.id,this.visible=!1,0===this.$target.length)throw""+this.$target.selector+" is not an element!";this.content=this.$original.html(),this._setupOptions(),this._configureElement(),this._configureTarget(),this._configureScroll(),this._setupEvents(),this.bus._log("leg "+this.index+" made with options",this.options)}return a.prototype.render=function(){var a,b;return a="centered"===this.options.orientation?"":"tourbus-arrow",this.$el.addClass(" "+a+" tourbus-arrow-"+this.options.orientation+" "),b="<div class='tourbus-leg-inner'>\n  "+this.content+"\n</div>",this.$el.css({width:this.options.width,zIndex:this.options.zindex}).html(b),this},a.prototype.destroy=function(){return this.$el.remove(),this._teardownEvents()},a.prototype.reposition=function(){return this._configureTarget(),this._position()},a.prototype._position=function(){var a,b,c,d;return"centered"!==this.options.orientation&&(c={},b={top:"left",bottom:"left",left:"top",right:"top"},"number"==typeof this.options.arrow&&(this.options.arrow+="px"),c[b[this.options.orientation]]=this.options.arrow,d="#"+this.elId+".tourbus-arrow",this.bus._log("adding rule for "+this.elId,c),f(""+d+":before, "+d+":after",c)),a=this._offsets(),this.bus._log("setting offsets on leg",a),this.$el.css(a)},a.prototype.show=function(){return this.visible=!0,this.$el.css({visibility:"visible",opacity:1,zIndex:this.options.zindex}),this.scrollIntoView()},a.prototype.hide=function(){return this.visible=!1,this.bus.options.debug?this.$el.css({visibility:"visible",opacity:.4,zIndex:0}):this.$el.css({visibility:"hidden"})},a.prototype.scrollIntoView=function(){var a;if(this.willScroll)return a=e.dataProp(this.options.scrollTo,this.$el),this.bus._log("scrolling to",a,this.scrollSettings),c.scrollTo(a,this.scrollSettings)},a.prototype._setupOptions=function(){var a,b,c,d,f,g;for(b=this.bus.options.leg,a=["class","top","left","scrollTo","scrollSpeed","scrollContext","margin","arrow","align","width","zindex","orientation"],g=[],d=0,f=a.length;f>d;d++)c=a[d],g.push(this.options[c]=e.dataProp(this.rawData[c],b[c]));return g},a.prototype._configureElement=function(){return this.$el=c("<div class='tourbus-leg'></div>"),this.el=this.$el[0],this.$el.attr({id:this.elId}),this.$el.addClass(this.options["class"]),this.$el.css({zIndex:this.options.zindex})},a.prototype._setupEvents=function(){return this.$el.on("click",".tourbus-next",c.proxy(this.bus.next,this.bus)),this.$el.on("click",".tourbus-prev",c.proxy(this.bus.prev,this.bus)),this.$el.on("click",".tourbus-stop",c.proxy(this.bus.stop,this.bus))},a.prototype._teardownEvents=function(){return this.$el.off("click")},a.prototype._configureTarget=function(){return this.targetOffset=this.$target.offset(),e.dataProp(this.options.top,!1)&&(this.targetOffset.top=this.options.top),e.dataProp(this.options.left,!1)&&(this.targetOffset.left=this.options.left),this.targetWidth=this.$target.outerWidth(),this.targetHeight=this.$target.outerHeight()},a.prototype._configureScroll=function(){return this.willScroll=c.fn.scrollTo&&this.options.scrollTo!==!1,this.scrollSettings={offset:-this.options.scrollContext,easing:"linear",axis:"y",duration:this.options.scrollSpeed}},a.prototype._offsets=function(){var a,b,d,f,g,h,i,j;switch(d=this.$el.height(),f=this.$el.width(),g={},this.options.orientation){case"centered":i=c(window).height(),g.top=this.options.top,e.dataProp(g.top,!1)||(g.top=i/2-d/2),g.left=this.targetWidth/2-f/2;break;case"left":g.top=this.targetOffset.top,g.left=this.targetOffset.left-f-this.options.margin;break;case"right":g.top=this.targetOffset.top,g.left=this.targetOffset.left+this.targetWidth+this.options.margin;break;case"top":g.top=this.targetOffset.top-d-this.options.margin,g.left=this.targetOffset.left;break;case"bottom":g.top=this.targetOffset.top+this.targetHeight+this.options.margin,g.left=this.targetOffset.left}if(j={top:["left","right"],bottom:["left","right"],left:["top","bottom"],right:["top","bottom"]},e.include(this.options.orientation,j[this.options.align]))switch(this.options.align){case"right":g.left+=this.targetWidth-f;break;case"bottom":g.top+=this.targetHeight-d}else"center"===this.options.align&&(e.include(this.options.orientation,j.left)?(h=this.targetWidth/2,b=f/2,a="left"):(h=this.targetHeight/2,b=d/2,a="top"),h>b?g[a]+=h-b:g[a]-=b-h);return g},a}(),f=function(a){var b;return a.type="text/css",document.getElementsByTagName("head")[0].appendChild(a),b=document.styleSheets[document.styleSheets.length-1],function(a,d){var e,f;f=c.map(function(){var a;a=[];for(e in d)a.push(e);return a}(),function(a){return""+a+":"+d[a]}).join(";");try{b.insertRule?b.insertRule(""+a+" { "+f+" }",(b.cssRules||b.rules).length):b.addRule(a,f)}catch(g){}}}(document.createElement("style"))}.call(this)},{"./utils":4}],4:[function(a,b){!function(){b.exports={dataProp:function(a,b){return null===a||"undefined"==typeof a?b:a},include:function(a,b){return-1!==$.inArray(a,b||[])}}}.call(this)},{}]},{},[1,2,3,4]);

/*<script src="${ctxStatic}/org/tinygroup/unslider/js/jquery.touchSlider.js"></script>*/
!function(a){a.fn.touchSlider=function(c){c.supportsCssTransitions=function(a){var c,d,b=["Webkit","Moz","Ms"];for(c=0,d=b.length;d>c;c++)if("undefined"!=typeof a[b[c]+"Transition"])return!0;return!1}(document.createElement("div").style),c=jQuery.extend({roll:!0,flexible:!1,btn_prev:null,btn_next:null,paging:null,speed:75,view:1,range:.15,page:1,transition:!1,initComplete:null,counter:null,multi:!1},c);var d=[];return d=a.extend({},a.fn.touchSlider.defaults,c),this.each(function(){a.fn.extend(this,b);var c=this;this.opts=d,this._view=this.opts.view,this._speed=this.opts.speed,this._tg=a(this),this._list=this._tg.children().children(),this._width=parseInt(this._tg.css("width")),this._item_w=parseInt(this._list.css("width")),this._len=this._list.length,this._range=this.opts.range*this._width,this._pos=[],this._start=[],this._startX=0,this._startY=0,this._left=0,this._top=0,this._drag=!1,this._scroll=!1,this._btn_prev,this._btn_next,this.init(),a(this).bind("touchstart",this.touchstart).bind("touchmove",this.touchmove).bind("touchend",this.touchend).bind("dragstart",this.touchstart).bind("drag",this.touchmove).bind("dragend",this.touchend),a(window).bind("orientationchange resize",function(){c.resize(c)})})};var b={init:function(){var c,d,b=this;for(a(this).children().css({width:this._width+"px",overflow:"visible"}),this.opts.flexible&&(this._item_w=this._width/this._view),this.opts.roll&&(this._len=Math.ceil(this._len/this._view)*this._view),c=this.opts.page>1&&this.opts.page<=this._len?(this.opts.page-1)*this._item_w:0,d=0;d<this._len;++d)this._pos[d]=this._item_w*d-c,this._start[d]=this._pos[d],this._list.eq(d).css({"float":"none",display:"block",position:"absolute",top:"0",left:this._pos[d]+"px",width:this._item_w+"px"}),this.opts.supportsCssTransitions&&this.opts.transition&&this._list.eq(d).css({"-moz-transition":"0ms","-moz-transform":"","-ms-transition":"0ms","-ms-transform":"","-webkit-transition":"0ms","-webkit-transform":"",transition:"0ms",transform:""});this.opts.btn_prev&&this.opts.btn_next&&(this.opts.btn_prev.bind("click",function(){return b.animate(1,!0),!1}),this.opts.btn_next.bind("click",function(){return b.animate(-1,!0),!1})),this.opts.paging&&a(this._list).each(function(a){var d=b.opts.paging.eq(a);d.bind("click",function(c){return b.go_page(a,c),!1})}),this.counter(),this.initComplete()},initComplete:function(){"function"==typeof this.opts.initComplete&&this.opts.initComplete(this)},resize:function(a){var b,c;if(a.opts.flexible)for(b=a._item_w,a._width=parseInt(a._tg.css("width")),a._item_w=a._width/a._view,a._range=a.opts.range*a._width,c=0;c<a._len;++c)a._pos[c]=a._pos[c]/b*a._item_w,a._start[c]=a._start[c]/b*a._item_w,a._list.eq(c).css({left:a._pos[c]+"px",width:a._item_w+"px"}),this.opts.supportsCssTransitions&&this.opts.transition&&a._list.eq(c).css({"-moz-transition":"0ms","-moz-transform":"","-ms-transition":"0ms","-ms-transform":"","-webkit-transition":"0ms","-webkit-transform":"",transition:"0ms",transform:""});this.counter()},touchstart:function(a){if("touchstart"==a.type&&a.originalEvent.touches.length<=1||"dragstart"==a.type){this._startX=a.pageX||a.originalEvent.touches[0].pageX,this._startY=a.pageY||a.originalEvent.touches[0].pageY,this._scroll=!1,this._start=[];for(var b=0;b<this._len;++b)this._start[b]=this._pos[b]}},touchmove:function(a){var b,c,d,e,f;if("touchmove"==a.type&&a.originalEvent.touches.length<=1||"drag"==a.type)for(this._left=(a.pageX||a.originalEvent.touches[0].pageX)-this._startX,this._top=(a.pageY||a.originalEvent.touches[0].pageY)-this._startY,b=this._left<0?-1*this._left:this._left,c=this._top<0?-1*this._top:this._top,c>b||this._scroll?(this._left=0,this._drag=!1,this._scroll=!0):(a.preventDefault(),this._drag=!0,this._scroll=!1,this.position(a)),d=0;d<this._len;++d)e=this._start[d]+this._left,this.opts.supportsCssTransitions&&this.opts.transition?(f="translate3d("+e+"px,0,0)",this._list.eq(d).css({left:"","-moz-transition":"0ms","-moz-transform":f,"-ms-transition":"0ms","-ms-transform":f,"-webkit-transition":"0ms","-webkit-transform":f,transition:"0ms",transform:f})):this._list.eq(d).css("left",e+"px"),this._pos[d]=e},touchend:function(a){if("touchend"==a.type&&a.originalEvent.touches.length<=1||"dragend"==a.type){if(this._scroll)return this._drag=!1,this._scroll=!1,!1;this.animate(this.direction()),this._drag=!1,this._scroll=!1}},position:function(b){var d,e,f,g,h,c=this._view*this._item_w;if(-1==b||1==b){for(this._startX=0,this._start=[],d=0;d<this._len;++d)this._start[d]=this._pos[d];this._left=b*c}else this._left>c&&(this._left=c),this._left<-c&&(this._left=-c);if(this.opts.roll){for(e=[],d=0;d<this._len;++d)e[d]=this._pos[d];if(e.sort(function(a,b){return a-b}),f=e[this._len-this._view],g=a.inArray(e[0],this._pos),h=a.inArray(f,this._pos),this._view<=1&&(f=this._len-1),this.opts.multi){if(1==b&&e[0]>=0||this._drag&&e[0]>=100)for(d=0;d<this._view;++d,++g,++h)this._start[h]=this._start[g]-c,this._list.eq(h).css("left",this._start[h]+"px");else if(-1==b&&e[0]<=0||this._drag&&e[0]<=-100)for(d=0;d<this._view;++d,++g,++h)this._start[g]=this._start[h]+c,this._list.eq(g).css("left",this._start[g]+"px")}else if(1==b&&e[0]>=0||this._drag&&e[0]>0)for(d=0;d<this._view;++d,++g,++h)this._start[h]=this._start[g]-c,this._list.eq(h).css("left",this._start[h]+"px");else if(-1==b&&e[f]<=0||this._drag&&e[f]<=0)for(d=0;d<this._view;++d,++g,++h)this._start[g]=this._start[h]+c,this._list.eq(g).css("left",this._start[g]+"px")}else this.limit_chk()&&(this._left=this._left/2)},animate:function(b,c){var d,e,f;(this._drag||!this._scroll||c)&&(d=this,e=this._speed,c&&this.position(b),f=b*this._item_w*this._view,(0==this._left||!this.opts.roll&&this.limit_chk())&&(f=0),this._list.each(function(b){var h,i;d._pos[b]=d._start[b]+f,d.opts.supportsCssTransitions&&d.opts.transition?(h=e+"ms",i="translate3d("+d._pos[b]+"px,0,0)",c&&(h="0ms"),a(this).css({left:"","-moz-transition":h,"-moz-transform":i,"-ms-transition":h,"-ms-transform":i,"-webkit-transition":h,"-webkit-transform":i,transition:h,transform:i})):(a(this).stop(),a(this).animate({left:d._pos[b]+"px"},e))}),this.counter())},direction:function(){var a=0;return this._left<-this._range?a=-1:this._left>this._range&&(a=1),(!this._drag||this._scroll)&&(a=0),a},limit_chk:function(){var a=parseInt((this._len-1)/this._view)*this._view;return 0==this._start[0]&&this._left>0||0==this._start[a]&&this._left<0},go_page:function(b){for(var d=a.inArray(0,this._pos)/this._view+1,e=d-(b+1);0!=e;)0>e?(this.animate(-1,!0),e++):e>0&&(this.animate(1,!0),e--)},counter:function(){if("function"==typeof this.opts.counter){var b={total:Math.ceil(this._len/this._view),current:a.inArray(0,this._pos)/this._view+1};this.opts.counter(b)}}}}(jQuery);

/*<script src="${ctxStatic}/org/tinygroup/form/js/Validform_v5.3.2.js"></script>*/
!function(a,b,c){function j(){return!1}var h,d=null,e=null,f=!0,g={tit:"提示信息",w:{"*":"不能为空！","*6-16":"请填写6到16位任意字符！",n:"请填写数字！","n6-16":"请填写6到16位数字！",s:"不能输入特殊字符！","s6-18":"请填写6到18位字符！",p:"请填写邮政编码！",m:"请填写手机号码！",e:"邮箱地址格式不对！",url:"请填写网址！"},def:"请填写正确信息！",undef:"datatype未定义！",reck:"两次输入的内容不一致！",r:"",c:"正在检测信息…",s:"请{填写|选择}{0|信息}！",v:"所填信息没有经过验证，请稍后…",p:"正在提交数据…"};a.Tipmsg=g,h=function(b,d,e){var f;return d=a.extend({},h.defaults,d),d.datatype&&a.extend(h.util.dataType,d.datatype),f=this,f.tipmsg={w:{}},f.forms=b,f.objects=[],e===!0?!1:(b.each(function(){var b,e;return"inited"==this.validform_inited?!0:(this.validform_inited="inited",b=this,b.settings=a.extend({},d),e=a(b),b.validform_status="normal",e.data("tipmsg",f.tipmsg),e.delegate("[datatype]","blur",function(){var a=arguments[1];h.util.check.call(this,e,a)}),e.delegate(":text","keypress",function(a){13==a.keyCode&&0==e.find(":submit").length&&e.submit()}),h.util.enhance.call(e,b.settings.tiptype,b.settings.usePlugin,b.settings.tipSweep),b.settings.btnSubmit&&e.find(b.settings.btnSubmit).bind("click",function(){return e.trigger("submit"),!1}),e.submit(function(){var a=h.util.submitForm.call(e,b.settings);return a===c&&(a=!0),a}),e.find("[type='reset']").add(e.find(b.settings.btnReset)).bind("click",function(){h.util.resetForm.call(e)}),void 0)}),(1==d.tiptype||(2==d.tiptype||3==d.tiptype)&&d.ajaxPost)&&j(),void 0)},h.defaults={tiptype:1,tipSweep:!1,showAllError:!1,postonce:!1,ajaxPost:!1},h.util={dataType:{"*":/[\w\W]+/,"*6-16":/^[\w\W]{6,16}$/,n:/^\d+$/,"n6-16":/^\d{6,16}$/,s:/^[\u4E00-\u9FA5\uf900-\ufa2d\w\.\s]+$/,"s6-18":/^[\u4E00-\u9FA5\uf900-\ufa2d\w\.\s]{6,18}$/,p:/^[0-9]{6}$/,m:/^1[345678][0-9]{9}$/,e:/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,url:/^(\w+:\/\/)?\w+(\.\w+)+.*$/},toString:Object.prototype.toString,isEmpty:function(b){return""===b||b===a.trim(this.attr("tip"))},getValue:function(b){var d,e=this;return b.is(":radio")?(d=e.find(":radio[name='"+b.attr("name")+"']:checked").val(),d=d===c?"":d):b.is(":checkbox")?(d="",e.find(":checkbox[name='"+b.attr("name")+"']:checked").each(function(){d+=a(this).val()+","}),d=d===c?"":d):d=b.val(),d=a.trim(d),h.util.isEmpty.call(b,d)?"":d},enhance:function(b,c,d,e){var f=this;f.find("[datatype]").each(function(){2==b?0==a(this).parents(".formControls").next().find(".Validform_checktip").length&&(a(this).parents(".formControls").next().append("<span class='Validform_checktip' />"),a(this).siblings(".Validform_checktip").remove()):(3==b||4==b)&&0==a(this).siblings(".Validform_checktip").length&&(a(this).parent().append("<span class='Validform_checktip' />"),a(this).parent().next().find(".Validform_checktip").remove(),a(this).parents(".formControls").next().find(".Validform_checktip").remove())}),f.find("input[recheck]").each(function(){var b,c;return"inited"==this.validform_inited?!0:(this.validform_inited="inited",b=a(this),c=f.find("input[name='"+a(this).attr("recheck")+"']"),c.bind("keyup",function(){if(c.val()==b.val()&&""!=c.val()){if(c.attr("tip")&&c.attr("tip")==c.val())return!1;b.trigger("blur")}}).bind("blur",function(){if(c.val()!=b.val()&&""!=b.val()){if(b.attr("tip")&&b.attr("tip")==b.val())return!1;b.trigger("blur")}}),void 0)}),f.find("[tip]").each(function(){var b,c;return"inited"==this.validform_inited?!0:(this.validform_inited="inited",b=a(this).attr("tip"),c=a(this).attr("altercss"),a(this).focus(function(){a(this).val()==b&&(a(this).val(""),c&&a(this).removeClass(c))}).blur(function(){""===a.trim(a(this).val())&&(a(this).val(b),c&&a(this).addClass(c))}),void 0)}),f.find(":checkbox[datatype],:radio[datatype]").each(function(){var b,c;return"inited"==this.validform_inited?!0:(this.validform_inited="inited",b=a(this),c=b.attr("name"),f.find("[name='"+c+"']").filter(":checkbox,:radio").bind("click",function(){setTimeout(function(){b.trigger("blur")},0)}),void 0)}),f.find("select[datatype][multiple]").bind("click",function(){var b=a(this);setTimeout(function(){b.trigger("blur")},0)}),h.util.usePlugin.call(f,c,b,d,e)},usePlugin:function(b,c,d,e){var g,i,j,k,f=this;if(b=b||{},f.find("input[plugin='swfupload']").length&&"undefined"!=typeof swfuploadhandler&&(g={custom_settings:{form:f,showmsg:function(a,b){h.util.showmsg.call(f,a,c,{obj:f.find("input[plugin='swfupload']"),type:b,sweep:d})}}},g=a.extend(!0,{},b.swfupload,g),f.find("input[plugin='swfupload']").each(function(b){return"inited"==this.validform_inited?!0:(this.validform_inited="inited",a(this).val(""),swfuploadhandler.init(g,b),void 0)})),f.find("input[plugin='datepicker']").length&&a.fn.datePicker&&(b.datepicker=b.datepicker||{},b.datepicker.format&&(Date.format=b.datepicker.format,delete b.datepicker.format),b.datepicker.firstDayOfWeek&&(Date.firstDayOfWeek=b.datepicker.firstDayOfWeek,delete b.datepicker.firstDayOfWeek),f.find("input[plugin='datepicker']").each(function(){return"inited"==this.validform_inited?!0:(this.validform_inited="inited",b.datepicker.callback&&a(this).bind("dateSelected",function(){var c=new Date(a.event._dpCache[this._dpId].getSelected()[0]).asString(Date.format);b.datepicker.callback(c,this)}),a(this).datePicker(b.datepicker),void 0)})),f.find("input[plugin*='passwordStrength']").length&&a.fn.passwordStrength&&(b.passwordstrength=b.passwordstrength||{},b.passwordstrength.showmsg=function(a,b,e){h.util.showmsg.call(f,b,c,{obj:a,type:e,sweep:d})},f.find("input[plugin='passwordStrength']").each(function(){return"inited"==this.validform_inited?!0:(this.validform_inited="inited",a(this).passwordStrength(b.passwordstrength),void 0)})),"addRule"!=e&&b.jqtransform&&a.fn.jqTransSelect){if("true"==f[0].jqTransSelected)return;f[0].jqTransSelected="true",i=function(b){var c=a(".jqTransformSelectWrapper ul:visible");c.each(function(){var c=a(this).parents(".jqTransformSelectWrapper:first").find("select").get(0);b&&c.oLabel&&c.oLabel.get(0)==b.get(0)||a(this).hide()})},j=function(b){0===a(b.target).parents(".jqTransformSelectWrapper").length&&i(a(b.target))},k=function(){a(document).mousedown(j)},b.jqtransform.selector?(f.find(b.jqtransform.selector).filter('input:submit, input:reset, input[type="button"]').jqTransInputButton(),f.find(b.jqtransform.selector).filter("input:text, input:password").jqTransInputText(),f.find(b.jqtransform.selector).filter("input:checkbox").jqTransCheckBox(),f.find(b.jqtransform.selector).filter("input:radio").jqTransRadio(),f.find(b.jqtransform.selector).filter("textarea").jqTransTextarea(),f.find(b.jqtransform.selector).filter("select").length>0&&(f.find(b.jqtransform.selector).filter("select").jqTransSelect(),k())):f.jqTransform(),f.find(".jqTransformSelectWrapper").find("li a").click(function(){a(this).parents(".jqTransformSelectWrapper").find("select").trigger("blur")})}},getNullmsg:function(a){var d,b=this,c=/[\u4E00-\u9FA5\uf900-\ufa2da-zA-Z\s]+/g,e=a[0].settings.label||".Validform_label";if(e=b.siblings(e).eq(0).text()||b.siblings().find(e).eq(0).text()||b.parent().siblings(e).eq(0).text()||b.parent().siblings().find(e).eq(0).text(),e=e.replace(/\s(?![a-zA-Z])/g,"").match(c),e=e?e.join(""):[""],c=/\{(.+)\|(.+)\}/,d=a.data("tipmsg").s||g.s,""!=e){if(d=d.replace(/\{0\|(.+)\}/,e),b.attr("recheck"))return d=d.replace(/\{(.+)\}/,""),b.attr("nullmsg",d),d}else d=b.is(":checkbox,:radio,select")?d.replace(/\{0\|(.+)\}/,""):d.replace(/\{0\|(.+)\}/,"$1");return d=b.is(":checkbox,:radio,select")?d.replace(c,"$2"):d.replace(c,"$1"),b.attr("nullmsg",d),d},getErrormsg:function(b,c,d){var k,l,m,e=/^(.+?)((\d+)-(\d+))?$/,f=/^(.+?)(\d+)-(\d+)$/,h=/(.*?)\d+(.+?)\d+(.*)/,i=c.match(e);if("recheck"==d)return k=b.data("tipmsg").reck||g.reck;if(l=a.extend({},g.w,b.data("tipmsg").w),i[0]in l)return b.data("tipmsg").w[i[0]]||g.w[i[0]];for(m in l)if(-1!=m.indexOf(i[1])&&f.test(m))return k=(b.data("tipmsg").w[m]||g.w[m]).replace(h,"$1"+i[3]+"$2"+i[4]+"$3"),b.data("tipmsg").w[i[0]]=k,k;return b.data("tipmsg").def||g.def},_regcheck:function(a,b,d,e){var f,i,j,k,l,m,n,o,q,p,r,s,t,u;if(e=e,f=null,i=!1,j=/\/.+\//g,k=/^(.+?)(\d+)-(\d+)$/,l=3,j.test(a))m=a.match(j)[0].slice(1,-1),n=a.replace(j,""),o=RegExp(m,n),i=o.test(b);else if("[object Function]"==h.util.toString.call(h.util.dataType[a]))i=h.util.dataType[a](b,d,e,h.util.dataType),i===!0||i===c?i=!0:(f=i,i=!1);else{if(!(a in h.util.dataType))if(p=a.match(k)){for(r in h.util.dataType)if(q=r.match(k),q&&p[1]===q[1]){s=h.util.dataType[r].toString(),n=s.match(/\/[mgi]*/g)[1].replace("/",""),t=new RegExp("\\{"+q[2]+","+q[3]+"\\}","g"),s=s.replace(/\/[mgi]*/g,"/").replace(t,"{"+p[2]+","+p[3]+"}").replace(/^\//,"").replace(/\/$/,""),h.util.dataType[a]=new RegExp(s,n);break}}else i=!1,f=e.data("tipmsg").undef||g.undef;"[object RegExp]"==h.util.toString.call(h.util.dataType[a])&&(i=h.util.dataType[a].test(b))}return i?(l=2,f=d.attr("sucmsg")||e.data("tipmsg").r||g.r,d.attr("recheck")&&(u=e.find("input[name='"+d.attr("recheck")+"']:first"),b!=u.val()&&(i=!1,l=3,f=d.attr("errormsg")||h.util.getErrormsg.call(d,e,a,"recheck")))):(f=f||d.attr("errormsg")||h.util.getErrormsg.call(d,e,a),h.util.isEmpty.call(d,b)&&(f=d.attr("nullmsg")||h.util.getNullmsg.call(d,e))),{passed:i,type:l,info:f}},regcheck:function(a,b,c){var i,j,k,l,d=this,e=null;if("ignore"===c.attr("ignore")&&h.util.isEmpty.call(c,b))return c.data("cked")&&(e=""),{passed:!0,type:4,info:e};for(c.data("cked","cked"),i=h.util.parseDatatype(a),k=0;k<i.length;k++){for(l=0;l<i[k].length&&(j=h.util._regcheck(i[k][l],b,c,d),j.passed);l++);if(j.passed)break}return j},parseDatatype:function(a){var g,b=/\/.+?\/[mgi]*(?=(,|$|\||\s))|[\w\*-]+/g,c=a.match(b),d=a.replace(b,"").replace(/\s*/g,"").split(""),e=[],f=0;for(e[0]=[],e[0].push(c[0]),g=0;g<d.length;g++)"|"==d[g]&&(f++,e[f]=[]),e[f].push(c[g+1]);return e},showmsg:function(b,c,d,e){if(void 0!=b&&("bycheck"!=e||!d.sweep||(!d.obj||d.obj.is(".Validform_error"))&&"function"!=typeof c)){if(a.extend(d,{curform:this}),"function"==typeof c)return c(b,d,h.util.cssctl),void 0;(1==c&&"bycheck"!=e&&2!=d.type||"byajax"==e&&4!=c)&&b&&layer.msg(b,{icon:2}),2==c&&d.obj&&(d.obj.parents(".formControls").next().find(".Validform_checktip").html(b),h.util.cssctl(d.obj.parents(".formControls").next().find(".Validform_checktip"),d.type)),3!=c&&4!=c||!d.obj||(d.obj.siblings(".Validform_checktip").html(b),h.util.cssctl(d.obj.siblings(".Validform_checktip"),d.type))}},cssctl:function(a,b){switch(b){case 1:a.removeClass("Validform_right Validform_wrong").addClass("Validform_checktip Validform_loading");break;case 2:a.removeClass("Validform_wrong Validform_loading").addClass("Validform_checktip Validform_right");break;case 4:a.removeClass("Validform_right Validform_wrong Validform_loading").addClass("Validform_checktip");break;default:a.removeClass("Validform_right Validform_loading").addClass("Validform_checktip Validform_wrong")}},check:function(b,c,e){var i,j,k,l,m,n,o,p,q,f=b[0].settings;return c=c||"",i=h.util.getValue.call(b,a(this)),f.ignoreHidden&&a(this).is(":hidden")||"dataIgnore"===a(this).data("dataIgnore")?!0:f.dragonfly&&!a(this).data("cked")&&h.util.isEmpty.call(a(this),i)&&"ignore"!=a(this).attr("ignore")?!1:(j=h.util.regcheck.call(b,a(this).attr("datatype"),i,a(this)),i!=this.validform_lastval||a(this).attr("recheck")||""!=c?(this.validform_lastval=i,d=k=a(this),j.passed?(l=a(this).attr("ajaxurl"),!l||h.util.isEmpty.call(a(this),i)||e?(l&&h.util.isEmpty.call(a(this),i)&&(h.util.abort.call(k[0]),k[0].validform_valid="true"),e||(h.util.showmsg.call(b,j.info,f.tiptype,{obj:a(this),type:j.type,sweep:f.tipSweep},"bycheck"),k.removeClass("Validform_error")),d=null,!0):(m=a(this),m[0].validform_subpost="postform"==c?"postform":"","posting"===m[0].validform_valid&&i==m[0].validform_ckvalue?"ajax":(m[0].validform_valid="posting",m[0].validform_ckvalue=i,h.util.showmsg.call(b,b.data("tipmsg").c||g.c,f.tiptype,{obj:m,type:1,sweep:f.tipSweep},"bycheck"),h.util.abort.call(k[0]),n=a.extend(!0,{},f.ajaxurl||{}),o={type:"POST",cache:!1,url:l,data:"param="+encodeURIComponent(i)+"&name="+encodeURIComponent(a(this).attr("name")),success:function(c){"y"===a.trim(c.status)?(m[0].validform_valid="true",m.attr("sucmsg",c.info),h.util.showmsg.call(b,m.attr("sucmsg")||b.data("tipmsg").r||g.r,f.tiptype,{obj:m,type:2,sweep:f.tipSweep},"bycheck"),k.removeClass("Validform_error"),d=null,"postform"==m[0].validform_subpost&&b.trigger("submit")):(m[0].validform_valid=c.info,h.util.showmsg.call(b,c.info,f.tiptype,{obj:m,type:3,sweep:f.tipSweep}),k.addClass("Validform_error")),k[0].validform_ajax=null},error:function(a){if("200"==a.status)return"y"==a.responseText?n.success({status:"y"}):n.success({status:"n",info:a.responseText}),!1;if("abort"!==a.statusText){var c="status: "+a.status+"; statusText: "+a.statusText;h.util.showmsg.call(b,c,f.tiptype,{obj:m,type:3,sweep:f.tipSweep}),k.addClass("Validform_error")}return m[0].validform_valid=a.statusText,k[0].validform_ajax=null,!0}},n.success&&(p=n.success,n.success=function(a){o.success(a),p(a,m)}),n.error&&(q=n.error,n.error=function(a){o.error(a)&&q(a,m)}),n=a.extend({},o,n,{dataType:"json"}),k[0].validform_ajax=a.ajax(n),"ajax"))):(h.util.abort.call(k[0]),e||(h.util.showmsg.call(b,j.info,f.tiptype,{obj:a(this),type:j.type,sweep:f.tipSweep},"bycheck"),!f.tipSweep&&k.addClass("Validform_error")),!1)):j.passed?!0:!1)},submitForm:function(b,c,e,f,i){var k,m,l,n,o,p,q,r,j=this;if("posting"===j[0].validform_status)return!1;if(b.postonce&&"posted"===j[0].validform_status)return!1;if(k=b.beforeCheck&&b.beforeCheck(j),k===!1)return!1;if(l=!0,j.find("[datatype]").each(function(){var f,e,i;if(c)return!1;if(b.ignoreHidden&&a(this).is(":hidden")||"dataIgnore"===a(this).data("dataIgnore"))return!0;if(e=h.util.getValue.call(j,a(this)),d=f=a(this),m=h.util.regcheck.call(j,a(this).attr("datatype"),e,a(this)),!m.passed)return h.util.showmsg.call(j,m.info,b.tiptype,{obj:a(this),type:m.type,sweep:b.tipSweep}),f.addClass("Validform_error"),b.showAllError?(l&&(l=!1),!0):(f.focus(),l=!1,!1);if(a(this).attr("ajaxurl")&&!h.util.isEmpty.call(a(this),e)){if("true"!==this.validform_valid)return i=a(this),h.util.showmsg.call(j,j.data("tipmsg").v||g.v,b.tiptype,{obj:i,type:3,sweep:b.tipSweep}),f.addClass("Validform_error"),i.trigger("blur",["postform"]),b.showAllError?(l&&(l=!1),!0):(l=!1,!1)}else a(this).attr("ajaxurl")&&h.util.isEmpty.call(a(this),e)&&(h.util.abort.call(this),this.validform_valid="true");h.util.showmsg.call(j,m.info,b.tiptype,{obj:a(this),type:m.type,sweep:b.tipSweep}),f.removeClass("Validform_error"),d=null}),b.showAllError&&j.find(".Validform_error:first").focus(),l){if(n=b.beforeSubmit&&b.beforeSubmit(j),n===!1)return!1;if(j[0].validform_status="posting",!b.ajaxPost&&"ajaxPost"!==f)return b.postonce||(j[0].validform_status="normal"),e=e||b.url,e&&j.attr("action",e),b.callback&&b.callback(j);o=a.extend(!0,{},b.ajaxpost||{}),o.url=e||o.url||b.url||j.attr("action"),h.util.showmsg.call(j,j.data("tipmsg").p||g.p,b.tiptype,{obj:j,type:1,sweep:b.tipSweep},"byajax"),i?o.async=!1:i===!1&&(o.async=!0),o.success&&(p=o.success,o.success=function(c){b.callback&&b.callback(c),j[0].validform_ajax=null,j[0].validform_status="y"===a.trim(c.status)?"posted":"normal",p(c,j)}),o.error&&(q=o.error,o.error=function(a){b.callback&&b.callback(a),j[0].validform_status="normal",j[0].validform_ajax=null,q(a,j)}),r={type:"POST",async:!0,data:j.serializeArray(),success:function(c){"y"===a.trim(c.status)?(j[0].validform_status="posted",h.util.showmsg.call(j,c.info,b.tiptype,{obj:j,type:2,sweep:b.tipSweep},"byajax")):(j[0].validform_status="normal",h.util.showmsg.call(j,c.info,b.tiptype,{obj:j,type:3,sweep:b.tipSweep},"byajax")),b.callback&&b.callback(c),j[0].validform_ajax=null},error:function(a){var c="status: "+a.status+"; statusText: "+a.statusText;h.util.showmsg.call(j,c,b.tiptype,{obj:j,type:3,sweep:b.tipSweep},"byajax"),b.callback&&b.callback(a),j[0].validform_status="normal",j[0].validform_ajax=null}},o=a.extend({},r,o,{dataType:"json"}),j[0].validform_ajax=a.ajax(o)}return!1},resetForm:function(){var a=this;a.each(function(){this.reset&&this.reset(),this.validform_status="normal"}),a.find(".Validform_right").text(""),a.find(".passwordStrength").children().removeClass("bgStrength"),a.find(".Validform_checktip").removeClass("Validform_wrong Validform_right Validform_loading"),a.find(".Validform_error").removeClass("Validform_error"),a.find("[datatype]").removeData("cked").removeData("dataIgnore").each(function(){this.validform_lastval=null}),a.eq(0).find("input:first").focus()},abort:function(){this.validform_ajax&&this.validform_ajax.abort()}},a.Datatype=h.util.dataType,h.prototype={dataType:h.util.dataType,eq:function(b){var c=this;return b>=c.forms.length?null:(b in c.objects||(c.objects[b]=new h(a(c.forms[b]).get(),{},!0)),c.objects[b])},resetStatus:function(){var b=this;return a(b.forms).each(function(){this.validform_status="normal"}),this},setStatus:function(b){var c=this;return a(c.forms).each(function(){this.validform_status=b||"posting"}),this},getStatus:function(){var b=this,c=a(b.forms)[0].validform_status;return c},ignore:function(b){var c=this;return b=b||"[datatype]",a(c.forms).find(b).each(function(){a(this).data("dataIgnore","dataIgnore").removeClass("Validform_error")}),this},unignore:function(b){var c=this;return b=b||"[datatype]",a(c.forms).find(b).each(function(){a(this).removeData("dataIgnore")}),this},addRule:function(b){var d,e,f,c=this;for(b=b||[],d=0;d<b.length;d++){e=a(c.forms).find(b[d].ele);for(f in b[d])"ele"!==f&&e.attr(f,b[d][f])}return a(c.forms).each(function(){var b=a(this);h.util.enhance.call(b,this.settings.tiptype,this.settings.usePlugin,this.settings.tipSweep,"addRule")}),this},ajaxPost:function(b,c,d){var e=this;return a(e.forms).each(function(){(1==this.settings.tiptype||2==this.settings.tiptype||3==this.settings.tiptype)&&j(),h.util.submitForm.call(a(e.forms[0]),this.settings,b,d,"ajaxPost",c)}),this},submitForm:function(b,d){var e=this;return a(e.forms).each(function(){var e=h.util.submitForm.call(a(this),this.settings,b,d);e===c&&(e=!0),e===!0&&this.submit()}),this},resetForm:function(){var b=this;return h.util.resetForm.call(a(b.forms)),this},abort:function(){var b=this;return a(b.forms).each(function(){h.util.abort.call(this)}),this},check:function(b,c){var c=c||"[datatype]",d=this,e=a(d.forms),f=!0;return e.find(c).each(function(){h.util.check.call(this,e,"",b)||(f=!1)}),f},config:function(b){var c=this;return b=b||{},a(c.forms).each(function(){var c=a(this);this.settings=a.extend(!0,this.settings,b),h.util.enhance.call(c,this.settings.tiptype,this.settings.usePlugin,this.settings.tipSweep)}),this}},a.fn.Validform=function(a){return new h(this,a)},a.Showmsg=function(b){return(b=a.trim(b))?(layer.msg(b,{icon:2}),void 0):!1},a.Hidemsg=function(){e.hide(),f=!0}}(jQuery,window);

/*<script src="${ctxStatic}/org/tinygroup/form/js/jquery.form.js"></script>*/
!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):a("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function(a){"use strict";function d(b){var c=b.data;b.isDefaultPrevented()||(b.preventDefault(),a(b.target).ajaxSubmit(c))}function e(b){var e,f,g,c=b.target,d=a(c);if(!d.is("[type=submit],[type=image]")){if(e=d.closest("[type=submit]"),0===e.length)return;c=e[0]}f=this,f.clk=c,"image"==c.type&&(void 0!==b.offsetX?(f.clk_x=b.offsetX,f.clk_y=b.offsetY):"function"==typeof a.fn.offset?(g=d.offset(),f.clk_x=b.pageX-g.left,f.clk_y=b.pageY-g.top):(f.clk_x=b.pageX-c.offsetLeft,f.clk_y=b.pageY-c.offsetTop)),setTimeout(function(){f.clk=f.clk_x=f.clk_y=null},100)}function f(){if(a.fn.ajaxSubmit.debug){var b="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(b):window.opera&&window.opera.postError&&window.opera.postError(b)}}var c,b={};b.fileapi=void 0!==a("<input type='file'/>").get(0).files,b.formdata=void 0!==window.FormData,c=!!a.fn.prop,a.fn.attr2=function(){if(!c)return this.attr.apply(this,arguments);var a=this.prop.apply(this,arguments);return a&&a.jquery||"string"==typeof a?a:this.attr.apply(this,arguments)},a.fn.ajaxSubmit=function(d){function B(b){var g,h,c=a.param(b,d.traditional).split("&"),e=c.length,f=[];for(g=0;e>g;g++)c[g]=c[g].replace(/\+/g," "),h=c[g].split("="),f.push([decodeURIComponent(h[0]),decodeURIComponent(h[1])]);return f}function C(b){var f,g,h,i,c=new FormData;for(f=0;f<b.length;f++)c.append(b[f].name,b[f].value);if(d.extraData)for(g=B(d.extraData),f=0;f<g.length;f++)g[f]&&c.append(g[f][0],g[f][1]);return d.data=null,h=a.extend(!0,{},a.ajaxSettings,d,{contentType:!1,processData:!1,cache:!1,type:e||"POST"}),d.uploadProgress&&(h.xhr=function(){var b=a.ajaxSettings.xhr();return b.upload&&b.upload.addEventListener("progress",function(a){var b=0,c=a.loaded||a.position,e=a.total;a.lengthComputable&&(b=Math.ceil(100*(c/e))),d.uploadProgress(a,c,e,b)},!1),b}),h.data=null,i=h.beforeSend,h.beforeSend=function(a,b){b.data=d.formData?d.formData:c,i&&i.call(this,a,b)},a.ajax(h)}function D(b){function y(a){var b=null;try{a.contentWindow&&(b=a.contentWindow.document)}catch(c){f("cannot get iframe.contentWindow document: "+c)}if(b)return b;try{b=a.contentDocument?a.contentDocument:a.document}catch(c){f("cannot get iframe.contentDocument: "+c),b=a.document}return b}function B(){function j(){try{var a=y(p).readyState;f("state = "+a),a&&"uninitialized"==a.toLowerCase()&&setTimeout(j,50)}catch(b){f("Server abort: ",b," (",b.name,")"),G(x),u&&clearTimeout(u),u=void 0}}var l,m,r,b=i.attr2("target"),c=i.attr2("action"),d="multipart/form-data",h=i.attr("enctype")||i.attr("encoding")||d;g.setAttribute("target",n),(!e||/post/i.test(e))&&g.setAttribute("method","POST"),c!=k.url&&g.setAttribute("action",k.url),k.skipEncodingOverride||e&&!/post/i.test(e)||i.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),k.timeout&&(u=setTimeout(function(){t=!0,G(w)},k.timeout)),l=[];try{if(k.extraData)for(m in k.extraData)k.extraData.hasOwnProperty(m)&&(a.isPlainObject(k.extraData[m])&&k.extraData[m].hasOwnProperty("name")&&k.extraData[m].hasOwnProperty("value")?l.push(a('<input type="hidden" name="'+k.extraData[m].name+'">').val(k.extraData[m].value).appendTo(g)[0]):l.push(a('<input type="hidden" name="'+m+'">').val(k.extraData[m]).appendTo(g)[0]));k.iframeTarget||o.appendTo("body"),p.attachEvent?p.attachEvent("onload",G):p.addEventListener("load",G,!1),setTimeout(j,15);try{g.submit()}catch(q){r=document.createElement("form").submit,r.apply(g)}}finally{g.setAttribute("action",c),g.setAttribute("enctype",h),b?g.setAttribute("target",b):i.removeAttr("target"),a(l).remove()}}function G(b){var d,c,e,g,h,i,j,l,n;if(!q.aborted&&!F){if(D=y(p),D||(f("cannot access response document"),b=x),b===w&&q)return q.abort("timeout"),v.reject(q,"timeout"),void 0;if(b==x&&q)return q.abort("server abort"),v.reject(q,"error","server abort"),void 0;if(D&&D.location.href!=k.iframeSrc||t){p.detachEvent?p.detachEvent("onload",G):p.removeEventListener("load",G,!1),c="success";try{if(t)throw"timeout";if(e="xml"==k.dataType||D.XMLDocument||a.isXMLDoc(D),f("isXml="+e),!e&&window.opera&&(null===D.body||!D.body.innerHTML)&&--E)return f("requeing onLoad callback, DOM not available"),setTimeout(G,250),void 0;g=D.body?D.body:D.documentElement,q.responseText=g?g.innerHTML:null,q.responseXML=D.XMLDocument?D.XMLDocument:D,e&&(k.dataType="xml"),q.getResponseHeader=function(a){var b={"content-type":k.dataType};return b[a.toLowerCase()]},g&&(q.status=Number(g.getAttribute("status"))||q.status,q.statusText=g.getAttribute("statusText")||q.statusText),h=(k.dataType||"").toLowerCase(),i=/(json|script|text)/.test(h),i||k.textarea?(j=D.getElementsByTagName("textarea")[0],j?(q.responseText=j.value,q.status=Number(j.getAttribute("status"))||q.status,q.statusText=j.getAttribute("statusText")||q.statusText):i&&(l=D.getElementsByTagName("pre")[0],n=D.getElementsByTagName("body")[0],l?q.responseText=l.textContent?l.textContent:l.innerText:n&&(q.responseText=n.textContent?n.textContent:n.innerText))):"xml"==h&&!q.responseXML&&q.responseText&&(q.responseXML=H(q.responseText));try{C=J(q,h,k)}catch(r){c="parsererror",q.error=d=r||c}}catch(r){f("error caught: ",r),c="error",q.error=d=r||c}q.aborted&&(f("upload aborted"),c=null),q.status&&(c=q.status>=200&&q.status<300||304===q.status?"success":"error"),"success"===c?(k.success&&k.success.call(k.context,C,"success",q),v.resolve(q.responseText,"success",q),m&&a.event.trigger("ajaxSuccess",[q,k])):c&&(void 0===d&&(d=q.statusText),k.error&&k.error.call(k.context,q,c,d),v.reject(q,"error",d),m&&a.event.trigger("ajaxError",[q,k,d])),m&&a.event.trigger("ajaxComplete",[q,k]),m&&!--a.active&&a.event.trigger("ajaxStop"),k.complete&&k.complete.call(k.context,q,c),F=!0,k.timeout&&clearTimeout(u),setTimeout(function(){k.iframeTarget?o.attr("src",k.iframeSrc):o.remove(),q.responseXML=null},100)}}}var h,j,k,m,n,o,p,q,r,s,t,u,w,x,z,A,C,D,F,E,H,I,J,g=i[0],v=a.Deferred();if(v.abort=function(a){q.abort(a)},b)for(j=0;j<l.length;j++)h=a(l[j]),c?h.prop("disabled",!1):h.removeAttr("disabled");return k=a.extend(!0,{},a.ajaxSettings,d),k.context=k.context||k,n="jqFormIO"+(new Date).getTime(),k.iframeTarget?(o=a(k.iframeTarget),s=o.attr2("name"),s?n=s:o.attr2("name",n)):(o=a('<iframe name="'+n+'" src="'+k.iframeSrc+'" />'),o.css({position:"absolute",top:"-1000px",left:"-1000px"})),p=o[0],q={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(b){var c="timeout"===b?"timeout":"aborted";f("aborting upload... "+c),this.aborted=1;try{p.contentWindow.document.execCommand&&p.contentWindow.document.execCommand("Stop")}catch(d){}o.attr("src",k.iframeSrc),q.error=c,k.error&&k.error.call(k.context,q,c,b),m&&a.event.trigger("ajaxError",[q,k,c]),k.complete&&k.complete.call(k.context,q,c)}},m=k.global,m&&0===a.active++&&a.event.trigger("ajaxStart"),m&&a.event.trigger("ajaxSend",[q,k]),k.beforeSend&&k.beforeSend.call(k.context,q,k)===!1?(k.global&&a.active--,v.reject(),v):q.aborted?(v.reject(),v):(r=g.clk,r&&(s=r.name,s&&!r.disabled&&(k.extraData=k.extraData||{},k.extraData[s]=r.value,"image"==r.type&&(k.extraData[s+".x"]=g.clk_x,k.extraData[s+".y"]=g.clk_y))),w=1,x=2,z=a("meta[name=csrf-token]").attr("content"),A=a("meta[name=csrf-param]").attr("content"),A&&z&&(k.extraData=k.extraData||{},k.extraData[A]=z),k.forceSync?B():setTimeout(B,10),E=50,H=a.parseXML||function(a,b){return window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml"),b&&b.documentElement&&"parsererror"!=b.documentElement.nodeName?b:null},I=a.parseJSON||function(a){return window["eval"]("("+a+")")},J=function(b,c,d){var e=b.getResponseHeader("content-type")||"",f="xml"===c||!c&&e.indexOf("xml")>=0,g=f?b.responseXML:b.responseText;return f&&"parsererror"===g.documentElement.nodeName&&a.error&&a.error("parsererror"),d&&d.dataFilter&&(g=d.dataFilter(g,c)),"string"==typeof g&&("json"===c||!c&&e.indexOf("json")>=0?g=I(g):("script"===c||!c&&e.indexOf("javascript")>=0)&&a.globalEval(g)),g},v)}var e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;if(!this.length)return f("ajaxSubmit: skipping submit process - no element selected"),this;if(i=this,"function"==typeof d?d={success:d}:void 0===d&&(d={}),e=d.type||this.attr2("method"),g=d.url||this.attr2("action"),h="string"==typeof g?a.trim(g):"",h=h||window.location.href||"",h&&(h=(h.match(/^([^#]+)/)||[])[1]),d=a.extend(!0,{url:h,success:a.ajaxSettings.success,type:e||a.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},d),j={},this.trigger("form-pre-serialize",[this,d,j]),j.veto)return f("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(d.beforeSerialize&&d.beforeSerialize(this,d)===!1)return f("ajaxSubmit: submit aborted via beforeSerialize callback"),this;if(k=d.traditional,void 0===k&&(k=a.ajaxSettings.traditional),l=[],n=this.formToArray(d.semantic,l),d.data&&(d.extraData=d.data,m=a.param(d.data,k)),d.beforeSubmit&&d.beforeSubmit(n,this,d)===!1)return f("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[n,this,d,j]),j.veto)return f("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;for(o=a.param(n,k),m&&(o=o?o+"&"+m:m),"GET"==d.type.toUpperCase()?(d.url+=(d.url.indexOf("?")>=0?"&":"?")+o,d.data=null):d.data=o,p=[],d.resetForm&&p.push(function(){i.resetForm()}),d.clearForm&&p.push(function(){i.clearForm(d.includeHidden)}),!d.dataType&&d.target?(q=d.success||function(){},p.push(function(b){var c=d.replaceTarget?"replaceWith":"html";a(d.target)[c](b).each(q,arguments)})):d.success&&p.push(d.success),d.success=function(a,b,c){var f,g,e=d.context||this;for(f=0,g=p.length;g>f;f++)p[f].apply(e,[a,b,c||i,i])},d.error&&(r=d.error,d.error=function(a,b,c){var e=d.context||this;r.apply(e,[a,b,c,i])}),d.complete&&(s=d.complete,d.complete=function(a,b){var c=d.context||this;s.apply(c,[a,b,i])}),t=a("input[type=file]:enabled",this).filter(function(){return""!==a(this).val()}),u=t.length>0,v="multipart/form-data",w=i.attr("enctype")==v||i.attr("encoding")==v,x=b.fileapi&&b.formdata,f("fileAPI :"+x),y=(u||w)&&!x,d.iframe!==!1&&(d.iframe||y)?d.closeKeepAlive?a.get(d.closeKeepAlive,function(){z=D(n)}):z=D(n):z=(u||w)&&x?C(n):a.ajax(d),i.removeData("jqxhr").data("jqxhr",z),A=0;A<l.length;A++)l[A]=null;return this.trigger("form-submit-notify",[this,d]),this},a.fn.ajaxForm=function(b){if(b=b||{},b.delegation=b.delegation&&a.isFunction(a.fn.on),!b.delegation&&0===this.length){var c={s:this.selector,c:this.context};return!a.isReady&&c.s?(f("DOM not ready, queuing ajaxForm"),a(function(){a(c.s,c.c).ajaxForm(b)}),this):(f("terminating; zero elements found by selector"+(a.isReady?"":" (DOM not ready)")),this)}return b.delegation?(a(document).off("submit.form-plugin",this.selector,d).off("click.form-plugin",this.selector,e).on("submit.form-plugin",this.selector,b,d).on("click.form-plugin",this.selector,b,e),this):this.ajaxFormUnbind().bind("submit.form-plugin",b,d).bind("click.form-plugin",b,e)},a.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},a.fn.formToArray=function(c,d){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,e=[];if(0===this.length)return e;if(f=this[0],g=this.attr("id"),h=c?f.getElementsByTagName("*"):f.elements,h&&!/MSIE [678]/.test(navigator.userAgent)&&(h=a(h).get()),g&&(i=a(':input[form="'+g+'"]').get(),i.length&&(h=(h||[]).concat(i))),!h||!h.length)return e;for(j=0,o=h.length;o>j;j++)if(n=h[j],l=n.name,l&&!n.disabled)if(c&&f.clk&&"image"==n.type)f.clk==n&&(e.push({name:l,value:a(n).val(),type:n.type}),e.push({name:l+".x",value:f.clk_x},{name:l+".y",value:f.clk_y}));else if(m=a.fieldValue(n,!0),m&&m.constructor==Array)for(d&&d.push(n),k=0,p=m.length;p>k;k++)e.push({name:l,value:m[k]});else if(b.fileapi&&"file"==n.type)if(d&&d.push(n),q=n.files,q.length)for(k=0;k<q.length;k++)e.push({name:l,value:q[k],type:n.type});else e.push({name:l,value:"",type:n.type});else null!==m&&"undefined"!=typeof m&&(d&&d.push(n),e.push({name:l,value:m,type:n.type,required:n.required}));return!c&&f.clk&&(r=a(f.clk),s=r[0],l=s.name,l&&!s.disabled&&"image"==s.type&&(e.push({name:l,value:r.val()}),e.push({name:l+".x",value:f.clk_x},{name:l+".y",value:f.clk_y}))),e},a.fn.formSerialize=function(b){return a.param(this.formToArray(b))},a.fn.fieldSerialize=function(b){var c=[];return this.each(function(){var e,f,g,d=this.name;if(d)if(e=a.fieldValue(this,b),e&&e.constructor==Array)for(f=0,g=e.length;g>f;f++)c.push({name:d,value:e[f]});else null!==e&&"undefined"!=typeof e&&c.push({name:this.name,value:e})}),a.param(c)},a.fn.fieldValue=function(b){var c,d,e,f,g;for(c=[],d=0,e=this.length;e>d;d++)f=this[d],g=a.fieldValue(f,b),null===g||"undefined"==typeof g||g.constructor==Array&&!g.length||(g.constructor==Array?a.merge(c,g):c.push(g));return c},a.fieldValue=function(b,c){var g,h,i,j,k,l,m,n,d=b.name,e=b.type,f=b.tagName.toLowerCase();if(void 0===c&&(c=!0),c&&(!d||b.disabled||"reset"==e||"button"==e||("checkbox"==e||"radio"==e)&&!b.checked||("submit"==e||"image"==e)&&b.form&&b.form.clk!=b||"select"==f&&-1==b.selectedIndex))return null;if("select"==f){if(g=b.selectedIndex,0>g)return null;for(h=[],i=b.options,j="select-one"==e,k=j?g+1:i.length,l=j?g:0;k>l;l++)if(m=i[l],m.selected){if(n=m.value,n||(n=m.attributes&&m.attributes.value&&!m.attributes.value.specified?m.text:m.value),j)return n;h.push(n)}return h}return a(b).val()},a.fn.clearForm=function(b){return this.each(function(){a("input,select,textarea",this).clearFields(b)})},a.fn.clearFields=a.fn.clearInputs=function(b){var c=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var d=this.type,e=this.tagName.toLowerCase();c.test(d)||"textarea"==e?this.value="":"checkbox"==d||"radio"==d?this.checked=!1:"select"==e?this.selectedIndex=-1:"file"==d?/MSIE/.test(navigator.userAgent)?a(this).replaceWith(a(this).clone(!0)):a(this).val(""):b&&(b===!0&&/hidden/.test(d)||"string"==typeof b&&a(this).is(b))&&(this.value="")})},a.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},a.fn.enable=function(a){return void 0===a&&(a=!0),this.each(function(){this.disabled=!a})},a.fn.selected=function(b){return void 0===b&&(b=!0),this.each(function(){var d,c=this.type;"checkbox"==c||"radio"==c?this.checked=b:"option"==this.tagName.toLowerCase()&&(d=a(this).parent("select"),b&&d[0]&&"select-one"==d[0].type&&d.find("option").selected(!1),this.selected=b)})},a.fn.ajaxSubmit.debug=!1});

/*<script src="${ctxStatic}/org/tinygroup/form/js/jquery.icheck.min.js"></script>*/
(function(b){function m(a,b,d,c){var e=a[0],l=a.parent(),j=/disable|enable/.test(d)?"disabled":"checked",f="update"==d?{checked:e.checked,disabled:e.disabled}:e[j];if(/^check|disable/.test(d)&&!f)n(a,!0,l,j);else if(/uncheck|enable/.test(d)&&f)p(a,!0,l,j);else if("update"==d)for(j in f)f[j]?n(a,!1,l,j,c):p(a,!1,l,j,c);else b||(!0==d&&!e.disabled&&a.trigger("is.Clicked"),f?n(a,!0,l,j):p(a,!0,l,j))}function n(a,k,d,c,e){k&&(a[0][c]=!0);!0!==d.data(c)&&("checked"==c&&("radio"==a[0].type&&a[0].name)&&
b("input[name="+a[0].name+"]").each(function(){this!==a[0]&&b(this).data("icheck")&&p(b(this),!0,b(this).parent(),c)}),(k||e)&&a.trigger("is.Changed"),k&&a.trigger("is."+c.replace("di","Di").replace("ch","Ch")),d.data(c,!0).addClass(r(a,c)))}function p(a,b,d,c,e){var l="disabled"==c?"Enabled":"Unchecked";b&&(a[0][c]=!1);!1!==d.data(c)&&((b||e)&&a.trigger("is.Changed"),b&&a.trigger("is."+l),d.data(c,!1).removeClass(r(a,c)))}function u(a,k){if(a.data("icheck")){var d=a[0].id,c=b("label[for="+d+"]");
a.parent().html(a.attr("style",a.data("icheck").style||"").trigger(k||""));a.removeData("icheck").unbind(".df").unwrap();d&&c.length&&c.unbind(".df")}}function r(a,b){if(a.data("icheck"))return a.data("icheck").options[b+"Class"]}b.fn.iCheck=function(a){if(/^(check|uncheck|disable|enable|update|destroy)$/.test(a))return this.each(function(){/destroy/.test(a)?u(b(this),"is.Destroyed"):m(b(this),!0,a)});if("object"==typeof a||!a){var k=navigator.userAgent,d=b.extend({},{checkboxClass:"icheckbox",radioClass:"iradio",
checkedClass:"checked",disabledClass:"disabled",hoverClass:"hover",focusClass:"focus",activeClass:"active",labelHover:!0,labelHoverClass:"hover"},a),c=/^(checkbox|radio)$/.test(d.handle)?":"+d.handle:":checkbox, :radio",e=(""+d.increaseArea).replace("%","")|0;-50>e&&(e=-50);return this.each(function(){(b(this).is(c)?b(this):b(this).find(c)).each(function(){u(b(this));var a=this,c=a.id,f={position:"absolute",top:-e+"%",left:-e+"%",display:"block",width:100+2*e+"%",height:100+2*e+"%",margin:0,padding:0,
background:"#fff",border:0,opacity:0},r=/ipad|iphone|ipod|android|blackberry|windows phone|opera mini/i.test(k)?{position:"absolute",visibility:"hidden"}:e|0?f:{position:"absolute",opacity:0},w="checkbox"==a.type?d.checkboxClass:d.radioClass,h=b(this).data("icheck",{style:b(this).attr("style"),options:d}).css(r),q=b("label[for="+c+"]"),g=h.wrap('<div class="'+w+'"/>').trigger("is.Created").parent().append(d.insert),f=b("<ins/>").css(f).appendTo(g).click(function(){h.click();m(h,!1,!0)}),s=d.hoverClass,
t=d.labelHoverClass,v;!0==d.cursor&&f.css("cursor","pointer");!0==d.inheritClass&&g.addClass(a.className);!0==d.inheritID&&c&&g.attr("id","icheck-"+c);"static"==g.css("position")&&g.css("position","relative");m(h,!0,"update");c&&q.length&&q.bind("click.df mouseenter.df mouseleave.df touchbegin.df touchend.df",function(c){var e=c.type,f=b(this);"click"==e?(c.preventDefault(),h.click(),m(h,!1,!0)):!0==d.labelHover&&!a.disabled&&(/mouseenter|touchbegin/.test(e)?(g.addClass(s),f.addClass(t)):(g.removeClass(s),
f.removeClass(t)))});h.bind("focus.df blur.df keyup.df keydown.df keypress.df",function(c){var b=c.type,e=c.keyCode||c.charCode||c.which;c=/MSIE [5-8]/.test(k)?"keyup"==b&&"keypress"!==v:"keyup"==b;e="keypress"==b&&32==e;/focus|blur/.test(b)?"focus"==b?g.addClass(d.focusClass):g.removeClass(d.focusClass):"radio"==a.type?(c?m(h,!0,"update",!0):e&&!a.checked&&n(h,!1,g,"checked",!0),v=b):"checkbox"==a.type&&e&&(a.checked?p(h,!1,g,"checked",!0):n(h,!1,g,"checked",!0))});f.bind("mousedown mouseup mouseout mouseenter mouseleave touchbegin touchend",
function(b){b=b.type;var e=/mousedown|mouseup|mouseout/.test(b)?d.activeClass:s;a.disabled||(/mousedown|mouseenter|touchbegin/.test(b)?g.addClass(e):g.removeClass(e),c&&(q.length&&!0==d.labelHover&&e==s)&&(/mouseleave|touchend/.test(b)?q.removeClass(t):q.addClass(t)))})})})}return this}})(jQuery);

/*<script src="${ctxStatic}/org/tinygroup/form/js/ajaxfileupload.js"></script>*/
jQuery.extend({createUploadIframe:function(a,b){var c="jUploadFrame"+a,d='<iframe id="'+c+'" name="'+c+'" style="position:absolute; top:-9999px; left:-9999px"';return window.ActiveXObject&&("boolean"==typeof b?d+=' src="javascript:false"':"string"==typeof b&&(d+=' src="'+b+'"')),d+=" />",jQuery(d).appendTo(document.body),jQuery("#"+c).get(0)},createUploadForm:function(a,b,c){var d="jUploadForm"+a,e="jUploadFile"+a,f=jQuery('<form  action="" method="POST" name="'+d+'" id="'+d+'" enctype="multipart/form-data"></form>'),g=jQuery("#"+b),h=jQuery(g).clone();return jQuery(g).attr("id",e),jQuery(g).before(h),jQuery(g).appendTo(f),"undefined"!=typeof c&&$.each(c,function(a,b){$("<input type='hidden' name='"+a+"' value='"+b+"'/>").appendTo(f)}),jQuery(f).css("position","absolute"),jQuery(f).css("top","-1200px"),jQuery(f).css("left","-1200px"),jQuery(f).appendTo("body"),f},ajaxFileUpload:function(a){var b,c,e,f,g,h,i;a=jQuery.extend({},jQuery.ajaxSettings,a),b=(new Date).getTime(),c=jQuery.createUploadForm(b,a.fileElementId,a.data),jQuery.createUploadIframe(b,a.secureuri),e="jUploadFrame"+b,f="jUploadForm"+b,a.global&&!jQuery.active++&&jQuery.event.trigger("ajaxStart"),g=!1,h={},a.global&&jQuery.event.trigger("ajaxSend",[h,a]),i=function(b){var i,j,d=document.getElementById(e);try{d.contentWindow?(h.responseText=d.contentWindow.document.body?d.contentWindow.document.body.innerHTML:null,h.responseXML=d.contentWindow.document.XMLDocument?d.contentWindow.document.XMLDocument:d.contentWindow.document):d.contentDocument&&(h.responseText=d.contentDocument.document.body?d.contentDocument.document.body.innerHTML:null,h.responseXML=d.contentDocument.document.XMLDocument?d.contentDocument.document.XMLDocument:d.contentDocument.document)}catch(f){jQuery.handleError(a,h,null,f)}if(h||"timeout"==b){g=!0;try{i="timeout"!=b?"success":"error","error"!=i?(j=jQuery.uploadHttpData(h,a.dataType),a.success&&a.success(j,i),a.global&&jQuery.event.trigger("ajaxSuccess",[h,a])):jQuery.handleError(a,h,i)}catch(f){i="error",jQuery.handleError(a,h,i,f)}a.global&&jQuery.event.trigger("ajaxComplete",[h,a]),a.global&&!--jQuery.active&&jQuery.event.trigger("ajaxStop"),a.complete&&a.complete(h,i),jQuery(d).unbind(),setTimeout(function(){try{jQuery(d).remove(),jQuery(c).remove()}catch(b){jQuery.handleError(a,h,null,b)}},100),h=null}},a.timeout>0&&setTimeout(function(){g||i("timeout")},a.timeout);try{c=jQuery("#"+f),jQuery(c).attr("action",a.url),jQuery(c).attr("method","POST"),jQuery(c).attr("target",e),c.encoding?jQuery(c).attr("encoding","multipart/form-data"):jQuery(c).attr("enctype","multipart/form-data"),jQuery(c).submit()}catch(j){jQuery.handleError(a,h,null,j)}return jQuery("#"+e).load(i),{abort:function(){}}},uploadHttpData:function(r,type){var data=!type;return data="xml"==type||data?r.responseXML:r.responseText,"script"==type&&jQuery.globalEval(data),"json"==type&&eval("data = "+data),data},handleError:function(a,b,c,d){a.error&&a.error.call(a.context||a,b,c,d),a.global&&(a.context?jQuery(a.context):jQuery.event).trigger("ajaxError",[b,a,d])}});

/*<script src="${ctxStatic}/org/tinygroup/form/js/jquery.queryFor.js"></script>*/
!function(a){a.fn.queryFor=function(b){var e,f,c=[],d=a(this).attr("name");return d||(d=a(this).attr("id")),d||(d=a(this).attr("action")),b=a(b),e=function(){var b=window.localStorage.getItem(d);b&&(c=a.parseJSON(b))},this.list=function(){return c},f=function(){b.html('<option value="none">**查询历史**</option>');for(var d=0,e=c.length;e>d;d++)c[d]&&c[d]["text"]&&b.append(a("<option>").attr("value",d).html(c[d].text))},this.add=function(a,b){c.push({text:a,value:b}),window.localStorage.setItem(d,JSON.stringify(c)),f()},this.getVal=function(a){return c?c[a]["value"]:0},this.del=function(a){c[a]&&(delete c[a],window.localStorage.setItem(d,JSON.stringify(c)),f())},this.clear=function(){window.localStorage.setItem(d,JSON.stringify(c))},e(),f(),this}}(jQuery);

/*<script src="${ctxStatic}/org/tinygroup/pjax/js/jquery.pjax.js"></script>*/
!function(a){function b(b,d,e){var f=this;return this.on("click.pjax",b,function(b){var g=a.extend({},s(d,e));g.container||(g.container=a(this).attr("data-pjax")||f),c(b,g)})}function c(b,c,d){var f,g,h,i;if(d=s(c,d),f=b.currentTarget,"A"!==f.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";b.which>1||b.metaKey||b.ctrlKey||b.shiftKey||b.altKey||location.protocol===f.protocol&&location.hostname===f.hostname&&(f.href.indexOf("#")>-1&&r(f)==r(location)||b.isDefaultPrevented()||(g={url:f.href,container:a(f).attr("data-pjax"),target:f},h=a.extend({},g,d),i=a.Event("pjax:click"),a(f).trigger(i,[h]),i.isDefaultPrevented()||(e(h),b.preventDefault(),a(f).trigger("pjax:clicked",[h]))))}function d(b,c,d){var f,g,h;if(d=s(c,d),f=b.currentTarget,g=a(f),"FORM"!==f.tagName.toUpperCase())throw"$.pjax.submit requires a form element";if(h={type:(g.attr("method")||"GET").toUpperCase(),url:g.attr("action"),container:g.attr("data-pjax"),target:f},"GET"!==h.type&&void 0!==window.FormData)h.data=new FormData(f),h.processData=!1,h.contentType=!1;else{if(a(f).find(":file").length)return;h.data=a(f).serializeArray()}e(a.extend({},h,d)),b.preventDefault()}function e(b){function h(b,d,e){e||(e={}),e.relatedTarget=c;var g=a.Event(b,e);return f.trigger(g,d),!g.isDefaultPrevented()}var c,d,f,i,j;return a.cookie("lasturl",window.location.pathname,{path:contextPath+"/"}),b=a.extend(!0,{},a.ajaxSettings,e.defaults,b),a.isFunction(b.url)&&(b.url=b.url()),c=b.target,d=q(b.url,b.replaceStr).hash,f=b.context=t(b.container),b.data||(b.data={}),a.isArray(b.data)?b.data.push({name:"_pjax",value:f.selector}):b.data._pjax=f.selector,b.beforeSend=function(c,e){if("GET"!==e.type&&(e.timeout=0),c.setRequestHeader("X-PJAX","true"),c.setRequestHeader("X-PJAX-Container",f.selector),a("body").trigger("click"),!h("pjax:beforeSend",[c,e]))return!1;e.timeout>0&&(i=setTimeout(function(){h("pjax:timeout",[c,b])&&c.abort("timeout")},e.timeout),e.timeout=0);var g=q(e.url,b.replaceStr);d&&(g.hash=d),b.requestUrl=p(g)},b.complete=function(a,c){i&&clearTimeout(i),h("pjax:complete",[a,c,b]),h("pjax:end",[a,b])},b.error=function(a,c,d){var e=w("",a,b),f=h("pjax:error",[a,c,d,b]);"GET"==b.type&&"abort"!==c&&f&&g(e.url)},b.success=function(c,i,j){var r,t,u,v,y,k=e.state,l="function"==typeof a.pjax.defaults.version?a.pjax.defaults.version():a.pjax.defaults.version,m=j.getResponseHeader("X-PJAX-Version"),o=w(c,j,b),p=q(o.url,b.replaceStr);if(d&&(p.hash=d,o.url=p.href),l&&m&&l!==m)return g(o.url),void 0;if(!o.contents)return g(o.url),void 0;if(e.state={id:b.id||n(),url:o.url,title:o.title,container:f.selector,fragment:b.fragment,timeout:b.timeout},(b.push||b.replace)&&window.history.replaceState(e.state,o.title,o.url),r=a.contains(b.container,document.activeElement))try{document.activeElement.blur()}catch(s){}o.title&&(document.title=o.title),h("pjax:beforeReplace",[o.contents,b],{state:e.state,previousState:k}),f.html(o.contents),t=f.find("input[autofocus], textarea[autofocus]").last()[0],t&&document.activeElement!==t&&t.focus(),x(o.scripts),u=b.scrollTo,d&&(v=decodeURIComponent(d.slice(1)),y=document.getElementById(v)||document.getElementsByName(v)[0],y&&(u=a(y).offset().top)),"number"==typeof u&&a(window).scrollTop(u),h("pjax:success",[c,i,j,b])},e.state||(e.state={id:n(),url:window.location.href,title:document.title,container:f.selector,fragment:b.fragment,timeout:b.timeout},window.history.replaceState(e.state,document.title)),m(e.xhr),e.options=b,j=e.xhr=a.ajax(b),j.readyState>0&&(b.push&&!b.replace&&(B(e.state.id,o(f)),window.history.pushState(null,"",b.requestUrl)),h("pjax:start",[j,b]),h("pjax:send",[j,b])),e.xhr}function f(b,c){var d={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return e(a.extend(d,s(b,c)))}function g(a){window.history.replaceState(null,"",e.state.url),window.location.replace(a)}function k(b){var c,d,f,j,k,l,n,p,q;if(h||m(e.xhr),c=e.state,d=b.state,d&&d.container){if(h&&i==d.url)return;if(c){if(c.id===d.id)return;f=c.id<d.id?"forward":"back"}j=y[d.id]||[],k=a(j[0]||d.container),l=j[1],k.length?(c&&C(f,c.id,o(k)),n=a.Event("pjax:popstate",{state:d,direction:f}),k.trigger(n),p={id:d.id,url:d.url,container:k,push:!1,fragment:d.fragment,timeout:d.timeout,scrollTo:!1},l?(k.trigger("pjax:start",[null,p]),e.state=d,d.title&&(document.title=d.title),q=a.Event("pjax:beforeReplace",{state:d,previousState:c}),k.trigger(q,[l,p]),k.html(l),k.trigger("pjax:end",[null,p])):e(p),k[0].offsetHeight):g(location.href)}h=!1}function l(b){var f,g,c=a.isFunction(b.url)?b.url():b.url,d=b.type?b.type.toUpperCase():"GET",e=a("<form>",{method:"GET"===d?"GET":"POST",action:c,style:"display:none"});if("GET"!==d&&"POST"!==d&&e.append(a("<input>",{type:"hidden",name:"_method",value:d.toLowerCase()})),f=b.data,"string"==typeof f)a.each(f.split("&"),function(b,c){var d=c.split("=");e.append(a("<input>",{type:"hidden",name:d[0],value:d[1]}))});else if(a.isArray(f))a.each(f,function(b,c){e.append(a("<input>",{type:"hidden",name:c.name,value:c.value}))});else if("object"==typeof f)for(g in f)e.append(a("<input>",{type:"hidden",name:g,value:f[g]}));a(document.body).append(e),e.submit()}function m(b){b&&b.readyState<4&&(b.onreadystatechange=a.noop,b.abort())}function n(){return(new Date).getTime()}function o(a){var b=a.clone();return b.find("script").each(function(){this.src||jQuery._data(this,"globalEval",!1)}),[a.selector,b.contents()]}function p(a){return a.search=a.search.replace(/([?&])(_pjax|_)=[^&]*/g,""),a.href.replace(/\?($|#)/,"$1")}function q(a,b){var c=document.createElement("a");return"undefined"==typeof b&&(b=".page"),c.href=a.replace(/\.pagelet/,b).replace(/\.servicepagelet/,b).replace(/viewLayer=[0-9]*/,""),c}function r(a){return a.href.replace(/#.*/,"")}function s(b,c){return b&&c?c.container=b:c=a.isPlainObject(b)?b:{container:b},c.container&&(c.container=t(c.container)),c}function t(b){if(b=a(b),b.length){if(""!==b.selector&&b.context===document)return b;if(b.attr("id"))return a("#"+b.attr("id"));throw"cant get selector for pjax container!"}throw"no pjax container for "+b.selector}function u(a,b){return a.filter(b).add(a.find(b))}function v(b){return a.parseHTML(b,document,!0)}function w(b,c,d){var h,i,j,e={},f=/<html/i.test(b),g=c.getResponseHeader("X-PJAX-URL");return e.url=g?p(q(g,d.replaceStr)):d.requestUrl,f?(h=a(v(b.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0])),i=a(v(b.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]))):h=i=a(v(b)),0===i.length?e:(e.title=u(h,"title").last().text(),d.fragment?(j="body"===d.fragment?i:u(i,d.fragment).first(),j.length&&(e.contents="body"===d.fragment?j:j.contents(),e.title||(e.title=j.attr("title")||j.data("title")))):f||(e.contents=i),e.contents&&(e.contents=e.contents.not(function(){return a(this).is("title")}),e.contents.find("title").remove(),e.scripts=u(e.contents,"script[src]").remove(),e.contents=e.contents.not(e.scripts)),e.title&&(e.title=a.trim(e.title)),e)}function x(b){if(b){var c=a("script[src]");b.each(function(){var e,f,b=this.src,d=c.filter(function(){return this.src===b});d.length||(e=document.createElement("script"),f=a(this).attr("type"),f&&(e.type=f),e.src=a(this).attr("src"),document.head.appendChild(e))})}}function B(a,b){y[a]=b,A.push(a),D(z,0),D(A,e.defaults.maxCacheLength)}function C(a,b,c){var d,f;y[b]=c,"forward"===a?(d=A,f=z):(d=z,f=A),d.push(b),(b=f.pop())&&delete y[b],D(d,e.defaults.maxCacheLength)}function D(a,b){for(;a.length>b;)delete y[a.shift()]}function E(){return a("meta").filter(function(){var b=a(this).attr("http-equiv");return b&&"X-PJAX-VERSION"===b.toUpperCase()}).attr("content")}function F(){a.fn.pjax=b,a.pjax=e,a.pjax.enable=a.noop,a.pjax.disable=G,a.pjax.click=c,a.pjax.submit=d,a.pjax.reload=f,a.pjax.defaults={timeout:15e3,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:E},a(window).on("popstate.pjax",k)}function G(){a.fn.pjax=function(){return this},a.pjax=l,a.pjax.enable=F,a.pjax.disable=a.noop,a.pjax.click=a.noop,a.pjax.submit=a.noop,a.pjax.reload=function(){window.location.reload()},a(window).off("popstate.pjax",k)}var y,z,A,h=!0,i=window.location.href,j=window.history.state;j&&j.container&&(e.state=j),"state"in window.history&&(h=!1),y={},z=[],A=[],a.inArray("state",a.event.props)<0&&a.event.props.push("state"),a.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/),a.support.pjax?F():G()}(jQuery);

/*<script src="${ctxStatic}/org/tinygroup/tableexport/js/tableExport.js"></script>*/
!function(a){a.fn.extend({tableExport:function(b){function p(b,c,e,g){return i=a(f).find(b).first().find(c),i.each(function(){l="",O(this,e,j,g+i.length,function(a,b,c){l+=U(a,b,c)+d.csvSeparator}),l=a.trim(l).substring(0,l.length-1),l.length>0&&(n.length>0&&(n+="\n"),n+=l),j++}),i.length}function M(b){var c=[];return a(b).find("thead").first().find("th").each(function(b,d){c[b]=void 0!==a(d).attr("data-field")?a(d).attr("data-field"):b.toString()}),c}function N(b,c){var e=!1;return d.ignoreColumn.length>0&&("string"==typeof d.ignoreColumn[0]?m.length>c&&"undefined"!=typeof m[c]&&-1!=a.inArray(m[c],d.ignoreColumn)&&(e=!0):"number"==typeof d.ignoreColumn[0]&&(-1!=a.inArray(c,d.ignoreColumn)||-1!=a.inArray(c-b.length,d.ignoreColumn))&&(e=!0)),e}function O(b,e,f,g,h){var i,j,l;if(-1==a.inArray(f,d.ignoreRow)&&-1==a.inArray(f-g,d.ignoreRow)&&(i=a(b).filter(function(){return"none"!=a(this).data("tableexport-display")&&(a(this).is(":visible")||"always"==a(this).data("tableexport-display")||"always"==a(this).closest("table").data("tableexport-display"))}).find(e),j=0,l=0,i.each(function(b){var c,d,e,g;if(("always"==a(this).data("tableexport-display")||"none"!=a(this).css("display")&&"hidden"!=a(this).css("visibility")&&"none"!=a(this).data("tableexport-display"))&&0==N(i,b)&&"function"==typeof h){if(d=0,g=0,"undefined"!=typeof k[f]&&k[f].length>0)for(c=0;b>=c;c++)"undefined"!=typeof k[f][c]&&(h(null,f,c),delete k[f][c],b++);for(l=b,a(this).is("[colspan]")&&(d=parseInt(a(this).attr("colspan")),j+=d>0?d-1:0),a(this).is("[rowspan]")&&(g=parseInt(a(this).attr("rowspan"))),h(this,f,b),c=0;d-1>c;c++)h(null,f,b+c);if(g)for(e=1;g>e;e++)for("undefined"==typeof k[f+e]&&(k[f+e]=[]),k[f+e][b+j]="",c=1;d>c;c++)k[f+e][b+j-c]=""}}),"undefined"!=typeof k[f]&&k[f].length>0))for(c=0;c<=k[f].length;c++)"undefined"!=typeof k[f][c]&&(h(null,f,c),delete k[f][c])}function P(a){if(d.consoleLog===!0&&console.log(a.output()),"string"===d.outputMode)return a.output();if("base64"===d.outputMode)return db(a.output());try{var b=a.output("blob");saveAs(b,d.fileName+".pdf")}catch(c){bb(d.fileName+".pdf","data:application/pdf;base64,",a.output())}}function Q(a,b,c){var f,g,h,i,j,k,l,d=0;if("undefined"!=typeof c&&(d=c.colspan),d>=0){for(f=a.width,g=a.textPos.x,h=b.table.columns.indexOf(b.column),i=1;d>i;i++)j=b.table.columns[h+i],f+=j.width;return d>1&&("right"===a.styles.halign?g=a.textPos.x+f-a.width:"center"===a.styles.halign&&(g=a.textPos.x+(f-a.width)/2)),a.width=f,a.textPos.x=g,"undefined"!=typeof c&&c.rowspan>1&&(a.height=a.height*c.rowspan),("middle"===a.styles.valign||"bottom"===a.styles.valign)&&(k="string"==typeof a.text?a.text.split(/\r\n|\r|\n/g):a.text,l=k.length||1,l>2&&(a.textPos.y-=(2-e)/2*b.row.styles.fontSize*(l-2)/3)),!0}return!1}function R(b,c,e){c.each(function(){var f,g,h,i,j,k,l,m,c=a(this).children();a(this).is("div")&&(f=Y($(this,"background-color"),[255,255,255]),g=Y($(this,"border-top-color"),[0,0,0]),h=ab(this,"border-top-width",d.jspdf.unit),i=this.getBoundingClientRect(),j=this.offsetLeft*e.dw,k=this.offsetTop*e.dh,l=i.width*e.dw,m=i.height*e.dh,e.doc.setDrawColor.apply(void 0,g),e.doc.setFillColor.apply(void 0,f),e.doc.setLineWidth(h),e.doc.rect(b.x+j,b.y+k,l,m,h?"FD":"F")),"undefined"!=typeof c&&c.length>0&&R(b,c,e)})}function S(a){return a.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function T(a,b,c){return a.replace(new RegExp(S(b),"g"),c)}function U(a,b,c){var f,g,e="";return null!=a&&(f=W(a,b,c),g=null===f||""==f?"":f.toString(),f instanceof Date?e=d.csvEnclosure+f.toLocaleString()+d.csvEnclosure:(e=T(g,d.csvEnclosure,d.csvEnclosure+d.csvEnclosure),(e.indexOf(d.csvSeparator)>=0||/[\r\n ]/g.test(e))&&(e=d.csvEnclosure+e+d.csvEnclosure))),e}function V(a){return a=a||"0",a=T(a,d.numbers.html.decimalMark,"."),a=T(a,d.numbers.html.thousandsSeparator,""),"number"==typeof a||jQuery.isNumeric(a)!==!1?a:!1}function W(b,c,e){var g,h,i,j,k,l,m,f="";return null!=b&&(g=a(b),h=g[0].hasAttribute("data-tableexport-value")?g.data("tableexport-value"):g.html(),"function"==typeof d.onCellHtmlData&&(h=d.onCellHtmlData(g,c,e,h)),d.htmlContent===!0?f=a.trim(h):(i=h.replace(/\n/g,"\u2028").replace(/<br\s*[\/]?>/gi,"⁠"),j=a("<div/>").html(i).contents(),i="",a.each(j.text().split("\u2028"),function(b,c){b>0&&(i+=" "),i+=a.trim(c)}),a.each(i.split("⁠"),function(b,c){b>0&&(f+="\n"),f+=a.trim(c).replace(/\u00AD/g,"")}),(d.numbers.html.decimalMark!=d.numbers.output.decimalMark||d.numbers.html.thousandsSeparator!=d.numbers.output.thousandsSeparator)&&(k=V(f),k!==!1&&(l=(""+k).split("."),1==l.length&&(l[1]=""),m=l[0].length>3?l[0].length%3:0,f=(0>k?"-":"")+(d.numbers.output.thousandsSeparator?(m?l[0].substr(0,m)+d.numbers.output.thousandsSeparator:"")+l[0].substr(m).replace(/(\d{3})(?=\d)/g,"$1"+d.numbers.output.thousandsSeparator):l[0])+(l[1].length?d.numbers.output.decimalMark+l[1]:"")))),d.escape===!0&&(f=escape(f)),"function"==typeof d.onCellData&&(f=d.onCellData(g,c,e,f))),f}function X(a,b,c){return b+"-"+c.toLowerCase()}function Y(a,b){var c=/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,d=c.exec(a),e=b;return d&&(e=[parseInt(d[1]),parseInt(d[2]),parseInt(d[3])]),e}function Z(b){var g,h,c=$(b,"text-align"),d=$(b,"font-weight"),e=$(b,"font-style"),f="";return"start"==c&&(c="rtl"==$(b,"direction")?"right":"left"),d>=700&&(f="bold"),"italic"==e&&(f+=e),""==f&&(f="normal"),g={style:{align:c,bcolor:Y($(b,"background-color"),[255,255,255]),color:Y($(b,"color"),[0,0,0]),fstyle:f},colspan:parseInt(a(b).attr("colspan"))||0,rowspan:parseInt(a(b).attr("rowspan"))||0},null!==b&&(h=b.getBoundingClientRect(),g.rect={width:h.width,height:h.height}),g}function $(a,b){try{return window.getComputedStyle?(b=b.replace(/([a-z])([A-Z])/,X),window.getComputedStyle(a,null).getPropertyValue(b)):a.currentStyle?a.currentStyle[b]:a.style[b]}catch(c){}return""}function _(a,b,c){var f,d=100,e=document.createElement("div");return e.style.overflow="hidden",e.style.visibility="hidden",a.appendChild(e),e.style.width=d+c,f=d/e.offsetWidth,a.removeChild(e),b*f}function ab(a,b,c){var d=$(a,b),e=d.match(/\d+/);return null!==e?(e=e[0],_(a.parentElement,e,c)):0}function bb(a,b,c){var e,f,d=window.navigator.userAgent;d.indexOf("MSIE ")>0||d.match(/Trident.*rv\:11\./)?(e=document.createElement("iframe"),e&&(document.body.appendChild(e),e.setAttribute("style","display:none"),e.contentDocument.open("txt/html","replace"),e.contentDocument.write(c),e.contentDocument.close(),e.focus(),e.contentDocument.execCommand("SaveAs",!0,a),document.body.removeChild(e))):(f=document.createElement("a"),f&&(f.style.display="none",f.download=a,f.href=b.toLowerCase().indexOf("base64,")>=0?b+db(c):b+encodeURIComponent(c),document.body.appendChild(f),document.createEvent?(null==g&&(g=document.createEvent("MouseEvents")),g.initEvent("click",!0,!1),f.dispatchEvent(g)):document.createEventObject?f.fireEvent("onclick"):"function"==typeof f.onclick&&f.onclick(),document.body.removeChild(f)))}function cb(a){var b,c,d;for(a=a.replace(/\x0d\x0a/g,"\n"),b="",c=0;c<a.length;c++)d=a.charCodeAt(c),128>d?b+=String.fromCharCode(d):d>127&&2048>d?(b+=String.fromCharCode(192|d>>6),b+=String.fromCharCode(128|63&d)):(b+=String.fromCharCode(224|d>>12),b+=String.fromCharCode(128|63&d>>6),b+=String.fromCharCode(128|63&d));return b}function db(a){var d,e,f,g,h,i,j,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",k=0;for(a=cb(a);k<a.length;)d=a.charCodeAt(k++),e=a.charCodeAt(k++),f=a.charCodeAt(k++),g=d>>2,h=(3&d)<<4|e>>4,i=(15&e)<<2|f>>6,j=63&f,isNaN(e)?i=j=64:isNaN(f)&&(j=64),c=c+b.charAt(g)+b.charAt(h)+b.charAt(i)+b.charAt(j);return c}var n,o,q,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,d={consoleLog:!1,csvEnclosure:'"',csvSeparator:",",csvUseBOM:!0,displayTableName:!1,escape:!1,excelstyles:[],fileName:"tableExport",htmlContent:!1,ignoreColumn:[],ignoreRow:[],jsonScope:"all",jspdf:{orientation:"p",unit:"pt",format:"a4",margins:{left:20,right:10,top:10,bottom:10},autotable:{styles:{cellPadding:2,rowHeight:12,fontSize:8,fillColor:255,textColor:50,fontStyle:"normal",overflow:"ellipsize",halign:"left",valign:"middle"},headerStyles:{fillColor:[52,73,94],textColor:255,fontStyle:"bold",halign:"center"},alternateRowStyles:{fillColor:245},tableExport:{onAfterAutotable:null,onBeforeAutotable:null,onTable:null}}},numbers:{html:{decimalMark:".",thousandsSeparator:","},output:{decimalMark:".",thousandsSeparator:","}},onCellData:null,onCellHtmlData:null,outputMode:"file",tbodySelector:"tr",theadSelector:"tr",tableName:"myTableName",type:"csv",worksheetName:"xlsWorksheetName"},e=1.15,f=this,g=null,h=[],i=[],j=0,k=[],l="",m=[];if(a.extend(!0,d,b),m=M(f),"csv"==d.type||"txt"==d.type){if(n="",o=0,j=0,o+=p("thead",d.theadSelector,"th,td",o),o+=p("tbody",d.tbodySelector,"td",o),p("tfoot",d.tbodySelector,"td",o),n+="\n",d.consoleLog===!0&&console.log(n),"string"===d.outputMode)return n;if("base64"===d.outputMode)return db(n);try{q=new Blob([n],{type:"text/"+("csv"==d.type?"csv":"plain")+";charset=utf-8"}),saveAs(q,d.fileName+"."+d.type,"csv"!=d.type||d.csvUseBOM===!1)}catch(r){bb(d.fileName+"."+d.type,"data:text/"+("csv"==d.type?"csv":"plain")+";charset=utf-8,"+("csv"==d.type&&d.csvUseBOM?"﻿":""),n)}}else if("sql"==d.type){if(j=0,s="INSERT INTO `"+d.tableName+"` (",h=a(f).find("thead").first().find(d.theadSelector),h.each(function(){O(this,"th,td",j,h.length,function(a,b,c){s+="'"+W(a,b,c)+"',"}),j++,s=a.trim(s),s=a.trim(s).substring(0,s.length-1)}),s+=") VALUES ",i=a(f).find("tbody").first().find(d.tbodySelector),i.each(function(){l="",O(this,"td",j,h.length+i.length,function(a,b,c){l+="'"+W(a,b,c)+"',"}),l.length>3&&(s+="("+l,s=a.trim(s).substring(0,s.length-1),s+="),"),j++}),s=a.trim(s).substring(0,s.length-1),s+=";",d.consoleLog===!0&&console.log(s),"string"===d.outputMode)return s;if("base64"===d.outputMode)return db(s);try{q=new Blob([s],{type:"text/plain;charset=utf-8"}),saveAs(q,d.fileName+".sql")}catch(r){bb(d.fileName+".sql","data:application/sql;charset=utf-8,",s)}}else if("json"==d.type){if(t=[],h=a(f).find("thead").first().find(d.theadSelector),h.each(function(){var a=[];O(this,"th,td",j,h.length,function(b,c,d){a.push(W(b,c,d))}),t.push(a)}),u=[],i=a(f).find("tbody").first().find(d.tbodySelector),i.each(function(){var b={},c=0;O(this,"td",j,h.length+i.length,function(a,d,e){t.length?b[t[t.length-1][c]]=W(a,d,e):b[c]=W(a,d,e),c++}),0==a.isEmptyObject(b)&&u.push(b),j++}),v="",v="head"==d.jsonScope?JSON.stringify(t):"data"==d.jsonScope?JSON.stringify(u):JSON.stringify({header:t,data:u}),d.consoleLog===!0&&console.log(v),"string"===d.outputMode)return v;if("base64"===d.outputMode)return db(v);try{q=new Blob([v],{type:"application/json;charset=utf-8"}),saveAs(q,d.fileName+".json")}catch(r){bb(d.fileName+".json","data:application/json;charset=utf-8;base64,",v)}}else if("xml"===d.type){if(j=0,w='<?xml version="1.0" encoding="utf-8"?>',w+="<tabledata><fields>",h=a(f).find("thead").first().find(d.theadSelector),h.each(function(){O(this,"th,td",j,i.length,function(a,b,c){w+="<field>"+W(a,b,c)+"</field>"}),j++}),w+="</fields><data>",x=1,i=a(f).find("tbody").first().find(d.tbodySelector),i.each(function(){var a=1;l="",O(this,"td",j,h.length+i.length,function(b,c,d){l+="<column-"+a+">"+W(b,c,d)+"</column-"+a+">",a++}),l.length>0&&"<column-1></column-1>"!=l&&(w+='<row id="'+x+'">'+l+"</row>",x++),j++}),w+="</data></tabledata>",d.consoleLog===!0&&console.log(w),"string"===d.outputMode)return w;if("base64"===d.outputMode)return db(w);try{q=new Blob([w],{type:"application/xml;charset=utf-8"}),saveAs(q,d.fileName+".xml")}catch(r){bb(d.fileName+".xml","data:application/xml;charset=utf-8;base64,",w)}}else if("excel"==d.type||"xls"==d.type||"word"==d.type||"doc"==d.type){if(y="excel"==d.type||"xls"==d.type?"excel":"word",z="excel"==y?"xls":"doc",A="xls"==z?'xmlns:x="urn:schemas-microsoft-com:office:excel"':'xmlns:w="urn:schemas-microsoft-com:office:word"',B=a(f).filter(function(){return"none"!=a(this).data("tableexport-display")&&(a(this).is(":visible")||"always"==a(this).data("tableexport-display"))}),C="",B.each(function(){j=0,m=M(this),C+="<table><thead>",h=a(this).find("thead").first().find(d.theadSelector),h.each(function(){l="",O(this,"th,td",j,h.length,function(b,c,e){var f,g,h;if(null!=b){f="",l+="<th";for(g in d.excelstyles)d.excelstyles.hasOwnProperty(g)&&(h=a(b).css(d.excelstyles[g]),""!=h&&"0px none rgb(0, 0, 0)"!=h&&(""==f&&(f='style="'),f+=d.excelstyles[g]+":"+h+";"));""!=f&&(l+=" "+f+'"'),a(b).is("[colspan]")&&(l+=' colspan="'+a(b).attr("colspan")+'"'),a(b).is("[rowspan]")&&(l+=' rowspan="'+a(b).attr("rowspan")+'"'),l+=">"+W(b,c,e)+"</th>"}}),l.length>0&&(C+="<tr>"+l+"</tr>"),j++}),C+="</thead><tbody>",i=a(this).find("tbody").first().find(d.tbodySelector),i.each(function(){l="",O(this,"td",j,h.length+i.length,function(b,c,e){var f,g,h;if(null!=b){f="",g=a(b).data("tableexport-msonumberformat"),"undefined"==typeof g&&"function"==typeof d.onMsoNumberFormat&&(g=d.onMsoNumberFormat(b,c,e)),"undefined"!=typeof g&&""!=g&&(""==f&&(f='style="'),f='style="mso-number-format:'+g+";"),l+="<td";for(h in d.excelstyles)d.excelstyles.hasOwnProperty(h)&&(g=a(b).css(d.excelstyles[h]),""!=g&&"0px none rgb(0, 0, 0)"!=g&&(""==f&&(f='style="'),f+=d.excelstyles[h]+":"+g+";"));""!=f&&(l+=" "+f+'"'),a(b).is("[colspan]")&&(l+=' colspan="'+a(b).attr("colspan")+'"'),a(b).is("[rowspan]")&&(l+=' rowspan="'+a(b).attr("rowspan")+'"'),l+=">"+W(b,c,e)+"</td>"}}),l.length>0&&(C+="<tr>"+l+"</tr>"),j++}),d.displayTableName&&(C+="<tr><td></td></tr><tr><td></td></tr><tr><td>"+W(a("<p>"+d.tableName+"</p>"))+"</td></tr>"),C+="</tbody></table>",d.consoleLog===!0&&console.log(C)}),D='<html xmlns:o="urn:schemas-microsoft-com:office:office" '+A+' xmlns="http://www.w3.org/TR/REC-html40">',D+='<meta http-equiv="content-type" content="application/vnd.ms-'+y+'; charset=UTF-8">',D+="<head>","excel"===y&&(D+="<!--[if gte mso 9]>",D+="<xml>",D+="<x:ExcelWorkbook>",D+="<x:ExcelWorksheets>",D+="<x:ExcelWorksheet>",D+="<x:Name>",D+=d.worksheetName,D+="</x:Name>",D+="<x:WorksheetOptions>",D+="<x:DisplayGridlines/>",D+="</x:WorksheetOptions>",D+="</x:ExcelWorksheet>",D+="</x:ExcelWorksheets>",D+="</x:ExcelWorkbook>",D+="</xml>",D+="<![endif]-->"),D+="</head>",D+="<body>",D+=C,D+="</body>",D+="</html>",d.consoleLog===!0&&console.log(D),"string"===d.outputMode)return D;if("base64"===d.outputMode)return db(D);try{q=new Blob([D],{type:"application/vnd.ms-"+d.type}),saveAs(q,d.fileName+"."+z)}catch(r){bb(d.fileName+"."+z,"data:application/vnd.ms-"+y+";base64,",D)}}else"png"==d.type?html2canvas(a(f)[0],{allowTaint:!0,background:"#fff",onrendered:function(a){var c,e,f,g,h,b=a.toDataURL();for(b=b.substring(22),c=atob(b),e=new ArrayBuffer(c.length),f=new Uint8Array(e),g=0;g<c.length;g++)f[g]=c.charCodeAt(g);if(d.consoleLog===!0&&console.log(c),"string"===d.outputMode)return c;if("base64"===d.outputMode)return db(b);try{h=new Blob([e],{type:"image/png"}),saveAs(h,d.fileName+".png")}catch(i){bb(d.fileName+".png","data:image/png;base64,",b)}}}):"pdf"==d.type&&(d.jspdf.autotable===!1?(E={dim:{w:ab(a(f).first().get(0),"width","mm"),h:ab(a(f).first().get(0),"height","mm")},pagesplit:!1},F=new jsPDF(d.jspdf.orientation,d.jspdf.unit,d.jspdf.format),F.addHTML(a(f).first(),d.jspdf.margins.left,d.jspdf.margins.top,E,function(){P(F)})):(G=d.jspdf.autotable.tableExport,"string"==typeof d.jspdf.format&&"bestfit"===d.jspdf.format.toLowerCase()&&(H={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89]},I="",J="",K=0,a(f).filter(":visible").each(function(){var b,c;if("none"!=a(this).css("display")&&(b=ab(a(this).get(0),"width","pt"),b>K)){b>H["a0"][0]&&(I="a0",J="l");for(c in H)H.hasOwnProperty(c)&&H[c][1]>b&&(I=c,J="l",H[c][0]>b&&(J="p"));K=b}}),d.jspdf.format=""==I?"a4":I,d.jspdf.orientation=""==J?"w":J),G.doc=new jsPDF(d.jspdf.orientation,d.jspdf.unit,d.jspdf.format),a(f).filter(function(){return"none"!=a(this).data("tableexport-display")&&(a(this).is(":visible")||"always"==a(this).data("tableexport-display"))}).each(function(){var b,f,g,c=0;return m=M(this),G.columns=[],G.rows=[],G.rowoptions={},"function"==typeof G.onTable&&G.onTable(a(this),d)===!1?!0:(d.jspdf.autotable.tableExport=null,f=a.extend(!0,{},d.jspdf.autotable),d.jspdf.autotable.tableExport=G,f.margin={},a.extend(!0,f.margin,d.jspdf.margins),f.tableExport=G,"function"!=typeof f.beforePageContent&&(f.beforePageContent=function(a){if(1==a.pageCount){var b=a.table.rows.concat(a.table.headerRow);b.forEach(function(b){b.height>0&&(b.height+=(2-e)/2*b.styles.fontSize,a.table.height+=(2-e)/2*b.styles.fontSize)})}}),"function"!=typeof f.createdHeaderCell&&(f.createdHeaderCell=function(b,c){var d,e;b.styles=a.extend({},c.row.styles),"undefined"!=typeof G.columns[c.column.dataKey]&&(d=G.columns[c.column.dataKey],"undefined"!=typeof d.rect&&(b.contentWidth=d.rect.width,("undefined"==typeof G.heightRatio||0==G.heightRatio)&&(e=c.row.raw[c.column.dataKey].rowspan?c.row.raw[c.column.dataKey].rect.height/c.row.raw[c.column.dataKey].rowspan:c.row.raw[c.column.dataKey].rect.height,G.heightRatio=b.styles.rowHeight/e),e=c.row.raw[c.column.dataKey].rect.height*G.heightRatio,e>b.styles.rowHeight&&(b.styles.rowHeight=e)),"undefined"!=typeof d.style&&d.style.hidden!==!0&&(b.styles.halign=d.style.align,"inherit"===f.styles.fillColor&&(b.styles.fillColor=d.style.bcolor),"inherit"===f.styles.textColor&&(b.styles.textColor=d.style.color),"inherit"===f.styles.fontStyle&&(b.styles.fontStyle=d.style.fstyle)))}),"function"!=typeof f.createdCell&&(f.createdCell=function(a,b){var c=G.rowoptions[b.row.index+":"+b.column.dataKey];"undefined"!=typeof c&&"undefined"!=typeof c.style&&c.style.hidden!==!0&&(a.styles.halign=c.style.align,"inherit"===f.styles.fillColor&&(a.styles.fillColor=c.style.bcolor),"inherit"===f.styles.textColor&&(a.styles.textColor=c.style.color),"inherit"===f.styles.fontStyle&&(a.styles.fontStyle=c.style.fstyle))}),"function"!=typeof f.drawHeaderCell&&(f.drawHeaderCell=function(a,b){var c=G.columns[b.column.dataKey];return(1!=c.style.hasOwnProperty("hidden")||c.style.hidden!==!0)&&c.rowIndex>=0?Q(a,b,c):!1}),"function"!=typeof f.drawCell&&(f.drawCell=function(a,b){var d,c=G.rowoptions[b.row.index+":"+b.column.dataKey];return Q(a,b,c)&&(G.doc.rect(a.x,a.y,a.width,a.height,a.styles.fillStyle),"undefined"!=typeof c&&"undefined"!=typeof c.kids&&c.kids.length>0&&(d=a.height/c.rect.height,(d>G.dh||"undefined"==typeof G.dh)&&(G.dh=d),G.dw=a.width/c.rect.width,R(a,c.kids,G)),G.doc.autoTableText(a.text,a.textPos.x,a.textPos.y,{halign:a.styles.halign,valign:a.styles.valign})),!1}),G.headerrows=[],h=a(this).find("thead").find(d.theadSelector),h.each(function(){b=0,G.headerrows[c]=[],O(this,"th,td",c,h.length,function(a,d,e){var f=Z(a);f.title=W(a,d,e),f.key=b++,f.rowIndex=c,G.headerrows[c].push(f)}),c++}),c>0&&a.each(G.headerrows[c-1],function(){obj=c>1&&null==this.rect?G.headerrows[c-2][this.key]:this,null!=obj&&G.columns.push(obj)}),g=0,i=a(this).find("tbody").find(d.tbodySelector),i.each(function(){var d=[];b=0,O(this,"td",c,h.length+i.length,function(c,e,f){var h;"undefined"==typeof G.columns[b]&&(h={title:"",key:b,style:{hidden:!0}},G.columns.push(h)),"undefined"!=typeof c&&null!=c?(h=Z(c),h.kids=a(c).children(),G.rowoptions[g+":"+b++]=h):(h=a.extend(!0,{},G.rowoptions[g+":"+(b-1)]),h.colspan=-1,G.rowoptions[g+":"+b++]=h),d.push(W(c,e,f))}),d.length&&(G.rows.push(d),g++),c++}),"function"==typeof G.onBeforeAutotable&&G.onBeforeAutotable(a(this),G.columns,G.rows,f),G.doc.autoTable(G.columns,G.rows,f),"function"==typeof G.onAfterAutotable&&G.onAfterAutotable(a(this),f),d.jspdf.autotable.startY=G.doc.autoTableEndPosY()+f.margin.top,void 0)}),P(G.doc),"undefined"!=typeof G.headerrows&&(G.headerrows.length=0),"undefined"!=typeof G.columns&&(G.columns.length=0),"undefined"!=typeof G.rows&&(G.rows.length=0),delete G.doc,G.doc=null));return this}})}(jQuery);

/*<script src="${ctxStatic}/org/it313/ueditor-1.4.3.3/ueditor.config.js"></script>*/
!function(){function b(a,b){return d(a||self.document.URL||self.location.href,b||c())}function c(){var a=document.getElementsByTagName("script");return a[a.length-1].src}function d(a,b){var c=b;return/^(\/|\\\\)/.test(b)?c=/^.+?\w(\/|\\\\)/.exec(a)[0]+b.replace(/^(\/|\\\\)/,""):/^[a-z]+:/i.test(b)||(a=a.split("#")[0].split("?")[0].replace(/[^\\\/]+$/,""),c=a+""+b),e(c)}function e(a){var b=/^[a-z]+:\/\//.exec(a)[0],c=null,d=[];for(a=a.replace(b,"").split("?")[0].split("#")[0],a=a.replace(/\\/g,"/").split(/\//),a[a.length-1]="";a.length;)".."===(c=a.shift())?d.pop():"."!==c&&d.push(c);return b+d.join("/")}var a=window.UEDITOR_HOME_URL||b();window.UEDITOR_CONFIG={UEDITOR_HOME_URL:a,serverUrl:a+"jsp/controller.jsp",toolbars:[["fullscreen","source","|","undo","redo","|","bold","italic","underline","fontborder","strikethrough","superscript","subscript","removeformat","formatmatch","autotypeset","blockquote","pasteplain","|","forecolor","backcolor","insertorderedlist","insertunorderedlist","selectall","cleardoc","|","rowspacingtop","rowspacingbottom","lineheight","|","customstyle","paragraph","fontfamily","fontsize","|","directionalityltr","directionalityrtl","indent","|","justifyleft","justifycenter","justifyright","justifyjustify","|","touppercase","tolowercase","|","link","unlink","anchor","|","imagenone","imageleft","imageright","imagecenter","|","simpleupload","insertimage","emotion","scrawl","insertvideo","music","attachment","map","gmap","insertframe","insertcode","webapp","pagebreak","template","background","|","horizontal","date","time","spechars","wordimage","|","inserttable","deletetable","insertparagraphbeforetable","insertrow","deleterow","insertcol","deletecol","mergecells","mergeright","mergedown","splittocells","splittorows","splittocols","charts","|","print","preview","searchreplace","drafts","help"]],xssFilterRules:!0,inputXssFilter:!0,outputXssFilter:!0,whitList:{a:["target","href","title"],abbr:["title"],address:["class","style","id"],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:["class","style","id"],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite","class","style","id"],br:["class","style","id"],caption:["class","style","id"],center:[],cite:[],code:["class","style","id"],col:["align","valign","span","width","class","style","id"],colgroup:["align","valign","span","width","class","style","id"],dd:["class","style","id"],del:["datetime","class","style","id"],details:["open"],div:["class","style","id"],dl:["class","style","id"],dt:["class","style","id"],em:["class","style","id"],embed:["type","class","style","pluginspage","src","width","height","align","wmode","play","loop","menu","allowscriptaccess","allowfullscreen","id"],font:["color","size","face"],footer:[],h1:["class","style","id"],h2:["class","style","id"],h3:["class","style","id"],h4:["class","style","id"],h5:["class","style","id"],h6:["class","style","id"],header:[],hr:["class","style","id"],i:["class","style","id"],iframe:["src","width","height","class","id","style","frameborder","name"],img:["src","alt","title","width","height","id","_src","loadingclass","_url","data-latex"],ins:["datetime","class","style","id"],li:["class","style","id"],mark:[],nav:[],ol:["class","style","id"],p:["class","style","id"],pre:["class","style","id"],s:[],section:[],small:["class","style","id"],span:["class","style","id"],sub:["class","style","id"],sup:["class","style","id"],strong:["class","style","id"],table:["width","border","align","valign","class","style","id"],tbody:["align","valign","width","class","style","id"],td:["width","rowspan","colspan","align","valign","class","style","id"],tfoot:["align","valign","class","style","id"],th:["width","rowspan","colspan","align","valign","class","style","id"],thead:["align","valign","class","style","id"],tr:["rowspan","align","valign","class","style","id"],tt:["class","style","id"],u:[],ul:["class","style","id"],video:["autoplay","controls","loop","preload","src","height","width","class","style","id"]}},window.UE={getUEBasePath:b}}();

/*<script src="${ctxStatic}/org/it313/ueditor-1.4.3.3/ueditor.all.js"></script>*/
(function(){UEDITOR_CONFIG=window.UEDITOR_CONFIG||{};var baidu=window.baidu||{};window.baidu=baidu;window.UE=baidu.editor=window.UE||{};UE.plugins={};UE.commands={};UE.instants={};UE.I18N={};UE._customizeUI={};UE.version="1.4.3";var dom=UE.dom={};var browser=UE.browser=function(){var agent=navigator.userAgent.toLowerCase(),opera=window.opera,browser={ie:/(msie\s|trident.*rv:)([\w.]+)/.test(agent),opera:(!!opera&&opera.version),webkit:(agent.indexOf(" applewebkit/")>-1),mac:(agent.indexOf("macintosh")>-1),quirks:(document.compatMode=="BackCompat")};browser.gecko=(navigator.product=="Gecko"&&!browser.webkit&&!browser.opera&&!browser.ie);var version=0;if(browser.ie){var v1=agent.match(/(?:msie\s([\w.]+))/);var v2=agent.match(/(?:trident.*rv:([\w.]+))/);if(v1&&v2&&v1[1]&&v2[1]){version=Math.max(v1[1]*1,v2[1]*1)}else{if(v1&&v1[1]){version=v1[1]*1}else{if(v2&&v2[1]){version=v2[1]*1}else{version=0}}}browser.ie11Compat=document.documentMode==11;browser.ie9Compat=document.documentMode==9;browser.ie8=!!document.documentMode;browser.ie8Compat=document.documentMode==8;browser.ie7Compat=((version==7&&!document.documentMode)||document.documentMode==7);browser.ie6Compat=(version<7||browser.quirks);browser.ie9above=version>8;browser.ie9below=version<9;browser.ie11above=version>10;browser.ie11below=version<11}if(browser.gecko){var geckoRelease=agent.match(/rv:([\d\.]+)/);if(geckoRelease){geckoRelease=geckoRelease[1].split(".");version=geckoRelease[0]*10000+(geckoRelease[1]||0)*100+(geckoRelease[2]||0)*1}}if(/chrome\/(\d+\.\d)/i.test(agent)){browser.chrome=+RegExp["\x241"]}if(/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(agent)&&!/chrome/i.test(agent)){browser.safari=+(RegExp["\x241"]||RegExp["\x242"])}if(browser.opera){version=parseFloat(opera.version())}if(browser.webkit){version=parseFloat(agent.match(/ applewebkit\/(\d+)/)[1])}browser.version=version;browser.isCompatible=!browser.mobile&&((browser.ie&&version>=6)||(browser.gecko&&version>=10801)||(browser.opera&&version>=9.5)||(browser.air&&version>=1)||(browser.webkit&&version>=522)||false);return browser}();var ie=browser.ie,webkit=browser.webkit,gecko=browser.gecko,opera=browser.opera;var utils=UE.utils={each:function(obj,iterator,context){if(obj==null){return}if(obj.length===+obj.length){for(var i=0,l=obj.length;i<l;i++){if(iterator.call(context,obj[i],i,obj)===false){return false}}}else{for(var key in obj){if(obj.hasOwnProperty(key)){if(iterator.call(context,obj[key],key,obj)===false){return false}}}}},makeInstance:function(obj){var noop=new Function();noop.prototype=obj;obj=new noop;noop.prototype=null;return obj},extend:function(t,s,b){if(s){for(var k in s){if(!b||!t.hasOwnProperty(k)){t[k]=s[k]}}}return t},extend2:function(t){var a=arguments;for(var i=1;i<a.length;i++){var x=a[i];for(var k in x){if(!t.hasOwnProperty(k)){t[k]=x[k]}}}return t},inherits:function(subClass,superClass){var oldP=subClass.prototype,newP=utils.makeInstance(superClass.prototype);utils.extend(newP,oldP,true);subClass.prototype=newP;return(newP.constructor=subClass)},bind:function(fn,context){return function(){return fn.apply(context,arguments)}},defer:function(fn,delay,exclusion){var timerID;return function(){if(exclusion){clearTimeout(timerID)}timerID=setTimeout(fn,delay)}},indexOf:function(array,item,start){var index=-1;start=this.isNumber(start)?start:0;this.each(array,function(v,i){if(i>=start&&v===item){index=i;return false}});return index},removeItem:function(array,item){for(var i=0,l=array.length;i<l;i++){if(array[i]===item){array.splice(i,1);i--}}},trim:function(str){return str.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")},listToMap:function(list){if(!list){return{}}list=utils.isArray(list)?list:list.split(",");for(var i=0,ci,obj={};ci=list[i++];){obj[ci.toUpperCase()]=obj[ci]=1}return obj},unhtml:function(str,reg){return str?str.replace(reg||/[&<">'](?:(amp|lt|quot|gt|#39|nbsp|#\d+);)?/g,function(a,b){if(b){return a}else{return{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;","'":"&#39;"}[a]}}):""},unhtmlForUrl:function(str,reg){return str?str.replace(reg||/[<">']/g,function(a){return{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;","'":"&#39;"}[a]}):""},html:function(str){return str?str.replace(/&((g|l|quo)t|amp|#39|nbsp);/g,function(m){return{"&lt;":"<","&amp;":"&","&quot;":'"',"&gt;":">","&#39;":"'","&nbsp;":" "}[m]}):""},cssStyleToDomStyle:function(){var test=document.createElement("div").style,cache={"float":test.cssFloat!=undefined?"cssFloat":test.styleFloat!=undefined?"styleFloat":"float"};return function(cssName){return cache[cssName]||(cache[cssName]=cssName.toLowerCase().replace(/-./g,function(match){return match.charAt(1).toUpperCase()}))}}(),loadFile:function(){var tmpList=[];function getItem(doc,obj){try{for(var i=0,ci;ci=tmpList[i++];){if(ci.doc===doc&&ci.url==(obj.src||obj.href)){return ci}}}catch(e){return null}}return function(doc,obj,fn){var item=getItem(doc,obj);if(item){if(item.ready){fn&&fn()}else{item.funs.push(fn)}return}tmpList.push({doc:doc,url:obj.src||obj.href,funs:[fn]});if(!doc.body){var html=[];for(var p in obj){if(p=="tag"){continue}html.push(p+'="'+obj[p]+'"')}doc.write("<"+obj.tag+" "+html.join(" ")+" ></"+obj.tag+">");return}if(obj.id&&doc.getElementById(obj.id)){return}var element=doc.createElement(obj.tag);delete obj.tag;for(var p in obj){element.setAttribute(p,obj[p])}element.onload=element.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){item=getItem(doc,obj);if(item.funs.length>0){item.ready=1;for(var fi;fi=item.funs.pop();){fi()}}element.onload=element.onreadystatechange=null}};element.onerror=function(){throw Error("The load "+(obj.href||obj.src)+" fails,check the url settings of file ueditor.config.js ")};doc.getElementsByTagName("head")[0].appendChild(element)}}(),isEmptyObject:function(obj){if(obj==null){return true}if(this.isArray(obj)||this.isString(obj)){return obj.length===0}for(var key in obj){if(obj.hasOwnProperty(key)){return false}}return true},fixColor:function(name,value){if(/color/i.test(name)&&/rgba?/.test(value)){var array=value.split(",");if(array.length>3){return""}value="#";for(var i=0,color;color=array[i++];){color=parseInt(color.replace(/[^\d]/gi,""),10).toString(16);value+=color.length==1?"0"+color:color}value=value.toUpperCase()}return value},optCss:function(val){var padding,margin,border;val=val.replace(/(padding|margin|border)\-([^:]+):([^;]+);?/gi,function(str,key,name,val){if(val.split(" ").length==1){switch(key){case"padding":!padding&&(padding={});padding[name]=val;return"";case"margin":!margin&&(margin={});margin[name]=val;return"";case"border":return val=="initial"?"":str}}return str});function opt(obj,name){if(!obj){return""}var t=obj.top,b=obj.bottom,l=obj.left,r=obj.right,val="";if(!t||!l||!b||!r){for(var p in obj){val+=";"+name+"-"+p+":"+obj[p]+";"}}else{val+=";"+name+":"+(t==b&&b==l&&l==r?t:t==b&&l==r?(t+" "+l):l==r?(t+" "+l+" "+b):(t+" "+r+" "+b+" "+l))+";"}return val}val+=opt(padding,"padding")+opt(margin,"margin");return val.replace(/^[ \n\r\t;]*|[ \n\r\t]*$/,"").replace(/;([ \n\r\t]+)|\1;/g,";").replace(/(&((l|g)t|quot|#39))?;{2,}/g,function(a,b){return b?b+";;":";"})},clone:function(source,target){var tmp;target=target||{};for(var i in source){if(source.hasOwnProperty(i)){tmp=source[i];if(typeof tmp=="object"){target[i]=utils.isArray(tmp)?[]:{};utils.clone(source[i],target[i])}else{target[i]=tmp}}}return target},transUnitToPx:function(val){if(!/(pt|cm)/.test(val)){return val}var unit;val.replace(/([\d.]+)(\w+)/,function(str,v,u){val=v;unit=u});switch(unit){case"cm":val=parseFloat(val)*25;break;case"pt":val=Math.round(parseFloat(val)*96/72)}return val+(val?"px":"")},domReady:function(){var fnArr=[];function doReady(doc){doc.isReady=true;for(var ci;ci=fnArr.pop();ci()){}}return function(onready,win){win=win||window;var doc=win.document;onready&&fnArr.push(onready);if(doc.readyState==="complete"){doReady(doc)}else{doc.isReady&&doReady(doc);if(browser.ie&&browser.version!=11){(function(){if(doc.isReady){return}try{doc.documentElement.doScroll("left")}catch(error){setTimeout(arguments.callee,0);return}doReady(doc)})();win.attachEvent("onload",function(){doReady(doc)})}else{doc.addEventListener("DOMContentLoaded",function(){doc.removeEventListener("DOMContentLoaded",arguments.callee,false);doReady(doc)},false);win.addEventListener("load",function(){doReady(doc)},false)}}}}(),cssRule:browser.ie&&browser.version!=11?function(key,style,doc){var indexList,index;if(style===undefined||style&&style.nodeType&&style.nodeType==9){doc=style&&style.nodeType&&style.nodeType==9?style:(doc||document);indexList=doc.indexList||(doc.indexList={});index=indexList[key];if(index!==undefined){return doc.styleSheets[index].cssText}return undefined}doc=doc||document;indexList=doc.indexList||(doc.indexList={});index=indexList[key];if(style===""){if(index!==undefined){doc.styleSheets[index].cssText="";delete indexList[key];return true}return false}if(index!==undefined){sheetStyle=doc.styleSheets[index]}else{sheetStyle=doc.createStyleSheet("",index=doc.styleSheets.length);indexList[key]=index}sheetStyle.cssText=style}:function(key,style,doc){var head,node;if(style===undefined||style&&style.nodeType&&style.nodeType==9){doc=style&&style.nodeType&&style.nodeType==9?style:(doc||document);node=doc.getElementById(key);return node?node.innerHTML:undefined}doc=doc||document;node=doc.getElementById(key);if(style===""){if(node){node.parentNode.removeChild(node);return true}return false}if(node){node.innerHTML=style}else{node=doc.createElement("style");node.id=key;node.innerHTML=style;doc.getElementsByTagName("head")[0].appendChild(node)}},sort:function(array,compareFn){compareFn=compareFn||function(item1,item2){return item1.localeCompare(item2)};for(var i=0,len=array.length;i<len;i++){for(var j=i,length=array.length;j<length;j++){if(compareFn(array[i],array[j])>0){var t=array[i];array[i]=array[j];array[j]=t}}}return array},serializeParam:function(json){var strArr=[];for(var i in json){if(i=="method"||i=="timeout"||i=="async"){continue}if(!((typeof json[i]).toLowerCase()=="function"||(typeof json[i]).toLowerCase()=="object")){strArr.push(encodeURIComponent(i)+"="+encodeURIComponent(json[i]))}else{if(utils.isArray(json[i])){for(var j=0;j<json[i].length;j++){strArr.push(encodeURIComponent(i)+"[]="+encodeURIComponent(json[i][j]))}}}}return strArr.join("&")},formatUrl:function(url){var u=url.replace(/&&/g,"&");u=u.replace(/\?&/g,"?");u=u.replace(/&$/g,"");u=u.replace(/&#/g,"#");u=u.replace(/&+/g,"&");return u},isCrossDomainUrl:function(url){var a=document.createElement("a");a.href=url;if(browser.ie){a.href=a.href}return !(a.protocol==location.protocol&&a.hostname==location.hostname&&(a.port==location.port||(a.port=="80"&&location.port=="")||(a.port==""&&location.port=="80")))},clearEmptyAttrs:function(obj){for(var p in obj){if(obj[p]===""){delete obj[p]}}return obj},str2json:function(s){if(!utils.isString(s)){return null}if(window.JSON){return JSON.parse(s)}else{return(new Function("return "+utils.trim(s||"")))()}},json2str:(function(){if(window.JSON){return JSON.stringify}else{var escapeMap={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function encodeString(source){if(/["\\\x00-\x1f]/.test(source)){source=source.replace(/["\\\x00-\x1f]/g,function(match){var c=escapeMap[match];if(c){return c}c=match.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})}return'"'+source+'"'}function encodeArray(source){var result=["["],l=source.length,preComma,i,item;for(i=0;i<l;i++){item=source[i];switch(typeof item){case"undefined":case"function":case"unknown":break;default:if(preComma){result.push(",")}result.push(utils.json2str(item));preComma=1}}result.push("]");return result.join("")}function pad(source){return source<10?"0"+source:source}function encodeDate(source){return'"'+source.getFullYear()+"-"+pad(source.getMonth()+1)+"-"+pad(source.getDate())+"T"+pad(source.getHours())+":"+pad(source.getMinutes())+":"+pad(source.getSeconds())+'"'}return function(value){switch(typeof value){case"undefined":return"undefined";case"number":return isFinite(value)?String(value):"null";case"string":return encodeString(value);case"boolean":return String(value);default:if(value===null){return"null"}else{if(utils.isArray(value)){return encodeArray(value)}else{if(utils.isDate(value)){return encodeDate(value)}else{var result=["{"],encode=utils.json2str,preComma,item;for(var key in value){if(Object.prototype.hasOwnProperty.call(value,key)){item=value[key];switch(typeof item){case"undefined":case"unknown":case"function":break;default:if(preComma){result.push(",")}preComma=1;result.push(encode(key)+":"+encode(item))}}}result.push("}");return result.join("")}}}}}}})()};utils.each(["String","Function","Array","Number","RegExp","Object","Date"],function(v){UE.utils["is"+v]=function(obj){return Object.prototype.toString.apply(obj)=="[object "+v+"]"}});var EventBase=UE.EventBase=function(){};EventBase.prototype={addListener:function(types,listener){types=utils.trim(types).split(/\s+/);for(var i=0,ti;ti=types[i++];){getListener(this,ti,true).push(listener)}},on:function(types,listener){return this.addListener(types,listener)},off:function(types,listener){return this.removeListener(types,listener)},trigger:function(){return this.fireEvent.apply(this,arguments)},removeListener:function(types,listener){types=utils.trim(types).split(/\s+/);for(var i=0,ti;ti=types[i++];){utils.removeItem(getListener(this,ti)||[],listener)}},fireEvent:function(){var types=arguments[0];types=utils.trim(types).split(" ");for(var i=0,ti;ti=types[i++];){var listeners=getListener(this,ti),r,t,k;if(listeners){k=listeners.length;while(k--){if(!listeners[k]){continue}t=listeners[k].apply(this,arguments);if(t===true){return t}if(t!==undefined){r=t}}}if(t=this["on"+ti.toLowerCase()]){r=t.apply(this,arguments)}}return r}};function getListener(obj,type,force){var allListeners;type=type.toLowerCase();return((allListeners=(obj.__allListeners||force&&(obj.__allListeners={})))&&(allListeners[type]||force&&(allListeners[type]=[])))}var dtd=dom.dtd=(function(){function _(s){for(var k in s){s[k.toUpperCase()]=s[k]}return s}var X=utils.extend2;var A=_({isindex:1,fieldset:1}),B=_({input:1,button:1,select:1,textarea:1,label:1}),C=X(_({a:1}),B),D=X({iframe:1},C),E=_({hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1}),F=_({ins:1,del:1,script:1,style:1}),G=X(_({b:1,acronym:1,bdo:1,"var":1,"#":1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1}),F),H=X(_({sub:1,img:1,embed:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1}),G),I=X(_({p:1}),H),J=X(_({iframe:1}),H,B),K=_({img:1,embed:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,"#":1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,"var":1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1}),L=X(_({a:0}),J),M=_({tr:1}),N=_({"#":1}),O=X(_({param:1}),K),P=X(_({form:1}),A,D,E,I),Q=_({li:1,ol:1,ul:1}),R=_({style:1,script:1}),S=_({base:1,link:1,meta:1,title:1}),T=X(S,R),U=_({head:1,body:1}),V=_({html:1});var block=_({address:1,blockquote:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1}),empty=_({area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1});return _({$nonBodyContent:X(V,U,S),$block:block,$inline:L,$inlineWithA:X(_({a:1}),L),$body:X(_({script:1,style:1}),block),$cdata:_({script:1,style:1}),$empty:empty,$nonChild:_({iframe:1,textarea:1}),$listItem:_({dd:1,dt:1,li:1}),$list:_({ul:1,ol:1,dl:1}),$isNotEmpty:_({table:1,ul:1,ol:1,dl:1,iframe:1,area:1,base:1,col:1,hr:1,img:1,embed:1,input:1,link:1,meta:1,param:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1}),$removeEmpty:_({a:1,abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1}),$removeEmptyBlock:_({p:1,div:1}),$tableContent:_({caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1,table:1}),$notTransContent:_({pre:1,script:1,style:1,textarea:1}),html:U,head:T,style:N,script:N,body:P,base:{},link:{},meta:{},title:N,col:{},tr:_({td:1,th:1}),img:{},embed:{},colgroup:_({thead:1,col:1,tbody:1,tr:1,tfoot:1}),noscript:P,td:P,br:{},th:P,center:P,kbd:L,button:X(I,E),basefont:{},h5:L,h4:L,samp:L,h6:L,ol:Q,h1:L,h3:L,option:N,h2:L,form:X(A,D,E,I),select:_({optgroup:1,option:1}),font:L,ins:L,menu:Q,abbr:L,label:L,table:_({thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1}),code:L,tfoot:M,cite:L,li:P,input:{},iframe:P,strong:L,textarea:N,noframes:P,big:L,small:L,span:_({"#":1,br:1,b:1,strong:1,u:1,i:1,em:1,sub:1,sup:1,strike:1,span:1}),hr:L,dt:L,sub:L,optgroup:_({option:1}),param:{},bdo:L,"var":L,div:P,object:O,sup:L,dd:P,strike:L,area:{},dir:Q,map:X(_({area:1,form:1,p:1}),A,F,E),applet:O,dl:_({dt:1,dd:1}),del:L,isindex:{},fieldset:X(_({legend:1}),K),thead:M,ul:Q,acronym:L,b:L,a:X(_({a:1}),J),blockquote:X(_({td:1,tr:1,tbody:1,li:1}),P),caption:L,i:L,u:L,tbody:M,s:L,address:X(D,I),tt:L,legend:L,q:L,pre:X(G,C),p:X(_({a:1}),L),em:L,dfn:L})})();function getDomNode(node,start,ltr,startFromChild,fn,guard){var tmpNode=startFromChild&&node[start],parent;!tmpNode&&(tmpNode=node[ltr]);while(!tmpNode&&(parent=(parent||node).parentNode)){if(parent.tagName=="BODY"||guard&&!guard(parent)){return null}tmpNode=parent[ltr]}if(tmpNode&&fn&&!fn(tmpNode)){return getDomNode(tmpNode,start,ltr,false,fn)}return tmpNode}var attrFix=ie&&browser.version<9?{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder"}:{tabindex:"tabIndex",readonly:"readOnly"},styleBlock=utils.listToMap(["-webkit-box","-moz-box","block","list-item","table","table-row-group","table-header-group","table-footer-group","table-row","table-column-group","table-column","table-cell","table-caption"]);var domUtils=dom.domUtils={NODE_ELEMENT:1,NODE_DOCUMENT:9,NODE_TEXT:3,NODE_COMMENT:8,NODE_DOCUMENT_FRAGMENT:11,POSITION_IDENTICAL:0,POSITION_DISCONNECTED:1,POSITION_FOLLOWING:2,POSITION_PRECEDING:4,POSITION_IS_CONTAINED:8,POSITION_CONTAINS:16,fillChar:ie&&browser.version=="6"?"\ufeff":"\u200B",keys:{8:1,46:1,16:1,17:1,18:1,37:1,38:1,39:1,40:1,13:1},getPosition:function(nodeA,nodeB){if(nodeA===nodeB){return 0}var node,parentsA=[nodeA],parentsB=[nodeB];node=nodeA;while(node=node.parentNode){if(node===nodeB){return 10}parentsA.push(node)}node=nodeB;while(node=node.parentNode){if(node===nodeA){return 20}parentsB.push(node)}parentsA.reverse();parentsB.reverse();if(parentsA[0]!==parentsB[0]){return 1}var i=-1;while(i++,parentsA[i]===parentsB[i]){}nodeA=parentsA[i];nodeB=parentsB[i];while(nodeA=nodeA.nextSibling){if(nodeA===nodeB){return 4}}return 2},getNodeIndex:function(node,ignoreTextNode){var preNode=node,i=0;while(preNode=preNode.previousSibling){if(ignoreTextNode&&preNode.nodeType==3){if(preNode.nodeType!=preNode.nextSibling.nodeType){i++}continue}i++}return i},inDoc:function(node,doc){return domUtils.getPosition(node,doc)==10},findParent:function(node,filterFn,includeSelf){if(node&&!domUtils.isBody(node)){node=includeSelf?node:node.parentNode;while(node){if(!filterFn||filterFn(node)||domUtils.isBody(node)){return filterFn&&!filterFn(node)&&domUtils.isBody(node)?null:node}node=node.parentNode}}return null},findParentByTagName:function(node,tagNames,includeSelf,excludeFn){tagNames=utils.listToMap(utils.isArray(tagNames)?tagNames:[tagNames]);return domUtils.findParent(node,function(node){return tagNames[node.tagName]&&!(excludeFn&&excludeFn(node))},includeSelf)},findParents:function(node,includeSelf,filterFn,closerFirst){var parents=includeSelf&&(filterFn&&filterFn(node)||!filterFn)?[node]:[];while(node=domUtils.findParent(node,filterFn)){parents.push(node)}return closerFirst?parents:parents.reverse()},insertAfter:function(node,newNode){return node.nextSibling?node.parentNode.insertBefore(newNode,node.nextSibling):node.parentNode.appendChild(newNode)},remove:function(node,keepChildren){var parent=node.parentNode,child;if(parent){if(keepChildren&&node.hasChildNodes()){while(child=node.firstChild){parent.insertBefore(child,node)}}parent.removeChild(node)}return node},getNextDomNode:function(node,startFromChild,filterFn,guard){return getDomNode(node,"firstChild","nextSibling",startFromChild,filterFn,guard)},getPreDomNode:function(node,startFromChild,filterFn,guard){return getDomNode(node,"lastChild","previousSibling",startFromChild,filterFn,guard)},isBookmarkNode:function(node){return node.nodeType==1&&node.id&&/^_baidu_bookmark_/i.test(node.id)},getWindow:function(node){var doc=node.ownerDocument||node;return doc.defaultView||doc.parentWindow},getCommonAncestor:function(nodeA,nodeB){if(nodeA===nodeB){return nodeA}var parentsA=[nodeA],parentsB=[nodeB],parent=nodeA,i=-1;while(parent=parent.parentNode){if(parent===nodeB){return parent}parentsA.push(parent)}parent=nodeB;while(parent=parent.parentNode){if(parent===nodeA){return parent}parentsB.push(parent)}parentsA.reverse();parentsB.reverse();while(i++,parentsA[i]===parentsB[i]){}return i==0?null:parentsA[i-1]},clearEmptySibling:function(node,ignoreNext,ignorePre){function clear(next,dir){var tmpNode;while(next&&!domUtils.isBookmarkNode(next)&&(domUtils.isEmptyInlineElement(next)||!new RegExp("[^\t\n\r"+domUtils.fillChar+"]").test(next.nodeValue))){tmpNode=next[dir];domUtils.remove(next);next=tmpNode}}!ignoreNext&&clear(node.nextSibling,"nextSibling");!ignorePre&&clear(node.previousSibling,"previousSibling")},split:function(node,offset){var doc=node.ownerDocument;if(browser.ie&&offset==node.nodeValue.length){var next=doc.createTextNode("");return domUtils.insertAfter(node,next)}var retval=node.splitText(offset);if(browser.ie8){var tmpNode=doc.createTextNode("");domUtils.insertAfter(retval,tmpNode);domUtils.remove(tmpNode)}return retval},isWhitespace:function(node){return !new RegExp("[^ \t\n\r"+domUtils.fillChar+"]").test(node.nodeValue)},getXY:function(element){var x=0,y=0;while(element.offsetParent){y+=element.offsetTop;x+=element.offsetLeft;element=element.offsetParent}return{x:x,y:y}},on:function(element,type,handler){var types=utils.isArray(type)?type:utils.trim(type).split(/\s+/),k=types.length;if(k){while(k--){type=types[k];if(element.addEventListener){element.addEventListener(type,handler,false)}else{if(!handler._d){handler._d={els:[]}}var key=type+handler.toString(),index=utils.indexOf(handler._d.els,element);if(!handler._d[key]||index==-1){if(index==-1){handler._d.els.push(element)}if(!handler._d[key]){handler._d[key]=function(evt){return handler.call(evt.srcElement,evt||window.event)}}element.attachEvent("on"+type,handler._d[key])}}}}element=null},un:function(element,type,handler){var types=utils.isArray(type)?type:utils.trim(type).split(/\s+/),k=types.length;if(k){while(k--){type=types[k];if(element.removeEventListener){element.removeEventListener(type,handler,false)}else{var key=type+handler.toString();try{element.detachEvent("on"+type,handler._d?handler._d[key]:handler)}catch(e){}if(handler._d&&handler._d[key]){var index=utils.indexOf(handler._d.els,element);if(index!=-1){handler._d.els.splice(index,1)}handler._d.els.length==0&&delete handler._d[key]}}}}},isSameElement:function(nodeA,nodeB){if(nodeA.tagName!=nodeB.tagName){return false}var thisAttrs=nodeA.attributes,otherAttrs=nodeB.attributes;if(!ie&&thisAttrs.length!=otherAttrs.length){return false}var attrA,attrB,al=0,bl=0;for(var i=0;attrA=thisAttrs[i++];){if(attrA.nodeName=="style"){if(attrA.specified){al++}if(domUtils.isSameStyle(nodeA,nodeB)){continue}else{return false}}if(ie){if(attrA.specified){al++;attrB=otherAttrs.getNamedItem(attrA.nodeName)}else{continue}}else{attrB=nodeB.attributes[attrA.nodeName]}if(!attrB.specified||attrA.nodeValue!=attrB.nodeValue){return false}}if(ie){for(i=0;attrB=otherAttrs[i++];){if(attrB.specified){bl++}}if(al!=bl){return false}}return true},isSameStyle:function(nodeA,nodeB){var styleA=nodeA.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":"),styleB=nodeB.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":");if(browser.opera){styleA=nodeA.style;styleB=nodeB.style;if(styleA.length!=styleB.length){return false}for(var p in styleA){if(/^(\d+|csstext)$/i.test(p)){continue}if(styleA[p]!=styleB[p]){return false}}return true}if(!styleA||!styleB){return styleA==styleB}styleA=styleA.split(";");styleB=styleB.split(";");if(styleA.length!=styleB.length){return false}for(var i=0,ci;ci=styleA[i++];){if(utils.indexOf(styleB,ci)==-1){return false}}return true},isBlockElm:function(node){return node.nodeType==1&&(dtd.$block[node.tagName]||styleBlock[domUtils.getComputedStyle(node,"display")])&&!dtd.$nonChild[node.tagName]},isBody:function(node){return node&&node.nodeType==1&&node.tagName.toLowerCase()=="body"},breakParent:function(node,parent){var tmpNode,parentClone=node,clone=node,leftNodes,rightNodes;do{parentClone=parentClone.parentNode;if(leftNodes){tmpNode=parentClone.cloneNode(false);tmpNode.appendChild(leftNodes);leftNodes=tmpNode;tmpNode=parentClone.cloneNode(false);tmpNode.appendChild(rightNodes);rightNodes=tmpNode}else{leftNodes=parentClone.cloneNode(false);rightNodes=leftNodes.cloneNode(false)}while(tmpNode=clone.previousSibling){leftNodes.insertBefore(tmpNode,leftNodes.firstChild)}while(tmpNode=clone.nextSibling){rightNodes.appendChild(tmpNode)}clone=parentClone}while(parent!==parentClone);tmpNode=parent.parentNode;tmpNode.insertBefore(leftNodes,parent);tmpNode.insertBefore(rightNodes,parent);tmpNode.insertBefore(node,rightNodes);domUtils.remove(parent);return node},isEmptyInlineElement:function(node){if(node.nodeType!=1||!dtd.$removeEmpty[node.tagName]){return 0}node=node.firstChild;while(node){if(domUtils.isBookmarkNode(node)){return 0}if(node.nodeType==1&&!domUtils.isEmptyInlineElement(node)||node.nodeType==3&&!domUtils.isWhitespace(node)){return 0}node=node.nextSibling}return 1},trimWhiteTextNode:function(node){function remove(dir){var child;while((child=node[dir])&&child.nodeType==3&&domUtils.isWhitespace(child)){node.removeChild(child)}}remove("firstChild");remove("lastChild")},mergeChild:function(node,tagName,attrs){var list=domUtils.getElementsByTagName(node,node.tagName.toLowerCase());for(var i=0,ci;ci=list[i++];){if(!ci.parentNode||domUtils.isBookmarkNode(ci)){continue}if(ci.tagName.toLowerCase()=="span"){if(node===ci.parentNode){domUtils.trimWhiteTextNode(node);if(node.childNodes.length==1){node.style.cssText=ci.style.cssText+";"+node.style.cssText;domUtils.remove(ci,true);continue}}ci.style.cssText=node.style.cssText+";"+ci.style.cssText;if(attrs){var style=attrs.style;if(style){style=style.split(";");for(var j=0,s;s=style[j++];){ci.style[utils.cssStyleToDomStyle(s.split(":")[0])]=s.split(":")[1]}}}if(domUtils.isSameStyle(ci,node)){domUtils.remove(ci,true)}continue}if(domUtils.isSameElement(node,ci)){domUtils.remove(ci,true)}}},getElementsByTagName:function(node,name,filter){if(filter&&utils.isString(filter)){var className=filter;filter=function(node){return domUtils.hasClass(node,className)}}name=utils.trim(name).replace(/[ ]{2,}/g," ").split(" ");var arr=[];for(var n=0,ni;ni=name[n++];){var list=node.getElementsByTagName(ni);for(var i=0,ci;ci=list[i++];){if(!filter||filter(ci)){arr.push(ci)}}}return arr},mergeToParent:function(node){var parent=node.parentNode;while(parent&&dtd.$removeEmpty[parent.tagName]){if(parent.tagName==node.tagName||parent.tagName=="A"){domUtils.trimWhiteTextNode(parent);if(parent.tagName=="SPAN"&&!domUtils.isSameStyle(parent,node)||(parent.tagName=="A"&&node.tagName=="SPAN")){if(parent.childNodes.length>1||parent!==node.parentNode){node.style.cssText=parent.style.cssText+";"+node.style.cssText;parent=parent.parentNode;continue}else{parent.style.cssText+=";"+node.style.cssText;if(parent.tagName=="A"){parent.style.textDecoration="underline"}}}if(parent.tagName!="A"){parent===node.parentNode&&domUtils.remove(node,true);break}}parent=parent.parentNode}},mergeSibling:function(node,ignorePre,ignoreNext){function merge(rtl,start,node){var next;if((next=node[rtl])&&!domUtils.isBookmarkNode(next)&&next.nodeType==1&&domUtils.isSameElement(node,next)){while(next.firstChild){if(start=="firstChild"){node.insertBefore(next.lastChild,node.firstChild)}else{node.appendChild(next.firstChild)}}domUtils.remove(next)}}!ignorePre&&merge("previousSibling","firstChild",node);!ignoreNext&&merge("nextSibling","lastChild",node)},unSelectable:ie&&browser.ie9below||browser.opera?function(node){node.onselectstart=function(){return false};node.onclick=node.onkeyup=node.onkeydown=function(){return false};node.unselectable="on";node.setAttribute("unselectable","on");for(var i=0,ci;ci=node.all[i++];){switch(ci.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:ci.unselectable="on";node.setAttribute("unselectable","on")}}}:function(node){node.style.MozUserSelect=node.style.webkitUserSelect=node.style.msUserSelect=node.style.KhtmlUserSelect="none"},removeAttributes:function(node,attrNames){attrNames=utils.isArray(attrNames)?attrNames:utils.trim(attrNames).replace(/[ ]{2,}/g," ").split(" ");for(var i=0,ci;ci=attrNames[i++];){ci=attrFix[ci]||ci;switch(ci){case"className":node[ci]="";break;case"style":node.style.cssText="";var val=node.getAttributeNode("style");!browser.ie&&val&&node.removeAttributeNode(val)}node.removeAttribute(ci)}},createElement:function(doc,tag,attrs){return domUtils.setAttributes(doc.createElement(tag),attrs)},setAttributes:function(node,attrs){for(var attr in attrs){if(attrs.hasOwnProperty(attr)){var value=attrs[attr];switch(attr){case"class":node.className=value;break;case"style":node.style.cssText=node.style.cssText+";"+value;break;case"innerHTML":node[attr]=value;break;case"value":node.value=value;break;default:node.setAttribute(attrFix[attr]||attr,value)}}}return node},getComputedStyle:function(element,styleName){var pros="width height top left";if(pros.indexOf(styleName)>-1){return element["offset"+styleName.replace(/^\w/,function(s){return s.toUpperCase()})]+"px"}if(element.nodeType==3){element=element.parentNode}if(browser.ie&&browser.version<9&&styleName=="font-size"&&!element.style.fontSize&&!dtd.$empty[element.tagName]&&!dtd.$nonChild[element.tagName]){var span=element.ownerDocument.createElement("span");span.style.cssText="padding:0;border:0;font-family:simsun;";span.innerHTML=".";element.appendChild(span);var result=span.offsetHeight;element.removeChild(span);span=null;return result+"px"}try{var value=domUtils.getStyle(element,styleName)||(window.getComputedStyle?domUtils.getWindow(element).getComputedStyle(element,"").getPropertyValue(styleName):(element.currentStyle||element.style)[utils.cssStyleToDomStyle(styleName)])}catch(e){return""}return utils.transUnitToPx(utils.fixColor(styleName,value))},removeClasses:function(elm,classNames){classNames=utils.isArray(classNames)?classNames:utils.trim(classNames).replace(/[ ]{2,}/g," ").split(" ");for(var i=0,ci,cls=elm.className;ci=classNames[i++];){cls=cls.replace(new RegExp("\\b"+ci+"\\b"),"")}cls=utils.trim(cls).replace(/[ ]{2,}/g," ");if(cls){elm.className=cls}else{domUtils.removeAttributes(elm,["class"])}},addClass:function(elm,classNames){if(!elm){return}classNames=utils.trim(classNames).replace(/[ ]{2,}/g," ").split(" ");for(var i=0,ci,cls=elm.className;ci=classNames[i++];){if(!new RegExp("\\b"+ci+"\\b").test(cls)){cls+=" "+ci}}elm.className=utils.trim(cls)},hasClass:function(element,className){if(utils.isRegExp(className)){return className.test(element.className)}className=utils.trim(className).replace(/[ ]{2,}/g," ").split(" ");for(var i=0,ci,cls=element.className;ci=className[i++];){if(!new RegExp("\\b"+ci+"\\b","i").test(cls)){return false}}return i-1==className.length},preventDefault:function(evt){evt.preventDefault?evt.preventDefault():(evt.returnValue=false)},removeStyle:function(element,name){if(browser.ie){if(name=="color"){name="(^|;)"+name}element.style.cssText=element.style.cssText.replace(new RegExp(name+"[^:]*:[^;]+;?","ig"),"")}else{if(element.style.removeProperty){element.style.removeProperty(name)}else{element.style.removeAttribute(utils.cssStyleToDomStyle(name))}}if(!element.style.cssText){domUtils.removeAttributes(element,["style"])}},getStyle:function(element,name){var value=element.style[utils.cssStyleToDomStyle(name)];return utils.fixColor(name,value)},setStyle:function(element,name,value){element.style[utils.cssStyleToDomStyle(name)]=value;if(!utils.trim(element.style.cssText)){this.removeAttributes(element,"style")}},setStyles:function(element,styles){for(var name in styles){if(styles.hasOwnProperty(name)){domUtils.setStyle(element,name,styles[name])}}},removeDirtyAttr:function(node){for(var i=0,ci,nodes=node.getElementsByTagName("*");ci=nodes[i++];){ci.removeAttribute("_moz_dirty")}node.removeAttribute("_moz_dirty")},getChildCount:function(node,fn){var count=0,first=node.firstChild;fn=fn||function(){return 1};while(first){if(fn(first)){count++}first=first.nextSibling}return count},isEmptyNode:function(node){return !node.firstChild||domUtils.getChildCount(node,function(node){return !domUtils.isBr(node)&&!domUtils.isBookmarkNode(node)&&!domUtils.isWhitespace(node)})==0},clearSelectedArr:function(nodes){var node;while(node=nodes.pop()){domUtils.removeAttributes(node,["class"])}},scrollToView:function(node,win,offsetTop){var getViewPaneSize=function(){var doc=win.document,mode=doc.compatMode=="CSS1Compat";return{width:(mode?doc.documentElement.clientWidth:doc.body.clientWidth)||0,height:(mode?doc.documentElement.clientHeight:doc.body.clientHeight)||0}},getScrollPosition=function(win){if("pageXOffset" in win){return{x:win.pageXOffset||0,y:win.pageYOffset||0}}else{var doc=win.document;return{x:doc.documentElement.scrollLeft||doc.body.scrollLeft||0,y:doc.documentElement.scrollTop||doc.body.scrollTop||0}}};var winHeight=getViewPaneSize().height,offset=winHeight*-1+offsetTop;offset+=(node.offsetHeight||0);var elementPosition=domUtils.getXY(node);offset+=elementPosition.y;var currentScroll=getScrollPosition(win).y;if(offset>currentScroll||offset<currentScroll-winHeight){win.scrollTo(0,offset+(offset<0?-20:20))}},isBr:function(node){return node.nodeType==1&&node.tagName=="BR"},isFillChar:function(node,isInStart){if(node.nodeType!=3){return false}var text=node.nodeValue;if(isInStart){return new RegExp("^"+domUtils.fillChar).test(text)}return !text.replace(new RegExp(domUtils.fillChar,"g"),"").length},isStartInblock:function(range){var tmpRange=range.cloneRange(),flag=0,start=tmpRange.startContainer,tmp;if(start.nodeType==1&&start.childNodes[tmpRange.startOffset]){start=start.childNodes[tmpRange.startOffset];var pre=start.previousSibling;while(pre&&domUtils.isFillChar(pre)){start=pre;pre=pre.previousSibling}}if(this.isFillChar(start,true)&&tmpRange.startOffset==1){tmpRange.setStartBefore(start);start=tmpRange.startContainer}while(start&&domUtils.isFillChar(start)){tmp=start;start=start.previousSibling}if(tmp){tmpRange.setStartBefore(tmp);start=tmpRange.startContainer}if(start.nodeType==1&&domUtils.isEmptyNode(start)&&tmpRange.startOffset==1){tmpRange.setStart(start,0).collapse(true)}while(!tmpRange.startOffset){start=tmpRange.startContainer;if(domUtils.isBlockElm(start)||domUtils.isBody(start)){flag=1;break}var pre=tmpRange.startContainer.previousSibling,tmpNode;if(!pre){tmpRange.setStartBefore(tmpRange.startContainer)}else{while(pre&&domUtils.isFillChar(pre)){tmpNode=pre;pre=pre.previousSibling}if(tmpNode){tmpRange.setStartBefore(tmpNode)}else{tmpRange.setStartBefore(tmpRange.startContainer)}}}return flag&&!domUtils.isBody(tmpRange.startContainer)?1:0},isEmptyBlock:function(node,reg){if(node.nodeType!=1){return 0}reg=reg||new RegExp("[ \xa0\t\r\n"+domUtils.fillChar+"]","g");if(node[browser.ie?"innerText":"textContent"].replace(reg,"").length>0){return 0}for(var n in dtd.$isNotEmpty){if(node.getElementsByTagName(n).length){return 0}}return 1},setViewportOffset:function(element,offset){var left=parseInt(element.style.left)|0;var top=parseInt(element.style.top)|0;var rect=element.getBoundingClientRect();var offsetLeft=offset.left-rect.left;var offsetTop=offset.top-rect.top;if(offsetLeft){element.style.left=left+offsetLeft+"px"}if(offsetTop){element.style.top=top+offsetTop+"px"}},fillNode:function(doc,node){var tmpNode=browser.ie?doc.createTextNode(domUtils.fillChar):doc.createElement("br");node.innerHTML="";node.appendChild(tmpNode)},moveChild:function(src,tag,dir){while(src.firstChild){if(dir&&tag.firstChild){tag.insertBefore(src.lastChild,tag.firstChild)}else{tag.appendChild(src.firstChild)}}},hasNoAttributes:function(node){return browser.ie?/^<\w+\s*?>/.test(node.outerHTML):node.attributes.length==0},isCustomeNode:function(node){return node.nodeType==1&&node.getAttribute("_ue_custom_node_")},isTagNode:function(node,tagNames){return node.nodeType==1&&new RegExp("\\b"+node.tagName+"\\b","i").test(tagNames)},filterNodeList:function(nodelist,filter,forAll){var results=[];if(!utils.isFunction(filter)){var str=filter;filter=function(n){return utils.indexOf(utils.isArray(str)?str:str.split(" "),n.tagName.toLowerCase())!=-1}}utils.each(nodelist,function(n){filter(n)&&results.push(n)});return results.length==0?null:results.length==1||!forAll?results[0]:results},isInNodeEndBoundary:function(rng,node){var start=rng.startContainer;if(start.nodeType==3&&rng.startOffset!=start.nodeValue.length){return 0}if(start.nodeType==1&&rng.startOffset!=start.childNodes.length){return 0}while(start!==node){if(start.nextSibling){return 0}start=start.parentNode}return 1},isBoundaryNode:function(node,dir){var tmp;while(!domUtils.isBody(node)){tmp=node;node=node.parentNode;if(tmp!==node[dir]){return false}}return true},fillHtml:browser.ie11below?"&nbsp;":"<br/>"};var fillCharReg=new RegExp(domUtils.fillChar,"g");(function(){var guid=0,fillChar=domUtils.fillChar,fillData;function updateCollapse(range){range.collapsed=range.startContainer&&range.endContainer&&range.startContainer===range.endContainer&&range.startOffset==range.endOffset}function selectOneNode(rng){return !rng.collapsed&&rng.startContainer.nodeType==1&&rng.startContainer===rng.endContainer&&rng.endOffset-rng.startOffset==1}function setEndPoint(toStart,node,offset,range){if(node.nodeType==1&&(dtd.$empty[node.tagName]||dtd.$nonChild[node.tagName])){offset=domUtils.getNodeIndex(node)+(toStart?0:1);node=node.parentNode}if(toStart){range.startContainer=node;range.startOffset=offset;if(!range.endContainer){range.collapse(true)}}else{range.endContainer=node;range.endOffset=offset;if(!range.startContainer){range.collapse(false)}}updateCollapse(range);return range}function execContentsAction(range,action){var start=range.startContainer,end=range.endContainer,startOffset=range.startOffset,endOffset=range.endOffset,doc=range.document,frag=doc.createDocumentFragment(),tmpStart,tmpEnd;if(start.nodeType==1){start=start.childNodes[startOffset]||(tmpStart=start.appendChild(doc.createTextNode("")))}if(end.nodeType==1){end=end.childNodes[endOffset]||(tmpEnd=end.appendChild(doc.createTextNode("")))}if(start===end&&start.nodeType==3){frag.appendChild(doc.createTextNode(start.substringData(startOffset,endOffset-startOffset)));if(action){start.deleteData(startOffset,endOffset-startOffset);range.collapse(true)}return frag}var current,currentLevel,clone=frag,startParents=domUtils.findParents(start,true),endParents=domUtils.findParents(end,true);for(var i=0;startParents[i]==endParents[i];){i++}for(var j=i,si;si=startParents[j];j++){current=si.nextSibling;if(si==start){if(!tmpStart){if(range.startContainer.nodeType==3){clone.appendChild(doc.createTextNode(start.nodeValue.slice(startOffset)));if(action){start.deleteData(startOffset,start.nodeValue.length-startOffset)}}else{clone.appendChild(!action?start.cloneNode(true):start)}}}else{currentLevel=si.cloneNode(false);clone.appendChild(currentLevel)}while(current){if(current===end||current===endParents[j]){break}si=current.nextSibling;clone.appendChild(!action?current.cloneNode(true):current);current=si}clone=currentLevel}clone=frag;if(!startParents[i]){clone.appendChild(startParents[i-1].cloneNode(false));clone=clone.firstChild}for(var j=i,ei;ei=endParents[j];j++){current=ei.previousSibling;if(ei==end){if(!tmpEnd&&range.endContainer.nodeType==3){clone.appendChild(doc.createTextNode(end.substringData(0,endOffset)));if(action){end.deleteData(0,endOffset)}}}else{currentLevel=ei.cloneNode(false);clone.appendChild(currentLevel)}if(j!=i||!startParents[i]){while(current){if(current===start){break}ei=current.previousSibling;clone.insertBefore(!action?current.cloneNode(true):current,clone.firstChild);current=ei}}clone=currentLevel}if(action){range.setStartBefore(!endParents[i]?endParents[i-1]:!startParents[i]?startParents[i-1]:endParents[i]).collapse(true)}tmpStart&&domUtils.remove(tmpStart);tmpEnd&&domUtils.remove(tmpEnd);return frag}var Range=dom.Range=function(document){var me=this;me.startContainer=me.startOffset=me.endContainer=me.endOffset=null;me.document=document;me.collapsed=true};function removeFillData(doc,excludeNode){try{if(fillData&&domUtils.inDoc(fillData,doc)){if(!fillData.nodeValue.replace(fillCharReg,"").length){var tmpNode=fillData.parentNode;domUtils.remove(fillData);while(tmpNode&&domUtils.isEmptyInlineElement(tmpNode)&&(browser.safari?!(domUtils.getPosition(tmpNode,excludeNode)&domUtils.POSITION_CONTAINS):!tmpNode.contains(excludeNode))){fillData=tmpNode.parentNode;domUtils.remove(tmpNode);tmpNode=fillData}}else{fillData.nodeValue=fillData.nodeValue.replace(fillCharReg,"")}}}catch(e){}}function mergeSibling(node,dir){var tmpNode;node=node[dir];while(node&&domUtils.isFillChar(node)){tmpNode=node[dir];domUtils.remove(node);node=tmpNode}}Range.prototype={cloneContents:function(){return this.collapsed?null:execContentsAction(this,0)},deleteContents:function(){var txt;if(!this.collapsed){execContentsAction(this,1)}if(browser.webkit){txt=this.startContainer;if(txt.nodeType==3&&!txt.nodeValue.length){this.setStartBefore(txt).collapse(true);domUtils.remove(txt)}}return this},extractContents:function(){return this.collapsed?null:execContentsAction(this,2)},setStart:function(node,offset){return setEndPoint(true,node,offset,this)},setEnd:function(node,offset){return setEndPoint(false,node,offset,this)},setStartAfter:function(node){return this.setStart(node.parentNode,domUtils.getNodeIndex(node)+1)},setStartBefore:function(node){return this.setStart(node.parentNode,domUtils.getNodeIndex(node))},setEndAfter:function(node){return this.setEnd(node.parentNode,domUtils.getNodeIndex(node)+1)},setEndBefore:function(node){return this.setEnd(node.parentNode,domUtils.getNodeIndex(node))},setStartAtFirst:function(node){return this.setStart(node,0)},setStartAtLast:function(node){return this.setStart(node,node.nodeType==3?node.nodeValue.length:node.childNodes.length)},setEndAtFirst:function(node){return this.setEnd(node,0)},setEndAtLast:function(node){return this.setEnd(node,node.nodeType==3?node.nodeValue.length:node.childNodes.length)},selectNode:function(node){return this.setStartBefore(node).setEndAfter(node)},selectNodeContents:function(node){return this.setStart(node,0).setEndAtLast(node)},cloneRange:function(){var me=this;return new Range(me.document).setStart(me.startContainer,me.startOffset).setEnd(me.endContainer,me.endOffset)},collapse:function(toStart){var me=this;if(toStart){me.endContainer=me.startContainer;me.endOffset=me.startOffset}else{me.startContainer=me.endContainer;me.startOffset=me.endOffset}me.collapsed=true;return me},shrinkBoundary:function(ignoreEnd){var me=this,child,collapsed=me.collapsed;function check(node){return node.nodeType==1&&!domUtils.isBookmarkNode(node)&&!dtd.$empty[node.tagName]&&!dtd.$nonChild[node.tagName]}while(me.startContainer.nodeType==1&&(child=me.startContainer.childNodes[me.startOffset])&&check(child)){me.setStart(child,0)}if(collapsed){return me.collapse(true)}if(!ignoreEnd){while(me.endContainer.nodeType==1&&me.endOffset>0&&(child=me.endContainer.childNodes[me.endOffset-1])&&check(child)){me.setEnd(child,child.childNodes.length)}}return me},getCommonAncestor:function(includeSelf,ignoreTextNode){var me=this,start=me.startContainer,end=me.endContainer;if(start===end){if(includeSelf&&selectOneNode(this)){start=start.childNodes[me.startOffset];if(start.nodeType==1){return start}}return ignoreTextNode&&start.nodeType==3?start.parentNode:start}return domUtils.getCommonAncestor(start,end)},trimBoundary:function(ignoreEnd){this.txtToElmBoundary();var start=this.startContainer,offset=this.startOffset,collapsed=this.collapsed,end=this.endContainer;if(start.nodeType==3){if(offset==0){this.setStartBefore(start)}else{if(offset>=start.nodeValue.length){this.setStartAfter(start)}else{var textNode=domUtils.split(start,offset);if(start===end){this.setEnd(textNode,this.endOffset-offset)}else{if(start.parentNode===end){this.endOffset+=1}}this.setStartBefore(textNode)}}if(collapsed){return this.collapse(true)}}if(!ignoreEnd){offset=this.endOffset;end=this.endContainer;if(end.nodeType==3){if(offset==0){this.setEndBefore(end)}else{offset<end.nodeValue.length&&domUtils.split(end,offset);this.setEndAfter(end)}}}return this},txtToElmBoundary:function(ignoreCollapsed){function adjust(r,c){var container=r[c+"Container"],offset=r[c+"Offset"];if(container.nodeType==3){if(!offset){r["set"+c.replace(/(\w)/,function(a){return a.toUpperCase()})+"Before"](container)}else{if(offset>=container.nodeValue.length){r["set"+c.replace(/(\w)/,function(a){return a.toUpperCase()})+"After"](container)}}}}if(ignoreCollapsed||!this.collapsed){adjust(this,"start");adjust(this,"end")}return this},insertNode:function(node){var first=node,length=1;if(node.nodeType==11){first=node.firstChild;length=node.childNodes.length}this.trimBoundary(true);var start=this.startContainer,offset=this.startOffset;var nextNode=start.childNodes[offset];if(nextNode){start.insertBefore(node,nextNode)}else{start.appendChild(node)}if(first.parentNode===this.endContainer){this.endOffset=this.endOffset+length}return this.setStartBefore(first)},setCursor:function(toEnd,noFillData){return this.collapse(!toEnd).select(noFillData)},createBookmark:function(serialize,same){var endNode,startNode=this.document.createElement("span");startNode.style.cssText="display:none;line-height:0px;";startNode.appendChild(this.document.createTextNode("\u200D"));startNode.id="_baidu_bookmark_start_"+(same?"":guid++);if(!this.collapsed){endNode=startNode.cloneNode(true);endNode.id="_baidu_bookmark_end_"+(same?"":guid++)}this.insertNode(startNode);if(endNode){this.collapse().insertNode(endNode).setEndBefore(endNode)}this.setStartAfter(startNode);return{start:serialize?startNode.id:startNode,end:endNode?serialize?endNode.id:endNode:null,id:serialize}},moveToBookmark:function(bookmark){var start=bookmark.id?this.document.getElementById(bookmark.start):bookmark.start,end=bookmark.end&&bookmark.id?this.document.getElementById(bookmark.end):bookmark.end;this.setStartBefore(start);domUtils.remove(start);if(end){this.setEndBefore(end);domUtils.remove(end)}else{this.collapse(true)}return this},enlarge:function(toBlock,stopFn){var isBody=domUtils.isBody,pre,node,tmp=this.document.createTextNode("");if(toBlock){node=this.startContainer;if(node.nodeType==1){if(node.childNodes[this.startOffset]){pre=node=node.childNodes[this.startOffset]}else{node.appendChild(tmp);pre=node=tmp}}else{pre=node}while(1){if(domUtils.isBlockElm(node)){node=pre;while((pre=node.previousSibling)&&!domUtils.isBlockElm(pre)){node=pre}this.setStartBefore(node);break}pre=node;node=node.parentNode}node=this.endContainer;if(node.nodeType==1){if(pre=node.childNodes[this.endOffset]){node.insertBefore(tmp,pre)}else{node.appendChild(tmp)}pre=node=tmp}else{pre=node}while(1){if(domUtils.isBlockElm(node)){node=pre;while((pre=node.nextSibling)&&!domUtils.isBlockElm(pre)){node=pre}this.setEndAfter(node);break}pre=node;node=node.parentNode}if(tmp.parentNode===this.endContainer){this.endOffset--}domUtils.remove(tmp)}if(!this.collapsed){while(this.startOffset==0){if(stopFn&&stopFn(this.startContainer)){break}if(isBody(this.startContainer)){break}this.setStartBefore(this.startContainer)}while(this.endOffset==(this.endContainer.nodeType==1?this.endContainer.childNodes.length:this.endContainer.nodeValue.length)){if(stopFn&&stopFn(this.endContainer)){break}if(isBody(this.endContainer)){break}this.setEndAfter(this.endContainer)}}return this},enlargeToBlockElm:function(ignoreEnd){while(!domUtils.isBlockElm(this.startContainer)){this.setStartBefore(this.startContainer)}if(!ignoreEnd){while(!domUtils.isBlockElm(this.endContainer)){this.setEndAfter(this.endContainer)}}return this},adjustmentBoundary:function(){if(!this.collapsed){while(!domUtils.isBody(this.startContainer)&&this.startOffset==this.startContainer[this.startContainer.nodeType==3?"nodeValue":"childNodes"].length&&this.startContainer[this.startContainer.nodeType==3?"nodeValue":"childNodes"].length){this.setStartAfter(this.startContainer)}while(!domUtils.isBody(this.endContainer)&&!this.endOffset&&this.endContainer[this.endContainer.nodeType==3?"nodeValue":"childNodes"].length){this.setEndBefore(this.endContainer)}}return this},applyInlineStyle:function(tagName,attrs,list){if(this.collapsed){return this}this.trimBoundary().enlarge(false,function(node){return node.nodeType==1&&domUtils.isBlockElm(node)}).adjustmentBoundary();var bookmark=this.createBookmark(),end=bookmark.end,filterFn=function(node){return node.nodeType==1?node.tagName.toLowerCase()!="br":!domUtils.isWhitespace(node)},current=domUtils.getNextDomNode(bookmark.start,false,filterFn),node,pre,range=this.cloneRange();while(current&&(domUtils.getPosition(current,end)&domUtils.POSITION_PRECEDING)){if(current.nodeType==3||dtd[tagName][current.tagName]){range.setStartBefore(current);node=current;while(node&&(node.nodeType==3||dtd[tagName][node.tagName])&&node!==end){pre=node;node=domUtils.getNextDomNode(node,node.nodeType==1,null,function(parent){return dtd[tagName][parent.tagName]})}var frag=range.setEndAfter(pre).extractContents(),elm;if(list&&list.length>0){var level,top;top=level=list[0].cloneNode(false);for(var i=1,ci;ci=list[i++];){level.appendChild(ci.cloneNode(false));level=level.firstChild}elm=level}else{elm=range.document.createElement(tagName)}if(attrs){domUtils.setAttributes(elm,attrs)}elm.appendChild(frag);range.insertNode(list?top:elm);var aNode;if(tagName=="span"&&attrs.style&&/text\-decoration/.test(attrs.style)&&(aNode=domUtils.findParentByTagName(elm,"a",true))){domUtils.setAttributes(aNode,attrs);domUtils.remove(elm,true);elm=aNode}else{domUtils.mergeSibling(elm);domUtils.clearEmptySibling(elm)}domUtils.mergeChild(elm,attrs);current=domUtils.getNextDomNode(elm,false,filterFn);domUtils.mergeToParent(elm);if(node===end){break}}else{current=domUtils.getNextDomNode(current,true,filterFn)}}return this.moveToBookmark(bookmark)},removeInlineStyle:function(tagNames){if(this.collapsed){return this}tagNames=utils.isArray(tagNames)?tagNames:[tagNames];this.shrinkBoundary().adjustmentBoundary();var start=this.startContainer,end=this.endContainer;while(1){if(start.nodeType==1){if(utils.indexOf(tagNames,start.tagName.toLowerCase())>-1){break}if(start.tagName.toLowerCase()=="body"){start=null;break}}start=start.parentNode}while(1){if(end.nodeType==1){if(utils.indexOf(tagNames,end.tagName.toLowerCase())>-1){break}if(end.tagName.toLowerCase()=="body"){end=null;break}}end=end.parentNode}var bookmark=this.createBookmark(),frag,tmpRange;if(start){tmpRange=this.cloneRange().setEndBefore(bookmark.start).setStartBefore(start);frag=tmpRange.extractContents();tmpRange.insertNode(frag);domUtils.clearEmptySibling(start,true);start.parentNode.insertBefore(bookmark.start,start)}if(end){tmpRange=this.cloneRange().setStartAfter(bookmark.end).setEndAfter(end);frag=tmpRange.extractContents();tmpRange.insertNode(frag);domUtils.clearEmptySibling(end,false,true);end.parentNode.insertBefore(bookmark.end,end.nextSibling)}var current=domUtils.getNextDomNode(bookmark.start,false,function(node){return node.nodeType==1}),next;while(current&&current!==bookmark.end){next=domUtils.getNextDomNode(current,true,function(node){return node.nodeType==1});if(utils.indexOf(tagNames,current.tagName.toLowerCase())>-1){domUtils.remove(current,true)}current=next}return this.moveToBookmark(bookmark)},getClosedNode:function(){var node;if(!this.collapsed){var range=this.cloneRange().adjustmentBoundary().shrinkBoundary();if(selectOneNode(range)){var child=range.startContainer.childNodes[range.startOffset];if(child&&child.nodeType==1&&(dtd.$empty[child.tagName]||dtd.$nonChild[child.tagName])){node=child}}}return node},select:browser.ie?function(noFillData,textRange){var nativeRange;if(!this.collapsed){this.shrinkBoundary()}var node=this.getClosedNode();if(node&&!textRange){try{nativeRange=this.document.body.createControlRange();nativeRange.addElement(node);nativeRange.select()}catch(e){}return this}var bookmark=this.createBookmark(),start=bookmark.start,end;nativeRange=this.document.body.createTextRange();nativeRange.moveToElementText(start);nativeRange.moveStart("character",1);if(!this.collapsed){var nativeRangeEnd=this.document.body.createTextRange();end=bookmark.end;nativeRangeEnd.moveToElementText(end);nativeRange.setEndPoint("EndToEnd",nativeRangeEnd)}else{if(!noFillData&&this.startContainer.nodeType!=3){var tmpText=this.document.createTextNode(fillChar),tmp=this.document.createElement("span");tmp.appendChild(this.document.createTextNode(fillChar));start.parentNode.insertBefore(tmp,start);start.parentNode.insertBefore(tmpText,start);removeFillData(this.document,tmpText);fillData=tmpText;mergeSibling(tmp,"previousSibling");mergeSibling(start,"nextSibling");nativeRange.moveStart("character",-1);nativeRange.collapse(true)}}this.moveToBookmark(bookmark);tmp&&domUtils.remove(tmp);try{nativeRange.select()}catch(e){}return this}:function(notInsertFillData){function checkOffset(rng){function check(node,offset,dir){if(node.nodeType==3&&node.nodeValue.length<offset){rng[dir+"Offset"]=node.nodeValue.length}}check(rng.startContainer,rng.startOffset,"start");check(rng.endContainer,rng.endOffset,"end")}var win=domUtils.getWindow(this.document),sel=win.getSelection(),txtNode;browser.gecko?this.document.body.focus():win.focus();if(sel){sel.removeAllRanges();if(this.collapsed&&!notInsertFillData){var start=this.startContainer,child=start;if(start.nodeType==1){child=start.childNodes[this.startOffset]}if(!(start.nodeType==3&&this.startOffset)&&(child?(!child.previousSibling||child.previousSibling.nodeType!=3):(!start.lastChild||start.lastChild.nodeType!=3))){txtNode=this.document.createTextNode(fillChar);this.insertNode(txtNode);removeFillData(this.document,txtNode);mergeSibling(txtNode,"previousSibling");mergeSibling(txtNode,"nextSibling");fillData=txtNode;this.setStart(txtNode,browser.webkit?1:0).collapse(true)}}var nativeRange=this.document.createRange();if(this.collapsed&&browser.opera&&this.startContainer.nodeType==1){var child=this.startContainer.childNodes[this.startOffset];if(!child){child=this.startContainer.lastChild;if(child&&domUtils.isBr(child)){this.setStartBefore(child).collapse(true)}}else{while(child&&domUtils.isBlockElm(child)){if(child.nodeType==1&&child.childNodes[0]){child=child.childNodes[0]}else{break}}child&&this.setStartBefore(child).collapse(true)}}checkOffset(this);nativeRange.setStart(this.startContainer,this.startOffset);nativeRange.setEnd(this.endContainer,this.endOffset);sel.addRange(nativeRange)}return this},scrollToView:function(win,offset){win=win?window:domUtils.getWindow(this.document);var me=this,span=me.document.createElement("span");span.innerHTML="&nbsp;";me.cloneRange().insertNode(span);domUtils.scrollToView(span,win,offset);domUtils.remove(span);return me},inFillChar:function(){var start=this.startContainer;if(this.collapsed&&start.nodeType==3&&start.nodeValue.replace(new RegExp("^"+domUtils.fillChar),"").length+1==start.nodeValue.length){return true}return false},createAddress:function(ignoreEnd,ignoreTxt){var addr={},me=this;function getAddress(isStart){var node=isStart?me.startContainer:me.endContainer;var parents=domUtils.findParents(node,true,function(node){return !domUtils.isBody(node)}),addrs=[];for(var i=0,ci;ci=parents[i++];){addrs.push(domUtils.getNodeIndex(ci,ignoreTxt))}var firstIndex=0;if(ignoreTxt){if(node.nodeType==3){var tmpNode=node.previousSibling;while(tmpNode&&tmpNode.nodeType==3){firstIndex+=tmpNode.nodeValue.replace(fillCharReg,"").length;tmpNode=tmpNode.previousSibling}firstIndex+=(isStart?me.startOffset:me.endOffset)}else{node=node.childNodes[isStart?me.startOffset:me.endOffset];if(node){firstIndex=domUtils.getNodeIndex(node,ignoreTxt)}else{node=isStart?me.startContainer:me.endContainer;var first=node.firstChild;while(first){if(domUtils.isFillChar(first)){first=first.nextSibling;continue}firstIndex++;if(first.nodeType==3){while(first&&first.nodeType==3){first=first.nextSibling}}else{first=first.nextSibling}}}}}else{firstIndex=isStart?domUtils.isFillChar(node)?0:me.startOffset:me.endOffset}if(firstIndex<0){firstIndex=0}addrs.push(firstIndex);return addrs}addr.startAddress=getAddress(true);if(!ignoreEnd){addr.endAddress=me.collapsed?[].concat(addr.startAddress):getAddress()}return addr},moveToAddress:function(addr,ignoreEnd){var me=this;function getNode(address,isStart){var tmpNode=me.document.body,parentNode,offset;for(var i=0,ci,l=address.length;i<l;i++){ci=address[i];parentNode=tmpNode;tmpNode=tmpNode.childNodes[ci];if(!tmpNode){offset=ci;break}}if(isStart){if(tmpNode){me.setStartBefore(tmpNode)}else{me.setStart(parentNode,offset)}}else{if(tmpNode){me.setEndBefore(tmpNode)}else{me.setEnd(parentNode,offset)}}}getNode(addr.startAddress,true);!ignoreEnd&&addr.endAddress&&getNode(addr.endAddress);return me},equals:function(rng){for(var p in this){if(this.hasOwnProperty(p)){if(this[p]!==rng[p]){return false}}}return true},traversal:function(doFn,filterFn){if(this.collapsed){return this}var bookmark=this.createBookmark(),end=bookmark.end,current=domUtils.getNextDomNode(bookmark.start,false,filterFn);while(current&&current!==end&&(domUtils.getPosition(current,end)&domUtils.POSITION_PRECEDING)){var tmpNode=domUtils.getNextDomNode(current,false,filterFn);doFn(current);current=tmpNode}return this.moveToBookmark(bookmark)}}})();(function(){function getBoundaryInformation(range,start){var getIndex=domUtils.getNodeIndex;range=range.duplicate();range.collapse(start);var parent=range.parentElement();if(!parent.hasChildNodes()){return{container:parent,offset:0}}var siblings=parent.children,child,testRange=range.duplicate(),startIndex=0,endIndex=siblings.length-1,index=-1,distance;while(startIndex<=endIndex){index=Math.floor((startIndex+endIndex)/2);child=siblings[index];testRange.moveToElementText(child);var position=testRange.compareEndPoints("StartToStart",range);if(position>0){endIndex=index-1}else{if(position<0){startIndex=index+1}else{return{container:parent,offset:getIndex(child)}}}}if(index==-1){testRange.moveToElementText(parent);testRange.setEndPoint("StartToStart",range);distance=testRange.text.replace(/(\r\n|\r)/g,"\n").length;siblings=parent.childNodes;if(!distance){child=siblings[siblings.length-1];return{container:child,offset:child.nodeValue.length}}var i=siblings.length;while(distance>0){distance-=siblings[--i].nodeValue.length}return{container:siblings[i],offset:-distance}}testRange.collapse(position>0);testRange.setEndPoint(position>0?"StartToStart":"EndToStart",range);distance=testRange.text.replace(/(\r\n|\r)/g,"\n").length;if(!distance){return dtd.$empty[child.tagName]||dtd.$nonChild[child.tagName]?{container:parent,offset:getIndex(child)+(position>0?0:1)}:{container:child,offset:position>0?0:child.childNodes.length}}while(distance>0){try{var pre=child;child=child[position>0?"previousSibling":"nextSibling"];distance-=child.nodeValue.length}catch(e){return{container:parent,offset:getIndex(pre)}}}return{container:child,offset:position>0?-distance:child.nodeValue.length+distance}}function transformIERangeToRange(ieRange,range){if(ieRange.item){range.selectNode(ieRange.item(0))}else{var bi=getBoundaryInformation(ieRange,true);range.setStart(bi.container,bi.offset);if(ieRange.compareEndPoints("StartToEnd",ieRange)!=0){bi=getBoundaryInformation(ieRange,false);range.setEnd(bi.container,bi.offset)}}return range}function _getIERange(sel){var ieRange;try{ieRange=sel.getNative().createRange()}catch(e){return null}var el=ieRange.item?ieRange.item(0):ieRange.parentElement();if((el.ownerDocument||el)===sel.document){return ieRange}return null}var Selection=dom.Selection=function(doc){var me=this,iframe;me.document=doc;if(browser.ie9below){iframe=domUtils.getWindow(doc).frameElement;domUtils.on(iframe,"beforedeactivate",function(){me._bakIERange=me.getIERange()});domUtils.on(iframe,"activate",function(){try{if(!_getIERange(me)&&me._bakIERange){me._bakIERange.select()}}catch(ex){}me._bakIERange=null})}iframe=doc=null};Selection.prototype={rangeInBody:function(rng,txtRange){var node=browser.ie9below||txtRange?rng.item?rng.item():rng.parentElement():rng.startContainer;return node===this.document.body||domUtils.inDoc(node,this.document)},getNative:function(){var doc=this.document;try{return !doc?null:browser.ie9below?doc.selection:domUtils.getWindow(doc).getSelection()}catch(e){return null}},getIERange:function(){var ieRange=_getIERange(this);if(!ieRange){if(this._bakIERange){return this._bakIERange}}return ieRange},cache:function(){this.clear();this._cachedRange=this.getRange();this._cachedStartElement=this.getStart();this._cachedStartElementPath=this.getStartElementPath()},getStartElementPath:function(){if(this._cachedStartElementPath){return this._cachedStartElementPath}var start=this.getStart();if(start){return domUtils.findParents(start,true,null,true)}return[]},clear:function(){this._cachedStartElementPath=this._cachedRange=this._cachedStartElement=null},isFocus:function(){try{if(browser.ie9below){var nativeRange=_getIERange(this);return !!(nativeRange&&this.rangeInBody(nativeRange))}else{return !!this.getNative().rangeCount}}catch(e){return false}},getRange:function(){var me=this;function optimze(range){var child=me.document.body.firstChild,collapsed=range.collapsed;while(child&&child.firstChild){range.setStart(child,0);child=child.firstChild}if(!range.startContainer){range.setStart(me.document.body,0)}if(collapsed){range.collapse(true)}}if(me._cachedRange!=null){return this._cachedRange}var range=new baidu.editor.dom.Range(me.document);if(browser.ie9below){var nativeRange=me.getIERange();if(nativeRange){try{transformIERangeToRange(nativeRange,range)}catch(e){optimze(range)}}else{optimze(range)}}else{var sel=me.getNative();if(sel&&sel.rangeCount){var firstRange=sel.getRangeAt(0);var lastRange=sel.getRangeAt(sel.rangeCount-1);range.setStart(firstRange.startContainer,firstRange.startOffset).setEnd(lastRange.endContainer,lastRange.endOffset);if(range.collapsed&&domUtils.isBody(range.startContainer)&&!range.startOffset){optimze(range)}}else{if(this._bakRange&&domUtils.inDoc(this._bakRange.startContainer,this.document)){return this._bakRange}optimze(range)}}return this._bakRange=range},getStart:function(){if(this._cachedStartElement){return this._cachedStartElement}var range=browser.ie9below?this.getIERange():this.getRange(),tmpRange,start,tmp,parent;if(browser.ie9below){if(!range){return this.document.body.firstChild}if(range.item){return range.item(0)}tmpRange=range.duplicate();tmpRange.text.length>0&&tmpRange.moveStart("character",1);tmpRange.collapse(1);start=tmpRange.parentElement();parent=tmp=range.parentElement();while(tmp=tmp.parentNode){if(tmp==start){start=parent;break}}}else{range.shrinkBoundary();start=range.startContainer;if(start.nodeType==1&&start.hasChildNodes()){start=start.childNodes[Math.min(start.childNodes.length-1,range.startOffset)]}if(start.nodeType==3){return start.parentNode}}return start},getText:function(){var nativeSel,nativeRange;if(this.isFocus()&&(nativeSel=this.getNative())){nativeRange=browser.ie9below?nativeSel.createRange():nativeSel.getRangeAt(0);return browser.ie9below?nativeRange.text:nativeRange.toString()}return""},clearRange:function(){this.getNative()[browser.ie9below?"empty":"removeAllRanges"]()}}})();(function(){var uid=0,_selectionChangeTimer;function setValue(form,editor){var textarea;if(editor.textarea){if(utils.isString(editor.textarea)){for(var i=0,ti,tis=domUtils.getElementsByTagName(form,"textarea");ti=tis[i++];){if(ti.id=="ueditor_textarea_"+editor.options.textarea){textarea=ti;break}}}else{textarea=editor.textarea}}if(!textarea){form.appendChild(textarea=domUtils.createElement(document,"textarea",{name:editor.options.textarea,id:"ueditor_textarea_"+editor.options.textarea,style:"display:none"}));editor.textarea=textarea}!textarea.getAttribute("name")&&textarea.setAttribute("name",editor.options.textarea);textarea.value=editor.hasContents()?(editor.options.allHtmlEnabled?editor.getAllHtml():editor.getContent(null,null,true)):""}function loadPlugins(me){for(var pi in UE.plugins){UE.plugins[pi].call(me)}}function checkCurLang(I18N){for(var lang in I18N){return lang}}function langReadied(me){me.langIsReady=true;me.fireEvent("langReady")}var Editor=UE.Editor=function(options){var me=this;me.uid=uid++;EventBase.call(me);me.commands={};me.options=utils.extend(utils.clone(options||{}),UEDITOR_CONFIG,true);me.shortcutkeys={};me.inputRules=[];me.outputRules=[];me.setOpt(Editor.defaultOptions(me));me.loadServerConfig();if(!utils.isEmptyObject(UE.I18N)){me.options.lang=checkCurLang(UE.I18N);UE.plugin.load(me);langReadied(me)}else{utils.loadFile(document,{src:me.options.langPath+me.options.lang+"/"+me.options.lang+".js",tag:"script",type:"text/javascript",defer:"defer"},function(){UE.plugin.load(me);langReadied(me)})}UE.instants["ueditorInstant"+me.uid]=me};Editor.prototype={registerCommand:function(name,obj){this.commands[name]=obj},ready:function(fn){var me=this;if(fn){me.isReady?fn.apply(me):me.addListener("ready",fn)}},setOpt:function(key,val){var obj={};if(utils.isString(key)){obj[key]=val}else{obj=key}utils.extend(this.options,obj,true)},getOpt:function(key){return this.options[key]},destroy:function(){var me=this;me.fireEvent("destroy");var container=me.container.parentNode;var textarea=me.textarea;if(!textarea){textarea=document.createElement("textarea");container.parentNode.insertBefore(textarea,container)}else{textarea.style.display=""}textarea.style.width=me.iframe.offsetWidth+"px";textarea.style.height=me.iframe.offsetHeight+"px";textarea.value=me.getContent();textarea.id=me.key;container.innerHTML="";domUtils.remove(container);var key=me.key;for(var p in me){if(me.hasOwnProperty(p)){delete this[p]}}UE.delEditor(key)},render:function(container){var me=this,options=me.options,getStyleValue=function(attr){return parseInt(domUtils.getComputedStyle(container,attr))};if(utils.isString(container)){container=document.getElementById(container)}if(container){if(options.initialFrameWidth){options.minFrameWidth=options.initialFrameWidth}else{options.minFrameWidth=options.initialFrameWidth=container.offsetWidth}if(options.initialFrameHeight){options.minFrameHeight=options.initialFrameHeight}else{options.initialFrameHeight=options.minFrameHeight=container.offsetHeight}container.style.width=/%$/.test(options.initialFrameWidth)?"100%":options.initialFrameWidth-getStyleValue("padding-left")-getStyleValue("padding-right")+"px";container.style.height=/%$/.test(options.initialFrameHeight)?"100%":options.initialFrameHeight-getStyleValue("padding-top")-getStyleValue("padding-bottom")+"px";container.style.zIndex=options.zIndex;var html=(ie&&browser.version<9?"":"<!DOCTYPE html>")+"<html xmlns='http://www.w3.org/1999/xhtml' class='view' ><head><style type='text/css'>.view{padding:0;word-wrap:break-word;cursor:text;height:90%;}\nbody{margin:8px;font-family:sans-serif;font-size:16px;}p{margin:5px 0;}</style>"+(options.iframeCssUrl?"<link rel='stylesheet' type='text/css' href='"+utils.unhtml(options.iframeCssUrl)+"'/>":"")+(options.initialStyle?"<style>"+options.initialStyle+"</style>":"")+"</head><body class='view' ></body><script type='text/javascript' "+(ie?"defer='defer'":"")+" id='_initialScript'>setTimeout(function(){editor = window.parent.UE.instants['ueditorInstant"+me.uid+"'];editor._setup(document);},0);var _tmpScript = document.getElementById('_initialScript');_tmpScript.parentNode.removeChild(_tmpScript);<\/script></html>";container.appendChild(domUtils.createElement(document,"iframe",{id:"ueditor_"+me.uid,width:"100%",height:"100%",frameborder:"0",src:"javascript:void(function(){document.open();"+(options.customDomain&&document.domain!=location.hostname?'document.domain="'+document.domain+'";':"")+'document.write("'+html+'");document.close();}())'}));container.style.overflow="hidden";setTimeout(function(){if(/%$/.test(options.initialFrameWidth)){options.minFrameWidth=options.initialFrameWidth=container.offsetWidth}if(/%$/.test(options.initialFrameHeight)){options.minFrameHeight=options.initialFrameHeight=container.offsetHeight;container.style.height=options.initialFrameHeight+"px"}})}},_setup:function(doc){var me=this,options=me.options;if(ie){doc.body.disabled=true;doc.body.contentEditable=true;doc.body.disabled=false}else{doc.body.contentEditable=true}doc.body.spellcheck=false;me.document=doc;me.window=doc.defaultView||doc.parentWindow;me.iframe=me.window.frameElement;me.body=doc.body;me.selection=new dom.Selection(doc);var geckoSel;if(browser.gecko&&(geckoSel=this.selection.getNative())){geckoSel.removeAllRanges()}this._initEvents();for(var form=this.iframe.parentNode;!domUtils.isBody(form);form=form.parentNode){if(form.tagName=="FORM"){me.form=form;if(me.options.autoSyncData){domUtils.on(me.window,"blur",function(){setValue(form,me)})}else{domUtils.on(form,"submit",function(){setValue(this,me)})}break}}if(options.initialContent){if(options.autoClearinitialContent){var oldExecCommand=me.execCommand;me.execCommand=function(){me.fireEvent("firstBeforeExecCommand");return oldExecCommand.apply(me,arguments)};this._setDefaultContent(options.initialContent)}else{this.setContent(options.initialContent,false,true)}}if(domUtils.isEmptyNode(me.body)){me.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>"}if(options.focus){setTimeout(function(){me.focus(me.options.focusInEnd);!me.options.autoClearinitialContent&&me._selectionChange()},0)}if(!me.container){me.container=this.iframe.parentNode}if(options.fullscreen&&me.ui){me.ui.setFullScreen(true)}try{me.document.execCommand("2D-position",false,false)}catch(e){}try{me.document.execCommand("enableInlineTableEditing",false,false)}catch(e){}try{me.document.execCommand("enableObjectResizing",false,false)}catch(e){}me._bindshortcutKeys();me.isReady=1;me.fireEvent("ready");options.onready&&options.onready.call(me);if(!browser.ie9below){domUtils.on(me.window,["blur","focus"],function(e){if(e.type=="blur"){me._bakRange=me.selection.getRange();try{me._bakNativeRange=me.selection.getNative().getRangeAt(0);me.selection.getNative().removeAllRanges()}catch(e){me._bakNativeRange=null}}else{try{me._bakRange&&me._bakRange.select()}catch(e){}}})}if(browser.gecko&&browser.version<=10902){me.body.contentEditable=false;setTimeout(function(){me.body.contentEditable=true},100);setInterval(function(){me.body.style.height=me.iframe.offsetHeight-20+"px"},100)}!options.isShow&&me.setHide();options.readonly&&me.setDisabled()},sync:function(formId){var me=this,form=formId?document.getElementById(formId):domUtils.findParent(me.iframe.parentNode,function(node){return node.tagName=="FORM"},true);form&&setValue(form,me)},setHeight:function(height,notSetHeight){if(height!==parseInt(this.iframe.parentNode.style.height)){this.iframe.parentNode.style.height=height+"px"}!notSetHeight&&(this.options.minFrameHeight=this.options.initialFrameHeight=height);this.body.style.height=height+"px";!notSetHeight&&this.trigger("setHeight")},addshortcutkey:function(cmd,keys){var obj={};if(keys){obj[cmd]=keys}else{obj=cmd}utils.extend(this.shortcutkeys,obj)},_bindshortcutKeys:function(){var me=this,shortcutkeys=this.shortcutkeys;me.addListener("keydown",function(type,e){var keyCode=e.keyCode||e.which;for(var i in shortcutkeys){var tmp=shortcutkeys[i].split(",");for(var t=0,ti;ti=tmp[t++];){ti=ti.split(":");var key=ti[0],param=ti[1];if(/^(ctrl)(\+shift)?\+(\d+)$/.test(key.toLowerCase())||/^(\d+)$/.test(key)){if(((RegExp.$1=="ctrl"?(e.ctrlKey||e.metaKey):0)&&(RegExp.$2!=""?e[RegExp.$2.slice(1)+"Key"]:1)&&keyCode==RegExp.$3)||keyCode==RegExp.$1){if(me.queryCommandState(i,param)!=-1){me.execCommand(i,param)}domUtils.preventDefault(e)}}}}})},getContent:function(cmd,fn,notSetCursor,ignoreBlank,formatter){var me=this;if(cmd&&utils.isFunction(cmd)){fn=cmd;cmd=""}if(fn?!fn():!this.hasContents()){return""}me.fireEvent("beforegetcontent");var root=UE.htmlparser(me.body.innerHTML,ignoreBlank);me.filterOutputRule(root);me.fireEvent("aftergetcontent",cmd,root);return root.toHtml(formatter)},getAllHtml:function(){var me=this,headHtml=[],html="";me.fireEvent("getAllHtml",headHtml);if(browser.ie&&browser.version>8){var headHtmlForIE9="";utils.each(me.document.styleSheets,function(si){headHtmlForIE9+=(si.href?'<link rel="stylesheet" type="text/css" href="'+si.href+'" />':"<style>"+si.cssText+"</style>")});utils.each(me.document.getElementsByTagName("script"),function(si){headHtmlForIE9+=si.outerHTML})}return"<html><head>"+(me.options.charset?'<meta http-equiv="Content-Type" content="text/html; charset='+me.options.charset+'"/>':"")+(headHtmlForIE9||me.document.getElementsByTagName("head")[0].innerHTML)+headHtml.join("\n")+"</head><body "+(ie&&browser.version<9?'class="view"':"")+">"+me.getContent(null,null,true)+"</body></html>"},getPlainTxt:function(){var reg=new RegExp(domUtils.fillChar,"g"),html=this.body.innerHTML.replace(/[\n\r]/g,"");html=html.replace(/<(p|div)[^>]*>(<br\/?>|&nbsp;)<\/\1>/gi,"\n").replace(/<br\/?>/gi,"\n").replace(/<[^>/]+>/g,"").replace(/(\n)?<\/([^>]+)>/g,function(a,b,c){return dtd.$block[c]?"\n":b?b:""});return html.replace(reg,"").replace(/\u00a0/g," ").replace(/&nbsp;/g," ")},getContentTxt:function(){var reg=new RegExp(domUtils.fillChar,"g");return this.body[browser.ie?"innerText":"textContent"].replace(reg,"").replace(/\u00a0/g," ")},setContent:function(html,isAppendTo,notFireSelectionchange){var me=this;me.fireEvent("beforesetcontent",html);var root=UE.htmlparser(html);me.filterInputRule(root);html=root.toHtml();me.body.innerHTML=(isAppendTo?me.body.innerHTML:"")+html;function isCdataDiv(node){return node.tagName=="DIV"&&node.getAttribute("cdata_tag")}if(me.options.enterTag=="p"){var child=this.body.firstChild,tmpNode;if(!child||child.nodeType==1&&(dtd.$cdata[child.tagName]||isCdataDiv(child)||domUtils.isCustomeNode(child))&&child===this.body.lastChild){this.body.innerHTML="<p>"+(browser.ie?"&nbsp;":"<br/>")+"</p>"+this.body.innerHTML}else{var p=me.document.createElement("p");while(child){while(child&&(child.nodeType==3||child.nodeType==1&&dtd.p[child.tagName]&&!dtd.$cdata[child.tagName])){tmpNode=child.nextSibling;p.appendChild(child);child=tmpNode}if(p.firstChild){if(!child){me.body.appendChild(p);break}else{child.parentNode.insertBefore(p,child);p=me.document.createElement("p")}}child=child.nextSibling}}}me.fireEvent("aftersetcontent");me.fireEvent("contentchange");!notFireSelectionchange&&me._selectionChange();me._bakRange=me._bakIERange=me._bakNativeRange=null;var geckoSel;if(browser.gecko&&(geckoSel=this.selection.getNative())){geckoSel.removeAllRanges()}if(me.options.autoSyncData){me.form&&setValue(me.form,me)}},focus:function(toEnd){try{var me=this,rng=me.selection.getRange();if(toEnd){var node=me.body.lastChild;if(node&&node.nodeType==1&&!dtd.$empty[node.tagName]){if(domUtils.isEmptyBlock(node)){rng.setStartAtFirst(node)}else{rng.setStartAtLast(node)}rng.collapse(true)}rng.setCursor(true)}else{if(!rng.collapsed&&domUtils.isBody(rng.startContainer)&&rng.startOffset==0){var node=me.body.firstChild;if(node&&node.nodeType==1&&!dtd.$empty[node.tagName]){rng.setStartAtFirst(node).collapse(true)}}rng.select(true)}this.fireEvent("focus selectionchange")}catch(e){}},isFocus:function(){return this.selection.isFocus()},blur:function(){var sel=this.selection.getNative();if(sel.empty&&browser.ie){var nativeRng=document.body.createTextRange();nativeRng.moveToElementText(document.body);nativeRng.collapse(true);nativeRng.select();sel.empty()}else{sel.removeAllRanges()}},_initEvents:function(){var me=this,doc=me.document,win=me.window;me._proxyDomEvent=utils.bind(me._proxyDomEvent,me);domUtils.on(doc,["click","contextmenu","mousedown","keydown","keyup","keypress","mouseup","mouseover","mouseout","selectstart"],me._proxyDomEvent);domUtils.on(win,["focus","blur"],me._proxyDomEvent);domUtils.on(me.body,"drop",function(e){if(browser.gecko&&e.stopPropagation){e.stopPropagation()}me.fireEvent("contentchange")});domUtils.on(doc,["mouseup","keydown"],function(evt){if(evt.type=="keydown"&&(evt.ctrlKey||evt.metaKey||evt.shiftKey||evt.altKey)){return}if(evt.button==2){return}me._selectionChange(250,evt)})},_proxyDomEvent:function(evt){if(this.fireEvent("before"+evt.type.replace(/^on/,"").toLowerCase())===false){return false}if(this.fireEvent(evt.type.replace(/^on/,""),evt)===false){return false}return this.fireEvent("after"+evt.type.replace(/^on/,"").toLowerCase())},_selectionChange:function(delay,evt){var me=this;var hackForMouseUp=false;var mouseX,mouseY;if(browser.ie&&browser.version<9&&evt&&evt.type=="mouseup"){var range=this.selection.getRange();if(!range.collapsed){hackForMouseUp=true;mouseX=evt.clientX;mouseY=evt.clientY}}clearTimeout(_selectionChangeTimer);_selectionChangeTimer=setTimeout(function(){if(!me.selection||!me.selection.getNative()){return}var ieRange;if(hackForMouseUp&&me.selection.getNative().type=="None"){ieRange=me.document.body.createTextRange();try{ieRange.moveToPoint(mouseX,mouseY)}catch(ex){ieRange=null}}var bakGetIERange;if(ieRange){bakGetIERange=me.selection.getIERange;me.selection.getIERange=function(){return ieRange}}me.selection.cache();if(bakGetIERange){me.selection.getIERange=bakGetIERange}if(me.selection._cachedRange&&me.selection._cachedStartElement){me.fireEvent("beforeselectionchange");me.fireEvent("selectionchange",!!evt);me.fireEvent("afterselectionchange");me.selection.clear()}},delay||50)},_callCmdFn:function(fnName,args){var cmdName=args[0].toLowerCase(),cmd,cmdFn;cmd=this.commands[cmdName]||UE.commands[cmdName];cmdFn=cmd&&cmd[fnName];if((!cmd||!cmdFn)&&fnName=="queryCommandState"){return 0}else{if(cmdFn){return cmdFn.apply(this,args)}}},execCommand:function(cmdName){cmdName=cmdName.toLowerCase();var me=this,result,cmd=me.commands[cmdName]||UE.commands[cmdName];if(!cmd||!cmd.execCommand){return null}if(!cmd.notNeedUndo&&!me.__hasEnterExecCommand){me.__hasEnterExecCommand=true;if(me.queryCommandState.apply(me,arguments)!=-1){me.fireEvent("saveScene");me.fireEvent.apply(me,["beforeexeccommand",cmdName].concat(arguments));result=this._callCmdFn("execCommand",arguments);me.fireEvent.apply(me,["afterexeccommand",cmdName].concat(arguments));me.fireEvent("saveScene")}me.__hasEnterExecCommand=false}else{result=this._callCmdFn("execCommand",arguments);(!me.__hasEnterExecCommand&&!cmd.ignoreContentChange&&!me._ignoreContentChange)&&me.fireEvent("contentchange")}(!me.__hasEnterExecCommand&&!cmd.ignoreContentChange&&!me._ignoreContentChange)&&me._selectionChange();return result},queryCommandState:function(cmdName){return this._callCmdFn("queryCommandState",arguments)},queryCommandValue:function(cmdName){return this._callCmdFn("queryCommandValue",arguments)},hasContents:function(tags){if(tags){for(var i=0,ci;ci=tags[i++];){if(this.document.getElementsByTagName(ci).length>0){return true}}}if(!domUtils.isEmptyBlock(this.body)){return true}tags=["div"];for(i=0;ci=tags[i++];){var nodes=domUtils.getElementsByTagName(this.document,ci);for(var n=0,cn;cn=nodes[n++];){if(domUtils.isCustomeNode(cn)){return true}}}return false},reset:function(){this.fireEvent("reset")},setEnabled:function(){var me=this,range;if(me.body.contentEditable=="false"){me.body.contentEditable=true;range=me.selection.getRange();try{range.moveToBookmark(me.lastBk);delete me.lastBk}catch(e){range.setStartAtFirst(me.body).collapse(true)}range.select(true);if(me.bkqueryCommandState){me.queryCommandState=me.bkqueryCommandState;delete me.bkqueryCommandState}if(me.bkqueryCommandValue){me.queryCommandValue=me.bkqueryCommandValue;delete me.bkqueryCommandValue}me.fireEvent("selectionchange")}},enable:function(){return this.setEnabled()},setDisabled:function(except){var me=this;except=except?utils.isArray(except)?except:[except]:[];if(me.body.contentEditable=="true"){if(!me.lastBk){me.lastBk=me.selection.getRange().createBookmark(true)}me.body.contentEditable=false;me.bkqueryCommandState=me.queryCommandState;me.bkqueryCommandValue=me.queryCommandValue;me.queryCommandState=function(type){if(utils.indexOf(except,type)!=-1){return me.bkqueryCommandState.apply(me,arguments)}return -1};me.queryCommandValue=function(type){if(utils.indexOf(except,type)!=-1){return me.bkqueryCommandValue.apply(me,arguments)}return null};me.fireEvent("selectionchange")}},disable:function(except){return this.setDisabled(except)},_setDefaultContent:function(){function clear(){var me=this;if(me.document.getElementById("initContent")){me.body.innerHTML="<p>"+(ie?"":"<br/>")+"</p>";me.removeListener("firstBeforeExecCommand focus",clear);setTimeout(function(){me.focus();me._selectionChange()},0)}}return function(cont){var me=this;me.body.innerHTML='<p id="initContent">'+cont+"</p>";me.addListener("firstBeforeExecCommand focus",clear)}}(),setShow:function(){var me=this,range=me.selection.getRange();if(me.container.style.display=="none"){try{range.moveToBookmark(me.lastBk);delete me.lastBk}catch(e){range.setStartAtFirst(me.body).collapse(true)}setTimeout(function(){range.select(true)},100);me.container.style.display=""}},show:function(){return this.setShow()},setHide:function(){var me=this;if(!me.lastBk){me.lastBk=me.selection.getRange().createBookmark(true)}me.container.style.display="none"},hide:function(){return this.setHide()},getLang:function(path){var lang=UE.I18N[this.options.lang];if(!lang){throw Error("not import language file")}path=(path||"").split(".");for(var i=0,ci;ci=path[i++];){lang=lang[ci];if(!lang){break}}return lang},getContentLength:function(ingoneHtml,tagNames){var count=this.getContent(false,false,true).length;if(ingoneHtml){tagNames=(tagNames||[]).concat(["hr","img","iframe"]);count=this.getContentTxt().replace(/[\t\r\n]+/g,"").length;for(var i=0,ci;ci=tagNames[i++];){count+=this.document.getElementsByTagName(ci).length}}return count},addInputRule:function(rule){this.inputRules.push(rule)},filterInputRule:function(root){for(var i=0,ci;ci=this.inputRules[i++];){ci.call(this,root)}},addOutputRule:function(rule){this.outputRules.push(rule)},filterOutputRule:function(root){for(var i=0,ci;ci=this.outputRules[i++];){ci.call(this,root)}},getActionUrl:function(action){var actionName=this.getOpt(action)||action,imageUrl=this.getOpt("imageUrl"),serverUrl=this.getOpt("serverUrl");if(!serverUrl&&imageUrl){serverUrl=imageUrl.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2")}if(serverUrl){serverUrl=serverUrl+(serverUrl.indexOf("?")==-1?"?":"&")+"action="+(actionName||"");return utils.formatUrl(serverUrl)}else{return""}}};utils.inherits(Editor,EventBase)})();UE.Editor.defaultOptions=function(editor){var _url=editor.options.UEDITOR_HOME_URL;return{isShow:true,initialContent:"",initialStyle:"",autoClearinitialContent:false,iframeCssUrl:_url+"themes/iframe.css",textarea:"editorValue",focus:false,focusInEnd:true,autoClearEmptyNode:true,fullscreen:false,readonly:false,zIndex:999,imagePopup:true,enterTag:"p",customDomain:false,lang:"zh-cn",langPath:_url+"lang/",theme:"default",themePath:_url+"themes/",allHtmlEnabled:false,scaleEnabled:false,tableNativeEditInFF:false,autoSyncData:true,fileNameFormat:"{time}{rand:6}"}};(function(){UE.Editor.prototype.loadServerConfig=function(){var me=this;setTimeout(function(){try{me.options.imageUrl&&me.setOpt("serverUrl",me.options.imageUrl.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2"));var configUrl=me.getActionUrl("config"),isJsonp=utils.isCrossDomainUrl(configUrl);me._serverConfigLoaded=false;configUrl&&UE.ajax.request(configUrl,{method:"GET",dataType:isJsonp?"jsonp":"",onsuccess:function(r){try{var config=isJsonp?r:eval("("+r.responseText+")");utils.extend(me.options,config);me.fireEvent("serverConfigLoaded");me._serverConfigLoaded=true}catch(e){showErrorMsg(me.getLang("loadconfigFormatError"))}},onerror:function(){showErrorMsg(me.getLang("loadconfigHttpError"))}})}catch(e){showErrorMsg(me.getLang("loadconfigError"))}});function showErrorMsg(msg){console&&console.error(msg)}};UE.Editor.prototype.isServerConfigLoaded=function(){var me=this;return me._serverConfigLoaded||false};UE.Editor.prototype.afterConfigReady=function(handler){if(!handler||!utils.isFunction(handler)){return}var me=this;var readyHandler=function(){handler.apply(me,arguments);me.removeListener("serverConfigLoaded",readyHandler)};if(me.isServerConfigLoaded()){handler.call(me,"serverConfigLoaded")}else{me.addListener("serverConfigLoaded",readyHandler)}}})();UE.ajax=function(){var fnStr="XMLHttpRequest()";try{new ActiveXObject("Msxml2.XMLHTTP");fnStr="ActiveXObject('Msxml2.XMLHTTP')"}catch(e){try{new ActiveXObject("Microsoft.XMLHTTP");fnStr="ActiveXObject('Microsoft.XMLHTTP')"}catch(e){}}var creatAjaxRequest=new Function("return new "+fnStr);function json2str(json){var strArr=[];for(var i in json){if(i=="method"||i=="timeout"||i=="async"||i=="dataType"||i=="callback"){continue}if(json[i]==undefined||json[i]==null){continue}if(!((typeof json[i]).toLowerCase()=="function"||(typeof json[i]).toLowerCase()=="object")){strArr.push(encodeURIComponent(i)+"="+encodeURIComponent(json[i]))}else{if(utils.isArray(json[i])){for(var j=0;j<json[i].length;j++){strArr.push(encodeURIComponent(i)+"[]="+encodeURIComponent(json[i][j]))}}}}return strArr.join("&")}function doAjax(url,ajaxOptions){var xhr=creatAjaxRequest(),timeIsOut=false,defaultAjaxOptions={method:"POST",timeout:5000,async:true,data:{},onsuccess:function(){},onerror:function(){}};if(typeof url==="object"){ajaxOptions=url;url=ajaxOptions.url}if(!xhr||!url){return}var ajaxOpts=ajaxOptions?utils.extend(defaultAjaxOptions,ajaxOptions):defaultAjaxOptions;var submitStr=json2str(ajaxOpts);if(!utils.isEmptyObject(ajaxOpts.data)){submitStr+=(submitStr?"&":"")+json2str(ajaxOpts.data)}var timerID=setTimeout(function(){if(xhr.readyState!=4){timeIsOut=true;xhr.abort();clearTimeout(timerID)}},ajaxOpts.timeout);var method=ajaxOpts.method.toUpperCase();var str=url+(url.indexOf("?")==-1?"?":"&")+(method=="POST"?"":submitStr+"&noCache="+ +new Date);xhr.open(method,str,ajaxOpts.async);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(!timeIsOut&&xhr.status==200){ajaxOpts.onsuccess(xhr)}else{ajaxOpts.onerror(xhr)}}};if(method=="POST"){xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");xhr.send(submitStr)}else{xhr.send(null)}}function doJsonp(url,opts){var successhandler=opts.onsuccess||function(){},scr=document.createElement("SCRIPT"),options=opts||{},charset=options.charset,callbackField=options.jsonp||"callback",callbackFnName,timeOut=options.timeOut||0,timer,reg=new RegExp("(\\?|&)"+callbackField+"=([^&]*)"),matches;if(utils.isFunction(successhandler)){callbackFnName="bd__editor__"+Math.floor(Math.random()*2147483648).toString(36);window[callbackFnName]=getCallBack(0)}else{if(utils.isString(successhandler)){callbackFnName=successhandler}else{if(matches=reg.exec(url)){callbackFnName=matches[2]}}}url=url.replace(reg,"\x241"+callbackField+"="+callbackFnName);if(url.search(reg)<0){url+=(url.indexOf("?")<0?"?":"&")+callbackField+"="+callbackFnName}var queryStr=json2str(opts);if(!utils.isEmptyObject(opts.data)){queryStr+=(queryStr?"&":"")+json2str(opts.data)}if(queryStr){url=url.replace(/\?/,"?"+queryStr+"&")}scr.onerror=getCallBack(1);if(timeOut){timer=setTimeout(getCallBack(1),timeOut)}createScriptTag(scr,url,charset);function createScriptTag(scr,url,charset){scr.setAttribute("type","text/javascript");scr.setAttribute("defer","defer");charset&&scr.setAttribute("charset",charset);scr.setAttribute("src",url);document.getElementsByTagName("head")[0].appendChild(scr)}function getCallBack(onTimeOut){return function(){try{if(onTimeOut){options.onerror&&options.onerror()}else{try{clearTimeout(timer);successhandler.apply(window,arguments)}catch(e){}}}catch(exception){options.onerror&&options.onerror.call(window,exception)}finally{options.oncomplete&&options.oncomplete.apply(window,arguments);scr.parentNode&&scr.parentNode.removeChild(scr);window[callbackFnName]=null;try{delete window[callbackFnName]}catch(e){}}}}}return{request:function(url,opts){if(opts&&opts.dataType=="jsonp"){doJsonp(url,opts)}else{doAjax(url,opts)}},getJSONP:function(url,data,fn){var opts={data:data,oncomplete:fn};doJsonp(url,opts)}}}();var filterWord=UE.filterWord=function(){function isWordDocument(str){return/(class="?Mso|style="[^"]*\bmso\-|w:WordDocument|<(v|o):|lang=)/ig.test(str)}function transUnit(v){v=v.replace(/[\d.]+\w+/g,function(m){return utils.transUnitToPx(m)});return v}function filterPasteWord(str){return str.replace(/[\t\r\n]+/g," ").replace(/<!--[\s\S]*?-->/ig,"").replace(/<v:shape [^>]*>[\s\S]*?.<\/v:shape>/gi,function(str){if(browser.opera){return""}try{if(/Bitmap/i.test(str)){return""}var width=str.match(/width:([ \d.]*p[tx])/i)[1],height=str.match(/height:([ \d.]*p[tx])/i)[1],src=str.match(/src=\s*"([^"]*)"/i)[1];return'<img width="'+transUnit(width)+'" height="'+transUnit(height)+'" src="'+src+'" />'}catch(e){return""}}).replace(/<\/?div[^>]*>/g,"").replace(/v:\w+=(["']?)[^'"]+\1/g,"").replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|xml|meta|link|style|\w+:\w+)(?=[\s\/>]))[^>]*>/gi,"").replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>").replace(/\s+(class|lang|align)\s*=\s*(['"]?)([\w-]+)\2/ig,function(str,name,marks,val){return name=="class"&&val=="MsoListParagraph"?str:""}).replace(/<(font|span)[^>]*>(\s*)<\/\1>/gi,function(a,b,c){return c.replace(/[\t\r\n ]+/g," ")}).replace(/(<[a-z][^>]*)\sstyle=(["'])([^\2]*?)\2/gi,function(str,tag,tmp,style){var n=[],s=style.replace(/^\s+|\s+$/,"").replace(/&#39;/g,"'").replace(/&quot;/gi,"'").replace(/[\d.]+(cm|pt)/g,function(str){return utils.transUnitToPx(str)}).split(/;\s*/g);for(var i=0,v;v=s[i];i++){var name,value,parts=v.split(":");if(parts.length==2){name=parts[0].toLowerCase();value=parts[1].toLowerCase();if(/^(background)\w*/.test(name)&&value.replace(/(initial|\s)/g,"").length==0||/^(margin)\w*/.test(name)&&/^0\w+$/.test(value)){continue}switch(name){case"mso-padding-alt":case"mso-padding-top-alt":case"mso-padding-right-alt":case"mso-padding-bottom-alt":case"mso-padding-left-alt":case"mso-margin-alt":case"mso-margin-top-alt":case"mso-margin-right-alt":case"mso-margin-bottom-alt":case"mso-margin-left-alt":case"mso-height":case"mso-width":case"mso-vertical-align-alt":if(!/<table/.test(tag)){n[i]=name.replace(/^mso-|-alt$/g,"")+":"+transUnit(value)}continue;case"horiz-align":n[i]="text-align:"+value;continue;case"vert-align":n[i]="vertical-align:"+value;continue;case"font-color":case"mso-foreground":n[i]="color:"+value;continue;case"mso-background":case"mso-highlight":n[i]="background:"+value;continue;case"mso-default-height":n[i]="min-height:"+transUnit(value);continue;case"mso-default-width":n[i]="min-width:"+transUnit(value);continue;case"mso-padding-between-alt":n[i]="border-collapse:separate;border-spacing:"+transUnit(value);continue;case"text-line-through":if((value=="single")||(value=="double")){n[i]="text-decoration:line-through"}continue;case"mso-zero-height":if(value=="yes"){n[i]="display:none"}continue;case"margin":if(!/[1-9]/.test(value)){continue}}if(/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?:decor|trans)|top-bar|version|vnd|word-break)/.test(name)||/text\-indent|padding|margin/.test(name)&&/\-[\d.]+/.test(value)){continue}n[i]=name+":"+parts[1]}}return tag+(n.length?' style="'+n.join(";").replace(/;{2,}/g,";")+'"':"")})}return function(html){return(isWordDocument(html)?filterPasteWord(html):html)}}();(function(){var uNode=UE.uNode=function(obj){this.type=obj.type;this.data=obj.data;this.tagName=obj.tagName;this.parentNode=obj.parentNode;this.attrs=obj.attrs||{};this.children=obj.children};var notTransAttrs={href:1,src:1,_src:1,_href:1,cdata_data:1};var notTransTagName={style:1,script:1};var indentChar="    ",breakChar="\n";function insertLine(arr,current,begin){arr.push(breakChar);return current+(begin?1:-1)}function insertIndent(arr,current){for(var i=0;i<current;i++){arr.push(indentChar)}}uNode.createElement=function(html){if(/[<>]/.test(html)){return UE.htmlparser(html).children[0]}else{return new uNode({type:"element",children:[],tagName:html})}};uNode.createText=function(data,noTrans){return new UE.uNode({type:"text",data:noTrans?data:utils.unhtml(data||"")})};function nodeToHtml(node,arr,formatter,current){switch(node.type){case"root":for(var i=0,ci;ci=node.children[i++];){if(formatter&&ci.type=="element"&&!dtd.$inlineWithA[ci.tagName]&&i>1){insertLine(arr,current,true);insertIndent(arr,current)}nodeToHtml(ci,arr,formatter,current)}break;case"text":isText(node,arr);break;case"element":isElement(node,arr,formatter,current);break;case"comment":isComment(node,arr,formatter)}return arr}function isText(node,arr){if(node.parentNode.tagName=="pre"){arr.push(node.data)}else{arr.push(notTransTagName[node.parentNode.tagName]?utils.html(node.data):node.data.replace(/[ ]{2}/g," &nbsp;"))}}function isElement(node,arr,formatter,current){var attrhtml="";if(node.attrs){attrhtml=[];var attrs=node.attrs;for(var a in attrs){attrhtml.push(a+(attrs[a]!==undefined?'="'+(notTransAttrs[a]?utils.html(attrs[a]).replace(/["]/g,function(a){return"&quot;"}):utils.unhtml(attrs[a]))+'"':""))}attrhtml=attrhtml.join(" ")}arr.push("<"+node.tagName+(attrhtml?" "+attrhtml:"")+(dtd.$empty[node.tagName]?"/":"")+">");if(formatter&&!dtd.$inlineWithA[node.tagName]&&node.tagName!="pre"){if(node.children&&node.children.length){current=insertLine(arr,current,true);insertIndent(arr,current)}}if(node.children&&node.children.length){for(var i=0,ci;ci=node.children[i++];){if(formatter&&ci.type=="element"&&!dtd.$inlineWithA[ci.tagName]&&i>1){insertLine(arr,current);insertIndent(arr,current)}nodeToHtml(ci,arr,formatter,current)}}if(!dtd.$empty[node.tagName]){if(formatter&&!dtd.$inlineWithA[node.tagName]&&node.tagName!="pre"){if(node.children&&node.children.length){current=insertLine(arr,current);insertIndent(arr,current)}}arr.push("</"+node.tagName+">")}}function isComment(node,arr){arr.push("<!--"+node.data+"-->")}function getNodeById(root,id){var node;if(root.type=="element"&&root.getAttr("id")==id){return root}if(root.children&&root.children.length){for(var i=0,ci;ci=root.children[i++];){if(node=getNodeById(ci,id)){return node}}}}function getNodesByTagName(node,tagName,arr){if(node.type=="element"&&node.tagName==tagName){arr.push(node)}if(node.children&&node.children.length){for(var i=0,ci;ci=node.children[i++];){getNodesByTagName(ci,tagName,arr)}}}function nodeTraversal(root,fn){if(root.children&&root.children.length){for(var i=0,ci;ci=root.children[i];){nodeTraversal(ci,fn);if(ci.parentNode){if(ci.children&&ci.children.length){fn(ci)}if(ci.parentNode){i++}}}}else{fn(root)}}uNode.prototype={toHtml:function(formatter){var arr=[];nodeToHtml(this,arr,formatter,0);return arr.join("")},innerHTML:function(htmlstr){if(this.type!="element"||dtd.$empty[this.tagName]){return this}if(utils.isString(htmlstr)){if(this.children){for(var i=0,ci;ci=this.children[i++];){ci.parentNode=null}}this.children=[];var tmpRoot=UE.htmlparser(htmlstr);for(var i=0,ci;ci=tmpRoot.children[i++];){this.children.push(ci);ci.parentNode=this}return this}else{var tmpRoot=new UE.uNode({type:"root",children:this.children});return tmpRoot.toHtml()}},innerText:function(textStr,noTrans){if(this.type!="element"||dtd.$empty[this.tagName]){return this}if(textStr){if(this.children){for(var i=0,ci;ci=this.children[i++];){ci.parentNode=null}}this.children=[];this.appendChild(uNode.createText(textStr,noTrans));return this}else{return this.toHtml().replace(/<[^>]+>/g,"")}},getData:function(){if(this.type=="element"){return""}return this.data},firstChild:function(){return this.children?this.children[0]:null},lastChild:function(){return this.children?this.children[this.children.length-1]:null},previousSibling:function(){var parent=this.parentNode;for(var i=0,ci;ci=parent.children[i];i++){if(ci===this){return i==0?null:parent.children[i-1]}}},nextSibling:function(){var parent=this.parentNode;for(var i=0,ci;ci=parent.children[i++];){if(ci===this){return parent.children[i]}}},replaceChild:function(target,source){if(this.children){if(target.parentNode){target.parentNode.removeChild(target)}for(var i=0,ci;ci=this.children[i];i++){if(ci===source){this.children.splice(i,1,target);source.parentNode=null;target.parentNode=this;return target}}}},appendChild:function(node){if(this.type=="root"||(this.type=="element"&&!dtd.$empty[this.tagName])){if(!this.children){this.children=[]}if(node.parentNode){node.parentNode.removeChild(node)}for(var i=0,ci;ci=this.children[i];i++){if(ci===node){this.children.splice(i,1);break}}this.children.push(node);node.parentNode=this;return node}},insertBefore:function(target,source){if(this.children){if(target.parentNode){target.parentNode.removeChild(target)}for(var i=0,ci;ci=this.children[i];i++){if(ci===source){this.children.splice(i,0,target);target.parentNode=this;return target}}}},insertAfter:function(target,source){if(this.children){if(target.parentNode){target.parentNode.removeChild(target)}for(var i=0,ci;ci=this.children[i];i++){if(ci===source){this.children.splice(i+1,0,target);target.parentNode=this;return target}}}},removeChild:function(node,keepChildren){if(this.children){for(var i=0,ci;ci=this.children[i];i++){if(ci===node){this.children.splice(i,1);ci.parentNode=null;if(keepChildren&&ci.children&&ci.children.length){for(var j=0,cj;cj=ci.children[j];j++){this.children.splice(i+j,0,cj);cj.parentNode=this}}return ci}}}},getAttr:function(attrName){return this.attrs&&this.attrs[attrName.toLowerCase()]},setAttr:function(attrName,attrVal){if(!attrName){delete this.attrs;return}if(!this.attrs){this.attrs={}}if(utils.isObject(attrName)){for(var a in attrName){if(!attrName[a]){delete this.attrs[a]}else{this.attrs[a.toLowerCase()]=attrName[a]}}}else{if(!attrVal){delete this.attrs[attrName]}else{this.attrs[attrName.toLowerCase()]=attrVal}}},getIndex:function(){var parent=this.parentNode;for(var i=0,ci;ci=parent.children[i];i++){if(ci===this){return i}}return -1},getNodeById:function(id){var node;if(this.children&&this.children.length){for(var i=0,ci;ci=this.children[i++];){if(node=getNodeById(ci,id)){return node}}}},getNodesByTagName:function(tagNames){tagNames=utils.trim(tagNames).replace(/[ ]{2,}/g," ").split(" ");var arr=[],me=this;utils.each(tagNames,function(tagName){if(me.children&&me.children.length){for(var i=0,ci;ci=me.children[i++];){getNodesByTagName(ci,tagName,arr)}}});return arr},getStyle:function(name){var cssStyle=this.getAttr("style");if(!cssStyle){return""}var reg=new RegExp("(^|;)\\s*"+name+":([^;]+)","i");var match=cssStyle.match(reg);if(match&&match[0]){return match[2]}return""},setStyle:function(name,val){function exec(name,val){var reg=new RegExp("(^|;)\\s*"+name+":([^;]+;?)","gi");cssStyle=cssStyle.replace(reg,"$1");if(val){cssStyle=name+":"+utils.unhtml(val)+";"+cssStyle}}var cssStyle=this.getAttr("style");if(!cssStyle){cssStyle=""}if(utils.isObject(name)){for(var a in name){exec(a,name[a])}}else{exec(name,val)}this.setAttr("style",utils.trim(cssStyle))},traversal:function(fn){if(this.children&&this.children.length){nodeTraversal(this,fn)}return this}}})();var htmlparser=UE.htmlparser=function(htmlstr,ignoreBlank){var re_tag=/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)-->)|(?:([^\s\/<>]+)\s*((?:(?:"[^"]*")|(?:'[^']*')|[^"'<>])*)\/?>))/g,re_attr=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g;var allowEmptyTags={b:1,code:1,i:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,span:1,sub:1,img:1,sup:1,font:1,big:1,small:1,iframe:1,a:1,br:1,pre:1};htmlstr=htmlstr.replace(new RegExp(domUtils.fillChar,"g"),"");if(!ignoreBlank){htmlstr=htmlstr.replace(new RegExp("[\\r\\t\\n"+(ignoreBlank?"":" ")+"]*</?(\\w+)\\s*(?:[^>]*)>[\\r\\t\\n"+(ignoreBlank?"":" ")+"]*","g"),function(a,b){if(b&&allowEmptyTags[b.toLowerCase()]){return a.replace(/(^[\n\r]+)|([\n\r]+$)/g,"")}return a.replace(new RegExp("^[\\r\\n"+(ignoreBlank?"":" ")+"]+"),"").replace(new RegExp("[\\r\\n"+(ignoreBlank?"":" ")+"]+$"),"")})}var notTransAttrs={href:1,src:1};var uNode=UE.uNode,needParentNode={td:"tr",tr:["tbody","thead","tfoot"],tbody:"table",th:"tr",thead:"table",tfoot:"table",caption:"table",li:["ul","ol"],dt:"dl",dd:"dl",option:"select"},needChild={ol:"li",ul:"li"};function text(parent,data){if(needChild[parent.tagName]){var tmpNode=uNode.createElement(needChild[parent.tagName]);parent.appendChild(tmpNode);tmpNode.appendChild(uNode.createText(data));parent=tmpNode}else{parent.appendChild(uNode.createText(data))}}function element(parent,tagName,htmlattr){var needParentTag;if(needParentTag=needParentNode[tagName]){var tmpParent=parent,hasParent;while(tmpParent.type!="root"){if(utils.isArray(needParentTag)?utils.indexOf(needParentTag,tmpParent.tagName)!=-1:needParentTag==tmpParent.tagName){parent=tmpParent;hasParent=true;break}tmpParent=tmpParent.parentNode}if(!hasParent){parent=element(parent,utils.isArray(needParentTag)?needParentTag[0]:needParentTag)}}var elm=new uNode({parentNode:parent,type:"element",tagName:tagName.toLowerCase(),children:dtd.$empty[tagName]?null:[]});if(htmlattr){var attrs={},match;while(match=re_attr.exec(htmlattr)){attrs[match[1].toLowerCase()]=notTransAttrs[match[1].toLowerCase()]?(match[2]||match[3]||match[4]):utils.unhtml(match[2]||match[3]||match[4])}elm.attrs=attrs}parent.children.push(elm);return dtd.$empty[tagName]?parent:elm}function comment(parent,data){parent.children.push(new uNode({type:"comment",data:data,parentNode:parent}))}var match,currentIndex=0,nextIndex=0;var root=new uNode({type:"root",children:[]});var currentParent=root;while(match=re_tag.exec(htmlstr)){currentIndex=match.index;try{if(currentIndex>nextIndex){text(currentParent,htmlstr.slice(nextIndex,currentIndex))}if(match[3]){if(dtd.$cdata[currentParent.tagName]){text(currentParent,match[0])}else{currentParent=element(currentParent,match[3].toLowerCase(),match[4])}}else{if(match[1]){if(currentParent.type!="root"){if(dtd.$cdata[currentParent.tagName]&&!dtd.$cdata[match[1]]){text(currentParent,match[0])}else{var tmpParent=currentParent;while(currentParent.type=="element"&&currentParent.tagName!=match[1].toLowerCase()){currentParent=currentParent.parentNode;if(currentParent.type=="root"){currentParent=tmpParent;throw"break"}}currentParent=currentParent.parentNode}}}else{if(match[2]){comment(currentParent,match[2])}}}}catch(e){}nextIndex=re_tag.lastIndex}if(nextIndex<htmlstr.length){text(currentParent,htmlstr.slice(nextIndex))}return root};var filterNode=UE.filterNode=function(){function filterNode(node,rules){switch(node.type){case"text":break;case"element":var val;if(val=rules[node.tagName]){if(val==="-"){node.parentNode.removeChild(node)}else{if(utils.isFunction(val)){var parentNode=node.parentNode,index=node.getIndex();val(node);if(node.parentNode){if(node.children){for(var i=0,ci;ci=node.children[i];){filterNode(ci,rules);if(ci.parentNode){i++}}}}else{for(var i=index,ci;ci=parentNode.children[i];){filterNode(ci,rules);if(ci.parentNode){i++}}}}else{var attrs=val["$"];if(attrs&&node.attrs){var tmpAttrs={},tmpVal;for(var a in attrs){tmpVal=node.getAttr(a);if(a=="style"&&utils.isArray(attrs[a])){var tmpCssStyle=[];utils.each(attrs[a],function(v){var tmp;if(tmp=node.getStyle(v)){tmpCssStyle.push(v+":"+tmp)}});tmpVal=tmpCssStyle.join(";")}if(tmpVal){tmpAttrs[a]=tmpVal}}node.attrs=tmpAttrs}if(node.children){for(var i=0,ci;ci=node.children[i];){filterNode(ci,rules);if(ci.parentNode){i++}}}}}}else{if(dtd.$cdata[node.tagName]){node.parentNode.removeChild(node)}else{var parentNode=node.parentNode,index=node.getIndex();node.parentNode.removeChild(node,true);for(var i=index,ci;ci=parentNode.children[i];){filterNode(ci,rules);if(ci.parentNode){i++}}}}break;case"comment":node.parentNode.removeChild(node)}}return function(root,rules){if(utils.isEmptyObject(rules)){return root}var val;if(val=rules["-"]){utils.each(val.split(" "),function(k){rules[k]="-"})}for(var i=0,ci;ci=root.children[i];){filterNode(ci,rules);if(ci.parentNode){i++}}return root}}();UE.plugin=function(){var _plugins={};return{register:function(pluginName,fn,oldOptionName,afterDisabled){if(oldOptionName&&utils.isFunction(oldOptionName)){afterDisabled=oldOptionName;oldOptionName=null}_plugins[pluginName]={optionName:oldOptionName||pluginName,execFn:fn,afterDisabled:afterDisabled}},load:function(editor){utils.each(_plugins,function(plugin){var _export=plugin.execFn.call(editor);if(editor.options[plugin.optionName]!==false){if(_export){utils.each(_export,function(v,k){switch(k.toLowerCase()){case"shortcutkey":editor.addshortcutkey(v);break;case"bindevents":utils.each(v,function(fn,eventName){editor.addListener(eventName,fn)});break;case"bindmultievents":utils.each(utils.isArray(v)?v:[v],function(event){var types=utils.trim(event.type).split(/\s+/);utils.each(types,function(eventName){editor.addListener(eventName,event.handler)})});break;case"commands":utils.each(v,function(execFn,execName){editor.commands[execName]=execFn});break;case"outputrule":editor.addOutputRule(v);break;case"inputrule":editor.addInputRule(v);break;case"defaultoptions":editor.setOpt(v)}})}}else{if(plugin.afterDisabled){plugin.afterDisabled.call(editor)}}});utils.each(UE.plugins,function(plugin){plugin.call(editor)})},run:function(pluginName,editor){var plugin=_plugins[pluginName];if(plugin){plugin.exeFn.call(editor)}}}}();var keymap=UE.keymap={Backspace:8,Tab:9,Enter:13,Shift:16,Control:17,Alt:18,CapsLock:20,Esc:27,Spacebar:32,PageUp:33,PageDown:34,End:35,Home:36,Left:37,Up:38,Right:39,Down:40,Insert:45,Del:46,NumLock:144,Cmd:91,"=":187,"-":189,b:66,i:73,z:90,y:89,v:86,x:88,s:83,n:78};var LocalStorage=UE.LocalStorage=(function(){var storage=window.localStorage||getUserData()||null,LOCAL_FILE="localStorage";return{saveLocalData:function(key,data){if(storage&&data){storage.setItem(key,data);return true}return false},getLocalData:function(key){if(storage){return storage.getItem(key)}return null},removeItem:function(key){storage&&storage.removeItem(key)}};function getUserData(){var container=document.createElement("div");container.style.display="none";if(!container.addBehavior){return null}container.addBehavior("#default#userdata");return{getItem:function(key){var result=null;try{document.body.appendChild(container);container.load(LOCAL_FILE);result=container.getAttribute(key);document.body.removeChild(container)}catch(e){}return result},setItem:function(key,value){document.body.appendChild(container);container.setAttribute(key,value);container.save(LOCAL_FILE);document.body.removeChild(container)},removeItem:function(key){document.body.appendChild(container);container.removeAttribute(key);container.save(LOCAL_FILE);document.body.removeChild(container)}}}})();(function(){var ROOTKEY="ueditor_preference";UE.Editor.prototype.setPreferences=function(key,value){var obj={};if(utils.isString(key)){obj[key]=value}else{obj=key}var data=LocalStorage.getLocalData(ROOTKEY);if(data&&(data=utils.str2json(data))){utils.extend(data,obj)}else{data=obj}data&&LocalStorage.saveLocalData(ROOTKEY,utils.json2str(data))};UE.Editor.prototype.getPreferences=function(key){var data=LocalStorage.getLocalData(ROOTKEY);if(data&&(data=utils.str2json(data))){return key?data[key]:data}return null};UE.Editor.prototype.removePreferences=function(key){var data=LocalStorage.getLocalData(ROOTKEY);if(data&&(data=utils.str2json(data))){data[key]=undefined;delete data[key]}data&&LocalStorage.saveLocalData(ROOTKEY,utils.json2str(data))}})();UE.plugins.defaultfilter=function(){var me=this;me.setOpt({allowDivTransToP:true,disabledTableInTable:true});me.addInputRule(function(root){var allowDivTransToP=this.options.allowDivTransToP;var val;function tdParent(node){while(node&&node.type=="element"){if(node.tagName=="td"){return true}node=node.parentNode}return false}root.traversal(function(node){if(node.type=="element"){if(!dtd.$cdata[node.tagName]&&me.options.autoClearEmptyNode&&dtd.$inline[node.tagName]&&!dtd.$empty[node.tagName]&&(!node.attrs||utils.isEmptyObject(node.attrs))){if(!node.firstChild()){node.parentNode.removeChild(node)}else{if(node.tagName=="span"&&(!node.attrs||utils.isEmptyObject(node.attrs))){node.parentNode.removeChild(node,true)}}return}switch(node.tagName){case"style":case"script":node.setAttr({cdata_tag:node.tagName,cdata_data:(node.innerHTML()||""),_ue_custom_node_:"true"});node.tagName="div";node.innerHTML("");break;case"a":if(val=node.getAttr("href")){node.setAttr("_href",val)}break;case"img":if(val=node.getAttr("src")){if(/^data:/.test(val)){node.parentNode.removeChild(node);break}}node.setAttr("_src",node.getAttr("src"));break;case"span":if(browser.webkit&&(val=node.getStyle("white-space"))){if(/nowrap|normal/.test(val)){node.setStyle("white-space","");if(me.options.autoClearEmptyNode&&utils.isEmptyObject(node.attrs)){node.parentNode.removeChild(node,true)}}}val=node.getAttr("id");if(val&&/^_baidu_bookmark_/i.test(val)){node.parentNode.removeChild(node)}break;case"p":if(val=node.getAttr("align")){node.setAttr("align");node.setStyle("text-align",val)}utils.each(node.children,function(n){if(n.type=="element"&&n.tagName=="p"){var next=n.nextSibling();node.parentNode.insertAfter(n,node);var last=n;while(next){var tmp=next.nextSibling();node.parentNode.insertAfter(next,last);last=next;next=tmp}return false}});if(!node.firstChild()){node.innerHTML(browser.ie?"&nbsp;":"<br/>")}break;case"div":if(node.getAttr("cdata_tag")){break}val=node.getAttr("class");if(val&&/^line number\d+/.test(val)){break}if(!allowDivTransToP){break}var tmpNode,p=UE.uNode.createElement("p");while(tmpNode=node.firstChild()){if(tmpNode.type=="text"||!UE.dom.dtd.$block[tmpNode.tagName]){p.appendChild(tmpNode)}else{if(p.firstChild()){node.parentNode.insertBefore(p,node);p=UE.uNode.createElement("p")}else{node.parentNode.insertBefore(tmpNode,node)}}}if(p.firstChild()){node.parentNode.insertBefore(p,node)}node.parentNode.removeChild(node);break;case"dl":node.tagName="ul";break;case"dt":case"dd":node.tagName="li";break;case"li":var className=node.getAttr("class");if(!className||!/list\-/.test(className)){node.setAttr()}var tmpNodes=node.getNodesByTagName("ol ul");UE.utils.each(tmpNodes,function(n){node.parentNode.insertAfter(n,node)});break;case"td":case"th":case"caption":if(!node.children||!node.children.length){node.appendChild(browser.ie11below?UE.uNode.createText(" "):UE.uNode.createElement("br"))}break;case"table":if(me.options.disabledTableInTable&&tdParent(node)){node.parentNode.insertBefore(UE.uNode.createText(node.innerText()),node);node.parentNode.removeChild(node)}}}})});me.addOutputRule(function(root){var val;root.traversal(function(node){if(node.type=="element"){if(me.options.autoClearEmptyNode&&dtd.$inline[node.tagName]&&!dtd.$empty[node.tagName]&&(!node.attrs||utils.isEmptyObject(node.attrs))){if(!node.firstChild()){node.parentNode.removeChild(node)}else{if(node.tagName=="span"&&(!node.attrs||utils.isEmptyObject(node.attrs))){node.parentNode.removeChild(node,true)}}return}switch(node.tagName){case"div":if(val=node.getAttr("cdata_tag")){node.tagName=val;node.appendChild(UE.uNode.createText(node.getAttr("cdata_data")));node.setAttr({cdata_tag:"",cdata_data:"",_ue_custom_node_:""})}break;case"a":if(val=node.getAttr("_href")){node.setAttr({href:utils.html(val),_href:""})}break;break;case"span":val=node.getAttr("id");if(val&&/^_baidu_bookmark_/i.test(val)){node.parentNode.removeChild(node)}break;case"img":if(val=node.getAttr("_src")){node.setAttr({src:node.getAttr("_src"),_src:""})}}}})})};UE.commands.inserthtml={execCommand:function(command,html,notNeedFilter){var me=this,range,div;if(!html){return}if(me.fireEvent("beforeinserthtml",html)===true){return}range=me.selection.getRange();div=range.document.createElement("div");div.style.display="inline";if(!notNeedFilter){var root=UE.htmlparser(html);if(me.options.filterRules){UE.filterNode(root,me.options.filterRules)}me.filterInputRule(root);html=root.toHtml()}div.innerHTML=utils.trim(html);if(!range.collapsed){var tmpNode=range.startContainer;if(domUtils.isFillChar(tmpNode)){range.setStartBefore(tmpNode)}tmpNode=range.endContainer;if(domUtils.isFillChar(tmpNode)){range.setEndAfter(tmpNode)}range.txtToElmBoundary();if(range.endContainer&&range.endContainer.nodeType==1){tmpNode=range.endContainer.childNodes[range.endOffset];if(tmpNode&&domUtils.isBr(tmpNode)){range.setEndAfter(tmpNode)}}if(range.startOffset==0){tmpNode=range.startContainer;if(domUtils.isBoundaryNode(tmpNode,"firstChild")){tmpNode=range.endContainer;if(range.endOffset==(tmpNode.nodeType==3?tmpNode.nodeValue.length:tmpNode.childNodes.length)&&domUtils.isBoundaryNode(tmpNode,"lastChild")){me.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>";range.setStart(me.body.firstChild,0).collapse(true)}}}!range.collapsed&&range.deleteContents();if(range.startContainer.nodeType==1){var child=range.startContainer.childNodes[range.startOffset],pre;if(child&&domUtils.isBlockElm(child)&&(pre=child.previousSibling)&&domUtils.isBlockElm(pre)){range.setEnd(pre,pre.childNodes.length).collapse();while(child.firstChild){pre.appendChild(child.firstChild)}domUtils.remove(child)}}}var child,parent,pre,tmp,hadBreak=0,nextNode;if(range.inFillChar()){child=range.startContainer;if(domUtils.isFillChar(child)){range.setStartBefore(child).collapse(true);domUtils.remove(child)}else{if(domUtils.isFillChar(child,true)){child.nodeValue=child.nodeValue.replace(fillCharReg,"");range.startOffset--;range.collapsed&&range.collapse(true)}}}var li=domUtils.findParentByTagName(range.startContainer,"li",true);if(li){var next,last;while(child=div.firstChild){while(child&&(child.nodeType==3||!domUtils.isBlockElm(child)||child.tagName=="HR")){next=child.nextSibling;range.insertNode(child).collapse();last=child;child=next}if(child){if(/^(ol|ul)$/i.test(child.tagName)){while(child.firstChild){last=child.firstChild;domUtils.insertAfter(li,child.firstChild);li=li.nextSibling}domUtils.remove(child)}else{var tmpLi;next=child.nextSibling;tmpLi=me.document.createElement("li");domUtils.insertAfter(li,tmpLi);tmpLi.appendChild(child);last=child;child=next;li=tmpLi}}}li=domUtils.findParentByTagName(range.startContainer,"li",true);if(domUtils.isEmptyBlock(li)){domUtils.remove(li)}if(last){range.setStartAfter(last).collapse(true).select(true)}}else{while(child=div.firstChild){if(hadBreak){var p=me.document.createElement("p");while(child&&(child.nodeType==3||!dtd.$block[child.tagName])){nextNode=child.nextSibling;p.appendChild(child);child=nextNode}if(p.firstChild){child=p}}range.insertNode(child);nextNode=child.nextSibling;if(!hadBreak&&child.nodeType==domUtils.NODE_ELEMENT&&domUtils.isBlockElm(child)){parent=domUtils.findParent(child,function(node){return domUtils.isBlockElm(node)});if(parent&&parent.tagName.toLowerCase()!="body"&&!(dtd[parent.tagName][child.nodeName]&&child.parentNode===parent)){if(!dtd[parent.tagName][child.nodeName]){pre=parent}else{tmp=child.parentNode;while(tmp!==parent){pre=tmp;tmp=tmp.parentNode}}domUtils.breakParent(child,pre||tmp);var pre=child.previousSibling;domUtils.trimWhiteTextNode(pre);if(!pre.childNodes.length){domUtils.remove(pre)}if(!browser.ie&&(next=child.nextSibling)&&domUtils.isBlockElm(next)&&next.lastChild&&!domUtils.isBr(next.lastChild)){next.appendChild(me.document.createElement("br"))}hadBreak=1}}var next=child.nextSibling;if(!div.firstChild&&next&&domUtils.isBlockElm(next)){range.setStart(next,0).collapse(true);break}range.setEndAfter(child).collapse()}child=range.startContainer;if(nextNode&&domUtils.isBr(nextNode)){domUtils.remove(nextNode)}if(domUtils.isBlockElm(child)&&domUtils.isEmptyNode(child)){if(nextNode=child.nextSibling){domUtils.remove(child);if(nextNode.nodeType==1&&dtd.$block[nextNode.tagName]){range.setStart(nextNode,0).collapse(true).shrinkBoundary()}}else{try{child.innerHTML=browser.ie?domUtils.fillChar:"<br/>"}catch(e){range.setStartBefore(child);domUtils.remove(child)}}}try{range.select(true)}catch(e){}}setTimeout(function(){range=me.selection.getRange();range.scrollToView(me.autoHeightEnabled,me.autoHeightEnabled?domUtils.getXY(me.iframe).y:0);me.fireEvent("afterinserthtml",html)},200)}};UE.plugins.autotypeset=function(){this.setOpt({autotypeset:{mergeEmptyline:true,removeClass:true,removeEmptyline:false,textAlign:"left",imageBlockLine:"center",pasteFilter:false,clearFontSize:false,clearFontFamily:false,removeEmptyNode:false,removeTagNames:utils.extend({div:1},dtd.$removeEmpty),indent:false,indentValue:"2em",bdc2sb:false,tobdc:false}});var me=this,opt=me.options.autotypeset,remainClass={selectTdClass:1,pagebreak:1,anchorclass:1},remainTag={li:1},tags={div:1,p:1,blockquote:1,center:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,span:1},highlightCont;if(!opt){return}readLocalOpts();function isLine(node,notEmpty){if(!node||node.nodeType==3){return 0}if(domUtils.isBr(node)){return 1}if(node&&node.parentNode&&tags[node.tagName.toLowerCase()]){if(highlightCont&&highlightCont.contains(node)||node.getAttribute("pagebreak")){return 0}return notEmpty?!domUtils.isEmptyBlock(node):domUtils.isEmptyBlock(node,new RegExp("[\\s"+domUtils.fillChar+"]","g"))}}function removeNotAttributeSpan(node){if(!node.style.cssText){domUtils.removeAttributes(node,["style"]);if(node.tagName.toLowerCase()=="span"&&domUtils.hasNoAttributes(node)){domUtils.remove(node,true)}}}function autotype(type,html){var me=this,cont;if(html){if(!opt.pasteFilter){return}cont=me.document.createElement("div");cont.innerHTML=html.html}else{cont=me.document.body}var nodes=domUtils.getElementsByTagName(cont,"*");for(var i=0,ci;ci=nodes[i++];){if(me.fireEvent("excludeNodeinautotype",ci)===true){continue}if(opt.clearFontSize&&ci.style.fontSize){domUtils.removeStyle(ci,"font-size");removeNotAttributeSpan(ci)}if(opt.clearFontFamily&&ci.style.fontFamily){domUtils.removeStyle(ci,"font-family");removeNotAttributeSpan(ci)}if(isLine(ci)){if(opt.mergeEmptyline){var next=ci.nextSibling,tmpNode,isBr=domUtils.isBr(ci);while(isLine(next)){tmpNode=next;next=tmpNode.nextSibling;if(isBr&&(!next||next&&!domUtils.isBr(next))){break}domUtils.remove(tmpNode)}}if(opt.removeEmptyline&&domUtils.inDoc(ci,cont)&&!remainTag[ci.parentNode.tagName.toLowerCase()]){if(domUtils.isBr(ci)){next=ci.nextSibling;if(next&&!domUtils.isBr(next)){continue}}domUtils.remove(ci);continue}}if(isLine(ci,true)&&ci.tagName!="SPAN"){if(opt.indent){ci.style.textIndent=opt.indentValue}if(opt.textAlign){ci.style.textAlign=opt.textAlign}}if(opt.removeClass&&ci.className&&!remainClass[ci.className.toLowerCase()]){if(highlightCont&&highlightCont.contains(ci)){continue}domUtils.removeAttributes(ci,["class"])}if(opt.imageBlockLine&&ci.tagName.toLowerCase()=="img"&&!ci.getAttribute("emotion")){if(html){var img=ci;switch(opt.imageBlockLine){case"left":case"right":case"none":var pN=img.parentNode,tmpNode,pre,next;while(dtd.$inline[pN.tagName]||pN.tagName=="A"){pN=pN.parentNode}tmpNode=pN;if(tmpNode.tagName=="P"&&domUtils.getStyle(tmpNode,"text-align")=="center"){if(!domUtils.isBody(tmpNode)&&domUtils.getChildCount(tmpNode,function(node){return !domUtils.isBr(node)&&!domUtils.isWhitespace(node)})==1){pre=tmpNode.previousSibling;next=tmpNode.nextSibling;if(pre&&next&&pre.nodeType==1&&next.nodeType==1&&pre.tagName==next.tagName&&domUtils.isBlockElm(pre)){pre.appendChild(tmpNode.firstChild);while(next.firstChild){pre.appendChild(next.firstChild)}domUtils.remove(tmpNode);domUtils.remove(next)}else{domUtils.setStyle(tmpNode,"text-align","")}}}domUtils.setStyle(img,"float",opt.imageBlockLine);break;case"center":if(me.queryCommandValue("imagefloat")!="center"){pN=img.parentNode;domUtils.setStyle(img,"float","none");tmpNode=img;while(pN&&domUtils.getChildCount(pN,function(node){return !domUtils.isBr(node)&&!domUtils.isWhitespace(node)})==1&&(dtd.$inline[pN.tagName]||pN.tagName=="A")){tmpNode=pN;pN=pN.parentNode}var pNode=me.document.createElement("p");domUtils.setAttributes(pNode,{style:"text-align:center"});tmpNode.parentNode.insertBefore(pNode,tmpNode);pNode.appendChild(tmpNode);domUtils.setStyle(tmpNode,"float","")}}}else{var range=me.selection.getRange();range.selectNode(ci).select();me.execCommand("imagefloat",opt.imageBlockLine)}}if(opt.removeEmptyNode){if(opt.removeTagNames[ci.tagName.toLowerCase()]&&domUtils.hasNoAttributes(ci)&&domUtils.isEmptyBlock(ci)){domUtils.remove(ci)}}}if(opt.tobdc){var root=UE.htmlparser(cont.innerHTML);root.traversal(function(node){if(node.type=="text"){node.data=ToDBC(node.data)}});cont.innerHTML=root.toHtml()}if(opt.bdc2sb){var root=UE.htmlparser(cont.innerHTML);root.traversal(function(node){if(node.type=="text"){node.data=DBC2SB(node.data)}});cont.innerHTML=root.toHtml()}if(html){html.html=cont.innerHTML}}if(opt.pasteFilter){me.addListener("beforepaste",autotype)}function DBC2SB(str){var result="";for(var i=0;i<str.length;i++){var code=str.charCodeAt(i);if(code>=65281&&code<=65373){result+=String.fromCharCode(str.charCodeAt(i)-65248)}else{if(code==12288){result+=String.fromCharCode(str.charCodeAt(i)-12288+32)}else{result+=str.charAt(i)}}}return result}function ToDBC(txtstring){txtstring=utils.html(txtstring);var tmp="";var mark="";for(var i=0;i<txtstring.length;i++){if(txtstring.charCodeAt(i)==32){tmp=tmp+String.fromCharCode(12288)}else{if(txtstring.charCodeAt(i)<127){tmp=tmp+String.fromCharCode(txtstring.charCodeAt(i)+65248)}else{tmp+=txtstring.charAt(i)}}}return tmp}function readLocalOpts(){var cookieOpt=me.getPreferences("autotypeset");utils.extend(me.options.autotypeset,cookieOpt)}me.commands.autotypeset={execCommand:function(){me.removeListener("beforepaste",autotype);if(opt.pasteFilter){me.addListener("beforepaste",autotype)}autotype.call(me)}}};UE.plugin.register("autosubmit",function(){return{shortcutkey:{autosubmit:"ctrl+13"},commands:{autosubmit:{execCommand:function(){var me=this,form=domUtils.findParentByTagName(me.iframe,"form",false);if(form){if(me.fireEvent("beforesubmit")===false){return}me.sync();form.submit()}}}}}});UE.plugin.register("background",function(){var me=this,cssRuleId="editor_background",isSetColored,reg=new RegExp("body[\\s]*\\{(.+)\\}","i");function stringToObj(str){var obj={},styles=str.split(";");utils.each(styles,function(v){var index=v.indexOf(":"),key=utils.trim(v.substr(0,index)).toLowerCase();key&&(obj[key]=utils.trim(v.substr(index+1)||""))});return obj}function setBackground(obj){if(obj){var styles=[];for(var name in obj){if(obj.hasOwnProperty(name)){styles.push(name+":"+obj[name]+"; ")}}utils.cssRule(cssRuleId,styles.length?("body{"+styles.join("")+"}"):"",me.document)}else{utils.cssRule(cssRuleId,"",me.document)}}var orgFn=me.hasContents;me.hasContents=function(){if(me.queryCommandValue("background")){return true}return orgFn.apply(me,arguments)};return{bindEvents:{getAllHtml:function(type,headHtml){var body=this.body,su=domUtils.getComputedStyle(body,"background-image"),url="";if(su.indexOf(me.options.imagePath)>0){url=su.substring(su.indexOf(me.options.imagePath),su.length-1).replace(/"|\(|\)/ig,"")}else{url=su!="none"?su.replace(/url\("?|"?\)/ig,""):""}var html='<style type="text/css">body{';var bgObj={"background-color":domUtils.getComputedStyle(body,"background-color")||"#ffffff","background-image":url?"url("+url+")":"","background-repeat":domUtils.getComputedStyle(body,"background-repeat")||"","background-position":browser.ie?(domUtils.getComputedStyle(body,"background-position-x")+" "+domUtils.getComputedStyle(body,"background-position-y")):domUtils.getComputedStyle(body,"background-position"),height:domUtils.getComputedStyle(body,"height")};for(var name in bgObj){if(bgObj.hasOwnProperty(name)){html+=name+":"+bgObj[name]+"; "}}html+="}</style> ";headHtml.push(html)},aftersetcontent:function(){if(isSetColored==false){setBackground()}}},inputRule:function(root){isSetColored=false;utils.each(root.getNodesByTagName("p"),function(p){var styles=p.getAttr("data-background");if(styles){isSetColored=true;setBackground(stringToObj(styles));p.parentNode.removeChild(p)}})},outputRule:function(root){var me=this,styles=(utils.cssRule(cssRuleId,me.document)||"").replace(/[\n\r]+/g,"").match(reg);if(styles){root.appendChild(UE.uNode.createElement('<p style="display:none;" data-background="'+utils.trim(styles[1].replace(/"/g,"").replace(/[\s]+/g," "))+'"><br/></p>'))}},commands:{background:{execCommand:function(cmd,obj){setBackground(obj)},queryCommandValue:function(){var me=this,styles=(utils.cssRule(cssRuleId,me.document)||"").replace(/[\n\r]+/g,"").match(reg);return styles?stringToObj(styles[1]):null},notNeedUndo:true}}}});UE.commands.imagefloat={execCommand:function(cmd,align){var me=this,range=me.selection.getRange();if(!range.collapsed){var img=range.getClosedNode();if(img&&img.tagName=="IMG"){switch(align){case"left":case"right":case"none":var pN=img.parentNode,tmpNode,pre,next;while(dtd.$inline[pN.tagName]||pN.tagName=="A"){pN=pN.parentNode}tmpNode=pN;if(tmpNode.tagName=="P"&&domUtils.getStyle(tmpNode,"text-align")=="center"){if(!domUtils.isBody(tmpNode)&&domUtils.getChildCount(tmpNode,function(node){return !domUtils.isBr(node)&&!domUtils.isWhitespace(node)})==1){pre=tmpNode.previousSibling;next=tmpNode.nextSibling;if(pre&&next&&pre.nodeType==1&&next.nodeType==1&&pre.tagName==next.tagName&&domUtils.isBlockElm(pre)){pre.appendChild(tmpNode.firstChild);while(next.firstChild){pre.appendChild(next.firstChild)}domUtils.remove(tmpNode);domUtils.remove(next)}else{domUtils.setStyle(tmpNode,"text-align","")}}range.selectNode(img).select()}domUtils.setStyle(img,"float",align=="none"?"":align);if(align=="none"){domUtils.removeAttributes(img,"align")}break;case"center":if(me.queryCommandValue("imagefloat")!="center"){pN=img.parentNode;domUtils.setStyle(img,"float","");domUtils.removeAttributes(img,"align");tmpNode=img;while(pN&&domUtils.getChildCount(pN,function(node){return !domUtils.isBr(node)&&!domUtils.isWhitespace(node)})==1&&(dtd.$inline[pN.tagName]||pN.tagName=="A")){tmpNode=pN;pN=pN.parentNode}range.setStartBefore(tmpNode).setCursor(false);pN=me.document.createElement("div");pN.appendChild(tmpNode);domUtils.setStyle(tmpNode,"float","");me.execCommand("insertHtml",'<p id="_img_parent_tmp" style="text-align:center">'+pN.innerHTML+"</p>");tmpNode=me.document.getElementById("_img_parent_tmp");tmpNode.removeAttribute("id");tmpNode=tmpNode.firstChild;range.selectNode(tmpNode).select();next=tmpNode.parentNode.nextSibling;if(next&&domUtils.isEmptyNode(next)){domUtils.remove(next)}}break}}}},queryCommandValue:function(){var range=this.selection.getRange(),startNode,floatStyle;if(range.collapsed){return"none"}startNode=range.getClosedNode();if(startNode&&startNode.nodeType==1&&startNode.tagName=="IMG"){floatStyle=domUtils.getComputedStyle(startNode,"float")||startNode.getAttribute("align");if(floatStyle=="none"){floatStyle=domUtils.getComputedStyle(startNode.parentNode,"text-align")=="center"?"center":floatStyle}return{left:1,right:1,center:1}[floatStyle]?floatStyle:"none"}return"none"},queryCommandState:function(){var range=this.selection.getRange(),startNode;if(range.collapsed){return -1}startNode=range.getClosedNode();if(startNode&&startNode.nodeType==1&&startNode.tagName=="IMG"){return 0}return -1}};UE.commands.insertimage={execCommand:function(cmd,opt){opt=utils.isArray(opt)?opt:[opt];if(!opt.length){return}var me=this,range=me.selection.getRange(),img=range.getClosedNode();if(me.fireEvent("beforeinsertimage",opt)===true){return}function unhtmlData(imgCi){utils.each("width,height,border,hspace,vspace".split(","),function(item){if(imgCi[item]){imgCi[item]=parseInt(imgCi[item],10)||0}});utils.each("src,_src".split(","),function(item){if(imgCi[item]){imgCi[item]=utils.unhtmlForUrl(imgCi[item])}});utils.each("title,alt".split(","),function(item){if(imgCi[item]){imgCi[item]=utils.unhtml(imgCi[item])}})}if(img&&/img/i.test(img.tagName)&&(img.className!="edui-faked-video"||img.className.indexOf("edui-upload-video")!=-1)&&!img.getAttribute("word_img")){var first=opt.shift();var floatStyle=first.floatStyle;delete first.floatStyle;domUtils.setAttributes(img,first);me.execCommand("imagefloat",floatStyle);if(opt.length>0){range.setStartAfter(img).setCursor(false,true);me.execCommand("insertimage",opt)}}else{var html=[],str="",ci;ci=opt[0];if(opt.length==1){unhtmlData(ci);str='<img src="'+ci.src+'" '+(ci._src?' _src="'+ci._src+'" ':"")+(ci.width?'width="'+ci.width+'" ':"")+(ci.height?' height="'+ci.height+'" ':"")+(ci.floatStyle=="left"||ci.floatStyle=="right"?' style="float:'+ci.floatStyle+';"':"")+(ci.title&&ci.title!=""?' title="'+ci.title+'"':"")+(ci.border&&ci.border!="0"?' border="'+ci.border+'"':"")+(ci.alt&&ci.alt!=""?' alt="'+ci.alt+'"':"")+(ci.hspace&&ci.hspace!="0"?' hspace = "'+ci.hspace+'"':"")+(ci.vspace&&ci.vspace!="0"?' vspace = "'+ci.vspace+'"':"")+"/>";if(ci.floatStyle=="center"){str='<p style="text-align: center">'+str+"</p>"}html.push(str)}else{for(var i=0;ci=opt[i++];){unhtmlData(ci);str="<p "+(ci.floatStyle=="center"?'style="text-align: center" ':"")+'><img src="'+ci.src+'" '+(ci.width?'width="'+ci.width+'" ':"")+(ci._src?' _src="'+ci._src+'" ':"")+(ci.height?' height="'+ci.height+'" ':"")+' style="'+(ci.floatStyle&&ci.floatStyle!="center"?"float:"+ci.floatStyle+";":"")+(ci.border||"")+'" '+(ci.title?' title="'+ci.title+'"':"")+" /></p>";html.push(str)}}me.execCommand("insertHtml",html.join(""))}me.fireEvent("afterinsertimage",opt)}};UE.plugins.justify=function(){var me=this,block=domUtils.isBlockElm,defaultValue={left:1,right:1,center:1,justify:1},doJustify=function(range,style){var bookmark=range.createBookmark(),filterFn=function(node){return node.nodeType==1?node.tagName.toLowerCase()!="br"&&!domUtils.isBookmarkNode(node):!domUtils.isWhitespace(node)};range.enlarge(true);var bookmark2=range.createBookmark(),current=domUtils.getNextDomNode(bookmark2.start,false,filterFn),tmpRange=range.cloneRange(),tmpNode;while(current&&!(domUtils.getPosition(current,bookmark2.end)&domUtils.POSITION_FOLLOWING)){if(current.nodeType==3||!block(current)){tmpRange.setStartBefore(current);while(current&&current!==bookmark2.end&&!block(current)){tmpNode=current;current=domUtils.getNextDomNode(current,false,null,function(node){return !block(node)})}tmpRange.setEndAfter(tmpNode);var common=tmpRange.getCommonAncestor();if(!domUtils.isBody(common)&&block(common)){domUtils.setStyles(common,utils.isString(style)?{"text-align":style}:style);current=common}else{var p=range.document.createElement("p");domUtils.setStyles(p,utils.isString(style)?{"text-align":style}:style);var frag=tmpRange.extractContents();p.appendChild(frag);tmpRange.insertNode(p);current=p}current=domUtils.getNextDomNode(current,false,filterFn)}else{current=domUtils.getNextDomNode(current,true,filterFn)}}return range.moveToBookmark(bookmark2).moveToBookmark(bookmark)};UE.commands.justify={execCommand:function(cmdName,align){var range=this.selection.getRange(),txt;if(range.collapsed){txt=this.document.createTextNode("p");range.insertNode(txt)}doJustify(range,align);if(txt){range.setStartBefore(txt).collapse(true);domUtils.remove(txt)}range.select();return true},queryCommandValue:function(){var startNode=this.selection.getStart(),value=domUtils.getComputedStyle(startNode,"text-align");return defaultValue[value]?value:"left"},queryCommandState:function(){var start=this.selection.getStart(),cell=start&&domUtils.findParentByTagName(start,["td","th","caption"],true);return cell?-1:0}}};UE.plugins.font=function(){var me=this,fonts={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family",underline:"text-decoration",strikethrough:"text-decoration",fontborder:"border"},needCmd={underline:1,strikethrough:1,fontborder:1},needSetChild={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family"};me.setOpt({fontfamily:[{name:"songti",val:"宋体,SimSun"},{name:"yahei",val:"微软雅黑,Microsoft YaHei"},{name:"kaiti",val:"楷体,楷体_GB2312, SimKai"},{name:"heiti",val:"黑体, SimHei"},{name:"lishu",val:"隶书, SimLi"},{name:"andaleMono",val:"andale mono"},{name:"arial",val:"arial, helvetica,sans-serif"},{name:"arialBlack",val:"arial black,avant garde"},{name:"comicSansMs",val:"comic sans ms"},{name:"impact",val:"impact,chicago"},{name:"timesNewRoman",val:"times new roman"}],fontsize:[10,11,12,14,16,18,20,24,36]});function mergeWithParent(node){var parent;while(parent=node.parentNode){if(parent.tagName=="SPAN"&&domUtils.getChildCount(parent,function(child){return !domUtils.isBookmarkNode(child)&&!domUtils.isBr(child)})==1){parent.style.cssText+=node.style.cssText;domUtils.remove(node,true);node=parent}else{break}}}function mergeChild(rng,cmdName,value){if(needSetChild[cmdName]){rng.adjustmentBoundary();if(!rng.collapsed&&rng.startContainer.nodeType==1){var start=rng.startContainer.childNodes[rng.startOffset];if(start&&domUtils.isTagNode(start,"span")){var bk=rng.createBookmark();utils.each(domUtils.getElementsByTagName(start,"span"),function(span){if(!span.parentNode||domUtils.isBookmarkNode(span)){return}if(cmdName=="backcolor"&&domUtils.getComputedStyle(span,"background-color").toLowerCase()===value){return}domUtils.removeStyle(span,needSetChild[cmdName]);if(span.style.cssText.replace(/^\s+$/,"").length==0){domUtils.remove(span,true)}});rng.moveToBookmark(bk)}}}}function mergesibling(rng,cmdName,value){var collapsed=rng.collapsed,bk=rng.createBookmark(),common;if(collapsed){common=bk.start.parentNode;while(dtd.$inline[common.tagName]){common=common.parentNode}}else{common=domUtils.getCommonAncestor(bk.start,bk.end)}utils.each(domUtils.getElementsByTagName(common,"span"),function(span){if(!span.parentNode||domUtils.isBookmarkNode(span)){return}if(/\s*border\s*:\s*none;?\s*/i.test(span.style.cssText)){if(/^\s*border\s*:\s*none;?\s*$/.test(span.style.cssText)){domUtils.remove(span,true)}else{domUtils.removeStyle(span,"border")}return}if(/border/i.test(span.style.cssText)&&span.parentNode.tagName=="SPAN"&&/border/i.test(span.parentNode.style.cssText)){span.style.cssText=span.style.cssText.replace(/border[^:]*:[^;]+;?/gi,"")}if(!(cmdName=="fontborder"&&value=="none")){var next=span.nextSibling;while(next&&next.nodeType==1&&next.tagName=="SPAN"){if(domUtils.isBookmarkNode(next)&&cmdName=="fontborder"){span.appendChild(next);next=span.nextSibling;continue}if(next.style.cssText==span.style.cssText){domUtils.moveChild(next,span);domUtils.remove(next)}if(span.nextSibling===next){break}next=span.nextSibling}}mergeWithParent(span);if(browser.ie&&browser.version>8){var parent=domUtils.findParent(span,function(n){return n.tagName=="SPAN"&&/background-color/.test(n.style.cssText)});if(parent&&!/background-color/.test(span.style.cssText)){span.style.backgroundColor=parent.style.backgroundColor}}});rng.moveToBookmark(bk);mergeChild(rng,cmdName,value)}me.addInputRule(function(root){utils.each(root.getNodesByTagName("u s del font strike"),function(node){if(node.tagName=="font"){var cssStyle=[];for(var p in node.attrs){switch(p){case"size":cssStyle.push("font-size:"+({"1":"10","2":"12","3":"16","4":"18","5":"24","6":"32","7":"48"}[node.attrs[p]]||node.attrs[p])+"px");break;case"color":cssStyle.push("color:"+node.attrs[p]);break;case"face":cssStyle.push("font-family:"+node.attrs[p]);break;case"style":cssStyle.push(node.attrs[p])}}node.attrs={style:cssStyle.join(";")}}else{var val=node.tagName=="u"?"underline":"line-through";node.attrs={style:(node.getAttr("style")||"")+"text-decoration:"+val+";"}}node.tagName="span"})});for(var p in fonts){(function(cmd,style){UE.commands[cmd]={execCommand:function(cmdName,value){value=value||(this.queryCommandState(cmdName)?"none":cmdName=="underline"?"underline":cmdName=="fontborder"?"1px solid #000":"line-through");var me=this,range=this.selection.getRange(),text;if(value=="default"){if(range.collapsed){text=me.document.createTextNode("font");range.insertNode(text).select()}me.execCommand("removeFormat","span,a",style);if(text){range.setStartBefore(text).collapse(true);domUtils.remove(text)}mergesibling(range,cmdName,value);range.select()}else{if(!range.collapsed){if(needCmd[cmd]&&me.queryCommandValue(cmd)){me.execCommand("removeFormat","span,a",style)}range=me.selection.getRange();range.applyInlineStyle("span",{style:style+":"+value});mergesibling(range,cmdName,value);range.select()}else{var span=domUtils.findParentByTagName(range.startContainer,"span",true);text=me.document.createTextNode("font");if(span&&!span.children.length&&!span[browser.ie?"innerText":"textContent"].replace(fillCharReg,"").length){range.insertNode(text);if(needCmd[cmd]){range.selectNode(text).select();me.execCommand("removeFormat","span,a",style,null);span=domUtils.findParentByTagName(text,"span",true);range.setStartBefore(text)}span&&(span.style.cssText+=";"+style+":"+value);range.collapse(true).select()}else{range.insertNode(text);range.selectNode(text).select();span=range.document.createElement("span");if(needCmd[cmd]){if(domUtils.findParentByTagName(text,"a",true)){range.setStartBefore(text).setCursor();domUtils.remove(text);return}me.execCommand("removeFormat","span,a",style)}span.style.cssText=style+":"+value;text.parentNode.insertBefore(span,text);if(!browser.ie||browser.ie&&browser.version==9){var spanParent=span.parentNode;while(!domUtils.isBlockElm(spanParent)){if(spanParent.tagName=="SPAN"){span.style.cssText=spanParent.style.cssText+";"+span.style.cssText}spanParent=spanParent.parentNode}}if(opera){setTimeout(function(){range.setStart(span,0).collapse(true);mergesibling(range,cmdName,value);range.select()})}else{range.setStart(span,0).collapse(true);mergesibling(range,cmdName,value);range.select()}}domUtils.remove(text)}}return true},queryCommandValue:function(cmdName){var startNode=this.selection.getStart();if(cmdName=="underline"||cmdName=="strikethrough"){var tmpNode=startNode,value;while(tmpNode&&!domUtils.isBlockElm(tmpNode)&&!domUtils.isBody(tmpNode)){if(tmpNode.nodeType==1){value=domUtils.getComputedStyle(tmpNode,style);if(value!="none"){return value}}tmpNode=tmpNode.parentNode}return"none"}if(cmdName=="fontborder"){var tmp=startNode,val;while(tmp&&dtd.$inline[tmp.tagName]){if(val=domUtils.getComputedStyle(tmp,"border")){if(/1px/.test(val)&&/solid/.test(val)){return val}}tmp=tmp.parentNode}return""}if(cmdName=="FontSize"){var styleVal=domUtils.getComputedStyle(startNode,style),tmp=/^([\d\.]+)(\w+)$/.exec(styleVal);if(tmp){return Math.floor(tmp[1])+tmp[2]}return styleVal}return domUtils.getComputedStyle(startNode,style)},queryCommandState:function(cmdName){if(!needCmd[cmdName]){return 0}var val=this.queryCommandValue(cmdName);if(cmdName=="fontborder"){return/1px/.test(val)&&/solid/.test(val)}else{return cmdName=="underline"?/underline/.test(val):/line\-through/.test(val)}}}})(p,fonts[p])}};UE.plugins.link=function(){function optimize(range){var start=range.startContainer,end=range.endContainer;if(start=domUtils.findParentByTagName(start,"a",true)){range.setStartBefore(start)}if(end=domUtils.findParentByTagName(end,"a",true)){range.setEndAfter(end)}}UE.commands.unlink={execCommand:function(){var range=this.selection.getRange(),bookmark;if(range.collapsed&&!domUtils.findParentByTagName(range.startContainer,"a",true)){return}bookmark=range.createBookmark();optimize(range);range.removeInlineStyle("a").moveToBookmark(bookmark).select()},queryCommandState:function(){return !this.highlight&&this.queryCommandValue("link")?0:-1}};function doLink(range,opt,me){var rngClone=range.cloneRange(),link=me.queryCommandValue("link");optimize(range=range.adjustmentBoundary());var start=range.startContainer;if(start.nodeType==1&&link){start=start.childNodes[range.startOffset];if(start&&start.nodeType==1&&start.tagName=="A"&&/^(?:https?|ftp|file)\s*:\s*\/\//.test(start[browser.ie?"innerText":"textContent"])){start[browser.ie?"innerText":"textContent"]=utils.html(opt.textValue||opt.href)}}if(!rngClone.collapsed||link){range.removeInlineStyle("a");rngClone=range.cloneRange()}if(rngClone.collapsed){var a=range.document.createElement("a"),text="";if(opt.textValue){text=utils.html(opt.textValue);delete opt.textValue}else{text=utils.html(opt.href)}domUtils.setAttributes(a,opt);start=domUtils.findParentByTagName(rngClone.startContainer,"a",true);if(start&&domUtils.isInNodeEndBoundary(rngClone,start)){range.setStartAfter(start).collapse(true)}a[browser.ie?"innerText":"textContent"]=text;range.insertNode(a).selectNode(a)}else{range.applyInlineStyle("a",opt)}}UE.commands.link={execCommand:function(cmdName,opt){var range;opt._href&&(opt._href=utils.unhtml(opt._href,/[<">]/g));opt.href&&(opt.href=utils.unhtml(opt.href,/[<">]/g));opt.textValue&&(opt.textValue=utils.unhtml(opt.textValue,/[<">]/g));doLink(range=this.selection.getRange(),opt,this);range.collapse().select(true)},queryCommandValue:function(){var range=this.selection.getRange(),node;if(range.collapsed){node=range.startContainer;node=node.nodeType==1?node:node.parentNode;if(node&&(node=domUtils.findParentByTagName(node,"a",true))&&!domUtils.isInNodeEndBoundary(range,node)){return node}}else{range.shrinkBoundary();var start=range.startContainer.nodeType==3||!range.startContainer.childNodes[range.startOffset]?range.startContainer:range.startContainer.childNodes[range.startOffset],end=range.endContainer.nodeType==3||range.endOffset==0?range.endContainer:range.endContainer.childNodes[range.endOffset-1],common=range.getCommonAncestor();node=domUtils.findParentByTagName(common,"a",true);if(!node&&common.nodeType==1){var as=common.getElementsByTagName("a"),ps,pe;for(var i=0,ci;ci=as[i++];){ps=domUtils.getPosition(ci,start),pe=domUtils.getPosition(ci,end);if((ps&domUtils.POSITION_FOLLOWING||ps&domUtils.POSITION_CONTAINS)&&(pe&domUtils.POSITION_PRECEDING||pe&domUtils.POSITION_CONTAINS)){node=ci;break}}}return node}},queryCommandState:function(){var img=this.selection.getRange().getClosedNode(),flag=img&&(img.className=="edui-faked-video"||img.className.indexOf("edui-upload-video")!=-1);return flag?-1:0}}};UE.plugins.insertframe=function(){var me=this;function deleteIframe(){me._iframe&&delete me._iframe}me.addListener("selectionchange",function(){deleteIframe()})};UE.commands.scrawl={queryCommandState:function(){return(browser.ie&&browser.version<=8)?-1:0}};UE.plugins.removeformat=function(){var me=this;me.setOpt({removeFormatTags:"b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var",removeFormatAttributes:"class,style,lang,width,height,align,hspace,valign"});me.commands.removeformat={execCommand:function(cmdName,tags,style,attrs,notIncludeA){var tagReg=new RegExp("^(?:"+(tags||this.options.removeFormatTags).replace(/,/g,"|")+")$","i"),removeFormatAttributes=style?[]:(attrs||this.options.removeFormatAttributes).split(","),range=new dom.Range(this.document),bookmark,node,parent,filter=function(node){return node.nodeType==1};function isRedundantSpan(node){if(node.nodeType==3||node.tagName.toLowerCase()!="span"){return 0}if(browser.ie){var attrs=node.attributes;if(attrs.length){for(var i=0,l=attrs.length;i<l;i++){if(attrs[i].specified){return 0}}return 1}}return !node.attributes.length}function doRemove(range){var bookmark1=range.createBookmark();if(range.collapsed){range.enlarge(true)}if(!notIncludeA){var aNode=domUtils.findParentByTagName(range.startContainer,"a",true);if(aNode){range.setStartBefore(aNode)}aNode=domUtils.findParentByTagName(range.endContainer,"a",true);if(aNode){range.setEndAfter(aNode)}}bookmark=range.createBookmark();node=bookmark.start;while((parent=node.parentNode)&&!domUtils.isBlockElm(parent)){domUtils.breakParent(node,parent);domUtils.clearEmptySibling(node)}if(bookmark.end){node=bookmark.end;while((parent=node.parentNode)&&!domUtils.isBlockElm(parent)){domUtils.breakParent(node,parent);domUtils.clearEmptySibling(node)}var current=domUtils.getNextDomNode(bookmark.start,false,filter),next;while(current){if(current==bookmark.end){break}next=domUtils.getNextDomNode(current,true,filter);if(!dtd.$empty[current.tagName.toLowerCase()]&&!domUtils.isBookmarkNode(current)){if(tagReg.test(current.tagName)){if(style){domUtils.removeStyle(current,style);if(isRedundantSpan(current)&&style!="text-decoration"){domUtils.remove(current,true)}}else{domUtils.remove(current,true)}}else{if(!dtd.$tableContent[current.tagName]&&!dtd.$list[current.tagName]){domUtils.removeAttributes(current,removeFormatAttributes);if(isRedundantSpan(current)){domUtils.remove(current,true)}}}}current=next}}var pN=bookmark.start.parentNode;if(domUtils.isBlockElm(pN)&&!dtd.$tableContent[pN.tagName]&&!dtd.$list[pN.tagName]){domUtils.removeAttributes(pN,removeFormatAttributes)}pN=bookmark.end.parentNode;if(bookmark.end&&domUtils.isBlockElm(pN)&&!dtd.$tableContent[pN.tagName]&&!dtd.$list[pN.tagName]){domUtils.removeAttributes(pN,removeFormatAttributes)}range.moveToBookmark(bookmark).moveToBookmark(bookmark1);var node=range.startContainer,tmp,collapsed=range.collapsed;while(node.nodeType==1&&domUtils.isEmptyNode(node)&&dtd.$removeEmpty[node.tagName]){tmp=node.parentNode;range.setStartBefore(node);if(range.startContainer===range.endContainer){range.endOffset--}domUtils.remove(node);node=tmp}if(!collapsed){node=range.endContainer;while(node.nodeType==1&&domUtils.isEmptyNode(node)&&dtd.$removeEmpty[node.tagName]){tmp=node.parentNode;range.setEndBefore(node);domUtils.remove(node);node=tmp}}}range=this.selection.getRange();doRemove(range);range.select()}}};UE.plugins.blockquote=function(){var me=this;function getObj(editor){return domUtils.filterNodeList(editor.selection.getStartElementPath(),"blockquote")}me.commands.blockquote={execCommand:function(cmdName,attrs){var range=this.selection.getRange(),obj=getObj(this),blockquote=dtd.blockquote,bookmark=range.createBookmark();if(obj){var start=range.startContainer,startBlock=domUtils.isBlockElm(start)?start:domUtils.findParent(start,function(node){return domUtils.isBlockElm(node)}),end=range.endContainer,endBlock=domUtils.isBlockElm(end)?end:domUtils.findParent(end,function(node){return domUtils.isBlockElm(node)});startBlock=domUtils.findParentByTagName(startBlock,"li",true)||startBlock;endBlock=domUtils.findParentByTagName(endBlock,"li",true)||endBlock;if(startBlock.tagName=="LI"||startBlock.tagName=="TD"||startBlock===obj||domUtils.isBody(startBlock)){domUtils.remove(obj,true)}else{domUtils.breakParent(startBlock,obj)}if(startBlock!==endBlock){obj=domUtils.findParentByTagName(endBlock,"blockquote");if(obj){if(endBlock.tagName=="LI"||endBlock.tagName=="TD"||domUtils.isBody(endBlock)){obj.parentNode&&domUtils.remove(obj,true)}else{domUtils.breakParent(endBlock,obj)}}}var blockquotes=domUtils.getElementsByTagName(this.document,"blockquote");for(var i=0,bi;bi=blockquotes[i++];){if(!bi.childNodes.length){domUtils.remove(bi)}else{if(domUtils.getPosition(bi,startBlock)&domUtils.POSITION_FOLLOWING&&domUtils.getPosition(bi,endBlock)&domUtils.POSITION_PRECEDING){domUtils.remove(bi,true)}}}}else{var tmpRange=range.cloneRange(),node=tmpRange.startContainer.nodeType==1?tmpRange.startContainer:tmpRange.startContainer.parentNode,preNode=node,doEnd=1;while(1){if(domUtils.isBody(node)){if(preNode!==node){if(range.collapsed){tmpRange.selectNode(preNode);doEnd=0}else{tmpRange.setStartBefore(preNode)}}else{tmpRange.setStart(node,0)}break}if(!blockquote[node.tagName]){if(range.collapsed){tmpRange.selectNode(preNode)}else{tmpRange.setStartBefore(preNode)}break}preNode=node;node=node.parentNode}if(doEnd){preNode=node=node=tmpRange.endContainer.nodeType==1?tmpRange.endContainer:tmpRange.endContainer.parentNode;while(1){if(domUtils.isBody(node)){if(preNode!==node){tmpRange.setEndAfter(preNode)}else{tmpRange.setEnd(node,node.childNodes.length)}break}if(!blockquote[node.tagName]){tmpRange.setEndAfter(preNode);break}preNode=node;node=node.parentNode}}node=range.document.createElement("blockquote");domUtils.setAttributes(node,attrs);node.appendChild(tmpRange.extractContents());tmpRange.insertNode(node);var childs=domUtils.getElementsByTagName(node,"blockquote");for(var i=0,ci;ci=childs[i++];){if(ci.parentNode){domUtils.remove(ci,true)}}}range.moveToBookmark(bookmark).select()},queryCommandState:function(){return getObj(this)?1:0}}};UE.commands.touppercase=UE.commands.tolowercase={execCommand:function(cmd){var me=this;var rng=me.selection.getRange();if(rng.collapsed){return rng}var bk=rng.createBookmark(),bkEnd=bk.end,filterFn=function(node){return !domUtils.isBr(node)&&!domUtils.isWhitespace(node)},curNode=domUtils.getNextDomNode(bk.start,false,filterFn);while(curNode&&(domUtils.getPosition(curNode,bkEnd)&domUtils.POSITION_PRECEDING)){if(curNode.nodeType==3){curNode.nodeValue=curNode.nodeValue[cmd=="touppercase"?"toUpperCase":"toLowerCase"]()}curNode=domUtils.getNextDomNode(curNode,true,filterFn);if(curNode===bkEnd){break}}rng.moveToBookmark(bk).select()}};UE.commands.indent={execCommand:function(){var me=this,value=me.queryCommandState("indent")?"0em":(me.options.indentValue||"2em");me.execCommand("Paragraph","p",{style:"text-indent:"+value})},queryCommandState:function(){var pN=domUtils.filterNodeList(this.selection.getStartElementPath(),"p h1 h2 h3 h4 h5 h6");return pN&&pN.style.textIndent&&parseInt(pN.style.textIndent)?1:0}};UE.commands.print={execCommand:function(){this.window.print()},notNeedUndo:1};UE.commands.preview={execCommand:function(){var w=window.open("","_blank",""),d=w.document;d.open();d.write('<!DOCTYPE html><html><head><meta charset="utf-8"/><script src="'+this.options.UEDITOR_HOME_URL+"ueditor.parse.js\"><\/script><script>setTimeout(function(){uParse('div',{rootPath: '"+this.options.UEDITOR_HOME_URL+"'})},300)<\/script></head><body><div>"+this.getContent(null,null,true)+"</div></body></html>");d.close()},notNeedUndo:1};UE.plugins.selectall=function(){var me=this;me.commands.selectall={execCommand:function(){var me=this,body=me.body,range=me.selection.getRange();range.selectNodeContents(body);if(domUtils.isEmptyBlock(body)){if(browser.opera&&body.firstChild&&body.firstChild.nodeType==1){range.setStartAtFirst(body.firstChild)}range.collapse(true)}range.select(true)},notNeedUndo:1};me.addshortcutkey({selectAll:"ctrl+65"})};UE.plugins.paragraph=function(){var me=this,block=domUtils.isBlockElm,notExchange=["TD","LI","PRE"],doParagraph=function(range,style,attrs,sourceCmdName){var bookmark=range.createBookmark(),filterFn=function(node){return node.nodeType==1?node.tagName.toLowerCase()!="br"&&!domUtils.isBookmarkNode(node):!domUtils.isWhitespace(node)},para;range.enlarge(true);var bookmark2=range.createBookmark(),current=domUtils.getNextDomNode(bookmark2.start,false,filterFn),tmpRange=range.cloneRange(),tmpNode;while(current&&!(domUtils.getPosition(current,bookmark2.end)&domUtils.POSITION_FOLLOWING)){if(current.nodeType==3||!block(current)){tmpRange.setStartBefore(current);while(current&&current!==bookmark2.end&&!block(current)){tmpNode=current;current=domUtils.getNextDomNode(current,false,null,function(node){return !block(node)})}tmpRange.setEndAfter(tmpNode);para=range.document.createElement(style);if(attrs){domUtils.setAttributes(para,attrs);if(sourceCmdName&&sourceCmdName=="customstyle"&&attrs.style){para.style.cssText=attrs.style}}para.appendChild(tmpRange.extractContents());if(domUtils.isEmptyNode(para)){domUtils.fillChar(range.document,para)}tmpRange.insertNode(para);var parent=para.parentNode;if(block(parent)&&!domUtils.isBody(para.parentNode)&&utils.indexOf(notExchange,parent.tagName)==-1){if(!(sourceCmdName&&sourceCmdName=="customstyle")){parent.getAttribute("dir")&&para.setAttribute("dir",parent.getAttribute("dir"));parent.style.cssText&&(para.style.cssText=parent.style.cssText+";"+para.style.cssText);parent.style.textAlign&&!para.style.textAlign&&(para.style.textAlign=parent.style.textAlign);parent.style.textIndent&&!para.style.textIndent&&(para.style.textIndent=parent.style.textIndent);parent.style.padding&&!para.style.padding&&(para.style.padding=parent.style.padding)}if(attrs&&/h\d/i.test(parent.tagName)&&!/h\d/i.test(para.tagName)){domUtils.setAttributes(parent,attrs);if(sourceCmdName&&sourceCmdName=="customstyle"&&attrs.style){parent.style.cssText=attrs.style}domUtils.remove(para,true);para=parent}else{domUtils.remove(para.parentNode,true)}}if(utils.indexOf(notExchange,parent.tagName)!=-1){current=parent}else{current=para}current=domUtils.getNextDomNode(current,false,filterFn)}else{current=domUtils.getNextDomNode(current,true,filterFn)}}return range.moveToBookmark(bookmark2).moveToBookmark(bookmark)};me.setOpt("paragraph",{p:"",h1:"",h2:"",h3:"",h4:"",h5:"",h6:""});me.commands.paragraph={execCommand:function(cmdName,style,attrs,sourceCmdName){var range=this.selection.getRange();if(range.collapsed){var txt=this.document.createTextNode("p");range.insertNode(txt);if(browser.ie){var node=txt.previousSibling;if(node&&domUtils.isWhitespace(node)){domUtils.remove(node)}node=txt.nextSibling;if(node&&domUtils.isWhitespace(node)){domUtils.remove(node)}}}range=doParagraph(range,style,attrs,sourceCmdName);if(txt){range.setStartBefore(txt).collapse(true);pN=txt.parentNode;domUtils.remove(txt);if(domUtils.isBlockElm(pN)&&domUtils.isEmptyNode(pN)){domUtils.fillNode(this.document,pN)}}if(browser.gecko&&range.collapsed&&range.startContainer.nodeType==1){var child=range.startContainer.childNodes[range.startOffset];if(child&&child.nodeType==1&&child.tagName.toLowerCase()==style){range.setStart(child,0).collapse(true)}}range.select();return true},queryCommandValue:function(){var node=domUtils.filterNodeList(this.selection.getStartElementPath(),"p h1 h2 h3 h4 h5 h6");return node?node.tagName.toLowerCase():""}}};(function(){var block=domUtils.isBlockElm,getObj=function(editor){return domUtils.filterNodeList(editor.selection.getStartElementPath(),function(n){return n&&n.nodeType==1&&n.getAttribute("dir")})},doDirectionality=function(range,editor,forward){var bookmark,filterFn=function(node){return node.nodeType==1?!domUtils.isBookmarkNode(node):!domUtils.isWhitespace(node)},obj=getObj(editor);if(obj&&range.collapsed){obj.setAttribute("dir",forward);return range}bookmark=range.createBookmark();range.enlarge(true);var bookmark2=range.createBookmark(),current=domUtils.getNextDomNode(bookmark2.start,false,filterFn),tmpRange=range.cloneRange(),tmpNode;while(current&&!(domUtils.getPosition(current,bookmark2.end)&domUtils.POSITION_FOLLOWING)){if(current.nodeType==3||!block(current)){tmpRange.setStartBefore(current);while(current&&current!==bookmark2.end&&!block(current)){tmpNode=current;current=domUtils.getNextDomNode(current,false,null,function(node){return !block(node)})}tmpRange.setEndAfter(tmpNode);var common=tmpRange.getCommonAncestor();if(!domUtils.isBody(common)&&block(common)){common.setAttribute("dir",forward);current=common}else{var p=range.document.createElement("p");p.setAttribute("dir",forward);var frag=tmpRange.extractContents();p.appendChild(frag);tmpRange.insertNode(p);current=p}current=domUtils.getNextDomNode(current,false,filterFn)}else{current=domUtils.getNextDomNode(current,true,filterFn)}}return range.moveToBookmark(bookmark2).moveToBookmark(bookmark)};UE.commands.directionality={execCommand:function(cmdName,forward){var range=this.selection.getRange();if(range.collapsed){var txt=this.document.createTextNode("d");range.insertNode(txt)}doDirectionality(range,this,forward);if(txt){range.setStartBefore(txt).collapse(true);domUtils.remove(txt)}range.select();return true},queryCommandValue:function(){var node=getObj(this);return node?node.getAttribute("dir"):"ltr"}}})();UE.plugins.horizontal=function(){var me=this;me.commands.horizontal={execCommand:function(cmdName){var me=this;if(me.queryCommandState(cmdName)!==-1){me.execCommand("insertHtml","<hr>");var range=me.selection.getRange(),start=range.startContainer;if(start.nodeType==1&&!start.childNodes[range.startOffset]){var tmp;if(tmp=start.childNodes[range.startOffset-1]){if(tmp.nodeType==1&&tmp.tagName=="HR"){if(me.options.enterTag=="p"){tmp=me.document.createElement("p");range.insertNode(tmp);range.setStart(tmp,0).setCursor()}else{tmp=me.document.createElement("br");range.insertNode(tmp);range.setStartBefore(tmp).setCursor()}}}}return true}},queryCommandState:function(){return domUtils.filterNodeList(this.selection.getStartElementPath(),"table")?-1:0}};me.addListener("delkeydown",function(name,evt){var rng=this.selection.getRange();rng.txtToElmBoundary(true);if(domUtils.isStartInblock(rng)){var tmpNode=rng.startContainer;var pre=tmpNode.previousSibling;if(pre&&domUtils.isTagNode(pre,"hr")){domUtils.remove(pre);rng.select();domUtils.preventDefault(evt);return true}}})};UE.commands.time=UE.commands.date={execCommand:function(cmd,format){var date=new Date;function formatTime(date,format){var hh=("0"+date.getHours()).slice(-2),ii=("0"+date.getMinutes()).slice(-2),ss=("0"+date.getSeconds()).slice(-2);format=format||"hh:ii:ss";return format.replace(/hh/ig,hh).replace(/ii/ig,ii).replace(/ss/ig,ss)}function formatDate(date,format){var yyyy=("000"+date.getFullYear()).slice(-4),yy=yyyy.slice(-2),mm=("0"+(date.getMonth()+1)).slice(-2),dd=("0"+date.getDate()).slice(-2);format=format||"yyyy-mm-dd";return format.replace(/yyyy/ig,yyyy).replace(/yy/ig,yy).replace(/mm/ig,mm).replace(/dd/ig,dd)}this.execCommand("insertHtml",cmd=="time"?formatTime(date,format):formatDate(date,format))}};UE.plugins.rowspacing=function(){var me=this;me.setOpt({rowspacingtop:["5","10","15","20","25"],rowspacingbottom:["5","10","15","20","25"]});me.commands.rowspacing={execCommand:function(cmdName,value,dir){this.execCommand("paragraph","p",{style:"margin-"+dir+":"+value+"px"});return true},queryCommandValue:function(cmdName,dir){var pN=domUtils.filterNodeList(this.selection.getStartElementPath(),function(node){return domUtils.isBlockElm(node)}),value;if(pN){value=domUtils.getComputedStyle(pN,"margin-"+dir).replace(/[^\d]/g,"");return !value?0:value}return 0}}};UE.plugins.lineheight=function(){var me=this;me.setOpt({lineheight:["1","1.5","1.75","2","3","4","5"]});me.commands.lineheight={execCommand:function(cmdName,value){this.execCommand("paragraph","p",{style:"line-height:"+(value=="1"?"normal":value+"em")});return true},queryCommandValue:function(){var pN=domUtils.filterNodeList(this.selection.getStartElementPath(),function(node){return domUtils.isBlockElm(node)});if(pN){var value=domUtils.getComputedStyle(pN,"line-height");return value=="normal"?1:value.replace(/[^\d.]*/ig,"")}}}};UE.plugins.insertcode=function(){var me=this;me.ready(function(){utils.cssRule("pre","pre{margin:.5em 0;padding:.4em .6em;border-radius:8px;background:#f8f8f8;}",me.document)});me.setOpt("insertcode",{as3:"ActionScript3",bash:"Bash/Shell",cpp:"C/C++",css:"Css",cf:"CodeFunction","c#":"C#",delphi:"Delphi",diff:"Diff",erlang:"Erlang",groovy:"Groovy",html:"Html",java:"Java",jfx:"JavaFx",js:"Javascript",pl:"Perl",php:"Php",plain:"Plain Text",ps:"PowerShell",python:"Python",ruby:"Ruby",scala:"Scala",sql:"Sql",vb:"Vb",xml:"Xml"});me.commands.insertcode={execCommand:function(cmd,lang){var me=this,rng=me.selection.getRange(),pre=domUtils.findParentByTagName(rng.startContainer,"pre",true);if(pre){pre.className="brush:"+lang+";toolbar:false;"}else{var code="";if(rng.collapsed){code=browser.ie&&browser.ie11below?(browser.version<=8?"&nbsp;":""):"<br/>"}else{var frag=rng.extractContents();var div=me.document.createElement("div");div.appendChild(frag);utils.each(UE.filterNode(UE.htmlparser(div.innerHTML.replace(/[\r\t]/g,"")),me.options.filterTxtRules).children,function(node){if(browser.ie&&browser.ie11below&&browser.version>8){if(node.type=="element"){if(node.tagName=="br"){code+="\n"}else{if(!dtd.$empty[node.tagName]){utils.each(node.children,function(cn){if(cn.type=="element"){if(cn.tagName=="br"){code+="\n"}else{if(!dtd.$empty[node.tagName]){code+=cn.innerText()}}}else{code+=cn.data}});if(!/\n$/.test(code)){code+="\n"}}}}else{code+=node.data+"\n"}if(!node.nextSibling()&&/\n$/.test(code)){code=code.replace(/\n$/,"")}}else{if(browser.ie&&browser.ie11below){if(node.type=="element"){if(node.tagName=="br"){code+="<br>"}else{if(!dtd.$empty[node.tagName]){utils.each(node.children,function(cn){if(cn.type=="element"){if(cn.tagName=="br"){code+="<br>"}else{if(!dtd.$empty[node.tagName]){code+=cn.innerText()}}}else{code+=cn.data}});if(!/br>$/.test(code)){code+="<br>"}}}}else{code+=node.data+"<br>"}if(!node.nextSibling()&&/<br>$/.test(code)){code=code.replace(/<br>$/,"")}}else{code+=(node.type=="element"?(dtd.$empty[node.tagName]?"":node.innerText()):node.data);if(!/br\/?\s*>$/.test(code)){if(!node.nextSibling()){return}code+="<br>"}}}})}me.execCommand("inserthtml",'<pre id="coder"class="brush:'+lang+';toolbar:false">'+code+"</pre>",true);pre=me.document.getElementById("coder");domUtils.removeAttributes(pre,"id");var tmpNode=pre.previousSibling;if(tmpNode&&(tmpNode.nodeType==3&&tmpNode.nodeValue.length==1&&browser.ie&&browser.version==6||domUtils.isEmptyBlock(tmpNode))){domUtils.remove(tmpNode)}var rng=me.selection.getRange();if(domUtils.isEmptyBlock(pre)){rng.setStart(pre,0).setCursor(false,true)}else{rng.selectNodeContents(pre).select()}}},queryCommandValue:function(){var path=this.selection.getStartElementPath();var lang="";utils.each(path,function(node){if(node.nodeName=="PRE"){var match=node.className.match(/brush:([^;]+)/);lang=match&&match[1]?match[1]:"";return false}});return lang}};me.addInputRule(function(root){utils.each(root.getNodesByTagName("pre"),function(pre){var brs=pre.getNodesByTagName("br");if(brs.length){browser.ie&&browser.ie11below&&browser.version>8&&utils.each(brs,function(br){var txt=UE.uNode.createText("\n");br.parentNode.insertBefore(txt,br);br.parentNode.removeChild(br)});return}if(browser.ie&&browser.ie11below&&browser.version>8){return}var code=pre.innerText().split(/\n/);pre.innerHTML("");utils.each(code,function(c){if(c.length){pre.appendChild(UE.uNode.createText(c))}pre.appendChild(UE.uNode.createElement("br"))})})});me.addOutputRule(function(root){utils.each(root.getNodesByTagName("pre"),function(pre){var code="";utils.each(pre.children,function(n){if(n.type=="text"){code+=n.data.replace(/[ ]/g,"&nbsp;").replace(/\n$/,"")}else{if(n.tagName=="br"){code+="\n"}else{code+=(!dtd.$empty[n.tagName]?"":n.innerText())}}});pre.innerText(code.replace(/(&nbsp;|\n)+$/,""))})});me.notNeedCodeQuery={help:1,undo:1,redo:1,source:1,print:1,searchreplace:1,fullscreen:1,preview:1,insertparagraph:1,elementpath:1,insertcode:1,inserthtml:1,selectall:1};var orgQuery=me.queryCommandState;me.queryCommandState=function(cmd){var me=this;if(!me.notNeedCodeQuery[cmd.toLowerCase()]&&me.selection&&me.queryCommandValue("insertcode")){return -1}return UE.Editor.prototype.queryCommandState.apply(this,arguments)};me.addListener("beforeenterkeydown",function(){var rng=me.selection.getRange();var pre=domUtils.findParentByTagName(rng.startContainer,"pre",true);if(pre){me.fireEvent("saveScene");if(!rng.collapsed){rng.deleteContents()}if(!browser.ie||browser.ie9above){var tmpNode=me.document.createElement("br"),pre;rng.insertNode(tmpNode).setStartAfter(tmpNode).collapse(true);var next=tmpNode.nextSibling;if(!next&&(!browser.ie||browser.version>10)){rng.insertNode(tmpNode.cloneNode(false))}else{rng.setStartAfter(tmpNode)}pre=tmpNode.previousSibling;var tmp;while(pre){tmp=pre;pre=pre.previousSibling;if(!pre||pre.nodeName=="BR"){pre=tmp;break}}if(pre){var str="";while(pre&&pre.nodeName!="BR"&&new RegExp("^[\\s"+domUtils.fillChar+"]*$").test(pre.nodeValue)){str+=pre.nodeValue;pre=pre.nextSibling}if(pre.nodeName!="BR"){var match=pre.nodeValue.match(new RegExp("^([\\s"+domUtils.fillChar+"]+)"));if(match&&match[1]){str+=match[1]}}if(str){str=me.document.createTextNode(str);rng.insertNode(str).setStartAfter(str)}}rng.collapse(true).select(true)}else{if(browser.version>8){var txt=me.document.createTextNode("\n");var start=rng.startContainer;if(rng.startOffset==0){var preNode=start.previousSibling;if(preNode){rng.insertNode(txt);var fillchar=me.document.createTextNode(" ");rng.setStartAfter(txt).insertNode(fillchar).setStart(fillchar,0).collapse(true).select(true)}}else{rng.insertNode(txt).setStartAfter(txt);var fillchar=me.document.createTextNode(" ");start=rng.startContainer.childNodes[rng.startOffset];if(start&&!/^\n/.test(start.nodeValue)){rng.setStartBefore(txt)}rng.insertNode(fillchar).setStart(fillchar,0).collapse(true).select(true)}}else{var tmpNode=me.document.createElement("br");rng.insertNode(tmpNode);rng.insertNode(me.document.createTextNode(domUtils.fillChar));rng.setStartAfter(tmpNode);pre=tmpNode.previousSibling;var tmp;while(pre){tmp=pre;pre=pre.previousSibling;if(!pre||pre.nodeName=="BR"){pre=tmp;break}}if(pre){var str="";while(pre&&pre.nodeName!="BR"&&new RegExp("^[ "+domUtils.fillChar+"]*$").test(pre.nodeValue)){str+=pre.nodeValue;pre=pre.nextSibling}if(pre.nodeName!="BR"){var match=pre.nodeValue.match(new RegExp("^([ "+domUtils.fillChar+"]+)"));if(match&&match[1]){str+=match[1]}}str=me.document.createTextNode(str);rng.insertNode(str).setStartAfter(str)}rng.collapse(true).select()}}me.fireEvent("saveScene");return true}});me.addListener("tabkeydown",function(cmd,evt){var rng=me.selection.getRange();var pre=domUtils.findParentByTagName(rng.startContainer,"pre",true);if(pre){me.fireEvent("saveScene");if(evt.shiftKey){}else{if(!rng.collapsed){var bk=rng.createBookmark();var start=bk.start.previousSibling;while(start){if(pre.firstChild===start&&!domUtils.isBr(start)){pre.insertBefore(me.document.createTextNode("    "),start);break}if(domUtils.isBr(start)){pre.insertBefore(me.document.createTextNode("    "),start.nextSibling);break}start=start.previousSibling}var end=bk.end;start=bk.start.nextSibling;if(pre.firstChild===bk.start){pre.insertBefore(me.document.createTextNode("    "),start.nextSibling)}while(start&&start!==end){if(domUtils.isBr(start)&&start.nextSibling){if(start.nextSibling===end){break}pre.insertBefore(me.document.createTextNode("    "),start.nextSibling)}start=start.nextSibling}rng.moveToBookmark(bk).select()}else{var tmpNode=me.document.createTextNode("    ");rng.insertNode(tmpNode).setStartAfter(tmpNode).collapse(true).select(true)}}me.fireEvent("saveScene");return true}});me.addListener("beforeinserthtml",function(evtName,html){var me=this,rng=me.selection.getRange(),pre=domUtils.findParentByTagName(rng.startContainer,"pre",true);if(pre){if(!rng.collapsed){rng.deleteContents()}var htmlstr="";if(browser.ie&&browser.version>8){utils.each(UE.filterNode(UE.htmlparser(html),me.options.filterTxtRules).children,function(node){if(node.type=="element"){if(node.tagName=="br"){htmlstr+="\n"}else{if(!dtd.$empty[node.tagName]){utils.each(node.children,function(cn){if(cn.type=="element"){if(cn.tagName=="br"){htmlstr+="\n"}else{if(!dtd.$empty[node.tagName]){htmlstr+=cn.innerText()}}}else{htmlstr+=cn.data}});if(!/\n$/.test(htmlstr)){htmlstr+="\n"}}}}else{htmlstr+=node.data+"\n"}if(!node.nextSibling()&&/\n$/.test(htmlstr)){htmlstr=htmlstr.replace(/\n$/,"")}});var tmpNode=me.document.createTextNode(utils.html(htmlstr.replace(/&nbsp;/g," ")));rng.insertNode(tmpNode).selectNode(tmpNode).select()}else{var frag=me.document.createDocumentFragment();utils.each(UE.filterNode(UE.htmlparser(html),me.options.filterTxtRules).children,function(node){if(node.type=="element"){if(node.tagName=="br"){frag.appendChild(me.document.createElement("br"))}else{if(!dtd.$empty[node.tagName]){utils.each(node.children,function(cn){if(cn.type=="element"){if(cn.tagName=="br"){frag.appendChild(me.document.createElement("br"))}else{if(!dtd.$empty[node.tagName]){frag.appendChild(me.document.createTextNode(utils.html(cn.innerText().replace(/&nbsp;/g," "))))}}}else{frag.appendChild(me.document.createTextNode(utils.html(cn.data.replace(/&nbsp;/g," "))))}});if(frag.lastChild.nodeName!="BR"){frag.appendChild(me.document.createElement("br"))}}}}else{frag.appendChild(me.document.createTextNode(utils.html(node.data.replace(/&nbsp;/g," "))))}if(!node.nextSibling()&&frag.lastChild.nodeName=="BR"){frag.removeChild(frag.lastChild)}});rng.insertNode(frag).select()}return true}});me.addListener("keydown",function(cmd,evt){var me=this,keyCode=evt.keyCode||evt.which;if(keyCode==40){var rng=me.selection.getRange(),pre,start=rng.startContainer;if(rng.collapsed&&(pre=domUtils.findParentByTagName(rng.startContainer,"pre",true))&&!pre.nextSibling){var last=pre.lastChild;while(last&&last.nodeName=="BR"){last=last.previousSibling}if(last===start||rng.startContainer===pre&&rng.startOffset==pre.childNodes.length){me.execCommand("insertparagraph");domUtils.preventDefault(evt)}}}});me.addListener("delkeydown",function(type,evt){var rng=this.selection.getRange();rng.txtToElmBoundary(true);var start=rng.startContainer;if(domUtils.isTagNode(start,"pre")&&rng.collapsed&&domUtils.isStartInblock(rng)){var p=me.document.createElement("p");domUtils.fillNode(me.document,p);start.parentNode.insertBefore(p,start);domUtils.remove(start);rng.setStart(p,0).setCursor(false,true);domUtils.preventDefault(evt);return true}})};UE.commands.cleardoc={execCommand:function(cmdName){var me=this,enterTag=me.options.enterTag,range=me.selection.getRange();if(enterTag=="br"){me.body.innerHTML="<br/>";range.setStart(me.body,0).setCursor()}else{me.body.innerHTML="<p>"+(ie?"":"<br/>")+"</p>";range.setStart(me.body.firstChild,0).setCursor(false,true)}setTimeout(function(){me.fireEvent("clearDoc")},0)}};UE.plugin.register("anchor",function(){return{bindEvents:{ready:function(){utils.cssRule("anchor",".anchorclass{background: url('"+this.options.themePath+this.options.theme+"/images/anchor.gif') no-repeat scroll left center transparent;cursor: auto;display: inline-block;height: 16px;width: 15px;}",this.document)}},outputRule:function(root){utils.each(root.getNodesByTagName("img"),function(a){var val;if(val=a.getAttr("anchorname")){a.tagName="a";a.setAttr({anchorname:"",name:val,"class":""})}})},inputRule:function(root){utils.each(root.getNodesByTagName("a"),function(a){var val;if((val=a.getAttr("name"))&&!a.getAttr("href")){a.tagName="img";a.setAttr({anchorname:a.getAttr("name"),"class":"anchorclass"});a.setAttr("name")}})},commands:{anchor:{execCommand:function(cmd,name){var range=this.selection.getRange(),img=range.getClosedNode();if(img&&img.getAttribute("anchorname")){if(name){img.setAttribute("anchorname",name)}else{range.setStartBefore(img).setCursor();domUtils.remove(img)}}else{if(name){var anchor=this.document.createElement("img");range.collapse(true);domUtils.setAttributes(anchor,{anchorname:name,"class":"anchorclass"});range.insertNode(anchor).setStartAfter(anchor).setCursor(false,true)}}}}}}});UE.plugins.wordcount=function(){var me=this;me.setOpt("wordCount",true);me.addListener("contentchange",function(){me.fireEvent("wordcount")});var timer;me.addListener("ready",function(){var me=this;domUtils.on(me.body,"keyup",function(evt){var code=evt.keyCode||evt.which,ignores={"16":1,"18":1,"20":1,"37":1,"38":1,"39":1,"40":1};if(code in ignores){return}clearTimeout(timer);timer=setTimeout(function(){me.fireEvent("wordcount")},200)})})};UE.plugins.pagebreak=function(){var me=this,notBreakTags=["td"];me.setOpt("pageBreakTag","_ueditor_page_break_tag_");function fillNode(node){if(domUtils.isEmptyBlock(node)){var firstChild=node.firstChild,tmpNode;while(firstChild&&firstChild.nodeType==1&&domUtils.isEmptyBlock(firstChild)){tmpNode=firstChild;firstChild=firstChild.firstChild}!tmpNode&&(tmpNode=node);domUtils.fillNode(me.document,tmpNode)}}me.ready(function(){utils.cssRule("pagebreak",".pagebreak{display:block;clear:both !important;cursor:default !important;width: 100% !important;margin:0;}",me.document)});function isHr(node){return node&&node.nodeType==1&&node.tagName=="HR"&&node.className=="pagebreak"}me.addInputRule(function(root){root.traversal(function(node){if(node.type=="text"&&node.data==me.options.pageBreakTag){var hr=UE.uNode.createElement('<hr class="pagebreak" noshade="noshade" size="5" style="-webkit-user-select: none;">');node.parentNode.insertBefore(hr,node);node.parentNode.removeChild(node)}})});me.addOutputRule(function(node){utils.each(node.getNodesByTagName("hr"),function(n){if(n.getAttr("class")=="pagebreak"){var txt=UE.uNode.createText(me.options.pageBreakTag);n.parentNode.insertBefore(txt,n);n.parentNode.removeChild(n)}})});me.commands.pagebreak={execCommand:function(){var range=me.selection.getRange(),hr=me.document.createElement("hr");domUtils.setAttributes(hr,{"class":"pagebreak",noshade:"noshade",size:"5"});domUtils.unSelectable(hr);var node=domUtils.findParentByTagName(range.startContainer,notBreakTags,true),parents=[],pN;if(node){switch(node.tagName){case"TD":pN=node.parentNode;if(!pN.previousSibling){var table=domUtils.findParentByTagName(pN,"table");table.parentNode.insertBefore(hr,table);parents=domUtils.findParents(hr,true)}else{pN.parentNode.insertBefore(hr,pN);parents=domUtils.findParents(hr)}pN=parents[1];if(hr!==pN){domUtils.breakParent(hr,pN)}me.fireEvent("afteradjusttable",me.document)}}else{if(!range.collapsed){range.deleteContents();var start=range.startContainer;while(!domUtils.isBody(start)&&domUtils.isBlockElm(start)&&domUtils.isEmptyNode(start)){range.setStartBefore(start).collapse(true);domUtils.remove(start);start=range.startContainer}}range.insertNode(hr);var pN=hr.parentNode,nextNode;while(!domUtils.isBody(pN)){domUtils.breakParent(hr,pN);nextNode=hr.nextSibling;if(nextNode&&domUtils.isEmptyBlock(nextNode)){domUtils.remove(nextNode)}pN=hr.parentNode}nextNode=hr.nextSibling;var pre=hr.previousSibling;if(isHr(pre)){domUtils.remove(pre)}else{pre&&fillNode(pre)}if(!nextNode){var p=me.document.createElement("p");hr.parentNode.appendChild(p);domUtils.fillNode(me.document,p);range.setStart(p,0).collapse(true)}else{if(isHr(nextNode)){domUtils.remove(nextNode)}else{fillNode(nextNode)}range.setEndAfter(hr).collapse(false)}range.select(true)}}}};UE.plugin.register("wordimage",function(){var me=this,images=[];return{commands:{wordimage:{execCommand:function(){var images=domUtils.getElementsByTagName(me.body,"img");var urlList=[];for(var i=0,ci;ci=images[i++];){var url=ci.getAttribute("word_img");url&&urlList.push(url)}return urlList},queryCommandState:function(){images=domUtils.getElementsByTagName(me.body,"img");for(var i=0,ci;ci=images[i++];){if(ci.getAttribute("word_img")){return 1}}return -1},notNeedUndo:true}},inputRule:function(root){utils.each(root.getNodesByTagName("img"),function(img){var attrs=img.attrs,flag=parseInt(attrs.width)<128||parseInt(attrs.height)<43,opt=me.options,src=opt.UEDITOR_HOME_URL+"themes/default/images/spacer.gif";if(attrs.src&&/^(?:(file:\/+))/.test(attrs.src)){img.setAttr({width:attrs.width,height:attrs.height,alt:attrs.alt,word_img:attrs.src,src:src,style:"background:url("+(flag?opt.themePath+opt.theme+"/images/word.gif":opt.langPath+opt.lang+"/images/localimage.png")+") no-repeat center center;border:1px solid #ddd"})}})}}});UE.plugins.dragdrop=function(){var me=this;me.ready(function(){domUtils.on(this.body,"dragend",function(){var rng=me.selection.getRange();var node=rng.getClosedNode()||me.selection.getStart();if(node&&node.tagName=="IMG"){var pre=node.previousSibling,next;while(next=node.nextSibling){if(next.nodeType==1&&next.tagName=="SPAN"&&!next.firstChild){domUtils.remove(next)}else{break}}if((pre&&pre.nodeType==1&&!domUtils.isEmptyBlock(pre)||!pre)&&(!next||next&&!domUtils.isEmptyBlock(next))){if(pre&&pre.tagName=="P"&&!domUtils.isEmptyBlock(pre)){pre.appendChild(node);domUtils.moveChild(next,pre);domUtils.remove(next)}else{if(next&&next.tagName=="P"&&!domUtils.isEmptyBlock(next)){next.insertBefore(node,next.firstChild)}}if(pre&&pre.tagName=="P"&&domUtils.isEmptyBlock(pre)){domUtils.remove(pre)}if(next&&next.tagName=="P"&&domUtils.isEmptyBlock(next)){domUtils.remove(next)}rng.selectNode(node).select();me.fireEvent("saveScene")}}})});me.addListener("keyup",function(type,evt){var keyCode=evt.keyCode||evt.which;if(keyCode==13){var rng=me.selection.getRange(),node;if(node=domUtils.findParentByTagName(rng.startContainer,"p",true)){if(domUtils.getComputedStyle(node,"text-align")=="center"){domUtils.removeStyle(node,"text-align")}}}})};UE.plugins.undo=function(){var saveSceneTimer;var me=this,maxUndoCount=me.options.maxUndoCount||20,maxInputCount=me.options.maxInputCount||20,fillchar=new RegExp(domUtils.fillChar+"|</hr>","gi");var noNeedFillCharTags={ol:1,ul:1,table:1,tbody:1,tr:1,body:1};var orgState=me.options.autoClearEmptyNode;function compareAddr(indexA,indexB){if(indexA.length!=indexB.length){return 0}for(var i=0,l=indexA.length;i<l;i++){if(indexA[i]!=indexB[i]){return 0}}return 1}function compareRangeAddress(rngAddrA,rngAddrB){if(rngAddrA.collapsed!=rngAddrB.collapsed){return 0}if(!compareAddr(rngAddrA.startAddress,rngAddrB.startAddress)||!compareAddr(rngAddrA.endAddress,rngAddrB.endAddress)){return 0}return 1}function UndoManager(){this.list=[];this.index=0;this.hasUndo=false;this.hasRedo=false;this.undo=function(){if(this.hasUndo){if(!this.list[this.index-1]&&this.list.length==1){this.reset();return}while(this.list[this.index].content==this.list[this.index-1].content){this.index--;if(this.index==0){return this.restore(0)}}this.restore(--this.index)}};this.redo=function(){if(this.hasRedo){while(this.list[this.index].content==this.list[this.index+1].content){this.index++;if(this.index==this.list.length-1){return this.restore(this.index)}}this.restore(++this.index)}};this.restore=function(){var me=this.editor;var scene=this.list[this.index];var root=UE.htmlparser(scene.content.replace(fillchar,""));me.options.autoClearEmptyNode=false;me.filterInputRule(root);me.options.autoClearEmptyNode=orgState;me.document.body.innerHTML=root.toHtml();me.fireEvent("afterscencerestore");if(browser.ie){utils.each(domUtils.getElementsByTagName(me.document,"td th caption p"),function(node){if(domUtils.isEmptyNode(node)){domUtils.fillNode(me.document,node)}})}try{var rng=new dom.Range(me.document).moveToAddress(scene.address);rng.select(noNeedFillCharTags[rng.startContainer.nodeName.toLowerCase()])}catch(e){}this.update();this.clearKey();me.fireEvent("reset",true)};this.getScene=function(){var me=this.editor;var rng=me.selection.getRange(),rngAddress=rng.createAddress(false,true);me.fireEvent("beforegetscene");var root=UE.htmlparser(me.body.innerHTML);me.options.autoClearEmptyNode=false;me.filterOutputRule(root);me.options.autoClearEmptyNode=orgState;var cont=root.toHtml();me.fireEvent("aftergetscene");return{address:rngAddress,content:cont}};this.save=function(notCompareRange,notSetCursor){clearTimeout(saveSceneTimer);var currentScene=this.getScene(notSetCursor),lastScene=this.list[this.index];if(lastScene&&lastScene.content!=currentScene.content){me.trigger("contentchange")}if(lastScene&&lastScene.content==currentScene.content&&(notCompareRange?1:compareRangeAddress(lastScene.address,currentScene.address))){return}this.list=this.list.slice(0,this.index+1);this.list.push(currentScene);if(this.list.length>maxUndoCount){this.list.shift()}this.index=this.list.length-1;this.clearKey();this.update()};this.update=function(){this.hasRedo=!!this.list[this.index+1];this.hasUndo=!!this.list[this.index-1]};this.reset=function(){this.list=[];this.index=0;this.hasUndo=false;this.hasRedo=false;this.clearKey()};this.clearKey=function(){keycont=0;lastKeyCode=null}}me.undoManger=new UndoManager();me.undoManger.editor=me;function saveScene(){this.undoManger.save()}me.addListener("saveScene",function(){var args=Array.prototype.splice.call(arguments,1);this.undoManger.save.apply(this.undoManger,args)});me.addListener("reset",function(type,exclude){if(!exclude){this.undoManger.reset()}});me.commands.redo=me.commands.undo={execCommand:function(cmdName){this.undoManger[cmdName]()},queryCommandState:function(cmdName){return this.undoManger["has"+(cmdName.toLowerCase()=="undo"?"Undo":"Redo")]?0:-1},notNeedUndo:1};var keys={16:1,17:1,18:1,37:1,38:1,39:1,40:1},keycont=0,lastKeyCode;var inputType=false;me.addListener("ready",function(){domUtils.on(this.body,"compositionstart",function(){inputType=true});domUtils.on(this.body,"compositionend",function(){inputType=false})});me.addshortcutkey({Undo:"ctrl+90",Redo:"ctrl+89"});var isCollapsed=true;me.addListener("keydown",function(type,evt){var me=this;var keyCode=evt.keyCode||evt.which;if(!keys[keyCode]&&!evt.ctrlKey&&!evt.metaKey&&!evt.shiftKey&&!evt.altKey){if(inputType){return}if(!me.selection.getRange().collapsed){me.undoManger.save(false,true);isCollapsed=false;return}if(me.undoManger.list.length==0){me.undoManger.save(true)}clearTimeout(saveSceneTimer);function save(cont){cont.undoManger.save(false,true);cont.fireEvent("selectionchange")}saveSceneTimer=setTimeout(function(){if(inputType){var interalTimer=setInterval(function(){if(!inputType){save(me);clearInterval(interalTimer)}},300);return}save(me)},200);lastKeyCode=keyCode;keycont++;if(keycont>=maxInputCount){save(me)}}});me.addListener("keyup",function(type,evt){var keyCode=evt.keyCode||evt.which;if(!keys[keyCode]&&!evt.ctrlKey&&!evt.metaKey&&!evt.shiftKey&&!evt.altKey){if(inputType){return}if(!isCollapsed){this.undoManger.save(false,true);isCollapsed=true}}});me.stopCmdUndo=function(){me.__hasEnterExecCommand=true};me.startCmdUndo=function(){me.__hasEnterExecCommand=false}};UE.plugin.register("copy",function(){var me=this;function initZeroClipboard(){ZeroClipboard.config({debug:false,swfPath:me.options.UEDITOR_HOME_URL+"third-party/zeroclipboard/ZeroClipboard.swf"});var client=me.zeroclipboard=new ZeroClipboard();client.on("copy",function(e){var client=e.client,rng=me.selection.getRange(),div=document.createElement("div");div.appendChild(rng.cloneContents());client.setText(div.innerText||div.textContent);client.setHtml(div.innerHTML);rng.select()});client.on("mouseover mouseout",function(e){var target=e.target;if(e.type=="mouseover"){domUtils.addClass(target,"edui-state-hover")}else{if(e.type=="mouseout"){domUtils.removeClasses(target,"edui-state-hover")}}});client.on("wrongflash noflash",function(){ZeroClipboard.destroy()})}return{bindEvents:{ready:function(){if(!browser.ie){if(window.ZeroClipboard){initZeroClipboard()}else{utils.loadFile(document,{src:me.options.UEDITOR_HOME_URL+"third-party/zeroclipboard/ZeroClipboard.js",tag:"script",type:"text/javascript",defer:"defer"},function(){initZeroClipboard()})}}}},commands:{copy:{execCommand:function(cmd){if(!me.document.execCommand("copy")){alert(me.getLang("copymsg"))}}}}}});UE.plugins.paste=function(){function getClipboardData(callback){var doc=this.document;if(doc.getElementById("baidu_pastebin")){return}var range=this.selection.getRange(),bk=range.createBookmark(),pastebin=doc.createElement("div");pastebin.id="baidu_pastebin";browser.webkit&&pastebin.appendChild(doc.createTextNode(domUtils.fillChar+domUtils.fillChar));doc.body.appendChild(pastebin);bk.start.style.display="";pastebin.style.cssText="position:absolute;width:1px;height:1px;overflow:hidden;left:-1000px;white-space:nowrap;top:"+domUtils.getXY(bk.start).y+"px";range.selectNodeContents(pastebin).select(true);setTimeout(function(){if(browser.webkit){for(var i=0,pastebins=doc.querySelectorAll("#baidu_pastebin"),pi;pi=pastebins[i++];){if(domUtils.isEmptyNode(pi)){domUtils.remove(pi)}else{pastebin=pi;break}}}try{pastebin.parentNode.removeChild(pastebin)}catch(e){}range.moveToBookmark(bk).select(true);callback(pastebin)},0)}var me=this;me.setOpt({retainOnlyLabelPasted:false});var txtContent,htmlContent,address;function getPureHtml(html){return html.replace(/<(\/?)([\w\-]+)([^>]*)>/gi,function(a,b,tagName,attrs){tagName=tagName.toLowerCase();if({img:1}[tagName]){return a}attrs=attrs.replace(/([\w\-]*?)\s*=\s*(("([^"]*)")|('([^']*)')|([^\s>]+))/gi,function(str,atr,val){if({src:1,href:1,name:1}[atr.toLowerCase()]){return atr+"="+val+" "}return""});if({span:1,div:1}[tagName]){return""}else{return"<"+b+tagName+" "+utils.trim(attrs)+">"}})}function filter(div){var html;if(div.firstChild){var nodes=domUtils.getElementsByTagName(div,"span");for(var i=0,ni;ni=nodes[i++];){if(ni.id=="_baidu_cut_start"||ni.id=="_baidu_cut_end"){domUtils.remove(ni)}}if(browser.webkit){var brs=div.querySelectorAll("div br");for(var i=0,bi;bi=brs[i++];){var pN=bi.parentNode;if(pN.tagName=="DIV"&&pN.childNodes.length==1){pN.innerHTML="<p><br/></p>";domUtils.remove(pN)}}var divs=div.querySelectorAll("#baidu_pastebin");for(var i=0,di;di=divs[i++];){var tmpP=me.document.createElement("p");di.parentNode.insertBefore(tmpP,di);while(di.firstChild){tmpP.appendChild(di.firstChild)}domUtils.remove(di)}var metas=div.querySelectorAll("meta");for(var i=0,ci;ci=metas[i++];){domUtils.remove(ci)}var brs=div.querySelectorAll("br");for(i=0;ci=brs[i++];){if(/^apple-/i.test(ci.className)){domUtils.remove(ci)}}}if(browser.gecko){var dirtyNodes=div.querySelectorAll("[_moz_dirty]");for(i=0;ci=dirtyNodes[i++];){ci.removeAttribute("_moz_dirty")}}if(!browser.ie){var spans=div.querySelectorAll("span.Apple-style-span");for(var i=0,ci;ci=spans[i++];){domUtils.remove(ci,true)}}html=div.innerHTML;html=UE.filterWord(html);var root=UE.htmlparser(html);if(me.options.filterRules){UE.filterNode(root,me.options.filterRules)}me.filterInputRule(root);if(browser.webkit){var br=root.lastChild();if(br&&br.type=="element"&&br.tagName=="br"){root.removeChild(br)}utils.each(me.body.querySelectorAll("div"),function(node){if(domUtils.isEmptyBlock(node)){domUtils.remove(node,true)}})}html={html:root.toHtml()};me.fireEvent("beforepaste",html,root);if(!html.html){return}root=UE.htmlparser(html.html,true);if(me.queryCommandState("pasteplain")===1){me.execCommand("insertHtml",UE.filterNode(root,me.options.filterTxtRules).toHtml(),true)}else{UE.filterNode(root,me.options.filterTxtRules);txtContent=root.toHtml();htmlContent=html.html;address=me.selection.getRange().createAddress(true);me.execCommand("insertHtml",me.getOpt("retainOnlyLabelPasted")===true?getPureHtml(htmlContent):htmlContent,true)}me.fireEvent("afterpaste",html)}}me.addListener("pasteTransfer",function(cmd,plainType){if(address&&txtContent&&htmlContent&&txtContent!=htmlContent){var range=me.selection.getRange();range.moveToAddress(address,true);if(!range.collapsed){while(!domUtils.isBody(range.startContainer)){var start=range.startContainer;if(start.nodeType==1){start=start.childNodes[range.startOffset];if(!start){range.setStartBefore(range.startContainer);continue}var pre=start.previousSibling;if(pre&&pre.nodeType==3&&new RegExp("^[\n\r\t "+domUtils.fillChar+"]*$").test(pre.nodeValue)){range.setStartBefore(pre)}}if(range.startOffset==0){range.setStartBefore(range.startContainer)}else{break}}while(!domUtils.isBody(range.endContainer)){var end=range.endContainer;if(end.nodeType==1){end=end.childNodes[range.endOffset];if(!end){range.setEndAfter(range.endContainer);continue}var next=end.nextSibling;if(next&&next.nodeType==3&&new RegExp("^[\n\r\t"+domUtils.fillChar+"]*$").test(next.nodeValue)){range.setEndAfter(next)}}if(range.endOffset==range.endContainer[range.endContainer.nodeType==3?"nodeValue":"childNodes"].length){range.setEndAfter(range.endContainer)}else{break}}}range.deleteContents();range.select(true);me.__hasEnterExecCommand=true;var html=htmlContent;if(plainType===2){html=getPureHtml(html)}else{if(plainType){html=txtContent}}me.execCommand("inserthtml",html,true);me.__hasEnterExecCommand=false;var rng=me.selection.getRange();while(!domUtils.isBody(rng.startContainer)&&!rng.startOffset&&rng.startContainer[rng.startContainer.nodeType==3?"nodeValue":"childNodes"].length){rng.setStartBefore(rng.startContainer)}var tmpAddress=rng.createAddress(true);address.endAddress=tmpAddress.startAddress}});me.addListener("ready",function(){domUtils.on(me.body,"cut",function(){var range=me.selection.getRange();if(!range.collapsed&&me.undoManger){me.undoManger.save()}});domUtils.on(me.body,browser.ie||browser.opera?"keydown":"paste",function(e){if((browser.ie||browser.opera)&&((!e.ctrlKey&&!e.metaKey)||e.keyCode!="86")){return}getClipboardData.call(me,function(div){filter(div)})})});me.commands.paste={execCommand:function(cmd){if(browser.ie){getClipboardData.call(me,function(div){filter(div)});me.document.execCommand("paste")}else{alert(me.getLang("pastemsg"))}}}};UE.plugins.pasteplain=function(){var me=this;me.setOpt({pasteplain:false,filterTxtRules:function(){function transP(node){node.tagName="p";node.setStyle()}function removeNode(node){node.parentNode.removeChild(node,true)}return{"-":"script style object iframe embed input select",p:{$:{}},br:{$:{}},div:function(node){var tmpNode,p=UE.uNode.createElement("p");while(tmpNode=node.firstChild()){if(tmpNode.type=="text"||!UE.dom.dtd.$block[tmpNode.tagName]){p.appendChild(tmpNode)}else{if(p.firstChild()){node.parentNode.insertBefore(p,node);p=UE.uNode.createElement("p")}else{node.parentNode.insertBefore(tmpNode,node)}}}if(p.firstChild()){node.parentNode.insertBefore(p,node)}node.parentNode.removeChild(node)},ol:removeNode,ul:removeNode,dl:removeNode,dt:removeNode,dd:removeNode,li:removeNode,caption:transP,th:transP,tr:transP,h1:transP,h2:transP,h3:transP,h4:transP,h5:transP,h6:transP,td:function(node){var txt=!!node.innerText();if(txt){node.parentNode.insertAfter(UE.uNode.createText(" &nbsp; &nbsp;"),node)}node.parentNode.removeChild(node,node.innerText())}}}()});var pasteplain=me.options.pasteplain;me.commands.pasteplain={queryCommandState:function(){return pasteplain?1:0},execCommand:function(){pasteplain=!pasteplain|0},notNeedUndo:1}};UE.plugins.list=function(){var me=this,notExchange={TD:1,PRE:1,BLOCKQUOTE:1};var customStyle={cn:"cn-1-",cn1:"cn-2-",cn2:"cn-3-",num:"num-1-",num1:"num-2-",num2:"num-3-",dash:"dash",dot:"dot"};me.setOpt({autoTransWordToList:false,insertorderedlist:{num:"",num1:"",num2:"",cn:"",cn1:"",cn2:"",decimal:"","lower-alpha":"","lower-roman":"","upper-alpha":"","upper-roman":""},insertunorderedlist:{circle:"",disc:"",square:"",dash:"",dot:""},listDefaultPaddingLeft:"30",listiconpath:"http://bs.baidu.com/listicon/",maxListLevel:-1,disablePInList:false});function listToArray(list){var arr=[];for(var p in list){arr.push(p)}return arr}var listStyle={OL:listToArray(me.options.insertorderedlist),UL:listToArray(me.options.insertunorderedlist)};var liiconpath=me.options.listiconpath;for(var s in customStyle){if(!me.options.insertorderedlist.hasOwnProperty(s)&&!me.options.insertunorderedlist.hasOwnProperty(s)){delete customStyle[s]}}me.ready(function(){var customCss=[];for(var p in customStyle){if(p=="dash"||p=="dot"){customCss.push("li.list-"+customStyle[p]+"{background-image:url("+liiconpath+customStyle[p]+".gif)}");customCss.push("ul.custom_"+p+"{list-style:none;}ul.custom_"+p+" li{background-position:0 3px;background-repeat:no-repeat}")}else{for(var i=0;i<99;i++){customCss.push("li.list-"+customStyle[p]+i+"{background-image:url("+liiconpath+"list-"+customStyle[p]+i+".gif)}")}customCss.push("ol.custom_"+p+"{list-style:none;}ol.custom_"+p+" li{background-position:0 3px;background-repeat:no-repeat}")}switch(p){case"cn":customCss.push("li.list-"+p+"-paddingleft-1{padding-left:25px}");customCss.push("li.list-"+p+"-paddingleft-2{padding-left:40px}");customCss.push("li.list-"+p+"-paddingleft-3{padding-left:55px}");break;case"cn1":customCss.push("li.list-"+p+"-paddingleft-1{padding-left:30px}");customCss.push("li.list-"+p+"-paddingleft-2{padding-left:40px}");customCss.push("li.list-"+p+"-paddingleft-3{padding-left:55px}");break;case"cn2":customCss.push("li.list-"+p+"-paddingleft-1{padding-left:40px}");customCss.push("li.list-"+p+"-paddingleft-2{padding-left:55px}");customCss.push("li.list-"+p+"-paddingleft-3{padding-left:68px}");break;case"num":case"num1":customCss.push("li.list-"+p+"-paddingleft-1{padding-left:25px}");break;case"num2":customCss.push("li.list-"+p+"-paddingleft-1{padding-left:35px}");customCss.push("li.list-"+p+"-paddingleft-2{padding-left:40px}");break;case"dash":customCss.push("li.list-"+p+"-paddingleft{padding-left:35px}");break;case"dot":customCss.push("li.list-"+p+"-paddingleft{padding-left:20px}")}}customCss.push(".list-paddingleft-1{padding-left:0}");customCss.push(".list-paddingleft-2{padding-left:"+me.options.listDefaultPaddingLeft+"px}");customCss.push(".list-paddingleft-3{padding-left:"+me.options.listDefaultPaddingLeft*2+"px}");utils.cssRule("list","ol,ul{margin:0;pading:0;"+(browser.ie?"":"width:95%")+"}li{clear:both;}"+customCss.join("\n"),me.document)});me.ready(function(){domUtils.on(me.body,"cut",function(){setTimeout(function(){var rng=me.selection.getRange(),li;if(!rng.collapsed){if(li=domUtils.findParentByTagName(rng.startContainer,"li",true)){if(!li.nextSibling&&domUtils.isEmptyBlock(li)){var pn=li.parentNode,node;if(node=pn.previousSibling){domUtils.remove(pn);rng.setStartAtLast(node).collapse(true);rng.select(true)}else{if(node=pn.nextSibling){domUtils.remove(pn);rng.setStartAtFirst(node).collapse(true);rng.select(true)}else{var tmpNode=me.document.createElement("p");domUtils.fillNode(me.document,tmpNode);pn.parentNode.insertBefore(tmpNode,pn);domUtils.remove(pn);rng.setStart(tmpNode,0).collapse(true);rng.select(true)}}}}}})})});function getStyle(node){var cls=node.className;if(domUtils.hasClass(node,/custom_/)){return cls.match(/custom_(\w+)/)[1]}return domUtils.getStyle(node,"list-style-type")}me.addListener("beforepaste",function(type,html){var me=this,rng=me.selection.getRange(),li;var root=UE.htmlparser(html.html,true);if(li=domUtils.findParentByTagName(rng.startContainer,"li",true)){var list=li.parentNode,tagName=list.tagName=="OL"?"ul":"ol";utils.each(root.getNodesByTagName(tagName),function(n){n.tagName=list.tagName;n.setAttr();if(n.parentNode===root){type=getStyle(list)||(list.tagName=="OL"?"decimal":"disc")}else{var className=n.parentNode.getAttr("class");if(className&&/custom_/.test(className)){type=className.match(/custom_(\w+)/)[1]}else{type=n.parentNode.getStyle("list-style-type")}if(!type){type=list.tagName=="OL"?"decimal":"disc"}}var index=utils.indexOf(listStyle[list.tagName],type);if(n.parentNode!==root){index=index+1==listStyle[list.tagName].length?0:index+1}var currentStyle=listStyle[list.tagName][index];if(customStyle[currentStyle]){n.setAttr("class","custom_"+currentStyle)}else{n.setStyle("list-style-type",currentStyle)}})}html.html=root.toHtml()});me.getOpt("disablePInList")===true&&me.addOutputRule(function(root){utils.each(root.getNodesByTagName("li"),function(li){var newChildrens=[],index=0;utils.each(li.children,function(n){if(n.tagName=="p"){var tmpNode;while(tmpNode=n.children.pop()){newChildrens.splice(index,0,tmpNode);tmpNode.parentNode=li;lastNode=tmpNode}tmpNode=newChildrens[newChildrens.length-1];if(!tmpNode||tmpNode.type!="element"||tmpNode.tagName!="br"){var br=UE.uNode.createElement("br");br.parentNode=li;newChildrens.push(br)}index=newChildrens.length}});if(newChildrens.length){li.children=newChildrens}})});me.addInputRule(function(root){utils.each(root.getNodesByTagName("li"),function(li){var tmpP=UE.uNode.createElement("p");for(var i=0,ci;ci=li.children[i];){if(ci.type=="text"||dtd.p[ci.tagName]){tmpP.appendChild(ci)}else{if(tmpP.firstChild()){li.insertBefore(tmpP,ci);tmpP=UE.uNode.createElement("p");i=i+2}else{i++}}}if(tmpP.firstChild()&&!tmpP.parentNode||!li.firstChild()){li.appendChild(tmpP)}if(!tmpP.firstChild()){tmpP.innerHTML(browser.ie?"&nbsp;":"<br/>")}var p=li.firstChild();var lastChild=p.lastChild();if(lastChild&&lastChild.type=="text"&&/^\s*$/.test(lastChild.data)){p.removeChild(lastChild)}});if(me.options.autoTransWordToList){var orderlisttype={num1:/^\d+\)/,decimal:/^\d+\./,"lower-alpha":/^[a-z]+\)/,"upper-alpha":/^[A-Z]+\./,cn:/^[\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+[\u3001]/,cn2:/^\([\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+\)/},unorderlisttype={square:"n"};function checkListType(content,container){var span=container.firstChild();if(span&&span.type=="element"&&span.tagName=="span"&&/Wingdings|Symbol/.test(span.getStyle("font-family"))){for(var p in unorderlisttype){if(unorderlisttype[p]==span.data){return p}}return"disc"}for(var p in orderlisttype){if(orderlisttype[p].test(content)){return p}}}utils.each(root.getNodesByTagName("p"),function(node){if(node.getAttr("class")!="MsoListParagraph"){return}node.setStyle("margin","");node.setStyle("margin-left","");node.setAttr("class","");function appendLi(list,p,type){if(list.tagName=="ol"){if(browser.ie){var first=p.firstChild();if(first.type=="element"&&first.tagName=="span"&&orderlisttype[type].test(first.innerText())){p.removeChild(first)}}else{p.innerHTML(p.innerHTML().replace(orderlisttype[type],""))}}else{p.removeChild(p.firstChild())}var li=UE.uNode.createElement("li");li.appendChild(p);list.appendChild(li)}var tmp=node,type,cacheNode=node;if(node.parentNode.tagName!="li"&&(type=checkListType(node.innerText(),node))){var list=UE.uNode.createElement(me.options.insertorderedlist.hasOwnProperty(type)?"ol":"ul");if(customStyle[type]){list.setAttr("class","custom_"+type)}else{list.setStyle("list-style-type",type)}while(node&&node.parentNode.tagName!="li"&&checkListType(node.innerText(),node)){tmp=node.nextSibling();if(!tmp){node.parentNode.insertBefore(list,node)}appendLi(list,node,type);node=tmp}if(!list.parentNode&&node&&node.parentNode){node.parentNode.insertBefore(list,node)}}var span=cacheNode.firstChild();if(span&&span.type=="element"&&span.tagName=="span"&&/^\s*(&nbsp;)+\s*$/.test(span.innerText())){span.parentNode.removeChild(span)}})}});me.addListener("contentchange",function(){adjustListStyle(me.document)});function adjustListStyle(doc,ignore){utils.each(domUtils.getElementsByTagName(doc,"ol ul"),function(node){if(!domUtils.inDoc(node,doc)){return}var parent=node.parentNode;if(parent.tagName==node.tagName){var nodeStyleType=getStyle(node)||(node.tagName=="OL"?"decimal":"disc"),parentStyleType=getStyle(parent)||(parent.tagName=="OL"?"decimal":"disc");if(nodeStyleType==parentStyleType){var styleIndex=utils.indexOf(listStyle[node.tagName],nodeStyleType);styleIndex=styleIndex+1==listStyle[node.tagName].length?0:styleIndex+1;setListStyle(node,listStyle[node.tagName][styleIndex])}}var index=0,type=2;if(domUtils.hasClass(node,/custom_/)){if(!(/[ou]l/i.test(parent.tagName)&&domUtils.hasClass(parent,/custom_/))){type=1}}else{if(/[ou]l/i.test(parent.tagName)&&domUtils.hasClass(parent,/custom_/)){type=3}}var style=domUtils.getStyle(node,"list-style-type");style&&(node.style.cssText="list-style-type:"+style);node.className=utils.trim(node.className.replace(/list-paddingleft-\w+/,""))+" list-paddingleft-"+type;utils.each(domUtils.getElementsByTagName(node,"li"),function(li){li.style.cssText&&(li.style.cssText="");if(!li.firstChild){domUtils.remove(li);return}if(li.parentNode!==node){return}index++;if(domUtils.hasClass(node,/custom_/)){var paddingLeft=1,currentStyle=getStyle(node);if(node.tagName=="OL"){if(currentStyle){switch(currentStyle){case"cn":case"cn1":case"cn2":if(index>10&&(index%10==0||index>10&&index<20)){paddingLeft=2}else{if(index>20){paddingLeft=3}}break;case"num2":if(index>9){paddingLeft=2}}}li.className="list-"+customStyle[currentStyle]+index+" list-"+currentStyle+"-paddingleft-"+paddingLeft}else{li.className="list-"+customStyle[currentStyle]+" list-"+currentStyle+"-paddingleft"}}else{li.className=li.className.replace(/list-[\w\-]+/gi,"")}var className=li.getAttribute("class");if(className!==null&&!className.replace(/\s/g,"")){domUtils.removeAttributes(li,"class")}});!ignore&&adjustList(node,node.tagName.toLowerCase(),getStyle(node)||domUtils.getStyle(node,"list-style-type"),true)})}function adjustList(list,tag,style,ignoreEmpty){var nextList=list.nextSibling;if(nextList&&nextList.nodeType==1&&nextList.tagName.toLowerCase()==tag&&(getStyle(nextList)||domUtils.getStyle(nextList,"list-style-type")||(tag=="ol"?"decimal":"disc"))==style){domUtils.moveChild(nextList,list);if(nextList.childNodes.length==0){domUtils.remove(nextList)}}if(nextList&&domUtils.isFillChar(nextList)){domUtils.remove(nextList)}var preList=list.previousSibling;if(preList&&preList.nodeType==1&&preList.tagName.toLowerCase()==tag&&(getStyle(preList)||domUtils.getStyle(preList,"list-style-type")||(tag=="ol"?"decimal":"disc"))==style){domUtils.moveChild(list,preList)}if(preList&&domUtils.isFillChar(preList)){domUtils.remove(preList)}!ignoreEmpty&&domUtils.isEmptyBlock(list)&&domUtils.remove(list);if(getStyle(list)){adjustListStyle(list.ownerDocument,true)}}function setListStyle(list,style){if(customStyle[style]){list.className="custom_"+style}try{domUtils.setStyle(list,"list-style-type",style)}catch(e){}}function clearEmptySibling(node){var tmpNode=node.previousSibling;if(tmpNode&&domUtils.isEmptyBlock(tmpNode)){domUtils.remove(tmpNode)}tmpNode=node.nextSibling;if(tmpNode&&domUtils.isEmptyBlock(tmpNode)){domUtils.remove(tmpNode)}}me.addListener("keydown",function(type,evt){function preventAndSave(){evt.preventDefault?evt.preventDefault():(evt.returnValue=false);me.fireEvent("contentchange");me.undoManger&&me.undoManger.save()}function findList(node,filterFn){while(node&&!domUtils.isBody(node)){if(filterFn(node)){return null}if(node.nodeType==1&&/[ou]l/i.test(node.tagName)){return node}node=node.parentNode}return null}var keyCode=evt.keyCode||evt.which;if(keyCode==13&&!evt.shiftKey){var rng=me.selection.getRange(),parent=domUtils.findParent(rng.startContainer,function(node){return domUtils.isBlockElm(node)},true),li=domUtils.findParentByTagName(rng.startContainer,"li",true);if(parent&&parent.tagName!="PRE"&&!li){var html=parent.innerHTML.replace(new RegExp(domUtils.fillChar,"g"),"");if(/^\s*1\s*\.[^\d]/.test(html)){parent.innerHTML=html.replace(/^\s*1\s*\./,"");rng.setStartAtLast(parent).collapse(true).select();me.__hasEnterExecCommand=true;me.execCommand("insertorderedlist");me.__hasEnterExecCommand=false}}var range=me.selection.getRange(),start=findList(range.startContainer,function(node){return node.tagName=="TABLE"}),end=range.collapsed?start:findList(range.endContainer,function(node){return node.tagName=="TABLE"});if(start&&end&&start===end){if(!range.collapsed){start=domUtils.findParentByTagName(range.startContainer,"li",true);end=domUtils.findParentByTagName(range.endContainer,"li",true);if(start&&end&&start===end){range.deleteContents();li=domUtils.findParentByTagName(range.startContainer,"li",true);if(li&&domUtils.isEmptyBlock(li)){pre=li.previousSibling;next=li.nextSibling;p=me.document.createElement("p");domUtils.fillNode(me.document,p);parentList=li.parentNode;if(pre&&next){range.setStart(next,0).collapse(true).select(true);domUtils.remove(li)}else{if(!pre&&!next||!pre){parentList.parentNode.insertBefore(p,parentList)}else{li.parentNode.parentNode.insertBefore(p,parentList.nextSibling)}domUtils.remove(li);if(!parentList.firstChild){domUtils.remove(parentList)}range.setStart(p,0).setCursor()}preventAndSave();return}}else{var tmpRange=range.cloneRange(),bk=tmpRange.collapse(false).createBookmark();range.deleteContents();tmpRange.moveToBookmark(bk);var li=domUtils.findParentByTagName(tmpRange.startContainer,"li",true);clearEmptySibling(li);tmpRange.select();preventAndSave();return}}li=domUtils.findParentByTagName(range.startContainer,"li",true);if(li){if(domUtils.isEmptyBlock(li)){bk=range.createBookmark();var parentList=li.parentNode;if(li!==parentList.lastChild){domUtils.breakParent(li,parentList);clearEmptySibling(li)}else{parentList.parentNode.insertBefore(li,parentList.nextSibling);if(domUtils.isEmptyNode(parentList)){domUtils.remove(parentList)}}if(!dtd.$list[li.parentNode.tagName]){if(!domUtils.isBlockElm(li.firstChild)){p=me.document.createElement("p");li.parentNode.insertBefore(p,li);while(li.firstChild){p.appendChild(li.firstChild)}domUtils.remove(li)}else{domUtils.remove(li,true)}}range.moveToBookmark(bk).select()}else{var first=li.firstChild;if(!first||!domUtils.isBlockElm(first)){var p=me.document.createElement("p");!li.firstChild&&domUtils.fillNode(me.document,p);while(li.firstChild){p.appendChild(li.firstChild)}li.appendChild(p);first=p}var span=me.document.createElement("span");range.insertNode(span);domUtils.breakParent(span,li);var nextLi=span.nextSibling;first=nextLi.firstChild;if(!first){p=me.document.createElement("p");domUtils.fillNode(me.document,p);nextLi.appendChild(p);first=p}if(domUtils.isEmptyNode(first)){first.innerHTML="";domUtils.fillNode(me.document,first)}range.setStart(first,0).collapse(true).shrinkBoundary().select();domUtils.remove(span);var pre=nextLi.previousSibling;if(pre&&domUtils.isEmptyBlock(pre)){pre.innerHTML="<p></p>";domUtils.fillNode(me.document,pre.firstChild)}}preventAndSave()}}}if(keyCode==8){range=me.selection.getRange();if(range.collapsed&&domUtils.isStartInblock(range)){tmpRange=range.cloneRange().trimBoundary();li=domUtils.findParentByTagName(range.startContainer,"li",true);if(li&&domUtils.isStartInblock(tmpRange)){start=domUtils.findParentByTagName(range.startContainer,"p",true);if(start&&start!==li.firstChild){var parentList=domUtils.findParentByTagName(start,["ol","ul"]);domUtils.breakParent(start,parentList);clearEmptySibling(start);me.fireEvent("contentchange");range.setStart(start,0).setCursor(false,true);me.fireEvent("saveScene");domUtils.preventDefault(evt);return}if(li&&(pre=li.previousSibling)){if(keyCode==46&&li.childNodes.length){return}if(dtd.$list[pre.tagName]){pre=pre.lastChild}me.undoManger&&me.undoManger.save();first=li.firstChild;if(domUtils.isBlockElm(first)){if(domUtils.isEmptyNode(first)){pre.appendChild(first);range.setStart(first,0).setCursor(false,true);while(li.firstChild){pre.appendChild(li.firstChild)}}else{span=me.document.createElement("span");range.insertNode(span);if(domUtils.isEmptyBlock(pre)){pre.innerHTML=""}domUtils.moveChild(li,pre);range.setStartBefore(span).collapse(true).select(true);domUtils.remove(span)}}else{if(domUtils.isEmptyNode(li)){var p=me.document.createElement("p");pre.appendChild(p);range.setStart(p,0).setCursor()}else{range.setEnd(pre,pre.childNodes.length).collapse().select(true);while(li.firstChild){pre.appendChild(li.firstChild)}}}domUtils.remove(li);me.fireEvent("contentchange");me.fireEvent("saveScene");domUtils.preventDefault(evt);return}if(li&&!li.previousSibling){var parentList=li.parentNode;var bk=range.createBookmark();if(domUtils.isTagNode(parentList.parentNode,"ol ul")){parentList.parentNode.insertBefore(li,parentList);if(domUtils.isEmptyNode(parentList)){domUtils.remove(parentList)}}else{while(li.firstChild){parentList.parentNode.insertBefore(li.firstChild,parentList)}domUtils.remove(li);if(domUtils.isEmptyNode(parentList)){domUtils.remove(parentList)}}range.moveToBookmark(bk).setCursor(false,true);me.fireEvent("contentchange");me.fireEvent("saveScene");domUtils.preventDefault(evt);return}}}}});me.addListener("keyup",function(type,evt){var keyCode=evt.keyCode||evt.which;if(keyCode==8){var rng=me.selection.getRange(),list;if(list=domUtils.findParentByTagName(rng.startContainer,["ol","ul"],true)){adjustList(list,list.tagName.toLowerCase(),getStyle(list)||domUtils.getComputedStyle(list,"list-style-type"),true)}}});me.addListener("tabkeydown",function(){var range=me.selection.getRange();function checkLevel(li){if(me.options.maxListLevel!=-1){var level=li.parentNode,levelNum=0;while(/[ou]l/i.test(level.tagName)){levelNum++;level=level.parentNode}if(levelNum>=me.options.maxListLevel){return true}}}var li=domUtils.findParentByTagName(range.startContainer,"li",true);if(li){var bk;if(range.collapsed){if(checkLevel(li)){return true}var parentLi=li.parentNode,list=me.document.createElement(parentLi.tagName),index=utils.indexOf(listStyle[list.tagName],getStyle(parentLi)||domUtils.getComputedStyle(parentLi,"list-style-type"));index=index+1==listStyle[list.tagName].length?0:index+1;var currentStyle=listStyle[list.tagName][index];setListStyle(list,currentStyle);if(domUtils.isStartInblock(range)){me.fireEvent("saveScene");bk=range.createBookmark();parentLi.insertBefore(list,li);list.appendChild(li);adjustList(list,list.tagName.toLowerCase(),currentStyle);me.fireEvent("contentchange");range.moveToBookmark(bk).select(true);return true}}else{me.fireEvent("saveScene");bk=range.createBookmark();for(var i=0,closeList,parents=domUtils.findParents(li),ci;ci=parents[i++];){if(domUtils.isTagNode(ci,"ol ul")){closeList=ci;break}}var current=li;if(bk.end){while(current&&!(domUtils.getPosition(current,bk.end)&domUtils.POSITION_FOLLOWING)){if(checkLevel(current)){current=domUtils.getNextDomNode(current,false,null,function(node){return node!==closeList});continue}var parentLi=current.parentNode,list=me.document.createElement(parentLi.tagName),index=utils.indexOf(listStyle[list.tagName],getStyle(parentLi)||domUtils.getComputedStyle(parentLi,"list-style-type"));var currentIndex=index+1==listStyle[list.tagName].length?0:index+1;var currentStyle=listStyle[list.tagName][currentIndex];setListStyle(list,currentStyle);parentLi.insertBefore(list,current);while(current&&!(domUtils.getPosition(current,bk.end)&domUtils.POSITION_FOLLOWING)){li=current.nextSibling;list.appendChild(current);if(!li||domUtils.isTagNode(li,"ol ul")){if(li){while(li=li.firstChild){if(li.tagName=="LI"){break}}}else{li=domUtils.getNextDomNode(current,false,null,function(node){return node!==closeList})}break}current=li}adjustList(list,list.tagName.toLowerCase(),currentStyle);current=li}}me.fireEvent("contentchange");range.moveToBookmark(bk).select();return true}}});function getLi(start){while(start&&!domUtils.isBody(start)){if(start.nodeName=="TABLE"){return null}if(start.nodeName=="LI"){return start}start=start.parentNode}}me.commands.insertorderedlist=me.commands.insertunorderedlist={execCommand:function(command,style){if(!style){style=command.toLowerCase()=="insertorderedlist"?"decimal":"disc"}var me=this,range=this.selection.getRange(),filterFn=function(node){return node.nodeType==1?node.tagName.toLowerCase()!="br":!domUtils.isWhitespace(node)},tag=command.toLowerCase()=="insertorderedlist"?"ol":"ul",frag=me.document.createDocumentFragment();range.adjustmentBoundary().shrinkBoundary();var bko=range.createBookmark(true),start=getLi(me.document.getElementById(bko.start)),modifyStart=0,end=getLi(me.document.getElementById(bko.end)),modifyEnd=0,startParent,endParent,list,tmp;if(start||end){start&&(startParent=start.parentNode);if(!bko.end){end=start}end&&(endParent=end.parentNode);if(startParent===endParent){while(start!==end){tmp=start;start=start.nextSibling;if(!domUtils.isBlockElm(tmp.firstChild)){var p=me.document.createElement("p");while(tmp.firstChild){p.appendChild(tmp.firstChild)}tmp.appendChild(p)}frag.appendChild(tmp)}tmp=me.document.createElement("span");startParent.insertBefore(tmp,end);if(!domUtils.isBlockElm(end.firstChild)){p=me.document.createElement("p");while(end.firstChild){p.appendChild(end.firstChild)}end.appendChild(p)}frag.appendChild(end);domUtils.breakParent(tmp,startParent);if(domUtils.isEmptyNode(tmp.previousSibling)){domUtils.remove(tmp.previousSibling)}if(domUtils.isEmptyNode(tmp.nextSibling)){domUtils.remove(tmp.nextSibling)}var nodeStyle=getStyle(startParent)||domUtils.getComputedStyle(startParent,"list-style-type")||(command.toLowerCase()=="insertorderedlist"?"decimal":"disc");if(startParent.tagName.toLowerCase()==tag&&nodeStyle==style){for(var i=0,ci,tmpFrag=me.document.createDocumentFragment();ci=frag.firstChild;){if(domUtils.isTagNode(ci,"ol ul")){tmpFrag.appendChild(ci)}else{while(ci.firstChild){tmpFrag.appendChild(ci.firstChild);domUtils.remove(ci)}}}tmp.parentNode.insertBefore(tmpFrag,tmp)}else{list=me.document.createElement(tag);setListStyle(list,style);list.appendChild(frag);tmp.parentNode.insertBefore(list,tmp)}domUtils.remove(tmp);list&&adjustList(list,tag,style);range.moveToBookmark(bko).select();return}if(start){while(start){tmp=start.nextSibling;if(domUtils.isTagNode(start,"ol ul")){frag.appendChild(start)}else{var tmpfrag=me.document.createDocumentFragment(),hasBlock=0;while(start.firstChild){if(domUtils.isBlockElm(start.firstChild)){hasBlock=1}tmpfrag.appendChild(start.firstChild)}if(!hasBlock){var tmpP=me.document.createElement("p");tmpP.appendChild(tmpfrag);frag.appendChild(tmpP)}else{frag.appendChild(tmpfrag)}domUtils.remove(start)}start=tmp}startParent.parentNode.insertBefore(frag,startParent.nextSibling);if(domUtils.isEmptyNode(startParent)){range.setStartBefore(startParent);domUtils.remove(startParent)}else{range.setStartAfter(startParent)}modifyStart=1}if(end&&domUtils.inDoc(endParent,me.document)){start=endParent.firstChild;while(start&&start!==end){tmp=start.nextSibling;if(domUtils.isTagNode(start,"ol ul")){frag.appendChild(start)}else{tmpfrag=me.document.createDocumentFragment();hasBlock=0;while(start.firstChild){if(domUtils.isBlockElm(start.firstChild)){hasBlock=1}tmpfrag.appendChild(start.firstChild)}if(!hasBlock){tmpP=me.document.createElement("p");tmpP.appendChild(tmpfrag);frag.appendChild(tmpP)}else{frag.appendChild(tmpfrag)}domUtils.remove(start)}start=tmp}var tmpDiv=domUtils.createElement(me.document,"div",{tmpDiv:1});domUtils.moveChild(end,tmpDiv);frag.appendChild(tmpDiv);domUtils.remove(end);endParent.parentNode.insertBefore(frag,endParent);range.setEndBefore(endParent);if(domUtils.isEmptyNode(endParent)){domUtils.remove(endParent)}modifyEnd=1}}if(!modifyStart){range.setStartBefore(me.document.getElementById(bko.start))}if(bko.end&&!modifyEnd){range.setEndAfter(me.document.getElementById(bko.end))}range.enlarge(true,function(node){return notExchange[node.tagName]});frag=me.document.createDocumentFragment();var bk=range.createBookmark(),current=domUtils.getNextDomNode(bk.start,false,filterFn),tmpRange=range.cloneRange(),tmpNode,block=domUtils.isBlockElm;while(current&&current!==bk.end&&(domUtils.getPosition(current,bk.end)&domUtils.POSITION_PRECEDING)){if(current.nodeType==3||dtd.li[current.tagName]){if(current.nodeType==1&&dtd.$list[current.tagName]){while(current.firstChild){frag.appendChild(current.firstChild)}tmpNode=domUtils.getNextDomNode(current,false,filterFn);domUtils.remove(current);current=tmpNode;continue}tmpNode=current;tmpRange.setStartBefore(current);while(current&&current!==bk.end&&(!block(current)||domUtils.isBookmarkNode(current))){tmpNode=current;current=domUtils.getNextDomNode(current,false,null,function(node){return !notExchange[node.tagName]})}if(current&&block(current)){tmp=domUtils.getNextDomNode(tmpNode,false,filterFn);if(tmp&&domUtils.isBookmarkNode(tmp)){current=domUtils.getNextDomNode(tmp,false,filterFn);tmpNode=tmp}}tmpRange.setEndAfter(tmpNode);current=domUtils.getNextDomNode(tmpNode,false,filterFn);var li=range.document.createElement("li");li.appendChild(tmpRange.extractContents());if(domUtils.isEmptyNode(li)){var tmpNode=range.document.createElement("p");while(li.firstChild){tmpNode.appendChild(li.firstChild)}li.appendChild(tmpNode)}frag.appendChild(li)}else{current=domUtils.getNextDomNode(current,true,filterFn)}}range.moveToBookmark(bk).collapse(true);list=me.document.createElement(tag);setListStyle(list,style);list.appendChild(frag);range.insertNode(list);adjustList(list,tag,style);for(var i=0,ci,tmpDivs=domUtils.getElementsByTagName(list,"div");ci=tmpDivs[i++];){if(ci.getAttribute("tmpDiv")){domUtils.remove(ci,true)}}range.moveToBookmark(bko).select()},queryCommandState:function(command){var tag=command.toLowerCase()=="insertorderedlist"?"ol":"ul";var path=this.selection.getStartElementPath();for(var i=0,ci;ci=path[i++];){if(ci.nodeName=="TABLE"){return 0}if(tag==ci.nodeName.toLowerCase()){return 1}}return 0},queryCommandValue:function(command){var tag=command.toLowerCase()=="insertorderedlist"?"ol":"ul";var path=this.selection.getStartElementPath(),node;for(var i=0,ci;ci=path[i++];){if(ci.nodeName=="TABLE"){node=null;break}if(tag==ci.nodeName.toLowerCase()){node=ci;break}}return node?getStyle(node)||domUtils.getComputedStyle(node,"list-style-type"):null}}};(function(){var sourceEditors={textarea:function(editor,holder){var textarea=holder.ownerDocument.createElement("textarea");textarea.style.cssText="position:absolute;resize:none;width:100%;height:100%;border:0;padding:0;margin:0;overflow-y:auto;";if(browser.ie&&browser.version<8){textarea.style.width=holder.offsetWidth+"px";textarea.style.height=holder.offsetHeight+"px";holder.onresize=function(){textarea.style.width=holder.offsetWidth+"px";textarea.style.height=holder.offsetHeight+"px"}}holder.appendChild(textarea);return{setContent:function(content){textarea.value=content},getContent:function(){return textarea.value},select:function(){var range;if(browser.ie){range=textarea.createTextRange();range.collapse(true);range.select()}else{textarea.setSelectionRange(0,0);textarea.focus()}},dispose:function(){holder.removeChild(textarea);holder.onresize=null;textarea=null;holder=null}}},codemirror:function(editor,holder){var codeEditor=window.CodeMirror(holder,{mode:"text/html",tabMode:"indent",lineNumbers:true,lineWrapping:true});var dom=codeEditor.getWrapperElement();dom.style.cssText='position:absolute;left:0;top:0;width:100%;height:100%;font-family:consolas,"Courier new",monospace;font-size:13px;';codeEditor.getScrollerElement().style.cssText="position:absolute;left:0;top:0;width:100%;height:100%;";codeEditor.refresh();return{getCodeMirror:function(){return codeEditor},setContent:function(content){codeEditor.setValue(content)},getContent:function(){return codeEditor.getValue()},select:function(){codeEditor.focus()},dispose:function(){holder.removeChild(dom);dom=null;codeEditor=null}}}};UE.plugins.source=function(){var me=this;var opt=this.options;var sourceMode=false;var sourceEditor;var orgSetContent;opt.sourceEditor=browser.ie?"textarea":(opt.sourceEditor||"codemirror");me.setOpt({sourceEditorFirst:false});function createSourceEditor(holder){return sourceEditors[opt.sourceEditor=="codemirror"&&window.CodeMirror?"codemirror":"textarea"](me,holder)}var bakCssText;var oldGetContent,bakAddress;me.commands.source={execCommand:function(){sourceMode=!sourceMode;if(sourceMode){bakAddress=me.selection.getRange().createAddress(false,true);me.undoManger&&me.undoManger.save(true);if(browser.gecko){me.body.contentEditable=false}bakCssText=me.iframe.style.cssText;me.iframe.style.cssText+="position:absolute;left:-32768px;top:-32768px;";me.fireEvent("beforegetcontent");var root=UE.htmlparser(me.body.innerHTML);me.filterOutputRule(root);root.traversal(function(node){if(node.type=="element"){switch(node.tagName){case"td":case"th":case"caption":if(node.children&&node.children.length==1){if(node.firstChild().tagName=="br"){node.removeChild(node.firstChild())}}break;case"pre":node.innerText(node.innerText().replace(/&nbsp;/g," "))}}});me.fireEvent("aftergetcontent");var content=root.toHtml(true);sourceEditor=createSourceEditor(me.iframe.parentNode);sourceEditor.setContent(content);orgSetContent=me.setContent;me.setContent=function(html){var root=UE.htmlparser(html);me.filterInputRule(root);html=root.toHtml();sourceEditor.setContent(html)};setTimeout(function(){sourceEditor.select();me.addListener("fullscreenchanged",function(){try{sourceEditor.getCodeMirror().refresh()}catch(e){}})});oldGetContent=me.getContent;me.getContent=function(){return sourceEditor.getContent()||"<p>"+(browser.ie?"":"<br/>")+"</p>"}}else{me.iframe.style.cssText=bakCssText;var cont=sourceEditor.getContent()||"<p>"+(browser.ie?"":"<br/>")+"</p>";cont=cont.replace(new RegExp("[\\r\\t\\n ]*</?(\\w+)\\s*(?:[^>]*)>","g"),function(a,b){if(b&&!dtd.$inlineWithA[b.toLowerCase()]){return a.replace(/(^[\n\r\t ]*)|([\n\r\t ]*$)/g,"")}return a.replace(/(^[\n\r\t]*)|([\n\r\t]*$)/g,"")});me.setContent=orgSetContent;me.setContent(cont);sourceEditor.dispose();sourceEditor=null;me.getContent=oldGetContent;var first=me.body.firstChild;if(!first){me.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>";first=me.body.firstChild}me.undoManger&&me.undoManger.save(true);if(browser.gecko){var input=document.createElement("input");input.style.cssText="position:absolute;left:0;top:-32768px";document.body.appendChild(input);me.body.contentEditable=false;setTimeout(function(){domUtils.setViewportOffset(input,{left:-32768,top:0});input.focus();setTimeout(function(){me.body.contentEditable=true;me.selection.getRange().moveToAddress(bakAddress).select(true);domUtils.remove(input)})})}else{try{me.selection.getRange().moveToAddress(bakAddress).select(true)}catch(e){}}}this.fireEvent("sourcemodechanged",sourceMode)},queryCommandState:function(){return sourceMode|0},notNeedUndo:1};var oldQueryCommandState=me.queryCommandState;me.queryCommandState=function(cmdName){cmdName=cmdName.toLowerCase();if(sourceMode){return cmdName in {source:1,fullscreen:1}?1:-1}return oldQueryCommandState.apply(this,arguments)};if(opt.sourceEditor=="codemirror"){me.addListener("ready",function(){utils.loadFile(document,{src:opt.codeMirrorJsUrl||opt.UEDITOR_HOME_URL+"third-party/codemirror/codemirror.js",tag:"script",type:"text/javascript",defer:"defer"},function(){if(opt.sourceEditorFirst){setTimeout(function(){me.execCommand("source")},0)}});utils.loadFile(document,{tag:"link",rel:"stylesheet",type:"text/css",href:opt.codeMirrorCssUrl||opt.UEDITOR_HOME_URL+"third-party/codemirror/codemirror.css"})})}}})();UE.plugins.enterkey=function(){var hTag,me=this,tag=me.options.enterTag;me.addListener("keyup",function(type,evt){var keyCode=evt.keyCode||evt.which;if(keyCode==13){var range=me.selection.getRange(),start=range.startContainer,doSave;if(!browser.ie){if(/h\d/i.test(hTag)){if(browser.gecko){var h=domUtils.findParentByTagName(start,["h1","h2","h3","h4","h5","h6","blockquote","caption","table"],true);if(!h){me.document.execCommand("formatBlock",false,"<p>");doSave=1}}else{if(start.nodeType==1){var tmp=me.document.createTextNode(""),div;range.insertNode(tmp);div=domUtils.findParentByTagName(tmp,"div",true);if(div){var p=me.document.createElement("p");while(div.firstChild){p.appendChild(div.firstChild)}div.parentNode.insertBefore(p,div);domUtils.remove(div);range.setStartBefore(tmp).setCursor();doSave=1}domUtils.remove(tmp)}}if(me.undoManger&&doSave){me.undoManger.save()}}browser.opera&&range.select()}else{me.fireEvent("saveScene",true,true)}}});me.addListener("keydown",function(type,evt){var keyCode=evt.keyCode||evt.which;if(keyCode==13){if(me.fireEvent("beforeenterkeydown")){domUtils.preventDefault(evt);return}me.fireEvent("saveScene",true,true);hTag="";var range=me.selection.getRange();if(!range.collapsed){var start=range.startContainer,end=range.endContainer,startTd=domUtils.findParentByTagName(start,"td",true),endTd=domUtils.findParentByTagName(end,"td",true);if(startTd&&endTd&&startTd!==endTd||!startTd&&endTd||startTd&&!endTd){evt.preventDefault?evt.preventDefault():(evt.returnValue=false);return}}if(tag=="p"){if(!browser.ie){start=domUtils.findParentByTagName(range.startContainer,["ol","ul","p","h1","h2","h3","h4","h5","h6","blockquote","caption"],true);if(!start&&!browser.opera){me.document.execCommand("formatBlock",false,"<p>");if(browser.gecko){range=me.selection.getRange();start=domUtils.findParentByTagName(range.startContainer,"p",true);start&&domUtils.removeDirtyAttr(start)}}else{hTag=start.tagName;start.tagName.toLowerCase()=="p"&&browser.gecko&&domUtils.removeDirtyAttr(start)}}}else{evt.preventDefault?evt.preventDefault():(evt.returnValue=false);if(!range.collapsed){range.deleteContents();start=range.startContainer;if(start.nodeType==1&&(start=start.childNodes[range.startOffset])){while(start.nodeType==1){if(dtd.$empty[start.tagName]){range.setStartBefore(start).setCursor();if(me.undoManger){me.undoManger.save()}return false}if(!start.firstChild){var br=range.document.createElement("br");start.appendChild(br);range.setStart(start,0).setCursor();if(me.undoManger){me.undoManger.save()}return false}start=start.firstChild}if(start===range.startContainer.childNodes[range.startOffset]){br=range.document.createElement("br");range.insertNode(br).setCursor()}else{range.setStart(start,0).setCursor()}}else{br=range.document.createElement("br");range.insertNode(br).setStartAfter(br).setCursor()}}else{br=range.document.createElement("br");range.insertNode(br);var parent=br.parentNode;if(parent.lastChild===br){br.parentNode.insertBefore(br.cloneNode(true),br);range.setStartBefore(br)}else{range.setStartAfter(br)}range.setCursor()}}}})};UE.plugins.keystrokes=function(){var me=this;var collapsed=true;me.addListener("keydown",function(type,evt){var keyCode=evt.keyCode||evt.which,rng=me.selection.getRange();if(!rng.collapsed&&!(evt.ctrlKey||evt.shiftKey||evt.altKey||evt.metaKey)&&(keyCode>=65&&keyCode<=90||keyCode>=48&&keyCode<=57||keyCode>=96&&keyCode<=111||{13:1,8:1,46:1}[keyCode])){var tmpNode=rng.startContainer;if(domUtils.isFillChar(tmpNode)){rng.setStartBefore(tmpNode)}tmpNode=rng.endContainer;if(domUtils.isFillChar(tmpNode)){rng.setEndAfter(tmpNode)}rng.txtToElmBoundary();if(rng.endContainer&&rng.endContainer.nodeType==1){tmpNode=rng.endContainer.childNodes[rng.endOffset];if(tmpNode&&domUtils.isBr(tmpNode)){rng.setEndAfter(tmpNode)}}if(rng.startOffset==0){tmpNode=rng.startContainer;if(domUtils.isBoundaryNode(tmpNode,"firstChild")){tmpNode=rng.endContainer;if(rng.endOffset==(tmpNode.nodeType==3?tmpNode.nodeValue.length:tmpNode.childNodes.length)&&domUtils.isBoundaryNode(tmpNode,"lastChild")){me.fireEvent("saveScene");me.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>";rng.setStart(me.body.firstChild,0).setCursor(false,true);me._selectionChange();return}}}}if(keyCode==keymap.Backspace){rng=me.selection.getRange();collapsed=rng.collapsed;if(me.fireEvent("delkeydown",evt)){return}var start,end;if(rng.collapsed&&rng.inFillChar()){start=rng.startContainer;if(domUtils.isFillChar(start)){rng.setStartBefore(start).shrinkBoundary(true).collapse(true);domUtils.remove(start)}else{start.nodeValue=start.nodeValue.replace(new RegExp("^"+domUtils.fillChar),"");rng.startOffset--;rng.collapse(true).select(true)}}if(start=rng.getClosedNode()){me.fireEvent("saveScene");rng.setStartBefore(start);domUtils.remove(start);rng.setCursor();me.fireEvent("saveScene");domUtils.preventDefault(evt);return}if(!browser.ie){start=domUtils.findParentByTagName(rng.startContainer,"table",true);end=domUtils.findParentByTagName(rng.endContainer,"table",true);if(start&&!end||!start&&end||start!==end){evt.preventDefault();return}}}if(keyCode==keymap.Tab){var excludeTagNameForTabKey={ol:1,ul:1,table:1};if(me.fireEvent("tabkeydown",evt)){domUtils.preventDefault(evt);return}var range=me.selection.getRange();me.fireEvent("saveScene");for(var i=0,txt="",tabSize=me.options.tabSize||4,tabNode=me.options.tabNode||"&nbsp;";i<tabSize;i++){txt+=tabNode}var span=me.document.createElement("span");span.innerHTML=txt+domUtils.fillChar;if(range.collapsed){range.insertNode(span.cloneNode(true).firstChild).setCursor(true)}else{var filterFn=function(node){return domUtils.isBlockElm(node)&&!excludeTagNameForTabKey[node.tagName.toLowerCase()]};start=domUtils.findParent(range.startContainer,filterFn,true);end=domUtils.findParent(range.endContainer,filterFn,true);if(start&&end&&start===end){range.deleteContents();range.insertNode(span.cloneNode(true).firstChild).setCursor(true)}else{var bookmark=range.createBookmark();range.enlarge(true);var bookmark2=range.createBookmark(),current=domUtils.getNextDomNode(bookmark2.start,false,filterFn);while(current&&!(domUtils.getPosition(current,bookmark2.end)&domUtils.POSITION_FOLLOWING)){current.insertBefore(span.cloneNode(true).firstChild,current.firstChild);current=domUtils.getNextDomNode(current,false,filterFn)}range.moveToBookmark(bookmark2).moveToBookmark(bookmark).select()}}domUtils.preventDefault(evt)}if(browser.gecko&&keyCode==46){range=me.selection.getRange();if(range.collapsed){start=range.startContainer;if(domUtils.isEmptyBlock(start)){var parent=start.parentNode;while(domUtils.getChildCount(parent)==1&&!domUtils.isBody(parent)){start=parent;parent=parent.parentNode}if(start===parent.lastChild){evt.preventDefault()}return}}}});me.addListener("keyup",function(type,evt){var keyCode=evt.keyCode||evt.which,rng,me=this;if(keyCode==keymap.Backspace){if(me.fireEvent("delkeyup")){return}rng=me.selection.getRange();if(rng.collapsed){var tmpNode,autoClearTagName=["h1","h2","h3","h4","h5","h6"];if(tmpNode=domUtils.findParentByTagName(rng.startContainer,autoClearTagName,true)){if(domUtils.isEmptyBlock(tmpNode)){var pre=tmpNode.previousSibling;if(pre&&pre.nodeName!="TABLE"){domUtils.remove(tmpNode);rng.setStartAtLast(pre).setCursor(false,true);return}else{var next=tmpNode.nextSibling;if(next&&next.nodeName!="TABLE"){domUtils.remove(tmpNode);rng.setStartAtFirst(next).setCursor(false,true);return}}}}if(domUtils.isBody(rng.startContainer)){var tmpNode=domUtils.createElement(me.document,"p",{innerHTML:browser.ie?domUtils.fillChar:"<br/>"});rng.insertNode(tmpNode).setStart(tmpNode,0).setCursor(false,true)}}if(!collapsed&&(rng.startContainer.nodeType==3||rng.startContainer.nodeType==1&&domUtils.isEmptyBlock(rng.startContainer))){if(browser.ie){var span=rng.document.createElement("span");rng.insertNode(span).setStartBefore(span).collapse(true);rng.select();domUtils.remove(span)}else{rng.select()}}}})};UE.plugins.fiximgclick=(function(){var elementUpdated=false;function Scale(){this.editor=null;this.resizer=null;this.cover=null;this.doc=document;this.prePos={x:0,y:0};this.startPos={x:0,y:0}}(function(){var rect=[[0,0,-1,-1],[0,0,0,-1],[0,0,1,-1],[0,0,-1,0],[0,0,1,0],[0,0,-1,1],[0,0,0,1],[0,0,1,1]];Scale.prototype={init:function(editor){var me=this;me.editor=editor;me.startPos=this.prePos={x:0,y:0};me.dragId=-1;var hands=[],cover=me.cover=document.createElement("div"),resizer=me.resizer=document.createElement("div");cover.id=me.editor.ui.id+"_imagescale_cover";cover.style.cssText="position:absolute;display:none;z-index:"+(me.editor.options.zIndex)+";filter:alpha(opacity=0); opacity:0;background:#CCC;";domUtils.on(cover,"mousedown click",function(){me.hide()});for(i=0;i<8;i++){hands.push('<span class="edui-editor-imagescale-hand'+i+'"></span>')}resizer.id=me.editor.ui.id+"_imagescale";resizer.className="edui-editor-imagescale";resizer.innerHTML=hands.join("");resizer.style.cssText+=";display:none;border:1px solid #3b77ff;z-index:"+(me.editor.options.zIndex)+";";me.editor.ui.getDom().appendChild(cover);me.editor.ui.getDom().appendChild(resizer);me.initStyle();me.initEvents()},initStyle:function(){utils.cssRule("imagescale",".edui-editor-imagescale{display:none;position:absolute;border:1px solid #38B2CE;cursor:hand;-webkit-box-sizing: content-box;-moz-box-sizing: content-box;box-sizing: content-box;}.edui-editor-imagescale span{position:absolute;width:6px;height:6px;overflow:hidden;font-size:0px;display:block;background-color:#3C9DD0;}.edui-editor-imagescale .edui-editor-imagescale-hand0{cursor:nw-resize;top:0;margin-top:-4px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand1{cursor:n-resize;top:0;margin-top:-4px;left:50%;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand2{cursor:ne-resize;top:0;margin-top:-4px;left:100%;margin-left:-3px;}.edui-editor-imagescale .edui-editor-imagescale-hand3{cursor:w-resize;top:50%;margin-top:-4px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand4{cursor:e-resize;top:50%;margin-top:-4px;left:100%;margin-left:-3px;}.edui-editor-imagescale .edui-editor-imagescale-hand5{cursor:sw-resize;top:100%;margin-top:-3px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand6{cursor:s-resize;top:100%;margin-top:-3px;left:50%;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand7{cursor:se-resize;top:100%;margin-top:-3px;left:100%;margin-left:-3px;}")},initEvents:function(){var me=this;me.startPos.x=me.startPos.y=0;me.isDraging=false},_eventHandler:function(e){var me=this;switch(e.type){case"mousedown":var hand=e.target||e.srcElement,hand;if(hand.className.indexOf("edui-editor-imagescale-hand")!=-1&&me.dragId==-1){me.dragId=hand.className.slice(-1);me.startPos.x=me.prePos.x=e.clientX;me.startPos.y=me.prePos.y=e.clientY;domUtils.on(me.doc,"mousemove",me.proxy(me._eventHandler,me))}break;case"mousemove":if(me.dragId!=-1){me.updateContainerStyle(me.dragId,{x:e.clientX-me.prePos.x,y:e.clientY-me.prePos.y});me.prePos.x=e.clientX;me.prePos.y=e.clientY;elementUpdated=true;me.updateTargetElement()}break;case"mouseup":if(me.dragId!=-1){me.updateContainerStyle(me.dragId,{x:e.clientX-me.prePos.x,y:e.clientY-me.prePos.y});me.updateTargetElement();if(me.target.parentNode){me.attachTo(me.target)}me.dragId=-1}domUtils.un(me.doc,"mousemove",me.proxy(me._eventHandler,me));if(elementUpdated){elementUpdated=false;me.editor.fireEvent("contentchange")}break;default:break}},updateTargetElement:function(){var me=this;domUtils.setStyles(me.target,{width:me.resizer.style.width,height:me.resizer.style.height});me.target.width=parseInt(me.resizer.style.width);me.target.height=parseInt(me.resizer.style.height);me.attachTo(me.target)},updateContainerStyle:function(dir,offset){var me=this,dom=me.resizer,tmp;if(rect[dir][0]!=0){tmp=parseInt(dom.style.left)+offset.x;dom.style.left=me._validScaledProp("left",tmp)+"px"}if(rect[dir][1]!=0){tmp=parseInt(dom.style.top)+offset.y;dom.style.top=me._validScaledProp("top",tmp)+"px"}if(rect[dir][2]!=0){tmp=dom.clientWidth+rect[dir][2]*offset.x;dom.style.width=me._validScaledProp("width",tmp)+"px"}if(rect[dir][3]!=0){tmp=dom.clientHeight+rect[dir][3]*offset.y;dom.style.height=me._validScaledProp("height",tmp)+"px"}},_validScaledProp:function(prop,value){var ele=this.resizer,wrap=document;value=isNaN(value)?0:value;switch(prop){case"left":return value<0?0:(value+ele.clientWidth)>wrap.clientWidth?wrap.clientWidth-ele.clientWidth:value;case"top":return value<0?0:(value+ele.clientHeight)>wrap.clientHeight?wrap.clientHeight-ele.clientHeight:value;case"width":return value<=0?1:(value+ele.offsetLeft)>wrap.clientWidth?wrap.clientWidth-ele.offsetLeft:value;case"height":return value<=0?1:(value+ele.offsetTop)>wrap.clientHeight?wrap.clientHeight-ele.offsetTop:value}},hideCover:function(){this.cover.style.display="none"},showCover:function(){var me=this,editorPos=domUtils.getXY(me.editor.ui.getDom()),iframePos=domUtils.getXY(me.editor.iframe);domUtils.setStyles(me.cover,{width:me.editor.iframe.offsetWidth+"px",height:me.editor.iframe.offsetHeight+"px",top:iframePos.y-editorPos.y+"px",left:iframePos.x-editorPos.x+"px",position:"absolute",display:""})},show:function(targetObj){var me=this;me.resizer.style.display="block";if(targetObj){me.attachTo(targetObj)}domUtils.on(this.resizer,"mousedown",me.proxy(me._eventHandler,me));domUtils.on(me.doc,"mouseup",me.proxy(me._eventHandler,me));me.showCover();me.editor.fireEvent("afterscaleshow",me);me.editor.fireEvent("saveScene")},hide:function(){var me=this;me.hideCover();me.resizer.style.display="none";domUtils.un(me.resizer,"mousedown",me.proxy(me._eventHandler,me));domUtils.un(me.doc,"mouseup",me.proxy(me._eventHandler,me));me.editor.fireEvent("afterscalehide",me)},proxy:function(fn,context){return function(e){return fn.apply(context||this,arguments)}},attachTo:function(targetObj){var me=this,target=me.target=targetObj,resizer=this.resizer,imgPos=domUtils.getXY(target),iframePos=domUtils.getXY(me.editor.iframe),editorPos=domUtils.getXY(resizer.parentNode);domUtils.setStyles(resizer,{width:target.width+"px",height:target.height+"px",left:iframePos.x+imgPos.x-me.editor.document.body.scrollLeft-editorPos.x-parseInt(resizer.style.borderLeftWidth)+"px",top:iframePos.y+imgPos.y-me.editor.document.body.scrollTop-editorPos.y-parseInt(resizer.style.borderTopWidth)+"px"})}}})();return function(){var me=this,imageScale;me.setOpt("imageScaleEnabled",true);if(!browser.ie&&me.options.imageScaleEnabled){me.addListener("click",function(type,e){var range=me.selection.getRange(),img=range.getClosedNode();if(img&&img.tagName=="IMG"&&me.body.contentEditable!="false"){if(img.className.indexOf("edui-faked-music")!=-1||img.getAttribute("anchorname")||domUtils.hasClass(img,"loadingclass")||domUtils.hasClass(img,"loaderrorclass")){return}if(!imageScale){imageScale=new Scale();imageScale.init(me);me.ui.getDom().appendChild(imageScale.resizer);var _keyDownHandler=function(e){imageScale.hide();if(imageScale.target){me.selection.getRange().selectNode(imageScale.target).select()}},_mouseDownHandler=function(e){var ele=e.target||e.srcElement;if(ele&&(ele.className===undefined||ele.className.indexOf("edui-editor-imagescale")==-1)){_keyDownHandler(e)}},timer;me.addListener("afterscaleshow",function(e){me.addListener("beforekeydown",_keyDownHandler);me.addListener("beforemousedown",_mouseDownHandler);domUtils.on(document,"keydown",_keyDownHandler);domUtils.on(document,"mousedown",_mouseDownHandler);me.selection.getNative().removeAllRanges()});me.addListener("afterscalehide",function(e){me.removeListener("beforekeydown",_keyDownHandler);me.removeListener("beforemousedown",_mouseDownHandler);domUtils.un(document,"keydown",_keyDownHandler);domUtils.un(document,"mousedown",_mouseDownHandler);var target=imageScale.target;if(target.parentNode){me.selection.getRange().selectNode(target).select()}});domUtils.on(imageScale.resizer,"mousedown",function(e){me.selection.getNative().removeAllRanges();var ele=e.target||e.srcElement;if(ele&&ele.className.indexOf("edui-editor-imagescale-hand")==-1){timer=setTimeout(function(){imageScale.hide();if(imageScale.target){me.selection.getRange().selectNode(ele).select()}},200)}});domUtils.on(imageScale.resizer,"mouseup",function(e){var ele=e.target||e.srcElement;if(ele&&ele.className.indexOf("edui-editor-imagescale-hand")==-1){clearTimeout(timer)}})}imageScale.show(img)}else{if(imageScale&&imageScale.resizer.style.display!="none"){imageScale.hide()}}})}if(browser.webkit){me.addListener("click",function(type,e){if(e.target.tagName=="IMG"&&me.body.contentEditable!="false"){var range=new dom.Range(me.document);range.selectNode(e.target).select()}})}}})();UE.plugin.register("autolink",function(){var cont=0;return !browser.ie?{bindEvents:{reset:function(){cont=0},keydown:function(type,evt){var me=this;var keyCode=evt.keyCode||evt.which;if(keyCode==32||keyCode==13){var sel=me.selection.getNative(),range=sel.getRangeAt(0).cloneRange(),offset,charCode;var start=range.startContainer;while(start.nodeType==1&&range.startOffset>0){start=range.startContainer.childNodes[range.startOffset-1];if(!start){break}range.setStart(start,start.nodeType==1?start.childNodes.length:start.nodeValue.length);range.collapse(true);start=range.startContainer}do{if(range.startOffset==0){start=range.startContainer.previousSibling;while(start&&start.nodeType==1){start=start.lastChild}if(!start||domUtils.isFillChar(start)){break}offset=start.nodeValue.length}else{start=range.startContainer;offset=range.startOffset}range.setStart(start,offset-1);charCode=range.toString().charCodeAt(0)}while(charCode!=160&&charCode!=32);if(range.toString().replace(new RegExp(domUtils.fillChar,"g"),"").match(/(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i)){while(range.toString().length){if(/^(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i.test(range.toString())){break}try{range.setStart(range.startContainer,range.startOffset+1)}catch(e){var start=range.startContainer;while(!(next=start.nextSibling)){if(domUtils.isBody(start)){return}start=start.parentNode}range.setStart(next,0)}}if(domUtils.findParentByTagName(range.startContainer,"a",true)){return}var a=me.document.createElement("a"),text=me.document.createTextNode(" "),href;me.undoManger&&me.undoManger.save();a.appendChild(range.extractContents());a.href=a.innerHTML=a.innerHTML.replace(/<[^>]+>/g,"");href=a.getAttribute("href").replace(new RegExp(domUtils.fillChar,"g"),"");href=/^(?:https?:\/\/)/ig.test(href)?href:"http://"+href;a.setAttribute("_src",utils.html(href));a.href=utils.html(href);range.insertNode(a);a.parentNode.insertBefore(text,a.nextSibling);range.setStart(text,0);range.collapse(true);sel.removeAllRanges();sel.addRange(range);me.undoManger&&me.undoManger.save()}}}}}:{}},function(){var keyCodes={37:1,38:1,39:1,40:1,13:1,32:1};function checkIsCludeLink(node){if(node.nodeType==3){return null}if(node.nodeName=="A"){return node}var lastChild=node.lastChild;while(lastChild){if(lastChild.nodeName=="A"){return lastChild}if(lastChild.nodeType==3){if(domUtils.isWhitespace(lastChild)){lastChild=lastChild.previousSibling;continue}return null}lastChild=lastChild.lastChild}}browser.ie&&this.addListener("keyup",function(cmd,evt){var me=this,keyCode=evt.keyCode;if(keyCodes[keyCode]){var rng=me.selection.getRange();var start=rng.startContainer;if(keyCode==13){while(start&&!domUtils.isBody(start)&&!domUtils.isBlockElm(start)){start=start.parentNode}if(start&&!domUtils.isBody(start)&&start.nodeName=="P"){var pre=start.previousSibling;if(pre&&pre.nodeType==1){var pre=checkIsCludeLink(pre);if(pre&&!pre.getAttribute("_href")){domUtils.remove(pre,true)}}}}else{if(keyCode==32){if(start.nodeType==3&&/^\s$/.test(start.nodeValue)){start=start.previousSibling;if(start&&start.nodeName=="A"&&!start.getAttribute("_href")){domUtils.remove(start,true)}}}else{start=domUtils.findParentByTagName(start,"a",true);if(start&&!start.getAttribute("_href")){var bk=rng.createBookmark();domUtils.remove(start,true);rng.moveToBookmark(bk).select(true)}}}}})});UE.plugins.autoheight=function(){var me=this;me.autoHeightEnabled=me.options.autoHeightEnabled!==false;if(!me.autoHeightEnabled){return}var bakOverflow,lastHeight=0,options=me.options,currentHeight,timer;function adjustHeight(){var me=this;clearTimeout(timer);if(isFullscreen){return}if(!me.queryCommandState||me.queryCommandState&&me.queryCommandState("source")!=1){timer=setTimeout(function(){var node=me.body.lastChild;while(node&&node.nodeType!=1){node=node.previousSibling}if(node&&node.nodeType==1){node.style.clear="both";currentHeight=Math.max(domUtils.getXY(node).y+node.offsetHeight+25,Math.max(options.minFrameHeight,options.initialFrameHeight));if(currentHeight!=lastHeight){if(currentHeight!==parseInt(me.iframe.parentNode.style.height)){me.iframe.parentNode.style.height=currentHeight+"px"}me.body.style.height=currentHeight+"px";lastHeight=currentHeight}domUtils.removeStyle(node,"clear")}},50)}}var isFullscreen;me.addListener("fullscreenchanged",function(cmd,f){isFullscreen=f});me.addListener("destroy",function(){me.removeListener("contentchange afterinserthtml keyup mouseup",adjustHeight)});me.enableAutoHeight=function(){var me=this;if(!me.autoHeightEnabled){return}var doc=me.document;me.autoHeightEnabled=true;bakOverflow=doc.body.style.overflowY;doc.body.style.overflowY="hidden";me.addListener("contentchange afterinserthtml keyup mouseup",adjustHeight);setTimeout(function(){adjustHeight.call(me)},browser.gecko?100:0);me.fireEvent("autoheightchanged",me.autoHeightEnabled)};me.disableAutoHeight=function(){me.body.style.overflowY=bakOverflow||"";me.removeListener("contentchange",adjustHeight);me.removeListener("keyup",adjustHeight);me.removeListener("mouseup",adjustHeight);me.autoHeightEnabled=false;me.fireEvent("autoheightchanged",me.autoHeightEnabled)};me.on("setHeight",function(){me.disableAutoHeight()});me.addListener("ready",function(){me.enableAutoHeight();var timer;domUtils.on(browser.ie?me.body:me.document,browser.webkit?"dragover":"drop",function(){clearTimeout(timer);timer=setTimeout(function(){adjustHeight.call(me)},100)});var lastScrollY;window.onscroll=function(){if(lastScrollY===null){lastScrollY=this.scrollY}else{if(this.scrollY==0&&lastScrollY!=0){me.window.scrollTo(0,0);lastScrollY=null}}}})};UE.plugins.autofloat=function(){var me=this,lang=me.getLang();me.setOpt({topOffset:0});var optsAutoFloatEnabled=me.options.autoFloatEnabled!==false,topOffset=me.options.topOffset;if(!optsAutoFloatEnabled){return}var uiUtils=UE.ui.uiUtils,LteIE6=browser.ie&&browser.version<=6,quirks=browser.quirks;function checkHasUI(){if(!UE.ui){alert(lang.autofloatMsg);return 0}return 1}function fixIE6FixedPos(){var docStyle=document.body.style;docStyle.backgroundImage='url("about:blank")';docStyle.backgroundAttachment="fixed"}var bakCssText,placeHolder=document.createElement("div"),toolbarBox,orgTop,getPosition,flag=true;function setFloating(){var toobarBoxPos=domUtils.getXY(toolbarBox),origalFloat=domUtils.getComputedStyle(toolbarBox,"position"),origalLeft=domUtils.getComputedStyle(toolbarBox,"left");toolbarBox.style.width=toolbarBox.offsetWidth+"px";toolbarBox.style.zIndex=me.options.zIndex*1+1;toolbarBox.parentNode.insertBefore(placeHolder,toolbarBox);if(LteIE6||(quirks&&browser.ie)){if(toolbarBox.style.position!="absolute"){toolbarBox.style.position="absolute"}toolbarBox.style.top=(document.body.scrollTop||document.documentElement.scrollTop)-orgTop+topOffset+"px"}else{if(browser.ie7Compat&&flag){flag=false;toolbarBox.style.left=domUtils.getXY(toolbarBox).x-document.documentElement.getBoundingClientRect().left+2+"px"}if(toolbarBox.style.position!="fixed"){toolbarBox.style.position="fixed";toolbarBox.style.top=topOffset+"px";((origalFloat=="absolute"||origalFloat=="relative")&&parseFloat(origalLeft))&&(toolbarBox.style.left=toobarBoxPos.x+"px")}}}function unsetFloating(){flag=true;if(placeHolder.parentNode){placeHolder.parentNode.removeChild(placeHolder)}toolbarBox.style.cssText=bakCssText}function updateFloating(){var rect3=getPosition(me.container);var offset=me.options.toolbarTopOffset||0;if(rect3.top<0&&rect3.bottom-toolbarBox.offsetHeight>offset){setFloating()}else{unsetFloating()}}var defer_updateFloating=utils.defer(function(){updateFloating()},browser.ie?200:100,true);me.addListener("destroy",function(){domUtils.un(window,["scroll","resize"],updateFloating);me.removeListener("keydown",defer_updateFloating)});me.addListener("ready",function(){if(checkHasUI(me)){if(!me.ui){return}getPosition=uiUtils.getClientRect;toolbarBox=me.ui.getDom("toolbarbox");orgTop=getPosition(toolbarBox).top;bakCssText=toolbarBox.style.cssText;placeHolder.style.height=toolbarBox.offsetHeight+"px";if(LteIE6){fixIE6FixedPos()}domUtils.on(window,["scroll","resize"],updateFloating);me.addListener("keydown",defer_updateFloating);me.addListener("beforefullscreenchange",function(t,enabled){if(enabled){unsetFloating()}});me.addListener("fullscreenchanged",function(t,enabled){if(!enabled){updateFloating()}});me.addListener("sourcemodechanged",function(t,enabled){setTimeout(function(){updateFloating()},0)});me.addListener("clearDoc",function(){setTimeout(function(){updateFloating()},0)})}})};UE.plugins.video=function(){var me=this;function creatInsertStr(url,width,height,id,align,classname,type){url=utils.unhtmlForUrl(url);align=utils.unhtml(align);classname=utils.unhtml(classname);width=parseInt(width,10)||0;height=parseInt(height,10)||0;var str;switch(type){case"image":str="<img "+(id?'id="'+id+'"':"")+' width="'+width+'" height="'+height+'" _url="'+url+'" class="'+classname.replace(/\bvideo-js\b/,"")+'" src="'+me.options.UEDITOR_HOME_URL+'themes/default/images/spacer.gif" style="background:url('+me.options.UEDITOR_HOME_URL+"themes/default/images/videologo.gif) no-repeat center center; border:1px solid gray;"+(align?"float:"+align+";":"")+'" />';break;case"embed":str='<embed type="application/x-shockwave-flash" class="'+classname+'" pluginspage="http://www.macromedia.com/go/getflashplayer" src="'+utils.html(url)+'" width="'+width+'" height="'+height+'"'+(align?' style="float:'+align+'"':"")+' wmode="transparent" play="true" loop="false" menu="false" allowscriptaccess="never" allowfullscreen="true" >';break;case"video":var ext=url.substr(url.lastIndexOf(".")+1);if(ext=="ogv"){ext="ogg"}str="<video"+(id?' id="'+id+'"':"")+' class="'+classname+' video-js" '+(align?' style="float:'+align+'"':"")+' controls preload="none" width="'+width+'" height="'+height+'" src="'+url+'" data-setup="{}"><source src="'+url+'" type="video/'+ext+'" /></video>';break}return str}function switchImgAndVideo(root,img2video){utils.each(root.getNodesByTagName(img2video?"img":"embed video"),function(node){var className=node.getAttr("class");if(className&&className.indexOf("edui-faked-video")!=-1){var html=creatInsertStr(img2video?node.getAttr("_url"):node.getAttr("src"),node.getAttr("width"),node.getAttr("height"),null,node.getStyle("float")||"",className,img2video?"embed":"image");node.parentNode.replaceChild(UE.uNode.createElement(html),node)}if(className&&className.indexOf("edui-upload-video")!=-1){var html=creatInsertStr(img2video?node.getAttr("_url"):node.getAttr("src"),node.getAttr("width"),node.getAttr("height"),null,node.getStyle("float")||"",className,img2video?"video":"image");node.parentNode.replaceChild(UE.uNode.createElement(html),node)}})}me.addOutputRule(function(root){switchImgAndVideo(root,true)});me.addInputRule(function(root){switchImgAndVideo(root)});me.commands.insertvideo={execCommand:function(cmd,videoObjs,type){videoObjs=utils.isArray(videoObjs)?videoObjs:[videoObjs];var html=[],id="tmpVedio",cl;for(var i=0,vi,len=videoObjs.length;i<len;i++){vi=videoObjs[i];cl=(type=="upload"?"edui-upload-video video-js vjs-default-skin":"edui-faked-video");html.push(creatInsertStr(vi.url,vi.width||420,vi.height||280,id+i,null,cl,"image"))}me.execCommand("inserthtml",html.join(""),true);var rng=this.selection.getRange();for(var i=0,len=videoObjs.length;i<len;i++){var img=this.document.getElementById("tmpVedio"+i);domUtils.removeAttributes(img,"id");rng.selectNode(img).select();me.execCommand("imagefloat",videoObjs[i].align)}},queryCommandState:function(){var img=me.selection.getRange().getClosedNode(),flag=img&&(img.className=="edui-faked-video"||img.className.indexOf("edui-upload-video")!=-1);return flag?1:0}}};(function(){var UETable=UE.UETable=function(table){this.table=table;this.indexTable=[];this.selectedTds=[];this.cellsRange={};this.update(table)};UETable.removeSelectedClass=function(cells){utils.each(cells,function(cell){domUtils.removeClasses(cell,"selectTdClass")})};UETable.addSelectedClass=function(cells){utils.each(cells,function(cell){domUtils.addClass(cell,"selectTdClass")})};UETable.isEmptyBlock=function(node){var reg=new RegExp(domUtils.fillChar,"g");if(node[browser.ie?"innerText":"textContent"].replace(/^\s*$/,"").replace(reg,"").length>0){return 0}for(var i in dtd.$isNotEmpty){if(dtd.$isNotEmpty.hasOwnProperty(i)){if(node.getElementsByTagName(i).length){return 0}}}return 1};UETable.getWidth=function(cell){if(!cell){return 0}return parseInt(domUtils.getComputedStyle(cell,"width"),10)};UETable.getTableCellAlignState=function(cells){!utils.isArray(cells)&&(cells=[cells]);var result={},status=["align","valign"],tempStatus=null,isSame=true;utils.each(cells,function(cellNode){utils.each(status,function(currentState){tempStatus=cellNode.getAttribute(currentState);if(!result[currentState]&&tempStatus){result[currentState]=tempStatus}else{if(!result[currentState]||(tempStatus!==result[currentState])){isSame=false;return false}}});return isSame});return isSame?result:null};UETable.getTableItemsByRange=function(editor){var start=editor.selection.getStart();if(start&&start.id&&start.id.indexOf("_baidu_bookmark_start_")===0&&start.nextSibling){start=start.nextSibling}var cell=start&&domUtils.findParentByTagName(start,["td","th"],true),tr=cell&&cell.parentNode,caption=start&&domUtils.findParentByTagName(start,"caption",true),table=caption?caption.parentNode:tr&&tr.parentNode.parentNode;return{cell:cell,tr:tr,table:table,caption:caption}};UETable.getUETableBySelected=function(editor){var table=UETable.getTableItemsByRange(editor).table;if(table&&table.ueTable&&table.ueTable.selectedTds.length){return table.ueTable}return null};UETable.getDefaultValue=function(editor,table){var borderMap={thin:"0px",medium:"1px",thick:"2px"},tableBorder,tdPadding,tdBorder,tmpValue;if(!table){table=editor.document.createElement("table");table.insertRow(0).insertCell(0).innerHTML="xxx";editor.body.appendChild(table);var td=table.getElementsByTagName("td")[0];tmpValue=domUtils.getComputedStyle(table,"border-left-width");tableBorder=parseInt(borderMap[tmpValue]||tmpValue,10);tmpValue=domUtils.getComputedStyle(td,"padding-left");tdPadding=parseInt(borderMap[tmpValue]||tmpValue,10);tmpValue=domUtils.getComputedStyle(td,"border-left-width");tdBorder=parseInt(borderMap[tmpValue]||tmpValue,10);domUtils.remove(table);return{tableBorder:tableBorder,tdPadding:tdPadding,tdBorder:tdBorder}}else{td=table.getElementsByTagName("td")[0];tmpValue=domUtils.getComputedStyle(table,"border-left-width");tableBorder=parseInt(borderMap[tmpValue]||tmpValue,10);tmpValue=domUtils.getComputedStyle(td,"padding-left");tdPadding=parseInt(borderMap[tmpValue]||tmpValue,10);tmpValue=domUtils.getComputedStyle(td,"border-left-width");tdBorder=parseInt(borderMap[tmpValue]||tmpValue,10);return{tableBorder:tableBorder,tdPadding:tdPadding,tdBorder:tdBorder}}};UETable.getUETable=function(tdOrTable){var tag=tdOrTable.tagName.toLowerCase();tdOrTable=(tag=="td"||tag=="th"||tag=="caption")?domUtils.findParentByTagName(tdOrTable,"table",true):tdOrTable;if(!tdOrTable.ueTable){tdOrTable.ueTable=new UETable(tdOrTable)}return tdOrTable.ueTable};UETable.cloneCell=function(cell,ignoreMerge,keepPro){if(!cell||utils.isString(cell)){return this.table.ownerDocument.createElement(cell||"td")}var flag=domUtils.hasClass(cell,"selectTdClass");flag&&domUtils.removeClasses(cell,"selectTdClass");var tmpCell=cell.cloneNode(true);if(ignoreMerge){tmpCell.rowSpan=tmpCell.colSpan=1}!keepPro&&domUtils.removeAttributes(tmpCell,"width height");!keepPro&&domUtils.removeAttributes(tmpCell,"style");tmpCell.style.borderLeftStyle="";tmpCell.style.borderTopStyle="";tmpCell.style.borderLeftColor=cell.style.borderRightColor;tmpCell.style.borderLeftWidth=cell.style.borderRightWidth;tmpCell.style.borderTopColor=cell.style.borderBottomColor;tmpCell.style.borderTopWidth=cell.style.borderBottomWidth;flag&&domUtils.addClass(cell,"selectTdClass");return tmpCell};UETable.prototype={getMaxRows:function(){var rows=this.table.rows,maxLen=1;for(var i=0,row;row=rows[i];i++){var currentMax=1;for(var j=0,cj;cj=row.cells[j++];){currentMax=Math.max(cj.rowSpan||1,currentMax)}maxLen=Math.max(currentMax+i,maxLen)}return maxLen},getMaxCols:function(){var rows=this.table.rows,maxLen=0,cellRows={};for(var i=0,row;row=rows[i];i++){var cellsNum=0;for(var j=0,cj;cj=row.cells[j++];){cellsNum+=(cj.colSpan||1);if(cj.rowSpan&&cj.rowSpan>1){for(var k=1;k<cj.rowSpan;k++){if(!cellRows["row_"+(i+k)]){cellRows["row_"+(i+k)]=(cj.colSpan||1)}else{cellRows["row_"+(i+k)]++}}}}cellsNum+=cellRows["row_"+i]||0;maxLen=Math.max(cellsNum,maxLen)}return maxLen},getCellColIndex:function(cell){},getHSideCell:function(cell,right){try{var cellInfo=this.getCellInfo(cell),previewRowIndex,previewColIndex;var len=this.selectedTds.length,range=this.cellsRange;if((!right&&(!len?!cellInfo.colIndex:!range.beginColIndex))||(right&&(!len?(cellInfo.colIndex==(this.colsNum-1)):(range.endColIndex==this.colsNum-1)))){return null}previewRowIndex=!len?cellInfo.rowIndex:range.beginRowIndex;previewColIndex=!right?(!len?(cellInfo.colIndex<1?0:(cellInfo.colIndex-1)):range.beginColIndex-1):(!len?cellInfo.colIndex+1:range.endColIndex+1);return this.getCell(this.indexTable[previewRowIndex][previewColIndex].rowIndex,this.indexTable[previewRowIndex][previewColIndex].cellIndex)}catch(e){showError(e)}},getTabNextCell:function(cell,preRowIndex){var cellInfo=this.getCellInfo(cell),rowIndex=preRowIndex||cellInfo.rowIndex,colIndex=cellInfo.colIndex+1+(cellInfo.colSpan-1),nextCell;try{nextCell=this.getCell(this.indexTable[rowIndex][colIndex].rowIndex,this.indexTable[rowIndex][colIndex].cellIndex)}catch(e){try{rowIndex=rowIndex*1+1;colIndex=0;nextCell=this.getCell(this.indexTable[rowIndex][colIndex].rowIndex,this.indexTable[rowIndex][colIndex].cellIndex)}catch(e){}}return nextCell},getVSideCell:function(cell,bottom,ignoreRange){try{var cellInfo=this.getCellInfo(cell),nextRowIndex,nextColIndex;var len=this.selectedTds.length&&!ignoreRange,range=this.cellsRange;if((!bottom&&(cellInfo.rowIndex==0))||(bottom&&(!len?(cellInfo.rowIndex+cellInfo.rowSpan>this.rowsNum-1):(range.endRowIndex==this.rowsNum-1)))){return null}nextRowIndex=!bottom?(!len?cellInfo.rowIndex-1:range.beginRowIndex-1):(!len?(cellInfo.rowIndex+cellInfo.rowSpan):range.endRowIndex+1);nextColIndex=!len?cellInfo.colIndex:range.beginColIndex;return this.getCell(this.indexTable[nextRowIndex][nextColIndex].rowIndex,this.indexTable[nextRowIndex][nextColIndex].cellIndex)}catch(e){showError(e)}},getSameEndPosCells:function(cell,xOrY){try{var flag=(xOrY.toLowerCase()==="x"),end=domUtils.getXY(cell)[flag?"x":"y"]+cell["offset"+(flag?"Width":"Height")],rows=this.table.rows,cells=null,returns=[];for(var i=0;i<this.rowsNum;i++){cells=rows[i].cells;for(var j=0,tmpCell;tmpCell=cells[j++];){var tmpEnd=domUtils.getXY(tmpCell)[flag?"x":"y"]+tmpCell["offset"+(flag?"Width":"Height")];if(tmpEnd>end&&flag){break}if(cell==tmpCell||end==tmpEnd){if(tmpCell[flag?"colSpan":"rowSpan"]==1){returns.push(tmpCell)}if(flag){break}}}}return returns}catch(e){showError(e)}},setCellContent:function(cell,content){cell.innerHTML=content||(browser.ie?domUtils.fillChar:"<br />")},cloneCell:UETable.cloneCell,getSameStartPosXCells:function(cell){try{var start=domUtils.getXY(cell).x+cell.offsetWidth,rows=this.table.rows,cells,returns=[];for(var i=0;i<this.rowsNum;i++){cells=rows[i].cells;for(var j=0,tmpCell;tmpCell=cells[j++];){var tmpStart=domUtils.getXY(tmpCell).x;if(tmpStart>start){break}if(tmpStart==start&&tmpCell.colSpan==1){returns.push(tmpCell);break}}}return returns}catch(e){showError(e)}},update:function(table){this.table=table||this.table;this.selectedTds=[];this.cellsRange={};this.indexTable=[];var rows=this.table.rows,rowsNum=this.getMaxRows(),dNum=rowsNum-rows.length,colsNum=this.getMaxCols();while(dNum--){this.table.insertRow(rows.length)}this.rowsNum=rowsNum;this.colsNum=colsNum;for(var i=0,len=rows.length;i<len;i++){this.indexTable[i]=new Array(colsNum)}for(var rowIndex=0,row;row=rows[rowIndex];rowIndex++){for(var cellIndex=0,cell,cells=row.cells;cell=cells[cellIndex];cellIndex++){if(cell.rowSpan>rowsNum){cell.rowSpan=rowsNum}var colIndex=cellIndex,rowSpan=cell.rowSpan||1,colSpan=cell.colSpan||1;while(this.indexTable[rowIndex][colIndex]){colIndex++}for(var j=0;j<rowSpan;j++){for(var k=0;k<colSpan;k++){this.indexTable[rowIndex+j][colIndex+k]={rowIndex:rowIndex,cellIndex:cellIndex,colIndex:colIndex,rowSpan:rowSpan,colSpan:colSpan}}}}}for(j=0;j<rowsNum;j++){for(k=0;k<colsNum;k++){if(this.indexTable[j][k]===undefined){row=rows[j];cell=row.cells[row.cells.length-1];cell=cell?cell.cloneNode(true):this.table.ownerDocument.createElement("td");this.setCellContent(cell);if(cell.colSpan!==1){cell.colSpan=1}if(cell.rowSpan!==1){cell.rowSpan=1}row.appendChild(cell);this.indexTable[j][k]={rowIndex:j,cellIndex:cell.cellIndex,colIndex:k,rowSpan:1,colSpan:1}}}}var tds=domUtils.getElementsByTagName(this.table,"td"),selectTds=[];utils.each(tds,function(td){if(domUtils.hasClass(td,"selectTdClass")){selectTds.push(td)}});if(selectTds.length){var start=selectTds[0],end=selectTds[selectTds.length-1],startInfo=this.getCellInfo(start),endInfo=this.getCellInfo(end);this.selectedTds=selectTds;this.cellsRange={beginRowIndex:startInfo.rowIndex,beginColIndex:startInfo.colIndex,endRowIndex:endInfo.rowIndex+endInfo.rowSpan-1,endColIndex:endInfo.colIndex+endInfo.colSpan-1}}if(!domUtils.hasClass(this.table.rows[0],"firstRow")){domUtils.addClass(this.table.rows[0],"firstRow");for(var i=1;i<this.table.rows.length;i++){domUtils.removeClasses(this.table.rows[i],"firstRow")}}},getCellInfo:function(cell){if(!cell){return}var cellIndex=cell.cellIndex,rowIndex=cell.parentNode.rowIndex,rowInfo=this.indexTable[rowIndex],numCols=this.colsNum;for(var colIndex=cellIndex;colIndex<numCols;colIndex++){var cellInfo=rowInfo[colIndex];if(cellInfo.rowIndex===rowIndex&&cellInfo.cellIndex===cellIndex){return cellInfo}}},getCell:function(rowIndex,cellIndex){return rowIndex<this.rowsNum&&this.table.rows[rowIndex].cells[cellIndex]||null},deleteCell:function(cell,rowIndex){rowIndex=typeof rowIndex=="number"?rowIndex:cell.parentNode.rowIndex;var row=this.table.rows[rowIndex];row.deleteCell(cell.cellIndex)},getCellsRange:function(cellA,cellB){function checkRange(beginRowIndex,beginColIndex,endRowIndex,endColIndex){var tmpBeginRowIndex=beginRowIndex,tmpBeginColIndex=beginColIndex,tmpEndRowIndex=endRowIndex,tmpEndColIndex=endColIndex,cellInfo,colIndex,rowIndex;if(beginRowIndex>0){for(colIndex=beginColIndex;colIndex<endColIndex;colIndex++){cellInfo=me.indexTable[beginRowIndex][colIndex];rowIndex=cellInfo.rowIndex;if(rowIndex<beginRowIndex){tmpBeginRowIndex=Math.min(rowIndex,tmpBeginRowIndex)}}}if(endColIndex<me.colsNum){for(rowIndex=beginRowIndex;rowIndex<endRowIndex;rowIndex++){cellInfo=me.indexTable[rowIndex][endColIndex];colIndex=cellInfo.colIndex+cellInfo.colSpan-1;if(colIndex>endColIndex){tmpEndColIndex=Math.max(colIndex,tmpEndColIndex)}}}if(endRowIndex<me.rowsNum){for(colIndex=beginColIndex;colIndex<endColIndex;colIndex++){cellInfo=me.indexTable[endRowIndex][colIndex];rowIndex=cellInfo.rowIndex+cellInfo.rowSpan-1;if(rowIndex>endRowIndex){tmpEndRowIndex=Math.max(rowIndex,tmpEndRowIndex)}}}if(beginColIndex>0){for(rowIndex=beginRowIndex;rowIndex<endRowIndex;rowIndex++){cellInfo=me.indexTable[rowIndex][beginColIndex];colIndex=cellInfo.colIndex;if(colIndex<beginColIndex){tmpBeginColIndex=Math.min(cellInfo.colIndex,tmpBeginColIndex)}}}if(tmpBeginRowIndex!=beginRowIndex||tmpBeginColIndex!=beginColIndex||tmpEndRowIndex!=endRowIndex||tmpEndColIndex!=endColIndex){return checkRange(tmpBeginRowIndex,tmpBeginColIndex,tmpEndRowIndex,tmpEndColIndex)}else{return{beginRowIndex:beginRowIndex,beginColIndex:beginColIndex,endRowIndex:endRowIndex,endColIndex:endColIndex}}}try{var me=this,cellAInfo=me.getCellInfo(cellA);if(cellA===cellB){return{beginRowIndex:cellAInfo.rowIndex,beginColIndex:cellAInfo.colIndex,endRowIndex:cellAInfo.rowIndex+cellAInfo.rowSpan-1,endColIndex:cellAInfo.colIndex+cellAInfo.colSpan-1}}var cellBInfo=me.getCellInfo(cellB);var beginRowIndex=Math.min(cellAInfo.rowIndex,cellBInfo.rowIndex),beginColIndex=Math.min(cellAInfo.colIndex,cellBInfo.colIndex),endRowIndex=Math.max(cellAInfo.rowIndex+cellAInfo.rowSpan-1,cellBInfo.rowIndex+cellBInfo.rowSpan-1),endColIndex=Math.max(cellAInfo.colIndex+cellAInfo.colSpan-1,cellBInfo.colIndex+cellBInfo.colSpan-1);return checkRange(beginRowIndex,beginColIndex,endRowIndex,endColIndex)}catch(e){}},getCells:function(range){this.clearSelected();var beginRowIndex=range.beginRowIndex,beginColIndex=range.beginColIndex,endRowIndex=range.endRowIndex,endColIndex=range.endColIndex,cellInfo,rowIndex,colIndex,tdHash={},returnTds=[];for(var i=beginRowIndex;i<=endRowIndex;i++){for(var j=beginColIndex;j<=endColIndex;j++){cellInfo=this.indexTable[i][j];rowIndex=cellInfo.rowIndex;colIndex=cellInfo.colIndex;var key=rowIndex+"|"+colIndex;if(tdHash[key]){continue}tdHash[key]=1;if(rowIndex<i||colIndex<j||rowIndex+cellInfo.rowSpan-1>endRowIndex||colIndex+cellInfo.colSpan-1>endColIndex){return null}returnTds.push(this.getCell(rowIndex,cellInfo.cellIndex))}}return returnTds},clearSelected:function(){UETable.removeSelectedClass(this.selectedTds);this.selectedTds=[];this.cellsRange={}},setSelected:function(range){var cells=this.getCells(range);UETable.addSelectedClass(cells);this.selectedTds=cells;this.cellsRange=range},isFullRow:function(){var range=this.cellsRange;return(range.endColIndex-range.beginColIndex+1)==this.colsNum},isFullCol:function(){var range=this.cellsRange,table=this.table,ths=table.getElementsByTagName("th"),rows=range.endRowIndex-range.beginRowIndex+1;return !ths.length?rows==this.rowsNum:rows==this.rowsNum||(rows==this.rowsNum-1)},getNextCell:function(cell,bottom,ignoreRange){try{var cellInfo=this.getCellInfo(cell),nextRowIndex,nextColIndex;var len=this.selectedTds.length&&!ignoreRange,range=this.cellsRange;if((!bottom&&(cellInfo.rowIndex==0))||(bottom&&(!len?(cellInfo.rowIndex+cellInfo.rowSpan>this.rowsNum-1):(range.endRowIndex==this.rowsNum-1)))){return null}nextRowIndex=!bottom?(!len?cellInfo.rowIndex-1:range.beginRowIndex-1):(!len?(cellInfo.rowIndex+cellInfo.rowSpan):range.endRowIndex+1);nextColIndex=!len?cellInfo.colIndex:range.beginColIndex;return this.getCell(this.indexTable[nextRowIndex][nextColIndex].rowIndex,this.indexTable[nextRowIndex][nextColIndex].cellIndex)}catch(e){showError(e)}},getPreviewCell:function(cell,top){try{var cellInfo=this.getCellInfo(cell),previewRowIndex,previewColIndex;var len=this.selectedTds.length,range=this.cellsRange;if((!top&&(!len?!cellInfo.colIndex:!range.beginColIndex))||(top&&(!len?(cellInfo.rowIndex>(this.colsNum-1)):(range.endColIndex==this.colsNum-1)))){return null}previewRowIndex=!top?(!len?cellInfo.rowIndex:range.beginRowIndex):(!len?(cellInfo.rowIndex<1?0:(cellInfo.rowIndex-1)):range.beginRowIndex);previewColIndex=!top?(!len?(cellInfo.colIndex<1?0:(cellInfo.colIndex-1)):range.beginColIndex-1):(!len?cellInfo.colIndex:range.endColIndex+1);return this.getCell(this.indexTable[previewRowIndex][previewColIndex].rowIndex,this.indexTable[previewRowIndex][previewColIndex].cellIndex)}catch(e){showError(e)}},moveContent:function(cellTo,cellFrom){if(UETable.isEmptyBlock(cellFrom)){return}if(UETable.isEmptyBlock(cellTo)){cellTo.innerHTML=cellFrom.innerHTML;return}var child=cellTo.lastChild;if(child.nodeType==3||!dtd.$block[child.tagName]){cellTo.appendChild(cellTo.ownerDocument.createElement("br"))}while(child=cellFrom.firstChild){cellTo.appendChild(child)}},mergeRight:function(cell){var cellInfo=this.getCellInfo(cell),rightColIndex=cellInfo.colIndex+cellInfo.colSpan,rightCellInfo=this.indexTable[cellInfo.rowIndex][rightColIndex],rightCell=this.getCell(rightCellInfo.rowIndex,rightCellInfo.cellIndex);cell.colSpan=cellInfo.colSpan+rightCellInfo.colSpan;cell.removeAttribute("width");this.moveContent(cell,rightCell);this.deleteCell(rightCell,rightCellInfo.rowIndex);this.update()},mergeDown:function(cell){var cellInfo=this.getCellInfo(cell),downRowIndex=cellInfo.rowIndex+cellInfo.rowSpan,downCellInfo=this.indexTable[downRowIndex][cellInfo.colIndex],downCell=this.getCell(downCellInfo.rowIndex,downCellInfo.cellIndex);cell.rowSpan=cellInfo.rowSpan+downCellInfo.rowSpan;cell.removeAttribute("height");this.moveContent(cell,downCell);this.deleteCell(downCell,downCellInfo.rowIndex);this.update()},mergeRange:function(){var range=this.cellsRange,leftTopCell=this.getCell(range.beginRowIndex,this.indexTable[range.beginRowIndex][range.beginColIndex].cellIndex);if(leftTopCell.tagName=="TH"&&range.endRowIndex!==range.beginRowIndex){var index=this.indexTable,info=this.getCellInfo(leftTopCell);leftTopCell=this.getCell(1,index[1][info.colIndex].cellIndex);range=this.getCellsRange(leftTopCell,this.getCell(index[this.rowsNum-1][info.colIndex].rowIndex,index[this.rowsNum-1][info.colIndex].cellIndex))}var cells=this.getCells(range);for(var i=0,ci;ci=cells[i++];){if(ci!==leftTopCell){this.moveContent(leftTopCell,ci);this.deleteCell(ci)}}leftTopCell.rowSpan=range.endRowIndex-range.beginRowIndex+1;leftTopCell.rowSpan>1&&leftTopCell.removeAttribute("height");leftTopCell.colSpan=range.endColIndex-range.beginColIndex+1;leftTopCell.colSpan>1&&leftTopCell.removeAttribute("width");if(leftTopCell.rowSpan==this.rowsNum&&leftTopCell.colSpan!=1){leftTopCell.colSpan=1}if(leftTopCell.colSpan==this.colsNum&&leftTopCell.rowSpan!=1){var rowIndex=leftTopCell.parentNode.rowIndex;if(this.table.deleteRow){for(var i=rowIndex+1,curIndex=rowIndex+1,len=leftTopCell.rowSpan;i<len;i++){this.table.deleteRow(curIndex)}}else{for(var i=0,len=leftTopCell.rowSpan-1;i<len;i++){var row=this.table.rows[rowIndex+1];row.parentNode.removeChild(row)}}leftTopCell.rowSpan=1}this.update()},insertRow:function(rowIndex,sourceCell){var numCols=this.colsNum,table=this.table,row=table.insertRow(rowIndex),cell,isInsertTitle=typeof sourceCell=="string"&&sourceCell.toUpperCase()=="TH";function replaceTdToTh(colIndex,cell,tableRow){if(colIndex==0){var tr=tableRow.nextSibling||tableRow.previousSibling,th=tr.cells[colIndex];if(th.tagName=="TH"){th=cell.ownerDocument.createElement("th");th.appendChild(cell.firstChild);tableRow.insertBefore(th,cell);domUtils.remove(cell)}}else{if(cell.tagName=="TH"){var td=cell.ownerDocument.createElement("td");td.appendChild(cell.firstChild);tableRow.insertBefore(td,cell);domUtils.remove(cell)}}}if(rowIndex==0||rowIndex==this.rowsNum){for(var colIndex=0;colIndex<numCols;colIndex++){cell=this.cloneCell(sourceCell,true);this.setCellContent(cell);cell.getAttribute("vAlign")&&cell.setAttribute("vAlign",cell.getAttribute("vAlign"));row.appendChild(cell);if(!isInsertTitle){replaceTdToTh(colIndex,cell,row)}}}else{var infoRow=this.indexTable[rowIndex],cellIndex=0;for(colIndex=0;colIndex<numCols;colIndex++){var cellInfo=infoRow[colIndex];if(cellInfo.rowIndex<rowIndex){cell=this.getCell(cellInfo.rowIndex,cellInfo.cellIndex);cell.rowSpan=cellInfo.rowSpan+1}else{cell=this.cloneCell(sourceCell,true);this.setCellContent(cell);row.appendChild(cell)}if(!isInsertTitle){replaceTdToTh(colIndex,cell,row)}}}this.update();return row},deleteRow:function(rowIndex){var row=this.table.rows[rowIndex],infoRow=this.indexTable[rowIndex],colsNum=this.colsNum,count=0;for(var colIndex=0;colIndex<colsNum;){var cellInfo=infoRow[colIndex],cell=this.getCell(cellInfo.rowIndex,cellInfo.cellIndex);if(cell.rowSpan>1){if(cellInfo.rowIndex==rowIndex){var clone=cell.cloneNode(true);clone.rowSpan=cell.rowSpan-1;clone.innerHTML="";cell.rowSpan=1;var nextRowIndex=rowIndex+1,nextRow=this.table.rows[nextRowIndex],insertCellIndex,preMerged=this.getPreviewMergedCellsNum(nextRowIndex,colIndex)-count;if(preMerged<colIndex){insertCellIndex=colIndex-preMerged-1;domUtils.insertAfter(nextRow.cells[insertCellIndex],clone)}else{if(nextRow.cells.length){nextRow.insertBefore(clone,nextRow.cells[0])}}count+=1}}colIndex+=cell.colSpan||1}var deleteTds=[],cacheMap={};for(colIndex=0;colIndex<colsNum;colIndex++){var tmpRowIndex=infoRow[colIndex].rowIndex,tmpCellIndex=infoRow[colIndex].cellIndex,key=tmpRowIndex+"_"+tmpCellIndex;if(cacheMap[key]){continue}cacheMap[key]=1;cell=this.getCell(tmpRowIndex,tmpCellIndex);deleteTds.push(cell)}var mergeTds=[];utils.each(deleteTds,function(td){if(td.rowSpan==1){td.parentNode.removeChild(td)}else{mergeTds.push(td)}});utils.each(mergeTds,function(td){td.rowSpan--});row.parentNode.removeChild(row);this.update()},insertCol:function(colIndex,sourceCell,defaultValue){var rowsNum=this.rowsNum,rowIndex=0,tableRow,cell,backWidth=parseInt((this.table.offsetWidth-(this.colsNum+1)*20-(this.colsNum+1))/(this.colsNum+1),10),isInsertTitleCol=typeof sourceCell=="string"&&sourceCell.toUpperCase()=="TH";function replaceTdToTh(rowIndex,cell,tableRow){if(rowIndex==0){var th=cell.nextSibling||cell.previousSibling;if(th.tagName=="TH"){th=cell.ownerDocument.createElement("th");th.appendChild(cell.firstChild);tableRow.insertBefore(th,cell);domUtils.remove(cell)}}else{if(cell.tagName=="TH"){var td=cell.ownerDocument.createElement("td");td.appendChild(cell.firstChild);tableRow.insertBefore(td,cell);domUtils.remove(cell)}}}var preCell;if(colIndex==0||colIndex==this.colsNum){for(;rowIndex<rowsNum;rowIndex++){tableRow=this.table.rows[rowIndex];preCell=tableRow.cells[colIndex==0?colIndex:tableRow.cells.length];cell=this.cloneCell(sourceCell,true);this.setCellContent(cell);cell.setAttribute("vAlign",cell.getAttribute("vAlign"));preCell&&cell.setAttribute("width",preCell.getAttribute("width"));if(!colIndex){tableRow.insertBefore(cell,tableRow.cells[0])}else{domUtils.insertAfter(tableRow.cells[tableRow.cells.length-1],cell)}if(!isInsertTitleCol){replaceTdToTh(rowIndex,cell,tableRow)}}}else{for(;rowIndex<rowsNum;rowIndex++){var cellInfo=this.indexTable[rowIndex][colIndex];if(cellInfo.colIndex<colIndex){cell=this.getCell(cellInfo.rowIndex,cellInfo.cellIndex);cell.colSpan=cellInfo.colSpan+1}else{tableRow=this.table.rows[rowIndex];preCell=tableRow.cells[cellInfo.cellIndex];cell=this.cloneCell(sourceCell,true);this.setCellContent(cell);cell.setAttribute("vAlign",cell.getAttribute("vAlign"));preCell&&cell.setAttribute("width",preCell.getAttribute("width"));preCell?tableRow.insertBefore(cell,preCell):tableRow.appendChild(cell)}if(!isInsertTitleCol){replaceTdToTh(rowIndex,cell,tableRow)}}}this.update();this.updateWidth(backWidth,defaultValue||{tdPadding:10,tdBorder:1})},updateWidth:function(width,defaultValue){var table=this.table,tmpWidth=UETable.getWidth(table)-defaultValue.tdPadding*2-defaultValue.tdBorder+width;if(tmpWidth<table.ownerDocument.body.offsetWidth){table.setAttribute("width",tmpWidth);return}var tds=domUtils.getElementsByTagName(this.table,"td th");utils.each(tds,function(td){td.setAttribute("width",width)})},deleteCol:function(colIndex){var indexTable=this.indexTable,tableRows=this.table.rows,backTableWidth=this.table.getAttribute("width"),backTdWidth=0,rowsNum=this.rowsNum,cacheMap={};for(var rowIndex=0;rowIndex<rowsNum;){var infoRow=indexTable[rowIndex],cellInfo=infoRow[colIndex],key=cellInfo.rowIndex+"_"+cellInfo.colIndex;if(cacheMap[key]){continue}cacheMap[key]=1;var cell=this.getCell(cellInfo.rowIndex,cellInfo.cellIndex);if(!backTdWidth){backTdWidth=cell&&parseInt(cell.offsetWidth/cell.colSpan,10).toFixed(0)}if(cell.colSpan>1){cell.colSpan--}else{tableRows[rowIndex].deleteCell(cellInfo.cellIndex)}rowIndex+=cellInfo.rowSpan||1}this.table.setAttribute("width",backTableWidth-backTdWidth);this.update()},splitToCells:function(cell){var me=this,cells=this.splitToRows(cell);utils.each(cells,function(cell){me.splitToCols(cell)})},splitToRows:function(cell){var cellInfo=this.getCellInfo(cell),rowIndex=cellInfo.rowIndex,colIndex=cellInfo.colIndex,results=[];cell.rowSpan=1;results.push(cell);for(var i=rowIndex,endRow=rowIndex+cellInfo.rowSpan;i<endRow;i++){if(i==rowIndex){continue}var tableRow=this.table.rows[i],tmpCell=tableRow.insertCell(colIndex-this.getPreviewMergedCellsNum(i,colIndex));tmpCell.colSpan=cellInfo.colSpan;this.setCellContent(tmpCell);tmpCell.setAttribute("vAlign",cell.getAttribute("vAlign"));tmpCell.setAttribute("align",cell.getAttribute("align"));if(cell.style.cssText){tmpCell.style.cssText=cell.style.cssText}results.push(tmpCell)}this.update();return results},getPreviewMergedCellsNum:function(rowIndex,colIndex){var indexRow=this.indexTable[rowIndex],num=0;for(var i=0;i<colIndex;){var colSpan=indexRow[i].colSpan,tmpRowIndex=indexRow[i].rowIndex;num+=(colSpan-(tmpRowIndex==rowIndex?1:0));i+=colSpan}return num},splitToCols:function(cell){var backWidth=(cell.offsetWidth/cell.colSpan-22).toFixed(0),cellInfo=this.getCellInfo(cell),rowIndex=cellInfo.rowIndex,colIndex=cellInfo.colIndex,results=[];cell.colSpan=1;cell.setAttribute("width",backWidth);results.push(cell);for(var j=colIndex,endCol=colIndex+cellInfo.colSpan;j<endCol;j++){if(j==colIndex){continue}var tableRow=this.table.rows[rowIndex],tmpCell=tableRow.insertCell(this.indexTable[rowIndex][j].cellIndex+1);tmpCell.rowSpan=cellInfo.rowSpan;this.setCellContent(tmpCell);tmpCell.setAttribute("vAlign",cell.getAttribute("vAlign"));tmpCell.setAttribute("align",cell.getAttribute("align"));tmpCell.setAttribute("width",backWidth);if(cell.style.cssText){tmpCell.style.cssText=cell.style.cssText}if(cell.tagName=="TH"){var th=cell.ownerDocument.createElement("th");th.appendChild(tmpCell.firstChild);th.setAttribute("vAlign",cell.getAttribute("vAlign"));th.rowSpan=tmpCell.rowSpan;tableRow.insertBefore(th,tmpCell);domUtils.remove(tmpCell)}results.push(tmpCell)}this.update();return results},isLastCell:function(cell,rowsNum,colsNum){rowsNum=rowsNum||this.rowsNum;colsNum=colsNum||this.colsNum;var cellInfo=this.getCellInfo(cell);return((cellInfo.rowIndex+cellInfo.rowSpan)==rowsNum)&&((cellInfo.colIndex+cellInfo.colSpan)==colsNum)},getLastCell:function(cells){cells=cells||this.table.getElementsByTagName("td");var firstInfo=this.getCellInfo(cells[0]);var me=this,last=cells[0],tr=last.parentNode,cellsNum=0,cols=0,rows;utils.each(cells,function(cell){if(cell.parentNode==tr){cols+=cell.colSpan||1}cellsNum+=cell.rowSpan*cell.colSpan||1});rows=cellsNum/cols;utils.each(cells,function(cell){if(me.isLastCell(cell,rows,cols)){last=cell;return false}});return last},selectRow:function(rowIndex){var indexRow=this.indexTable[rowIndex],start=this.getCell(indexRow[0].rowIndex,indexRow[0].cellIndex),end=this.getCell(indexRow[this.colsNum-1].rowIndex,indexRow[this.colsNum-1].cellIndex),range=this.getCellsRange(start,end);this.setSelected(range)},selectTable:function(){var tds=this.table.getElementsByTagName("td"),range=this.getCellsRange(tds[0],tds[tds.length-1]);this.setSelected(range)},setBackground:function(cells,value){if(typeof value==="string"){utils.each(cells,function(cell){cell.style.backgroundColor=value})}else{if(typeof value==="object"){value=utils.extend({repeat:true,colorList:["#ddd","#fff"]},value);var rowIndex=this.getCellInfo(cells[0]).rowIndex,count=0,colors=value.colorList,getColor=function(list,index,repeat){return list[index]?list[index]:repeat?list[index%list.length]:""};for(var i=0,cell;cell=cells[i++];){var cellInfo=this.getCellInfo(cell);cell.style.backgroundColor=getColor(colors,((rowIndex+count)==cellInfo.rowIndex)?count:++count,value.repeat)}}}},removeBackground:function(cells){utils.each(cells,function(cell){cell.style.backgroundColor=""})}};function showError(e){}})();(function(){var UT=UE.UETable,getTableItemsByRange=function(editor){return UT.getTableItemsByRange(editor)},getUETableBySelected=function(editor){return UT.getUETableBySelected(editor)},getDefaultValue=function(editor,table){return UT.getDefaultValue(editor,table)},getUETable=function(tdOrTable){return UT.getUETable(tdOrTable)};UE.commands.inserttable={queryCommandState:function(){return getTableItemsByRange(this).table?-1:0},execCommand:function(cmd,opt){function createTable(opt,tdWidth){var html=[],rowsNum=opt.numRows,colsNum=opt.numCols;for(var r=0;r<rowsNum;r++){html.push("<tr"+(r==0?' class="firstRow"':"")+">");for(var c=0;c<colsNum;c++){html.push('<td width="'+tdWidth+'"  vAlign="'+opt.tdvalign+'" >'+(browser.ie&&browser.version<11?domUtils.fillChar:"<br/>")+"</td>")}html.push("</tr>")}return"<table><tbody>"+html.join("")+"</tbody></table>"}if(!opt){opt=utils.extend({},{numCols:this.options.defaultCols,numRows:this.options.defaultRows,tdvalign:this.options.tdvalign})}var me=this;var range=this.selection.getRange(),start=range.startContainer,firstParentBlock=domUtils.findParent(start,function(node){return domUtils.isBlockElm(node)},true)||me.body;var defaultValue=getDefaultValue(me),tableWidth=firstParentBlock.offsetWidth,tdWidth=Math.floor(tableWidth/opt.numCols-defaultValue.tdPadding*2-defaultValue.tdBorder);!opt.tdvalign&&(opt.tdvalign=me.options.tdvalign);me.execCommand("inserthtml",createTable(opt,tdWidth))}};UE.commands.insertparagraphbeforetable={queryCommandState:function(){return getTableItemsByRange(this).cell?0:-1},execCommand:function(){var table=getTableItemsByRange(this).table;if(table){var p=this.document.createElement("p");p.innerHTML=browser.ie?"&nbsp;":"<br />";table.parentNode.insertBefore(p,table);this.selection.getRange().setStart(p,0).setCursor()}}};UE.commands.deletetable={queryCommandState:function(){var rng=this.selection.getRange();return domUtils.findParentByTagName(rng.startContainer,"table",true)?0:-1},execCommand:function(cmd,table){var rng=this.selection.getRange();table=table||domUtils.findParentByTagName(rng.startContainer,"table",true);if(table){var next=table.nextSibling;if(!next){next=domUtils.createElement(this.document,"p",{innerHTML:browser.ie?domUtils.fillChar:"<br/>"});table.parentNode.insertBefore(next,table)}domUtils.remove(table);rng=this.selection.getRange();if(next.nodeType==3){rng.setStartBefore(next)}else{rng.setStart(next,0)}rng.setCursor(false,true);this.fireEvent("tablehasdeleted")}}};UE.commands.cellalign={queryCommandState:function(){return getSelectedArr(this).length?0:-1},execCommand:function(cmd,align){var selectedTds=getSelectedArr(this);if(selectedTds.length){for(var i=0,ci;ci=selectedTds[i++];){ci.setAttribute("align",align)}}}};UE.commands.cellvalign={queryCommandState:function(){return getSelectedArr(this).length?0:-1},execCommand:function(cmd,valign){var selectedTds=getSelectedArr(this);if(selectedTds.length){for(var i=0,ci;ci=selectedTds[i++];){ci.setAttribute("vAlign",valign)}}}};UE.commands.insertcaption={queryCommandState:function(){var table=getTableItemsByRange(this).table;if(table){return table.getElementsByTagName("caption").length==0?1:-1}return -1},execCommand:function(){var table=getTableItemsByRange(this).table;if(table){var caption=this.document.createElement("caption");caption.innerHTML=browser.ie?domUtils.fillChar:"<br/>";table.insertBefore(caption,table.firstChild);var range=this.selection.getRange();range.setStart(caption,0).setCursor()}}};UE.commands.deletecaption={queryCommandState:function(){var rng=this.selection.getRange(),table=domUtils.findParentByTagName(rng.startContainer,"table");if(table){return table.getElementsByTagName("caption").length==0?-1:1}return -1},execCommand:function(){var rng=this.selection.getRange(),table=domUtils.findParentByTagName(rng.startContainer,"table");if(table){domUtils.remove(table.getElementsByTagName("caption")[0]);var range=this.selection.getRange();range.setStart(table.rows[0].cells[0],0).setCursor()}}};UE.commands.inserttitle={queryCommandState:function(){var table=getTableItemsByRange(this).table;if(table){var firstRow=table.rows[0];return firstRow.cells[firstRow.cells.length-1].tagName.toLowerCase()!="th"?0:-1}return -1},execCommand:function(){var table=getTableItemsByRange(this).table;if(table){getUETable(table).insertRow(0,"th")}var th=table.getElementsByTagName("th")[0];this.selection.getRange().setStart(th,0).setCursor(false,true)}};UE.commands.deletetitle={queryCommandState:function(){var table=getTableItemsByRange(this).table;if(table){var firstRow=table.rows[0];return firstRow.cells[firstRow.cells.length-1].tagName.toLowerCase()=="th"?0:-1}return -1},execCommand:function(){var table=getTableItemsByRange(this).table;if(table){domUtils.remove(table.rows[0])}var td=table.getElementsByTagName("td")[0];this.selection.getRange().setStart(td,0).setCursor(false,true)}};UE.commands.inserttitlecol={queryCommandState:function(){var table=getTableItemsByRange(this).table;if(table){var lastRow=table.rows[table.rows.length-1];return lastRow.getElementsByTagName("th").length?-1:0}return -1},execCommand:function(cmd){var table=getTableItemsByRange(this).table;if(table){getUETable(table).insertCol(0,"th")}resetTdWidth(table,this);var th=table.getElementsByTagName("th")[0];this.selection.getRange().setStart(th,0).setCursor(false,true)}};UE.commands.deletetitlecol={queryCommandState:function(){var table=getTableItemsByRange(this).table;if(table){var lastRow=table.rows[table.rows.length-1];return lastRow.getElementsByTagName("th").length?0:-1}return -1},execCommand:function(){var table=getTableItemsByRange(this).table;if(table){for(var i=0;i<table.rows.length;i++){domUtils.remove(table.rows[i].children[0])}}resetTdWidth(table,this);var td=table.getElementsByTagName("td")[0];this.selection.getRange().setStart(td,0).setCursor(false,true)}};UE.commands.mergeright={queryCommandState:function(cmd){var tableItems=getTableItemsByRange(this),table=tableItems.table,cell=tableItems.cell;if(!table||!cell){return -1}var ut=getUETable(table);if(ut.selectedTds.length){return -1}var cellInfo=ut.getCellInfo(cell),rightColIndex=cellInfo.colIndex+cellInfo.colSpan;if(rightColIndex>=ut.colsNum){return -1}var rightCellInfo=ut.indexTable[cellInfo.rowIndex][rightColIndex],rightCell=table.rows[rightCellInfo.rowIndex].cells[rightCellInfo.cellIndex];if(!rightCell||cell.tagName!=rightCell.tagName){return -1}return(rightCellInfo.rowIndex==cellInfo.rowIndex&&rightCellInfo.rowSpan==cellInfo.rowSpan)?0:-1},execCommand:function(cmd){var rng=this.selection.getRange(),bk=rng.createBookmark(true);var cell=getTableItemsByRange(this).cell,ut=getUETable(cell);ut.mergeRight(cell);rng.moveToBookmark(bk).select()}};UE.commands.mergedown={queryCommandState:function(cmd){var tableItems=getTableItemsByRange(this),table=tableItems.table,cell=tableItems.cell;if(!table||!cell){return -1}var ut=getUETable(table);if(ut.selectedTds.length){return -1}var cellInfo=ut.getCellInfo(cell),downRowIndex=cellInfo.rowIndex+cellInfo.rowSpan;if(downRowIndex>=ut.rowsNum){return -1}var downCellInfo=ut.indexTable[downRowIndex][cellInfo.colIndex],downCell=table.rows[downCellInfo.rowIndex].cells[downCellInfo.cellIndex];if(!downCell||cell.tagName!=downCell.tagName){return -1}return(downCellInfo.colIndex==cellInfo.colIndex&&downCellInfo.colSpan==cellInfo.colSpan)?0:-1},execCommand:function(){var rng=this.selection.getRange(),bk=rng.createBookmark(true);var cell=getTableItemsByRange(this).cell,ut=getUETable(cell);ut.mergeDown(cell);rng.moveToBookmark(bk).select()}};UE.commands.mergecells={queryCommandState:function(){return getUETableBySelected(this)?0:-1},execCommand:function(){var ut=getUETableBySelected(this);if(ut&&ut.selectedTds.length){var cell=ut.selectedTds[0];ut.mergeRange();var rng=this.selection.getRange();if(domUtils.isEmptyBlock(cell)){rng.setStart(cell,0).collapse(true)}else{rng.selectNodeContents(cell)}rng.select()}}};UE.commands.insertrow={queryCommandState:function(){var tableItems=getTableItemsByRange(this),cell=tableItems.cell;return cell&&(cell.tagName=="TD"||(cell.tagName=="TH"&&tableItems.tr!==tableItems.table.rows[0]))&&getUETable(tableItems.table).rowsNum<this.options.maxRowNum?0:-1},execCommand:function(){var rng=this.selection.getRange(),bk=rng.createBookmark(true);var tableItems=getTableItemsByRange(this),cell=tableItems.cell,table=tableItems.table,ut=getUETable(table),cellInfo=ut.getCellInfo(cell);if(!ut.selectedTds.length){ut.insertRow(cellInfo.rowIndex,cell)}else{var range=ut.cellsRange;for(var i=0,len=range.endRowIndex-range.beginRowIndex+1;i<len;i++){ut.insertRow(range.beginRowIndex,cell)}}rng.moveToBookmark(bk).select();if(table.getAttribute("interlaced")==="enabled"){this.fireEvent("interlacetable",table)}}};UE.commands.insertrownext={queryCommandState:function(){var tableItems=getTableItemsByRange(this),cell=tableItems.cell;return cell&&(cell.tagName=="TD")&&getUETable(tableItems.table).rowsNum<this.options.maxRowNum?0:-1},execCommand:function(){var rng=this.selection.getRange(),bk=rng.createBookmark(true);var tableItems=getTableItemsByRange(this),cell=tableItems.cell,table=tableItems.table,ut=getUETable(table),cellInfo=ut.getCellInfo(cell);if(!ut.selectedTds.length){ut.insertRow(cellInfo.rowIndex+cellInfo.rowSpan,cell)}else{var range=ut.cellsRange;for(var i=0,len=range.endRowIndex-range.beginRowIndex+1;i<len;i++){ut.insertRow(range.endRowIndex+1,cell)}}rng.moveToBookmark(bk).select();if(table.getAttribute("interlaced")==="enabled"){this.fireEvent("interlacetable",table)}}};UE.commands.deleterow={queryCommandState:function(){var tableItems=getTableItemsByRange(this);return tableItems.cell?0:-1},execCommand:function(){var cell=getTableItemsByRange(this).cell,ut=getUETable(cell),cellsRange=ut.cellsRange,cellInfo=ut.getCellInfo(cell),preCell=ut.getVSideCell(cell),nextCell=ut.getVSideCell(cell,true),rng=this.selection.getRange();if(utils.isEmptyObject(cellsRange)){ut.deleteRow(cellInfo.rowIndex)}else{for(var i=cellsRange.beginRowIndex;i<cellsRange.endRowIndex+1;i++){ut.deleteRow(cellsRange.beginRowIndex)}}var table=ut.table;if(!table.getElementsByTagName("td").length){var nextSibling=table.nextSibling;domUtils.remove(table);if(nextSibling){rng.setStart(nextSibling,0).setCursor(false,true)}}else{if(cellInfo.rowSpan==1||cellInfo.rowSpan==cellsRange.endRowIndex-cellsRange.beginRowIndex+1){if(nextCell||preCell){rng.selectNodeContents(nextCell||preCell).setCursor(false,true)}}else{var newCell=ut.getCell(cellInfo.rowIndex,ut.indexTable[cellInfo.rowIndex][cellInfo.colIndex].cellIndex);if(newCell){rng.selectNodeContents(newCell).setCursor(false,true)}}}if(table.getAttribute("interlaced")==="enabled"){this.fireEvent("interlacetable",table)}}};UE.commands.insertcol={queryCommandState:function(cmd){var tableItems=getTableItemsByRange(this),cell=tableItems.cell;return cell&&(cell.tagName=="TD"||(cell.tagName=="TH"&&cell!==tableItems.tr.cells[0]))&&getUETable(tableItems.table).colsNum<this.options.maxColNum?0:-1},execCommand:function(cmd){var rng=this.selection.getRange(),bk=rng.createBookmark(true);if(this.queryCommandState(cmd)==-1){return}var cell=getTableItemsByRange(this).cell,ut=getUETable(cell),cellInfo=ut.getCellInfo(cell);if(!ut.selectedTds.length){ut.insertCol(cellInfo.colIndex,cell)}else{var range=ut.cellsRange;for(var i=0,len=range.endColIndex-range.beginColIndex+1;i<len;i++){ut.insertCol(range.beginColIndex,cell)}}rng.moveToBookmark(bk).select(true)}};UE.commands.insertcolnext={queryCommandState:function(){var tableItems=getTableItemsByRange(this),cell=tableItems.cell;return cell&&getUETable(tableItems.table).colsNum<this.options.maxColNum?0:-1},execCommand:function(){var rng=this.selection.getRange(),bk=rng.createBookmark(true);var cell=getTableItemsByRange(this).cell,ut=getUETable(cell),cellInfo=ut.getCellInfo(cell);if(!ut.selectedTds.length){ut.insertCol(cellInfo.colIndex+cellInfo.colSpan,cell)}else{var range=ut.cellsRange;for(var i=0,len=range.endColIndex-range.beginColIndex+1;i<len;i++){ut.insertCol(range.endColIndex+1,cell)}}rng.moveToBookmark(bk).select()}};UE.commands.deletecol={queryCommandState:function(){var tableItems=getTableItemsByRange(this);return tableItems.cell?0:-1},execCommand:function(){var cell=getTableItemsByRange(this).cell,ut=getUETable(cell),range=ut.cellsRange,cellInfo=ut.getCellInfo(cell),preCell=ut.getHSideCell(cell),nextCell=ut.getHSideCell(cell,true);if(utils.isEmptyObject(range)){ut.deleteCol(cellInfo.colIndex)}else{for(var i=range.beginColIndex;i<range.endColIndex+1;i++){ut.deleteCol(range.beginColIndex)}}var table=ut.table,rng=this.selection.getRange();if(!table.getElementsByTagName("td").length){var nextSibling=table.nextSibling;domUtils.remove(table);if(nextSibling){rng.setStart(nextSibling,0).setCursor(false,true)}}else{if(domUtils.inDoc(cell,this.document)){rng.setStart(cell,0).setCursor(false,true)}else{if(nextCell&&domUtils.inDoc(nextCell,this.document)){rng.selectNodeContents(nextCell).setCursor(false,true)}else{if(preCell&&domUtils.inDoc(preCell,this.document)){rng.selectNodeContents(preCell).setCursor(true,true)}}}}}};UE.commands.splittocells={queryCommandState:function(){var tableItems=getTableItemsByRange(this),cell=tableItems.cell;if(!cell){return -1}var ut=getUETable(tableItems.table);if(ut.selectedTds.length>0){return -1}return cell&&(cell.colSpan>1||cell.rowSpan>1)?0:-1},execCommand:function(){var rng=this.selection.getRange(),bk=rng.createBookmark(true);var cell=getTableItemsByRange(this).cell,ut=getUETable(cell);ut.splitToCells(cell);rng.moveToBookmark(bk).select()}};UE.commands.splittorows={queryCommandState:function(){var tableItems=getTableItemsByRange(this),cell=tableItems.cell;if(!cell){return -1}var ut=getUETable(tableItems.table);if(ut.selectedTds.length>0){return -1}return cell&&cell.rowSpan>1?0:-1},execCommand:function(){var rng=this.selection.getRange(),bk=rng.createBookmark(true);var cell=getTableItemsByRange(this).cell,ut=getUETable(cell);ut.splitToRows(cell);rng.moveToBookmark(bk).select()}};UE.commands.splittocols={queryCommandState:function(){var tableItems=getTableItemsByRange(this),cell=tableItems.cell;if(!cell){return -1}var ut=getUETable(tableItems.table);if(ut.selectedTds.length>0){return -1}return cell&&cell.colSpan>1?0:-1},execCommand:function(){var rng=this.selection.getRange(),bk=rng.createBookmark(true);var cell=getTableItemsByRange(this).cell,ut=getUETable(cell);ut.splitToCols(cell);rng.moveToBookmark(bk).select()}};UE.commands.adaptbytext=UE.commands.adaptbywindow={queryCommandState:function(){return getTableItemsByRange(this).table?0:-1},execCommand:function(cmd){var tableItems=getTableItemsByRange(this),table=tableItems.table;if(table){if(cmd=="adaptbywindow"){resetTdWidth(table,this)}else{var cells=domUtils.getElementsByTagName(table,"td th");utils.each(cells,function(cell){cell.removeAttribute("width")});table.removeAttribute("width")}}}};UE.commands.averagedistributecol={queryCommandState:function(){var ut=getUETableBySelected(this);if(!ut){return -1}return ut.isFullRow()||ut.isFullCol()?0:-1},execCommand:function(cmd){var me=this,ut=getUETableBySelected(me);function getAverageWidth(){var tb=ut.table,averageWidth,sumWidth=0,colsNum=0,tbAttr=getDefaultValue(me,tb);if(ut.isFullRow()){sumWidth=tb.offsetWidth;colsNum=ut.colsNum}else{var begin=ut.cellsRange.beginColIndex,end=ut.cellsRange.endColIndex,node;for(var i=begin;i<=end;){node=ut.selectedTds[i];sumWidth+=node.offsetWidth;i+=node.colSpan;colsNum+=1}}averageWidth=Math.ceil(sumWidth/colsNum)-tbAttr.tdBorder*2-tbAttr.tdPadding*2;return averageWidth}function setAverageWidth(averageWidth){utils.each(domUtils.getElementsByTagName(ut.table,"th"),function(node){node.setAttribute("width","")});var cells=ut.isFullRow()?domUtils.getElementsByTagName(ut.table,"td"):ut.selectedTds;utils.each(cells,function(node){if(node.colSpan==1){node.setAttribute("width",averageWidth)}})}if(ut&&ut.selectedTds.length){setAverageWidth(getAverageWidth())}}};UE.commands.averagedistributerow={queryCommandState:function(){var ut=getUETableBySelected(this);if(!ut){return -1}if(ut.selectedTds&&/th/ig.test(ut.selectedTds[0].tagName)){return -1}return ut.isFullRow()||ut.isFullCol()?0:-1},execCommand:function(cmd){var me=this,ut=getUETableBySelected(me);function getAverageHeight(){var averageHeight,rowNum,sumHeight=0,tb=ut.table,tbAttr=getDefaultValue(me,tb),tdpadding=parseInt(domUtils.getComputedStyle(tb.getElementsByTagName("td")[0],"padding-top"));if(ut.isFullCol()){var captionArr=domUtils.getElementsByTagName(tb,"caption"),thArr=domUtils.getElementsByTagName(tb,"th"),captionHeight,thHeight;if(captionArr.length>0){captionHeight=captionArr[0].offsetHeight}if(thArr.length>0){thHeight=thArr[0].offsetHeight}sumHeight=tb.offsetHeight-(captionHeight||0)-(thHeight||0);rowNum=thArr.length==0?ut.rowsNum:(ut.rowsNum-1)}else{var begin=ut.cellsRange.beginRowIndex,end=ut.cellsRange.endRowIndex,count=0,trs=domUtils.getElementsByTagName(tb,"tr");for(var i=begin;i<=end;i++){sumHeight+=trs[i].offsetHeight;count+=1}rowNum=count}if(browser.ie&&browser.version<9){averageHeight=Math.ceil(sumHeight/rowNum)}else{averageHeight=Math.ceil(sumHeight/rowNum)-tbAttr.tdBorder*2-tdpadding*2}return averageHeight}function setAverageHeight(averageHeight){var cells=ut.isFullCol()?domUtils.getElementsByTagName(ut.table,"td"):ut.selectedTds;utils.each(cells,function(node){if(node.rowSpan==1){node.setAttribute("height",averageHeight)}})}if(ut&&ut.selectedTds.length){setAverageHeight(getAverageHeight())}}};UE.commands.cellalignment={queryCommandState:function(){return getTableItemsByRange(this).table?0:-1},execCommand:function(cmd,data){var me=this,ut=getUETableBySelected(me);if(!ut){var start=me.selection.getStart(),cell=start&&domUtils.findParentByTagName(start,["td","th","caption"],true);if(!/caption/ig.test(cell.tagName)){domUtils.setAttributes(cell,data)}else{cell.style.textAlign=data.align;cell.style.verticalAlign=data.vAlign}me.selection.getRange().setCursor(true)}else{utils.each(ut.selectedTds,function(cell){domUtils.setAttributes(cell,data)})}},queryCommandValue:function(cmd){var activeMenuCell=getTableItemsByRange(this).cell;if(!activeMenuCell){activeMenuCell=getSelectedArr(this)[0]}if(!activeMenuCell){return null}else{var cells=UE.UETable.getUETable(activeMenuCell).selectedTds;!cells.length&&(cells=activeMenuCell);return UE.UETable.getTableCellAlignState(cells)}}};UE.commands.tablealignment={queryCommandState:function(){if(browser.ie&&browser.version<8){return -1}return getTableItemsByRange(this).table?0:-1},execCommand:function(cmd,value){var me=this,start=me.selection.getStart(),table=start&&domUtils.findParentByTagName(start,["table"],true);if(table){table.setAttribute("align",value)}}};UE.commands.edittable={queryCommandState:function(){return getTableItemsByRange(this).table?0:-1},execCommand:function(cmd,color){var rng=this.selection.getRange(),table=domUtils.findParentByTagName(rng.startContainer,"table");if(table){var arr=domUtils.getElementsByTagName(table,"td").concat(domUtils.getElementsByTagName(table,"th"),domUtils.getElementsByTagName(table,"caption"));utils.each(arr,function(node){node.style.borderColor=color})}}};UE.commands.edittd={queryCommandState:function(){return getTableItemsByRange(this).table?0:-1},execCommand:function(cmd,bkColor){var me=this,ut=getUETableBySelected(me);if(!ut){var start=me.selection.getStart(),cell=start&&domUtils.findParentByTagName(start,["td","th","caption"],true);if(cell){cell.style.backgroundColor=bkColor}}else{utils.each(ut.selectedTds,function(cell){cell.style.backgroundColor=bkColor})}}};UE.commands.settablebackground={queryCommandState:function(){return getSelectedArr(this).length>1?0:-1},execCommand:function(cmd,value){var cells,ut;cells=getSelectedArr(this);ut=getUETable(cells[0]);ut.setBackground(cells,value)}};UE.commands.cleartablebackground={queryCommandState:function(){var cells=getSelectedArr(this);if(!cells.length){return -1}for(var i=0,cell;cell=cells[i++];){if(cell.style.backgroundColor!==""){return 0}}return -1},execCommand:function(){var cells=getSelectedArr(this),ut=getUETable(cells[0]);ut.removeBackground(cells)}};UE.commands.interlacetable=UE.commands.uninterlacetable={queryCommandState:function(cmd){var table=getTableItemsByRange(this).table;if(!table){return -1}var interlaced=table.getAttribute("interlaced");if(cmd=="interlacetable"){return(interlaced==="enabled")?-1:0}else{return(!interlaced||interlaced==="disabled")?-1:0}},execCommand:function(cmd,classList){var table=getTableItemsByRange(this).table;if(cmd=="interlacetable"){table.setAttribute("interlaced","enabled");this.fireEvent("interlacetable",table,classList)}else{table.setAttribute("interlaced","disabled");this.fireEvent("uninterlacetable",table)}}};UE.commands.setbordervisible={queryCommandState:function(cmd){var table=getTableItemsByRange(this).table;if(!table){return -1}return 0},execCommand:function(){var table=getTableItemsByRange(this).table;utils.each(domUtils.getElementsByTagName(table,"td"),function(td){td.style.borderWidth="1px";td.style.borderStyle="solid"})}};function resetTdWidth(table,editor){var tds=domUtils.getElementsByTagName(table,"td th");utils.each(tds,function(td){td.removeAttribute("width")});table.setAttribute("width",getTableWidth(editor,true,getDefaultValue(editor,table)));var tdsWidths=[];setTimeout(function(){utils.each(tds,function(td){(td.colSpan==1)&&tdsWidths.push(td.offsetWidth)});utils.each(tds,function(td,i){(td.colSpan==1)&&td.setAttribute("width",tdsWidths[i]+"")})},0)}function getTableWidth(editor,needIEHack,defaultValue){var body=editor.body;return body.offsetWidth-(needIEHack?parseInt(domUtils.getComputedStyle(body,"margin-left"),10)*2:0)-defaultValue.tableBorder*2-(editor.options.offsetWidth||0)}function getSelectedArr(editor){var cell=getTableItemsByRange(editor).cell;if(cell){var ut=getUETable(cell);return ut.selectedTds.length?ut.selectedTds:[cell]}else{return[]}}})();UE.plugins.table=function(){var me=this,tabTimer=null,tableDragTimer=null,tableResizeTimer=null,cellMinWidth=5,isInResizeBuffer=false,cellBorderWidth=5,offsetOfTableCell=10,singleClickState=0,userActionStatus=null,dblclickTime=360,UT=UE.UETable,getUETable=function(tdOrTable){return UT.getUETable(tdOrTable)},getUETableBySelected=function(editor){return UT.getUETableBySelected(editor)},getDefaultValue=function(editor,table){return UT.getDefaultValue(editor,table)},removeSelectedClass=function(cells){return UT.removeSelectedClass(cells)};function showError(e){}me.ready(function(){var me=this;var orgGetText=me.selection.getText;me.selection.getText=function(){var table=getUETableBySelected(me);if(table){var str="";utils.each(table.selectedTds,function(td){str+=td[browser.ie?"innerText":"textContent"]});return str}else{return orgGetText.call(me.selection)}}});var startTd=null,currentTd=null,onDrag="",onBorder=false,dragButton=null,dragOver=false,dragLine=null,dragTd=null;var mousedown=false,needIEHack=true;me.setOpt({maxColNum:20,maxRowNum:100,defaultCols:5,defaultRows:5,tdvalign:"top",cursorpath:me.options.UEDITOR_HOME_URL+"themes/default/images/cursor_",tableDragable:false,classList:["ue-table-interlace-color-single","ue-table-interlace-color-double"]});me.getUETable=getUETable;var commands={deletetable:1,inserttable:1,cellvalign:1,insertcaption:1,deletecaption:1,inserttitle:1,deletetitle:1,mergeright:1,mergedown:1,mergecells:1,insertrow:1,insertrownext:1,deleterow:1,insertcol:1,insertcolnext:1,deletecol:1,splittocells:1,splittorows:1,splittocols:1,adaptbytext:1,adaptbywindow:1,adaptbycustomer:1,insertparagraph:1,insertparagraphbeforetable:1,averagedistributecol:1,averagedistributerow:1};me.ready(function(){utils.cssRule("table",".selectTdClass{background-color:#edf5fa !important}table.noBorderTable td,table.noBorderTable th,table.noBorderTable caption{border:1px dashed #ddd !important}table{margin-bottom:10px;border-collapse:collapse;display:table;}td,th{padding: 5px 10px;border: 1px solid #DDD;}caption{border:1px dashed #DDD;border-bottom:0;padding:3px;text-align:center;}th{border-top:1px solid #BBB;background-color:#F7F7F7;}table tr.firstRow th{border-top-width:2px;}.ue-table-interlace-color-single{ background-color: #fcfcfc; } .ue-table-interlace-color-double{ background-color: #f7faff; }td p{margin:0;padding:0;}",me.document);var tableCopyList,isFullCol,isFullRow;me.addListener("keydown",function(cmd,evt){var me=this;var keyCode=evt.keyCode||evt.which;if(keyCode==8){var ut=getUETableBySelected(me);if(ut&&ut.selectedTds.length){if(ut.isFullCol()){me.execCommand("deletecol")}else{if(ut.isFullRow()){me.execCommand("deleterow")}else{me.fireEvent("delcells")}}domUtils.preventDefault(evt)}var caption=domUtils.findParentByTagName(me.selection.getStart(),"caption",true),range=me.selection.getRange();if(range.collapsed&&caption&&isEmptyBlock(caption)){me.fireEvent("saveScene");var table=caption.parentNode;domUtils.remove(caption);if(table){range.setStart(table.rows[0].cells[0],0).setCursor(false,true)}me.fireEvent("saveScene")}}if(keyCode==46){ut=getUETableBySelected(me);if(ut){me.fireEvent("saveScene");for(var i=0,ci;ci=ut.selectedTds[i++];){domUtils.fillNode(me.document,ci)}me.fireEvent("saveScene");domUtils.preventDefault(evt)}}if(keyCode==13){var rng=me.selection.getRange(),caption=domUtils.findParentByTagName(rng.startContainer,"caption",true);if(caption){var table=domUtils.findParentByTagName(caption,"table");if(!rng.collapsed){rng.deleteContents();me.fireEvent("saveScene")}else{if(caption){rng.setStart(table.rows[0].cells[0],0).setCursor(false,true)}}domUtils.preventDefault(evt);return}if(rng.collapsed){var table=domUtils.findParentByTagName(rng.startContainer,"table");if(table){var cell=table.rows[0].cells[0],start=domUtils.findParentByTagName(me.selection.getStart(),["td","th"],true),preNode=table.previousSibling;if(cell===start&&(!preNode||preNode.nodeType==1&&preNode.tagName=="TABLE")&&domUtils.isStartInblock(rng)){var first=domUtils.findParent(me.selection.getStart(),function(n){return domUtils.isBlockElm(n)},true);if(first&&(/t(h|d)/i.test(first.tagName)||first===start.firstChild)){me.execCommand("insertparagraphbeforetable");domUtils.preventDefault(evt)}}}}}if((evt.ctrlKey||evt.metaKey)&&evt.keyCode=="67"){tableCopyList=null;var ut=getUETableBySelected(me);if(ut){var tds=ut.selectedTds;isFullCol=ut.isFullCol();isFullRow=ut.isFullRow();tableCopyList=[[ut.cloneCell(tds[0],null,true)]];for(var i=1,ci;ci=tds[i];i++){if(ci.parentNode!==tds[i-1].parentNode){tableCopyList.push([ut.cloneCell(ci,null,true)])}else{tableCopyList[tableCopyList.length-1].push(ut.cloneCell(ci,null,true))}}}}});me.addListener("tablehasdeleted",function(){toggleDraggableState(this,false,"",null);if(dragButton){domUtils.remove(dragButton)}});me.addListener("beforepaste",function(cmd,html){var me=this;var rng=me.selection.getRange();if(domUtils.findParentByTagName(rng.startContainer,"caption",true)){var div=me.document.createElement("div");div.innerHTML=html.html;html.html=div[browser.ie9below?"innerText":"textContent"];return}var table=getUETableBySelected(me);if(tableCopyList){me.fireEvent("saveScene");var rng=me.selection.getRange();var td=domUtils.findParentByTagName(rng.startContainer,["td","th"],true),tmpNode,preNode;if(td){var ut=getUETable(td);if(isFullRow){var rowIndex=ut.getCellInfo(td).rowIndex;if(td.tagName=="TH"){rowIndex++}for(var i=0,ci;ci=tableCopyList[i++];){var tr=ut.insertRow(rowIndex++,"td");for(var j=0,cj;cj=ci[j];j++){var cell=tr.cells[j];if(!cell){cell=tr.insertCell(j)}cell.innerHTML=cj.innerHTML;cj.getAttribute("width")&&cell.setAttribute("width",cj.getAttribute("width"));cj.getAttribute("vAlign")&&cell.setAttribute("vAlign",cj.getAttribute("vAlign"));cj.getAttribute("align")&&cell.setAttribute("align",cj.getAttribute("align"));cj.style.cssText&&(cell.style.cssText=cj.style.cssText)}for(var j=0,cj;cj=tr.cells[j];j++){if(!ci[j]){break}cj.innerHTML=ci[j].innerHTML;ci[j].getAttribute("width")&&cj.setAttribute("width",ci[j].getAttribute("width"));ci[j].getAttribute("vAlign")&&cj.setAttribute("vAlign",ci[j].getAttribute("vAlign"));ci[j].getAttribute("align")&&cj.setAttribute("align",ci[j].getAttribute("align"));ci[j].style.cssText&&(cj.style.cssText=ci[j].style.cssText)}}}else{if(isFullCol){cellInfo=ut.getCellInfo(td);var maxColNum=0;for(var j=0,ci=tableCopyList[0],cj;cj=ci[j++];){maxColNum+=cj.colSpan||1}me.__hasEnterExecCommand=true;for(i=0;i<maxColNum;i++){me.execCommand("insertcol")}me.__hasEnterExecCommand=false;td=ut.table.rows[0].cells[cellInfo.cellIndex];if(td.tagName=="TH"){td=ut.table.rows[1].cells[cellInfo.cellIndex]}}for(var i=0,ci;ci=tableCopyList[i++];){tmpNode=td;for(var j=0,cj;cj=ci[j++];){if(td){td.innerHTML=cj.innerHTML;cj.getAttribute("width")&&td.setAttribute("width",cj.getAttribute("width"));cj.getAttribute("vAlign")&&td.setAttribute("vAlign",cj.getAttribute("vAlign"));cj.getAttribute("align")&&td.setAttribute("align",cj.getAttribute("align"));cj.style.cssText&&(td.style.cssText=cj.style.cssText);preNode=td;td=td.nextSibling}else{var cloneTd=cj.cloneNode(true);domUtils.removeAttributes(cloneTd,["class","rowSpan","colSpan"]);preNode.parentNode.appendChild(cloneTd)}}td=ut.getNextCell(tmpNode,true,true);if(!tableCopyList[i]){break}if(!td){var cellInfo=ut.getCellInfo(tmpNode);ut.table.insertRow(ut.table.rows.length);ut.update();td=ut.getVSideCell(tmpNode,true)}}}ut.update()}else{table=me.document.createElement("table");for(var i=0,ci;ci=tableCopyList[i++];){var tr=table.insertRow(table.rows.length);for(var j=0,cj;cj=ci[j++];){cloneTd=UT.cloneCell(cj,null,true);domUtils.removeAttributes(cloneTd,["class"]);tr.appendChild(cloneTd)}if(j==2&&cloneTd.rowSpan>1){cloneTd.rowSpan=1}}var defaultValue=getDefaultValue(me),width=me.body.offsetWidth-(needIEHack?parseInt(domUtils.getComputedStyle(me.body,"margin-left"),10)*2:0)-defaultValue.tableBorder*2-(me.options.offsetWidth||0);me.execCommand("insertHTML","<table  "+(isFullCol&&isFullRow?'width="'+width+'"':"")+">"+table.innerHTML.replace(/>\s*</g,"><").replace(/\bth\b/gi,"td")+"</table>")}me.fireEvent("contentchange");me.fireEvent("saveScene");html.html="";return true}else{var div=me.document.createElement("div"),tables;div.innerHTML=html.html;tables=div.getElementsByTagName("table");if(domUtils.findParentByTagName(me.selection.getStart(),"table")){utils.each(tables,function(t){domUtils.remove(t)});if(domUtils.findParentByTagName(me.selection.getStart(),"caption",true)){div.innerHTML=div[browser.ie?"innerText":"textContent"]}}else{utils.each(tables,function(table){removeStyleSize(table,true);domUtils.removeAttributes(table,["style","border"]);utils.each(domUtils.getElementsByTagName(table,"td"),function(td){if(isEmptyBlock(td)){domUtils.fillNode(me.document,td)}removeStyleSize(td,true)})})}html.html=div.innerHTML}});me.addListener("afterpaste",function(){utils.each(domUtils.getElementsByTagName(me.body,"table"),function(table){if(table.offsetWidth>me.body.offsetWidth){var defaultValue=getDefaultValue(me,table);table.style.width=me.body.offsetWidth-(needIEHack?parseInt(domUtils.getComputedStyle(me.body,"margin-left"),10)*2:0)-defaultValue.tableBorder*2-(me.options.offsetWidth||0)+"px"}})});me.addListener("blur",function(){tableCopyList=null});var timer;me.addListener("keydown",function(){clearTimeout(timer);timer=setTimeout(function(){var rng=me.selection.getRange(),cell=domUtils.findParentByTagName(rng.startContainer,["th","td"],true);if(cell){var table=cell.parentNode.parentNode.parentNode;if(table.offsetWidth>table.getAttribute("width")){cell.style.wordBreak="break-all"}}},100)});me.addListener("selectionchange",function(){toggleDraggableState(me,false,"",null)});me.addListener("contentchange",function(){var me=this;hideDragLine(me);if(getUETableBySelected(me)){return}var rng=me.selection.getRange();var start=rng.startContainer;start=domUtils.findParentByTagName(start,["td","th"],true);utils.each(domUtils.getElementsByTagName(me.document,"table"),function(table){if(me.fireEvent("excludetable",table)===true){return}table.ueTable=new UT(table);table.onmouseover=function(){me.fireEvent("tablemouseover",table)};table.onmousemove=function(){me.fireEvent("tablemousemove",table);me.options.tableDragable&&toggleDragButton(true,this,me);utils.defer(function(){me.fireEvent("contentchange",50)},true)};table.onmouseout=function(){me.fireEvent("tablemouseout",table);toggleDraggableState(me,false,"",null);hideDragLine(me)};table.onclick=function(evt){evt=me.window.event||evt;var target=getParentTdOrTh(evt.target||evt.srcElement);if(!target){return}var ut=getUETable(target),table=ut.table,cellInfo=ut.getCellInfo(target),cellsRange,rng=me.selection.getRange();if(inTableSide(table,target,evt,true)){var endTdCol=ut.getCell(ut.indexTable[ut.rowsNum-1][cellInfo.colIndex].rowIndex,ut.indexTable[ut.rowsNum-1][cellInfo.colIndex].cellIndex);if(evt.shiftKey&&ut.selectedTds.length){if(ut.selectedTds[0]!==endTdCol){cellsRange=ut.getCellsRange(ut.selectedTds[0],endTdCol);ut.setSelected(cellsRange)}else{rng&&rng.selectNodeContents(endTdCol).select()}}else{if(target!==endTdCol){cellsRange=ut.getCellsRange(target,endTdCol);ut.setSelected(cellsRange)}else{rng&&rng.selectNodeContents(endTdCol).select()}}return}if(inTableSide(table,target,evt)){var endTdRow=ut.getCell(ut.indexTable[cellInfo.rowIndex][ut.colsNum-1].rowIndex,ut.indexTable[cellInfo.rowIndex][ut.colsNum-1].cellIndex);if(evt.shiftKey&&ut.selectedTds.length){if(ut.selectedTds[0]!==endTdRow){cellsRange=ut.getCellsRange(ut.selectedTds[0],endTdRow);ut.setSelected(cellsRange)}else{rng&&rng.selectNodeContents(endTdRow).select()}}else{if(target!==endTdRow){cellsRange=ut.getCellsRange(target,endTdRow);ut.setSelected(cellsRange)}else{rng&&rng.selectNodeContents(endTdRow).select()}}}}});switchBorderColor(me,true)});domUtils.on(me.document,"mousemove",mouseMoveEvent);domUtils.on(me.document,"mouseout",function(evt){var target=evt.target||evt.srcElement;if(target.tagName=="TABLE"){toggleDraggableState(me,false,"",null)}});me.addListener("interlacetable",function(type,table,classList){if(!table){return}var me=this,rows=table.rows,len=rows.length,getClass=function(list,index,repeat){return list[index]?list[index]:repeat?list[index%list.length]:""};for(var i=0;i<len;i++){rows[i].className=getClass(classList||me.options.classList,i,true)}});me.addListener("uninterlacetable",function(type,table){if(!table){return}var me=this,rows=table.rows,classList=me.options.classList,len=rows.length;for(var i=0;i<len;i++){domUtils.removeClasses(rows[i],classList)}});me.addListener("mousedown",mouseDownEvent);me.addListener("mouseup",mouseUpEvent);domUtils.on(me.body,"dragstart",function(evt){mouseUpEvent.call(me,"dragstart",evt)});me.addOutputRule(function(root){utils.each(root.getNodesByTagName("div"),function(n){if(n.getAttr("id")=="ue_tableDragLine"){n.parentNode.removeChild(n)}})});var currentRowIndex=0;me.addListener("mousedown",function(){currentRowIndex=0});me.addListener("tabkeydown",function(){var range=this.selection.getRange(),common=range.getCommonAncestor(true,true),table=domUtils.findParentByTagName(common,"table");if(table){if(domUtils.findParentByTagName(common,"caption",true)){var cell=domUtils.getElementsByTagName(table,"th td");if(cell&&cell.length){range.setStart(cell[0],0).setCursor(false,true)}}else{var cell=domUtils.findParentByTagName(common,["td","th"],true),ua=getUETable(cell);currentRowIndex=cell.rowSpan>1?currentRowIndex:ua.getCellInfo(cell).rowIndex;var nextCell=ua.getTabNextCell(cell,currentRowIndex);if(nextCell){if(isEmptyBlock(nextCell)){range.setStart(nextCell,0).setCursor(false,true)}else{range.selectNodeContents(nextCell).select()}}else{me.fireEvent("saveScene");me.__hasEnterExecCommand=true;this.execCommand("insertrownext");me.__hasEnterExecCommand=false;range=this.selection.getRange();range.setStart(table.rows[table.rows.length-1].cells[0],0).setCursor();me.fireEvent("saveScene")}}return true}});browser.ie&&me.addListener("selectionchange",function(){toggleDraggableState(this,false,"",null)});me.addListener("keydown",function(type,evt){var me=this;var keyCode=evt.keyCode||evt.which;if(keyCode==8||keyCode==46){return}var notCtrlKey=!evt.ctrlKey&&!evt.metaKey&&!evt.shiftKey&&!evt.altKey;notCtrlKey&&removeSelectedClass(domUtils.getElementsByTagName(me.body,"td"));var ut=getUETableBySelected(me);if(!ut){return}notCtrlKey&&ut.clearSelected()});me.addListener("beforegetcontent",function(){switchBorderColor(this,false);browser.ie&&utils.each(this.document.getElementsByTagName("caption"),function(ci){if(domUtils.isEmptyNode(ci)){ci.innerHTML="&nbsp;"}})});me.addListener("aftergetcontent",function(){switchBorderColor(this,true)});me.addListener("getAllHtml",function(){removeSelectedClass(me.document.getElementsByTagName("td"))});me.addListener("fullscreenchanged",function(type,fullscreen){if(!fullscreen){var ratio=this.body.offsetWidth/document.body.offsetWidth,tables=domUtils.getElementsByTagName(this.body,"table");utils.each(tables,function(table){if(table.offsetWidth<me.body.offsetWidth){return false}var tds=domUtils.getElementsByTagName(table,"td"),backWidths=[];utils.each(tds,function(td){backWidths.push(td.offsetWidth)});for(var i=0,td;td=tds[i];i++){td.setAttribute("width",Math.floor(backWidths[i]*ratio))}table.setAttribute("width",Math.floor(getTableWidth(me,needIEHack,getDefaultValue(me))))})}});var oldExecCommand=me.execCommand;me.execCommand=function(cmd,datatat){var me=this,args=arguments;cmd=cmd.toLowerCase();var ut=getUETableBySelected(me),tds,range=new dom.Range(me.document),cmdFun=me.commands[cmd]||UE.commands[cmd],result;if(!cmdFun){return}if(ut&&!commands[cmd]&&!cmdFun.notNeedUndo&&!me.__hasEnterExecCommand){me.__hasEnterExecCommand=true;me.fireEvent("beforeexeccommand",cmd);tds=ut.selectedTds;var lastState=-2,lastValue=-2,value,state;for(var i=0,td;td=tds[i];i++){if(isEmptyBlock(td)){range.setStart(td,0).setCursor(false,true)}else{range.selectNode(td).select(true)}state=me.queryCommandState(cmd);value=me.queryCommandValue(cmd);if(state!=-1){if(lastState!==state||lastValue!==value){me._ignoreContentChange=true;result=oldExecCommand.apply(me,arguments);me._ignoreContentChange=false}lastState=me.queryCommandState(cmd);lastValue=me.queryCommandValue(cmd);if(domUtils.isEmptyBlock(td)){domUtils.fillNode(me.document,td)}}}range.setStart(tds[0],0).shrinkBoundary(true).setCursor(false,true);me.fireEvent("contentchange");me.fireEvent("afterexeccommand",cmd);me.__hasEnterExecCommand=false;me._selectionChange()}else{result=oldExecCommand.apply(me,arguments)}return result}});function removeStyleSize(obj,replaceToProperty){removeStyle(obj,"width",true);removeStyle(obj,"height",true)}function removeStyle(obj,styleName,replaceToProperty){if(obj.style[styleName]){replaceToProperty&&obj.setAttribute(styleName,parseInt(obj.style[styleName],10));obj.style[styleName]=""}}function getParentTdOrTh(ele){if(ele.tagName=="TD"||ele.tagName=="TH"){return ele}var td;if(td=domUtils.findParentByTagName(ele,"td",true)||domUtils.findParentByTagName(ele,"th",true)){return td}return null}function isEmptyBlock(node){var reg=new RegExp(domUtils.fillChar,"g");if(node[browser.ie?"innerText":"textContent"].replace(/^\s*$/,"").replace(reg,"").length>0){return 0}for(var n in dtd.$isNotEmpty){if(node.getElementsByTagName(n).length){return 0}}return 1}function mouseCoords(evt){if(evt.pageX||evt.pageY){return{x:evt.pageX,y:evt.pageY}}return{x:evt.clientX+me.document.body.scrollLeft-me.document.body.clientLeft,y:evt.clientY+me.document.body.scrollTop-me.document.body.clientTop}}function mouseMoveEvent(evt){if(isEditorDisabled()){return}try{var target=getParentTdOrTh(evt.target||evt.srcElement),pos;if(isInResizeBuffer){me.body.style.webkitUserSelect="none";if(Math.abs(userActionStatus.x-evt.clientX)>offsetOfTableCell||Math.abs(userActionStatus.y-evt.clientY)>offsetOfTableCell){clearTableDragTimer();isInResizeBuffer=false;singleClickState=0;tableBorderDrag(evt)}}if(onDrag&&dragTd){singleClickState=0;me.body.style.webkitUserSelect="none";me.selection.getNative()[browser.ie9below?"empty":"removeAllRanges"]();pos=mouseCoords(evt);toggleDraggableState(me,true,onDrag,pos,target);if(onDrag=="h"){dragLine.style.left=getPermissionX(dragTd,evt)+"px"}else{if(onDrag=="v"){dragLine.style.top=getPermissionY(dragTd,evt)+"px"}}return}if(target){if(me.fireEvent("excludetable",target)===true){return}pos=mouseCoords(evt);var state=getRelation(target,pos),table=domUtils.findParentByTagName(target,"table",true);if(inTableSide(table,target,evt,true)){if(me.fireEvent("excludetable",table)===true){return}me.body.style.cursor="url("+me.options.cursorpath+"h.png),pointer"}else{if(inTableSide(table,target,evt)){if(me.fireEvent("excludetable",table)===true){return}me.body.style.cursor="url("+me.options.cursorpath+"v.png),pointer"}else{me.body.style.cursor="text";var curCell=target;if(/\d/.test(state)){state=state.replace(/\d/,"");target=getUETable(target).getPreviewCell(target,state=="v")}toggleDraggableState(me,target?!!state:false,target?state:"",pos,target)}}}else{toggleDragButton(false,table,me)}}catch(e){showError(e)}}var dragButtonTimer;function toggleDragButton(show,table,editor){if(!show){if(dragOver){return}dragButtonTimer=setTimeout(function(){!dragOver&&dragButton&&dragButton.parentNode&&dragButton.parentNode.removeChild(dragButton)},2000)}else{createDragButton(table,editor)}}function createDragButton(table,editor){var pos=domUtils.getXY(table),doc=table.ownerDocument;if(dragButton&&dragButton.parentNode){return dragButton}dragButton=doc.createElement("div");dragButton.contentEditable=false;dragButton.innerHTML="";dragButton.style.cssText="width:15px;height:15px;background-image:url("+editor.options.UEDITOR_HOME_URL+"dialogs/table/dragicon.png);position: absolute;cursor:move;top:"+(pos.y-15)+"px;left:"+(pos.x)+"px;";domUtils.unSelectable(dragButton);dragButton.onmouseover=function(evt){dragOver=true};dragButton.onmouseout=function(evt){dragOver=false};domUtils.on(dragButton,"click",function(type,evt){doClick(evt,this)});domUtils.on(dragButton,"dblclick",function(type,evt){doDblClick(evt)});domUtils.on(dragButton,"dragstart",function(type,evt){domUtils.preventDefault(evt)});var timer;function doClick(evt,button){clearTimeout(timer);timer=setTimeout(function(){editor.fireEvent("tableClicked",table,button)},300)}function doDblClick(evt){clearTimeout(timer);var ut=getUETable(table),start=table.rows[0].cells[0],end=ut.getLastCell(),range=ut.getCellsRange(start,end);editor.selection.getRange().setStart(start,0).setCursor(false,true);ut.setSelected(range)}doc.body.appendChild(dragButton)}function inTableSide(table,cell,evt,top){var pos=mouseCoords(evt),state=getRelation(cell,pos);if(top){var caption=table.getElementsByTagName("caption")[0],capHeight=caption?caption.offsetHeight:0;return(state=="v1")&&((pos.y-domUtils.getXY(table).y-capHeight)<8)}else{return(state=="h1")&&((pos.x-domUtils.getXY(table).x)<8)}}function getPermissionX(dragTd,evt){var ut=getUETable(dragTd);if(ut){var preTd=ut.getSameEndPosCells(dragTd,"x")[0],nextTd=ut.getSameStartPosXCells(dragTd)[0],mouseX=mouseCoords(evt).x,left=(preTd?domUtils.getXY(preTd).x:domUtils.getXY(ut.table).x)+20,right=nextTd?domUtils.getXY(nextTd).x+nextTd.offsetWidth-20:(me.body.offsetWidth+5||parseInt(domUtils.getComputedStyle(me.body,"width"),10));left+=cellMinWidth;right-=cellMinWidth;return mouseX<left?left:mouseX>right?right:mouseX}}function getPermissionY(dragTd,evt){try{var top=domUtils.getXY(dragTd).y,mousePosY=mouseCoords(evt).y;return mousePosY<top?top:mousePosY}catch(e){showError(e)}}function toggleDraggableState(editor,draggable,dir,mousePos,cell){try{editor.body.style.cursor=dir=="h"?"col-resize":dir=="v"?"row-resize":"text";if(browser.ie){if(dir&&!mousedown&&!getUETableBySelected(editor)){getDragLine(editor,editor.document);showDragLineAt(dir,cell)}else{hideDragLine(editor)}}onBorder=draggable}catch(e){showError(e)}}function getResizeLineByUETable(){var lineId="_UETableResizeLine",line=this.document.getElementById(lineId);if(!line){line=this.document.createElement("div");line.id=lineId;line.contnetEditable=false;line.setAttribute("unselectable","on");var styles={width:2*cellBorderWidth+1+"px",position:"absolute","z-index":1000000000000000,cursor:"col-resize",background:"red",display:"none"};line.onmouseout=function(){this.style.display="none"};utils.extend(line.style,styles);this.document.body.appendChild(line)}return line}function updateResizeLine(cell,uetable){var line=getResizeLineByUETable.call(this),table=uetable.table,styles={top:domUtils.getXY(table).y+"px",left:domUtils.getXY(cell).x+cell.offsetWidth-cellBorderWidth+"px",display:"block",height:table.offsetHeight+"px"};utils.extend(line.style,styles)}function showResizeLine(cell){var uetable=getUETable(cell);updateResizeLine.call(this,cell,uetable)}function getRelation(ele,mousePos){var elePos=domUtils.getXY(ele);if(!elePos){return""}if(elePos.x+ele.offsetWidth-mousePos.x<cellBorderWidth){return"h"}if(mousePos.x-elePos.x<cellBorderWidth){return"h1"}if(elePos.y+ele.offsetHeight-mousePos.y<cellBorderWidth){return"v"}if(mousePos.y-elePos.y<cellBorderWidth){return"v1"}return""}function mouseDownEvent(type,evt){if(isEditorDisabled()){return}userActionStatus={x:evt.clientX,y:evt.clientY};if(evt.button==2){var ut=getUETableBySelected(me),flag=false;if(ut){var td=getTargetTd(me,evt);utils.each(ut.selectedTds,function(ti){if(ti===td){flag=true}});if(!flag){removeSelectedClass(domUtils.getElementsByTagName(me.body,"th td"));ut.clearSelected()}else{td=ut.selectedTds[0];setTimeout(function(){me.selection.getRange().setStart(td,0).setCursor(false,true)},0)}}}else{tableClickHander(evt)}}function clearTableTimer(){tabTimer&&clearTimeout(tabTimer);tabTimer=null}function tableDbclickHandler(evt){singleClickState=0;evt=evt||me.window.event;var target=getParentTdOrTh(evt.target||evt.srcElement);if(target){var h;if(h=getRelation(target,mouseCoords(evt))){hideDragLine(me);if(h=="h1"){h="h";if(inTableSide(domUtils.findParentByTagName(target,"table"),target,evt)){me.execCommand("adaptbywindow")}else{target=getUETable(target).getPreviewCell(target);if(target){var rng=me.selection.getRange();rng.selectNodeContents(target).setCursor(true,true)}}}if(h=="h"){var ut=getUETable(target),table=ut.table,cells=getCellsByMoveBorder(target,table,true);cells=extractArray(cells,"left");ut.width=ut.offsetWidth;var oldWidth=[],newWidth=[];utils.each(cells,function(cell){oldWidth.push(cell.offsetWidth)});utils.each(cells,function(cell){cell.removeAttribute("width")});window.setTimeout(function(){var changeable=true;utils.each(cells,function(cell,index){var width=cell.offsetWidth;if(width>oldWidth[index]){changeable=false;return false}newWidth.push(width)});var change=changeable?newWidth:oldWidth;utils.each(cells,function(cell,index){cell.width=change[index]-getTabcellSpace()})},0)}}}}function tableClickHander(evt){removeSelectedClass(domUtils.getElementsByTagName(me.body,"td th"));utils.each(me.document.getElementsByTagName("table"),function(t){t.ueTable=null});startTd=getTargetTd(me,evt);if(!startTd){return}var table=domUtils.findParentByTagName(startTd,"table",true);ut=getUETable(table);ut&&ut.clearSelected();if(!onBorder){me.document.body.style.webkitUserSelect="";mousedown=true;me.addListener("mouseover",mouseOverEvent)}else{borderActionHandler(evt)}}function borderActionHandler(evt){if(browser.ie){evt=reconstruct(evt)}clearTableDragTimer();isInResizeBuffer=true;tableDragTimer=setTimeout(function(){tableBorderDrag(evt)},dblclickTime)}function extractArray(originArr,key){var result=[],tmp=null;for(var i=0,len=originArr.length;i<len;i++){tmp=originArr[i][key];if(tmp){result.push(tmp)}}return result}function clearTableDragTimer(){tableDragTimer&&clearTimeout(tableDragTimer);tableDragTimer=null}function reconstruct(obj){var attrs=["pageX","pageY","clientX","clientY","srcElement","target"],newObj={};if(obj){for(var i=0,key,val;key=attrs[i];i++){val=obj[key];val&&(newObj[key]=val)}}return newObj}function tableBorderDrag(evt){isInResizeBuffer=false;startTd=evt.target||evt.srcElement;if(!startTd){return}var state=getRelation(startTd,mouseCoords(evt));if(/\d/.test(state)){state=state.replace(/\d/,"");startTd=getUETable(startTd).getPreviewCell(startTd,state=="v")}hideDragLine(me);getDragLine(me,me.document);me.fireEvent("saveScene");showDragLineAt(state,startTd);mousedown=true;onDrag=state;dragTd=startTd}function mouseUpEvent(type,evt){if(isEditorDisabled()){return}clearTableDragTimer();isInResizeBuffer=false;if(onBorder){singleClickState=++singleClickState%3;userActionStatus={x:evt.clientX,y:evt.clientY};tableResizeTimer=setTimeout(function(){singleClickState>0&&singleClickState--},dblclickTime);if(singleClickState===2){singleClickState=0;tableDbclickHandler(evt);return}}if(evt.button==2){return}var me=this;var range=me.selection.getRange(),start=domUtils.findParentByTagName(range.startContainer,"table",true),end=domUtils.findParentByTagName(range.endContainer,"table",true);if(start||end){if(start===end){start=domUtils.findParentByTagName(range.startContainer,["td","th","caption"],true);end=domUtils.findParentByTagName(range.endContainer,["td","th","caption"],true);if(start!==end){me.selection.clearRange()}}else{me.selection.clearRange()}}mousedown=false;me.document.body.style.webkitUserSelect="";if(onDrag&&dragTd){me.selection.getNative()[browser.ie9below?"empty":"removeAllRanges"]();singleClickState=0;dragLine=me.document.getElementById("ue_tableDragLine");if(dragLine){var dragTdPos=domUtils.getXY(dragTd),dragLinePos=domUtils.getXY(dragLine);switch(onDrag){case"h":changeColWidth(dragTd,dragLinePos.x-dragTdPos.x);break;case"v":changeRowHeight(dragTd,dragLinePos.y-dragTdPos.y-dragTd.offsetHeight);break;default:}onDrag="";dragTd=null;hideDragLine(me);me.fireEvent("saveScene");return}}if(!startTd){var target=domUtils.findParentByTagName(evt.target||evt.srcElement,"td",true);if(!target){target=domUtils.findParentByTagName(evt.target||evt.srcElement,"th",true)}if(target&&(target.tagName=="TD"||target.tagName=="TH")){if(me.fireEvent("excludetable",target)===true){return}range=new dom.Range(me.document);range.setStart(target,0).setCursor(false,true)}}else{var ut=getUETable(startTd),cell=ut?ut.selectedTds[0]:null;if(cell){range=new dom.Range(me.document);if(domUtils.isEmptyBlock(cell)){range.setStart(cell,0).setCursor(false,true)}else{range.selectNodeContents(cell).shrinkBoundary().setCursor(false,true)}}else{range=me.selection.getRange().shrinkBoundary();if(!range.collapsed){var start=domUtils.findParentByTagName(range.startContainer,["td","th"],true),end=domUtils.findParentByTagName(range.endContainer,["td","th"],true);if(start&&!end||!start&&end||start&&end&&start!==end){range.setCursor(false,true)}}}startTd=null;me.removeListener("mouseover",mouseOverEvent)}me._selectionChange(250,evt)}function mouseOverEvent(type,evt){if(isEditorDisabled()){return}var me=this,tar=evt.target||evt.srcElement;currentTd=domUtils.findParentByTagName(tar,"td",true)||domUtils.findParentByTagName(tar,"th",true);if(startTd&&currentTd&&((startTd.tagName=="TD"&&currentTd.tagName=="TD")||(startTd.tagName=="TH"&&currentTd.tagName=="TH"))&&domUtils.findParentByTagName(startTd,"table")==domUtils.findParentByTagName(currentTd,"table")){var ut=getUETable(currentTd);if(startTd!=currentTd){me.document.body.style.webkitUserSelect="none";me.selection.getNative()[browser.ie9below?"empty":"removeAllRanges"]();var range=ut.getCellsRange(startTd,currentTd);ut.setSelected(range)}else{me.document.body.style.webkitUserSelect="";ut.clearSelected()}}evt.preventDefault?evt.preventDefault():(evt.returnValue=false)}function setCellHeight(cell,height,backHeight){var lineHight=parseInt(domUtils.getComputedStyle(cell,"line-height"),10),tmpHeight=backHeight+height;height=tmpHeight<lineHight?lineHight:tmpHeight;if(cell.style.height){cell.style.height=""}cell.rowSpan==1?cell.setAttribute("height",height):(cell.removeAttribute&&cell.removeAttribute("height"))}function getWidth(cell){if(!cell){return 0}return parseInt(domUtils.getComputedStyle(cell,"width"),10)}function changeColWidth(cell,changeValue){var ut=getUETable(cell);if(ut){var table=ut.table,cells=getCellsByMoveBorder(cell,table);table.style.width="";table.removeAttribute("width");changeValue=correctChangeValue(changeValue,cell,cells);if(cell.nextSibling){var i=0;utils.each(cells,function(cellGroup){cellGroup.left.width=(+cellGroup.left.width)+changeValue;cellGroup.right&&(cellGroup.right.width=(+cellGroup.right.width)-changeValue)})}else{utils.each(cells,function(cellGroup){cellGroup.left.width-=-changeValue})}}}function isEditorDisabled(){return me.body.contentEditable==="false"}function changeRowHeight(td,changeValue){if(Math.abs(changeValue)<10){return}var ut=getUETable(td);if(ut){var cells=ut.getSameEndPosCells(td,"y"),backHeight=cells[0]?cells[0].offsetHeight:0;for(var i=0,cell;cell=cells[i++];){setCellHeight(cell,changeValue,backHeight)}}}function getCellsByMoveBorder(cell,table,isContainMergeCell){if(!table){table=domUtils.findParentByTagName(cell,"table")}if(!table){return null}var index=domUtils.getNodeIndex(cell),temp=cell,rows=table.rows,colIndex=0;while(temp){if(temp.nodeType===1){colIndex+=(temp.colSpan||1)}temp=temp.previousSibling}temp=null;var borderCells=[];utils.each(rows,function(tabRow){var cells=tabRow.cells,currIndex=0;utils.each(cells,function(tabCell){currIndex+=(tabCell.colSpan||1);if(currIndex===colIndex){borderCells.push({left:tabCell,right:tabCell.nextSibling||null});return false}else{if(currIndex>colIndex){if(isContainMergeCell){borderCells.push({left:tabCell})}return false}}})});return borderCells}function getMinWidthByTableCells(cells){var minWidth=Number.MAX_VALUE;for(var i=0,curCell;curCell=cells[i];i++){minWidth=Math.min(minWidth,curCell.width||getTableCellWidth(curCell))}return minWidth}function correctChangeValue(changeValue,relatedCell,cells){changeValue-=getTabcellSpace();if(changeValue<0){return 0}changeValue-=getTableCellWidth(relatedCell);var direction=changeValue<0?"left":"right";changeValue=Math.abs(changeValue);utils.each(cells,function(cellGroup){var curCell=cellGroup[direction];if(curCell){changeValue=Math.min(changeValue,getTableCellWidth(curCell)-cellMinWidth)}});changeValue=changeValue<0?0:changeValue;return direction==="left"?-changeValue:changeValue}function getTableCellWidth(cell){var width=0,offset=0,width=cell.offsetWidth-getTabcellSpace();if(!cell.nextSibling){width-=getTableCellOffset(cell)}width=width<0?0:width;try{cell.width=width}catch(e){}return width}function getTableCellOffset(cell){tab=domUtils.findParentByTagName(cell,"table",false);if(tab.offsetVal===undefined){var prev=cell.previousSibling;if(prev){tab.offsetVal=cell.offsetWidth-prev.offsetWidth===UT.borderWidth?UT.borderWidth:0}else{tab.offsetVal=0}}return tab.offsetVal}function getTabcellSpace(){if(UT.tabcellSpace===undefined){var cell=null,tab=me.document.createElement("table"),tbody=me.document.createElement("tbody"),trow=me.document.createElement("tr"),tabcell=me.document.createElement("td"),mirror=null;tabcell.style.cssText="border: 0;";tabcell.width=1;trow.appendChild(tabcell);trow.appendChild(mirror=tabcell.cloneNode(false));tbody.appendChild(trow);tab.appendChild(tbody);tab.style.cssText="visibility: hidden;";me.body.appendChild(tab);UT.paddingSpace=tabcell.offsetWidth-1;var tmpTabWidth=tab.offsetWidth;tabcell.style.cssText="";mirror.style.cssText="";UT.borderWidth=(tab.offsetWidth-tmpTabWidth)/3;UT.tabcellSpace=UT.paddingSpace+UT.borderWidth;me.body.removeChild(tab)}getTabcellSpace=function(){return UT.tabcellSpace};return UT.tabcellSpace}function getDragLine(editor,doc){if(mousedown){return}dragLine=editor.document.createElement("div");domUtils.setAttributes(dragLine,{id:"ue_tableDragLine",unselectable:"on",contenteditable:false,onresizestart:"return false",ondragstart:"return false",onselectstart:"return false",style:"background-color:blue;position:absolute;padding:0;margin:0;background-image:none;border:0px none;opacity:0;filter:alpha(opacity=0)"});editor.body.appendChild(dragLine)}function hideDragLine(editor){if(mousedown){return}var line;while(line=editor.document.getElementById("ue_tableDragLine")){domUtils.remove(line)}}function showDragLineAt(state,cell){if(!cell){return}var table=domUtils.findParentByTagName(cell,"table"),caption=table.getElementsByTagName("caption"),width=table.offsetWidth,height=table.offsetHeight-(caption.length>0?caption[0].offsetHeight:0),tablePos=domUtils.getXY(table),cellPos=domUtils.getXY(cell),css;switch(state){case"h":css="height:"+height+"px;top:"+(tablePos.y+(caption.length>0?caption[0].offsetHeight:0))+"px;left:"+(cellPos.x+cell.offsetWidth);dragLine.style.cssText=css+"px;position: absolute;display:block;background-color:blue;width:1px;border:0; color:blue;opacity:.3;filter:alpha(opacity=30)";break;case"v":css="width:"+width+"px;left:"+tablePos.x+"px;top:"+(cellPos.y+cell.offsetHeight);dragLine.style.cssText=css+"px;overflow:hidden;position: absolute;display:block;background-color:blue;height:1px;border:0;color:blue;opacity:.2;filter:alpha(opacity=20)";break;default:}}function switchBorderColor(editor,flag){var tableArr=domUtils.getElementsByTagName(editor.body,"table"),color;for(var i=0,node;node=tableArr[i++];){var td=domUtils.getElementsByTagName(node,"td");if(td[0]){if(flag){color=(td[0].style.borderColor).replace(/\s/g,"");if(/(#ffffff)|(rgb\(255,255,255\))/ig.test(color)){domUtils.addClass(node,"noBorderTable")}}else{domUtils.removeClasses(node,"noBorderTable")}}}}function getTableWidth(editor,needIEHack,defaultValue){var body=editor.body;return body.offsetWidth-(needIEHack?parseInt(domUtils.getComputedStyle(body,"margin-left"),10)*2:0)-defaultValue.tableBorder*2-(editor.options.offsetWidth||0)}function getTargetTd(editor,evt){var target=domUtils.findParentByTagName(evt.target||evt.srcElement,["td","th"],true),dir=null;if(!target){return null}dir=getRelation(target,mouseCoords(evt));if(!target){return null}if(dir==="h1"&&target.previousSibling){var position=domUtils.getXY(target),cellWidth=target.offsetWidth;if(Math.abs(position.x+cellWidth-evt.clientX)>cellWidth/3){target=target.previousSibling}}else{if(dir==="v1"&&target.parentNode.previousSibling){var position=domUtils.getXY(target),cellHeight=target.offsetHeight;if(Math.abs(position.y+cellHeight-evt.clientY)>cellHeight/3){target=target.parentNode.previousSibling.firstChild}}}return target&&!(editor.fireEvent("excludetable",target)===true)?target:null}};UE.UETable.prototype.sortTable=function(sortByCellIndex,compareFn){var table=this.table,rows=table.rows,trArray=[],flag=rows[0].cells[0].tagName==="TH",lastRowIndex=0;if(this.selectedTds.length){var range=this.cellsRange,len=range.endRowIndex+1;for(var i=range.beginRowIndex;i<len;i++){trArray[i]=rows[i]}trArray.splice(0,range.beginRowIndex);lastRowIndex=(range.endRowIndex+1)===this.rowsNum?0:range.endRowIndex+1}else{for(var i=0,len=rows.length;i<len;i++){trArray[i]=rows[i]}}var Fn={reversecurrent:function(td1,td2){return 1},orderbyasc:function(td1,td2){var value1=td1.innerText||td1.textContent,value2=td2.innerText||td2.textContent;return value1.localeCompare(value2)},reversebyasc:function(td1,td2){var value1=td1.innerHTML,value2=td2.innerHTML;return value2.localeCompare(value1)},orderbynum:function(td1,td2){var value1=td1[browser.ie?"innerText":"textContent"].match(/\d+/),value2=td2[browser.ie?"innerText":"textContent"].match(/\d+/);if(value1){value1=+value1[0]}if(value2){value2=+value2[0]}return(value1||0)-(value2||0)},reversebynum:function(td1,td2){var value1=td1[browser.ie?"innerText":"textContent"].match(/\d+/),value2=td2[browser.ie?"innerText":"textContent"].match(/\d+/);if(value1){value1=+value1[0]}if(value2){value2=+value2[0]}return(value2||0)-(value1||0)}};table.setAttribute("data-sort-type",compareFn&&typeof compareFn==="string"&&Fn[compareFn]?compareFn:"");flag&&trArray.splice(0,1);trArray=utils.sort(trArray,function(tr1,tr2){var result;if(compareFn&&typeof compareFn==="function"){result=compareFn.call(this,tr1.cells[sortByCellIndex],tr2.cells[sortByCellIndex])}else{if(compareFn&&typeof compareFn==="number"){result=1}else{if(compareFn&&typeof compareFn==="string"&&Fn[compareFn]){result=Fn[compareFn].call(this,tr1.cells[sortByCellIndex],tr2.cells[sortByCellIndex])}else{result=Fn.orderbyasc.call(this,tr1.cells[sortByCellIndex],tr2.cells[sortByCellIndex])}}}return result});var fragment=table.ownerDocument.createDocumentFragment();for(var j=0,len=trArray.length;j<len;j++){fragment.appendChild(trArray[j])}var tbody=table.getElementsByTagName("tbody")[0];if(!lastRowIndex){tbody.appendChild(fragment)}else{tbody.insertBefore(fragment,rows[lastRowIndex-range.endRowIndex+range.beginRowIndex-1])}};UE.plugins.tablesort=function(){var me=this,UT=UE.UETable,getUETable=function(tdOrTable){return UT.getUETable(tdOrTable)},getTableItemsByRange=function(editor){return UT.getTableItemsByRange(editor)};me.ready(function(){utils.cssRule("tablesort","table.sortEnabled tr.firstRow th,table.sortEnabled tr.firstRow td{padding-right:20px;background-repeat: no-repeat;background-position: center right;   background-image:url("+me.options.themePath+me.options.theme+"/images/sortable.png);}",me.document);me.addListener("afterexeccommand",function(type,cmd){if(cmd=="mergeright"||cmd=="mergedown"||cmd=="mergecells"){this.execCommand("disablesort")}})});UE.commands.sorttable={queryCommandState:function(){var me=this,tableItems=getTableItemsByRange(me);if(!tableItems.cell){return -1}var table=tableItems.table,cells=table.getElementsByTagName("td");for(var i=0,cell;cell=cells[i++];){if(cell.rowSpan!=1||cell.colSpan!=1){return -1}}return 0},execCommand:function(cmd,fn){var me=this,range=me.selection.getRange(),bk=range.createBookmark(true),tableItems=getTableItemsByRange(me),cell=tableItems.cell,ut=getUETable(tableItems.table),cellInfo=ut.getCellInfo(cell);ut.sortTable(cellInfo.cellIndex,fn);range.moveToBookmark(bk);try{range.select()}catch(e){}}};UE.commands.enablesort=UE.commands.disablesort={queryCommandState:function(cmd){var table=getTableItemsByRange(this).table;if(table&&cmd=="enablesort"){var cells=domUtils.getElementsByTagName(table,"th td");for(var i=0;i<cells.length;i++){if(cells[i].getAttribute("colspan")>1||cells[i].getAttribute("rowspan")>1){return -1}}}return !table?-1:cmd=="enablesort"^table.getAttribute("data-sort")!="sortEnabled"?-1:0},execCommand:function(cmd){var table=getTableItemsByRange(this).table;table.setAttribute("data-sort",cmd=="enablesort"?"sortEnabled":"sortDisabled");cmd=="enablesort"?domUtils.addClass(table,"sortEnabled"):domUtils.removeClasses(table,"sortEnabled")}}};UE.plugins.contextmenu=function(){var me=this;me.setOpt("enableContextMenu",true);if(me.getOpt("enableContextMenu")===false){return}var lang=me.getLang("contextMenu"),menu,items=me.options.contextMenu||[{label:lang.selectall,cmdName:"selectall"},{label:lang.cleardoc,cmdName:"cleardoc",exec:function(){if(confirm(lang.confirmclear)){this.execCommand("cleardoc")}}},"-",{label:lang.unlink,cmdName:"unlink"},"-",{group:lang.paragraph,icon:"justifyjustify",subMenu:[{label:lang.justifyleft,cmdName:"justify",value:"left"},{label:lang.justifyright,cmdName:"justify",value:"right"},{label:lang.justifycenter,cmdName:"justify",value:"center"},{label:lang.justifyjustify,cmdName:"justify",value:"justify"}]},"-",{group:lang.table,icon:"table",subMenu:[{label:lang.inserttable,cmdName:"inserttable"},{label:lang.deletetable,cmdName:"deletetable"},"-",{label:lang.deleterow,cmdName:"deleterow"},{label:lang.deletecol,cmdName:"deletecol"},{label:lang.insertcol,cmdName:"insertcol"},{label:lang.insertcolnext,cmdName:"insertcolnext"},{label:lang.insertrow,cmdName:"insertrow"},{label:lang.insertrownext,cmdName:"insertrownext"},"-",{label:lang.insertcaption,cmdName:"insertcaption"},{label:lang.deletecaption,cmdName:"deletecaption"},{label:lang.inserttitle,cmdName:"inserttitle"},{label:lang.deletetitle,cmdName:"deletetitle"},{label:lang.inserttitlecol,cmdName:"inserttitlecol"},{label:lang.deletetitlecol,cmdName:"deletetitlecol"},"-",{label:lang.mergecells,cmdName:"mergecells"},{label:lang.mergeright,cmdName:"mergeright"},{label:lang.mergedown,cmdName:"mergedown"},"-",{label:lang.splittorows,cmdName:"splittorows"},{label:lang.splittocols,cmdName:"splittocols"},{label:lang.splittocells,cmdName:"splittocells"},"-",{label:lang.averageDiseRow,cmdName:"averagedistributerow"},{label:lang.averageDisCol,cmdName:"averagedistributecol"},"-",{label:lang.edittd,cmdName:"edittd",exec:function(){if(UE.ui.edittd){new UE.ui.edittd(this)}this.getDialog("edittd").open()}},{label:lang.edittable,cmdName:"edittable",exec:function(){if(UE.ui.edittable){new UE.ui.edittable(this)}this.getDialog("edittable").open()}},{label:lang.setbordervisible,cmdName:"setbordervisible"}]},{group:lang.tablesort,icon:"tablesort",subMenu:[{label:lang.enablesort,cmdName:"enablesort"},{label:lang.disablesort,cmdName:"disablesort"},"-",{label:lang.reversecurrent,cmdName:"sorttable",value:"reversecurrent"},{label:lang.orderbyasc,cmdName:"sorttable",value:"orderbyasc"},{label:lang.reversebyasc,cmdName:"sorttable",value:"reversebyasc"},{label:lang.orderbynum,cmdName:"sorttable",value:"orderbynum"},{label:lang.reversebynum,cmdName:"sorttable",value:"reversebynum"}]},{group:lang.borderbk,icon:"borderBack",subMenu:[{label:lang.setcolor,cmdName:"interlacetable",exec:function(){this.execCommand("interlacetable")}},{label:lang.unsetcolor,cmdName:"uninterlacetable",exec:function(){this.execCommand("uninterlacetable")}},{label:lang.setbackground,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:true,colorList:["#bbb","#ccc"]})}},{label:lang.unsetbackground,cmdName:"cleartablebackground",exec:function(){this.execCommand("cleartablebackground")}},{label:lang.redandblue,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:true,colorList:["red","blue"]})}},{label:lang.threecolorgradient,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:true,colorList:["#aaa","#bbb","#ccc"]})}}]},{group:lang.aligntd,icon:"aligntd",subMenu:[{cmdName:"cellalignment",value:{align:"left",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"left",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"left",vAlign:"bottom"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"bottom"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"bottom"}}]},{group:lang.aligntable,icon:"aligntable",subMenu:[{cmdName:"tablealignment",className:"left",label:lang.tableleft,value:"left"},{cmdName:"tablealignment",className:"center",label:lang.tablecenter,value:"center"},{cmdName:"tablealignment",className:"right",label:lang.tableright,value:"right"}]},"-",{label:lang.insertparagraphbefore,cmdName:"insertparagraph",value:true},{label:lang.insertparagraphafter,cmdName:"insertparagraph"},{label:lang.copy,cmdName:"copy"},{label:lang.paste,cmdName:"paste"}];if(!items.length){return}var uiUtils=UE.ui.uiUtils;me.addListener("contextmenu",function(type,evt){var offset=uiUtils.getViewportOffsetByEvent(evt);me.fireEvent("beforeselectionchange");if(menu){menu.destroy()}for(var i=0,ti,contextItems=[];ti=items[i];i++){var last;(function(item){if(item=="-"){if((last=contextItems[contextItems.length-1])&&last!=="-"){contextItems.push("-")}}else{if(item.hasOwnProperty("group")){for(var j=0,cj,subMenu=[];cj=item.subMenu[j];j++){(function(subItem){if(subItem=="-"){if((last=subMenu[subMenu.length-1])&&last!=="-"){subMenu.push("-")}else{subMenu.splice(subMenu.length-1)}}else{if((me.commands[subItem.cmdName]||UE.commands[subItem.cmdName]||subItem.query)&&(subItem.query?subItem.query():me.queryCommandState(subItem.cmdName))>-1){subMenu.push({label:subItem.label||me.getLang("contextMenu."+subItem.cmdName+(subItem.value||""))||"",className:"edui-for-"+subItem.cmdName+(subItem.className?(" edui-for-"+subItem.cmdName+"-"+subItem.className):""),onclick:subItem.exec?function(){subItem.exec.call(me)}:function(){me.execCommand(subItem.cmdName,subItem.value)}})}}})(cj)}if(subMenu.length){function getLabel(){switch(item.icon){case"table":return me.getLang("contextMenu.table");case"justifyjustify":return me.getLang("contextMenu.paragraph");case"aligntd":return me.getLang("contextMenu.aligntd");case"aligntable":return me.getLang("contextMenu.aligntable");case"tablesort":return lang.tablesort;case"borderBack":return lang.borderbk;default:return""}}contextItems.push({label:getLabel(),className:"edui-for-"+item.icon,subMenu:{items:subMenu,editor:me}})}}else{if((me.commands[item.cmdName]||UE.commands[item.cmdName]||item.query)&&(item.query?item.query.call(me):me.queryCommandState(item.cmdName))>-1){contextItems.push({label:item.label||me.getLang("contextMenu."+item.cmdName),className:"edui-for-"+(item.icon?item.icon:item.cmdName+(item.value||"")),onclick:item.exec?function(){item.exec.call(me)}:function(){me.execCommand(item.cmdName,item.value)}})}}}})(ti)}if(contextItems[contextItems.length-1]=="-"){contextItems.pop()}menu=new UE.ui.Menu({items:contextItems,className:"edui-contextmenu",editor:me});menu.render();menu.showAt(offset);me.fireEvent("aftershowcontextmenu",menu);domUtils.preventDefault(evt);if(browser.ie){var ieRange;try{ieRange=me.selection.getNative().createRange()}catch(e){return}if(ieRange.item){var range=new dom.Range(me.document);range.selectNode(ieRange.item(0)).select(true,true)}}});me.addListener("aftershowcontextmenu",function(type,menu){if(me.zeroclipboard){var items=menu.items;for(var key in items){if(items[key].className=="edui-for-copy"){me.zeroclipboard.clip(items[key].getDom())}}}})};UE.plugins.shortcutmenu=function(){var me=this,menu,items=me.options.shortcutMenu||[];if(!items.length){return}me.addListener("contextmenu mouseup",function(type,e){var me=this,customEvt={type:type,target:e.target||e.srcElement,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY};setTimeout(function(){var rng=me.selection.getRange();if(rng.collapsed===false||type=="contextmenu"){if(!menu){menu=new baidu.editor.ui.ShortCutMenu({editor:me,items:items,theme:me.options.theme,className:"edui-shortcutmenu"});menu.render();me.fireEvent("afterrendershortcutmenu",menu)}menu.show(customEvt,!!UE.plugins.contextmenu)}});if(type=="contextmenu"){domUtils.preventDefault(e);if(browser.ie9below){var ieRange;try{ieRange=me.selection.getNative().createRange()}catch(e){return}if(ieRange.item){var range=new dom.Range(me.document);range.selectNode(ieRange.item(0)).select(true,true)}}}});me.addListener("keydown",function(type){if(type=="keydown"){menu&&!menu.isHidden&&menu.hide()}})};UE.plugins.basestyle=function(){var basestyles={bold:["strong","b"],italic:["em","i"],subscript:["sub"],superscript:["sup"]},getObj=function(editor,tagNames){return domUtils.filterNodeList(editor.selection.getStartElementPath(),tagNames)},me=this;me.addshortcutkey({Bold:"ctrl+66",Italic:"ctrl+73",Underline:"ctrl+85"});me.addInputRule(function(root){utils.each(root.getNodesByTagName("b i"),function(node){switch(node.tagName){case"b":node.tagName="strong";break;case"i":node.tagName="em"}})});for(var style in basestyles){(function(cmd,tagNames){me.commands[cmd]={execCommand:function(cmdName){var range=me.selection.getRange(),obj=getObj(this,tagNames);if(range.collapsed){if(obj){var tmpText=me.document.createTextNode("");range.insertNode(tmpText).removeInlineStyle(tagNames);range.setStartBefore(tmpText);domUtils.remove(tmpText)}else{var tmpNode=range.document.createElement(tagNames[0]);if(cmdName=="superscript"||cmdName=="subscript"){tmpText=me.document.createTextNode("");range.insertNode(tmpText).removeInlineStyle(["sub","sup"]).setStartBefore(tmpText).collapse(true)}range.insertNode(tmpNode).setStart(tmpNode,0)}range.collapse(true)}else{if(cmdName=="superscript"||cmdName=="subscript"){if(!obj||obj.tagName.toLowerCase()!=cmdName){range.removeInlineStyle(["sub","sup"])}}obj?range.removeInlineStyle(tagNames):range.applyInlineStyle(tagNames[0])}range.select()},queryCommandState:function(){return getObj(this,tagNames)?1:0}}})(style,basestyles[style])}};UE.plugins.elementpath=function(){var currentLevel,tagNames,me=this;me.setOpt("elementPathEnabled",true);if(!me.options.elementPathEnabled){return}me.commands.elementpath={execCommand:function(cmdName,level){var start=tagNames[level],range=me.selection.getRange();currentLevel=level*1;range.selectNode(start).select()},queryCommandValue:function(){var parents=[].concat(this.selection.getStartElementPath()).reverse(),names=[];tagNames=parents;for(var i=0,ci;ci=parents[i];i++){if(ci.nodeType==3){continue}var name=ci.tagName.toLowerCase();if(name=="img"&&ci.getAttribute("anchorname")){name="anchor"}names[i]=name;if(currentLevel==i){currentLevel=-1;break}}return names}}};UE.plugins.formatmatch=function(){var me=this,list=[],img,flag=0;me.addListener("reset",function(){list=[];flag=0});function addList(type,evt){if(browser.webkit){var target=evt.target.tagName=="IMG"?evt.target:null}function addFormat(range){if(text){range.selectNode(text)}return range.applyInlineStyle(list[list.length-1].tagName,null,list)}me.undoManger&&me.undoManger.save();var range=me.selection.getRange(),imgT=target||range.getClosedNode();if(img&&imgT&&imgT.tagName=="IMG"){imgT.style.cssText+=";float:"+(img.style.cssFloat||img.style.styleFloat||"none")+";display:"+(img.style.display||"inline");img=null}else{if(!img){var collapsed=range.collapsed;if(collapsed){var text=me.document.createTextNode("match");range.insertNode(text).select()}me.__hasEnterExecCommand=true;var removeFormatAttributes=me.options.removeFormatAttributes;me.options.removeFormatAttributes="";me.execCommand("removeformat");me.options.removeFormatAttributes=removeFormatAttributes;me.__hasEnterExecCommand=false;range=me.selection.getRange();if(list.length){addFormat(range)}if(text){range.setStartBefore(text).collapse(true)}range.select();text&&domUtils.remove(text)}}me.undoManger&&me.undoManger.save();me.removeListener("mouseup",addList);flag=0}me.commands.formatmatch={execCommand:function(cmdName){if(flag){flag=0;list=[];me.removeListener("mouseup",addList);return}var range=me.selection.getRange();img=range.getClosedNode();if(!img||img.tagName!="IMG"){range.collapse(true).shrinkBoundary();var start=range.startContainer;list=domUtils.findParents(start,true,function(node){return !domUtils.isBlockElm(node)&&node.nodeType==1});for(var i=0,ci;ci=list[i];i++){if(ci.tagName=="A"){list.splice(i,1);break}}}me.addListener("mouseup",addList);flag=1},queryCommandState:function(){return flag},notNeedUndo:1}};UE.plugin.register("searchreplace",function(){var me=this;var _blockElm={table:1,tbody:1,tr:1,ol:1,ul:1};function findTextInString(textContent,opt,currentIndex){var str=opt.searchStr;if(opt.dir==-1){textContent=textContent.split("").reverse().join("");str=str.split("").reverse().join("");currentIndex=textContent.length-currentIndex}var reg=new RegExp(str,"g"+(opt.casesensitive?"":"i")),match;while(match=reg.exec(textContent)){if(match.index>=currentIndex){return opt.dir==-1?textContent.length-match.index-opt.searchStr.length:match.index}}return -1}function findTextBlockElm(node,currentIndex,opt){var textContent,index,methodName=opt.all||opt.dir==1?"getNextDomNode":"getPreDomNode";if(domUtils.isBody(node)){node=node.firstChild}var first=1;while(node){textContent=node.nodeType==3?node.nodeValue:node[browser.ie?"innerText":"textContent"];index=findTextInString(textContent,opt,currentIndex);first=0;if(index!=-1){return{node:node,index:index}}node=domUtils[methodName](node);while(node&&_blockElm[node.nodeName.toLowerCase()]){node=domUtils[methodName](node,true)}if(node){currentIndex=opt.dir==-1?(node.nodeType==3?node.nodeValue:node[browser.ie?"innerText":"textContent"]).length:0}}}function findNTextInBlockElm(node,index,str){var currentIndex=0,currentNode=node.firstChild,currentNodeLength=0,result;while(currentNode){if(currentNode.nodeType==3){currentNodeLength=currentNode.nodeValue.replace(/(^[\t\r\n]+)|([\t\r\n]+$)/,"").length;currentIndex+=currentNodeLength;if(currentIndex>=index){return{node:currentNode,index:currentNodeLength-(currentIndex-index)}}}else{if(!dtd.$empty[currentNode.tagName]){currentNodeLength=currentNode[browser.ie?"innerText":"textContent"].replace(/(^[\t\r\n]+)|([\t\r\n]+$)/,"").length;currentIndex+=currentNodeLength;if(currentIndex>=index){result=findNTextInBlockElm(currentNode,currentNodeLength-(currentIndex-index),str);if(result){return result}}}}currentNode=domUtils.getNextDomNode(currentNode)}}function searchReplace(me,opt){var rng=me.selection.getRange(),startBlockNode,searchStr=opt.searchStr,span=me.document.createElement("span");span.innerHTML="$$ueditor_searchreplace_key$$";rng.shrinkBoundary(true);if(!rng.collapsed){rng.select();var rngText=me.selection.getText();if(new RegExp("^"+opt.searchStr+"$",(opt.casesensitive?"":"i")).test(rngText)){if(opt.replaceStr!=undefined){replaceText(rng,opt.replaceStr);rng.select();return true}else{rng.collapse(opt.dir==-1)}}}rng.insertNode(span);rng.enlargeToBlockElm(true);startBlockNode=rng.startContainer;var currentIndex=startBlockNode[browser.ie?"innerText":"textContent"].indexOf("$$ueditor_searchreplace_key$$");rng.setStartBefore(span);domUtils.remove(span);var result=findTextBlockElm(startBlockNode,currentIndex,opt);if(result){var rngStart=findNTextInBlockElm(result.node,result.index,searchStr);var rngEnd=findNTextInBlockElm(result.node,result.index+searchStr.length,searchStr);rng.setStart(rngStart.node,rngStart.index).setEnd(rngEnd.node,rngEnd.index);if(opt.replaceStr!==undefined){replaceText(rng,opt.replaceStr)}rng.select();return true}else{rng.setCursor()}}function replaceText(rng,str){str=me.document.createTextNode(str);rng.deleteContents().insertNode(str)}return{commands:{searchreplace:{execCommand:function(cmdName,opt){utils.extend(opt,{all:false,casesensitive:false,dir:1},true);var num=0;if(opt.all){var rng=me.selection.getRange(),first=me.body.firstChild;if(first&&first.nodeType==1){rng.setStart(first,0);rng.shrinkBoundary(true)}else{if(first.nodeType==3){rng.setStartBefore(first)}}rng.collapse(true).select(true);if(opt.replaceStr!==undefined){me.fireEvent("saveScene")}while(searchReplace(this,opt)){num++}if(num){me.fireEvent("saveScene")}}else{if(opt.replaceStr!==undefined){me.fireEvent("saveScene")}if(searchReplace(this,opt)){num++}if(num){me.fireEvent("saveScene")}}return num},notNeedUndo:1}}}});UE.plugins.customstyle=function(){var me=this;me.setOpt({customstyle:[{tag:"h1",name:"tc",style:"font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:center;margin:0 0 20px 0;"},{tag:"h1",name:"tl",style:"font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:left;margin:0 0 10px 0;"},{tag:"span",name:"im",style:"font-size:16px;font-style:italic;font-weight:bold;line-height:18px;"},{tag:"span",name:"hi",style:"font-size:16px;font-style:italic;font-weight:bold;color:rgb(51, 153, 204);line-height:18px;"}]});me.commands.customstyle={execCommand:function(cmdName,obj){var me=this,tagName=obj.tag,node=domUtils.findParent(me.selection.getStart(),function(node){return node.getAttribute("label")},true),range,bk,tmpObj={};for(var p in obj){if(obj[p]!==undefined){tmpObj[p]=obj[p]}}delete tmpObj.tag;if(node&&node.getAttribute("label")==obj.label){range=this.selection.getRange();bk=range.createBookmark();if(range.collapsed){if(dtd.$block[node.tagName]){var fillNode=me.document.createElement("p");domUtils.moveChild(node,fillNode);node.parentNode.insertBefore(fillNode,node);domUtils.remove(node)}else{domUtils.remove(node,true)}}else{var common=domUtils.getCommonAncestor(bk.start,bk.end),nodes=domUtils.getElementsByTagName(common,tagName);if(new RegExp(tagName,"i").test(common.tagName)){nodes.push(common)}for(var i=0,ni;ni=nodes[i++];){if(ni.getAttribute("label")==obj.label){var ps=domUtils.getPosition(ni,bk.start),pe=domUtils.getPosition(ni,bk.end);if((ps&domUtils.POSITION_FOLLOWING||ps&domUtils.POSITION_CONTAINS)&&(pe&domUtils.POSITION_PRECEDING||pe&domUtils.POSITION_CONTAINS)){if(dtd.$block[tagName]){var fillNode=me.document.createElement("p");domUtils.moveChild(ni,fillNode);ni.parentNode.insertBefore(fillNode,ni)}}domUtils.remove(ni,true)}}node=domUtils.findParent(common,function(node){return node.getAttribute("label")==obj.label},true);if(node){domUtils.remove(node,true)}}range.moveToBookmark(bk).select()}else{if(dtd.$block[tagName]){this.execCommand("paragraph",tagName,tmpObj,"customstyle");range=me.selection.getRange();if(!range.collapsed){range.collapse();node=domUtils.findParent(me.selection.getStart(),function(node){return node.getAttribute("label")==obj.label},true);var pNode=me.document.createElement("p");domUtils.insertAfter(node,pNode);domUtils.fillNode(me.document,pNode);range.setStart(pNode,0).setCursor()}}else{range=me.selection.getRange();if(range.collapsed){node=me.document.createElement(tagName);domUtils.setAttributes(node,tmpObj);range.insertNode(node).setStart(node,0).setCursor();return}bk=range.createBookmark();range.applyInlineStyle(tagName,tmpObj).moveToBookmark(bk).select()}}},queryCommandValue:function(){var parent=domUtils.filterNodeList(this.selection.getStartElementPath(),function(node){return node.getAttribute("label")});return parent?parent.getAttribute("label"):""}};me.addListener("keyup",function(type,evt){var keyCode=evt.keyCode||evt.which;if(keyCode==32||keyCode==13){var range=me.selection.getRange();if(range.collapsed){var node=domUtils.findParent(me.selection.getStart(),function(node){return node.getAttribute("label")},true);if(node&&dtd.$block[node.tagName]&&domUtils.isEmptyNode(node)){var p=me.document.createElement("p");domUtils.insertAfter(node,p);domUtils.fillNode(me.document,p);domUtils.remove(node);range.setStart(p,0).setCursor()}}}})};UE.plugins.catchremoteimage=function(){var me=this,ajax=UE.ajax;if(me.options.catchRemoteImageEnable===false){return}me.setOpt({catchRemoteImageEnable:false});me.addListener("afterpaste",function(){me.fireEvent("catchRemoteImage")});me.addListener("catchRemoteImage",function(){var catcherLocalDomain=me.getOpt("catcherLocalDomain"),catcherActionUrl=me.getActionUrl(me.getOpt("catcherActionName")),catcherUrlPrefix=me.getOpt("catcherUrlPrefix"),catcherFieldName=me.getOpt("catcherFieldName");var remoteImages=[],imgs=domUtils.getElementsByTagName(me.document,"img"),test=function(src,urls){if(src.indexOf(location.host)!=-1||/(^\.)|(^\/)/.test(src)){return true}if(urls){for(var j=0,url;url=urls[j++];){if(src.indexOf(url)!==-1){return true}}}return false};for(var i=0,ci;ci=imgs[i++];){if(ci.getAttribute("word_img")){continue}var src=ci.getAttribute("_src")||ci.src||"";if(/^(https?|ftp):/i.test(src)&&!test(src,catcherLocalDomain)){remoteImages.push(src)}}if(remoteImages.length){catchremoteimage(remoteImages,{success:function(r){try{var info=r.state!==undefined?r:eval("("+r.responseText+")")}catch(e){return}var i,j,ci,cj,oldSrc,newSrc,list=info.list;for(i=0;ci=imgs[i++];){oldSrc=ci.getAttribute("_src")||ci.src||"";for(j=0;cj=list[j++];){if(oldSrc==cj.source&&cj.state=="SUCCESS"){newSrc=catcherUrlPrefix+cj.url;domUtils.setAttributes(ci,{src:newSrc,_src:newSrc});break}}}me.fireEvent("catchremotesuccess")},error:function(){me.fireEvent("catchremoteerror")}})}function catchremoteimage(imgs,callbacks){var params=utils.serializeParam(me.queryCommandValue("serverparam"))||"",url=utils.formatUrl(catcherActionUrl+(catcherActionUrl.indexOf("?")==-1?"?":"&")+params),isJsonp=utils.isCrossDomainUrl(url),opt={method:"POST",dataType:isJsonp?"jsonp":"",timeout:60000,onsuccess:callbacks.success,onerror:callbacks.error};opt[catcherFieldName]=imgs;ajax.request(url,opt)}})};UE.plugin.register("snapscreen",function(){var me=this;var snapplugin;function getLocation(url){var search,a=document.createElement("a"),params=utils.serializeParam(me.queryCommandValue("serverparam"))||"";a.href=url;if(browser.ie){a.href=a.href}search=a.search;if(params){search=search+(search.indexOf("?")==-1?"?":"&")+params;search=search.replace(/[&]+/ig,"&")}return{port:a.port,hostname:a.hostname,path:a.pathname+search||+a.hash}}return{commands:{snapscreen:{execCommand:function(cmd){var url,local,res;var lang=me.getLang("snapScreen_plugin");if(!snapplugin){var container=me.container;var doc=me.container.ownerDocument||me.container.document;snapplugin=doc.createElement("object");try{snapplugin.type="application/x-pluginbaidusnap"}catch(e){return}snapplugin.style.cssText="position:absolute;left:-9999px;width:0;height:0;";snapplugin.setAttribute("width","0");snapplugin.setAttribute("height","0");container.appendChild(snapplugin)}function onSuccess(rs){try{rs=eval("("+rs+")");if(rs.state=="SUCCESS"){var opt=me.options;me.execCommand("insertimage",{src:opt.snapscreenUrlPrefix+rs.url,_src:opt.snapscreenUrlPrefix+rs.url,alt:rs.title||"",floatStyle:opt.snapscreenImgAlign})}else{alert(rs.state)}}catch(e){alert(lang.callBackErrorMsg)}}url=me.getActionUrl(me.getOpt("snapscreenActionName"));local=getLocation(url);setTimeout(function(){try{res=snapplugin.saveSnapshot(local.hostname,local.path,local.port)}catch(e){me.ui._dialogs.snapscreenDialog.open();return}onSuccess(res)},50)},queryCommandState:function(){return(navigator.userAgent.indexOf("Windows",0)!=-1)?0:-1}}}}});UE.commands.insertparagraph={execCommand:function(cmdName,front){var me=this,range=me.selection.getRange(),start=range.startContainer,tmpNode;while(start){if(domUtils.isBody(start)){break}tmpNode=start;start=start.parentNode}if(tmpNode){var p=me.document.createElement("p");if(front){tmpNode.parentNode.insertBefore(p,tmpNode)}else{tmpNode.parentNode.insertBefore(p,tmpNode.nextSibling)}domUtils.fillNode(me.document,p);range.setStart(p,0).setCursor(false,true)}}};UE.plugin.register("webapp",function(){var me=this;function createInsertStr(obj,toEmbed){return !toEmbed?'<img title="'+obj.title+'" width="'+obj.width+'" height="'+obj.height+'" src="'+me.options.UEDITOR_HOME_URL+'themes/default/images/spacer.gif" _logo_url="'+obj.logo+'" style="background:url('+obj.logo+') no-repeat center center; border:1px solid gray;" class="edui-faked-webapp" _url="'+obj.url+'" '+(obj.align&&!obj.cssfloat?'align="'+obj.align+'"':"")+(obj.cssfloat?'style="float:'+obj.cssfloat+'"':"")+"/>":'<iframe class="edui-faked-webapp" title="'+obj.title+'" '+(obj.align&&!obj.cssfloat?'align="'+obj.align+'"':"")+(obj.cssfloat?'style="float:'+obj.cssfloat+'"':"")+'width="'+obj.width+'" height="'+obj.height+'"  scrolling="no" frameborder="0" src="'+obj.url+'" logo_url = "'+obj.logo+'"></iframe>'}return{outputRule:function(root){utils.each(root.getNodesByTagName("img"),function(node){var html;if(node.getAttr("class")=="edui-faked-webapp"){html=createInsertStr({title:node.getAttr("title"),width:node.getAttr("width"),height:node.getAttr("height"),align:node.getAttr("align"),cssfloat:node.getStyle("float"),url:node.getAttr("_url"),logo:node.getAttr("_logo_url")},true);var embed=UE.uNode.createElement(html);node.parentNode.replaceChild(embed,node)}})},inputRule:function(root){utils.each(root.getNodesByTagName("iframe"),function(node){if(node.getAttr("class")=="edui-faked-webapp"){var img=UE.uNode.createElement(createInsertStr({title:node.getAttr("title"),width:node.getAttr("width"),height:node.getAttr("height"),align:node.getAttr("align"),cssfloat:node.getStyle("float"),url:node.getAttr("src"),logo:node.getAttr("logo_url")}));node.parentNode.replaceChild(img,node)}})},commands:{webapp:{execCommand:function(cmd,obj){var me=this,str=createInsertStr(utils.extend(obj,{align:"none"}),false);me.execCommand("inserthtml",str)},queryCommandState:function(){var me=this,img=me.selection.getRange().getClosedNode(),flag=img&&(img.className=="edui-faked-webapp");return flag?1:0}}}}});UE.plugins.template=function(){UE.commands.template={execCommand:function(cmd,obj){obj.html&&this.execCommand("inserthtml",obj.html)}};this.addListener("click",function(type,evt){var el=evt.target||evt.srcElement,range=this.selection.getRange();var tnode=domUtils.findParent(el,function(node){if(node.className&&domUtils.hasClass(node,"ue_t")){return node}},true);tnode&&range.selectNode(tnode).shrinkBoundary().select()});this.addListener("keydown",function(type,evt){var range=this.selection.getRange();if(!range.collapsed){if(!evt.ctrlKey&&!evt.metaKey&&!evt.shiftKey&&!evt.altKey){var tnode=domUtils.findParent(range.startContainer,function(node){if(node.className&&domUtils.hasClass(node,"ue_t")){return node}},true);if(tnode){domUtils.removeClasses(tnode,["ue_t"])}}}})};UE.plugin.register("music",function(){var me=this;function creatInsertStr(url,width,height,align,cssfloat,toEmbed){return !toEmbed?"<img "+(align&&!cssfloat?'align="'+align+'"':"")+(cssfloat?'style="float:'+cssfloat+'"':"")+' width="'+width+'" height="'+height+'" _url="'+url+'" class="edui-faked-music" src="'+me.options.langPath+me.options.lang+'/images/music.png" />':'<embed type="application/x-shockwave-flash" class="edui-faked-music" pluginspage="http://www.macromedia.com/go/getflashplayer" src="'+url+'" width="'+width+'" height="'+height+'" '+(align&&!cssfloat?'align="'+align+'"':"")+(cssfloat?'style="float:'+cssfloat+'"':"")+' wmode="transparent" play="true" loop="false" menu="false" allowscriptaccess="never" allowfullscreen="true" >'}return{outputRule:function(root){utils.each(root.getNodesByTagName("img"),function(node){var html;if(node.getAttr("class")=="edui-faked-music"){var cssfloat=node.getStyle("float");var align=node.getAttr("align");html=creatInsertStr(node.getAttr("_url"),node.getAttr("width"),node.getAttr("height"),align,cssfloat,true);var embed=UE.uNode.createElement(html);node.parentNode.replaceChild(embed,node)}})},inputRule:function(root){utils.each(root.getNodesByTagName("embed"),function(node){if(node.getAttr("class")=="edui-faked-music"){var cssfloat=node.getStyle("float");var align=node.getAttr("align");html=creatInsertStr(node.getAttr("src"),node.getAttr("width"),node.getAttr("height"),align,cssfloat,true);var img=UE.uNode.createElement(html);node.parentNode.replaceChild(img,node)}})},commands:{music:{execCommand:function(cmd,musicObj){var me=this,str=creatInsertStr(musicObj.url,musicObj.width||400,musicObj.height||95,"none",false,true);me.execCommand("inserthtml",str)},queryCommandState:function(){var me=this,img=me.selection.getRange().getClosedNode(),flag=img&&(img.className=="edui-faked-music");return flag?1:0}}}}});UE.plugin.register("autoupload",function(){function sendAndInsertFile(file,editor){var me=editor;var fieldName,urlPrefix,maxSize,allowFiles,actionUrl,loadingHtml,errorHandler,successHandler,filetype=/image\/\w+/i.test(file.type)?"image":"file",loadingId="loading_"+(+new Date()).toString(36);fieldName=me.getOpt(filetype+"FieldName");urlPrefix=me.getOpt(filetype+"UrlPrefix");maxSize=me.getOpt(filetype+"MaxSize");allowFiles=me.getOpt(filetype+"AllowFiles");actionUrl=me.getActionUrl(me.getOpt(filetype+"ActionName"));errorHandler=function(title){var loader=me.document.getElementById(loadingId);loader&&domUtils.remove(loader);me.fireEvent("showmessage",{id:loadingId,content:title,type:"error",timeout:4000})};if(filetype=="image"){loadingHtml='<img class="loadingclass" id="'+loadingId+'" src="'+me.options.themePath+me.options.theme+'/images/spacer.gif" title="'+(me.getLang("autoupload.loading")||"")+'" >';successHandler=function(data){var link=urlPrefix+data.url,loader=me.document.getElementById(loadingId);if(loader){loader.setAttribute("src",link);loader.setAttribute("_src",link);loader.setAttribute("title",data.title||"");loader.setAttribute("alt",data.original||"");loader.removeAttribute("id");domUtils.removeClasses(loader,"loadingclass")}}}else{loadingHtml='<p><img class="loadingclass" id="'+loadingId+'" src="'+me.options.themePath+me.options.theme+'/images/spacer.gif" title="'+(me.getLang("autoupload.loading")||"")+'" ></p>';successHandler=function(data){var link=urlPrefix+data.url,loader=me.document.getElementById(loadingId);var rng=me.selection.getRange(),bk=rng.createBookmark();rng.selectNode(loader).select();me.execCommand("insertfile",{url:link});rng.moveToBookmark(bk).select()}}me.execCommand("inserthtml",loadingHtml);if(!me.getOpt(filetype+"ActionName")){errorHandler(me.getLang("autoupload.errorLoadConfig"));return}if(file.size>maxSize){errorHandler(me.getLang("autoupload.exceedSizeError"));return}var fileext=file.name?file.name.substr(file.name.lastIndexOf(".")):"";if((fileext&&filetype!="image")||(allowFiles&&(allowFiles.join("")+".").indexOf(fileext.toLowerCase()+".")==-1)){errorHandler(me.getLang("autoupload.exceedTypeError"));return}var xhr=new XMLHttpRequest(),fd=new FormData(),params=utils.serializeParam(me.queryCommandValue("serverparam"))||"",url=utils.formatUrl(actionUrl+(actionUrl.indexOf("?")==-1?"?":"&")+params);fd.append(fieldName,file,file.name||("blob."+file.type.substr("image/".length)));fd.append("type","ajax");xhr.open("post",url,true);xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");xhr.addEventListener("load",function(e){try{var json=(new Function("return "+utils.trim(e.target.response)))();if(json.state=="SUCCESS"&&json.url){successHandler(json)}else{errorHandler(json.state)}}catch(er){errorHandler(me.getLang("autoupload.loadError"))}});xhr.send(fd)}function getPasteImage(e){return e.clipboardData&&e.clipboardData.items&&e.clipboardData.items.length==1&&/^image\//.test(e.clipboardData.items[0].type)?e.clipboardData.items:null}function getDropImage(e){return e.dataTransfer&&e.dataTransfer.files?e.dataTransfer.files:null}return{outputRule:function(root){utils.each(root.getNodesByTagName("img"),function(n){if(/\b(loaderrorclass)|(bloaderrorclass)\b/.test(n.getAttr("class"))){n.parentNode.removeChild(n)}});utils.each(root.getNodesByTagName("p"),function(n){if(/\bloadpara\b/.test(n.getAttr("class"))){n.parentNode.removeChild(n)}})},bindEvents:{ready:function(e){var me=this;if(window.FormData&&window.FileReader){domUtils.on(me.body,"paste drop",function(e){var hasImg=false,items;items=e.type=="paste"?getPasteImage(e):getDropImage(e);if(items){var len=items.length,file;while(len--){file=items[len];if(file.getAsFile){file=file.getAsFile()}if(file&&file.size>0){sendAndInsertFile(file,me);hasImg=true}}hasImg&&e.preventDefault()}});domUtils.on(me.body,"dragover",function(e){if(e.dataTransfer.types[0]=="Files"){e.preventDefault()}});utils.cssRule("loading",".loadingclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loading.gif') no-repeat center center transparent;border:1px solid #cccccc;margin-left:1px;height: 22px;width: 22px;}\n.loaderrorclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loaderror.png') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}",this.document)}}}}});UE.plugin.register("autosave",function(){var me=this,lastSaveTime=new Date(),MIN_TIME=20,saveKey=null;function save(editor){var saveData;if(new Date()-lastSaveTime<MIN_TIME){return}if(!editor.hasContents()){saveKey&&me.removePreferences(saveKey);return}lastSaveTime=new Date();editor._saveFlag=null;saveData=me.body.innerHTML;if(editor.fireEvent("beforeautosave",{content:saveData})===false){return}me.setPreferences(saveKey,saveData);editor.fireEvent("afterautosave",{content:saveData})}return{defaultOptions:{saveInterval:500},bindEvents:{ready:function(){var _suffix="-drafts-data",key=null;if(me.key){key=me.key+_suffix}else{key=(me.container.parentNode.id||"ue-common")+_suffix}saveKey=(location.protocol+location.host+location.pathname).replace(/[.:\/]/g,"_")+key},contentchange:function(){if(!saveKey){return}if(me._saveFlag){window.clearTimeout(me._saveFlag)}if(me.options.saveInterval>0){me._saveFlag=window.setTimeout(function(){save(me)},me.options.saveInterval)}else{save(me)}}},commands:{clearlocaldata:{execCommand:function(cmd,name){if(saveKey&&me.getPreferences(saveKey)){me.removePreferences(saveKey)}},notNeedUndo:true,ignoreContentChange:true},getlocaldata:{execCommand:function(cmd,name){return saveKey?me.getPreferences(saveKey)||"":""},notNeedUndo:true,ignoreContentChange:true},drafts:{execCommand:function(cmd,name){if(saveKey){me.body.innerHTML=me.getPreferences(saveKey)||"<p>"+domUtils.fillHtml+"</p>";me.focus(true)}},queryCommandState:function(){return saveKey?(me.getPreferences(saveKey)===null?-1:0):-1},notNeedUndo:true,ignoreContentChange:true}}}});UE.plugin.register("charts",function(){var me=this;return{bindEvents:{chartserror:function(){}},commands:{charts:{execCommand:function(cmd,data){var tableNode=domUtils.findParentByTagName(this.selection.getRange().startContainer,"table",true),flagText=[],config={};if(!tableNode){return false}if(!validData(tableNode)){me.fireEvent("chartserror");return false}config.title=data.title||"";config.subTitle=data.subTitle||"";config.xTitle=data.xTitle||"";config.yTitle=data.yTitle||"";config.suffix=data.suffix||"";config.tip=data.tip||"";config.dataFormat=data.tableDataFormat||"";config.chartType=data.chartType||0;for(var key in config){if(!config.hasOwnProperty(key)){continue}flagText.push(key+":"+config[key])}tableNode.setAttribute("data-chart",flagText.join(";"));domUtils.addClass(tableNode,"edui-charts-table")},queryCommandState:function(cmd,name){var tableNode=domUtils.findParentByTagName(this.selection.getRange().startContainer,"table",true);return tableNode&&validData(tableNode)?0:-1}}},inputRule:function(root){utils.each(root.getNodesByTagName("table"),function(tableNode){if(tableNode.getAttr("data-chart")!==undefined){tableNode.setAttr("style")}})},outputRule:function(root){utils.each(root.getNodesByTagName("table"),function(tableNode){if(tableNode.getAttr("data-chart")!==undefined){tableNode.setAttr("style","display: none;")}})}};function validData(table){var firstRows=null,cellCount=0;if(table.rows.length<2){return false}if(table.rows[0].cells.length<2){return false}firstRows=table.rows[0].cells;cellCount=firstRows.length;for(var i=0,cell;cell=firstRows[i];i++){if(cell.tagName.toLowerCase()!=="th"){return false}}for(var i=1,row;row=table.rows[i];i++){if(row.cells.length!=cellCount){return false}if(row.cells[0].tagName.toLowerCase()!=="th"){return false}for(var j=1,cell;cell=row.cells[j];j++){var value=utils.trim((cell.innerText||cell.textContent||""));value=value.replace(new RegExp(UE.dom.domUtils.fillChar,"g"),"").replace(/^\s+|\s+$/g,"");if(!/^\d*\.?\d+$/.test(value)){return false}}}return true}});UE.plugin.register("section",function(){function Section(option){this.tag="";this.level=-1,this.dom=null;this.nextSection=null;this.previousSection=null;this.parentSection=null;this.startAddress=[];this.endAddress=[];this.children=[]}function getSection(option){var section=new Section();return utils.extend(section,option)}function getNodeFromAddress(startAddress,root){var current=root;for(var i=0;i<startAddress.length;i++){if(!current.childNodes){return null}current=current.childNodes[startAddress[i]]}return current}var me=this;return{bindMultiEvents:{type:"aftersetcontent afterscencerestore",handler:function(){me.fireEvent("updateSections")}},bindEvents:{ready:function(){me.fireEvent("updateSections");domUtils.on(me.body,"drop paste",function(){me.fireEvent("updateSections")})},afterexeccommand:function(type,cmd){if(cmd=="paragraph"){me.fireEvent("updateSections")}},keyup:function(type,e){var me=this,range=me.selection.getRange();if(range.collapsed!=true){me.fireEvent("updateSections")}else{var keyCode=e.keyCode||e.which;if(keyCode==13||keyCode==8||keyCode==46){me.fireEvent("updateSections")}}}},commands:{getsections:{execCommand:function(cmd,levels){var levelFn=levels||["h1","h2","h3","h4","h5","h6"];for(var i=0;i<levelFn.length;i++){if(typeof levelFn[i]=="string"){levelFn[i]=function(fn){return function(node){return node.tagName==fn.toUpperCase()}}(levelFn[i])}else{if(typeof levelFn[i]!="function"){levelFn[i]=function(node){return null}}}}function getSectionLevel(node){for(var i=0;i<levelFn.length;i++){if(levelFn[i](node)){return i}}return -1}var me=this,Directory=getSection({level:-1,title:"root"}),previous=Directory;function traversal(node,Directory){var level,tmpSection=null,parent,child,children=node.childNodes;for(var i=0,len=children.length;i<len;i++){child=children[i];level=getSectionLevel(child);if(level>=0){var address=me.selection.getRange().selectNode(child).createAddress(true).startAddress,current=getSection({tag:child.tagName,title:child.innerText||child.textContent||"",level:level,dom:child,startAddress:utils.clone(address,[]),endAddress:utils.clone(address,[]),children:[]});previous.nextSection=current;current.previousSection=previous;parent=previous;while(level<=parent.level){parent=parent.parentSection}current.parentSection=parent;parent.children.push(current);tmpSection=previous=current}else{child.nodeType===1&&traversal(child,Directory);tmpSection&&tmpSection.endAddress[tmpSection.endAddress.length-1]++}}}traversal(me.body,Directory);return Directory},notNeedUndo:true},movesection:{execCommand:function(cmd,sourceSection,targetSection,isAfter){var me=this,targetAddress,target;if(!sourceSection||!targetSection||targetSection.level==-1){return}targetAddress=isAfter?targetSection.endAddress:targetSection.startAddress;target=getNodeFromAddress(targetAddress,me.body);if(!targetAddress||!target||isContainsAddress(sourceSection.startAddress,sourceSection.endAddress,targetAddress)){return}var startNode=getNodeFromAddress(sourceSection.startAddress,me.body),endNode=getNodeFromAddress(sourceSection.endAddress,me.body),current,nextNode;if(isAfter){current=endNode;while(current&&!(domUtils.getPosition(startNode,current)&domUtils.POSITION_FOLLOWING)){nextNode=current.previousSibling;domUtils.insertAfter(target,current);if(current==startNode){break}current=nextNode}}else{current=startNode;while(current&&!(domUtils.getPosition(current,endNode)&domUtils.POSITION_FOLLOWING)){nextNode=current.nextSibling;target.parentNode.insertBefore(current,target);if(current==endNode){break}current=nextNode}}me.fireEvent("updateSections");function isContainsAddress(startAddress,endAddress,addressTarget){var isAfterStartAddress=false,isBeforeEndAddress=false;for(var i=0;i<startAddress.length;i++){if(i>=addressTarget.length){break}if(addressTarget[i]>startAddress[i]){isAfterStartAddress=true;break}else{if(addressTarget[i]<startAddress[i]){break}}}for(var i=0;i<endAddress.length;i++){if(i>=addressTarget.length){break}if(addressTarget[i]<startAddress[i]){isBeforeEndAddress=true;break}else{if(addressTarget[i]>startAddress[i]){break}}}return isAfterStartAddress&&isBeforeEndAddress}}},deletesection:{execCommand:function(cmd,section,keepChildren){var me=this;if(!section){return}function getNodeFromAddress(startAddress){var current=me.body;for(var i=0;i<startAddress.length;i++){if(!current.childNodes){return null}current=current.childNodes[startAddress[i]]}return current}var startNode=getNodeFromAddress(section.startAddress),endNode=getNodeFromAddress(section.endAddress),current=startNode,nextNode;if(!keepChildren){while(current&&domUtils.inDoc(endNode,me.document)&&!(domUtils.getPosition(current,endNode)&domUtils.POSITION_FOLLOWING)){nextNode=current.nextSibling;domUtils.remove(current);current=nextNode}}else{domUtils.remove(current)}me.fireEvent("updateSections")}},selectsection:{execCommand:function(cmd,section){if(!section&&!section.dom){return false}var me=this,range=me.selection.getRange(),address={startAddress:utils.clone(section.startAddress,[]),endAddress:utils.clone(section.endAddress,[])};address.endAddress[address.endAddress.length-1]++;range.moveToAddress(address).select().scrollToView();return true},notNeedUndo:true},scrolltosection:{execCommand:function(cmd,section){if(!section&&!section.dom){return false}var me=this,range=me.selection.getRange(),address={startAddress:section.startAddress,endAddress:section.endAddress};address.endAddress[address.endAddress.length-1]++;range.moveToAddress(address).scrollToView();return true},notNeedUndo:true}}}});UE.plugin.register("simpleupload",function(){var me=this,isLoaded=false,containerBtn;function initUploadBtn(){var w=containerBtn.offsetWidth||20,h=containerBtn.offsetHeight||20,btnIframe=document.createElement("iframe"),btnStyle="display:block;width:"+w+"px;height:"+h+"px;overflow:hidden;border:0;margin:0;padding:0;position:absolute;top:0;left:0;filter:alpha(opacity=0);-moz-opacity:0;-khtml-opacity: 0;opacity: 0;cursor:pointer;";domUtils.on(btnIframe,"load",function(){var timestrap=(+new Date()).toString(36),wrapper,btnIframeDoc,btnIframeBody;btnIframeDoc=(btnIframe.contentDocument||btnIframe.contentWindow.document);btnIframeBody=btnIframeDoc.body;wrapper=btnIframeDoc.createElement("div");wrapper.innerHTML='<form id="edui_form_'+timestrap+'" target="edui_iframe_'+timestrap+'" method="POST" enctype="multipart/form-data" action="'+me.getOpt("serverUrl")+'" style="'+btnStyle+'"><input id="edui_input_'+timestrap+'" type="file" accept="image/*" name="'+me.options.imageFieldName+'" style="'+btnStyle+'"></form><iframe id="edui_iframe_'+timestrap+'" name="edui_iframe_'+timestrap+'" style="display:none;width:0;height:0;border:0;margin:0;padding:0;position:absolute;"></iframe>';wrapper.className="edui-"+me.options.theme;wrapper.id=me.ui.id+"_iframeupload";btnIframeBody.style.cssText=btnStyle;btnIframeBody.style.width=w+"px";btnIframeBody.style.height=h+"px";btnIframeBody.appendChild(wrapper);if(btnIframeBody.parentNode){btnIframeBody.parentNode.style.width=w+"px";btnIframeBody.parentNode.style.height=w+"px"}var form=btnIframeDoc.getElementById("edui_form_"+timestrap);var input=btnIframeDoc.getElementById("edui_input_"+timestrap);var iframe=btnIframeDoc.getElementById("edui_iframe_"+timestrap);domUtils.on(input,"change",function(){if(!input.value){return}var loadingId="loading_"+(+new Date()).toString(36);var params=utils.serializeParam(me.queryCommandValue("serverparam"))||"";var imageActionUrl=me.getActionUrl(me.getOpt("imageActionName"));var allowFiles=me.getOpt("imageAllowFiles");me.focus();me.execCommand("inserthtml",'<img class="loadingclass" id="'+loadingId+'" src="'+me.options.themePath+me.options.theme+'/images/spacer.gif" title="'+(me.getLang("simpleupload.loading")||"")+'" >');function callback(){try{var link,json,loader,body=(iframe.contentDocument||iframe.contentWindow.document).body,result=body.innerText||body.textContent||"";json=(new Function("return "+result))();link=me.options.imageUrlPrefix+json.url;if(json.state=="SUCCESS"&&json.url){loader=me.document.getElementById(loadingId);loader.setAttribute("src",link);loader.setAttribute("_src",link);loader.setAttribute("title",json.title||"");loader.setAttribute("alt",json.original||"");loader.removeAttribute("id");domUtils.removeClasses(loader,"loadingclass")}else{showErrorLoader&&showErrorLoader(json.state)}}catch(er){showErrorLoader&&showErrorLoader(me.getLang("simpleupload.loadError"))}form.reset();domUtils.un(iframe,"load",callback)}function showErrorLoader(title){if(loadingId){var loader=me.document.getElementById(loadingId);loader&&domUtils.remove(loader);me.fireEvent("showmessage",{id:loadingId,content:title,type:"error",timeout:4000})}}if(!me.getOpt("imageActionName")){errorHandler(me.getLang("autoupload.errorLoadConfig"));return}var filename=input.value,fileext=filename?filename.substr(filename.lastIndexOf(".")):"";if(!fileext||(allowFiles&&(allowFiles.join("")+".").indexOf(fileext.toLowerCase()+".")==-1)){showErrorLoader(me.getLang("simpleupload.exceedTypeError"));return}domUtils.on(iframe,"load",callback);form.action=utils.formatUrl(imageActionUrl+(imageActionUrl.indexOf("?")==-1?"?":"&")+params);form.submit()});var stateTimer;me.addListener("selectionchange",function(){clearTimeout(stateTimer);stateTimer=setTimeout(function(){var state=me.queryCommandState("simpleupload");if(state==-1){input.disabled="disabled"}else{input.disabled=false}},400)});isLoaded=true});btnIframe.style.cssText=btnStyle;containerBtn.appendChild(btnIframe)}return{bindEvents:{ready:function(){utils.cssRule("loading",".loadingclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loading.gif') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}\n.loaderrorclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loaderror.png') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}",this.document)},simpleuploadbtnready:function(type,container){containerBtn=container;me.afterConfigReady(initUploadBtn)}},outputRule:function(root){utils.each(root.getNodesByTagName("img"),function(n){if(/\b(loaderrorclass)|(bloaderrorclass)\b/.test(n.getAttr("class"))){n.parentNode.removeChild(n)}})},commands:{simpleupload:{queryCommandState:function(){return isLoaded?0:-1}}}}});UE.plugin.register("serverparam",function(){var me=this,serverParam={};return{commands:{serverparam:{execCommand:function(cmd,key,value){if(key===undefined||key===null){serverParam={}}else{if(utils.isString(key)){if(value===undefined||value===null){delete serverParam[key]}else{serverParam[key]=value}}else{if(utils.isObject(key)){utils.extend(serverParam,key,true)}else{if(utils.isFunction(key)){utils.extend(serverParam,key(),true)}}}}},queryCommandValue:function(){return serverParam||{}}}}}});UE.plugin.register("insertfile",function(){var me=this;function getFileIcon(url){var ext=url.substr(url.lastIndexOf(".")+1).toLowerCase(),maps={rar:"icon_rar.gif",zip:"icon_rar.gif",tar:"icon_rar.gif",gz:"icon_rar.gif",bz2:"icon_rar.gif",doc:"icon_doc.gif",docx:"icon_doc.gif",pdf:"icon_pdf.gif",mp3:"icon_mp3.gif",xls:"icon_xls.gif",chm:"icon_chm.gif",ppt:"icon_ppt.gif",pptx:"icon_ppt.gif",avi:"icon_mv.gif",rmvb:"icon_mv.gif",wmv:"icon_mv.gif",flv:"icon_mv.gif",swf:"icon_mv.gif",rm:"icon_mv.gif",exe:"icon_exe.gif",psd:"icon_psd.gif",txt:"icon_txt.gif",jpg:"icon_jpg.gif",png:"icon_jpg.gif",jpeg:"icon_jpg.gif",gif:"icon_jpg.gif",ico:"icon_jpg.gif",bmp:"icon_jpg.gif"};return maps[ext]?maps[ext]:maps.txt}return{commands:{insertfile:{execCommand:function(command,filelist){filelist=utils.isArray(filelist)?filelist:[filelist];var i,item,icon,title,html="",URL=me.getOpt("UEDITOR_HOME_URL"),iconDir=URL+(URL.substr(URL.length-1)=="/"?"":"/")+"dialogs/attachment/fileTypeImages/";for(i=0;i<filelist.length;i++){item=filelist[i];icon=iconDir+getFileIcon(item.url);title=item.title||item.url.substr(item.url.lastIndexOf("/")+1);html+='<p style="line-height: 16px;"><img style="vertical-align: middle; margin-right: 2px;" src="'+icon+'" _src="'+icon+'" /><a style="font-size:12px; color:#0066cc;" href="'+item.url+'" title="'+title+'">'+title+"</a></p>"}me.execCommand("insertHtml",html)}}}}});UE.plugins.xssFilter=function(){var config=UEDITOR_CONFIG;var whitList=config.whitList;function filter(node){var tagName=node.tagName;var attrs=node.attrs;if(!whitList.hasOwnProperty(tagName)){node.parentNode.removeChild(node);return false}UE.utils.each(attrs,function(val,key){if(whitList[tagName].indexOf(key)===-1){node.setAttr(key)}})}if(whitList&&config.xssFilterRules){this.options.filterRules=function(){var result={};UE.utils.each(whitList,function(val,key){result[key]=function(node){return filter(node)}});return result}()}var tagList=[];UE.utils.each(whitList,function(val,key){tagList.push(key)});if(whitList&&config.inputXssFilter){this.addInputRule(function(root){root.traversal(function(node){if(node.type!=="element"){return false}filter(node)})})}if(whitList&&config.outputXssFilter){this.addOutputRule(function(root){root.traversal(function(node){if(node.type!=="element"){return false}filter(node)})})}};var baidu=baidu||{};baidu.editor=baidu.editor||{};UE.ui=baidu.editor.ui={};(function(){var browser=baidu.editor.browser,domUtils=baidu.editor.dom.domUtils;var magic="$EDITORUI";var root=window[magic]={};var uidMagic="ID"+magic;var uidCount=0;var uiUtils=baidu.editor.ui.uiUtils={uid:function(obj){return(obj?obj[uidMagic]||(obj[uidMagic]=++uidCount):++uidCount)},hook:function(fn,callback){var dg;if(fn&&fn._callbacks){dg=fn}else{dg=function(){var q;if(fn){q=fn.apply(this,arguments)}var callbacks=dg._callbacks;var k=callbacks.length;while(k--){var r=callbacks[k].apply(this,arguments);if(q===undefined){q=r}}return q};dg._callbacks=[]}dg._callbacks.push(callback);return dg},createElementByHtml:function(html){var el=document.createElement("div");el.innerHTML=html;el=el.firstChild;el.parentNode.removeChild(el);return el},getViewportElement:function(){return(browser.ie&&browser.quirks)?document.body:document.documentElement},getClientRect:function(element){var bcr;try{bcr=element.getBoundingClientRect()}catch(e){bcr={left:0,top:0,height:0,width:0}}var rect={left:Math.round(bcr.left),top:Math.round(bcr.top),height:Math.round(bcr.bottom-bcr.top),width:Math.round(bcr.right-bcr.left)};var doc;while((doc=element.ownerDocument)!==document&&(element=domUtils.getWindow(doc).frameElement)){bcr=element.getBoundingClientRect();rect.left+=bcr.left;rect.top+=bcr.top}rect.bottom=rect.top+rect.height;rect.right=rect.left+rect.width;return rect},getViewportRect:function(){var viewportEl=uiUtils.getViewportElement();var width=(window.innerWidth||viewportEl.clientWidth)|0;var height=(window.innerHeight||viewportEl.clientHeight)|0;return{left:0,top:0,height:height,width:width,bottom:height,right:width}},setViewportOffset:function(element,offset){var rect;var fixedLayer=uiUtils.getFixedLayer();if(element.parentNode===fixedLayer){element.style.left=offset.left+"px";element.style.top=offset.top+"px"}else{domUtils.setViewportOffset(element,offset)}},getEventOffset:function(evt){var el=evt.target||evt.srcElement;var rect=uiUtils.getClientRect(el);var offset=uiUtils.getViewportOffsetByEvent(evt);return{left:offset.left-rect.left,top:offset.top-rect.top}},getViewportOffsetByEvent:function(evt){var el=evt.target||evt.srcElement;var frameEl=domUtils.getWindow(el).frameElement;var offset={left:evt.clientX,top:evt.clientY};if(frameEl&&el.ownerDocument!==document){var rect=uiUtils.getClientRect(frameEl);offset.left+=rect.left;offset.top+=rect.top}return offset},setGlobal:function(id,obj){root[id]=obj;return magic+'["'+id+'"]'},unsetGlobal:function(id){delete root[id]},copyAttributes:function(tgt,src){var attributes=src.attributes;var k=attributes.length;while(k--){var attrNode=attributes[k];if(attrNode.nodeName!="style"&&attrNode.nodeName!="class"&&(!browser.ie||attrNode.specified)){tgt.setAttribute(attrNode.nodeName,attrNode.nodeValue)}}if(src.className){domUtils.addClass(tgt,src.className)}if(src.style.cssText){tgt.style.cssText+=";"+src.style.cssText}},removeStyle:function(el,styleName){if(el.style.removeProperty){el.style.removeProperty(styleName)}else{if(el.style.removeAttribute){el.style.removeAttribute(styleName)}else{throw""}}},contains:function(elA,elB){return elA&&elB&&(elA===elB?false:(elA.contains?elA.contains(elB):elA.compareDocumentPosition(elB)&16))},startDrag:function(evt,callbacks,doc){var doc=doc||document;var startX=evt.clientX;var startY=evt.clientY;function handleMouseMove(evt){var x=evt.clientX-startX;var y=evt.clientY-startY;callbacks.ondragmove(x,y,evt);if(evt.stopPropagation){evt.stopPropagation()}else{evt.cancelBubble=true}}if(doc.addEventListener){function handleMouseUp(evt){doc.removeEventListener("mousemove",handleMouseMove,true);doc.removeEventListener("mouseup",handleMouseUp,true);window.removeEventListener("mouseup",handleMouseUp,true);callbacks.ondragstop()}doc.addEventListener("mousemove",handleMouseMove,true);doc.addEventListener("mouseup",handleMouseUp,true);window.addEventListener("mouseup",handleMouseUp,true);evt.preventDefault()}else{var elm=evt.srcElement;elm.setCapture();function releaseCaptrue(){elm.releaseCapture();elm.detachEvent("onmousemove",handleMouseMove);elm.detachEvent("onmouseup",releaseCaptrue);elm.detachEvent("onlosecaptrue",releaseCaptrue);callbacks.ondragstop()}elm.attachEvent("onmousemove",handleMouseMove);elm.attachEvent("onmouseup",releaseCaptrue);elm.attachEvent("onlosecaptrue",releaseCaptrue);evt.returnValue=false}callbacks.ondragstart()},getFixedLayer:function(){var layer=document.getElementById("edui_fixedlayer");if(layer==null){layer=document.createElement("div");layer.id="edui_fixedlayer";document.body.appendChild(layer);if(browser.ie&&browser.version<=8){layer.style.position="absolute";bindFixedLayer();setTimeout(updateFixedOffset)}else{layer.style.position="fixed"}layer.style.left="0";layer.style.top="0";layer.style.width="0";layer.style.height="0"}return layer},makeUnselectable:function(element){if(browser.opera||(browser.ie&&browser.version<9)){element.unselectable="on";if(element.hasChildNodes()){for(var i=0;i<element.childNodes.length;i++){if(element.childNodes[i].nodeType==1){uiUtils.makeUnselectable(element.childNodes[i])}}}}else{if(element.style.MozUserSelect!==undefined){element.style.MozUserSelect="none"}else{if(element.style.WebkitUserSelect!==undefined){element.style.WebkitUserSelect="none"}else{if(element.style.KhtmlUserSelect!==undefined){element.style.KhtmlUserSelect="none"}}}}}};function updateFixedOffset(){var layer=document.getElementById("edui_fixedlayer");uiUtils.setViewportOffset(layer,{left:0,top:0})}function bindFixedLayer(adjOffset){domUtils.on(window,"scroll",updateFixedOffset);domUtils.on(window,"resize",baidu.editor.utils.defer(updateFixedOffset,0,true))}})();(function(){var utils=baidu.editor.utils,uiUtils=baidu.editor.ui.uiUtils,EventBase=baidu.editor.EventBase,UIBase=baidu.editor.ui.UIBase=function(){};UIBase.prototype={className:"",uiName:"",initOptions:function(options){var me=this;for(var k in options){me[k]=options[k]}this.id=this.id||"edui"+uiUtils.uid()},initUIBase:function(){this._globalKey=utils.unhtml(uiUtils.setGlobal(this.id,this))},render:function(holder){var html=this.renderHtml();var el=uiUtils.createElementByHtml(html);var list=domUtils.getElementsByTagName(el,"*");var theme="edui-"+(this.theme||this.editor.options.theme);var layer=document.getElementById("edui_fixedlayer");for(var i=0,node;node=list[i++];){domUtils.addClass(node,theme)}domUtils.addClass(el,theme);if(layer){layer.className="";domUtils.addClass(layer,theme)}var seatEl=this.getDom();if(seatEl!=null){seatEl.parentNode.replaceChild(el,seatEl);uiUtils.copyAttributes(el,seatEl)}else{if(typeof holder=="string"){holder=document.getElementById(holder)}holder=holder||uiUtils.getFixedLayer();domUtils.addClass(holder,theme);holder.appendChild(el)}this.postRender()},getDom:function(name){if(!name){return document.getElementById(this.id)}else{return document.getElementById(this.id+"_"+name)}},postRender:function(){this.fireEvent("postrender")},getHtmlTpl:function(){return""},formatHtml:function(tpl){var prefix="edui-"+this.uiName;return(tpl.replace(/##/g,this.id).replace(/%%-/g,this.uiName?prefix+"-":"").replace(/%%/g,(this.uiName?prefix:"")+" "+this.className).replace(/\$\$/g,this._globalKey))},renderHtml:function(){return this.formatHtml(this.getHtmlTpl())},dispose:function(){var box=this.getDom();if(box){baidu.editor.dom.domUtils.remove(box)}uiUtils.unsetGlobal(this.id)}};utils.inherits(UIBase,EventBase)})();(function(){var utils=baidu.editor.utils,UIBase=baidu.editor.ui.UIBase,Separator=baidu.editor.ui.Separator=function(options){this.initOptions(options);this.initSeparator()};Separator.prototype={uiName:"separator",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"></div>'}};utils.inherits(Separator,UIBase)})();(function(){var utils=baidu.editor.utils,domUtils=baidu.editor.dom.domUtils,UIBase=baidu.editor.ui.UIBase,uiUtils=baidu.editor.ui.uiUtils;var Mask=baidu.editor.ui.Mask=function(options){this.initOptions(options);this.initUIBase()};Mask.prototype={getHtmlTpl:function(){return'<div id="##" class="edui-mask %%" onclick="return $$._onClick(event, this);" onmousedown="return $$._onMouseDown(event, this);"></div>'},postRender:function(){var me=this;domUtils.on(window,"resize",function(){setTimeout(function(){if(!me.isHidden()){me._fill()}})})},show:function(zIndex){this._fill();this.getDom().style.display="";this.getDom().style.zIndex=zIndex},hide:function(){this.getDom().style.display="none";this.getDom().style.zIndex=""},isHidden:function(){return this.getDom().style.display=="none"},_onMouseDown:function(){return false},_onClick:function(e,target){this.fireEvent("click",e,target)},_fill:function(){var el=this.getDom();var vpRect=uiUtils.getViewportRect();el.style.width=vpRect.width+"px";el.style.height=vpRect.height+"px"}};utils.inherits(Mask,UIBase)})();(function(){var utils=baidu.editor.utils,uiUtils=baidu.editor.ui.uiUtils,domUtils=baidu.editor.dom.domUtils,UIBase=baidu.editor.ui.UIBase,Popup=baidu.editor.ui.Popup=function(options){this.initOptions(options);this.initPopup()};var allPopups=[];function closeAllPopup(evt,el){for(var i=0;i<allPopups.length;i++){var pop=allPopups[i];if(!pop.isHidden()){if(pop.queryAutoHide(el)!==false){if(evt&&/scroll/ig.test(evt.type)&&pop.className=="edui-wordpastepop"){return}pop.hide()}}}if(allPopups.length){pop.editor.fireEvent("afterhidepop")}}Popup.postHide=closeAllPopup;var ANCHOR_CLASSES=["edui-anchor-topleft","edui-anchor-topright","edui-anchor-bottomleft","edui-anchor-bottomright"];Popup.prototype={SHADOW_RADIUS:5,content:null,_hidden:false,autoRender:true,canSideLeft:true,canSideUp:true,initPopup:function(){this.initUIBase();allPopups.push(this)},getHtmlTpl:function(){return'<div id="##" class="edui-popup %%" onmousedown="return false;"> <div id="##_body" class="edui-popup-body"> <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder="0" width="100%" height="100%" src="about:blank"></iframe> <div class="edui-shadow"></div> <div id="##_content" class="edui-popup-content">'+this.getContentHtmlTpl()+"  </div> </div></div>"},getContentHtmlTpl:function(){if(this.content){if(typeof this.content=="string"){return this.content}return this.content.renderHtml()}else{return""}},_UIBase_postRender:UIBase.prototype.postRender,postRender:function(){if(this.content instanceof UIBase){this.content.postRender()}if(this.captureWheel&&!this.captured){this.captured=true;var winHeight=(document.documentElement.clientHeight||document.body.clientHeight)-80,_height=this.getDom().offsetHeight,_top=uiUtils.getClientRect(this.combox.getDom()).top,content=this.getDom("content"),ifr=this.getDom("body").getElementsByTagName("iframe"),me=this;ifr.length&&(ifr=ifr[0]);while(_top+_height>winHeight){_height-=30}content.style.height=_height+"px";ifr&&(ifr.style.height=_height+"px");if(window.XMLHttpRequest){domUtils.on(content,("onmousewheel" in document.body)?"mousewheel":"DOMMouseScroll",function(e){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}if(e.wheelDelta){content.scrollTop-=(e.wheelDelta/120)*60}else{content.scrollTop-=(e.detail/-3)*60}})}else{domUtils.on(this.getDom(),"mousewheel",function(e){e.returnValue=false;me.getDom("content").scrollTop-=(e.wheelDelta/120)*60})}}this.fireEvent("postRenderAfter");this.hide(true);this._UIBase_postRender()},_doAutoRender:function(){if(!this.getDom()&&this.autoRender){this.render()}},mesureSize:function(){var box=this.getDom("content");return uiUtils.getClientRect(box)},fitSize:function(){if(this.captureWheel&&this.sized){return this.__size}this.sized=true;var popBodyEl=this.getDom("body");popBodyEl.style.width="";popBodyEl.style.height="";var size=this.mesureSize();if(this.captureWheel){popBodyEl.style.width=-(-20-size.width)+"px";var height=parseInt(this.getDom("content").style.height,10);!window.isNaN(height)&&(size.height=height)}else{popBodyEl.style.width=size.width+"px"}popBodyEl.style.height=size.height+"px";this.__size=size;this.captureWheel&&(this.getDom("content").style.overflow="auto");return size},showAnchor:function(element,hoz){this.showAnchorRect(uiUtils.getClientRect(element),hoz)},showAnchorRect:function(rect,hoz,adj){this._doAutoRender();var vpRect=uiUtils.getViewportRect();this.getDom().style.visibility="hidden";this._show();var popSize=this.fitSize();var sideLeft,sideUp,left,top;if(hoz){sideLeft=this.canSideLeft&&(rect.right+popSize.width>vpRect.right&&rect.left>popSize.width);sideUp=this.canSideUp&&(rect.top+popSize.height>vpRect.bottom&&rect.bottom>popSize.height);left=(sideLeft?rect.left-popSize.width:rect.right);top=(sideUp?rect.bottom-popSize.height:rect.top)}else{sideLeft=this.canSideLeft&&(rect.right+popSize.width>vpRect.right&&rect.left>popSize.width);sideUp=this.canSideUp&&(rect.top+popSize.height>vpRect.bottom&&rect.bottom>popSize.height);left=(sideLeft?rect.right-popSize.width:rect.left);top=(sideUp?rect.top-popSize.height:rect.bottom)}var popEl=this.getDom();uiUtils.setViewportOffset(popEl,{left:left,top:top});domUtils.removeClasses(popEl,ANCHOR_CLASSES);popEl.className+=" "+ANCHOR_CLASSES[(sideUp?1:0)*2+(sideLeft?1:0)];if(this.editor){popEl.style.zIndex=this.editor.container.style.zIndex*1+10;baidu.editor.ui.uiUtils.getFixedLayer().style.zIndex=popEl.style.zIndex-1}this.getDom().style.visibility="visible"},showAt:function(offset){var left=offset.left;var top=offset.top;var rect={left:left,top:top,right:left,bottom:top,height:0,width:0};this.showAnchorRect(rect,false,true)},_show:function(){if(this._hidden){var box=this.getDom();box.style.display="";this._hidden=false;this.fireEvent("show")}},isHidden:function(){return this._hidden},show:function(){this._doAutoRender();this._show()},hide:function(notNofity){if(!this._hidden&&this.getDom()){this.getDom().style.display="none";this._hidden=true;if(!notNofity){this.fireEvent("hide")}}},queryAutoHide:function(el){return !el||!uiUtils.contains(this.getDom(),el)}};utils.inherits(Popup,UIBase);domUtils.on(document,"mousedown",function(evt){var el=evt.target||evt.srcElement;closeAllPopup(evt,el)});domUtils.on(window,"scroll",function(evt,el){closeAllPopup(evt,el)})})();(function(){var utils=baidu.editor.utils,UIBase=baidu.editor.ui.UIBase,ColorPicker=baidu.editor.ui.ColorPicker=function(options){this.initOptions(options);this.noColorText=this.noColorText||this.editor.getLang("clearColor");this.initUIBase()};ColorPicker.prototype={getHtmlTpl:function(){return genColorPicker(this.noColorText,this.editor)},_onTableClick:function(evt){var tgt=evt.target||evt.srcElement;var color=tgt.getAttribute("data-color");if(color){this.fireEvent("pickcolor",color)}},_onTableOver:function(evt){var tgt=evt.target||evt.srcElement;var color=tgt.getAttribute("data-color");if(color){this.getDom("preview").style.backgroundColor=color}},_onTableOut:function(){this.getDom("preview").style.backgroundColor=""},_onPickNoColor:function(){this.fireEvent("picknocolor")}};utils.inherits(ColorPicker,UIBase);var COLORS=("ffffff,000000,eeece1,1f497d,4f81bd,c0504d,9bbb59,8064a2,4bacc6,f79646,f2f2f2,7f7f7f,ddd9c3,c6d9f0,dbe5f1,f2dcdb,ebf1dd,e5e0ec,dbeef3,fdeada,d8d8d8,595959,c4bd97,8db3e2,b8cce4,e5b9b7,d7e3bc,ccc1d9,b7dde8,fbd5b5,bfbfbf,3f3f3f,938953,548dd4,95b3d7,d99694,c3d69b,b2a2c7,92cddc,fac08f,a5a5a5,262626,494429,17365d,366092,953734,76923c,5f497a,31859b,e36c09,7f7f7f,0c0c0c,1d1b10,0f243e,244061,632423,4f6128,3f3151,205867,974806,c00000,ff0000,ffc000,ffff00,92d050,00b050,00b0f0,0070c0,002060,7030a0,").split(",");function genColorPicker(noColorText,editor){var html='<div id="##" class="edui-colorpicker %%"><div class="edui-colorpicker-topbar edui-clearfix"><div unselectable="on" id="##_preview" class="edui-colorpicker-preview"></div><div unselectable="on" class="edui-colorpicker-nocolor" onclick="$$._onPickNoColor(event, this);">'+noColorText+'</div></div><table  class="edui-box" style="border-collapse: collapse;" onmouseover="$$._onTableOver(event, this);" onmouseout="$$._onTableOut(event, this);" onclick="return $$._onTableClick(event, this);" cellspacing="0" cellpadding="0"><tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;padding-top: 2px"><td colspan="10">'+editor.getLang("themeColor")+'</td> </tr><tr class="edui-colorpicker-tablefirstrow" >';for(var i=0;i<COLORS.length;i++){if(i&&i%10===0){html+="</tr>"+(i==60?'<tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;"><td colspan="10">'+editor.getLang("standardColor")+"</td></tr>":"")+"<tr"+(i==60?' class="edui-colorpicker-tablefirstrow"':"")+">"}html+=i<70?'<td style="padding: 0 2px;"><a hidefocus title="'+COLORS[i]+'" onclick="return false;" href="javascript:" unselectable="on" class="edui-box edui-colorpicker-colorcell" data-color="#'+COLORS[i]+'" style="background-color:#'+COLORS[i]+";border:solid #ccc;"+(i<10||i>=60?"border-width:1px;":i>=10&&i<20?"border-width:1px 1px 0 1px;":"border-width:0 1px 0 1px;")+'"></a></td>':""}html+="</tr></table></div>";return html}})();(function(){var utils=baidu.editor.utils,uiUtils=baidu.editor.ui.uiUtils,UIBase=baidu.editor.ui.UIBase;var TablePicker=baidu.editor.ui.TablePicker=function(options){this.initOptions(options);this.initTablePicker()};TablePicker.prototype={defaultNumRows:10,defaultNumCols:10,maxNumRows:20,maxNumCols:20,numRows:10,numCols:10,lengthOfCellSide:22,initTablePicker:function(){this.initUIBase()},getHtmlTpl:function(){var me=this;return'<div id="##" class="edui-tablepicker %%"><div class="edui-tablepicker-body"><div class="edui-infoarea"><span id="##_label" class="edui-label"></span></div><div class="edui-pickarea" onmousemove="$$._onMouseMove(event, this);" onmouseover="$$._onMouseOver(event, this);" onmouseout="$$._onMouseOut(event, this);" onclick="$$._onClick(event, this);"><div id="##_overlay" class="edui-overlay"></div></div></div></div>'},_UIBase_render:UIBase.prototype.render,render:function(holder){this._UIBase_render(holder);this.getDom("label").innerHTML="0"+this.editor.getLang("t_row")+" x 0"+this.editor.getLang("t_col")},_track:function(numCols,numRows){var style=this.getDom("overlay").style;var sideLen=this.lengthOfCellSide;style.width=numCols*sideLen+"px";style.height=numRows*sideLen+"px";var label=this.getDom("label");label.innerHTML=numCols+this.editor.getLang("t_col")+" x "+numRows+this.editor.getLang("t_row");this.numCols=numCols;this.numRows=numRows},_onMouseOver:function(evt,el){var rel=evt.relatedTarget||evt.fromElement;if(!uiUtils.contains(el,rel)&&el!==rel){this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row");this.getDom("overlay").style.visibility=""}},_onMouseOut:function(evt,el){var rel=evt.relatedTarget||evt.toElement;if(!uiUtils.contains(el,rel)&&el!==rel){this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row");this.getDom("overlay").style.visibility="hidden"}},_onMouseMove:function(evt,el){var style=this.getDom("overlay").style;var offset=uiUtils.getEventOffset(evt);var sideLen=this.lengthOfCellSide;var numCols=Math.ceil(offset.left/sideLen);var numRows=Math.ceil(offset.top/sideLen);this._track(numCols,numRows)},_onClick:function(){this.fireEvent("picktable",this.numCols,this.numRows)}};utils.inherits(TablePicker,UIBase)})();(function(){var browser=baidu.editor.browser,domUtils=baidu.editor.dom.domUtils,uiUtils=baidu.editor.ui.uiUtils;var TPL_STATEFUL='onmousedown="$$.Stateful_onMouseDown(event, this);" onmouseup="$$.Stateful_onMouseUp(event, this);"'+(browser.ie?(' onmouseenter="$$.Stateful_onMouseEnter(event, this);" onmouseleave="$$.Stateful_onMouseLeave(event, this);"'):(' onmouseover="$$.Stateful_onMouseOver(event, this);" onmouseout="$$.Stateful_onMouseOut(event, this);"'));baidu.editor.ui.Stateful={alwalysHoverable:false,target:null,Stateful_init:function(){this._Stateful_dGetHtmlTpl=this.getHtmlTpl;this.getHtmlTpl=this.Stateful_getHtmlTpl},Stateful_getHtmlTpl:function(){var tpl=this._Stateful_dGetHtmlTpl();return tpl.replace(/stateful/g,function(){return TPL_STATEFUL})},Stateful_onMouseEnter:function(evt,el){this.target=el;if(!this.isDisabled()||this.alwalysHoverable){this.addState("hover");this.fireEvent("over")}},Stateful_onMouseLeave:function(evt,el){if(!this.isDisabled()||this.alwalysHoverable){this.removeState("hover");this.removeState("active");this.fireEvent("out")}},Stateful_onMouseOver:function(evt,el){var rel=evt.relatedTarget;if(!uiUtils.contains(el,rel)&&el!==rel){this.Stateful_onMouseEnter(evt,el)}},Stateful_onMouseOut:function(evt,el){var rel=evt.relatedTarget;if(!uiUtils.contains(el,rel)&&el!==rel){this.Stateful_onMouseLeave(evt,el)}},Stateful_onMouseDown:function(evt,el){if(!this.isDisabled()){this.addState("active")}},Stateful_onMouseUp:function(evt,el){if(!this.isDisabled()){this.removeState("active")}},Stateful_postRender:function(){if(this.disabled&&!this.hasState("disabled")){this.addState("disabled")}},hasState:function(state){return domUtils.hasClass(this.getStateDom(),"edui-state-"+state)},addState:function(state){if(!this.hasState(state)){this.getStateDom().className+=" edui-state-"+state}},removeState:function(state){if(this.hasState(state)){domUtils.removeClasses(this.getStateDom(),["edui-state-"+state])}},getStateDom:function(){return this.getDom("state")},isChecked:function(){return this.hasState("checked")},setChecked:function(checked){if(!this.isDisabled()&&checked){this.addState("checked")}else{this.removeState("checked")}},isDisabled:function(){return this.hasState("disabled")},setDisabled:function(disabled){if(disabled){this.removeState("hover");this.removeState("checked");this.removeState("active");this.addState("disabled")}else{this.removeState("disabled")}}}})();(function(){var utils=baidu.editor.utils,UIBase=baidu.editor.ui.UIBase,Stateful=baidu.editor.ui.Stateful,Button=baidu.editor.ui.Button=function(options){if(options.name){var btnName=options.name;var cssRules=options.cssRules;if(!options.className){options.className="edui-for-"+btnName}options.cssRules=".edui-default  .edui-for-"+btnName+" .edui-icon {"+cssRules+"}"}this.initOptions(options);this.initButton()};Button.prototype={uiName:"button",label:"",title:"",showIcon:true,showText:true,cssRules:"",initButton:function(){this.initUIBase();this.Stateful_init();if(this.cssRules){utils.cssRule("edui-customize-"+this.name+"-style",this.cssRules)}},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"><div id="##_state" stateful><div class="%%-wrap"><div id="##_body" unselectable="on" '+(this.title?'title="'+this.title+'"':"")+' class="%%-body" onmousedown="return $$._onMouseDown(event, this);" onclick="return $$._onClick(event, this);">'+(this.showIcon?'<div class="edui-box edui-icon"></div>':"")+(this.showText?'<div class="edui-box edui-label">'+this.label+"</div>":"")+"</div></div></div></div>"},postRender:function(){this.Stateful_postRender();this.setDisabled(this.disabled)},_onMouseDown:function(e){var target=e.target||e.srcElement,tagName=target&&target.tagName&&target.tagName.toLowerCase();if(tagName=="input"||tagName=="object"||tagName=="object"){return false}},_onClick:function(){if(!this.isDisabled()){this.fireEvent("click")}},setTitle:function(text){var label=this.getDom("label");label.innerHTML=text}};utils.inherits(Button,UIBase);utils.extend(Button.prototype,Stateful)})();(function(){var utils=baidu.editor.utils,uiUtils=baidu.editor.ui.uiUtils,domUtils=baidu.editor.dom.domUtils,UIBase=baidu.editor.ui.UIBase,Stateful=baidu.editor.ui.Stateful,SplitButton=baidu.editor.ui.SplitButton=function(options){this.initOptions(options);this.initSplitButton()};SplitButton.prototype={popup:null,uiName:"splitbutton",title:"",initSplitButton:function(){this.initUIBase();this.Stateful_init();var me=this;if(this.popup!=null){var popup=this.popup;this.popup=null;this.setPopup(popup)}},_UIBase_postRender:UIBase.prototype.postRender,postRender:function(){this.Stateful_postRender();this._UIBase_postRender()},setPopup:function(popup){if(this.popup===popup){return}if(this.popup!=null){this.popup.dispose()}popup.addListener("show",utils.bind(this._onPopupShow,this));popup.addListener("hide",utils.bind(this._onPopupHide,this));popup.addListener("postrender",utils.bind(function(){popup.getDom("body").appendChild(uiUtils.createElementByHtml('<div id="'+this.popup.id+'_bordereraser" class="edui-bordereraser edui-background" style="width:'+(uiUtils.getClientRect(this.getDom()).width+20)+'px"></div>'));popup.getDom().className+=" "+this.className},this));this.popup=popup},_onPopupShow:function(){this.addState("opened")},_onPopupHide:function(){this.removeState("opened")},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"><div '+(this.title?'title="'+this.title+'"':"")+' id="##_state" stateful><div class="%%-body"><div id="##_button_body" class="edui-box edui-button-body" onclick="$$._onButtonClick(event, this);"><div class="edui-box edui-icon"></div></div><div class="edui-box edui-splitborder"></div><div class="edui-box edui-arrow" onclick="$$._onArrowClick();"></div></div></div></div>'},showPopup:function(){var rect=uiUtils.getClientRect(this.getDom());rect.top-=this.popup.SHADOW_RADIUS;rect.height+=this.popup.SHADOW_RADIUS;this.popup.showAnchorRect(rect)},_onArrowClick:function(event,el){if(!this.isDisabled()){this.showPopup()}},_onButtonClick:function(){if(!this.isDisabled()){this.fireEvent("buttonclick")}}};utils.inherits(SplitButton,UIBase);utils.extend(SplitButton.prototype,Stateful,true)})();(function(){var utils=baidu.editor.utils,uiUtils=baidu.editor.ui.uiUtils,ColorPicker=baidu.editor.ui.ColorPicker,Popup=baidu.editor.ui.Popup,SplitButton=baidu.editor.ui.SplitButton,ColorButton=baidu.editor.ui.ColorButton=function(options){this.initOptions(options);this.initColorButton()};ColorButton.prototype={initColorButton:function(){var me=this;this.popup=new Popup({content:new ColorPicker({noColorText:me.editor.getLang("clearColor"),editor:me.editor,onpickcolor:function(t,color){me._onPickColor(color)},onpicknocolor:function(t,color){me._onPickNoColor(color)}}),editor:me.editor});this.initSplitButton()},_SplitButton_postRender:SplitButton.prototype.postRender,postRender:function(){this._SplitButton_postRender();this.getDom("button_body").appendChild(uiUtils.createElementByHtml('<div id="'+this.id+'_colorlump" class="edui-colorlump"></div>'));this.getDom().className+=" edui-colorbutton"},setColor:function(color){this.getDom("colorlump").style.backgroundColor=color;this.color=color},_onPickColor:function(color){if(this.fireEvent("pickcolor",color)!==false){this.setColor(color);this.popup.hide()}},_onPickNoColor:function(color){if(this.fireEvent("picknocolor")!==false){this.popup.hide()}}};utils.inherits(ColorButton,SplitButton)})();(function(){var utils=baidu.editor.utils,Popup=baidu.editor.ui.Popup,TablePicker=baidu.editor.ui.TablePicker,SplitButton=baidu.editor.ui.SplitButton,TableButton=baidu.editor.ui.TableButton=function(options){this.initOptions(options);this.initTableButton()};TableButton.prototype={initTableButton:function(){var me=this;this.popup=new Popup({content:new TablePicker({editor:me.editor,onpicktable:function(t,numCols,numRows){me._onPickTable(numCols,numRows)}}),editor:me.editor});this.initSplitButton()},_onPickTable:function(numCols,numRows){if(this.fireEvent("picktable",numCols,numRows)!==false){this.popup.hide()}}};utils.inherits(TableButton,SplitButton)})();(function(){var utils=baidu.editor.utils,UIBase=baidu.editor.ui.UIBase;var AutoTypeSetPicker=baidu.editor.ui.AutoTypeSetPicker=function(options){this.initOptions(options);this.initAutoTypeSetPicker()};AutoTypeSetPicker.prototype={initAutoTypeSetPicker:function(){this.initUIBase()},getHtmlTpl:function(){var me=this.editor,opt=me.options.autotypeset,lang=me.getLang("autoTypeSet");var textAlignInputName="textAlignValue"+me.uid,imageBlockInputName="imageBlockLineValue"+me.uid,symbolConverInputName="symbolConverValue"+me.uid;return'<div id="##" class="edui-autotypesetpicker %%"><div class="edui-autotypesetpicker-body"><table ><tr><td nowrap><input type="checkbox" name="mergeEmptyline" '+(opt.mergeEmptyline?"checked":"")+">"+lang.mergeLine+'</td><td colspan="2"><input type="checkbox" name="removeEmptyline" '+(opt.removeEmptyline?"checked":"")+">"+lang.delLine+'</td></tr><tr><td nowrap><input type="checkbox" name="removeClass" '+(opt.removeClass?"checked":"")+">"+lang.removeFormat+'</td><td colspan="2"><input type="checkbox" name="indent" '+(opt.indent?"checked":"")+">"+lang.indent+'</td></tr><tr><td nowrap><input type="checkbox" name="textAlign" '+(opt.textAlign?"checked":"")+">"+lang.alignment+'</td><td colspan="2" id="'+textAlignInputName+'"><input type="radio" name="'+textAlignInputName+'" value="left" '+((opt.textAlign&&opt.textAlign=="left")?"checked":"")+">"+me.getLang("justifyleft")+'<input type="radio" name="'+textAlignInputName+'" value="center" '+((opt.textAlign&&opt.textAlign=="center")?"checked":"")+">"+me.getLang("justifycenter")+'<input type="radio" name="'+textAlignInputName+'" value="right" '+((opt.textAlign&&opt.textAlign=="right")?"checked":"")+">"+me.getLang("justifyright")+'</td></tr><tr><td nowrap><input type="checkbox" name="imageBlockLine" '+(opt.imageBlockLine?"checked":"")+">"+lang.imageFloat+'</td><td nowrap id="'+imageBlockInputName+'"><input type="radio" name="'+imageBlockInputName+'" value="none" '+((opt.imageBlockLine&&opt.imageBlockLine=="none")?"checked":"")+">"+me.getLang("default")+'<input type="radio" name="'+imageBlockInputName+'" value="left" '+((opt.imageBlockLine&&opt.imageBlockLine=="left")?"checked":"")+">"+me.getLang("justifyleft")+'<input type="radio" name="'+imageBlockInputName+'" value="center" '+((opt.imageBlockLine&&opt.imageBlockLine=="center")?"checked":"")+">"+me.getLang("justifycenter")+'<input type="radio" name="'+imageBlockInputName+'" value="right" '+((opt.imageBlockLine&&opt.imageBlockLine=="right")?"checked":"")+">"+me.getLang("justifyright")+'</td></tr><tr><td nowrap><input type="checkbox" name="clearFontSize" '+(opt.clearFontSize?"checked":"")+">"+lang.removeFontsize+'</td><td colspan="2"><input type="checkbox" name="clearFontFamily" '+(opt.clearFontFamily?"checked":"")+">"+lang.removeFontFamily+'</td></tr><tr><td nowrap colspan="3"><input type="checkbox" name="removeEmptyNode" '+(opt.removeEmptyNode?"checked":"")+">"+lang.removeHtml+'</td></tr><tr><td nowrap colspan="3"><input type="checkbox" name="pasteFilter" '+(opt.pasteFilter?"checked":"")+">"+lang.pasteFilter+'</td></tr><tr><td nowrap><input type="checkbox" name="symbolConver" '+(opt.bdc2sb||opt.tobdc?"checked":"")+">"+lang.symbol+'</td><td id="'+symbolConverInputName+'"><input type="radio" name="bdc" value="bdc2sb" '+(opt.bdc2sb?"checked":"")+">"+lang.bdc2sb+'<input type="radio" name="bdc" value="tobdc" '+(opt.tobdc?"checked":"")+">"+lang.tobdc+'</td><td nowrap align="right"><button >'+lang.run+"</button></td></tr></table></div></div>"},_UIBase_render:UIBase.prototype.render};utils.inherits(AutoTypeSetPicker,UIBase)})();(function(){var utils=baidu.editor.utils,Popup=baidu.editor.ui.Popup,AutoTypeSetPicker=baidu.editor.ui.AutoTypeSetPicker,SplitButton=baidu.editor.ui.SplitButton,AutoTypeSetButton=baidu.editor.ui.AutoTypeSetButton=function(options){this.initOptions(options);this.initAutoTypeSetButton()};function getPara(me){var opt={},cont=me.getDom(),editorId=me.editor.uid,inputType=null,attrName=null,ipts=domUtils.getElementsByTagName(cont,"input");for(var i=ipts.length-1,ipt;ipt=ipts[i--];){inputType=ipt.getAttribute("type");if(inputType=="checkbox"){attrName=ipt.getAttribute("name");opt[attrName]&&delete opt[attrName];if(ipt.checked){var attrValue=document.getElementById(attrName+"Value"+editorId);if(attrValue){if(/input/ig.test(attrValue.tagName)){opt[attrName]=attrValue.value}else{var iptChilds=attrValue.getElementsByTagName("input");for(var j=iptChilds.length-1,iptchild;iptchild=iptChilds[j--];){if(iptchild.checked){opt[attrName]=iptchild.value;break}}}}else{opt[attrName]=true}}else{opt[attrName]=false}}else{opt[ipt.getAttribute("value")]=ipt.checked}}var selects=domUtils.getElementsByTagName(cont,"select");for(var i=0,si;si=selects[i++];){var attr=si.getAttribute("name");opt[attr]=opt[attr]?si.value:""}utils.extend(me.editor.options.autotypeset,opt);me.editor.setPreferences("autotypeset",opt)}AutoTypeSetButton.prototype={initAutoTypeSetButton:function(){var me=this;this.popup=new Popup({content:new AutoTypeSetPicker({editor:me.editor}),editor:me.editor,hide:function(){if(!this._hidden&&this.getDom()){getPara(this);this.getDom().style.display="none";this._hidden=true;this.fireEvent("hide")}}});var flag=0;this.popup.addListener("postRenderAfter",function(){var popupUI=this;if(flag){return}var cont=this.getDom(),btn=cont.getElementsByTagName("button")[0];btn.onclick=function(){getPara(popupUI);me.editor.execCommand("autotypeset");popupUI.hide()};domUtils.on(cont,"click",function(e){var target=e.target||e.srcElement,editorId=me.editor.uid;if(target&&target.tagName=="INPUT"){if(target.name=="imageBlockLine"||target.name=="textAlign"||target.name=="symbolConver"){var checked=target.checked,radioTd=document.getElementById(target.name+"Value"+editorId),radios=radioTd.getElementsByTagName("input"),defalutSelect={imageBlockLine:"none",textAlign:"left",symbolConver:"tobdc"};for(var i=0;i<radios.length;i++){if(checked){if(radios[i].value==defalutSelect[target.name]){radios[i].checked="checked"}}else{radios[i].checked=false}}}if(target.name==("imageBlockLineValue"+editorId)||target.name==("textAlignValue"+editorId)||target.name=="bdc"){var checkboxs=target.parentNode.previousSibling.getElementsByTagName("input");checkboxs&&(checkboxs[0].checked=true)}getPara(popupUI)}});flag=1});this.initSplitButton()}};utils.inherits(AutoTypeSetButton,SplitButton)})();(function(){var utils=baidu.editor.utils,Popup=baidu.editor.ui.Popup,Stateful=baidu.editor.ui.Stateful,UIBase=baidu.editor.ui.UIBase;var CellAlignPicker=baidu.editor.ui.CellAlignPicker=function(options){this.initOptions(options);this.initSelected();this.initCellAlignPicker()};CellAlignPicker.prototype={initSelected:function(){var status={valign:{top:0,middle:1,bottom:2},align:{left:0,center:1,right:2},count:3},result=-1;if(this.selected){this.selectedIndex=status.valign[this.selected.valign]*status.count+status.align[this.selected.align]}},initCellAlignPicker:function(){this.initUIBase();this.Stateful_init()},getHtmlTpl:function(){var alignType=["left","center","right"],COUNT=9,tempClassName=null,tempIndex=-1,tmpl=[];for(var i=0;i<COUNT;i++){tempClassName=this.selectedIndex===i?' class="edui-cellalign-selected" ':"";tempIndex=i%3;tempIndex===0&&tmpl.push("<tr>");tmpl.push('<td index="'+i+'" '+tempClassName+' stateful><div class="edui-icon edui-'+alignType[tempIndex]+'"></div></td>');tempIndex===2&&tmpl.push("</tr>")}return'<div id="##" class="edui-cellalignpicker %%"><div class="edui-cellalignpicker-body"><table onclick="$$._onClick(event);">'+tmpl.join("")+"</table></div></div>"},getStateDom:function(){return this.target},_onClick:function(evt){var target=evt.target||evt.srcElement;if(/icon/.test(target.className)){this.items[target.parentNode.getAttribute("index")].onclick();Popup.postHide(evt)}},_UIBase_render:UIBase.prototype.render};utils.inherits(CellAlignPicker,UIBase);utils.extend(CellAlignPicker.prototype,Stateful,true)})();(function(){var utils=baidu.editor.utils,Stateful=baidu.editor.ui.Stateful,uiUtils=baidu.editor.ui.uiUtils,UIBase=baidu.editor.ui.UIBase;var PastePicker=baidu.editor.ui.PastePicker=function(options){this.initOptions(options);this.initPastePicker()};PastePicker.prototype={initPastePicker:function(){this.initUIBase();this.Stateful_init()},getHtmlTpl:function(){return'<div class="edui-pasteicon" onclick="$$._onClick(this)"></div><div class="edui-pastecontainer"><div class="edui-title">'+this.editor.getLang("pasteOpt")+'</div><div class="edui-button"><div title="'+this.editor.getLang("pasteSourceFormat")+'" onclick="$$.format(false)" stateful><div class="edui-richtxticon"></div></div><div title="'+this.editor.getLang("tagFormat")+'" onclick="$$.format(2)" stateful><div class="edui-tagicon"></div></div><div title="'+this.editor.getLang("pasteTextFormat")+'" onclick="$$.format(true)" stateful><div class="edui-plaintxticon"></div></div></div></div></div>'},getStateDom:function(){return this.target},format:function(param){this.editor.ui._isTransfer=true;this.editor.fireEvent("pasteTransfer",param)},_onClick:function(cur){var node=domUtils.getNextDomNode(cur),screenHt=uiUtils.getViewportRect().height,subPop=uiUtils.getClientRect(node);if((subPop.top+subPop.height)>screenHt){node.style.top=(-subPop.height-cur.offsetHeight)+"px"}else{node.style.top=""}if(/hidden/ig.test(domUtils.getComputedStyle(node,"visibility"))){node.style.visibility="visible";domUtils.addClass(cur,"edui-state-opened")}else{node.style.visibility="hidden";domUtils.removeClasses(cur,"edui-state-opened")}},_UIBase_render:UIBase.prototype.render};utils.inherits(PastePicker,UIBase);utils.extend(PastePicker.prototype,Stateful,true)})();(function(){var utils=baidu.editor.utils,uiUtils=baidu.editor.ui.uiUtils,UIBase=baidu.editor.ui.UIBase,Toolbar=baidu.editor.ui.Toolbar=function(options){this.initOptions(options);this.initToolbar()};Toolbar.prototype={items:null,initToolbar:function(){this.items=this.items||[];this.initUIBase()},add:function(item,index){if(index===undefined){this.items.push(item)}else{this.items.splice(index,0,item)}},getHtmlTpl:function(){var buff=[];for(var i=0;i<this.items.length;i++){buff[i]=this.items[i].renderHtml()}return'<div id="##" class="edui-toolbar %%" onselectstart="return false;" onmousedown="return $$._onMouseDown(event, this);">'+buff.join("")+"</div>"},postRender:function(){var box=this.getDom();for(var i=0;i<this.items.length;i++){this.items[i].postRender()}uiUtils.makeUnselectable(box)},_onMouseDown:function(e){var target=e.target||e.srcElement,tagName=target&&target.tagName&&target.tagName.toLowerCase();if(tagName=="input"||tagName=="object"||tagName=="object"){return false}}};utils.inherits(Toolbar,UIBase)})();(function(){var utils=baidu.editor.utils,domUtils=baidu.editor.dom.domUtils,uiUtils=baidu.editor.ui.uiUtils,UIBase=baidu.editor.ui.UIBase,Popup=baidu.editor.ui.Popup,Stateful=baidu.editor.ui.Stateful,CellAlignPicker=baidu.editor.ui.CellAlignPicker,Menu=baidu.editor.ui.Menu=function(options){this.initOptions(options);this.initMenu()};var menuSeparator={renderHtml:function(){return'<div class="edui-menuitem edui-menuseparator"><div class="edui-menuseparator-inner"></div></div>'},postRender:function(){},queryAutoHide:function(){return true}};Menu.prototype={items:null,uiName:"menu",initMenu:function(){this.items=this.items||[];this.initPopup();this.initItems()},initItems:function(){for(var i=0;i<this.items.length;i++){var item=this.items[i];if(item=="-"){this.items[i]=this.getSeparator()}else{if(!(item instanceof MenuItem)){item.editor=this.editor;item.theme=this.editor.options.theme;this.items[i]=this.createItem(item)}}}},getSeparator:function(){return menuSeparator},createItem:function(item){item.menu=this;return new MenuItem(item)},_Popup_getContentHtmlTpl:Popup.prototype.getContentHtmlTpl,getContentHtmlTpl:function(){if(this.items.length==0){return this._Popup_getContentHtmlTpl()}var buff=[];for(var i=0;i<this.items.length;i++){var item=this.items[i];buff[i]=item.renderHtml()}return('<div class="%%-body">'+buff.join("")+"</div>")},_Popup_postRender:Popup.prototype.postRender,postRender:function(){var me=this;for(var i=0;i<this.items.length;i++){var item=this.items[i];item.ownerMenu=this;item.postRender()}domUtils.on(this.getDom(),"mouseover",function(evt){evt=evt||event;var rel=evt.relatedTarget||evt.fromElement;var el=me.getDom();if(!uiUtils.contains(el,rel)&&el!==rel){me.fireEvent("over")}});this._Popup_postRender()},queryAutoHide:function(el){if(el){if(uiUtils.contains(this.getDom(),el)){return false}for(var i=0;i<this.items.length;i++){var item=this.items[i];if(item.queryAutoHide(el)===false){return false}}}},clearItems:function(){for(var i=0;i<this.items.length;i++){var item=this.items[i];clearTimeout(item._showingTimer);clearTimeout(item._closingTimer);if(item.subMenu){item.subMenu.destroy()}}this.items=[]},destroy:function(){if(this.getDom()){domUtils.remove(this.getDom())}this.clearItems()},dispose:function(){this.destroy()}};utils.inherits(Menu,Popup);var MenuItem=baidu.editor.ui.MenuItem=function(options){this.initOptions(options);this.initUIBase();this.Stateful_init();if(this.subMenu&&!(this.subMenu instanceof Menu)){if(options.className&&options.className.indexOf("aligntd")!=-1){var me=this;this.subMenu.selected=this.editor.queryCommandValue("cellalignment");this.subMenu=new Popup({content:new CellAlignPicker(this.subMenu),parentMenu:me,editor:me.editor,destroy:function(){if(this.getDom()){domUtils.remove(this.getDom())}}});this.subMenu.addListener("postRenderAfter",function(){domUtils.on(this.getDom(),"mouseover",function(){me.addState("opened")})})}else{this.subMenu=new Menu(this.subMenu)}}};MenuItem.prototype={label:"",subMenu:null,ownerMenu:null,uiName:"menuitem",alwalysHoverable:true,getHtmlTpl:function(){return'<div id="##" class="%%" stateful onclick="$$._onClick(event, this);"><div class="%%-body">'+this.renderLabelHtml()+"</div></div>"},postRender:function(){var me=this;this.addListener("over",function(){me.ownerMenu.fireEvent("submenuover",me);if(me.subMenu){me.delayShowSubMenu()}});if(this.subMenu){this.getDom().className+=" edui-hassubmenu";this.subMenu.render();this.addListener("out",function(){me.delayHideSubMenu()});this.subMenu.addListener("over",function(){clearTimeout(me._closingTimer);me._closingTimer=null;me.addState("opened")});this.ownerMenu.addListener("hide",function(){me.hideSubMenu()});this.ownerMenu.addListener("submenuover",function(t,subMenu){if(subMenu!==me){me.delayHideSubMenu()}});this.subMenu._bakQueryAutoHide=this.subMenu.queryAutoHide;this.subMenu.queryAutoHide=function(el){if(el&&uiUtils.contains(me.getDom(),el)){return false}return this._bakQueryAutoHide(el)}}this.getDom().style.tabIndex="-1";uiUtils.makeUnselectable(this.getDom());this.Stateful_postRender()},delayShowSubMenu:function(){var me=this;if(!me.isDisabled()){me.addState("opened");clearTimeout(me._showingTimer);clearTimeout(me._closingTimer);me._closingTimer=null;me._showingTimer=setTimeout(function(){me.showSubMenu()},250)}},delayHideSubMenu:function(){var me=this;if(!me.isDisabled()){me.removeState("opened");clearTimeout(me._showingTimer);if(!me._closingTimer){me._closingTimer=setTimeout(function(){if(!me.hasState("opened")){me.hideSubMenu()}me._closingTimer=null},400)}}},renderLabelHtml:function(){return'<div class="edui-arrow"></div><div class="edui-box edui-icon"></div><div class="edui-box edui-label %%-label">'+(this.label||"")+"</div>"},getStateDom:function(){return this.getDom()},queryAutoHide:function(el){if(this.subMenu&&this.hasState("opened")){return this.subMenu.queryAutoHide(el)}},_onClick:function(event,this_){if(this.hasState("disabled")){return}if(this.fireEvent("click",event,this_)!==false){if(this.subMenu){this.showSubMenu()}else{Popup.postHide(event)}}},showSubMenu:function(){var rect=uiUtils.getClientRect(this.getDom());rect.right-=5;rect.left+=2;rect.width-=7;rect.top-=4;rect.bottom+=4;rect.height+=8;this.subMenu.showAnchorRect(rect,true,true)},hideSubMenu:function(){this.subMenu.hide()}};utils.inherits(MenuItem,UIBase);utils.extend(MenuItem.prototype,Stateful,true)})();(function(){var utils=baidu.editor.utils,uiUtils=baidu.editor.ui.uiUtils,Menu=baidu.editor.ui.Menu,SplitButton=baidu.editor.ui.SplitButton,Combox=baidu.editor.ui.Combox=function(options){this.initOptions(options);this.initCombox()};Combox.prototype={uiName:"combox",onbuttonclick:function(){this.showPopup()},initCombox:function(){var me=this;this.items=this.items||[];for(var i=0;i<this.items.length;i++){var item=this.items[i];item.uiName="listitem";item.index=i;item.onclick=function(){me.selectByIndex(this.index)}}this.popup=new Menu({items:this.items,uiName:"list",editor:this.editor,captureWheel:true,combox:this});this.initSplitButton()},_SplitButton_postRender:SplitButton.prototype.postRender,postRender:function(){this._SplitButton_postRender();this.setLabel(this.label||"");this.setValue(this.initValue||"")},showPopup:function(){var rect=uiUtils.getClientRect(this.getDom());rect.top+=1;rect.bottom-=1;rect.height-=2;this.popup.showAnchorRect(rect)},getValue:function(){return this.value},setValue:function(value){var index=this.indexByValue(value);if(index!=-1){this.selectedIndex=index;this.setLabel(this.items[index].label);this.value=this.items[index].value}else{this.selectedIndex=-1;this.setLabel(this.getLabelForUnknowValue(value));this.value=value}},setLabel:function(label){this.getDom("button_body").innerHTML=label;this.label=label},getLabelForUnknowValue:function(value){return value},indexByValue:function(value){for(var i=0;i<this.items.length;i++){if(value==this.items[i].value){return i}}return -1},getItem:function(index){return this.items[index]},selectByIndex:function(index){if(index<this.items.length&&this.fireEvent("select",index)!==false){this.selectedIndex=index;this.value=this.items[index].value;this.setLabel(this.items[index].label)}}};utils.inherits(Combox,SplitButton)})();(function(){var utils=baidu.editor.utils,domUtils=baidu.editor.dom.domUtils,uiUtils=baidu.editor.ui.uiUtils,Mask=baidu.editor.ui.Mask,UIBase=baidu.editor.ui.UIBase,Button=baidu.editor.ui.Button,Dialog=baidu.editor.ui.Dialog=function(options){if(options.name){var name=options.name;var cssRules=options.cssRules;if(!options.className){options.className="edui-for-"+name}if(cssRules){options.cssRules=".edui-default .edui-for-"+name+" .edui-dialog-content  {"+cssRules+"}"}}this.initOptions(utils.extend({autoReset:true,draggable:true,onok:function(){},oncancel:function(){},onclose:function(t,ok){return ok?this.onok():this.oncancel()},holdScroll:false},options));this.initDialog()};var modalMask;var dragMask;var activeDialog;Dialog.prototype={draggable:false,uiName:"dialog",initDialog:function(){var me=this,theme=this.editor.options.theme;if(this.cssRules){utils.cssRule("edui-customize-"+this.name+"-style",this.cssRules)}this.initUIBase();this.modalMask=(modalMask||(modalMask=new Mask({className:"edui-dialog-modalmask",theme:theme,onclick:function(){activeDialog&&activeDialog.close(false)}})));this.dragMask=(dragMask||(dragMask=new Mask({className:"edui-dialog-dragmask",theme:theme})));this.closeButton=new Button({className:"edui-dialog-closebutton",title:me.closeDialog,theme:theme,onclick:function(){me.close(false)}});this.fullscreen&&this.initResizeEvent();if(this.buttons){for(var i=0;i<this.buttons.length;i++){if(!(this.buttons[i] instanceof Button)){this.buttons[i]=new Button(utils.extend(this.buttons[i],{editor:this.editor},true))}}}},initResizeEvent:function(){var me=this;domUtils.on(window,"resize",function(){if(me._hidden||me._hidden===undefined){return}if(me.__resizeTimer){window.clearTimeout(me.__resizeTimer)}me.__resizeTimer=window.setTimeout(function(){me.__resizeTimer=null;var dialogWrapNode=me.getDom(),contentNode=me.getDom("content"),wrapRect=UE.ui.uiUtils.getClientRect(dialogWrapNode),contentRect=UE.ui.uiUtils.getClientRect(contentNode),vpRect=uiUtils.getViewportRect();contentNode.style.width=(vpRect.width-wrapRect.width+contentRect.width)+"px";contentNode.style.height=(vpRect.height-wrapRect.height+contentRect.height)+"px";dialogWrapNode.style.width=vpRect.width+"px";dialogWrapNode.style.height=vpRect.height+"px";me.fireEvent("resize")},100)})},fitSize:function(){var popBodyEl=this.getDom("body");var size=this.mesureSize();popBodyEl.style.width=size.width+"px";popBodyEl.style.height=size.height+"px";return size},safeSetOffset:function(offset){var me=this;var el=me.getDom();var vpRect=uiUtils.getViewportRect();var rect=uiUtils.getClientRect(el);var left=offset.left;if(left+rect.width>vpRect.right){left=vpRect.right-rect.width}var top=offset.top;if(top+rect.height>vpRect.bottom){top=vpRect.bottom-rect.height}el.style.left=Math.max(left,0)+"px";el.style.top=Math.max(top,0)+"px"},showAtCenter:function(){var vpRect=uiUtils.getViewportRect();if(!this.fullscreen){this.getDom().style.display="";var popSize=this.fitSize();var titleHeight=this.getDom("titlebar").offsetHeight|0;var left=vpRect.width/2-popSize.width/2;var top=vpRect.height/2-(popSize.height-titleHeight)/2-titleHeight;var popEl=this.getDom();this.safeSetOffset({left:Math.max(left|0,0),top:Math.max(top|0,0)});if(!domUtils.hasClass(popEl,"edui-state-centered")){popEl.className+=" edui-state-centered"}}else{var dialogWrapNode=this.getDom(),contentNode=this.getDom("content");dialogWrapNode.style.display="block";var wrapRect=UE.ui.uiUtils.getClientRect(dialogWrapNode),contentRect=UE.ui.uiUtils.getClientRect(contentNode);dialogWrapNode.style.left="-100000px";contentNode.style.width=(vpRect.width-wrapRect.width+contentRect.width)+"px";contentNode.style.height=(vpRect.height-wrapRect.height+contentRect.height)+"px";dialogWrapNode.style.width=vpRect.width+"px";dialogWrapNode.style.height=vpRect.height+"px";dialogWrapNode.style.left=0;this._originalContext={html:{overflowX:document.documentElement.style.overflowX,overflowY:document.documentElement.style.overflowY},body:{overflowX:document.body.style.overflowX,overflowY:document.body.style.overflowY}};document.documentElement.style.overflowX="hidden";document.documentElement.style.overflowY="hidden";document.body.style.overflowX="hidden";document.body.style.overflowY="hidden"}this._show()},getContentHtml:function(){var contentHtml="";if(typeof this.content=="string"){contentHtml=this.content}else{if(this.iframeUrl){contentHtml='<span id="'+this.id+'_contmask" class="dialogcontmask"></span><iframe id="'+this.id+'_iframe" class="%%-iframe" height="100%" width="100%" frameborder="0" src="'+this.iframeUrl+'"></iframe>'}}return contentHtml},getHtmlTpl:function(){var footHtml="";if(this.buttons){var buff=[];for(var i=0;i<this.buttons.length;i++){buff[i]=this.buttons[i].renderHtml()}footHtml='<div class="%%-foot"><div id="##_buttons" class="%%-buttons">'+buff.join("")+"</div></div>"}return'<div id="##" class="%%"><div '+(!this.fullscreen?'class="%%"':'class="%%-wrap edui-dialog-fullscreen-flag"')+'><div id="##_body" class="%%-body"><div class="%%-shadow"></div><div id="##_titlebar" class="%%-titlebar"><div class="%%-draghandle" onmousedown="$$._onTitlebarMouseDown(event, this);"><span class="%%-caption">'+(this.title||"")+"</span></div>"+this.closeButton.renderHtml()+'</div><div id="##_content" class="%%-content">'+(this.autoReset?"":this.getContentHtml())+"</div>"+footHtml+"</div></div></div>"},postRender:function(){if(!this.modalMask.getDom()){this.modalMask.render();this.modalMask.hide()}if(!this.dragMask.getDom()){this.dragMask.render();this.dragMask.hide()}var me=this;this.addListener("show",function(){me.modalMask.show(this.getDom().style.zIndex-2)});this.addListener("hide",function(){me.modalMask.hide()});if(this.buttons){for(var i=0;i<this.buttons.length;i++){this.buttons[i].postRender()}}domUtils.on(window,"resize",function(){setTimeout(function(){if(!me.isHidden()){me.safeSetOffset(uiUtils.getClientRect(me.getDom()))}})});this._hide()},mesureSize:function(){var body=this.getDom("body");var width=uiUtils.getClientRect(this.getDom("content")).width;var dialogBodyStyle=body.style;dialogBodyStyle.width=width;return uiUtils.getClientRect(body)},_onTitlebarMouseDown:function(evt,el){if(this.draggable){var rect;var vpRect=uiUtils.getViewportRect();var me=this;uiUtils.startDrag(evt,{ondragstart:function(){rect=uiUtils.getClientRect(me.getDom());me.getDom("contmask").style.visibility="visible";me.dragMask.show(me.getDom().style.zIndex-1)},ondragmove:function(x,y){var left=rect.left+x;var top=rect.top+y;me.safeSetOffset({left:left,top:top})},ondragstop:function(){me.getDom("contmask").style.visibility="hidden";domUtils.removeClasses(me.getDom(),["edui-state-centered"]);me.dragMask.hide()}})}},reset:function(){this.getDom("content").innerHTML=this.getContentHtml();this.fireEvent("dialogafterreset")},_show:function(){if(this._hidden){this.getDom().style.display="";this.editor.container.style.zIndex&&(this.getDom().style.zIndex=this.editor.container.style.zIndex*1+10);this._hidden=false;this.fireEvent("show");baidu.editor.ui.uiUtils.getFixedLayer().style.zIndex=this.getDom().style.zIndex-4}},isHidden:function(){return this._hidden},_hide:function(){if(!this._hidden){var wrapNode=this.getDom();wrapNode.style.display="none";wrapNode.style.zIndex="";wrapNode.style.width="";wrapNode.style.height="";this._hidden=true;this.fireEvent("hide")}},open:function(){if(this.autoReset){try{this.reset()}catch(e){this.render();this.open()}}this.showAtCenter();if(this.iframeUrl){try{this.getDom("iframe").focus()}catch(ex){}}activeDialog=this},_onCloseButtonClick:function(evt,el){this.close(false)},close:function(ok){if(this.fireEvent("close",ok)!==false){if(this.fullscreen){document.documentElement.style.overflowX=this._originalContext.html.overflowX;document.documentElement.style.overflowY=this._originalContext.html.overflowY;document.body.style.overflowX=this._originalContext.body.overflowX;document.body.style.overflowY=this._originalContext.body.overflowY;delete this._originalContext}this._hide();var content=this.getDom("content");var iframe=this.getDom("iframe");if(content&&iframe){var doc=iframe.contentDocument||iframe.contentWindow.document;doc&&(doc.body.innerHTML="");domUtils.remove(content)}}}};utils.inherits(Dialog,UIBase)})();(function(){var utils=baidu.editor.utils,Menu=baidu.editor.ui.Menu,SplitButton=baidu.editor.ui.SplitButton,MenuButton=baidu.editor.ui.MenuButton=function(options){this.initOptions(options);this.initMenuButton()};MenuButton.prototype={initMenuButton:function(){var me=this;this.uiName="menubutton";this.popup=new Menu({items:me.items,className:me.className,editor:me.editor});this.popup.addListener("show",function(){var list=this;for(var i=0;i<list.items.length;i++){list.items[i].removeState("checked");if(list.items[i].value==me._value){list.items[i].addState("checked");this.value=me._value}}});this.initSplitButton()},setValue:function(value){this._value=value}};utils.inherits(MenuButton,SplitButton)})();(function(){var utils=baidu.editor.utils,Popup=baidu.editor.ui.Popup,SplitButton=baidu.editor.ui.SplitButton,MultiMenuPop=baidu.editor.ui.MultiMenuPop=function(options){this.initOptions(options);this.initMultiMenu()};MultiMenuPop.prototype={initMultiMenu:function(){var me=this;this.popup=new Popup({content:"",editor:me.editor,iframe_rendered:false,onshow:function(){if(!this.iframe_rendered){this.iframe_rendered=true;this.getDom("content").innerHTML='<iframe id="'+me.id+'_iframe" src="'+me.iframeUrl+'" frameborder="0"></iframe>';me.editor.container.style.zIndex&&(this.getDom().style.zIndex=me.editor.container.style.zIndex*1+1)}}});this.onbuttonclick=function(){this.showPopup()};this.initSplitButton()}};utils.inherits(MultiMenuPop,SplitButton)})();(function(){var UI=baidu.editor.ui,UIBase=UI.UIBase,uiUtils=UI.uiUtils,utils=baidu.editor.utils,domUtils=baidu.editor.dom.domUtils;var allMenus=[],timeID,isSubMenuShow=false;var ShortCutMenu=UI.ShortCutMenu=function(options){this.initOptions(options);this.initShortCutMenu()};ShortCutMenu.postHide=hideAllMenu;ShortCutMenu.prototype={isHidden:true,SPACE:5,initShortCutMenu:function(){this.items=this.items||[];this.initUIBase();this.initItems();this.initEvent();allMenus.push(this)},initEvent:function(){var me=this,doc=me.editor.document;domUtils.on(doc,"mousemove",function(e){if(me.isHidden===false){if(me.getSubMenuMark()||me.eventType=="contextmenu"){return}var flag=true,el=me.getDom(),wt=el.offsetWidth,ht=el.offsetHeight,distanceX=wt/2+me.SPACE,distanceY=ht/2,x=Math.abs(e.screenX-me.left),y=Math.abs(e.screenY-me.top);clearTimeout(timeID);timeID=setTimeout(function(){if(y>0&&y<distanceY){me.setOpacity(el,"1")}else{if(y>distanceY&&y<distanceY+70){me.setOpacity(el,"0.5");flag=false}else{if(y>distanceY+70&&y<distanceY+140){me.hide()}}}if(flag&&x>0&&x<distanceX){me.setOpacity(el,"1")}else{if(x>distanceX&&x<distanceX+70){me.setOpacity(el,"0.5")}else{if(x>distanceX+70&&x<distanceX+140){me.hide()}}}})}});if(browser.chrome){domUtils.on(doc,"mouseout",function(e){var relatedTgt=e.relatedTarget||e.toElement;if(relatedTgt==null||relatedTgt.tagName=="HTML"){me.hide()}})}me.editor.addListener("afterhidepop",function(){if(!me.isHidden){isSubMenuShow=true}})},initItems:function(){if(utils.isArray(this.items)){for(var i=0,len=this.items.length;i<len;i++){var item=this.items[i].toLowerCase();if(UI[item]){this.items[i]=new UI[item](this.editor);this.items[i].className+=" edui-shortcutsubmenu "}}}},setOpacity:function(el,value){if(browser.ie&&browser.version<9){el.style.filter="alpha(opacity = "+parseFloat(value)*100+");"}else{el.style.opacity=value}},getSubMenuMark:function(){isSubMenuShow=false;var layerEle=uiUtils.getFixedLayer();var list=domUtils.getElementsByTagName(layerEle,"div",function(node){return domUtils.hasClass(node,"edui-shortcutsubmenu edui-popup")});for(var i=0,node;node=list[i++];){if(node.style.display!="none"){isSubMenuShow=true}}return isSubMenuShow},show:function(e,hasContextmenu){var me=this,offset={},el=this.getDom(),fixedlayer=uiUtils.getFixedLayer();function setPos(offset){if(offset.left<0){offset.left=0}if(offset.top<0){offset.top=0}el.style.cssText="position:absolute;left:"+offset.left+"px;top:"+offset.top+"px;"}function setPosByCxtMenu(menu){if(!menu.tagName){menu=menu.getDom()}offset.left=parseInt(menu.style.left);offset.top=parseInt(menu.style.top);offset.top-=el.offsetHeight+15;setPos(offset)}me.eventType=e.type;el.style.cssText="display:block;left:-9999px";if(e.type=="contextmenu"&&hasContextmenu){var menu=domUtils.getElementsByTagName(fixedlayer,"div","edui-contextmenu")[0];if(menu){setPosByCxtMenu(menu)}else{me.editor.addListener("aftershowcontextmenu",function(type,menu){setPosByCxtMenu(menu)})}}else{offset=uiUtils.getViewportOffsetByEvent(e);offset.top-=el.offsetHeight+me.SPACE;offset.left+=me.SPACE+20;setPos(offset);me.setOpacity(el,0.2)}me.isHidden=false;me.left=e.screenX+el.offsetWidth/2-me.SPACE;me.top=e.screenY-(el.offsetHeight/2)-me.SPACE;if(me.editor){el.style.zIndex=me.editor.container.style.zIndex*1+10;fixedlayer.style.zIndex=el.style.zIndex-1}},hide:function(){if(this.getDom()){this.getDom().style.display="none"}this.isHidden=true},postRender:function(){if(utils.isArray(this.items)){for(var i=0,item;item=this.items[i++];){item.postRender()}}},getHtmlTpl:function(){var buff;if(utils.isArray(this.items)){buff=[];for(var i=0;i<this.items.length;i++){buff[i]=this.items[i].renderHtml()}buff=buff.join("")}else{buff=this.items}return'<div id="##" class="%% edui-toolbar" data-src="shortcutmenu" onmousedown="return false;" onselectstart="return false;" >'+buff+"</div>"}};utils.inherits(ShortCutMenu,UIBase);function hideAllMenu(e){var tgt=e.target||e.srcElement,cur=domUtils.findParent(tgt,function(node){return domUtils.hasClass(node,"edui-shortcutmenu")||domUtils.hasClass(node,"edui-popup")},true);if(!cur){for(var i=0,menu;menu=allMenus[i++];){menu.hide()}}}domUtils.on(document,"mousedown",function(e){hideAllMenu(e)});domUtils.on(window,"scroll",function(e){hideAllMenu(e)})})();(function(){var utils=baidu.editor.utils,UIBase=baidu.editor.ui.UIBase,Breakline=baidu.editor.ui.Breakline=function(options){this.initOptions(options);this.initSeparator()};Breakline.prototype={uiName:"Breakline",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return"<br/>"}};utils.inherits(Breakline,UIBase)})();(function(){var utils=baidu.editor.utils,domUtils=baidu.editor.dom.domUtils,UIBase=baidu.editor.ui.UIBase,Message=baidu.editor.ui.Message=function(options){this.initOptions(options);this.initMessage()};Message.prototype={initMessage:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-message %%"> <div id="##_closer" class="edui-message-closer">×</div> <div id="##_body" class="edui-message-body edui-message-type-info"> <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder="0" width="100%" height="100%" src="about:blank"></iframe> <div class="edui-shadow"></div> <div id="##_content" class="edui-message-content">  </div> </div></div>'},reset:function(opt){var me=this;if(!opt.keepshow){clearTimeout(this.timer);me.timer=setTimeout(function(){me.hide()},opt.timeout||4000)}opt.content!==undefined&&me.setContent(opt.content);opt.type!==undefined&&me.setType(opt.type);me.show()},postRender:function(){var me=this,closer=this.getDom("closer");closer&&domUtils.on(closer,"click",function(){me.hide()})},setContent:function(content){this.getDom("content").innerHTML=content},setType:function(type){type=type||"info";var body=this.getDom("body");body.className=body.className.replace(/edui-message-type-[\w-]+/,"edui-message-type-"+type)},getContent:function(){return this.getDom("content").innerHTML},getType:function(){var arr=this.getDom("body").match(/edui-message-type-([\w-]+)/);return arr?arr[1]:""},show:function(){this.getDom().style.display="block"},hide:function(){var dom=this.getDom();if(dom){dom.style.display="none";dom.parentNode&&dom.parentNode.removeChild(dom)}}};utils.inherits(Message,UIBase)})();(function(){var utils=baidu.editor.utils;var editorui=baidu.editor.ui;var _Dialog=editorui.Dialog;editorui.buttons={};editorui.Dialog=function(options){var dialog=new _Dialog(options);dialog.addListener("hide",function(){if(dialog.editor){var editor=dialog.editor;try{if(browser.gecko){var y=editor.window.scrollY,x=editor.window.scrollX;editor.body.focus();editor.window.scrollTo(x,y)}else{editor.focus()}}catch(ex){}}});return dialog};var iframeUrlMap={anchor:"~/dialogs/anchor/anchor.html",insertimage:"~/dialogs/image/image.html",link:"~/dialogs/link/link.html",spechars:"~/dialogs/spechars/spechars.html",searchreplace:"~/dialogs/searchreplace/searchreplace.html",map:"~/dialogs/map/map.html",gmap:"~/dialogs/gmap/gmap.html",insertvideo:"~/dialogs/video/video.html",help:"~/dialogs/help/help.html",preview:"~/dialogs/preview/preview.html",emotion:"~/dialogs/emotion/emotion.html",wordimage:"~/dialogs/wordimage/wordimage.html",attachment:"~/dialogs/attachment/attachment.html",insertframe:"~/dialogs/insertframe/insertframe.html",edittip:"~/dialogs/table/edittip.html",edittable:"~/dialogs/table/edittable.html",edittd:"~/dialogs/table/edittd.html",webapp:"~/dialogs/webapp/webapp.html",snapscreen:"~/dialogs/snapscreen/snapscreen.html",scrawl:"~/dialogs/scrawl/scrawl.html",music:"~/dialogs/music/music.html",template:"~/dialogs/template/template.html",background:"~/dialogs/background/background.html",charts:"~/dialogs/charts/charts.html"};var btnCmds=["undo","redo","formatmatch","bold","italic","underline","fontborder","touppercase","tolowercase","strikethrough","subscript","superscript","source","indent","outdent","blockquote","pasteplain","pagebreak","selectall","print","horizontal","removeformat","time","date","unlink","insertparagraphbeforetable","insertrow","insertcol","mergeright","mergedown","deleterow","deletecol","splittorows","splittocols","splittocells","mergecells","deletetable","drafts"];for(var i=0,ci;ci=btnCmds[i++];){ci=ci.toLowerCase();editorui[ci]=function(cmd){return function(editor){var ui=new editorui.Button({className:"edui-for-"+cmd,title:editor.options.labelMap[cmd]||editor.getLang("labelMap."+cmd)||"",onclick:function(){editor.execCommand(cmd)},theme:editor.options.theme,showText:false});editorui.buttons[cmd]=ui;editor.addListener("selectionchange",function(type,causeByUi,uiReady){var state=editor.queryCommandState(cmd);if(state==-1){ui.setDisabled(true);ui.setChecked(false)}else{if(!uiReady){ui.setDisabled(false);ui.setChecked(state)}}});return ui}}(ci)}editorui.cleardoc=function(editor){var ui=new editorui.Button({className:"edui-for-cleardoc",title:editor.options.labelMap.cleardoc||editor.getLang("labelMap.cleardoc")||"",theme:editor.options.theme,onclick:function(){if(confirm(editor.getLang("confirmClear"))){editor.execCommand("cleardoc")}}});editorui.buttons.cleardoc=ui;editor.addListener("selectionchange",function(){ui.setDisabled(editor.queryCommandState("cleardoc")==-1)});return ui};var typeset={justify:["left","right","center","justify"],imagefloat:["none","left","center","right"],directionality:["ltr","rtl"]};for(var p in typeset){(function(cmd,val){for(var i=0,ci;ci=val[i++];){(function(cmd2){editorui[cmd.replace("float","")+cmd2]=function(editor){var ui=new editorui.Button({className:"edui-for-"+cmd.replace("float","")+cmd2,title:editor.options.labelMap[cmd.replace("float","")+cmd2]||editor.getLang("labelMap."+cmd.replace("float","")+cmd2)||"",theme:editor.options.theme,onclick:function(){editor.execCommand(cmd,cmd2)}});editorui.buttons[cmd]=ui;editor.addListener("selectionchange",function(type,causeByUi,uiReady){ui.setDisabled(editor.queryCommandState(cmd)==-1);ui.setChecked(editor.queryCommandValue(cmd)==cmd2&&!uiReady)});return ui}})(ci)}})(p,typeset[p])}for(var i=0,ci;ci=["backcolor","forecolor"][i++];){editorui[ci]=function(cmd){return function(editor){var ui=new editorui.ColorButton({className:"edui-for-"+cmd,color:"default",title:editor.options.labelMap[cmd]||editor.getLang("labelMap."+cmd)||"",editor:editor,onpickcolor:function(t,color){editor.execCommand(cmd,color)},onpicknocolor:function(){editor.execCommand(cmd,"default");this.setColor("transparent");this.color="default"},onbuttonclick:function(){editor.execCommand(cmd,this.color)}});editorui.buttons[cmd]=ui;editor.addListener("selectionchange",function(){ui.setDisabled(editor.queryCommandState(cmd)==-1)});return ui}}(ci)}var dialogBtns={noOk:["searchreplace","help","spechars","webapp","preview"],ok:["attachment","anchor","link","insertimage","map","gmap","insertframe","wordimage","insertvideo","insertframe","edittip","edittable","edittd","scrawl","template","music","background","charts"]};for(var p in dialogBtns){(function(type,vals){for(var i=0,ci;ci=vals[i++];){if(browser.opera&&ci==="searchreplace"){continue}(function(cmd){editorui[cmd]=function(editor,iframeUrl,title){iframeUrl=iframeUrl||(editor.options.iframeUrlMap||{})[cmd]||iframeUrlMap[cmd];title=editor.options.labelMap[cmd]||editor.getLang("labelMap."+cmd)||"";var dialog;if(iframeUrl){dialog=new editorui.Dialog(utils.extend({iframeUrl:editor.ui.mapUrl(iframeUrl),editor:editor,className:"edui-for-"+cmd,title:title,holdScroll:cmd==="insertimage",fullscreen:/charts|preview/.test(cmd),closeDialog:editor.getLang("closeDialog")},type=="ok"?{buttons:[{className:"edui-okbutton",label:editor.getLang("ok"),editor:editor,onclick:function(){dialog.close(true)}},{className:"edui-cancelbutton",label:editor.getLang("cancel"),editor:editor,onclick:function(){dialog.close(false)}}]}:{}));editor.ui._dialogs[cmd+"Dialog"]=dialog}var ui=new editorui.Button({className:"edui-for-"+cmd,title:title,onclick:function(){if(dialog){switch(cmd){case"wordimage":var images=editor.execCommand("wordimage");if(images&&images.length){dialog.render();dialog.open()}break;case"scrawl":if(editor.queryCommandState("scrawl")!=-1){dialog.render();dialog.open()}break;default:dialog.render();dialog.open()}}},theme:editor.options.theme,disabled:(cmd=="scrawl"&&editor.queryCommandState("scrawl")==-1)||(cmd=="charts")});editorui.buttons[cmd]=ui;editor.addListener("selectionchange",function(){var unNeedCheckState={edittable:1};if(cmd in unNeedCheckState){return}var state=editor.queryCommandState(cmd);if(ui.getDom()){ui.setDisabled(state==-1);ui.setChecked(state)}});return ui}})(ci.toLowerCase())}})(p,dialogBtns[p])}editorui.snapscreen=function(editor,iframeUrl,title){title=editor.options.labelMap.snapscreen||editor.getLang("labelMap.snapscreen")||"";var ui=new editorui.Button({className:"edui-for-snapscreen",title:title,onclick:function(){editor.execCommand("snapscreen")},theme:editor.options.theme});editorui.buttons.snapscreen=ui;iframeUrl=iframeUrl||(editor.options.iframeUrlMap||{})["snapscreen"]||iframeUrlMap.snapscreen;if(iframeUrl){var dialog=new editorui.Dialog({iframeUrl:editor.ui.mapUrl(iframeUrl),editor:editor,className:"edui-for-snapscreen",title:title,buttons:[{className:"edui-okbutton",label:editor.getLang("ok"),editor:editor,onclick:function(){dialog.close(true)}},{className:"edui-cancelbutton",label:editor.getLang("cancel"),editor:editor,onclick:function(){dialog.close(false)}}]});dialog.render();editor.ui._dialogs.snapscreenDialog=dialog}editor.addListener("selectionchange",function(){ui.setDisabled(editor.queryCommandState("snapscreen")==-1)});return ui};editorui.insertcode=function(editor,list,title){list=editor.options.insertcode||[];title=editor.options.labelMap.insertcode||editor.getLang("labelMap.insertcode")||"";var items=[];utils.each(list,function(key,val){items.push({label:key,value:val,theme:editor.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" >'+(this.label||"")+"</div>"}})});var ui=new editorui.Combox({editor:editor,items:items,onselect:function(t,index){editor.execCommand("insertcode",this.items[index].value)},onbuttonclick:function(){this.showPopup()},title:title,initValue:title,className:"edui-for-insertcode",indexByValue:function(value){if(value){for(var i=0,ci;ci=this.items[i];i++){if(ci.value.indexOf(value)!=-1){return i}}}return -1}});editorui.buttons.insertcode=ui;editor.addListener("selectionchange",function(type,causeByUi,uiReady){if(!uiReady){var state=editor.queryCommandState("insertcode");if(state==-1){ui.setDisabled(true)}else{ui.setDisabled(false);var value=editor.queryCommandValue("insertcode");if(!value){ui.setValue(title);return}value&&(value=value.replace(/['"]/g,"").split(",")[0]);ui.setValue(value)}}});return ui};editorui.fontfamily=function(editor,list,title){list=editor.options.fontfamily||[];title=editor.options.labelMap.fontfamily||editor.getLang("labelMap.fontfamily")||"";if(!list.length){return}for(var i=0,ci,items=[];ci=list[i];i++){var langLabel=editor.getLang("fontfamily")[ci.name]||"";(function(key,val){items.push({label:key,value:val,theme:editor.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="font-family:'+utils.unhtml(this.value)+'">'+(this.label||"")+"</div>"}})})(ci.label||langLabel,ci.val)}var ui=new editorui.Combox({editor:editor,items:items,onselect:function(t,index){editor.execCommand("FontFamily",this.items[index].value)},onbuttonclick:function(){this.showPopup()},title:title,initValue:title,className:"edui-for-fontfamily",indexByValue:function(value){if(value){for(var i=0,ci;ci=this.items[i];i++){if(ci.value.indexOf(value)!=-1){return i}}}return -1}});editorui.buttons.fontfamily=ui;editor.addListener("selectionchange",function(type,causeByUi,uiReady){if(!uiReady){var state=editor.queryCommandState("FontFamily");if(state==-1){ui.setDisabled(true)}else{ui.setDisabled(false);var value=editor.queryCommandValue("FontFamily");value&&(value=value.replace(/['"]/g,"").split(",")[0]);ui.setValue(value)}}});return ui};editorui.fontsize=function(editor,list,title){title=editor.options.labelMap.fontsize||editor.getLang("labelMap.fontsize")||"";list=list||editor.options.fontsize||[];if(!list.length){return}var items=[];for(var i=0;i<list.length;i++){var size=list[i]+"px";items.push({label:size,value:size,theme:editor.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="line-height:1;font-size:'+this.value+'">'+(this.label||"")+"</div>"}})}var ui=new editorui.Combox({editor:editor,items:items,title:title,initValue:title,onselect:function(t,index){editor.execCommand("FontSize",this.items[index].value)},onbuttonclick:function(){this.showPopup()},className:"edui-for-fontsize"});editorui.buttons.fontsize=ui;editor.addListener("selectionchange",function(type,causeByUi,uiReady){if(!uiReady){var state=editor.queryCommandState("FontSize");if(state==-1){ui.setDisabled(true)}else{ui.setDisabled(false);ui.setValue(editor.queryCommandValue("FontSize"))}}});return ui};editorui.paragraph=function(editor,list,title){title=editor.options.labelMap.paragraph||editor.getLang("labelMap.paragraph")||"";list=editor.options.paragraph||[];if(utils.isEmptyObject(list)){return}var items=[];for(var i in list){items.push({value:i,label:list[i]||editor.getLang("paragraph")[i],theme:editor.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label"><span class="edui-for-'+this.value+'">'+(this.label||"")+"</span></div>"}})}var ui=new editorui.Combox({editor:editor,items:items,title:title,initValue:title,className:"edui-for-paragraph",onselect:function(t,index){editor.execCommand("Paragraph",this.items[index].value)},onbuttonclick:function(){this.showPopup()}});editorui.buttons.paragraph=ui;editor.addListener("selectionchange",function(type,causeByUi,uiReady){if(!uiReady){var state=editor.queryCommandState("Paragraph");if(state==-1){ui.setDisabled(true)}else{ui.setDisabled(false);var value=editor.queryCommandValue("Paragraph");var index=ui.indexByValue(value);if(index!=-1){ui.setValue(value)}else{ui.setValue(ui.initValue)}}}});return ui};editorui.customstyle=function(editor){var list=editor.options.customstyle||[],title=editor.options.labelMap.customstyle||editor.getLang("labelMap.customstyle")||"";if(!list.length){return}var langCs=editor.getLang("customstyle");for(var i=0,items=[],t;t=list[i++];){(function(t){var ck={};ck.label=t.label?t.label:langCs[t.name];ck.style=t.style;ck.className=t.className;ck.tag=t.tag;items.push({label:ck.label,value:ck,theme:editor.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label"><'+ck.tag+" "+(ck.className?' class="'+ck.className+'"':"")+(ck.style?' style="'+ck.style+'"':"")+">"+ck.label+"</"+ck.tag+"></div>"}})})(t)}var ui=new editorui.Combox({editor:editor,items:items,title:title,initValue:title,className:"edui-for-customstyle",onselect:function(t,index){editor.execCommand("customstyle",this.items[index].value)},onbuttonclick:function(){this.showPopup()},indexByValue:function(value){for(var i=0,ti;ti=this.items[i++];){if(ti.label==value){return i-1}}return -1}});editorui.buttons.customstyle=ui;editor.addListener("selectionchange",function(type,causeByUi,uiReady){if(!uiReady){var state=editor.queryCommandState("customstyle");if(state==-1){ui.setDisabled(true)}else{ui.setDisabled(false);var value=editor.queryCommandValue("customstyle");var index=ui.indexByValue(value);if(index!=-1){ui.setValue(value)}else{ui.setValue(ui.initValue)}}}});return ui};editorui.inserttable=function(editor,iframeUrl,title){title=editor.options.labelMap.inserttable||editor.getLang("labelMap.inserttable")||"";var ui=new editorui.TableButton({editor:editor,title:title,className:"edui-for-inserttable",onpicktable:function(t,numCols,numRows){editor.execCommand("InsertTable",{numRows:numRows,numCols:numCols,border:1})},onbuttonclick:function(){this.showPopup()}});editorui.buttons.inserttable=ui;editor.addListener("selectionchange",function(){ui.setDisabled(editor.queryCommandState("inserttable")==-1)});return ui};editorui.lineheight=function(editor){var val=editor.options.lineheight||[];if(!val.length){return}for(var i=0,ci,items=[];ci=val[i++];){items.push({label:ci,value:ci,theme:editor.options.theme,onclick:function(){editor.execCommand("lineheight",this.value)}})}var ui=new editorui.MenuButton({editor:editor,className:"edui-for-lineheight",title:editor.options.labelMap.lineheight||editor.getLang("labelMap.lineheight")||"",items:items,onbuttonclick:function(){var value=editor.queryCommandValue("LineHeight")||this.value;editor.execCommand("LineHeight",value)}});editorui.buttons.lineheight=ui;editor.addListener("selectionchange",function(){var state=editor.queryCommandState("LineHeight");if(state==-1){ui.setDisabled(true)}else{ui.setDisabled(false);var value=editor.queryCommandValue("LineHeight");value&&ui.setValue((value+"").replace(/cm/,""));ui.setChecked(state)}});return ui};var rowspacings=["top","bottom"];for(var r=0,ri;ri=rowspacings[r++];){(function(cmd){editorui["rowspacing"+cmd]=function(editor){var val=editor.options["rowspacing"+cmd]||[];if(!val.length){return null}for(var i=0,ci,items=[];ci=val[i++];){items.push({label:ci,value:ci,theme:editor.options.theme,onclick:function(){editor.execCommand("rowspacing",this.value,cmd)}})}var ui=new editorui.MenuButton({editor:editor,className:"edui-for-rowspacing"+cmd,title:editor.options.labelMap["rowspacing"+cmd]||editor.getLang("labelMap.rowspacing"+cmd)||"",items:items,onbuttonclick:function(){var value=editor.queryCommandValue("rowspacing",cmd)||this.value;editor.execCommand("rowspacing",value,cmd)}});editorui.buttons[cmd]=ui;editor.addListener("selectionchange",function(){var state=editor.queryCommandState("rowspacing",cmd);if(state==-1){ui.setDisabled(true)}else{ui.setDisabled(false);var value=editor.queryCommandValue("rowspacing",cmd);value&&ui.setValue((value+"").replace(/%/,""));ui.setChecked(state)}});return ui}})(ri)}var lists=["insertorderedlist","insertunorderedlist"];for(var l=0,cl;cl=lists[l++];){(function(cmd){editorui[cmd]=function(editor){var vals=editor.options[cmd],_onMenuClick=function(){editor.execCommand(cmd,this.value)},items=[];for(var i in vals){items.push({label:vals[i]||editor.getLang()[cmd][i]||"",value:i,theme:editor.options.theme,onclick:_onMenuClick})}var ui=new editorui.MenuButton({editor:editor,className:"edui-for-"+cmd,title:editor.getLang("labelMap."+cmd)||"",items:items,onbuttonclick:function(){var value=editor.queryCommandValue(cmd)||this.value;editor.execCommand(cmd,value)}});editorui.buttons[cmd]=ui;editor.addListener("selectionchange",function(){var state=editor.queryCommandState(cmd);if(state==-1){ui.setDisabled(true)}else{ui.setDisabled(false);var value=editor.queryCommandValue(cmd);ui.setValue(value);ui.setChecked(state)}});return ui}})(cl)}editorui.fullscreen=function(editor,title){title=editor.options.labelMap.fullscreen||editor.getLang("labelMap.fullscreen")||"";var ui=new editorui.Button({className:"edui-for-fullscreen",title:title,theme:editor.options.theme,onclick:function(){if(editor.ui){editor.ui.setFullScreen(!editor.ui.isFullScreen())}this.setChecked(editor.ui.isFullScreen())}});editorui.buttons.fullscreen=ui;editor.addListener("selectionchange",function(){var state=editor.queryCommandState("fullscreen");ui.setDisabled(state==-1);ui.setChecked(editor.ui.isFullScreen())});return ui};editorui.emotion=function(editor,iframeUrl){var cmd="emotion";var ui=new editorui.MultiMenuPop({title:editor.options.labelMap[cmd]||editor.getLang("labelMap."+cmd+"")||"",editor:editor,className:"edui-for-"+cmd,iframeUrl:editor.ui.mapUrl(iframeUrl||(editor.options.iframeUrlMap||{})[cmd]||iframeUrlMap[cmd])});editorui.buttons[cmd]=ui;editor.addListener("selectionchange",function(){ui.setDisabled(editor.queryCommandState(cmd)==-1)});return ui};editorui.autotypeset=function(editor){var ui=new editorui.AutoTypeSetButton({editor:editor,title:editor.options.labelMap.autotypeset||editor.getLang("labelMap.autotypeset")||"",className:"edui-for-autotypeset",onbuttonclick:function(){editor.execCommand("autotypeset")}});editorui.buttons.autotypeset=ui;editor.addListener("selectionchange",function(){ui.setDisabled(editor.queryCommandState("autotypeset")==-1)});return ui};editorui.simpleupload=function(editor){var name="simpleupload",ui=new editorui.Button({className:"edui-for-"+name,title:editor.options.labelMap[name]||editor.getLang("labelMap."+name)||"",onclick:function(){},theme:editor.options.theme,showText:false});editorui.buttons[name]=ui;editor.addListener("ready",function(){var b=ui.getDom("body"),iconSpan=b.children[0];editor.fireEvent("simpleuploadbtnready",iconSpan)});editor.addListener("selectionchange",function(type,causeByUi,uiReady){var state=editor.queryCommandState(name);if(state==-1){ui.setDisabled(true);ui.setChecked(false)}else{if(!uiReady){ui.setDisabled(false);ui.setChecked(state)}}});return ui}})();(function(){var utils=baidu.editor.utils,uiUtils=baidu.editor.ui.uiUtils,UIBase=baidu.editor.ui.UIBase,domUtils=baidu.editor.dom.domUtils;var nodeStack=[];function EditorUI(options){this.initOptions(options);this.initEditorUI()}EditorUI.prototype={uiName:"editor",initEditorUI:function(){this.editor.ui=this;this._dialogs={};this.initUIBase();this._initToolbars();var editor=this.editor,me=this;editor.addListener("ready",function(){editor.getDialog=function(name){return editor.ui._dialogs[name+"Dialog"]};domUtils.on(editor.window,"scroll",function(evt){baidu.editor.ui.Popup.postHide(evt)});editor.ui._actualFrameWidth=editor.options.initialFrameWidth;UE.browser.ie&&UE.browser.version===6&&editor.container.ownerDocument.execCommand("BackgroundImageCache",false,true);if(editor.options.elementPathEnabled){editor.ui.getDom("elementpath").innerHTML='<div class="edui-editor-breadcrumb">'+editor.getLang("elementPathTip")+":</div>"}if(editor.options.wordCount){function countFn(){setCount(editor,me);domUtils.un(editor.document,"click",arguments.callee)}domUtils.on(editor.document,"click",countFn);editor.ui.getDom("wordcount").innerHTML=editor.getLang("wordCountTip")}editor.ui._scale();if(editor.options.scaleEnabled){if(editor.autoHeightEnabled){editor.disableAutoHeight()}me.enableScale()}else{me.disableScale()}if(!editor.options.elementPathEnabled&&!editor.options.wordCount&&!editor.options.scaleEnabled){editor.ui.getDom("elementpath").style.display="none";editor.ui.getDom("wordcount").style.display="none";editor.ui.getDom("scale").style.display="none"}if(!editor.selection.isFocus()){return}editor.fireEvent("selectionchange",false,true)});editor.addListener("mousedown",function(t,evt){var el=evt.target||evt.srcElement;baidu.editor.ui.Popup.postHide(evt,el);baidu.editor.ui.ShortCutMenu.postHide(evt)});editor.addListener("delcells",function(){if(UE.ui.edittip){new UE.ui.edittip(editor)}editor.getDialog("edittip").open()});var pastePop,isPaste=false,timer;editor.addListener("afterpaste",function(){if(editor.queryCommandState("pasteplain")){return}if(baidu.editor.ui.PastePicker){pastePop=new baidu.editor.ui.Popup({content:new baidu.editor.ui.PastePicker({editor:editor}),editor:editor,className:"edui-wordpastepop"});pastePop.render()}isPaste=true});editor.addListener("afterinserthtml",function(){clearTimeout(timer);timer=setTimeout(function(){if(pastePop&&(isPaste||editor.ui._isTransfer)){if(pastePop.isHidden()){var span=domUtils.createElement(editor.document,"span",{style:"line-height:0px;",innerHTML:"\ufeff"}),range=editor.selection.getRange();range.insertNode(span);var tmp=getDomNode(span,"firstChild","previousSibling");tmp&&pastePop.showAnchor(tmp.nodeType==3?tmp.parentNode:tmp);domUtils.remove(span)}else{pastePop.show()}delete editor.ui._isTransfer;isPaste=false}},200)});editor.addListener("contextmenu",function(t,evt){baidu.editor.ui.Popup.postHide(evt)});editor.addListener("keydown",function(t,evt){if(pastePop){pastePop.dispose(evt)}var keyCode=evt.keyCode||evt.which;if(evt.altKey&&keyCode==90){UE.ui.buttons.fullscreen.onclick()}});editor.addListener("wordcount",function(type){setCount(this,me)});function setCount(editor,ui){editor.setOpt({wordCount:true,maximumWords:10000,wordCountMsg:editor.options.wordCountMsg||editor.getLang("wordCountMsg"),wordOverFlowMsg:editor.options.wordOverFlowMsg||editor.getLang("wordOverFlowMsg")});var opt=editor.options,max=opt.maximumWords,msg=opt.wordCountMsg,errMsg=opt.wordOverFlowMsg,countDom=ui.getDom("wordcount");if(!opt.wordCount){return}var count=editor.getContentLength(true);if(count>max){countDom.innerHTML=errMsg;editor.fireEvent("wordcountoverflow")}else{countDom.innerHTML=msg.replace("{#leave}",max-count).replace("{#count}",count)}}editor.addListener("selectionchange",function(){if(editor.options.elementPathEnabled){me[(editor.queryCommandState("elementpath")==-1?"dis":"en")+"ableElementPath"]()}if(editor.options.scaleEnabled){me[(editor.queryCommandState("scale")==-1?"dis":"en")+"ableScale"]()}});var popup=new baidu.editor.ui.Popup({editor:editor,content:"",className:"edui-bubble",_onEditButtonClick:function(){this.hide();editor.ui._dialogs.linkDialog.open()},_onImgEditButtonClick:function(name){this.hide();editor.ui._dialogs[name]&&editor.ui._dialogs[name].open()},_onImgSetFloat:function(value){this.hide();editor.execCommand("imagefloat",value)},_setIframeAlign:function(value){var frame=popup.anchorEl;var newFrame=frame.cloneNode(true);switch(value){case -2:newFrame.setAttribute("align","");break;case -1:newFrame.setAttribute("align","left");break;case 1:newFrame.setAttribute("align","right");break}frame.parentNode.insertBefore(newFrame,frame);domUtils.remove(frame);popup.anchorEl=newFrame;popup.showAnchor(popup.anchorEl)},_updateIframe:function(){var frame=editor._iframe=popup.anchorEl;if(domUtils.hasClass(frame,"ueditor_baidumap")){editor.selection.getRange().selectNode(frame).select();editor.ui._dialogs.mapDialog.open();popup.hide()}else{editor.ui._dialogs.insertframeDialog.open();popup.hide()}},_onRemoveButtonClick:function(cmdName){editor.execCommand(cmdName);this.hide()},queryAutoHide:function(el){if(el&&el.ownerDocument==editor.document){if(el.tagName.toLowerCase()=="img"||domUtils.findParentByTagName(el,"a",true)){return el!==popup.anchorEl}}return baidu.editor.ui.Popup.prototype.queryAutoHide.call(this,el)}});popup.render();if(editor.options.imagePopup){editor.addListener("mouseover",function(t,evt){evt=evt||window.event;var el=evt.target||evt.srcElement;if(editor.ui._dialogs.insertframeDialog&&/iframe/ig.test(el.tagName)){var html=popup.formatHtml("<nobr>"+editor.getLang("property")+': <span onclick=$$._setIframeAlign(-2) class="edui-clickable">'+editor.getLang("default")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(-1) class="edui-clickable">'+editor.getLang("justifyleft")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(1) class="edui-clickable">'+editor.getLang("justifyright")+'</span>&nbsp;&nbsp; <span onclick="$$._updateIframe( this);" class="edui-clickable">'+editor.getLang("modify")+"</span></nobr>");if(html){popup.getDom("content").innerHTML=html;popup.anchorEl=el;popup.showAnchor(popup.anchorEl)}else{popup.hide()}}});editor.addListener("selectionchange",function(t,causeByUi){if(!causeByUi){return}var html="",str="",img=editor.selection.getRange().getClosedNode(),dialogs=editor.ui._dialogs;if(img&&img.tagName=="IMG"){var dialogName="insertimageDialog";if(img.className.indexOf("edui-faked-video")!=-1||img.className.indexOf("edui-upload-video")!=-1){dialogName="insertvideoDialog"}if(img.className.indexOf("edui-faked-webapp")!=-1){dialogName="webappDialog"}if(img.src.indexOf("http://api.map.baidu.com")!=-1){dialogName="mapDialog"}if(img.className.indexOf("edui-faked-music")!=-1){dialogName="musicDialog"}if(img.src.indexOf("http://maps.google.com/maps/api/staticmap")!=-1){dialogName="gmapDialog"}if(img.getAttribute("anchorname")){dialogName="anchorDialog";html=popup.formatHtml("<nobr>"+editor.getLang("property")+': <span onclick=$$._onImgEditButtonClick("anchorDialog") class="edui-clickable">'+editor.getLang("modify")+"</span>&nbsp;&nbsp;<span onclick=$$._onRemoveButtonClick('anchor') class=\"edui-clickable\">"+editor.getLang("delete")+"</span></nobr>")}if(img.getAttribute("word_img")){editor.word_img=[img.getAttribute("word_img")];dialogName="wordimageDialog"}if(domUtils.hasClass(img,"loadingclass")||domUtils.hasClass(img,"loaderrorclass")){dialogName=""}if(!dialogs[dialogName]){return}str="<nobr>"+editor.getLang("property")+': <span onclick=$$._onImgSetFloat("none") class="edui-clickable">'+editor.getLang("default")+'</span>&nbsp;&nbsp;<span onclick=$$._onImgSetFloat("left") class="edui-clickable">'+editor.getLang("justifyleft")+'</span>&nbsp;&nbsp;<span onclick=$$._onImgSetFloat("right") class="edui-clickable">'+editor.getLang("justifyright")+'</span>&nbsp;&nbsp;<span onclick=$$._onImgSetFloat("center") class="edui-clickable">'+editor.getLang("justifycenter")+"</span>&nbsp;&nbsp;<span onclick=\"$$._onImgEditButtonClick('"+dialogName+'\');" class="edui-clickable">'+editor.getLang("modify")+"</span></nobr>";!html&&(html=popup.formatHtml(str))}if(editor.ui._dialogs.linkDialog){var link=editor.queryCommandValue("link");var url;if(link&&(url=(link.getAttribute("_href")||link.getAttribute("href",2)))){var txt=url;if(url.length>30){txt=url.substring(0,20)+"..."}if(html){html+='<div style="height:5px;"></div>'}html+=popup.formatHtml("<nobr>"+editor.getLang("anthorMsg")+': <a target="_blank" href="'+url+'" title="'+url+'" >'+txt+'</a> <span class="edui-clickable" onclick="$$._onEditButtonClick();">'+editor.getLang("modify")+'</span> <span class="edui-clickable" onclick="$$._onRemoveButtonClick(\'unlink\');"> '+editor.getLang("clear")+"</span></nobr>");popup.showAnchor(link)}}if(html){popup.getDom("content").innerHTML=html;popup.anchorEl=img||link;popup.showAnchor(popup.anchorEl)}else{popup.hide()}})}},_initToolbars:function(){var editor=this.editor;var toolbars=this.toolbars||[];var toolbarUis=[];for(var i=0;i<toolbars.length;i++){var toolbar=toolbars[i];var toolbarUi=new baidu.editor.ui.Toolbar({theme:editor.options.theme});for(var j=0;j<toolbar.length;j++){var toolbarItem=toolbar[j];var toolbarItemUi=null;if(typeof toolbarItem=="string"){toolbarItem=toolbarItem.toLowerCase();if(toolbarItem=="|"){toolbarItem="Separator"}if(toolbarItem=="||"){toolbarItem="Breakline"}if(baidu.editor.ui[toolbarItem]){toolbarItemUi=new baidu.editor.ui[toolbarItem](editor)}if(toolbarItem=="fullscreen"){if(toolbarUis&&toolbarUis[0]){toolbarUis[0].items.splice(0,0,toolbarItemUi)}else{toolbarItemUi&&toolbarUi.items.splice(0,0,toolbarItemUi)}continue}}else{toolbarItemUi=toolbarItem}if(toolbarItemUi&&toolbarItemUi.id){toolbarUi.add(toolbarItemUi)}}toolbarUis[i]=toolbarUi}utils.each(UE._customizeUI,function(obj,key){var itemUI,index;if(obj.id&&obj.id!=editor.key){return false}itemUI=obj.execFn.call(editor,editor,key);if(itemUI){index=obj.index;if(index===undefined){index=toolbarUi.items.length}toolbarUi.add(itemUI,index)}});this.toolbars=toolbarUis},getHtmlTpl:function(){return'<div id="##" class="%%"><div id="##_toolbarbox" class="%%-toolbarbox">'+(this.toolbars.length?'<div id="##_toolbarboxouter" class="%%-toolbarboxouter"><div class="%%-toolbarboxinner">'+this.renderToolbarBoxHtml()+"</div></div>":"")+'<div id="##_toolbarmsg" class="%%-toolbarmsg" style="display:none;"><div id = "##_upload_dialog" class="%%-toolbarmsg-upload" onclick="$$.showWordImageDialog();">'+this.editor.getLang("clickToUpload")+'</div><div class="%%-toolbarmsg-close" onclick="$$.hideToolbarMsg();">x</div><div id="##_toolbarmsg_label" class="%%-toolbarmsg-label"></div><div style="height:0;overflow:hidden;clear:both;"></div></div><div id="##_message_holder" class="%%-messageholder"></div></div><div id="##_iframeholder" class="%%-iframeholder"></div><div id="##_bottombar" class="%%-bottomContainer"><table><tr><td id="##_elementpath" class="%%-bottombar"></td><td id="##_wordcount" class="%%-wordcount"></td><td id="##_scale" class="%%-scale"><div class="%%-icon"></div></td></tr></table></div><div id="##_scalelayer"></div></div>'},showWordImageDialog:function(){this._dialogs.wordimageDialog.open()},renderToolbarBoxHtml:function(){var buff=[];for(var i=0;i<this.toolbars.length;i++){buff.push(this.toolbars[i].renderHtml())}return buff.join("")},setFullScreen:function(fullscreen){var editor=this.editor,container=editor.container.parentNode.parentNode;if(this._fullscreen!=fullscreen){this._fullscreen=fullscreen;this.editor.fireEvent("beforefullscreenchange",fullscreen);if(baidu.editor.browser.gecko){var bk=editor.selection.getRange().createBookmark()}if(fullscreen){while(container.tagName!="BODY"){var position=baidu.editor.dom.domUtils.getComputedStyle(container,"position");nodeStack.push(position);container.style.position="static";container=container.parentNode}this._bakHtmlOverflow=document.documentElement.style.overflow;this._bakBodyOverflow=document.body.style.overflow;this._bakAutoHeight=this.editor.autoHeightEnabled;this._bakScrollTop=Math.max(document.documentElement.scrollTop,document.body.scrollTop);this._bakEditorContaninerWidth=editor.iframe.parentNode.offsetWidth;if(this._bakAutoHeight){editor.autoHeightEnabled=false;this.editor.disableAutoHeight()}document.documentElement.style.overflow="hidden";window.scrollTo(0,window.scrollY);this._bakCssText=this.getDom().style.cssText;this._bakCssText1=this.getDom("iframeholder").style.cssText;editor.iframe.parentNode.style.width="";this._updateFullScreen()}else{while(container.tagName!="BODY"){container.style.position=nodeStack.shift();container=container.parentNode}this.getDom().style.cssText=this._bakCssText;this.getDom("iframeholder").style.cssText=this._bakCssText1;if(this._bakAutoHeight){editor.autoHeightEnabled=true;this.editor.enableAutoHeight()}document.documentElement.style.overflow=this._bakHtmlOverflow;document.body.style.overflow=this._bakBodyOverflow;editor.iframe.parentNode.style.width=this._bakEditorContaninerWidth+"px";window.scrollTo(0,this._bakScrollTop)}if(browser.gecko&&editor.body.contentEditable==="true"){var input=document.createElement("input");document.body.appendChild(input);editor.body.contentEditable=false;setTimeout(function(){input.focus();setTimeout(function(){editor.body.contentEditable=true;editor.fireEvent("fullscreenchanged",fullscreen);editor.selection.getRange().moveToBookmark(bk).select(true);baidu.editor.dom.domUtils.remove(input);fullscreen&&window.scroll(0,0)},0)},0)}if(editor.body.contentEditable==="true"){this.editor.fireEvent("fullscreenchanged",fullscreen);this.triggerLayout()}}},_updateFullScreen:function(){if(this._fullscreen){var vpRect=uiUtils.getViewportRect();this.getDom().style.cssText="border:0;position:absolute;left:0;top:"+(this.editor.options.topOffset||0)+"px;width:"+vpRect.width+"px;height:"+vpRect.height+"px;z-index:"+(this.getDom().style.zIndex*1+100);uiUtils.setViewportOffset(this.getDom(),{left:0,top:this.editor.options.topOffset||0});this.editor.setHeight(vpRect.height-this.getDom("toolbarbox").offsetHeight-this.getDom("bottombar").offsetHeight-(this.editor.options.topOffset||0),true);if(browser.gecko){try{window.onresize()}catch(e){}}}},_updateElementPath:function(){var bottom=this.getDom("elementpath"),list;if(this.elementPathEnabled&&(list=this.editor.queryCommandValue("elementpath"))){var buff=[];for(var i=0,ci;ci=list[i];i++){buff[i]=this.formatHtml('<span unselectable="on" onclick="$$.editor.execCommand(&quot;elementpath&quot;, &quot;'+i+'&quot;);">'+ci+"</span>")}bottom.innerHTML='<div class="edui-editor-breadcrumb" onmousedown="return false;">'+this.editor.getLang("elementPathTip")+": "+buff.join(" &gt; ")+"</div>"}else{bottom.style.display="none"}},disableElementPath:function(){var bottom=this.getDom("elementpath");bottom.innerHTML="";bottom.style.display="none";this.elementPathEnabled=false},enableElementPath:function(){var bottom=this.getDom("elementpath");bottom.style.display="";this.elementPathEnabled=true;this._updateElementPath()},_scale:function(){var doc=document,editor=this.editor,editorHolder=editor.container,editorDocument=editor.document,toolbarBox=this.getDom("toolbarbox"),bottombar=this.getDom("bottombar"),scale=this.getDom("scale"),scalelayer=this.getDom("scalelayer");var isMouseMove=false,position=null,minEditorHeight=0,minEditorWidth=editor.options.minFrameWidth,pageX=0,pageY=0,scaleWidth=0,scaleHeight=0;function down(){position=domUtils.getXY(editorHolder);if(!minEditorHeight){minEditorHeight=editor.options.minFrameHeight+toolbarBox.offsetHeight+bottombar.offsetHeight}alert((editor.options.zIndex+1));scalelayer.style.cssText="position:absolute;left:0;display:;top:0;background-color:#41ABFF;opacity:0.4;filter: Alpha(opacity=40);width:"+editorHolder.offsetWidth+"px;height:"+editorHolder.offsetHeight+"px;z-index:"+(editor.options.zIndex+1);domUtils.on(doc,"mousemove",move);domUtils.on(editorDocument,"mouseup",up);domUtils.on(doc,"mouseup",up)}var me=this;this.editor.addListener("fullscreenchanged",function(e,fullScreen){if(fullScreen){me.disableScale()}else{if(me.editor.options.scaleEnabled){me.enableScale();var tmpNode=me.editor.document.createElement("span");me.editor.body.appendChild(tmpNode);me.editor.body.style.height=Math.max(domUtils.getXY(tmpNode).y,me.editor.iframe.offsetHeight-20)+"px";domUtils.remove(tmpNode)}}});function move(event){clearSelection();var e=event||window.event;pageX=e.pageX||(doc.documentElement.scrollLeft+e.clientX);pageY=e.pageY||(doc.documentElement.scrollTop+e.clientY);scaleWidth=pageX-position.x;scaleHeight=pageY-position.y;if(scaleWidth>=minEditorWidth){isMouseMove=true;scalelayer.style.width=scaleWidth+"px"}if(scaleHeight>=minEditorHeight){isMouseMove=true;scalelayer.style.height=scaleHeight+"px"}}function up(){if(isMouseMove){isMouseMove=false;editor.ui._actualFrameWidth=scalelayer.offsetWidth-2;editorHolder.style.width=editor.ui._actualFrameWidth+"px";editor.setHeight(scalelayer.offsetHeight-bottombar.offsetHeight-toolbarBox.offsetHeight-2,true)}if(scalelayer){scalelayer.style.display="none"}clearSelection();domUtils.un(doc,"mousemove",move);domUtils.un(editorDocument,"mouseup",up);domUtils.un(doc,"mouseup",up)}function clearSelection(){if(browser.ie){doc.selection.clear()}else{window.getSelection().removeAllRanges()}}this.enableScale=function(){if(editor.queryCommandState("source")==1){return}scale.style.display="";this.scaleEnabled=true;domUtils.on(scale,"mousedown",down)};this.disableScale=function(){scale.style.display="none";this.scaleEnabled=false;domUtils.un(scale,"mousedown",down)}},isFullScreen:function(){return this._fullscreen},postRender:function(){UIBase.prototype.postRender.call(this);for(var i=0;i<this.toolbars.length;i++){this.toolbars[i].postRender()}var me=this;var timerId,domUtils=baidu.editor.dom.domUtils,updateFullScreenTime=function(){clearTimeout(timerId);timerId=setTimeout(function(){me._updateFullScreen()})};domUtils.on(window,"resize",updateFullScreenTime);me.addListener("destroy",function(){domUtils.un(window,"resize",updateFullScreenTime);clearTimeout(timerId)})},showToolbarMsg:function(msg,flag){this.getDom("toolbarmsg_label").innerHTML=msg;this.getDom("toolbarmsg").style.display="";if(!flag){var w=this.getDom("upload_dialog");w.style.display="none"}},hideToolbarMsg:function(){this.getDom("toolbarmsg").style.display="none"},mapUrl:function(url){return url?url.replace("~/",this.editor.options.UEDITOR_HOME_URL||""):""},triggerLayout:function(){var dom=this.getDom();if(dom.style.zoom=="1"){dom.style.zoom="100%"}else{dom.style.zoom="1"}}};utils.inherits(EditorUI,baidu.editor.ui.UIBase);var instances={};UE.ui.Editor=function(options){var editor=new UE.Editor(options);editor.options.editor=editor;utils.loadFile(document,{href:editor.options.themePath+editor.options.theme+"/css/ueditor.css",tag:"link",type:"text/css",rel:"stylesheet"});var oldRender=editor.render;editor.render=function(holder){if(holder.constructor===String){editor.key=holder;instances[holder]=editor}utils.domReady(function(){editor.langIsReady?renderUI():editor.addListener("langReady",renderUI);function renderUI(){editor.setOpt({labelMap:editor.options.labelMap||editor.getLang("labelMap")});new EditorUI(editor.options);if(holder){if(holder.constructor===String){holder=document.getElementById(holder)}holder&&holder.getAttribute("name")&&(editor.options.textarea=holder.getAttribute("name"));if(holder&&/script|textarea/ig.test(holder.tagName)){var newDiv=document.createElement("div");holder.parentNode.insertBefore(newDiv,holder);var cont=holder.value||holder.innerHTML;editor.options.initialContent=/^[\t\r\n ]*$/.test(cont)?editor.options.initialContent:cont.replace(/>[\n\r\t]+([ ]{4})+/g,">").replace(/[\n\r\t]+([ ]{4})+</g,"<").replace(/>[\n\r\t]+</g,"><");holder.className&&(newDiv.className=holder.className);holder.style.cssText&&(newDiv.style.cssText=holder.style.cssText);if(/textarea/i.test(holder.tagName)){editor.textarea=holder;editor.textarea.style.display="none"}else{holder.parentNode.removeChild(holder)}if(holder.id){newDiv.id=holder.id;domUtils.removeAttributes(holder,"id")}holder=newDiv;holder.innerHTML=""}}domUtils.addClass(holder,"edui-"+editor.options.theme);editor.ui.render(holder);var opt=editor.options;editor.container=editor.ui.getDom();var parents=domUtils.findParents(holder,true);var displays=[];for(var i=0,ci;ci=parents[i];i++){displays[i]=ci.style.display;ci.style.display="block"}if(opt.initialFrameWidth){opt.minFrameWidth=opt.initialFrameWidth}else{opt.minFrameWidth=opt.initialFrameWidth=holder.offsetWidth;var styleWidth=holder.style.width;if(/%$/.test(styleWidth)){opt.initialFrameWidth=styleWidth}}if(opt.initialFrameHeight){opt.minFrameHeight=opt.initialFrameHeight}else{opt.initialFrameHeight=opt.minFrameHeight=holder.offsetHeight}for(var i=0,ci;ci=parents[i];i++){ci.style.display=displays[i]}if(holder.style.height){holder.style.height=""}editor.container.style.width=opt.initialFrameWidth+(/%$/.test(opt.initialFrameWidth)?"":"px");editor.container.style.zIndex=opt.zIndex;oldRender.call(editor,editor.ui.getDom("iframeholder"));editor.fireEvent("afteruiready")}})};return editor};UE.getEditor=function(id,opt){var editor=instances[id];if(!editor){editor=instances[id]=new UE.ui.Editor(opt);editor.render(id)}return editor};UE.delEditor=function(id){var editor;if(editor=instances[id]){editor.key&&editor.destroy();delete instances[id]}};UE.registerUI=function(uiName,fn,index,editorId){utils.each(uiName.split(/\s+/),function(name){UE._customizeUI[name]={id:editorId,execFn:fn,index:index}})}})();UE.registerUI("message",function(editor){var editorui=baidu.editor.ui;var Message=editorui.Message;var holder;var _messageItems=[];var me=editor;me.addListener("ready",function(){holder=document.getElementById(me.ui.id+"_message_holder");updateHolderPos();setTimeout(function(){updateHolderPos()},500)});me.addListener("showmessage",function(type,opt){opt=utils.isString(opt)?{content:opt}:opt;var message=new Message({timeout:opt.timeout,type:opt.type,content:opt.content,keepshow:opt.keepshow,editor:me}),mid=opt.id||("msg_"+(+new Date()).toString(36));message.render(holder);_messageItems[mid]=message;message.reset(opt);updateHolderPos();return mid});me.addListener("updatemessage",function(type,id,opt){opt=utils.isString(opt)?{content:opt}:opt;var message=_messageItems[id];message.render(holder);message&&message.reset(opt)});me.addListener("hidemessage",function(type,id){var message=_messageItems[id];message&&message.hide()});function updateHolderPos(){var toolbarbox=me.ui.getDom("toolbarbox");if(toolbarbox){holder.style.top=toolbarbox.offsetHeight+3+"px"}holder.style.zIndex=Math.max(me.options.zIndex,me.iframe.style.zIndex)+1}});UE.registerUI("autosave",function(editor){var timer=null,uid=null;editor.on("afterautosave",function(){clearTimeout(timer);timer=setTimeout(function(){if(uid){editor.trigger("hidemessage",uid)}uid=editor.trigger("showmessage",{content:editor.getLang("autosave.success"),timeout:2000})},2000)})})})();

/*<script src="${ctxStatic}/org/it313/ueditor-1.4.3.3/lang/zh-cn/zh-cn.js"></script>*/
UE.I18N["zh-cn"]={labelMap:{anchor:"锚点",undo:"撤销",redo:"重做",bold:"加粗",indent:"首行缩进",snapscreen:"截图",italic:"斜体",underline:"下划线",strikethrough:"删除线",subscript:"下标",fontborder:"字符边框",superscript:"上标",formatmatch:"格式刷",source:"源代码",blockquote:"引用",pasteplain:"纯文本粘贴模式",selectall:"全选",print:"打印",preview:"预览",horizontal:"分隔线",removeformat:"清除格式",time:"时间",date:"日期",unlink:"取消链接",insertrow:"前插入行",insertcol:"前插入列",mergeright:"右合并单元格",mergedown:"下合并单元格",deleterow:"删除行",deletecol:"删除列",splittorows:"拆分成行",splittocols:"拆分成列",splittocells:"完全拆分单元格",deletecaption:"删除表格标题",inserttitle:"插入标题",mergecells:"合并多个单元格",deletetable:"删除表格",cleardoc:"清空文档",insertparagraphbeforetable:"表格前插入行",insertcode:"代码语言",fontfamily:"字体",fontsize:"字号",paragraph:"段落格式",simpleupload:"单图上传",insertimage:"多图上传",edittable:"表格属性",edittd:"单元格属性",link:"超链接",emotion:"表情",spechars:"特殊字符",searchreplace:"查询替换",map:"Baidu地图",gmap:"Google地图",insertvideo:"视频",help:"帮助",justifyleft:"居左对齐",justifyright:"居右对齐",justifycenter:"居中对齐",justifyjustify:"两端对齐",forecolor:"字体颜色",backcolor:"背景色",insertorderedlist:"有序列表",insertunorderedlist:"无序列表",fullscreen:"全屏",directionalityltr:"从左向右输入",directionalityrtl:"从右向左输入",rowspacingtop:"段前距",rowspacingbottom:"段后距",pagebreak:"分页",insertframe:"插入Iframe",imagenone:"默认",imageleft:"左浮动",imageright:"右浮动",attachment:"附件",imagecenter:"居中",wordimage:"图片转存",lineheight:"行间距",edittip:"编辑提示",customstyle:"自定义标题",autotypeset:"自动排版",webapp:"百度应用",touppercase:"字母大写",tolowercase:"字母小写",background:"背景",template:"模板",scrawl:"涂鸦",music:"音乐",inserttable:"插入表格",drafts:"从草稿箱加载",charts:"图表"},insertorderedlist:{num:"1,2,3...",num1:"1),2),3)...",num2:"(1),(2),(3)...",cn:"一,二,三....",cn1:"一),二),三)....",cn2:"(一),(二),(三)....",decimal:"1,2,3...","lower-alpha":"a,b,c...","lower-roman":"i,ii,iii...","upper-alpha":"A,B,C...","upper-roman":"I,II,III..."},insertunorderedlist:{circle:"○ 大圆圈",disc:"● 小黑点",square:"■ 小方块 ",dash:"— 破折号",dot:" 。 小圆圈"},paragraph:{p:"段落",h1:"标题 1",h2:"标题 2",h3:"标题 3",h4:"标题 4",h5:"标题 5",h6:"标题 6"},fontfamily:{songti:"宋体",kaiti:"楷体",heiti:"黑体",lishu:"隶书",yahei:"微软雅黑",andaleMono:"andale mono",arial:"arial",arialBlack:"arial black",comicSansMs:"comic sans ms",impact:"impact",timesNewRoman:"times new roman"},customstyle:{tc:"标题居中",tl:"标题居左",im:"强调",hi:"明显强调"},autoupload:{exceedSizeError:"文件大小超出限制",exceedTypeError:"文件格式不允许",jsonEncodeError:"服务器返回格式错误",loading:"正在上传...",loadError:"上传错误",errorLoadConfig:"后端配置项没有正常加载，上传插件不能正常使用！"},simpleupload:{exceedSizeError:"文件大小超出限制",exceedTypeError:"文件格式不允许",jsonEncodeError:"服务器返回格式错误",loading:"正在上传...",loadError:"上传错误",errorLoadConfig:"后端配置项没有正常加载，上传插件不能正常使用！"},elementPathTip:"元素路径",wordCountTip:"字数统计",wordCountMsg:"当前已输入{#count}个字符, 您还可以输入{#leave}个字符。 ",wordOverFlowMsg:'<span style="color:red;">字数超出最大允许值，服务器可能拒绝保存！</span>',ok:"确认",cancel:"取消",closeDialog:"关闭对话框",tableDrag:"表格拖动必须引入uiUtils.js文件！",autofloatMsg:"工具栏浮动依赖编辑器UI，您首先需要引入UI文件!",loadconfigError:"获取后台配置项请求出错，上传功能将不能正常使用！",loadconfigFormatError:"后台配置项返回格式出错，上传功能将不能正常使用！",loadconfigHttpError:"请求后台配置项http错误，上传功能将不能正常使用！",snapScreen_plugin:{browserMsg:"仅支持IE浏览器！",callBackErrorMsg:"服务器返回数据有误，请检查配置项之后重试。",uploadErrorMsg:"截图上传失败，请检查服务器端环境! "},insertcode:{as3:"ActionScript 3",bash:"Bash/Shell",cpp:"C/C++",css:"CSS",cf:"ColdFusion","c#":"C#",delphi:"Delphi",diff:"Diff",erlang:"Erlang",groovy:"Groovy",html:"HTML",java:"Java",jfx:"JavaFX",js:"JavaScript",pl:"Perl",php:"PHP",plain:"Plain Text",ps:"PowerShell",python:"Python",ruby:"Ruby",scala:"Scala",sql:"SQL",vb:"Visual Basic",xml:"XML"},confirmClear:"确定清空当前文档么？",contextMenu:{"delete":"删除",selectall:"全选",deletecode:"删除代码",cleardoc:"清空文档",confirmclear:"确定清空当前文档么？",unlink:"删除超链接",paragraph:"段落格式",edittable:"表格属性",aligntd:"单元格对齐方式",aligntable:"表格对齐方式",tableleft:"左浮动",tablecenter:"居中显示",tableright:"右浮动",edittd:"单元格属性",setbordervisible:"设置表格边线可见",justifyleft:"左对齐",justifyright:"右对齐",justifycenter:"居中对齐",justifyjustify:"两端对齐",table:"表格",inserttable:"插入表格",deletetable:"删除表格",insertparagraphbefore:"前插入段落",insertparagraphafter:"后插入段落",deleterow:"删除当前行",deletecol:"删除当前列",insertrow:"前插入行",insertcol:"左插入列",insertrownext:"后插入行",insertcolnext:"右插入列",insertcaption:"插入表格名称",deletecaption:"删除表格名称",inserttitle:"插入表格标题行",deletetitle:"删除表格标题行",inserttitlecol:"插入表格标题列",deletetitlecol:"删除表格标题列",averageDiseRow:"平均分布各行",averageDisCol:"平均分布各列",mergeright:"向右合并",mergeleft:"向左合并",mergedown:"向下合并",mergecells:"合并单元格",splittocells:"完全拆分单元格",splittocols:"拆分成列",splittorows:"拆分成行",tablesort:"表格排序",enablesort:"设置表格可排序",disablesort:"取消表格可排序",reversecurrent:"逆序当前",orderbyasc:"按ASCII字符升序",reversebyasc:"按ASCII字符降序",orderbynum:"按数值大小升序",reversebynum:"按数值大小降序",borderbk:"边框底纹",setcolor:"表格隔行变色",unsetcolor:"取消表格隔行变色",setbackground:"选区背景隔行",unsetbackground:"取消选区背景",redandblue:"红蓝相间",threecolorgradient:"三色渐变",copy:"复制(Ctrl + c)",copymsg:"浏览器不支持,请使用 'Ctrl + c'",paste:"粘贴(Ctrl + v)",pastemsg:"浏览器不支持,请使用 'Ctrl + v'"},copymsg:"浏览器不支持,请使用 'Ctrl + c'",pastemsg:"浏览器不支持,请使用 'Ctrl + v'",anthorMsg:"链接",clearColor:"清空颜色",standardColor:"标准颜色",themeColor:"主题颜色",property:"属性","default":"默认",modify:"修改",justifyleft:"左对齐",justifyright:"右对齐",justifycenter:"居中",justify:"默认",clear:"清除",anchorMsg:"锚点","delete":"删除",clickToUpload:"点击上传",unset:"尚未设置语言文件",t_row:"行",t_col:"列",more:"更多",pasteOpt:"粘贴选项",pasteSourceFormat:"保留源格式",tagFormat:"只保留标签",pasteTextFormat:"只保留文本",autoTypeSet:{mergeLine:"合并空行",delLine:"清除空行",removeFormat:"清除格式",indent:"首行缩进",alignment:"对齐方式",imageFloat:"图片浮动",removeFontsize:"清除字号",removeFontFamily:"清除字体",removeHtml:"清除冗余HTML代码",pasteFilter:"粘贴过滤",run:"执行",symbol:"符号转换",bdc2sb:"全角转半角",tobdc:"半角转全角"},background:{"static":{lang_background_normal:"背景设置",lang_background_local:"在线图片",lang_background_set:"选项",lang_background_none:"无背景色",lang_background_colored:"有背景色",lang_background_color:"颜色设置",lang_background_netimg:"网络图片",lang_background_align:"对齐方式",lang_background_position:"精确定位",repeatType:{options:["居中","横向重复","纵向重复","平铺","自定义"]}},noUploadImage:"当前未上传过任何图片！",toggleSelect:"单击可切换选中状态\n原图尺寸: "},insertimage:{"static":{lang_tab_remote:"插入图片",lang_tab_upload:"本地上传",lang_tab_online:"在线管理",lang_tab_search:"图片搜索",lang_input_url:"地 址：",lang_input_size:"大 小：",lang_input_width:"宽度",lang_input_height:"高度",lang_input_border:"边 框：",lang_input_vhspace:"边 距：",lang_input_title:"描 述：",lang_input_align:"图片浮动方式：",lang_imgLoading:"　图片加载中……",lang_start_upload:"开始上传",lock:{title:"锁定宽高比例"},searchType:{title:"图片类型",options:["新闻","壁纸","表情","头像"]},searchTxt:{value:"请输入搜索关键词"},searchBtn:{value:"百度一下"},searchReset:{value:"清空搜索"},noneAlign:{title:"无浮动"},leftAlign:{title:"左浮动"},rightAlign:{title:"右浮动"},centerAlign:{title:"居中独占一行"}},uploadSelectFile:"点击选择图片",uploadAddFile:"继续添加",uploadStart:"开始上传",uploadPause:"暂停上传",uploadContinue:"继续上传",uploadRetry:"重试上传",uploadDelete:"删除",uploadTurnLeft:"向左旋转",uploadTurnRight:"向右旋转",uploadPreview:"预览中",uploadNoPreview:"不能预览",updateStatusReady:"选中_张图片，共_KB。",updateStatusConfirm:"已成功上传_张照片，_张照片上传失败",updateStatusFinish:"共_张（_KB），_张上传成功",updateStatusError:"，_张上传失败。",errorNotSupport:"WebUploader 不支持您的浏览器！如果你使用的是IE浏览器，请尝试升级 flash 播放器。",errorLoadConfig:"后端配置项没有正常加载，上传插件不能正常使用！",errorExceedSize:"文件大小超出",errorFileType:"文件格式不允许",errorInterrupt:"文件传输中断",errorUploadRetry:"上传失败，请重试",errorHttp:"http请求错误",errorServerUpload:"服务器返回出错",remoteLockError:"宽高不正确,不能所定比例",numError:"请输入正确的长度或者宽度值！例如：123，400",imageUrlError:"不允许的图片格式或者图片域！",imageLoadError:"图片加载失败！请检查链接地址或网络状态！",searchRemind:"请输入搜索关键词",searchLoading:"图片加载中，请稍后……",searchRetry:" :( ，抱歉，没有找到图片！请重试一次！"},attachment:{"static":{lang_tab_upload:"上传附件",lang_tab_online:"在线附件",lang_start_upload:"开始上传",lang_drop_remind:"可以将文件拖到这里，单次最多可选100个文件"},uploadSelectFile:"点击选择文件",uploadAddFile:"继续添加",uploadStart:"开始上传",uploadPause:"暂停上传",uploadContinue:"继续上传",uploadRetry:"重试上传",uploadDelete:"删除",uploadTurnLeft:"向左旋转",uploadTurnRight:"向右旋转",uploadPreview:"预览中",updateStatusReady:"选中_个文件，共_KB。",updateStatusConfirm:"已成功上传_个文件，_个文件上传失败",updateStatusFinish:"共_个（_KB），_个上传成功",updateStatusError:"，_张上传失败。",errorNotSupport:"WebUploader 不支持您的浏览器！如果你使用的是IE浏览器，请尝试升级 flash 播放器。",errorLoadConfig:"后端配置项没有正常加载，上传插件不能正常使用！",errorExceedSize:"文件大小超出",errorFileType:"文件格式不允许",errorInterrupt:"文件传输中断",errorUploadRetry:"上传失败，请重试",errorHttp:"http请求错误",errorServerUpload:"服务器返回出错"},insertvideo:{"static":{lang_tab_insertV:"插入视频",lang_tab_searchV:"搜索视频",lang_tab_uploadV:"上传视频",lang_video_url:"视频网址",lang_video_size:"视频尺寸",lang_videoW:"宽度",lang_videoH:"高度",lang_alignment:"对齐方式",videoSearchTxt:{value:"请输入搜索关键字！"},videoType:{options:["全部","热门","娱乐","搞笑","体育","科技","综艺"]},videoSearchBtn:{value:"百度一下"},videoSearchReset:{value:"清空结果"},lang_input_fileStatus:" 当前未上传文件",startUpload:{style:"background:url(upload.png) no-repeat;"},lang_upload_size:"视频尺寸",lang_upload_width:"宽度",lang_upload_height:"高度",lang_upload_alignment:"对齐方式",lang_format_advice:"建议使用mp4格式."},numError:"请输入正确的数值，如123,400",floatLeft:"左浮动",floatRight:"右浮动",'"default"':"默认",block:"独占一行",urlError:"输入的视频地址有误，请检查后再试！",loading:" &nbsp;视频加载中，请等待……",clickToSelect:"点击选中",goToSource:"访问源视频",noVideo:" &nbsp; &nbsp;抱歉，找不到对应的视频，请重试！",browseFiles:"浏览文件",uploadSuccess:"上传成功!",delSuccessFile:"从成功队列中移除",delFailSaveFile:"移除保存失败文件",statusPrompt:" 个文件已上传！ ",flashVersionError:"当前Flash版本过低，请更新FlashPlayer后重试！",flashLoadingError:"Flash加载失败!请检查路径或网络状态",fileUploadReady:"等待上传……",delUploadQueue:"从上传队列中移除",limitPrompt1:"单次不能选择超过",limitPrompt2:"个文件！请重新选择！",delFailFile:"移除失败文件",fileSizeLimit:"文件大小超出限制！",emptyFile:"空文件无法上传！",fileTypeError:"文件类型不允许！",unknownError:"未知错误！",fileUploading:"上传中，请等待……",cancelUpload:"取消上传",netError:"网络错误",failUpload:"上传失败!",serverIOError:"服务器IO错误！",noAuthority:"无权限！",fileNumLimit:"上传个数限制",failCheck:"验证失败，本次上传被跳过！",fileCanceling:"取消中，请等待……",stopUploading:"上传已停止……",uploadSelectFile:"点击选择文件",uploadAddFile:"继续添加",uploadStart:"开始上传",uploadPause:"暂停上传",uploadContinue:"继续上传",uploadRetry:"重试上传",uploadDelete:"删除",uploadTurnLeft:"向左旋转",uploadTurnRight:"向右旋转",uploadPreview:"预览中",updateStatusReady:"选中_个文件，共_KB。",updateStatusConfirm:"成功上传_个，_个失败",updateStatusFinish:"共_个(_KB)，_个成功上传",updateStatusError:"，_张上传失败。",errorNotSupport:"WebUploader 不支持您的浏览器！如果你使用的是IE浏览器，请尝试升级 flash 播放器。",errorLoadConfig:"后端配置项没有正常加载，上传插件不能正常使用！",errorExceedSize:"文件大小超出",errorFileType:"文件格式不允许",errorInterrupt:"文件传输中断",errorUploadRetry:"上传失败，请重试",errorHttp:"http请求错误",errorServerUpload:"服务器返回出错"},webapp:{tip1:"本功能由百度APP提供，如看到此页面，请各位站长首先申请百度APPKey!",tip2:"申请完成之后请至ueditor.config.js中配置获得的appkey! ",applyFor:"点此申请",anthorApi:"百度API"},template:{"static":{lang_template_bkcolor:"背景颜色",lang_template_clear:"保留原有内容",lang_template_select:"选择模板"},blank:"空白文档",blog:"博客文章",resume:"个人简历",richText:"图文混排",sciPapers:"科技论文"},scrawl:{"static":{lang_input_previousStep:"上一步",lang_input_nextsStep:"下一步",lang_input_clear:"清空",lang_input_addPic:"添加背景",lang_input_ScalePic:"缩放背景",lang_input_removePic:"删除背景",J_imgTxt:{title:"添加背景图片"}},noScarwl:"尚未作画，白纸一张~",scrawlUpLoading:"涂鸦上传中,别急哦~",continueBtn:"继续",imageError:"糟糕，图片读取失败了！",backgroundUploading:"背景图片上传中,别急哦~"},music:{"static":{lang_input_tips:"输入歌手/歌曲/专辑，搜索您感兴趣的音乐！",J_searchBtn:{value:"搜索歌曲"}},emptyTxt:"未搜索到相关音乐结果，请换一个关键词试试。",chapter:"歌曲",singer:"歌手",special:"专辑",listenTest:"试听"},anchor:{"static":{lang_input_anchorName:"锚点名字："}},charts:{"static":{lang_data_source:"数据源：",lang_chart_format:"图表格式：",lang_data_align:"数据对齐方式",lang_chart_align_same:"数据源与图表X轴Y轴一致",lang_chart_align_reverse:"数据源与图表X轴Y轴相反",lang_chart_title:"图表标题",lang_chart_main_title:"主标题：",lang_chart_sub_title:"子标题：",lang_chart_x_title:"X轴标题：",lang_chart_y_title:"Y轴标题：",lang_chart_tip:"提示文字",lang_cahrt_tip_prefix:"提示文字前缀：",lang_cahrt_tip_description:"仅饼图有效， 当鼠标移动到饼图中相应的块上时，提示框内的文字的前缀",lang_chart_data_unit:"数据单位",lang_chart_data_unit_title:"单位：",lang_chart_data_unit_description:"显示在每个数据点上的数据的单位， 比如： 温度的单位 ℃",lang_chart_type:"图表类型：",lang_prev_btn:"上一个",lang_next_btn:"下一个"}},emotion:{"static":{lang_input_choice:"精选",lang_input_Tuzki:"兔斯基",lang_input_BOBO:"BOBO",lang_input_lvdouwa:"绿豆蛙",lang_input_babyCat:"baby猫",lang_input_bubble:"泡泡",lang_input_youa:"有啊"}},gmap:{"static":{lang_input_address:"地址",lang_input_search:"搜索",address:{value:"北京"}},searchError:"无法定位到该地址!"},help:{"static":{lang_input_about:"关于UEditor",lang_input_shortcuts:"快捷键",lang_input_introduction:"UEditor是由百度web前端研发部开发的所见即所得富文本web编辑器，具有轻量，可定制，注重用户体验等特点。开源基于BSD协议，允许自由使用和修改代码。",lang_Txt_shortcuts:"快捷键",lang_Txt_func:"功能",lang_Txt_bold:"给选中字设置为加粗",lang_Txt_copy:"复制选中内容",lang_Txt_cut:"剪切选中内容",lang_Txt_Paste:"粘贴",lang_Txt_undo:"重新执行上次操作",lang_Txt_redo:"撤销上一次操作",lang_Txt_italic:"给选中字设置为斜体",lang_Txt_underline:"给选中字加下划线",lang_Txt_selectAll:"全部选中",lang_Txt_visualEnter:"软回车",lang_Txt_fullscreen:"全屏"}},insertframe:{"static":{lang_input_address:"地址：",lang_input_width:"宽度：",lang_input_height:"高度：",lang_input_isScroll:"允许滚动条：",lang_input_frameborder:"显示框架边框：",lang_input_alignMode:"对齐方式：",align:{title:"对齐方式",options:["默认","左对齐","右对齐","居中"]}},enterAddress:"请输入地址!"},link:{"static":{lang_input_text:"文本内容：",lang_input_url:"链接地址：",lang_input_title:"标题：",lang_input_target:"是否在新窗口打开："},validLink:"只支持选中一个链接时生效",httpPrompt:"您输入的超链接中不包含http等协议名称，默认将为您添加http://前缀"},map:{"static":{lang_city:"城市",lang_address:"地址",city:{value:"北京"},lang_search:"搜索",lang_dynamicmap:"插入动态地图"},cityMsg:"请选择城市",errorMsg:"抱歉，找不到该位置！"},searchreplace:{"static":{lang_tab_search:"查找",lang_tab_replace:"替换",lang_search1:"查找",lang_search2:"查找",lang_replace:"替换",lang_searchReg:"支持正则表达式，添加前后斜杠标示为正则表达式，例如“/表达式/”",lang_searchReg1:"支持正则表达式，添加前后斜杠标示为正则表达式，例如“/表达式/”",lang_case_sensitive1:"区分大小写",lang_case_sensitive2:"区分大小写",nextFindBtn:{value:"下一个"},preFindBtn:{value:"上一个"},nextReplaceBtn:{value:"下一个"},preReplaceBtn:{value:"上一个"},repalceBtn:{value:"替换"},repalceAllBtn:{value:"全部替换"}},getEnd:"已经搜索到文章末尾！",getStart:"已经搜索到文章头部",countMsg:"总共替换了{#count}处！"},snapscreen:{"static":{lang_showMsg:"截图功能需要首先安装UEditor截图插件！ ",lang_download:"点此下载",lang_step1:"第一步，下载UEditor截图插件并运行安装。",lang_step2:"第二步，插件安装完成后即可使用，如不生效，请重启浏览器后再试！"}},spechars:{"static":{},tsfh:"特殊字符",lmsz:"罗马字符",szfh:"数学字符",rwfh:"日文字符",xlzm:"希腊字母",ewzm:"俄文字符",pyzm:"拼音字母",yyyb:"英语音标",zyzf:"其他"},edittable:{"static":{lang_tableStyle:"表格样式",lang_insertCaption:"添加表格名称行",lang_insertTitle:"添加表格标题行",lang_insertTitleCol:"添加表格标题列",lang_orderbycontent:"使表格内容可排序",lang_tableSize:"自动调整表格尺寸",lang_autoSizeContent:"按表格文字自适应",lang_autoSizePage:"按页面宽度自适应",lang_example:"示例",lang_borderStyle:"表格边框",lang_color:"颜色:"},captionName:"表格名称",titleName:"标题",cellsName:"内容",errorMsg:"有合并单元格，不可排序"},edittip:{"static":{lang_delRow:"删除整行",lang_delCol:"删除整列"}},edittd:{"static":{lang_tdBkColor:"背景颜色:"}},formula:{"static":{}},wordimage:{"static":{lang_resave:"转存步骤",uploadBtn:{src:"upload.png",alt:"上传"},clipboard:{style:"background: url(copy.png) -153px -1px no-repeat;"},lang_step:"1、点击顶部复制按钮，将地址复制到剪贴板；2、点击添加照片按钮，在弹出的对话框中使用Ctrl+V粘贴地址；3、点击打开后选择图片上传流程。"},fileType:"图片",flashError:"FLASH初始化失败，请检查FLASH插件是否正确安装！",netError:"网络连接错误，请重试！",copySuccess:"图片地址已经复制！",flashI18n:{}},autosave:{saving:"保存中...",success:"本地保存成功"}};

/*<script src="${ctxStatic}/org/tinygroup/uedTips/js/uedTip.js"></script>*/
window.ZENG=window.ZENG||{},ZENG.dom={getById:function(a){return document.getElementById(a)},get:function(a){return"string"==typeof a?document.getElementById(a):a},createElementIn:function(a,b,c,d){var f,e=(b=ZENG.dom.get(b)||document.body).ownerDocument.createElement(a||"div");if("object"==typeof d)for(f in d)"class"==f?e.className=d[f]:"style"==f?e.style.cssText=d[f]:e[f]=d[f];return c?b.insertBefore(e,b.firstChild):b.appendChild(e),e},getStyle:function(a,b){var c,d,f;if(a=ZENG.dom.get(a),!a||9==a.nodeType)return null;switch(c=document.defaultView&&document.defaultView.getComputedStyle,d=c?document.defaultView.getComputedStyle(a,""):null,b){case"float":b=c?"cssFloat":"styleFloat";break;case"opacity":if(c)return parseFloat((d||a.style)[b]);f=100;try{f=a.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(g){try{f=a.filters("alpha").opacity}catch(g){}}return f/100;case"backgroundPositionX":if(c)return b="backgroundPosition",(d||a.style)[b].split(" ")[0];break;case"backgroundPositionY":if(c)return b="backgroundPosition",(d||a.style)[b].split(" ")[1]}return c?(d||a.style)[b]:a.currentStyle[b]||a.style[b]},setStyle:function(a,b,c){var d,e,f,g,h,i;if(!(a=ZENG.dom.get(a))||1!=a.nodeType)return!1;e=!0,f=(d=document.defaultView)&&d.getComputedStyle,g=/z-?index|font-?weight|opacity|zoom|line-?height/i,"string"==typeof b&&(d=b,b={},b[d]=c);for(h in b)c=b[h],"float"==h?h=f?"cssFloat":"styleFloat":"opacity"==h?f||(h="filter",c=c>=1?"":"alpha(opacity="+Math.round(100*c)+")"):("backgroundPositionX"==h||"backgroundPositionY"==h)&&(d="X"==h.slice(-1)?"Y":"X",f&&(i=ZENG.dom.getStyle(a,"backgroundPosition"+d),h="backgroundPosition","number"==typeof c&&(c+="px"),c="Y"==d?c+" "+(i||"top"):(i||"left")+" "+c)),"undefined"!=typeof a.style[h]?(a.style[h]=c+("number"!=typeof c||g.test(h)?"":"px"),e=e&&!0):e=e&&!1;return e},getScrollTop:function(a){var b=a||document;return Math.max(b.documentElement.scrollTop,b.body.scrollTop)},getClientHeight:function(a){var b=a||document;return"CSS1Compat"==b.compatMode?b.documentElement.clientHeight:b.body.clientHeight}},ZENG.string={RegExps:{trim:/^\s+|\s+$/g,ltrim:/^\s+/,rtrim:/\s+$/,nl2br:/\n/g,s2nb:/[\x20]{2}/g,URIencode:/[\x09\x0A\x0D\x20\x21-\x29\x2B\x2C\x2F\x3A-\x3F\x5B-\x5E\x60\x7B-\x7E]/g,escHTML:{re_amp:/&/g,re_lt:/</g,re_gt:/>/g,re_apos:/\x27/g,re_quot:/\x22/g},escString:{bsls:/\\/g,sls:/\//g,nl:/\n/g,rt:/\r/g,tab:/\t/g},restXHTML:{re_amp:/&amp;/g,re_lt:/&lt;/g,re_gt:/&gt;/g,re_apos:/&(?:apos|#0?39);/g,re_quot:/&quot;/g},write:/\{(\d{1,2})(?:\:([xodQqb]))?\}/g,isURL:/^(?:ht|f)tp(?:s)?\:\/\/(?:[\w\-\.]+)\.\w+/i,cut:/[\x00-\xFF]/,getRealLen:{r0:/[^\x00-\xFF]/g,r1:/[\x00-\xFF]/g},format:/\{([\d\w\.]+)\}/g},commonReplace:function(a,b,c){return a.replace(b,c)},format:function(a){var c,b=Array.prototype.slice.call(arguments);return a=String(b.shift()),1==b.length&&"object"==typeof b[0]&&(b=b[0]),ZENG.string.RegExps.format.lastIndex=0,a.replace(ZENG.string.RegExps.format,function(a,d){return c=ZENG.object.route(b,d),void 0===c?a:c})}},ZENG.object={routeRE:/([\d\w_]+)/g,route:function(a,b){a=a||{},b=String(b);var d,c=ZENG.object.routeRE;for(c.lastIndex=0;null!==(d=c.exec(b))&&(a=a[d[0]],void 0!==a&&null!==a););return a}};var ua=ZENG.userAgent={},agent=navigator.userAgent;ua.ie=9-(agent.indexOf("Trident/5.0")>-1?0:1)-(window.XDomainRequest?0:1)-(window.XMLHttpRequest?0:1),"undefined"==typeof ZENG.msgbox&&(ZENG.msgbox={}),ZENG.msgbox._timer=null,ZENG.msgbox.loadingAnimationPath=ZENG.msgbox.loadingAnimationPath||"loading.gif",ZENG.msgbox.show=function(a,b,c,d){"number"==typeof d&&(d={topPosition:d}),d=d||{};var i,e=ZENG.msgbox,f='<span class="zeng_msgbox_layer" style="display:none;z-index:10000;" id="mode_tips_v2"><span class="gtl_ico_{type}"></span>{loadIcon}{msgHtml}<span class="gtl_end"></span></span>',g='<span class="gtl_ico_loading"></span>',h=[0,0,0,0,"succ","fail","clear"];e._loadCss&&e._loadCss(d.cssPath),i=ZENG.dom.get("q_Msgbox")||ZENG.dom.createElementIn("div",document.body,!1,{className:"zeng_msgbox_layer_wrap"}),i.id="q_Msgbox",i.style.display="",i.innerHTML=ZENG.string.format(f,{type:h[b]||"hits",msgHtml:a||"",loadIcon:6==b?g:""}),e._setPosition(i,c,d.topPosition)},ZENG.msgbox._setPosition=function(a,b,c){b=b||5e3;var d=ZENG.msgbox,e=ZENG.dom.getScrollTop(),f=ZENG.dom.getClientHeight(),g=Math.floor(f/2)-40;ZENG.dom.setStyle(a,"top",("BackCompat"==document.compatMode||ZENG.userAgent.ie<7?e:0)+("number"==typeof c?c:g)+"px"),clearTimeout(d._timer),a.firstChild.style.display="",b&&(d._timer=setTimeout(d.hide,b))},ZENG.msgbox.hide=function(a){var b=ZENG.msgbox;a?(clearTimeout(b._timer),b._timer=setTimeout(b._hide,a)):b._hide()},ZENG.msgbox._hide=function(){var a=ZENG.dom.get("q_Msgbox"),b=ZENG.msgbox;clearTimeout(b._timer),a&&(a.firstChild,ZENG.dom.setStyle(a,"display","none"))};

/*<script src="${ctxStatic}/org/tinygroup/bootstrapslider/js/bootstrapslider.js"></script>*/
var windowIsDefined="object"==typeof window;!function(a){if("function"==typeof define&&define.amd)define(["jquery"],a);else if("object"==typeof module&&module.exports){var b;try{b=require("jquery")}catch(c){b=null}module.exports=a(b)}else window&&(window.Slider=a(window.jQuery))}(function(a){var d,c="bootstrapSlider";return windowIsDefined&&!window.console&&(window.console={}),windowIsDefined&&!window.console.log&&(window.console.log=function(){}),windowIsDefined&&!window.console.warn&&(window.console.warn=function(){}),function(a){"use strict";function c(){}function d(a){function d(b){b.prototype.option||(b.prototype.option=function(b){a.isPlainObject(b)&&(this.options=a.extend(!0,this.options,b))})}function f(c,d){a.fn[c]=function(f){var g,h,i,j,k,l,m;if("string"==typeof f){for(g=b.call(arguments,1),h=0,i=this.length;i>h;h++)if(j=this[h],k=a.data(j,c))if(a.isFunction(k[f])&&"_"!==f.charAt(0)){if(l=k[f].apply(k,g),void 0!==l&&l!==k)return l}else e("no such method '"+f+"' for "+c+" instance");else e("cannot call methods on "+c+" prior to initialization; "+"attempted to call '"+f+"'");return this}return m=this.map(function(){var b=a.data(this,c);return b?(b.option(f),b._init()):(b=new d(this,f),a.data(this,c,b)),a(this)}),!m||m.length>1?m:m[0]}}if(a){var e="undefined"==typeof console?c:function(a){console.error(a)};return a.bridget=function(a,b){d(b),f(a,b)},a.bridget}}var b=Array.prototype.slice;d(a)}(a),function(a){function f(b,c){function i(a,b){var c="data-slider-"+b.replace(/_/g,"-"),d=a.getAttribute(c);try{return JSON.parse(d)}catch(e){return d}}var d,f,g,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;for(this._state={value:null,enabled:null,offset:null,size:null,percentage:null,inDrag:!1,over:!1},"string"==typeof b?this.element=document.querySelector(b):b instanceof HTMLElement&&(this.element=b),c=c?c:{},d=Object.keys(this.defaultOptions),f=0;f<d.length;f++)g=d[f],h=c[g],h="undefined"!=typeof h?h:i(this.element,g),h=null!==h?h:this.defaultOptions[g],this.options||(this.options={}),this.options[g]=h;if("vertical"!==this.options.orientation||"top"!==this.options.tooltip_position&&"bottom"!==this.options.tooltip_position?"horizontal"!==this.options.orientation||"left"!==this.options.tooltip_position&&"right"!==this.options.tooltip_position||(this.options.tooltip_position="top"):this.options.tooltip_position="right",j=this.element.style.width,k=!1,l=this.element.parentNode,this.sliderElem)k=!0;else{if(this.sliderElem=document.createElement("div"),this.sliderElem.className="slider",r=document.createElement("div"),r.className="slider-track",n=document.createElement("div"),n.className="slider-track-low",m=document.createElement("div"),m.className="slider-selection",o=document.createElement("div"),o.className="slider-track-high",p=document.createElement("div"),p.className="slider-handle min-slider-handle",p.setAttribute("role","slider"),p.setAttribute("aria-valuemin",this.options.min),p.setAttribute("aria-valuemax",this.options.max),q=document.createElement("div"),q.className="slider-handle max-slider-handle",q.setAttribute("role","slider"),q.setAttribute("aria-valuemin",this.options.min),q.setAttribute("aria-valuemax",this.options.max),r.appendChild(n),r.appendChild(m),r.appendChild(o),s=Array.isArray(this.options.labelledby),s&&this.options.labelledby[0]&&p.setAttribute("aria-labelledby",this.options.labelledby[0]),s&&this.options.labelledby[1]&&q.setAttribute("aria-labelledby",this.options.labelledby[1]),!s&&this.options.labelledby&&(p.setAttribute("aria-labelledby",this.options.labelledby),q.setAttribute("aria-labelledby",this.options.labelledby)),this.ticks=[],Array.isArray(this.options.ticks)&&this.options.ticks.length>0){for(this.ticksContainer=document.createElement("div"),this.ticksContainer.className="slider-tick-container",f=0;f<this.options.ticks.length;f++)t=document.createElement("div"),t.className="slider-tick",this.ticks.push(t),this.ticksContainer.appendChild(t);m.className+=" tick-slider-selection"}if(this.tickLabels=[],Array.isArray(this.options.ticks_labels)&&this.options.ticks_labels.length>0)for(this.tickLabelContainer=document.createElement("div"),this.tickLabelContainer.className="slider-tick-label-container",f=0;f<this.options.ticks_labels.length;f++)u=document.createElement("div"),v=0===this.options.ticks_positions.length,w=this.options.reversed&&v?this.options.ticks_labels.length-(f+1):f,u.className="slider-tick-label",u.innerHTML=this.options.ticks_labels[w],this.tickLabels.push(u),this.tickLabelContainer.appendChild(u);x=function(a){var c,b=document.createElement("div");b.className="tooltip-arrow",c=document.createElement("div"),c.className="tooltip-inner",a.appendChild(b),a.appendChild(c)},y=document.createElement("div"),y.className="tooltip tooltip-main",y.setAttribute("role","presentation"),x(y),z=document.createElement("div"),z.className="tooltip tooltip-min",z.setAttribute("role","presentation"),x(z),A=document.createElement("div"),A.className="tooltip tooltip-max",A.setAttribute("role","presentation"),x(A),this.sliderElem.appendChild(r),this.sliderElem.appendChild(y),this.sliderElem.appendChild(z),this.sliderElem.appendChild(A),this.tickLabelContainer&&this.sliderElem.appendChild(this.tickLabelContainer),this.ticksContainer&&this.sliderElem.appendChild(this.ticksContainer),this.sliderElem.appendChild(p),this.sliderElem.appendChild(q),l.insertBefore(this.sliderElem,this.element),this.element.style.display="none"}if(a&&(this.$element=a(this.element),this.$sliderElem=a(this.sliderElem)),this.eventToCallbackMap={},this.sliderElem.id=this.options.id,this.touchCapable="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,this.touchX=0,this.touchY=0,this.tooltip=this.sliderElem.querySelector(".tooltip-main"),this.tooltipInner=this.tooltip.querySelector(".tooltip-inner"),this.tooltip_min=this.sliderElem.querySelector(".tooltip-min"),this.tooltipInner_min=this.tooltip_min.querySelector(".tooltip-inner"),this.tooltip_max=this.sliderElem.querySelector(".tooltip-max"),this.tooltipInner_max=this.tooltip_max.querySelector(".tooltip-inner"),e[this.options.scale]&&(this.options.scale=e[this.options.scale]),k===!0&&(this._removeClass(this.sliderElem,"slider-horizontal"),this._removeClass(this.sliderElem,"slider-vertical"),this._removeClass(this.tooltip,"hide"),this._removeClass(this.tooltip_min,"hide"),this._removeClass(this.tooltip_max,"hide"),["left","top","width","height"].forEach(function(a){this._removeProperty(this.trackLow,a),this._removeProperty(this.trackSelection,a),this._removeProperty(this.trackHigh,a)},this),[this.handle1,this.handle2].forEach(function(a){this._removeProperty(a,"left"),this._removeProperty(a,"top")},this),[this.tooltip,this.tooltip_min,this.tooltip_max].forEach(function(a){this._removeProperty(a,"left"),this._removeProperty(a,"top"),this._removeProperty(a,"margin-left"),this._removeProperty(a,"margin-top"),this._removeClass(a,"right"),this._removeClass(a,"top")},this)),"vertical"===this.options.orientation?(this._addClass(this.sliderElem,"slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight"):(this._addClass(this.sliderElem,"slider-horizontal"),this.sliderElem.style.width=j,this.options.orientation="horizontal",this.stylePos="left",this.mousePos="pageX",this.sizePos="offsetWidth"),this._setTooltipPosition(),Array.isArray(this.options.ticks)&&this.options.ticks.length>0&&(this.options.max=Math.max.apply(Math,this.options.ticks),this.options.min=Math.min.apply(Math,this.options.ticks)),Array.isArray(this.options.value)?(this.options.range=!0,this._state.value=this.options.value):this._state.value=this.options.range?[this.options.value,this.options.max]:this.options.value,this.trackLow=n||this.trackLow,this.trackSelection=m||this.trackSelection,this.trackHigh=o||this.trackHigh,"none"===this.options.selection&&(this._addClass(this.trackLow,"hide"),this._addClass(this.trackSelection,"hide"),this._addClass(this.trackHigh,"hide")),this.handle1=p||this.handle1,this.handle2=q||this.handle2,k===!0)for(this._removeClass(this.handle1,"round triangle"),this._removeClass(this.handle2,"round triangle hide"),f=0;f<this.ticks.length;f++)this._removeClass(this.ticks[f],"round triangle hide");if(B=["round","triangle","custom"],C=-1!==B.indexOf(this.options.handle))for(this._addClass(this.handle1,this.options.handle),this._addClass(this.handle2,this.options.handle),f=0;f<this.ticks.length;f++)this._addClass(this.ticks[f],this.options.handle);this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],this.setValue(this._state.value),this.handle1Keydown=this._keydown.bind(this,0),this.handle1.addEventListener("keydown",this.handle1Keydown,!1),this.handle2Keydown=this._keydown.bind(this,1),this.handle2.addEventListener("keydown",this.handle2Keydown,!1),this.mousedown=this._mousedown.bind(this),this.touchstart=this._touchstart.bind(this),this.touchmove=this._touchmove.bind(this),this.touchCapable&&(this.sliderElem.addEventListener("touchstart",this.touchstart,!1),this.sliderElem.addEventListener("touchmove",this.touchmove,!1)),this.sliderElem.addEventListener("mousedown",this.mousedown,!1),this.resize=this._resize.bind(this),window.addEventListener("resize",this.resize,!1),"hide"===this.options.tooltip?(this._addClass(this.tooltip,"hide"),this._addClass(this.tooltip_min,"hide"),this._addClass(this.tooltip_max,"hide")):"always"===this.options.tooltip?(this._showTooltip(),this._alwaysShowTooltip=!0):(this.showTooltip=this._showTooltip.bind(this),this.hideTooltip=this._hideTooltip.bind(this),this.sliderElem.addEventListener("mouseenter",this.showTooltip,!1),this.sliderElem.addEventListener("mouseleave",this.hideTooltip,!1),this.handle1.addEventListener("focus",this.showTooltip,!1),this.handle1.addEventListener("blur",this.hideTooltip,!1),this.handle2.addEventListener("focus",this.showTooltip,!1),this.handle2.addEventListener("blur",this.hideTooltip,!1)),this.options.enabled?this.enable():this.disable()}var b={formatInvalidInputErrorMsg:function(a){return"Invalid input value '"+a+"' passed in"},callingContextNotSliderInstance:"Calling context element does not have instance of Slider bound to it. Check your code to make sure the JQuery object returned from the call to the slider() initializer is calling the method"},e={linear:{toValue:function(a){var d,e,f,g,h,i,j,k,b=a/100*(this.options.max-this.options.min),c=!0;if(this.options.ticks_positions.length>0){for(g=0,h=1;h<this.options.ticks_positions.length;h++)if(a<=this.options.ticks_positions[h]){d=this.options.ticks[h-1],f=this.options.ticks_positions[h-1],e=this.options.ticks[h],g=this.options.ticks_positions[h];break}i=(a-f)/(g-f),b=d+i*(e-d),c=!1}return j=c?this.options.min:0,k=j+Math.round(b/this.options.step)*this.options.step,k<this.options.min?this.options.min:k>this.options.max?this.options.max:k},toPercentage:function(a){var b,c,d,e,f,g;if(this.options.max===this.options.min)return 0;if(this.options.ticks_positions.length>0){for(e=0,f=0;f<this.options.ticks.length;f++)if(a<=this.options.ticks[f]){b=f>0?this.options.ticks[f-1]:0,d=f>0?this.options.ticks_positions[f-1]:0,c=this.options.ticks[f],e=this.options.ticks_positions[f];break}if(f>0)return g=(a-b)/(c-b),d+g*(e-d)}return 100*(a-this.options.min)/(this.options.max-this.options.min)}},logarithmic:{toValue:function(a){var b=0===this.options.min?0:Math.log(this.options.min),c=Math.log(this.options.max),d=Math.exp(b+(c-b)*a/100);return d=this.options.min+Math.round((d-this.options.min)/this.options.step)*this.options.step,d<this.options.min?this.options.min:d>this.options.max?this.options.max:d},toPercentage:function(a){var b,c,d;return this.options.max===this.options.min?0:(b=Math.log(this.options.max),c=0===this.options.min?0:Math.log(this.options.min),d=0===a?0:Math.log(a),100*(d-c)/(b-c))}}};d=function(a,b){return f.call(this,a,b),this},d.prototype={_init:function(){},constructor:d,defaultOptions:{id:"",min:0,max:10,step:1,precision:0,orientation:"horizontal",value:5,range:!1,selection:"before",tooltip:"show",tooltip_split:!1,handle:"round",reversed:!1,enabled:!0,formatter:function(a){return Array.isArray(a)?a[0]+" : "+a[1]:a},natural_arrow_keys:!1,ticks:[],ticks_positions:[],ticks_labels:[],ticks_snap_bounds:0,scale:"linear",focus:!1,tooltip_position:null,labelledby:null},getElement:function(){return this.sliderElem},getValue:function(){return this.options.range?this._state.value:this._state.value[0]},setValue:function(a,b,c){var d,e,f;return a||(a=0),d=this.getValue(),this._state.value=this._validateInputValue(a),e=this._applyPrecision.bind(this),this.options.range?(this._state.value[0]=e(this._state.value[0]),this._state.value[1]=e(this._state.value[1]),this._state.value[0]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[0])),this._state.value[1]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[1]))):(this._state.value=e(this._state.value),this._state.value=[Math.max(this.options.min,Math.min(this.options.max,this._state.value))],this._addClass(this.handle2,"hide"),this._state.value[1]="after"===this.options.selection?this.options.max:this.options.min),this._state.percentage=this.options.max>this.options.min?[this._toPercentage(this._state.value[0]),this._toPercentage(this._state.value[1]),100*this.options.step/(this.options.max-this.options.min)]:[0,0,100],this._layout(),f=this.options.range?this._state.value:this._state.value[0],this._setDataVal(f),b===!0&&this._trigger("slide",f),d!==f&&c===!0&&this._trigger("change",{oldValue:d,newValue:f}),this},destroy:function(){this._removeSliderEventHandlers(),this.sliderElem.parentNode.removeChild(this.sliderElem),this.element.style.display="",this._cleanUpEventCallbacksMap(),this.element.removeAttribute("data"),a&&(this._unbindJQueryEventHandlers(),this.$element.removeData("slider"))},disable:function(){return this._state.enabled=!1,this.handle1.removeAttribute("tabindex"),this.handle2.removeAttribute("tabindex"),this._addClass(this.sliderElem,"slider-disabled"),this._trigger("slideDisabled"),this},enable:function(){return this._state.enabled=!0,this.handle1.setAttribute("tabindex",0),this.handle2.setAttribute("tabindex",0),this._removeClass(this.sliderElem,"slider-disabled"),this._trigger("slideEnabled"),this},toggle:function(){return this._state.enabled?this.disable():this.enable(),this},isEnabled:function(){return this._state.enabled},on:function(a,b){return this._bindNonQueryEventHandler(a,b),this},off:function(b,c){a?(this.$element.off(b,c),this.$sliderElem.off(b,c)):this._unbindNonQueryEventHandler(b,c)},getAttribute:function(a){return a?this.options[a]:this.options},setAttribute:function(a,b){return this.options[a]=b,this},refresh:function(){return this._removeSliderEventHandlers(),f.call(this,this.element,this.options),a&&a.data(this.element,"slider",this),this},relayout:function(){return this._resize(),this._layout(),this},_removeSliderEventHandlers:function(){this.handle1.removeEventListener("keydown",this.handle1Keydown,!1),this.handle2.removeEventListener("keydown",this.handle2Keydown,!1),this.showTooltip&&(this.handle1.removeEventListener("focus",this.showTooltip,!1),this.handle2.removeEventListener("focus",this.showTooltip,!1)),this.hideTooltip&&(this.handle1.removeEventListener("blur",this.hideTooltip,!1),this.handle2.removeEventListener("blur",this.hideTooltip,!1)),this.showTooltip&&this.sliderElem.removeEventListener("mouseenter",this.showTooltip,!1),this.hideTooltip&&this.sliderElem.removeEventListener("mouseleave",this.hideTooltip,!1),this.sliderElem.removeEventListener("touchstart",this.touchstart,!1),this.sliderElem.removeEventListener("touchmove",this.touchmove,!1),this.sliderElem.removeEventListener("mousedown",this.mousedown,!1),window.removeEventListener("resize",this.resize,!1)},_bindNonQueryEventHandler:function(a,b){void 0===this.eventToCallbackMap[a]&&(this.eventToCallbackMap[a]=[]),this.eventToCallbackMap[a].push(b)},_unbindNonQueryEventHandler:function(a,b){var d,c=this.eventToCallbackMap[a];if(void 0!==c)for(d=0;d<c.length;d++)if(c[d]===b){c.splice(d,1);break}},_cleanUpEventCallbacksMap:function(){var b,c,a=Object.keys(this.eventToCallbackMap);for(b=0;b<a.length;b++)c=a[b],this.eventToCallbackMap[c]=null},_showTooltip:function(){this.options.tooltip_split===!1?(this._addClass(this.tooltip,"in"),this.tooltip_min.style.display="none",this.tooltip_max.style.display="none"):(this._addClass(this.tooltip_min,"in"),this._addClass(this.tooltip_max,"in"),this.tooltip.style.display="none"),this._state.over=!0},_hideTooltip:function(){this._state.inDrag===!1&&this.alwaysShowTooltip!==!0&&(this._removeClass(this.tooltip,"in"),this._removeClass(this.tooltip_min,"in"),this._removeClass(this.tooltip_max,"in")),this._state.over=!1},_layout:function(){var a,b,c,d,e,f,g,h,i,j,k,l;if(a=this.options.reversed?[100-this._state.percentage[0],this.options.range?100-this._state.percentage[1]:this._state.percentage[1]]:[this._state.percentage[0],this._state.percentage[1]],this.handle1.style[this.stylePos]=a[0]+"%",this.handle1.setAttribute("aria-valuenow",this._state.value[0]),this.handle2.style[this.stylePos]=a[1]+"%",this.handle2.setAttribute("aria-valuenow",this._state.value[1]),Array.isArray(this.options.ticks)&&this.options.ticks.length>0){if(b="vertical"===this.options.orientation?"height":"width",c="vertical"===this.options.orientation?"marginTop":"marginLeft",d=this._state.size/(this.options.ticks.length-1),this.tickLabelContainer){if(e=0,0===this.options.ticks_positions.length)"vertical"!==this.options.orientation&&(this.tickLabelContainer.style[c]=-d/2+"px"),e=this.tickLabelContainer.offsetHeight;else for(f=0;f<this.tickLabelContainer.childNodes.length;f++)this.tickLabelContainer.childNodes[f].offsetHeight>e&&(e=this.tickLabelContainer.childNodes[f].offsetHeight);"horizontal"===this.options.orientation&&(this.sliderElem.style.marginBottom=e+"px")}for(f=0;f<this.options.ticks.length;f++)g=this.options.ticks_positions[f]||this._toPercentage(this.options.ticks[f]),this.options.reversed&&(g=100-g),this.ticks[f].style[this.stylePos]=g+"%",this._removeClass(this.ticks[f],"in-selection"),this.options.range?g>=a[0]&&g<=a[1]&&this._addClass(this.ticks[f],"in-selection"):"after"===this.options.selection&&g>=a[0]?this._addClass(this.ticks[f],"in-selection"):"before"===this.options.selection&&g<=a[0]&&this._addClass(this.ticks[f],"in-selection"),this.tickLabels[f]&&(this.tickLabels[f].style[b]=d+"px","vertical"!==this.options.orientation&&void 0!==this.options.ticks_positions[f]?(this.tickLabels[f].style.position="absolute",this.tickLabels[f].style[this.stylePos]=g+"%",this.tickLabels[f].style[c]=-d/2+"px"):"vertical"===this.options.orientation&&(this.tickLabels[f].style["marginLeft"]=this.sliderElem.offsetWidth+"px",this.tickLabelContainer.style["marginTop"]=-1*(this.sliderElem.offsetWidth/2)+"px"))}this.options.range?(h=this.options.formatter(this._state.value),this._setText(this.tooltipInner,h),this.tooltip.style[this.stylePos]=(a[1]+a[0])/2+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px"),"vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px"),i=this.options.formatter(this._state.value[0]),this._setText(this.tooltipInner_min,i),j=this.options.formatter(this._state.value[1]),this._setText(this.tooltipInner_max,j),this.tooltip_min.style[this.stylePos]=a[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip_min,"margin-top",-this.tooltip_min.offsetHeight/2+"px"):this._css(this.tooltip_min,"margin-left",-this.tooltip_min.offsetWidth/2+"px"),this.tooltip_max.style[this.stylePos]=a[1]+"%","vertical"===this.options.orientation?this._css(this.tooltip_max,"margin-top",-this.tooltip_max.offsetHeight/2+"px"):this._css(this.tooltip_max,"margin-left",-this.tooltip_max.offsetWidth/2+"px")):(h=this.options.formatter(this._state.value[0]),this._setText(this.tooltipInner,h),this.tooltip.style[this.stylePos]=a[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px")),"vertical"===this.options.orientation?(this.trackLow.style.top="0",this.trackLow.style.height=Math.min(a[0],a[1])+"%",this.trackSelection.style.top=Math.min(a[0],a[1])+"%",this.trackSelection.style.height=Math.abs(a[0]-a[1])+"%",this.trackHigh.style.bottom="0",this.trackHigh.style.height=100-Math.min(a[0],a[1])-Math.abs(a[0]-a[1])+"%"):(this.trackLow.style.left="0",this.trackLow.style.width=Math.min(a[0],a[1])+"%",this.trackSelection.style.left=Math.min(a[0],a[1])+"%",this.trackSelection.style.width=Math.abs(a[0]-a[1])+"%",this.trackHigh.style.right="0",this.trackHigh.style.width=100-Math.min(a[0],a[1])-Math.abs(a[0]-a[1])+"%",k=this.tooltip_min.getBoundingClientRect(),l=this.tooltip_max.getBoundingClientRect(),"bottom"===this.options.tooltip_position?k.right>l.left?(this._removeClass(this.tooltip_max,"bottom"),this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top="",this.tooltip_max.style.bottom="22px"):(this._removeClass(this.tooltip_max,"top"),this._addClass(this.tooltip_max,"bottom"),this.tooltip_max.style.top=this.tooltip_min.style.top,this.tooltip_max.style.bottom=""):k.right>l.left?(this._removeClass(this.tooltip_max,"top"),this._addClass(this.tooltip_max,"bottom"),this.tooltip_max.style.top="18px"):(this._removeClass(this.tooltip_max,"bottom"),this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top=this.tooltip_min.style.top))},_resize:function(){this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],this._layout()},_removeProperty:function(a,b){a.style.removeProperty?a.style.removeProperty(b):a.style.removeAttribute(b)},_mousedown:function(a){var b,c,d,e;return this._state.enabled?(this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],b=this._getPercentage(a),this.options.range?(c=Math.abs(this._state.percentage[0]-b),d=Math.abs(this._state.percentage[1]-b),this._state.dragged=d>c?0:1,this._adjustPercentageForRangeSliders(b)):this._state.dragged=0,this._state.percentage[this._state.dragged]=b,this._layout(),this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),this.mousemove&&document.removeEventListener("mousemove",this.mousemove,!1),this.mouseup&&document.removeEventListener("mouseup",this.mouseup,!1),this.mousemove=this._mousemove.bind(this),this.mouseup=this._mouseup.bind(this),this.touchCapable&&(document.addEventListener("touchmove",this.mousemove,!1),document.addEventListener("touchend",this.mouseup,!1)),document.addEventListener("mousemove",this.mousemove,!1),document.addEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!0,e=this._calculateValue(),this._trigger("slideStart",e),this._setDataVal(e),this.setValue(e,!1,!0),this._pauseEvent(a),this.options.focus&&this._triggerFocusOnHandle(this._state.dragged),!0):!1},_touchstart:function(a){if(void 0===a.changedTouches)return this._mousedown(a),void 0;var b=a.changedTouches[0];this.touchX=b.pageX,this.touchY=b.pageY},_triggerFocusOnHandle:function(a){0===a&&this.handle1.focus(),1===a&&this.handle2.focus()},_keydown:function(a,b){var c,d,e,f;if(!this._state.enabled)return!1;switch(b.keyCode){case 37:case 40:c=-1;break;case 39:case 38:c=1}if(c)return this.options.natural_arrow_keys&&(d="vertical"===this.options.orientation&&!this.options.reversed,e="horizontal"===this.options.orientation&&this.options.reversed,(d||e)&&(c=-c)),f=this._state.value[a]+c*this.options.step,this.options.range&&(f=[a?this._state.value[0]:f,a?f:this._state.value[1]]),this._trigger("slideStart",f),this._setDataVal(f),this.setValue(f,!0,!0),this._setDataVal(f),this._trigger("slideStop",f),this._layout(),this._pauseEvent(b),!1},_pauseEvent:function(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),a.cancelBubble=!0,a.returnValue=!1},_mousemove:function(a){var b,c;return this._state.enabled?(b=this._getPercentage(a),this._adjustPercentageForRangeSliders(b),this._state.percentage[this._state.dragged]=b,this._layout(),c=this._calculateValue(!0),this.setValue(c,!0,!0),!1):!1},_touchmove:function(a){var b,c,d;void 0!==a.changedTouches&&(b=a.changedTouches[0],c=b.pageX-this.touchX,d=b.pageY-this.touchY,this._state.inDrag||("vertical"===this.options.orientation&&5>=c&&c>=-5&&(d>=15||-15>=d)?this._mousedown(a):5>=d&&d>=-5&&(c>=15||-15>=c)&&this._mousedown(a)))},_adjustPercentageForRangeSliders:function(a){var b,c;this.options.range&&(b=this._getNumDigitsAfterDecimalPlace(a),b=b?b-1:0,c=this._applyToFixedAndParseFloat(a,b),0===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[1],b)<c?(this._state.percentage[0]=this._state.percentage[1],this._state.dragged=1):1===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[0],b)>c&&(this._state.percentage[1]=this._state.percentage[0],this._state.dragged=0))},_mouseup:function(){if(!this._state.enabled)return!1;this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),document.removeEventListener("mousemove",this.mousemove,!1),document.removeEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!1,this._state.over===!1&&this._hideTooltip();var a=this._calculateValue(!0);return this._layout(),this._setDataVal(a),this._trigger("slideStop",a),!1},_calculateValue:function(a){var b,c,d,e;if(this.options.range?(b=[this.options.min,this.options.max],0!==this._state.percentage[0]&&(b[0]=this._toValue(this._state.percentage[0]),b[0]=this._applyPrecision(b[0])),100!==this._state.percentage[1]&&(b[1]=this._toValue(this._state.percentage[1]),b[1]=this._applyPrecision(b[1]))):(b=this._toValue(this._state.percentage[0]),b=parseFloat(b),b=this._applyPrecision(b)),a){for(c=[b,1/0],d=0;d<this.options.ticks.length;d++)e=Math.abs(this.options.ticks[d]-b),e<=c[1]&&(c=[this.options.ticks[d],e]);if(c[1]<=this.options.ticks_snap_bounds)return c[0]}return b},_applyPrecision:function(a){var b=this.options.precision||this._getNumDigitsAfterDecimalPlace(this.options.step);return this._applyToFixedAndParseFloat(a,b)},_getNumDigitsAfterDecimalPlace:function(a){var b=(""+a).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return b?Math.max(0,(b[1]?b[1].length:0)-(b[2]?+b[2]:0)):0},_applyToFixedAndParseFloat:function(a,b){var c=a.toFixed(b);return parseFloat(c)},_getPercentage:function(a){var b,c,d,e;return!this.touchCapable||"touchstart"!==a.type&&"touchmove"!==a.type||(a=a.touches[0]),b=a[this.mousePos],c=this._state.offset[this.stylePos],d=b-c,e=100*(d/this._state.size),e=Math.round(e/this._state.percentage[2])*this._state.percentage[2],this.options.reversed&&(e=100-e),Math.max(0,Math.min(100,e))},_validateInputValue:function(a){if("number"==typeof a)return a;if(Array.isArray(a))return this._validateArray(a),a;throw new Error(b.formatInvalidInputErrorMsg(a))},_validateArray:function(a){var c,d;for(c=0;c<a.length;c++)if(d=a[c],"number"!=typeof d)throw new Error(b.formatInvalidInputErrorMsg(d))},_setDataVal:function(a){this.element.setAttribute("data-value",a),this.element.setAttribute("value",a),this.element.value=a},_trigger:function(b,c){var d,e,f;if(c=c||0===c?c:void 0,d=this.eventToCallbackMap[b],d&&d.length)for(e=0;e<d.length;e++)f=d[e],f(c);a&&this._triggerJQueryEvent(b,c)},_triggerJQueryEvent:function(a,b){var c={type:a,value:b};this.$element.trigger(c),this.$sliderElem.trigger(c)},_unbindJQueryEventHandlers:function(){this.$element.off(),this.$sliderElem.off()},_setText:function(a,b){"undefined"!=typeof a.textContent?a.textContent=b:"undefined"!=typeof a.innerText&&(a.innerText=b)},_removeClass:function(a,b){var e,f,g,c=b.split(" "),d=a.className;for(e=0;e<c.length;e++)f=c[e],g=new RegExp("(?:\\s|^)"+f+"(?:\\s|$)"),d=d.replace(g," ");a.className=d.trim()},_addClass:function(a,b){var e,f,g,h,c=b.split(" "),d=a.className;for(e=0;e<c.length;e++)f=c[e],g=new RegExp("(?:\\s|^)"+f+"(?:\\s|$)"),h=g.test(d),h||(d+=" "+f);a.className=d.trim()},_offsetLeft:function(a){return a.getBoundingClientRect().left},_offsetTop:function(a){for(var b=a.offsetTop;(a=a.offsetParent)&&!isNaN(a.offsetTop);)b+=a.offsetTop,"BODY"!==a.tagName&&(b-=a.scrollTop);return b},_offset:function(a){return{left:this._offsetLeft(a),top:this._offsetTop(a)}},_css:function(b,c,d){if(a)a.style(b,c,d);else{var e=c.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(a,b){return b.toUpperCase()});b.style[e]=d}},_toValue:function(a){return this.options.scale.toValue.apply(this,[a])},_toPercentage:function(a){return this.options.scale.toPercentage.apply(this,[a])},_setTooltipPosition:function(){var b,c,a=[this.tooltip,this.tooltip_min,this.tooltip_max];"vertical"===this.options.orientation?(b=this.options.tooltip_position||"right",c="left"===b?"right":"left",a.forEach(function(a){this._addClass(a,b),a.style[c]="100%"}.bind(this))):"bottom"===this.options.tooltip_position?a.forEach(function(a){this._addClass(a,"bottom"),a.style.top="22px"}.bind(this)):a.forEach(function(a){this._addClass(a,"top"),a.style.top=-this.tooltip.outerHeight-14+"px"}.bind(this))}},a&&(a.bridget(c,d),a(function(){a("input[data-provide=slider]")[c]()}))}(a),d});

/*<script src="${ctxStatic}/org/tinygroup/popover/js/jquery.webui-popover.js"></script>*/
!function(a,b){"use strict";!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof exports?module.exports=b(require("jquery")):b(a.jQuery)}(function(a){function r(b,d){this.$element=a(b),d&&("string"===a.type(d.delay)||"number"===a.type(d.delay))&&(d.delay={show:d.delay,hide:d.delay}),this.options=a.extend({},f,d),this._defaults=f,this._name=c,this._targetclick=!1,this.init(),g.push(this.$element)}var c="webuiPopover",d="webui-popover",e="webui.popover",f={placement:"auto",container:null,width:"auto",height:"auto",trigger:"click",style:"",delay:{show:null,hide:null},async:{type:"GET",before:null,success:null,error:null},cache:!0,multi:!1,arrow:!0,title:"",content:"",closeable:!1,padding:!0,url:"",type:"html",animation:null,template:'<div class="webui-popover"><div class="webui-arrow"></div><div class="webui-popover-inner"><a href="#" class="close"></a><h3 class="webui-popover-title"></h3><div class="webui-popover-content"><i class="icon-refresh"></i> <p>&nbsp;</p></div></div></div>',backdrop:!1,dismissible:!0,onShow:null,onHide:null,abortXHR:!0,autoHide:!1,offsetTop:0,offsetLeft:0,iframeOptions:{frameborder:"0",allowtransparency:"true",id:"",name:"",scrolling:"",onload:"",height:"",width:""}},g=[],h=a('<div class="webui-popover-backdrop"></div>'),i=0,j=!1,k=-2e3,l=a(b),m=function(a,b){return isNaN(a)?b||0:Number(a)},n=function(a){return a.data("plugin_"+c)},o=function(){var b,a=null;for(b=0;b<g.length;b++)a=n(g[b]),a&&a.hide(!0);l.trigger("hiddenAll."+e)},p="ontouchstart"in b.documentElement&&/Mobi/.test(navigator.userAgent),q=function(a){var c,b={x:0,y:0};return"touchstart"===a.type||"touchmove"===a.type||"touchend"===a.type||"touchcancel"===a.type?(c=a.originalEvent.touches[0]||a.originalEvent.changedTouches[0],b.x=c.pageX,b.y=c.pageY):("mousedown"===a.type||"mouseup"===a.type||"click"===a.type)&&(b.x=a.pageX,b.y=a.pageY),b};r.prototype={init:function(){"click"===this.getTrigger()||p?this.$element.off("click touchend").on("click touchend",a.proxy(this.toggle,this)):"hover"===this.getTrigger()&&this.$element.off("mouseenter mouseleave click").on("mouseenter",a.proxy(this.mouseenterHandler,this)).on("mouseleave",a.proxy(this.mouseleaveHandler,this)),this._poped=!1,this._inited=!0,this._opened=!1,this._idSeed=i,this.options.container=a(this.options.container||b.body).first(),this.options.backdrop&&h.appendTo(this.options.container).hide(),i++,"sticky"===this.getTrigger()&&this.show()},destroy:function(){var b,a=-1;for(b=0;b<g.length;b++)if(g[b]===this.$element){a=b;break}g.splice(a,1),this.hide(),this.$element.data("plugin_"+c,null),"click"===this.getTrigger()?this.$element.off("click"):"hover"===this.getTrigger()&&this.$element.off("mouseenter mouseleave"),this.$target&&this.$target.remove()},hide:function(b,c){var d,f;(b||"sticky"!==this.getTrigger())&&this._opened&&(c&&(c.preventDefault(),c.stopPropagation()),this.xhr&&this.options.abortXHR===!0&&(this.xhr.abort(),this.xhr=null),d=a.Event("hide."+e),this.$element.trigger(d,[this.$target]),this.$target&&(this.$target.removeClass("in").addClass(this.getHideAnimation()),f=this,setTimeout(function(){f.$target.hide()},300)),this.options.backdrop&&h.hide(),this._opened=!1,this.$element.trigger("hidden."+e,[this.$target]),this.options.onHide&&this.options.onHide(this.$target))},resetAutoHide:function(){var a=this,b=a.getAutoHide();b&&(a.autoHideHandler&&clearTimeout(a.autoHideHandler),a.autoHideHandler=setTimeout(function(){a.hide()},b))},toggle:function(a){a&&(a.preventDefault(),a.stopPropagation()),this[this.getTarget().hasClass("in")?"hide":"show"]()},hideAll:function(){o()},show:function(){var a=this.getTarget().removeClass().addClass(d).addClass(this._customTargetClass);this.options.multi||this.hideAll(),this._opened||(this.getCache()&&this._poped&&""!==this.content||(this.content="",this.setTitle(this.getTitle()),this.options.closeable||a.find(".close").off("click").remove(),this.isAsync()?this.setContentASync(this.options.content):this.setContent(this.getContent()),a.show()),this.displayContent(),this.options.onShow&&this.options.onShow(a),this.bindBodyEvents(),this.options.backdrop&&h.show(),this._opened=!0,this.resetAutoHide())},displayContent:function(){var l,m,n,o,p,q,r,b=this.getElementPosition(),c=this.getTarget().removeClass().addClass(d).addClass(this._customTargetClass),f=this.getContentElement(),g=c[0].offsetWidth,h=c[0].offsetHeight,i="bottom",j=a.Event("show."+e);this.$element.trigger(j,[c]),l=this.$element.data("width")||this.options.width,""===l&&(l=this._defaults.width),"auto"!==l&&c.width(l),m=this.$element.data("height")||this.options.height,""===m&&(m=this._defaults.height),"auto"!==m&&f.height(m),this.options.style&&this.$target.addClass(d+"-"+this.options.style),this.options.arrow||c.find(".webui-arrow").remove(),c.detach().css({top:k,left:k,display:"block"}),this.getAnimation()&&c.addClass(this.getAnimation()),c.appendTo(this.options.container),i=this.getPlacement(b),this.$element.trigger("added."+e),this.initTargetEvents(),this.options.padding||("auto"!==this.options.height&&f.css("height",f.outerHeight()),this.$target.addClass("webui-no-padding")),g=c[0].offsetWidth,h=c[0].offsetHeight,n=this.getTargetPositin(b,i,g,h),this.$target.css(n.position).addClass(i).addClass("in"),"iframe"===this.options.type&&(o=c.find("iframe"),p=c.width(),q=o.parent().height(),""!==this.options.iframeOptions.width&&"auto"!==this.options.iframeOptions.width&&(p=this.options.iframeOptions.width),""!==this.options.iframeOptions.height&&"auto"!==this.options.iframeOptions.height&&(q=this.options.iframeOptions.height),o.width(p).height(q)),this.options.arrow||this.$target.css({margin:0}),this.options.arrow&&(r=this.$target.find(".webui-arrow"),r.removeAttr("style"),"left"===i||"right"===i?r.css({top:this.$target.height()/2}):("top"===i||"bottom"===i)&&r.css({left:this.$target.width()/2}),n.arrowOffset&&(-1===n.arrowOffset.left||-1===n.arrowOffset.top?r.hide():r.css(n.arrowOffset))),this._poped=!0,this.$element.trigger("shown."+e,[this.$target])},isTargetLoaded:function(){return 0===this.getTarget().find("i.glyphicon-refresh").length},getTriggerElement:function(){return this.$element},getTarget:function(){if(!this.$target){var b=c+this._idSeed;this.$target=a(this.options.template).attr("id",b).data("trigger-element",this.getTriggerElement()),this._customTargetClass=this.$target.attr("class")!==d?this.$target.attr("class"):null,this.getTriggerElement().attr("data-target",b)}return this.$target},getTitleElement:function(){return this.getTarget().find("."+d+"-title")},getContentElement:function(){return this.$contentElement||(this.$contentElement=this.getTarget().find("."+d+"-content")),this.$contentElement},getTitle:function(){return this.$element.attr("data-title")||this.options.title||this.$element.attr("title")},getUrl:function(){return this.$element.attr("data-url")||this.options.url},getAutoHide:function(){return this.$element.attr("data-auto-hide")||this.options.autoHide},getOffsetTop:function(){return m(this.$element.attr("data-offset-top"))||this.options.offsetTop},getOffsetLeft:function(){return m(this.$element.attr("data-offset-left"))||this.options.offsetLeft},getCache:function(){var a=this.$element.attr("data-cache");if("undefined"!=typeof a)switch(a.toLowerCase()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":return!1}return this.options.cache},getTrigger:function(){return this.$element.attr("data-trigger")||this.options.trigger},getDelayShow:function(){var a=this.$element.attr("data-delay-show");return"undefined"!=typeof a?a:0===this.options.delay.show?0:this.options.delay.show||100},getHideDelay:function(){var a=this.$element.attr("data-delay-hide");return"undefined"!=typeof a?a:0===this.options.delay.hide?0:this.options.delay.hide||100},getAnimation:function(){var a=this.$element.attr("data-animation");return a||this.options.animation},getHideAnimation:function(){var a=this.getAnimation();return a?a+"-out":"out"},setTitle:function(a){var b=this.getTitleElement();a?b.html(a):b.remove()},hasContent:function(){return this.getContent()},getIframe:function(){var b=a("<iframe></iframe>").attr("src",this.getUrl()),c=this;return a.each(this._defaults.iframeOptions,function(a){"undefined"!=typeof c.options.iframeOptions[a]&&b.attr(a,c.options.iframeOptions[a])}),b},getContent:function(){var c,e;if(this.getUrl())switch(this.options.type){case"iframe":this.content=this.getIframe();break;case"html":try{this.content=a(this.getUrl()),this.content.is(":visible")||this.content.show()}catch(b){throw new Error("Unable to get popover content. Invalid selector specified.")}}else this.content||(c="",c=a.isFunction(this.options.content)?this.options.content.apply(this.$element[0],[this]):this.options.content,this.content=this.$element.attr("data-content")||c,this.content||(e=this.$element.next(),e&&e.hasClass(d+"-content")&&(this.content=e)));return this.content},setContent:function(a){var b=this.getTarget(),c=this.getContentElement();"string"==typeof a?c.html(a):a instanceof jQuery&&(c.html(""),this.options.cache?a.removeClass(d+"-content").appendTo(c):a.clone(!0,!0).removeClass(d+"-content").appendTo(c)),this.$target=b},isAsync:function(){return"async"===this.options.type},setContentASync:function(b){var c=this;this.xhr||(this.xhr=a.ajax({url:this.getUrl(),type:this.options.async.type,cache:this.getCache(),beforeSend:function(a){c.options.async.before&&c.options.async.before(c,a)},success:function(d){c.bindBodyEvents(),c.content=b&&a.isFunction(b)?b.apply(c.$element[0],[d]):d,c.setContent(c.content);var e=c.getContentElement();e.removeAttr("style"),c.displayContent(),c.options.async.success&&c.options.async.success(c,d)},complete:function(){c.xhr=null},error:function(a,b){c.options.async.error&&c.options.async.error(c,a,b)}}))},bindBodyEvents:function(){j||(this.options.dismissible&&"click"===this.getTrigger()?(l.off("keyup.webui-popover").on("keyup.webui-popover",a.proxy(this.escapeHandler,this)),l.off("click.webui-popover touchend.webui-popover").on("click.webui-popover touchend.webui-popover",a.proxy(this.bodyClickHandler,this))):"hover"===this.getTrigger()&&l.off("touchend.webui-popover").on("touchend.webui-popover",a.proxy(this.bodyClickHandler,this)))},mouseenterHandler:function(){var a=this;a._timeout&&clearTimeout(a._timeout),a._enterTimeout=setTimeout(function(){a.getTarget().is(":visible")||a.show()},this.getDelayShow())},mouseleaveHandler:function(){var a=this;clearTimeout(a._enterTimeout),a._timeout=setTimeout(function(){a.hide()},this.getHideDelay())},escapeHandler:function(a){27===a.keyCode&&this.hideAll()},bodyClickHandler:function(a){var b,c,d,e,f,h,i,k,l;for(j=!0,b=!0,c=0;c<g.length;c++)if(d=n(g[c]),d&&d._opened&&(e=d.getTarget().offset().left,f=d.getTarget().offset().top,h=d.getTarget().offset().left+d.getTarget().width(),i=d.getTarget().offset().top+d.getTarget().height(),k=q(a),l=k.x>=e&&k.x<=h&&k.y>=f&&k.y<=i)){b=!1;break}b&&o()},initTargetEvents:function(){"hover"===this.getTrigger()&&this.$target.off("mouseenter mouseleave").on("mouseenter",a.proxy(this.mouseenterHandler,this)).on("mouseleave",a.proxy(this.mouseleaveHandler,this)),this.$target.find(".close").off("click").on("click",a.proxy(this.hide,this,!0))},getPlacement:function(a){var b,j,k,l,c=this.options.container,d=c.innerWidth(),e=c.innerHeight(),f=c.scrollTop(),g=c.scrollLeft(),h=Math.max(0,a.left-g),i=Math.max(0,a.top-f);return b="function"==typeof this.options.placement?this.options.placement.call(this,this.getTarget()[0],this.$element[0]):this.$element.data("placement")||this.options.placement,j="horizontal"===b,k="vertical"===b,l="auto"===b||j||k,l?b=d/3>h?e/3>i?j?"right-bottom":"bottom-right":2*e/3>i?k?e/2>=i?"bottom-right":"top-right":"right":j?"right-top":"top-right":2*d/3>h?e/3>i?j?d/2>=h?"right-bottom":"left-bottom":"bottom":2*e/3>i?j?d/2>=h?"right":"left":e/2>=i?"bottom":"top":j?d/2>=h?"right-top":"left-top":"top":e/3>i?j?"left-bottom":"bottom-left":2*e/3>i?k?e/2>=i?"bottom-left":"top-left":"left":j?"left-top":"top-left":"auto-top"===b?b=d/3>h?"top-right":2*d/3>h?"top":"top-left":"auto-bottom"===b?b=d/3>h?"bottom-right":2*d/3>h?"bottom":"bottom-left":"auto-left"===b?b=e/3>i?"left-top":2*e/3>i?"left":"left-bottom":"auto-right"===b&&(b=e/3>i?"right-top":2*e/3>i?"right":"right-bottom"),b},getElementPosition:function(){return a.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTargetPositin:function(a,b,c,d){var e=a,f=this.options.container,g=f.innerWidth(),h=f.innerHeight(),i=this.$element.outerWidth(),j=this.$element.outerHeight(),l=f.scrollTop(),m=f.scrollLeft(),n={},o=null,p=this.options.arrow?20:0,q=10,r=p+q>i?p:0,s=p+q>j?p:0,t=0,u=h+l,v=g+m,w=e.left+e.width/2-r>0,x=e.left+e.width/2+r<v,y=e.top+e.height/2-s>0,z=e.top+e.height/2+s<u;switch(b){case"bottom":n={top:e.top+e.height,left:e.left+e.width/2-c/2};break;case"top":n={top:e.top-d,left:e.left+e.width/2-c/2};break;case"left":n={top:e.top+e.height/2-d/2,left:e.left-c};break;case"right":n={top:e.top+e.height/2-d/2,left:e.left+e.width};break;case"top-right":n={top:e.top-d,left:w?e.left-r:q},o={left:w?Math.min(i,c)/2+r:k};break;case"top-left":t=x?r:-q,n={top:e.top-d,left:e.left-c+e.width+t},o={left:x?c-Math.min(i,c)/2-r:k};break;case"bottom-right":n={top:e.top+e.height,left:w?e.left-r:q},o={left:w?Math.min(i,c)/2+r:k};break;case"bottom-left":t=x?r:-q,n={top:e.top+e.height,left:e.left-c+e.width+t},o={left:x?c-Math.min(i,c)/2-r:k};break;case"right-top":t=z?s:-q,n={top:e.top-d+e.height+t,left:e.left+e.width},o={top:z?d-Math.min(j,d)/2-s:k};break;case"right-bottom":n={top:y?e.top-s:q,left:e.left+e.width},o={top:y?Math.min(j,d)/2+s:k};break;case"left-top":t=z?s:-q,n={top:e.top-d+e.height+t,left:e.left-c},o={top:z?d-Math.min(j,d)/2-s:k};break;case"left-bottom":n={top:y?e.top-s:q,left:e.left-c},o={top:y?Math.min(j,d)/2+s:k}}return n.top+=this.getOffsetTop(),n.left+=this.getOffsetLeft(),{position:n,arrowOffset:o}}},a.fn[c]=function(b,d){var e=[],f=this.each(function(){var f=a.data(this,"plugin_"+c);f?"destroy"===b?f.destroy():"string"==typeof b&&e.push(f[b]()):(b?"string"==typeof b?"destroy"!==b&&(d||(f=new r(this,null),e.push(f[b]()))):"object"==typeof b&&(f=new r(this,b)):f=new r(this,null),a.data(this,"plugin_"+c,f))});return e.length?e:f}})}(window,document),$(document).off("click.popover.data-api").on("click.popover.data-api",'[data-toggle="popover"]',function(){var a=$(this),b={trigger:"click",title:"信息",content:"<p>信息.</p>",width:300,multi:!0,closeable:!1,style:"",padding:!0},c={};return"undefined"!=typeof a.attr("href")&&a.attr("href")&&(c={width:260,height:350,closeable:!0,padding:!1,cache:!1,multi:!1,url:a.attr("href"),type:"async",content:function(a){return a}}),a.off("click.popover.data-api").webuiPopover("destroy").webuiPopover($.extend({},b,c,a.data())),a.on("hidden.webui.popover",function(){a.webuiPopover("destroy")}).trigger("click"),!1});

/*<script src="${ctxStatic}/org/tinygroup/buttongroup/js/bootstrap-hover-dropdown.js"></script>*/
!function(a,b){var d=a();a.fn.dropdownHover=function(c){return"ontouchstart"in document?this:(d=d.add(this.parent()),this.each(function(){function n(){e.parents(".navbar").find(".navbar-toggle").is(":visible")||(b.clearTimeout(l),b.clearTimeout(m),m=b.setTimeout(function(){d.find(":focus").blur(),k.instantlyCloseOthers===!0&&d.removeClass("open"),b.clearTimeout(m),e.attr("aria-expanded","true"),f.addClass("open"),e.trigger(i)},k.hoverDelay))}var l,m,e=a(this),f=e.parent(),g={delay:500,hoverDelay:0,instantlyCloseOthers:!0},h={delay:a(this).data("delay"),hoverDelay:a(this).data("hover-delay"),instantlyCloseOthers:a(this).data("close-others")},i="show.bs.dropdown",j="hide.bs.dropdown",k=a.extend(!0,{},g,c,h);f.hover(function(a){return f.hasClass("open")||e.is(a.target)?(n(a),void 0):!0},function(){b.clearTimeout(m),l=b.setTimeout(function(){e.attr("aria-expanded","false"),f.removeClass("open"),e.trigger(j)},k.delay)}),e.hover(function(a){return f.hasClass("open")||f.is(a.target)?(n(a),void 0):!0}),f.find(".dropdown-submenu").each(function(){var d,c=a(this);c.hover(function(){b.clearTimeout(d),c.children(".dropdown-menu").show(),c.siblings().children(".dropdown-menu").hide()},function(){var a=c.children(".dropdown-menu");d=b.setTimeout(function(){a.hide()},k.delay)})})}))},a(document).ready(function(){a('[data-hover="dropdown"]').dropdownHover()})}(jQuery,window);

/*<script src="${ctxStatic}/org/tinygroup/ueditor/macro/macro.js"></script>*/
UE.plugins["macros"]=function(){function f(c){var d,e,f;c=c||window.event,e=c.target||c.srcElement,f=$(e).closest("[tinyplugins]").get(0),"undefined"!=typeof f&&(d=f.getAttribute("tinyplugins"),d==b&&(baidu.editor.plugins[b].editdom=f,a.execCommand(b)))}var c,d,e,a=this,b="macros";a.commands[b]={execCommand:function(){var a=new UE.ui.Dialog({iframeUrl:this.options.UEDITOR_HOME_URL+"macro/macro.pagelet",name:b,editor:this,title:"宏控件",cssRules:"width:600px;height:270px;",buttons:[{className:"edui-okbutton",label:"确定",onclick:function(){a.close(!0)}},{className:"edui-cancelbutton",label:"取消",onclick:function(){a.close(!1)}}]});a.render(),a.open()}},c=new baidu.editor.ui.Popup({editor:this,content:"",className:"edui-bubble",_edittext:function(){baidu.editor.plugins[b].editdom=c.anchorEl,a.execCommand(b),this.hide()},_delete:function(){window.confirm("确认删除该控件吗？")&&baidu.editor.dom.domUtils.remove(this.anchorEl,!1),this.hide()}}),c.render(),a.addListener("mouseover",function(a,d){var e,f,g;d=d||window.event,e=d.target||d.srcElement,f=e.getAttribute("tinyplugins"),/div/gi.test(e.tagName)&&f==b&&(g=c.formatHtml('<nobr>宏控件: <span onclick=$$._edittext() class="edui-clickable">编辑</span>&nbsp;&nbsp;<span onclick=$$._delete() class="edui-clickable">删除</span></nobr>'),g?(c.getDom("content").innerHTML=g,c.anchorEl=e,c.showAnchor(c.anchorEl)):c.hide())}),e=0,a.addListener("click",function(a,b){e++,2==e&&f(b),d=setTimeout(function(){e--},500)})},UE.ueAddonPlus=function(a){UE.registerUI("button_macros",function(a,b){a.registerCommand(b,{execCommand:function(){a.execCommand("macros")}});var c=new UE.ui.Button({name:b,title:"宏编辑器",cssRules:"background-position: -401px -40px;",onclick:function(){a.execCommand(b)}});return c},99999,[a])};

/*<script src="${ctxStatic}/org/tinygroup/zoomPic/js/zoominfo.js"></script>*/
$(document).ready(function(){$(".galleryImage").hover(function(){$(this).find("img").animate({width:100,marginTop:10,marginLeft:10},500)},function(){$(this).find("img").animate({width:325,marginTop:0,marginLeft:0},300)})});

/*<script src="${ctxStatic}/org/tinygroup/bootstrapsubmenu/js/bootstrap-submenu.js"></script>*/
"use strict";!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){function b(b){this.$element=a(b),this.$menu=this.$element.closest(".dropdown-menu"),this.$main=this.$menu.parent(),this.$items=this.$menu.children(".dropdown-submenu"),this.init()}function c(b){this.$element=a(b),this.$main=this.$element.parent(),this.$menu=this.$main.children(".dropdown-menu"),this.$subs=this.$main.siblings(".dropdown-submenu"),this.$items=this.$menu.children(".dropdown-submenu"),this.init()}function d(b){this.$element=a(b),this.$main=this.$element.parent(),this.$menu=this.$main.children(".dropdown-menu"),this.$items=this.$menu.children(".dropdown-submenu"),this.init()}b.prototype={init:function(){this.$element.on("keydown",a.proxy(this,"keydown"))},close:function(){this.$main.removeClass("open"),this.$items.trigger("hide.bs.submenu")},keydown:function(a){27==a.keyCode&&(a.stopPropagation(),this.close(),this.$main.children("a, button").trigger("focus"))}},a.extend(c.prototype,b.prototype,{init:function(){this.$element.on({click:a.proxy(this,"click"),keydown:a.proxy(this,"keydown")}),this.$main.on("hide.bs.submenu",a.proxy(this,"hide"))},click:function(a){a.preventDefault(),a.stopPropagation(),this.toggle()},hide:function(a){a.stopPropagation(),this.close()},open:function(){this.$main.addClass("open"),this.$subs.trigger("hide.bs.submenu")},toggle:function(){this.$main.hasClass("open")?this.close():this.open()},keydown:function(b){32==b.keyCode&&b.preventDefault(),-1!=a.inArray(b.keyCode,[13,32])&&this.toggle()}}),d.prototype={init:function(){this.$menu.off("keydown.bs.dropdown.data-api"),this.$menu.on("keydown",a.proxy(this,"itemKeydown")),this.$menu.find("li > a").each(function(){new b(this)}),this.$menu.find(".dropdown-submenu > a").each(function(){new c(this)}),this.$main.on("hidden.bs.dropdown",a.proxy(this,"hidden"))},hidden:function(){this.$items.trigger("hide.bs.submenu")},itemKeydown:function(b){var c,d;if(-1!=a.inArray(b.keyCode,[38,40])){if(b.preventDefault(),b.stopPropagation(),c=this.$menu.find("li:not(.disabled):visible > a"),d=c.index(b.target),38==b.keyCode&&0!==d)d--;else{if(40!=b.keyCode||d===c.length-1)return;d++}c.eq(d).trigger("focus")}}};var e=a.fn.submenupicker;return a.fn.submenupicker=function(b){var c=this instanceof a?this:a(b);return c.each(function(){var b=a.data(this,"bs.submenu");b||(b=new d(this),a.data(this,"bs.submenu",b))})},a.fn.submenupicker.Constructor=d,a.fn.submenupicker.noConflict=function(){return a.fn.submenupicker=e,this},a.fn.submenupicker});

/*<script src="${ctxStatic}/org/tinygroup/sortablelist/jquery-sortable-lists.js"></script>*/
!function(a){a.fn.sortableLists=function(b){function l(b,c,d){var i,j,l,o,p,q,r,s;k.isDragged=!0,i=parseInt(c.css("margin-top")),j=parseInt(c.css("margin-bottom")),l=parseInt(c.css("margin-left")),o=parseInt(c.css("margin-right")),p=c.offset(),q=c.innerHeight(),r=f.offset(),k.rootEl={el:d,offset:d.offset(),rootElClass:d.attr("class")},k.cEl={el:c,mT:i,mL:l,mB:j,mR:o,offset:{left:p.left-r.left,top:p.top-r.top}},k.cEl.xyOffsetDiff={X:b.pageX-k.cEl.offset.left,Y:b.pageY-k.cEl.offset.top},k.cEl.el.addClass("sortableListsCurrent "+e.currElClass),c.before(g),s=k.placeholderNode=a("#sortableListsPlaceholder"),c.css({width:c.width(),position:"absolute",top:k.cEl.offset.top-i,left:k.cEl.offset.left-l}).prependTo(f),s.css({display:"block",height:q}),h.css("height",q),k.doc.on("mousemove",m).on("mouseup",n)}function m(b){if(k.isDragged){var c=k.cEl,d=k.doc,f=k.win;b.pageX||r(b),d.scrollTop()>k.rootEl.offset.top-10&&b.clientY<50?k.upScroll?(b.pageY=b.pageY-e.scroll,a("html, body").each(function(){a(this).scrollTop(a(this).scrollTop()-e.scroll)}),q(b)):o(b):d.scrollTop()+f.height()<k.rootEl.offset.top+k.rootEl.el.outerHeight(!1)+10&&f.height()-b.clientY<50?k.downScroll?(b.pageY=b.pageY+e.scroll,a("html, body").each(function(){a(this).scrollTop(a(this).scrollTop()+e.scroll)}),q(b)):p(b):s(k),k.oElOld=k.oEl,c.el[0].style.visibility="hidden",k.oEl=oEl=u(b.pageX,b.pageY),c.el[0].style.visibility="visible",v(b,k),t(b,k)}}function n(){var c=k.cEl,d=a("#sortableListsHint",k.rootEl.el),g=h[0].style,i=null,l=!1,o=a("#sortableListsHintWrapper");"block"==g.display&&d.length&&k.isAllowed?(i=d,l=!0):(i=k.placeholderNode,l=!1),offset=i.offset(),baseXY=f.offset(),c.el.animate({left:offset.left-baseXY.left-k.cEl.mL,top:offset.top-baseXY.top-k.cEl.mT},250,function(){C(c),i.after(c.el[0]),i[0].style.display="none",g.display="none",d.remove(),o.removeAttr("id").removeClass(e.hintWrapperClass),o.length&&o.prev("div").append(j.clone(!0)),l?k.placeholderNode.slideUp(150,function(){k.placeholderNode.remove(),D(),e.onChange(c.el),e.complete(c.el),k.isDragged=!1}):(k.placeholderNode.remove(),D(),e.complete(c.el),k.isDragged=!1)}),s(k),k.doc.unbind("mousemove",m).unbind("mouseup",n)}function o(){k.upScroll||(k.upScroll=setInterval(function(){k.doc.trigger("mousemove")},50))}function p(){k.downScroll||(k.downScroll=setInterval(function(){k.doc.trigger("mousemove")},50))}function q(a){k.pY=a.pageY,k.pX=a.pageX,k.cY=a.clientY,k.cX=a.clientX}function r(a){a.pageY=k.pY,a.pageX=k.pX,a.clientY=k.cY,a.clientX=k.cX}function s(a){clearInterval(a.upScroll),clearInterval(a.downScroll),a.upScroll=a.downScroll=!1}function t(a,b){var c=b.cEl;c.el.css({top:a.pageY-c.xyOffsetDiff.Y-c.mT,left:a.pageX-c.xyOffsetDiff.X-c.mL})}function u(b,c){var d,e,f,g;return document.elementFromPoint?(d=k.isRelEFP,null===d&&((e=k.doc.scrollTop())>0&&(d=null==(f=document.elementFromPoint(0,e+a(window).height()-1))||"HTML"==f.tagName.toUpperCase()),(e=k.doc.scrollLeft())>0&&(d=null==(f=document.elementFromPoint(e+a(window).width()-1,0))||"HTML"==f.tagName.toUpperCase())),d&&(b-=k.doc.scrollLeft(),c-=k.doc.scrollTop()),g=a(document.elementFromPoint(b,c)),k.rootEl.el.find(g).length?g.is("#sortableListsPlaceholder")||g.is("#sortableListsHint")?null:g.is("li")?g.is("li")?g:void 0:(g=g.closest("li"),g[0]?g:null):null):null}function v(a,b){var d,f,c=b.oEl;c&&b.oElOld&&(d=c.outerHeight(!1),f=a.pageY-c.offset().top,e.insertZonePlus?14>f?x(a,c,7>f):f>d-14&&z(a,c,f>d-7):5>f?w(a,c):f>d-5&&y(a,c))}function w(b,c){if(a("#sortableListsHintWrapper",k.rootEl.el).length&&h.unwrap(),b.pageX-c.offset().left<e.insertZone){if(c.prev("#sortableListsPlaceholder").length)return h.css("display","none"),void 0;c.before(h)}else{var d=c.children(),f=c.children(e.listSelector).first();if(f.children().first().is("#sortableListsPlaceholder"))return h.css("display","none"),void 0;f.length?f.prepend(h):(d.first().after(h),h.wrap(i)),k.oEl&&A(c)}h.css("display","block"),k.isAllowed=e.isAllowed(k.cEl.el,h,h.parents("li").first())}function x(b,c,d){if(a("#sortableListsHintWrapper",k.rootEl.el).length&&h.unwrap(),!d&&b.pageX-c.offset().left>e.insertZone){var f=c.children(),g=c.children(e.listSelector).first();if(g.children().first().is("#sortableListsPlaceholder"))return h.css("display","none"),void 0;g.length?g.prepend(h):(f.first().after(h),h.wrap(i)),k.oEl&&A(c)}else{if(c.prev("#sortableListsPlaceholder").length)return h.css("display","none"),void 0;c.before(h)}h.css("display","block"),k.isAllowed=e.isAllowed(k.cEl.el,h,h.parents("li").first())}function y(b,c){if(a("#sortableListsHintWrapper",k.rootEl.el).length&&h.unwrap(),b.pageX-c.offset().left<e.insertZone){if(c.next("#sortableListsPlaceholder").length)return h.css("display","none"),void 0;c.after(h)}else{var d=c.children(),f=c.children(e.listSelector).last();if(f.children().last().is("#sortableListsPlaceholder"))return h.css("display","none"),void 0;f.length?d.last().append(h):(c.append(h),h.wrap(i)),k.oEl&&A(c)}h.css("display","block"),k.isAllowed=e.isAllowed(k.cEl.el,h,h.parents("li").first())}function z(b,c,d){if(a("#sortableListsHintWrapper",k.rootEl.el).length&&h.unwrap(),!d&&b.pageX-c.offset().left>e.insertZone){var f=c.children(),g=c.children(e.listSelector).last();if(g.children().last().is("#sortableListsPlaceholder"))return h.css("display","none"),void 0;g.length?f.last().append(h):(c.append(h),h.wrap(i)),k.oEl&&A(c)}else{if(c.next("#sortableListsPlaceholder").length)return h.css("display","none"),void 0;c.after(h)}h.css("display","block"),k.isAllowed=e.isAllowed(k.cEl.el,h,h.parents("li").first())}function A(a){a.removeClass("sortableListsClosed").addClass("sortableListsOpen"),a.children(e.listSelector).css("display","block");var b=a.children("div").children(".sortableListsOpener").first();"html"==e.opener.as?b.html(e.opener.close):"class"==e.opener.as?b.addClass(e.opener.close).removeClass(e.opener.open):b.css("background-image","url("+e.opener.close+")")}function B(a){a.removeClass("sortableListsOpen").addClass("sortableListsClosed"),a.children(e.listSelector).css("display","none");var b=a.children("div").children(".sortableListsOpener").first();"html"==e.opener.as?b.html(e.opener.open):"class"==e.opener.as?b.addClass(e.opener.open).removeClass(e.opener.close):b.css("background-image","url("+e.opener.open+")")}function C(a){var b=a.el[0].style;a.el.removeClass(e.currElClass+" "+"sortableListsCurrent"),b.top="0",b.left="0",b.position="relative",b.width="auto"}function D(){a(e.listSelector,k.rootEl.el).each(function(){a(this).children().length||(a(this).prev("div").children(".sortableListsOpener").first().remove(),a(this).remove())})}var k,c=a(b.listRap).css("position","relative"),d={currElClass:"",placeholderClass:"",placeholderCss:{position:"relative",padding:0},hintClass:"",hintCss:{display:"none",position:"relative",padding:0},hintWrapperClass:"",hintWrapperCss:{},baseClass:"",baseCss:{position:"absolute",top:0-parseInt(c.css("margin-top")),left:0-parseInt(c.css("margin-left")),margin:0,padding:0,"z-index":2500},opener:{active:!1,open:"",close:"",openerCss:{"margin-left":"-15px","padding-right":"10px"},openerClass:""},listSelector:"ul",listsClass:"",listsCss:{},insertZone:50,insertZonePlus:!1,scroll:20,ignoreClass:"",isAllowed:function(){return!0},onDragStart:function(){return!0},onChange:function(){return!0},complete:function(){return!0}},e=a.extend(!0,{},d,b),f=a("<"+e.listSelector+" />").prependTo(c).attr("id","sortableListsBase").css(e.baseCss).addClass(e.listsClass+" "+e.baseClass),g=a("<li />").attr("id","sortableListsPlaceholder").css(e.placeholderCss).addClass(e.placeholderClass),h=a("<li />").attr("id","sortableListsHint").css(e.hintCss).addClass(e.hintClass),i=a("<"+e.listSelector+" />").attr("id","sortableListsHintWrapper").addClass(e.listsClass+" "+e.hintWrapperClass).css(e.listsCss).css(e.hintWrapperCss),j=a("<span />").addClass("sortableListsOpener "+e.opener.openerClass).css(e.opener.openerCss).on("mousedown",function(){var c=a(this).closest("li");return c.hasClass("sortableListsClosed")?A(c):B(c),!1});if("class"==e.opener.as?j.addClass(e.opener.close):"html"==e.opener.as?j.html(e.opener.close):(j.css("background-image","url("+e.opener.close+")"),console.error("jQuerySortableLists opener as background image is deprecated. In version 2.0.0 it will be removed. Use html instead please.")),k={isDragged:!1,isRelEFP:null,oEl:null,rootEl:null,cEl:null,upScroll:!1,downScroll:!1,pX:0,pY:0,cX:0,cY:0,isAllowed:!0,e:{pageX:0,pageY:0,clientX:0,clientY:0},doc:a(document),win:a(window)},e.opener.active){if(!e.opener.open)throw"Opener.open value is not defined. It should be valid url, html or css class.";if(!e.opener.close)throw"Opener.close value is not defined. It should be valid url, html or css class.";a(this).find("li").each(function(){var b=a(this);b.children(e.listSelector).length?(j.clone(!0).prependTo(b.children("div").first()),b.hasClass("sortableListsOpen")?A(b):B(b)):j.clone(!0).removeAttr("class").css({"margin-left":"-13px","padding-right":"7px"}).html("&bull;").prependTo(b.children("div").first())})}return this.on("mousedown",function(b){var d,f,c=a(b.target);k.isDragged!==!1||e.ignoreClass&&c.closest("li").hasClass(e.ignoreClass)||(b.preventDefault(),d=c.closest("li"),f=a(this),d[0]&&(e.onDragStart(b,d),l(b,d,f)))})},a.fn.sortableListsToArray=function(b,c){b=b||[];var d=0;return this.children("li").each(function(){var e=a(this),f={},g=e.attr("id");if(!g)throw console.log(e),"Previous item in console.log has no id. It is necessary to create the array.";f.id=g,f.parentId=c,f.value=e.data("value"),f.order=d,b.push(f),e.children("ul,ol").sortableListsToArray(b,g),d++}),b},a.fn.sortableListsToHierarchy=function(){var b=[],c=0;return a(this).children("li").each(function(){var d=a(this),e={},f=d.attr("id");if(!f)throw console.log(d),"Previous item in console.log has no id. It is necessary to create the array.";e.id=f,e.value=d.data("value"),e.order=c,b.push(e),e.children=d.children("ul,ol").sortableListsToHierarchy(),c++}),b},a.fn.sortableListsToString=function(b,c){return b=b||[],c=c||"no-parent",a(this).children("li").each(function(){var d=a(this),e=d.attr("id"),f=e?e.match(/(.+)[-=_](.+)/):null;if(!f)throw console.log(d),"Previous item in console.log has no id or id is not in required format xx_yy, xx-yy or xx=yy. It is necessary to create valid string.";b.push(f[1]+"["+f[2]+"]="+c),a(this).children("ul,ol").sortableListsToString(b,f[2])}),b.join("&")},a.extend({sortableListSort:function(b){var d,e,c=[];for(d=0,e=b.length;e>d;d++)(null==b[d].pId||0==b[d].pId||"0"==b[d].pId||""==b[d].pId)&&(b[d].pId=0);for(b.sort(function(a,b){return"undefined"!=typeof a.docSort&&a.pId==b.pId?parseInt(a.docSort)<parseInt(b.docSort)?-1:1:-1}),this.getItem=function(a){for(var c=0,d=b.length;d>c;c++)if(b[c].id==a)return b[c]},this.getData=function(b){if(-1==a.inArray(b,c)){if(0!==b.pId){var d=this.getItem(b.pId);if("undefined"==typeof d)return;this.getData(d)}c.push(b)}},d=0,e=b.length;e>d;d++)this.getData(b[d]);return c}})}(jQuery);

/*<script src="${ctxStatic}/org/tinygroup/jqknob/js/jquery.knob.js"></script>*/
!function(a){"object"==typeof exports?module.exports=a(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){"use strict";var b={},c=Math.max,d=Math.min;b.c={},b.c.d=a(document),b.c.t=function(a){return a.originalEvent.touches.length-1},b.o=function(){var c=this;this.o=null,this.$=null,this.i=null,this.g=null,this.v=null,this.cv=null,this.x=0,this.y=0,this.w=0,this.h=0,this.$c=null,this.c=null,this.t=0,this.isInit=!1,this.fgColor=null,this.pColor=null,this.dH=null,this.cH=null,this.eH=null,this.rH=null,this.scale=1,this.relative=!1,this.relativeWidth=!1,this.relativeHeight=!1,this.$div=null,this.run=function(){var b=function(a,b){var d;for(d in b)c.o[d]=b[d];c._carve().init(),c._configure()._draw()};if(!this.$.data("kontroled")){if(this.$.data("kontroled",!0),this.extend(),this.o=a.extend({min:void 0!==this.$.data("min")?this.$.data("min"):0,max:void 0!==this.$.data("max")?this.$.data("max"):100,stopper:!0,readOnly:this.$.data("readonly")||"readonly"===this.$.attr("readonly"),cursor:this.$.data("cursor")===!0&&30||this.$.data("cursor")||0,thickness:this.$.data("thickness")&&Math.max(Math.min(this.$.data("thickness"),1),.01)||.35,lineCap:this.$.data("linecap")||"butt",width:this.$.data("width")||200,height:this.$.data("height")||200,displayInput:null==this.$.data("displayinput")||this.$.data("displayinput"),displayPrevious:this.$.data("displayprevious"),fgColor:this.$.data("fgcolor")||"#87CEEB",inputColor:this.$.data("inputcolor"),font:this.$.data("font")||"Arial",fontWeight:this.$.data("font-weight")||"bold",inline:!1,step:this.$.data("step")||1,rotation:this.$.data("rotation"),draw:null,change:null,cancel:null,release:null,format:function(a){return a},parse:function(a){return parseFloat(a)}},this.o),this.o.flip="anticlockwise"===this.o.rotation||"acw"===this.o.rotation,this.o.inputColor||(this.o.inputColor=this.o.fgColor),this.$.is("fieldset")?(this.v={},this.i=this.$.find("input"),this.i.each(function(b){var d=a(this);c.i[b]=d,c.v[b]=c.o.parse(d.val()),d.bind("change blur",function(){var a={};a[b]=d.val(),c.val(c._validate(a))})}),this.$.find("legend").remove()):(this.i=this.$,this.v=this.o.parse(this.$.val()),""===this.v&&(this.v=this.o.min),this.$.bind("change blur",function(){c.val(c._validate(c.o.parse(c.$.val())))})),!this.o.displayInput&&this.$.hide(),this.$c=a(document.createElement("canvas")).attr({width:this.o.width,height:this.o.height}),this.$div=a('<div style="'+(this.o.inline?"display:inline;":"")+"width:"+this.o.width+"px;height:"+this.o.height+"px;"+'"></div>'),this.$.wrap(this.$div).before(this.$c),this.$div=this.$.parent(),this.c=this.$c[0].getContext?this.$c[0].getContext("2d"):null,!this.c)throw{name:"CanvasNotSupportedException",message:"Canvas not supported. Please use excanvas on IE8.0.",toString:function(){return this.name+": "+this.message}};return this.scale=(window.devicePixelRatio||1)/(this.c.webkitBackingStorePixelRatio||this.c.mozBackingStorePixelRatio||this.c.msBackingStorePixelRatio||this.c.oBackingStorePixelRatio||this.c.backingStorePixelRatio||1),this.relativeWidth=0!==this.o.width%1&&this.o.width.indexOf("%"),this.relativeHeight=0!==this.o.height%1&&this.o.height.indexOf("%"),this.relative=this.relativeWidth||this.relativeHeight,this._carve(),this.v instanceof Object?(this.cv={},this.copy(this.v,this.cv)):this.cv=this.v,this.$.bind("configure",b).parent().bind("configure",b),this._listen()._configure()._xy().init(),this.isInit=!0,this.$.val(this.o.format(this.v)),this._draw(),this}},this._carve=function(){if(this.relative){var a=this.relativeWidth?this.$div.parent().width()*parseInt(this.o.width)/100:this.$div.parent().width(),b=this.relativeHeight?this.$div.parent().height()*parseInt(this.o.height)/100:this.$div.parent().height();this.w=this.h=Math.min(a,b)}else this.w=this.o.width,this.h=this.o.height;return this.$div.css({width:this.w+"px",height:this.h+"px"}),this.$c.attr({width:this.w,height:this.h}),1!==this.scale&&(this.$c[0].width=this.$c[0].width*this.scale,this.$c[0].height=this.$c[0].height*this.scale,this.$c.width(this.w),this.$c.height(this.h)),this},this._draw=function(){var a=!0;c.g=c.c,c.clear(),c.dH&&(a=c.dH()),a!==!1&&c.draw()},this._touch=function(a){var d=function(a){var b=c.xy2val(a.originalEvent.touches[c.t].pageX,a.originalEvent.touches[c.t].pageY);b!=c.cv&&(c.cH&&c.cH(b)===!1||(c.change(c._validate(b)),c._draw()))};return this.t=b.c.t(a),d(a),b.c.d.bind("touchmove.k",d).bind("touchend.k",function(){b.c.d.unbind("touchmove.k touchend.k"),c.val(c.cv)}),this},this._mouse=function(a){var d=function(a){var b=c.xy2val(a.pageX,a.pageY);b!=c.cv&&(c.cH&&c.cH(b)===!1||(c.change(c._validate(b)),c._draw()))};return d(a),b.c.d.bind("mousemove.k",d).bind("keyup.k",function(a){if(27===a.keyCode){if(b.c.d.unbind("mouseup.k mousemove.k keyup.k"),c.eH&&c.eH()===!1)return;c.cancel()}}).bind("mouseup.k",function(){b.c.d.unbind("mousemove.k mouseup.k keyup.k"),c.val(c.cv)}),this},this._xy=function(){var a=this.$c.offset();return this.x=a.left,this.y=a.top,this},this._listen=function(){return this.o.readOnly?this.$.attr("readonly","readonly"):(this.$c.bind("mousedown",function(a){a.preventDefault(),c._xy()._mouse(a)}).bind("touchstart",function(a){a.preventDefault(),c._xy()._touch(a)}),this.listen()),this.relative&&a(window).resize(function(){c._carve().init(),c._draw()}),this},this._configure=function(){return this.o.draw&&(this.dH=this.o.draw),this.o.change&&(this.cH=this.o.change),this.o.cancel&&(this.eH=this.o.cancel),this.o.release&&(this.rH=this.o.release),this.o.displayPrevious?(this.pColor=this.h2rgba(this.o.fgColor,"0.4"),this.fgColor=this.h2rgba(this.o.fgColor,"0.6")):this.fgColor=this.o.fgColor,this},this._clear=function(){this.$c[0].width=this.$c[0].width},this._validate=function(a){var b=~~((0>a?-.5:.5)+a/this.o.step)*this.o.step;return Math.round(100*b)/100},this.listen=function(){},this.extend=function(){},this.init=function(){},this.change=function(){},this.val=function(){},this.xy2val=function(){},this.draw=function(){},this.clear=function(){this._clear()},this.h2rgba=function(a,b){var c;return a=a.substring(1,7),c=[parseInt(a.substring(0,2),16),parseInt(a.substring(2,4),16),parseInt(a.substring(4,6),16)],"rgba("+c[0]+","+c[1]+","+c[2]+","+b+")"},this.copy=function(a,b){for(var c in a)b[c]=a[c]}},b.Dial=function(){b.o.call(this),this.startAngle=null,this.xy=null,this.radius=null,this.lineWidth=null,this.cursorExt=null,this.w2=null,this.PI2=2*Math.PI,this.extend=function(){this.o=a.extend({bgColor:this.$.data("bgcolor")||"#EEEEEE",angleOffset:this.$.data("angleoffset")||0,angleArc:this.$.data("anglearc")||360,inline:!0},this.o)},this.val=function(a,b){return null==a?this.v:(a=this.o.parse(a),b!==!1&&a!=this.v&&this.rH&&this.rH(a)===!1||(this.cv=this.o.stopper?c(d(a,this.o.max),this.o.min):a,this.v=this.cv,this.$.val(this.o.format(this.v)),this._draw()),void 0)},this.xy2val=function(a,b){var e,f;return e=Math.atan2(a-(this.x+this.w2),-(b-this.y-this.w2))-this.angleOffset,this.o.flip&&(e=this.angleArc-e-this.PI2),this.angleArc!=this.PI2&&0>e&&e>-.5?e=0:0>e&&(e+=this.PI2),f=e*(this.o.max-this.o.min)/this.angleArc+this.o.min,this.o.stopper&&(f=c(d(f,this.o.max),this.o.min)),f},this.listen=function(){var e,f,h,i,b=this,g=function(a){a.preventDefault();var g=a.originalEvent,h=g.detail||g.wheelDeltaX,i=g.detail||g.wheelDeltaY,j=b._validate(b.o.parse(b.$.val()))+(h>0||i>0?b.o.step:0>h||0>i?-b.o.step:0);j=c(d(j,b.o.max),b.o.min),b.val(j,!1),b.rH&&(clearTimeout(e),e=setTimeout(function(){b.rH(j),e=null},100),f||(f=setTimeout(function(){e&&b.rH(j),f=null},200)))},j=1,k={37:-b.o.step,38:b.o.step,39:b.o.step,40:-b.o.step};this.$.bind("keydown",function(e){var g,f=e.keyCode;f>=96&&105>=f&&(f=e.keyCode=f-48),h=parseInt(String.fromCharCode(f)),isNaN(h)&&(13!==f&&8!==f&&9!==f&&189!==f&&(190!==f||b.$.val().match(/\./))&&e.preventDefault(),a.inArray(f,[37,38,39,40])>-1&&(e.preventDefault(),g=b.o.parse(b.$.val())+k[f]*j,b.o.stopper&&(g=c(d(g,b.o.max),b.o.min)),b.change(b._validate(g)),b._draw(),i=window.setTimeout(function(){j*=2},30)))}).bind("keyup",function(){isNaN(h)?i&&(window.clearTimeout(i),i=null,j=1,b.val(b.$.val())):b.$.val()>b.o.max&&b.$.val(b.o.max)||b.$.val()<b.o.min&&b.$.val(b.o.min)}),this.$c.bind("mousewheel DOMMouseScroll",g),this.$.bind("mousewheel DOMMouseScroll",g)},this.init=function(){(this.v<this.o.min||this.v>this.o.max)&&(this.v=this.o.min),this.$.val(this.v),this.w2=this.w/2,this.cursorExt=this.o.cursor/100,this.xy=this.w2*this.scale,this.lineWidth=this.xy*this.o.thickness,this.lineCap=this.o.lineCap,this.radius=this.xy-this.lineWidth/2,this.o.angleOffset&&(this.o.angleOffset=isNaN(this.o.angleOffset)?0:this.o.angleOffset),this.o.angleArc&&(this.o.angleArc=isNaN(this.o.angleArc)?this.PI2:this.o.angleArc),this.angleOffset=this.o.angleOffset*Math.PI/180,this.angleArc=this.o.angleArc*Math.PI/180,this.startAngle=1.5*Math.PI+this.angleOffset,this.endAngle=1.5*Math.PI+this.angleOffset+this.angleArc;var a=c(String(Math.abs(this.o.max)).length,String(Math.abs(this.o.min)).length,2)+2;this.o.displayInput&&this.i.css({width:(this.w/2+4>>0)+"px",height:(this.w/3>>0)+"px",position:"absolute","vertical-align":"middle","margin-top":(this.w/3>>0)+"px","margin-left":"-"+(3*this.w/4+2>>0)+"px",border:0,background:"none",font:this.o.fontWeight+" "+(this.w/a>>0)+"px "+this.o.font,"text-align":"center",color:this.o.inputColor||this.o.fgColor,padding:"0px","-webkit-appearance":"none"})||this.i.css({width:"0px",visibility:"hidden"})},this.change=function(a){this.cv=a,this.$.val(this.o.format(a))},this.angle=function(a){return(a-this.o.min)*this.angleArc/(this.o.max-this.o.min)},this.arc=function(a){var b,c;return a=this.angle(a),this.o.flip?(b=this.endAngle+1e-5,c=b-a-1e-5):(b=this.startAngle-1e-5,c=b+a+1e-5),this.o.cursor&&(b=c-this.cursorExt)&&(c+=this.cursorExt),{s:b,e:c,d:this.o.flip&&!this.o.cursor}},this.draw=function(){var c,a=this.g,b=this.arc(this.cv),d=1;a.lineWidth=this.lineWidth,a.lineCap=this.lineCap,"none"!==this.o.bgColor&&(a.beginPath(),a.strokeStyle=this.o.bgColor,a.arc(this.xy,this.xy,this.radius,this.endAngle-1e-5,this.startAngle+1e-5,!0),a.stroke()),this.o.displayPrevious&&(c=this.arc(this.v),a.beginPath(),a.strokeStyle=this.pColor,a.arc(this.xy,this.xy,this.radius,c.s,c.e,c.d),a.stroke(),d=this.cv==this.v),a.beginPath(),a.strokeStyle=d?this.o.fgColor:this.fgColor,a.arc(this.xy,this.xy,this.radius,b.s,b.e,b.d),a.stroke()},this.cancel=function(){this.val(this.v)}},a.fn.dial=a.fn.knob=function(c){return this.each(function(){var d=new b.Dial;d.o=c,d.$=a(this),d.run()}).parent()}});

/*<script src="${ctxStatic}/org/tinygroup/burndownChart/js/burndownChart.js"></script>*/
!function(a,b){if("undefined"==typeof a)throw new Error("ZUI requires jQuery");a.zui||(a.zui=function(b){a.isPlainObject(b)&&a.extend(a.zui,b)});var c=0;a.zui({uuid:function(){return 1e3*(new Date).getTime()+c++%1e3},callEvent:function(b,c,d){if(a.isFunction(b)){"undefined"!=typeof d&&(b=a.proxy(b,d));var e=b(c);return c&&(c.result=e),!(void 0!==e&&!e)}return 1},clientLang:function(){var c,e,d=b.config;return"undefined"!=typeof d&&d.clientLang?c=d.clientLang:(e=a("html").attr("lang"),c=e?e:navigator.userLanguage||navigator.userLanguage||"zh_cn"),c.replace("-","_").toLowerCase()}}),a.fn.callEvent=function(b,c,d){var h,i,e=a(this),f=b.indexOf(".zui."),g=b;return 0>f&&d&&d.name?b+="."+d.name:g=b.substring(0,f),h=a.Event(b,c),"undefined"==typeof d&&f>0&&(d=e.data(b.substring(f+1))),d&&d.options&&(i=d.options[g],a.isFunction(i)&&a.zui.callEvent(d.options[g],h,d)),h}}(jQuery,window),function(a,b){function d(a){var b,c,d;if(a=a.toLowerCase(),a&&j.test(a)){if(4===a.length){for(c="#",b=1;4>b;b+=1)c+=a.slice(b,b+1).concat(a.slice(b,b+1));a=c}for(d=[],b=1;7>b;b+=2)d.push(parseInt("0x"+a.slice(b,b+2)));return{r:d[0],g:d[1],b:d[2],a:1}}throw new Error("function hexToRgb: Wrong hex string! (hex: "+a+")")}function e(b){return"string"==typeof b&&("transparent"===b.toLowerCase()||k[b.toLowerCase()]||j.test(a.trim(b.toLowerCase())))}function f(a){function b(a){return a=0>a?a+1:a>1?a-1:a,1>6*a?j+6*(g-j)*a:1>2*a?g:2>3*a?j+6*(g-j)*(2/3-a):j}var g,j,k,c=a.h,d=a.s,e=a.l,f=a.a;return c=i(c)%360/360,d=h(i(d)),e=h(i(e)),f=h(i(f)),g=.5>=e?e*(d+1):e+d-e*d,j=2*e-g,k={r:255*b(c+1/3),g:255*b(c),b:255*b(c-1/3),a:f},k}function g(a,c,d){return void 0===d&&(d=0),void 0===c&&(c=255),b.min(b.max(a,d),c)}function h(a,b){return g(a,b)}function i(a){return"number"==typeof a?a:parseFloat(a)}var j=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,k={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},l=function(a,b,c,e){var g,j;this.r=0,this.g=0,this.b=0,this.a=1,void 0!==e&&(this.a=h(i(e),1)),void 0!==a&&void 0!==b&&void 0!==c?(this.r=parseInt(h(i(a),255)),this.g=parseInt(h(i(b),255)),this.b=parseInt(h(i(c),255))):void 0!==a&&(g=typeof a,"string"==g?(a=a.toLowerCase(),"transparent"===a?this.a=0:this.rgb(k[a]?d(k[a]):d(a))):"number"==g&&void 0===b?(this.r=parseInt(h(a,255)),this.g=this.r,this.b=this.r):"object"==g&&a.hasOwnProperty("r")?(this.r=parseInt(h(i(a.r),255)),a.hasOwnProperty("g")&&(this.g=parseInt(h(i(a.g),255))),a.hasOwnProperty("b")&&(this.b=parseInt(h(i(a.b),255))),a.hasOwnProperty("a")&&(this.a=h(i(a.a),1))):"object"==g&&a.hasOwnProperty("h")&&(j={h:h(i(a.h),360),s:1,l:1,a:1},a.hasOwnProperty("s")&&(j.s=h(i(a.s),1)),a.hasOwnProperty("l")&&(j.l=h(i(a.l),1)),a.hasOwnProperty("a")&&(j.a=h(i(a.a),1)),this.rgb(f(j))))};l.prototype.rgb=function(a){if(void 0!==a){if("object"==typeof a)a.hasOwnProperty("r")&&(this.r=parseInt(h(i(a.r),255))),a.hasOwnProperty("g")&&(this.g=parseInt(h(i(a.g),255))),a.hasOwnProperty("b")&&(this.b=parseInt(h(i(a.b),255))),a.hasOwnProperty("a")&&(this.a=h(i(a.a),1));else{var b=parseInt(i(a));this.r=b,this.g=b,this.b=b}return this}return{r:this.r,g:this.g,b:this.b,a:this.a}},l.prototype.hue=function(a){var b=this.toHsl();return void 0===a?b.h:(b.h=h(i(a),360),this.rgb(f(b)),this)},l.prototype.darken=function(a){var b=this.toHsl();return b.l-=a/100,b.l=h(b.l,1),this.rgb(f(b)),this},l.prototype.clone=function(){return new l(this.r,this.g,this.b,this.a)},l.prototype.lighten=function(a){return this.darken(-a)},l.prototype.fade=function(a){return this.a=h(a/100,1),this},l.prototype.spin=function(a){var b=this.toHsl(),c=(b.h+a)%360;return b.h=0>c?360+c:c,this.rgb(f(b)),this},l.prototype.toHsl=function(){var a,c,d=this.r/255,e=this.g/255,f=this.b/255,g=this.a,h=b.max(d,e,f),i=b.min(d,e,f),j=(h+i)/2,k=h-i;if(h===i)a=c=0;else{switch(c=j>.5?k/(2-h-i):k/(h+i),h){case d:a=(e-f)/k+(f>e?6:0);break;case e:a=(f-d)/k+2;break;case f:a=(d-e)/k+4}a/=6}return{h:360*a,s:c,l:j,a:g}},l.prototype.luma=function(){var a=this.r/255,c=this.g/255,d=this.b/255;return a=.03928>=a?a/12.92:b.pow((a+.055)/1.055,2.4),c=.03928>=c?c/12.92:b.pow((c+.055)/1.055,2.4),d=.03928>=d?d/12.92:b.pow((d+.055)/1.055,2.4),.2126*a+.7152*c+.0722*d},l.prototype.saturate=function(a){var b=this.toHsl();return b.s+=a/100,b.s=h(b.s),this.rgb(f(b)),this},l.prototype.desaturate=function(a){return this.saturate(-a)},l.prototype.contrast=function(a,b,c){if(b="undefined"==typeof b?new l(255,255,255,1):new l(b),a="undefined"==typeof a?new l(0,0,0,1):new l(a),this.a<.5)return a;if(c=void 0===c?.43:i(c),a.luma()>b.luma()){var d=b;b=a,a=d}return this.luma()<c?b:a},l.prototype.hexStr=function(){var a=this.r.toString(16),b=this.g.toString(16),c=this.b.toString(16);return 1==a.length&&(a="0"+a),1==b.length&&(b="0"+b),1==c.length&&(c="0"+c),"#"+a+b+c},l.prototype.toCssStr=function(){return this.a>0?this.a<1?"rgba("+this.r+","+this.g+","+this.b+","+this.a+")":this.hexStr():"transparent"},l.prototype.isColor=e,a.zui({Color:l})}(jQuery,Math,window),function(a){var b=0,c=["primary","red","yellow","green","blue","purple","brown","dark"],d={theme:"light",primary:"#3280fc",secondary:"#145ccd",pale:"#ebf2f9",fore:"#353535",back:"#ffffff",grayDarker:"#222222",grayDark:"#333333",gray:"#808080",grayLight:"#dddddd",grayLighter:"#e5e5e5",grayPale:"#f1f1f1",white:"#ffffff",black:"#000000",red:"#ea644a",yellow:"#f1a325",green:"#38b03f",blue:"#03b8cf",purple:"#8666b8",brown:"#bd7b46",greenPale:"#ddf4df",yellowPale:"#fff0d5",redPale:"#ffe5e0",bluePale:"#ddf3f5",brownPale:"#f7ebe1",purplePale:"#f5eeff",light:"#ffffff",dark:"#353535",success:"#38b03f",warning:"#f1a325",danger:"#ea644a",info:"#03b8cf",important:"#bd7b46",special:"#8666b8",successPale:"#ddf4df",warningPale:"#fff0d5",dangerPale:"#ffe5e0",infoPale:"#ddf3f5",importantPale:"#f7ebe1",specialPale:"#f5eeff"};d.get=function(e){return("undefined"==typeof e||"random"===e)&&(e=c[b++%c.length]),new a.zui.Color(d[e]?d[e]:e)},a.zui({colorset:d}),a.zui.Color&&a.extend(a.zui.Color,d)}(jQuery),function(a){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,b=a&&a.zui?a.zui:this,c=(b.Chart,function(a){var b,c,e;return this.canvas=a.canvas,this.ctx=a,b=function(a,b){return a["offset"+b]?a["offset"+b]:document.defaultView.getComputedStyle(a).getPropertyValue(b)},c=this.width=b(a.canvas,"Width"),e=this.height=b(a.canvas,"Height"),a.canvas.width=c,a.canvas.height=e,c=this.width=a.canvas.width,e=this.height=a.canvas.height,this.aspectRatio=this.width/this.height,d.retinaScale(this),this});c.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,customTooltips:!1,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",onAnimationProgress:function(){},onAnimationComplete:function(){}}},c.types={},d=c.helpers={},e=d.each=function(a,b,c){var e,f,d=Array.prototype.slice.call(arguments,3);if(a)if(a.length===+a.length)for(e=0;e<a.length;e++)b.apply(c,[a[e],e].concat(d));else for(f in a)b.apply(c,[a[f],f].concat(d))},f=d.clone=function(a){var b={};return e(a,function(c,d){a.hasOwnProperty(d)&&(b[d]=c)}),b},g=d.extend=function(a){return e(Array.prototype.slice.call(arguments,1),function(b){e(b,function(c,d){b.hasOwnProperty(d)&&(a[d]=c)})}),a},h=d.merge=function(){var c=Array.prototype.slice.call(arguments,0);return c.unshift({}),g.apply(null,c)},i=d.indexOf=function(a,b){if(Array.prototype.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1},d.where=function(a,b){var c=[];return d.each(a,function(a){b(a)&&c.push(a)}),c},d.findNextWhere=function(a,b,c){var d,e;for(c||(c=-1),d=c+1;d<a.length;d++)if(e=a[d],b(e))return e},d.findPreviousWhere=function(a,b,c){var d,e;for(c||(c=a.length),d=c-1;d>=0;d--)if(e=a[d],b(e))return e},j=d.inherits=function(a){var b=this,c=a&&a.hasOwnProperty("constructor")?a.constructor:function(){return b.apply(this,arguments)},d=function(){this.constructor=c};return d.prototype=b.prototype,c.prototype=new d,c.extend=j,a&&g(c.prototype,a),c.__super__=b.prototype,c},k=d.noop=function(){},l=d.uid=function(){var a=0;return function(){return"chart-"+a++}}(),m=d.warn=function(a){window.console&&"function"==typeof window.console.warn&&console.warn(a)},n=d.amd="function"==typeof define&&define.amd,o=d.isNumber=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},p=d.max=function(a){return Math.max.apply(Math,a)},q=d.min=function(a){return Math.min.apply(Math,a)},d.cap=function(a,b,c){if(o(b)){if(a>b)return b}else if(o(c)&&c>a)return c;return a},r=d.getDecimalPlaces=function(a){return 0!==a%1&&o(a)?a.toString().split(".")[1].length:0},s=d.radians=function(a){return a*(Math.PI/180)},d.getAngleFromPoint=function(a,b){var c=b.x-a.x,d=b.y-a.y,e=Math.sqrt(c*c+d*d),f=2*Math.PI+Math.atan2(d,c);return 0>c&&0>d&&(f+=2*Math.PI),{angle:f,distance:e}},t=d.aliasPixel=function(a){return 0===a%2?0:.5},d.splineCurve=function(a,b,c,d){var e=Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2)),f=Math.sqrt(Math.pow(c.x-b.x,2)+Math.pow(c.y-b.y,2)),g=d*e/(e+f),h=d*f/(e+f);return{inner:{x:b.x-g*(c.x-a.x),y:b.y-g*(c.y-a.y)},outer:{x:b.x+h*(c.x-a.x),y:b.y+h*(c.y-a.y)}}},u=d.calculateOrderOfMagnitude=function(a){return Math.floor(Math.log(a)/Math.LN10)},d.calculateScaleRange=function(a,b,c,d,e){var k,l,m,n,o,r,s,f=2,g=Math.floor(b/(1.5*c)),h=f>=g,i=p(a),j=q(a);for(i===j&&(i+=.5,j>=.5&&!d?j-=.5:i+=.5),k=Math.abs(i-j),l=u(k),m=Math.ceil(i/(1*Math.pow(10,l)))*Math.pow(10,l),n=d?0:Math.floor(j/(1*Math.pow(10,l)))*Math.pow(10,l),o=m-n,r=Math.pow(10,l),s=Math.round(o/r);(s>g||g>2*s)&&!h;)if(s>g)r*=2,s=Math.round(o/r),0!==s%1&&(h=!0);else if(e&&l>=0){if(0!==r/2%1)break;r/=2,s=Math.round(o/r)}else r/=2,s=Math.round(o/r);return h&&(s=f,r=o/s),{steps:s,stepValue:r,min:n,max:n+s*r}},v=d.template=function(a,b){function c(a,b){var c=/\W/.test(a)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):d[a]=d[a];return b?c(b):c}if(a instanceof Function)return a(b);var d={};return c(a,b)},d.generateLabels=function(a,b,c,d){var f=new Array(b);return labelTemplateString&&e(f,function(b,e){f[e]=v(a,{value:c+d*(e+1)})}),f},w=d.easingEffects={linear:function(a){return a},easeInQuad:function(a){return a*a},easeOutQuad:function(a){return-1*a*(a-2)},easeInOutQuad:function(a){return(a/=.5)<1?.5*a*a:-.5*(--a*(a-2)-1)},easeInCubic:function(a){return a*a*a},easeOutCubic:function(a){return 1*((a=a/1-1)*a*a+1)},easeInOutCubic:function(a){return(a/=.5)<1?.5*a*a*a:.5*((a-=2)*a*a+2)},easeInQuart:function(a){return a*a*a*a},easeOutQuart:function(a){return-1*((a=a/1-1)*a*a*a-1)},easeInOutQuart:function(a){return(a/=.5)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)},easeInQuint:function(a){return 1*(a/=1)*a*a*a*a},easeOutQuint:function(a){return 1*((a=a/1-1)*a*a*a*a+1)},easeInOutQuint:function(a){return(a/=.5)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)},easeInSine:function(a){return-1*Math.cos(a/1*(Math.PI/2))+1},easeOutSine:function(a){return 1*Math.sin(a/1*(Math.PI/2))},easeInOutSine:function(a){return-.5*(Math.cos(Math.PI*a/1)-1)},easeInExpo:function(a){return 0===a?1:1*Math.pow(2,10*(a/1-1))},easeOutExpo:function(a){return 1===a?1:1*(-Math.pow(2,-10*a/1)+1)},easeInOutExpo:function(a){return 0===a?0:1===a?1:(a/=.5)<1?.5*Math.pow(2,10*(a-1)):.5*(-Math.pow(2,-10*--a)+2)},easeInCirc:function(a){return a>=1?a:-1*(Math.sqrt(1-(a/=1)*a)-1)},easeOutCirc:function(a){return 1*Math.sqrt(1-(a=a/1-1)*a)},easeInOutCirc:function(a){return(a/=.5)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)},easeInElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:1==(a/=1)?1:(c||(c=.3),d<Math.abs(1)?(d=1,b=c/4):b=c/(2*Math.PI)*Math.asin(1/d),-(d*Math.pow(2,10*(a-=1))*Math.sin(2*(1*a-b)*Math.PI/c)))},easeOutElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:1==(a/=1)?1:(c||(c=.3),d<Math.abs(1)?(d=1,b=c/4):b=c/(2*Math.PI)*Math.asin(1/d),d*Math.pow(2,-10*a)*Math.sin(2*(1*a-b)*Math.PI/c)+1)},easeInOutElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:2==(a/=.5)?1:(c||(c=.3*1.5),d<Math.abs(1)?(d=1,b=c/4):b=c/(2*Math.PI)*Math.asin(1/d),1>a?-.5*d*Math.pow(2,10*(a-=1))*Math.sin(2*(1*a-b)*Math.PI/c):.5*d*Math.pow(2,-10*(a-=1))*Math.sin(2*(1*a-b)*Math.PI/c)+1)},easeInBack:function(a){var b=1.70158;return 1*(a/=1)*a*((b+1)*a-b)},easeOutBack:function(a){var b=1.70158;return 1*((a=a/1-1)*a*((b+1)*a+b)+1)},easeInOutBack:function(a){var b=1.70158;return(a/=.5)<1?.5*a*a*(((b*=1.525)+1)*a-b):.5*((a-=2)*a*(((b*=1.525)+1)*a+b)+2)},easeInBounce:function(a){return 1-w.easeOutBounce(1-a)},easeOutBounce:function(a){return(a/=1)<1/2.75?7.5625*a*a:2/2.75>a?1*(7.5625*(a-=1.5/2.75)*a+.75):2.5/2.75>a?1*(7.5625*(a-=2.25/2.75)*a+.9375):1*(7.5625*(a-=2.625/2.75)*a+.984375)},easeInOutBounce:function(a){return.5>a?.5*w.easeInBounce(2*a):.5*w.easeOutBounce(2*a-1)+.5}},x=d.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(a,1e3/60)}}(),y=d.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(a){return window.clearTimeout(a,1e3/60)}}(),d.animationLoop=function(a,b,c,d,e,f){var g=0,h=w[c]||w.linear,i=function(){g++;var c=g/b,j=h(c);a.call(f,j,c,g),d.call(f,j,c),b>g?f.animationFrame=x(i):e.apply(f)};x(i)},d.getRelativePosition=function(a){var b,c,d=a.originalEvent||a,e=a.currentTarget||a.srcElement,f=e.getBoundingClientRect();return d.touches?(b=d.touches[0].clientX-f.left,c=d.touches[0].clientY-f.top):(b=d.clientX-f.left,c=d.clientY-f.top),{x:b,y:c}},z=d.addEvent=function(a,b,c){a.addEventListener?a.addEventListener(b,c):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c},A=d.removeEvent=function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent?a.detachEvent("on"+b,c):a["on"+b]=k},d.bindEvents=function(a,b,c){a.events||(a.events={}),e(b,function(b){a.events[b]=function(){c.apply(a,arguments)},z(a.chart.canvas,b,a.events[b])})},B=d.unbindEvents=function(a,b){e(b,function(b,c){A(a.chart.canvas,c,b)})},C=d.getMaximumWidth=function(a){var b=a.parentNode;return b.clientWidth},D=d.getMaximumHeight=function(a){var b=a.parentNode;return b.clientHeight},d.getMaximumSize=d.getMaximumWidth,E=d.retinaScale=function(a){var b=a.ctx,c=a.canvas.width,d=a.canvas.height;window.devicePixelRatio&&(b.canvas.style.width=c+"px",b.canvas.style.height=d+"px",b.canvas.height=d*window.devicePixelRatio,b.canvas.width=c*window.devicePixelRatio,b.scale(window.devicePixelRatio,window.devicePixelRatio))},F=d.clear=function(a){a.ctx.clearRect(0,0,a.width,a.height)},G=d.fontString=function(a,b,c){return b+" "+a+"px "+c},H=d.longestText=function(a,b,c){a.font=b;var d=0;return e(c,function(b){var c=a.measureText(b).width;d=c>d?c:d}),d},I=d.drawRoundedRectangle=function(a,b,c,d,e,f){a.beginPath(),a.moveTo(b+f,c),a.lineTo(b+d-f,c),a.quadraticCurveTo(b+d,c,b+d,c+f),a.lineTo(b+d,c+e-f),a.quadraticCurveTo(b+d,c+e,b+d-f,c+e),a.lineTo(b+f,c+e),a.quadraticCurveTo(b,c+e,b,c+e-f),a.lineTo(b,c+f),a.quadraticCurveTo(b,c,b+f,c),a.closePath()},c.instances={},c.Type=function(a,b,d){this.options=b,this.chart=d,this.id=l(),c.instances[this.id]=this,b.responsive&&this.resize(),this.initialize.call(this,a)},g(c.Type.prototype,{initialize:function(){return this},clear:function(){return F(this.chart),this},stop:function(){return y(this.animationFrame),this},resize:function(a){this.stop();var b=this.chart.canvas,c=C(this.chart.canvas),d=this.options.maintainAspectRatio?c/this.chart.aspectRatio:D(this.chart.canvas);return b.width=this.chart.width=c,b.height=this.chart.height=d,E(this.chart),"function"==typeof a&&a.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:k,render:function(a){return a&&this.reflow(),this.options.animation&&!a?d.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this):(this.draw(),this.options.onAnimationComplete.call(this)),this},generateLegend:function(){return v(this.options.legendTemplate,this)},destroy:function(){this.clear(),B(this,this.events);var a=this.chart.canvas;a.width=this.chart.width,a.height=this.chart.height,a.style.removeProperty?(a.style.removeProperty("width"),a.style.removeProperty("height")):(a.style.removeAttribute("width"),a.style.removeAttribute("height")),delete c.instances[this.id]},showTooltip:function(a,b){var f,g,h,j,k,l,m;if("undefined"==typeof this.activeElements&&(this.activeElements=[]),f=function(a){var b=!1;return a.length!==this.activeElements.length?b=!0:(e(a,function(a,c){a!==this.activeElements[c]&&(b=!0)},this),b)}.call(this,a),f||b){if(this.activeElements=a,this.draw(),this.options.customTooltips&&this.options.customTooltips(!1),a.length>0)if(this.datasets&&this.datasets.length>1){for(j=this.datasets.length-1;j>=0&&(g=this.datasets[j].points||this.datasets[j].bars||this.datasets[j].segments,h=i(g,a[0]),-1===h);j--);k=[],l=[],m=function(){var b,c,e,f,g,i=[],j=[],m=[];return d.each(this.datasets,function(a){a.showTooltips!==!1&&(b=a.points||a.bars||a.segments,b[h]&&b[h].hasValue()&&i.push(b[h]))}),d.each(i,function(a){j.push(a.x),m.push(a.y),k.push(d.template(this.options.multiTooltipTemplate,a)),l.push({fill:a._saved.fillColor||a.fillColor,stroke:a._saved.strokeColor||a.strokeColor})},this),g=q(m),e=p(m),f=q(j),c=p(j),{x:f>this.chart.width/2?f:c,y:(g+e)/2}}.call(this,h),new c.MultiTooltip({x:m.x,y:m.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:k,legendColors:l,legendColorBackground:this.options.multiTooltipKeyBackground,title:a[0].label,chart:this.chart,ctx:this.chart.ctx,custom:this.options.customTooltips}).draw()}else e(a,function(a){var b=a.tooltipPosition();new c.Tooltip({x:Math.round(b.x),y:Math.round(b.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:v(this.options.tooltipTemplate,a),chart:this.chart,custom:this.options.customTooltips}).draw()},this);return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}}),c.Type.extend=function(a){var e,i,b=this,d=function(){return b.apply(this,arguments)};return d.prototype=f(b.prototype),g(d.prototype,a),d.extend=c.Type.extend,a.name||b.prototype.name?(e=a.name||b.prototype.name,i=c.defaults[b.prototype.name]?f(c.defaults[b.prototype.name]):{},c.defaults[e]=g(i,a.defaults),c.types[e]=d,c.prototype[e]=function(a,b){var f=h(c.defaults.global,c.defaults[e],b||{});return new d(a,f,this)}):m("Name not provided for this chart, so it hasn't been registered"),b},c.Element=function(a){g(this,a),this.initialize.apply(this,arguments),this.save()},g(c.Element.prototype,{initialize:function(){},restore:function(a){return a?e(a,function(a){this[a]=this._saved[a]},this):g(this,this._saved),this},save:function(){return this._saved=f(this),delete this._saved._saved,this},update:function(a){return e(a,function(a,b){this._saved[b]=this[b],this[b]=a},this),this},transition:function(a,b){return e(a,function(a,c){this[c]=(a-this._saved[c])*b+this._saved[c]},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return o(this.value)}}),c.Element.extend=j,c.Point=c.Element.extend({display:!0,inRange:function(a,b){var c=this.hitDetectionRadius+this.radius;return Math.pow(a-this.x,2)+Math.pow(b-this.y,2)<Math.pow(c,2)},draw:function(){if(this.display){var a=this.ctx;a.beginPath(),a.arc(this.x,this.y,this.radius,0,2*Math.PI),a.closePath(),a.strokeStyle=this.strokeColor,a.lineWidth=this.strokeWidth,a.fillStyle=this.fillColor,a.fill(),a.stroke()}}}),c.Arc=c.Element.extend({inRange:function(a,b){var c=d.getAngleFromPoint(this,{x:a,y:b}),e=c.angle>=this.startAngle&&c.angle<=this.endAngle,f=c.distance>=this.innerRadius&&c.distance<=this.outerRadius;return e&&f},tooltipPosition:function(){var a=this.startAngle+(this.endAngle-this.startAngle)/2,b=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(a)*b,y:this.y+Math.sin(a)*b}},draw:function(){var b=this.ctx;b.beginPath(),b.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle),b.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,!0),b.closePath(),b.strokeStyle=this.strokeColor,b.lineWidth=this.strokeWidth,b.fillStyle=this.fillColor,b.fill(),b.lineJoin="bevel",this.showStroke&&b.stroke()}}),c.Rectangle=c.Element.extend({draw:function(){var a=this.ctx,b=this.width/2,c=this.x-b,d=this.x+b,e=this.base-(this.base-this.y),f=this.strokeWidth/2;this.showStroke&&(c+=f,d-=f,e+=f),a.beginPath(),a.fillStyle=this.fillColor,a.strokeStyle=this.strokeColor,a.lineWidth=this.strokeWidth,a.moveTo(c,this.base),a.lineTo(c,e),a.lineTo(d,e),a.lineTo(d,this.base),a.fill(),this.showStroke&&a.stroke()},height:function(){return this.base-this.y},inRange:function(a,b){return a>=this.x-this.width/2&&a<=this.x+this.width/2&&b>=this.y&&b<=this.base}}),c.Tooltip=c.Element.extend({draw:function(){var b,c,d,e,f,g,a=this.chart.ctx;if(a.font=G(this.fontSize,this.fontStyle,this.fontFamily),this.xAlign="center",this.yAlign="above",b=this.caretPadding=2,c=a.measureText(this.text).width+2*this.xPadding,d=this.fontSize+2*this.yPadding,e=d+this.caretHeight+b,this.x+c/2>this.chart.width?this.xAlign="left":this.x-c/2<0&&(this.xAlign="right"),this.y-e<0&&(this.yAlign="below"),f=this.x-c/2,g=this.y-e,a.fillStyle=this.fillColor,this.custom)this.custom(this);else{switch(this.yAlign){case"above":a.beginPath(),a.moveTo(this.x,this.y-b),a.lineTo(this.x+this.caretHeight,this.y-(b+this.caretHeight)),a.lineTo(this.x-this.caretHeight,this.y-(b+this.caretHeight)),a.closePath(),a.fill();break;case"below":g=this.y+b+this.caretHeight,a.beginPath(),a.moveTo(this.x,this.y+b),a.lineTo(this.x+this.caretHeight,this.y+b+this.caretHeight),a.lineTo(this.x-this.caretHeight,this.y+b+this.caretHeight),a.closePath(),a.fill()}switch(this.xAlign){case"left":f=this.x-c+(this.cornerRadius+this.caretHeight);break;case"right":f=this.x-(this.cornerRadius+this.caretHeight)}I(a,f,g,c,d,this.cornerRadius),a.fill(),a.fillStyle=this.textColor,a.textAlign="center",a.textBaseline="middle",a.fillText(this.text,f+c/2,g+d/2)}}}),c.MultiTooltip=c.Element.extend({initialize:function(){var a,b,c,d;this.font=G(this.fontSize,this.fontStyle,this.fontFamily),this.titleFont=G(this.titleFontSize,this.titleFontStyle,this.titleFontFamily),this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+2*this.yPadding+1.5*this.titleFontSize,this.ctx.font=this.titleFont,a=this.ctx.measureText(this.title).width,b=H(this.ctx,this.font,this.labels)+this.fontSize+3,c=p([b,a]),this.width=c+2*this.xPadding,d=this.height/2,this.y-d<0?this.y=d:this.y+d>this.chart.height&&(this.y=this.chart.height-d),this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(a){var b=this.y-this.height/2+this.yPadding,c=a-1;return 0===a?b+this.titleFontSize/2:b+(1.5*this.fontSize*c+this.fontSize/2)+1.5*this.titleFontSize},draw:function(){if(this.custom)this.custom(this);else{I(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var a=this.ctx;a.fillStyle=this.fillColor,a.fill(),a.closePath(),a.textAlign="left",a.textBaseline="middle",a.fillStyle=this.titleTextColor,a.font=this.titleFont,a.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0)),a.font=this.font,d.each(this.labels,function(b,c){a.fillStyle=this.textColor,a.fillText(b,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(c+1)),a.fillStyle=this.legendColorBackground,a.fillRect(this.x+this.xPadding,this.getLineHeight(c+1)-this.fontSize/2,this.fontSize,this.fontSize),a.fillStyle=this.legendColors[c].fill,a.fillRect(this.x+this.xPadding,this.getLineHeight(c+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}}}),c.Scale=c.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var a=r(this.stepValue),b=0;b<=this.steps;b++)this.yLabels.push(v(this.templateString,{value:(this.min+b*this.stepValue).toFixed(a)}));this.yLabelWidth=this.display&&this.showLabels?H(this.ctx,this.font,this.yLabels):0},addXLabel:function(a){this.xLabels.push(a),this.valuesCount++,this.fit()},removeXLabel:function(){this.xLabels.shift(),this.valuesCount--,this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0,this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height,this.startPoint+=this.padding,this.endPoint-=this.padding;var a,b=this.endPoint-this.startPoint;for(this.calculateYRange(b),this.buildYLabels(),this.calculateXLabelRotation();b>this.endPoint-this.startPoint;)b=this.endPoint-this.startPoint,a=this.yLabelWidth,this.calculateYRange(b),this.buildYLabels(),a<this.yLabelWidth&&this.calculateXLabelRotation()},calculateXLabelRotation:function(){var a,b,c,d,e,f,g;if(this.ctx.font=this.font,c=this.ctx.measureText(this.xLabels[0]).width,d=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width,this.xScalePaddingRight=d/2+3,this.xScalePaddingLeft=c/2>this.yLabelWidth+10?c/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){for(f=H(this.ctx,this.font,this.xLabels),this.xLabelWidth=f,g=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>g&&0===this.xLabelRotation||this.xLabelWidth>g&&this.xLabelRotation<=90&&this.xLabelRotation>0;)e=Math.cos(s(this.xLabelRotation)),a=e*c,b=e*d,a+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=a+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=e*f;this.xLabelRotation>0&&(this.endPoint-=Math.sin(s(this.xLabelRotation))*f+3)}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding},calculateYRange:k,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(a){var b=this.drawingArea()/(this.min-this.max);return this.endPoint-b*(a-this.min)},calculateX:function(a){var b=(this.xLabelRotation>0,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight)),c=b/Math.max(this.valuesCount-(this.offsetGridLines?0:1),1),d=c*a+this.xScalePaddingLeft;return this.offsetGridLines&&(d+=c/2),Math.round(d)},update:function(a){d.extend(this,a),this.fit()},draw:function(){var a=this.ctx,b=(this.endPoint-this.startPoint)/this.steps,c=Math.round(this.xScalePaddingLeft);this.display&&(a.fillStyle=this.textColor,a.font=this.font,e(this.yLabels,function(e,f){var g=this.endPoint-b*f,h=Math.round(g),i=this.showHorizontalLines;a.textAlign="right",a.textBaseline="middle",this.showLabels&&a.fillText(e,c-10,g),0!==f||i||(i=!0),i&&a.beginPath(),f>0?(a.lineWidth=this.gridLineWidth,a.strokeStyle=this.gridLineColor):(a.lineWidth=this.lineWidth,a.strokeStyle=this.lineColor),h+=d.aliasPixel(a.lineWidth),i&&(a.moveTo(c,h),a.lineTo(this.width,h),a.stroke(),a.closePath()),a.lineWidth=this.lineWidth,a.strokeStyle=this.lineColor,a.beginPath(),a.moveTo(c-5,h),a.lineTo(c,h),a.stroke(),a.closePath()},this),e(this.xLabels,function(b,c){var d=this.calculateX(c)+t(this.lineWidth),e=this.calculateX(c-(this.offsetGridLines?.5:0))+t(this.lineWidth),f=this.xLabelRotation>0,g=this.showVerticalLines;0!==c||g||(g=!0),g&&a.beginPath(),c>0?(a.lineWidth=this.gridLineWidth,a.strokeStyle=this.gridLineColor):(a.lineWidth=this.lineWidth,a.strokeStyle=this.lineColor),g&&(a.moveTo(e,this.endPoint),a.lineTo(e,this.startPoint-3),a.stroke(),a.closePath()),a.lineWidth=this.lineWidth,a.strokeStyle=this.lineColor,a.beginPath(),a.moveTo(e,this.endPoint),a.lineTo(e,this.endPoint+5),a.stroke(),a.closePath(),a.save(),a.translate(d,f?this.endPoint+12:this.endPoint+8),a.rotate(-1*s(this.xLabelRotation)),a.font=this.font,a.textAlign=f?"right":"center",a.textBaseline=f?"middle":"top",a.fillText(b,0,0),a.restore()
},this))}}),c.RadialScale=c.Element.extend({initialize:function(){this.size=q([this.height,this.width]),this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(a){var b=this.drawingArea/(this.max-this.min);return(a-this.min)*b},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize(),this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var a=r(this.stepValue),b=0;b<=this.steps;b++)this.yLabels.push(v(this.templateString,{value:(this.min+b*this.stepValue).toFixed(a)}))},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var a,b,c,d,e,f,g,h,i,j,k,l,m=q([this.height/2-this.pointLabelFontSize-5,this.width/2]),n=this.width,p=0;for(this.ctx.font=G(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),b=0;b<this.valuesCount;b++)a=this.getPointPosition(b,m),c=this.ctx.measureText(v(this.templateString,{value:this.labels[b]})).width+5,0===b||b===this.valuesCount/2?(d=c/2,a.x+d>n&&(n=a.x+d,e=b),a.x-d<p&&(p=a.x-d,g=b)):b<this.valuesCount/2?a.x+c>n&&(n=a.x+c,e=b):b>this.valuesCount/2&&a.x-c<p&&(p=a.x-c,g=b);i=p,j=Math.ceil(n-this.width),f=this.getIndexAngle(e),h=this.getIndexAngle(g),k=j/Math.sin(f+Math.PI/2),l=i/Math.sin(h+Math.PI/2),k=o(k)?k:0,l=o(l)?l:0,this.drawingArea=m-(l+k)/2,this.setCenterPoint(l,k)},setCenterPoint:function(a,b){var c=this.width-b-this.drawingArea,d=a+this.drawingArea;this.xCenter=(d+c)/2,this.yCenter=this.height/2},getIndexAngle:function(a){var b=2*Math.PI/this.valuesCount;return a*b-Math.PI/2},getPointPosition:function(a,b){var c=this.getIndexAngle(a);return{x:Math.cos(c)*b+this.xCenter,y:Math.sin(c)*b+this.yCenter}},draw:function(){var a,b,c,d,f,g,h,i,j;if(this.display&&(a=this.ctx,e(this.yLabels,function(b,c){var d,e,f,g,h;if(c>0){if(e=c*(this.drawingArea/this.steps),f=this.yCenter-e,this.lineWidth>0)if(a.strokeStyle=this.lineColor,a.lineWidth=this.lineWidth,this.lineArc)a.beginPath(),a.arc(this.xCenter,this.yCenter,e,0,2*Math.PI),a.closePath(),a.stroke();else{for(a.beginPath(),g=0;g<this.valuesCount;g++)d=this.getPointPosition(g,this.calculateCenterOffset(this.min+c*this.stepValue)),0===g?a.moveTo(d.x,d.y):a.lineTo(d.x,d.y);a.closePath(),a.stroke()}this.showLabels&&(a.font=G(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop&&(h=a.measureText(b).width,a.fillStyle=this.backdropColor,a.fillRect(this.xCenter-h/2-this.backdropPaddingX,f-this.fontSize/2-this.backdropPaddingY,h+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)),a.textAlign="center",a.textBaseline="middle",a.fillStyle=this.fontColor,a.fillText(b,this.xCenter,f))}},this),!this.lineArc))for(a.lineWidth=this.angleLineWidth,a.strokeStyle=this.angleLineColor,b=this.valuesCount-1;b>=0;b--)this.angleLineWidth>0&&(c=this.getPointPosition(b,this.calculateCenterOffset(this.max)),a.beginPath(),a.moveTo(this.xCenter,this.yCenter),a.lineTo(c.x,c.y),a.stroke(),a.closePath()),d=this.getPointPosition(b,this.calculateCenterOffset(this.max)+5),a.font=G(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),a.fillStyle=this.pointLabelFontColor,f=this.labels.length,g=this.labels.length/2,h=g/2,i=h>b||b>f-h,j=b===h||b===f-h,a.textAlign=0===b?"center":b===g?"center":g>b?"left":"right",a.textBaseline=j?"middle":i?"bottom":"top",a.fillText(this.labels[b],d.x,d.y)}}),d.addEvent(window,"resize",function(){var a;return function(){clearTimeout(a),a=setTimeout(function(){e(c.instances,function(a){a.options.responsive&&a.resize(a.render,!0)})},50)}}()),n?define(function(){return c}):"object"==typeof module&&module.exports&&(module.exports=c),b.Chart=c,a.fn.chart=function(){var a=[];return this.each(function(){a.push(new c(this.getContext("2d")))}),1===a.length?a[0]:a}}.call(this,jQuery),function(a){var b=a&&a.zui?a.zui:this,c=b.Chart,d=c.helpers,e={scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};c.Type.extend({name:"Line",defaults:e,initialize:function(b){this.PointClass=c.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(a){return Math.pow(a-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}}),this.datasets=[],this.options.showTooltips&&d.bindEvents(this,this.options.tooltipEvents,function(a){var b="mouseout"!==a.type?this.getPointsAtEvent(a):[];this.eachPoints(function(a){a.restore(["fillColor","strokeColor"])}),d.each(b,function(a){a.fillColor=a.highlightFill,a.strokeColor=a.highlightStroke}),this.showTooltip(b)}),d.each(b.datasets,function(c){var e,f,g;a.zui&&a.zui.Color&&a.zui.Color.get&&(e=a.zui.Color.get(c.color),f=e.toCssStr(),c.fillColor||(c.fillColor=e.clone().fade(20).toCssStr()),c.strokeColor||(c.strokeColor=f),c.pointColor||(c.pointColor=f),c.pointStrokeColor||(c.pointStrokeColor="#fff"),c.pointHighlightFill||(c.pointHighlightFill="#fff"),c.pointHighlightStroke||(c.pointHighlightStroke=f)),g={label:c.label||null,fillColor:c.fillColor,strokeColor:c.strokeColor,pointColor:c.pointColor,pointStrokeColor:c.pointStrokeColor,showTooltips:c.showTooltips!==!1,points:[]},this.datasets.push(g),d.each(c.data,function(a,d){g.points.push(new this.PointClass({value:a,label:b.labels[d],datasetLabel:c.label,strokeColor:c.pointStrokeColor,fillColor:c.pointColor,highlightFill:c.pointHighlightFill||c.pointColor,highlightStroke:c.pointHighlightStroke||c.pointStrokeColor}))},this),this.buildScale(b.labels),this.eachPoints(function(a,b){d.extend(a,{x:this.scale.calculateX(b),y:this.scale.endPoint}),a.save()},this)},this),this.render()},update:function(){this.scale.update(),d.each(this.activeElements,function(a){a.restore(["fillColor","strokeColor"])}),this.eachPoints(function(a){a.save()}),this.render()},eachPoints:function(a){d.each(this.datasets,function(b){d.each(b.points,a,this)},this)},getPointsAtEvent:function(a){var b=[],c=d.getRelativePosition(a);return d.each(this.datasets,function(a){d.each(a.points,function(a){a.inRange(c.x,c.y)&&b.push(a)})},this),b},buildScale:function(a){var b=this,e=function(){var a=[];return b.eachPoints(function(b){a.push(b.value)}),a},f={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:a.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(a){var b=d.calculateScaleRange(e(),a,this.fontSize,this.beginAtZero,this.integersOnly);d.extend(this,b)},xLabels:a,font:d.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&d.extend(f,{calculateYRange:d.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new c.Scale(f)},addData:function(a,b){d.each(a,function(a,c){this.datasets[c].points.push(new this.PointClass({value:a,label:b,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[c].pointStrokeColor,fillColor:this.datasets[c].pointColor}))},this),this.scale.addXLabel(b),this.update()},removeData:function(){this.scale.removeXLabel(),d.each(this.datasets,function(a){a.points.shift()},this),this.update()},reflow:function(){var a=d.extend({height:this.chart.height,width:this.chart.width});this.scale.update(a)},draw:function(a){var c,e,f,g,b=a||1;this.clear(),c=this.chart.ctx,e=function(a){return null!==a.value},f=function(a,b,c){return d.findNextWhere(b,e,c)||a},g=function(a,b,c){return d.findPreviousWhere(b,e,c)||a},this.scale.draw(b),d.each(this.datasets,function(a){var h=d.where(a.points,e);d.each(a.points,function(a,c){a.hasValue()&&a.transition({y:this.scale.calculateY(a.value),x:this.scale.calculateX(c)},b)},this),this.options.bezierCurve&&d.each(h,function(a,b){var c=b>0&&b<h.length-1?this.options.bezierCurveTension:0;a.controlPoints=d.splineCurve(g(a,h,b),a,f(a,h,b),c),a.controlPoints.outer.y>this.scale.endPoint?a.controlPoints.outer.y=this.scale.endPoint:a.controlPoints.outer.y<this.scale.startPoint&&(a.controlPoints.outer.y=this.scale.startPoint),a.controlPoints.inner.y>this.scale.endPoint?a.controlPoints.inner.y=this.scale.endPoint:a.controlPoints.inner.y<this.scale.startPoint&&(a.controlPoints.inner.y=this.scale.startPoint)},this),c.lineWidth=this.options.datasetStrokeWidth,c.strokeStyle=a.strokeColor,c.beginPath(),d.each(h,function(a,b){if(0===b)c.moveTo(a.x,a.y);else if(this.options.bezierCurve){var d=g(a,h,b);c.bezierCurveTo(d.controlPoints.outer.x,d.controlPoints.outer.y,a.controlPoints.inner.x,a.controlPoints.inner.y,a.x,a.y)}else c.lineTo(a.x,a.y)},this),c.stroke(),this.options.datasetFill&&h.length>0&&(c.lineTo(h[h.length-1].x,this.scale.endPoint),c.lineTo(h[0].x,this.scale.endPoint),c.fillStyle=a.fillColor,c.closePath(),c.fill()),d.each(h,function(a){a.draw()})},this)}}),a.fn.lineChart=function(b,d){var e=[];return this.each(function(){var f=a(this);e.push(new c(this.getContext("2d")).Line(b,a.extend(f.data(),d)))}),1===e.length?e[0]:e}}.call(this,jQuery),function(a){var b=a&&a.zui?a.zui:this,c=b.Chart,d=c.helpers,e={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:1,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};c.Type.extend({name:"Bar",defaults:e,initialize:function(b){var e=this.options;this.ScaleClass=c.Scale.extend({offsetGridLines:!0,calculateBarX:function(a,b,c){var d=this.calculateBaseWidth(),f=this.calculateX(c)-d/2,g=this.calculateBarWidth(a);return f+g*b+b*e.barDatasetSpacing+g/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*e.barValueSpacing},calculateBarWidth:function(a){var b=this.calculateBaseWidth()-(a-1)*e.barDatasetSpacing;return b/a}}),this.datasets=[],this.options.showTooltips&&d.bindEvents(this,this.options.tooltipEvents,function(a){var b="mouseout"!==a.type?this.getBarsAtEvent(a):[];this.eachBars(function(a){a.restore(["fillColor","strokeColor"])}),d.each(b,function(a){a.fillColor=a.highlightFill,a.strokeColor=a.highlightStroke}),this.showTooltip(b)}),this.BarClass=c.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx}),d.each(b.datasets,function(c){var f,g,h;a.zui&&a.zui.Color&&a.zui.Color.get&&(f=a.zui.Color.get(c.color),g=f.toCssStr(),c.fillColor||(c.fillColor=f.clone().fade(50).toCssStr()),c.strokeColor||(c.strokeColor=g)),h={label:c.label||null,fillColor:c.fillColor,strokeColor:c.strokeColor,bars:[]},this.datasets.push(h),d.each(c.data,function(a,d){h.bars.push(new this.BarClass({value:a,label:b.labels[d],datasetLabel:c.label,strokeColor:c.strokeColor,fillColor:c.fillColor,highlightFill:c.highlightFill||c.fillColor,highlightStroke:c.highlightStroke||c.strokeColor}))},this)},this),this.buildScale(b.labels),this.BarClass.prototype.base=this.scale.endPoint,this.eachBars(function(a,b,c){d.extend(a,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,c,b),y:this.scale.endPoint}),a.save()},this),this.render()},update:function(){this.scale.update(),d.each(this.activeElements,function(a){a.restore(["fillColor","strokeColor"])}),this.eachBars(function(a){a.save()}),this.render()},eachBars:function(a){d.each(this.datasets,function(b,c){d.each(b.bars,a,this,c)},this)},getBarsAtEvent:function(a){for(var b,c=[],e=d.getRelativePosition(a),f=function(a){c.push(a.bars[b])},g=0;g<this.datasets.length;g++)for(b=0;b<this.datasets[g].bars.length;b++)if(this.datasets[g].bars[b].inRange(e.x,e.y))return d.each(this.datasets,f),c;return c},buildScale:function(a){var b=this,c=function(){var a=[];return b.eachBars(function(b){a.push(b.value)}),a},e={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:a.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(a){var b=d.calculateScaleRange(c(),a,this.fontSize,this.beginAtZero,this.integersOnly);d.extend(this,b)},xLabels:a,font:d.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&d.extend(e,{calculateYRange:d.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new this.ScaleClass(e)},addData:function(a,b){d.each(a,function(a,c){this.datasets[c].bars.push(new this.BarClass({value:a,label:b,x:this.scale.calculateBarX(this.datasets.length,c,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[c].strokeColor,fillColor:this.datasets[c].fillColor}))},this),this.scale.addXLabel(b),this.update()},removeData:function(){this.scale.removeXLabel(),d.each(this.datasets,function(a){a.bars.shift()},this),this.update()},reflow:function(){d.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var a=d.extend({height:this.chart.height,width:this.chart.width});this.scale.update(a)},draw:function(a){var b=a||1;this.clear(),this.chart.ctx,this.scale.draw(b),d.each(this.datasets,function(a,c){d.each(a.bars,function(a,d){a.hasValue()&&(a.base=this.scale.endPoint,a.transition({x:this.scale.calculateBarX(this.datasets.length,c,d),y:this.scale.calculateY(a.value),width:this.scale.calculateBarWidth(this.datasets.length)},b).draw())},this)},this)}}),a.fn.barChart=function(b,d){var e=[];return this.each(function(){var f=a(this);e.push(new c(this.getContext("2d")).Bar(b,a.extend(f.data(),d)))}),1===e.length?e[0]:e}}.call(this,jQuery);

/*<script src="${ctxStatic}/org/tinygroup/widget/js/jarvis.widget.min.js"></script>*/
!function(a,b,c,d){function e(b,c){this.obj=a(b),this.o=a.extend({},a.fn[f].defaults,c),this.objId=this.obj.attr("id"),this.pwCtrls=".jarviswidget-ctrls",this.widget=this.obj.find(this.o.widgets),this.toggleClass=this.o.toggleClass.split("|"),this.editClass=this.o.editClass.split("|"),this.fullscreenClass=this.o.fullscreenClass.split("|"),this.customClass=this.o.customClass.split("|"),this.storage={enabled:this.o.localStorage},this.initialized=!1,this.init()}var f="jarvisWidgets",g=("ontouchstart"in b||b.DocumentTouch&&c instanceof DocumentTouch?"touchstart":"click")+"."+f;e.prototype={_runLoaderWidget:function(a){var b=this;b.o.indicator===!0&&a.parents(b.o.widgets).find(".jarviswidget-loader:first").stop(!0,!0).fadeIn(100).delay(b.o.indicatorTime).fadeOut(100)},_getPastTimestamp:function(a){var j,b=this,c=new Date(a),d=c.getMonth()+1,e=c.getDate(),f=c.getFullYear(),g=c.getHours(),h=c.getMinutes(),i=c.getUTCSeconds();return 10>d&&(d="0"+d),10>e&&(e="0"+e),10>g&&(g="0"+g),10>h&&(h="0"+h),10>i&&(i="0"+i),j=b.o.timestampFormat.replace(/%d%/g,e).replace(/%m%/g,d).replace(/%y%/g,f).replace(/%h%/g,g).replace(/%i%/g,h).replace(/%s%/g,i)},_loadAjaxFile:function(b,c,d){var e=this;b.find(".widget-body").load(c,function(c,d,f){var h,g=a(this);"error"==d&&g.html('<h4 class="alert alert-danger">'+e.o.labelError+"<b> "+f.status+" "+f.statusText+"</b></h4>"),"success"==d&&(h=b.find(e.o.timestampPlaceholder),h.length&&h.html(e._getPastTimestamp(new Date)),"function"==typeof e.o.afterLoad&&e.o.afterLoad.call(this,b)),e=null}),this._runLoaderWidget(d)},_loadKeys:function(){var b,a=this;a.o.ajaxnav===!0?(b=location.hash.replace(/^#/,""),a.storage.keySettings="Plugin_settings_"+b+"_"+a.objId,a.storage.keyPosition="Plugin_position_"+b+"_"+a.objId):a.initialized===!1&&(b=a.o.pageKey||location.pathname,a.storage.keySettings="jarvisWidgets_settings_"+b+"_"+a.objId,a.storage.keyPosition="jarvisWidgets_position_"+b+"_"+a.objId)},_saveSettingsWidget:function(){var d,e,b=this,c=b.storage;b._loadKeys(),d=b.obj.find(b.o.widgets).map(function(){var b={};return b.id=a(this).attr("id"),b.style=a(this).attr("data-widget-attstyle"),b.title=a(this).children("header").children("h2").text(),b.hidden="none"==a(this).css("display")?1:0,b.collapsed=a(this).hasClass("jarviswidget-collapsed")?1:0,b}).get(),e=JSON.stringify({widget:d}),c.enabled&&c.getKeySettings!=e&&(localStorage.setItem(c.keySettings,e),c.getKeySettings=e),"function"==typeof b.o.onSave&&b.o.onSave.call(this,null,e,c.keySettings)},_savePositionWidget:function(){var d,e,b=this,c=b.storage;b._loadKeys(),d=b.obj.find(b.o.grid+".sortable-grid").map(function(){var c=a(this).children(b.o.widgets).map(function(){return{id:a(this).attr("id")}}).get();return{section:c}}).get(),e=JSON.stringify({grid:d}),c.enabled&&c.getKeyPosition!=e&&(localStorage.setItem(c.keyPosition,e),c.getKeyPosition=e),"function"==typeof b.o.onSave&&b.o.onSave.call(this,e,c.keyPosition)},init:function(){var c,e,h,i,j,k,l,b=this;if(!b.initialized){if(b._initStorage(b.storage),a("#"+b.objId).length||alert("It looks like your using a class instead of an ID, dont do that!"),b.o.rtl===!0&&a("body").addClass("rtl"),a(b.o.grid).each(function(){a(this).find(b.o.widgets).length&&a(this).addClass("sortable-grid")}),b.storage.enabled&&b.storage.getKeyPosition){c=JSON.parse(b.storage.getKeyPosition);for(e in c.grid){h=b.obj.find(b.o.grid+".sortable-grid").eq(e);for(i in c.grid[e].section)h.append(a("#"+c.grid[e].section[i].id))}}if(b.storage.enabled&&b.storage.getKeySettings){j=JSON.parse(b.storage.getKeySettings);for(e in j.widget)k=a("#"+j.widget[e].id),j.widget[e].style&&k.removeClassPrefix("jarviswidget-color-").addClass(j.widget[e].style).attr("data-widget-attstyle",""+j.widget[e].style),1==j.widget[e].hidden?k.hide(1):k.show(1).removeAttr("data-widget-hidden"),1==j.widget[e].collapsed&&k.addClass("jarviswidget-collapsed").children("div").hide(1),k.children("header").children("h2").text()!=j.widget[e].title&&k.children("header").children("h2").text(j.widget[e].title)}b.widget.each(function(){var c,e,f,g,h,i,j,k,n,l=a(this),m=a(this).children("header");m.parent().attr("role")||(l.data("widget-hidden")===!0&&l.hide(),l.data("widget-collapsed")===!0&&l.addClass("jarviswidget-collapsed").children("div").hide(),c=b.o.customButton===!0&&l.data("widget-custombutton")===d&&0!==b.customClass[0].length?'<a href="javascript:void(0);" class="button-icon jarviswidget-custom-btn"><i class="'+b.customClass[0]+'"></i></a>':"",e=b.o.deleteButton===!0&&l.data("widget-deletebutton")===d?'<a href="javascript:void(0);" class="button-icon jarviswidget-delete-btn" rel="tooltip" title="删除" data-placement="bottom"><i class="'+b.o.deleteClass+'"></i></a>':"",f=b.o.editButton===!0&&l.data("widget-editbutton")===d?'<a href="javascript:void(0);" class="button-icon jarviswidget-edit-btn" rel="tooltip" title="编辑" data-placement="bottom"><i class="'+b.editClass[0]+'"></i></a>':"",g=b.o.fullscreenButton===!0&&l.data("widget-fullscreenbutton")===d?'<a href="javascript:void(0);" class="button-icon jarviswidget-fullscreen-btn" rel="tooltip" title="全屏" data-placement="bottom"><i class="'+b.fullscreenClass[0]+'"></i></a>':"",b.o.colorButton===!0&&l.data("widget-colorbutton")===d?(h='<a data-toggle="dropdown" class="dropdown-toggle color-box selector" href="javascript:void(0);"></a><ul class="dropdown-menu arrow-box-up-right color-select pull-right"><li><span class="bg-color-green" data-widget-setstyle="jarviswidget-color-green" rel="tooltip" data-placement="left" data-original-title="绿草色"></span></li><li><span class="bg-color-greenDark" data-widget-setstyle="jarviswidget-color-greenDark" rel="tooltip" data-placement="top" data-original-title="深绿色"></span></li><li><span class="bg-color-greenLight" data-widget-setstyle="jarviswidget-color-greenLight" rel="tooltip" data-placement="top" data-original-title="亮绿色"></span></li><li><span class="bg-color-purple" data-widget-setstyle="jarviswidget-color-purple" rel="tooltip" data-placement="top" data-original-title="紫色"></span></li><li><span class="bg-color-magenta" data-widget-setstyle="jarviswidget-color-magenta" rel="tooltip" data-placement="top" data-original-title="品红色"></span></li><li><span class="bg-color-pink" data-widget-setstyle="jarviswidget-color-pink" rel="tooltip" data-placement="right" data-original-title="粉红色"></span></li><li><span class="bg-color-pinkDark" data-widget-setstyle="jarviswidget-color-pinkDark" rel="tooltip" data-placement="left" data-original-title="褪粉色"></span></li><li><span class="bg-color-blueLight" data-widget-setstyle="jarviswidget-color-blueLight" rel="tooltip" data-placement="top" data-original-title="浅蓝色"></span></li><li><span class="bg-color-teal" data-widget-setstyle="jarviswidget-color-teal" rel="tooltip" data-placement="top" data-original-title="青色"></span></li><li><span class="bg-color-blue" data-widget-setstyle="jarviswidget-color-blue" rel="tooltip" data-placement="top" data-original-title="海洋蓝色"></span></li><li><span class="bg-color-blueDark" data-widget-setstyle="jarviswidget-color-blueDark" rel="tooltip" data-placement="top" data-original-title="深灰色"></span></li><li><span class="bg-color-darken" data-widget-setstyle="jarviswidget-color-darken" rel="tooltip" data-placement="right" data-original-title="黑色"></span></li><li><span class="bg-color-yellow" data-widget-setstyle="jarviswidget-color-yellow" rel="tooltip" data-placement="left" data-original-title="土黄色"></span></li><li><span class="bg-color-orange" data-widget-setstyle="jarviswidget-color-orange" rel="tooltip" data-placement="bottom" data-original-title="Orange"></span></li><li><span class="bg-color-orangeDark" data-widget-setstyle="jarviswidget-color-orangeDark" rel="tooltip" data-placement="bottom" data-original-title="暗橙色"></span></li><li><span class="bg-color-red" data-widget-setstyle="jarviswidget-color-red" rel="tooltip" data-placement="bottom" data-original-title="玫瑰红"></span></li><li><span class="bg-color-redLight" data-widget-setstyle="jarviswidget-color-redLight" rel="tooltip" data-placement="bottom" data-original-title="淡红色"></span></li><li><span class="bg-color-white" data-widget-setstyle="jarviswidget-color-white" rel="tooltip" data-placement="right" data-original-title="Purity"></span></li><li><a href="javascript:void(0);" class="jarviswidget-remove-colors" data-widget-setstyle="" rel="tooltip" data-placement="bottom" data-original-title="重置部件颜色">重置</a></li></ul>',m.prepend('<div class="widget-toolbar">'+h+"</div>")):h="",b.o.toggleButton===!0&&l.data("widget-togglebutton")===d?(j=l.data("widget-collapsed")===!0||l.hasClass("jarviswidget-collapsed")?b.toggleClass[1]:b.toggleClass[0],i='<a href="javascript:void(0);" class="button-icon jarviswidget-toggle-btn" rel="tooltip" title="折叠" data-placement="bottom"><i class="'+j+'"></i></a>'):i="",k=b.o.refreshButton===!0&&l.data("widget-refreshbutton")!==!1&&l.data("widget-load")?'<a href="javascript:void(0);" class="button-icon jarviswidget-refresh-btn" data-loading-text="&nbsp;&nbsp;Loading...&nbsp;" rel="tooltip" title="Refresh" data-placement="bottom"><i class="'+b.o.refreshButtonClass+'"></i></a>':"",n=b.o.buttonOrder.replace(/%refresh%/g,k).replace(/%delete%/g,e).replace(/%custom%/g,c).replace(/%fullscreen%/g,g).replace(/%edit%/g,f).replace(/%toggle%/g,i),(""!==k||""!==e||""!==c||""!==g||""!==f||""!==i)&&m.prepend('<div class="jarviswidget-ctrls">'+n+"</div>"),b.o.sortable===!0&&l.data("widget-sortable")===d&&l.addClass("jarviswidget-sortable"),l.find(b.o.editPlaceholder).length&&l.find(b.o.editPlaceholder).find("input").val(a.trim(m.children("h2").text())),m.append('<span class="jarviswidget-loader"><i class="fa fa-refresh fa-spin"></i></span>'),l.attr("role","widget").children("div").attr("role","content").prev("header").attr("role","heading").children("div").attr("role","menu"))}),b.o.buttonsHidden===!0&&a(b.o.pwCtrls).hide(),a(".jarviswidget header [rel=tooltip]").tooltip(),b.obj.find("[data-widget-load]").each(function(){var c=a(this),d=c.children(),e=c.data("widget-load"),f=1e3*c.data("widget-refresh");c.children(),c.find(".jarviswidget-ajax-placeholder").length||(c.children("widget-body").append('<div class="jarviswidget-ajax-placeholder">'+b.o.loadingLabel+"</div>"),c.data("widget-refresh")>0?(b._loadAjaxFile(c,e,d),a.intervalArr.push(setInterval(function(){b._loadAjaxFile(c,e,d)},f))):b._loadAjaxFile(c,e,d))}),b.o.sortable===!0&&jQuery.ui&&(l=b.obj.find(b.o.grid+".sortable-grid").not("[data-widget-excludegrid]"),l.sortable({items:l.find(b.o.widgets+".jarviswidget-sortable"),connectWith:l,placeholder:b.o.placeholderClass,cursor:"move",revert:!0,opacity:b.o.opacity,delay:200,cancel:".button-icon, #jarviswidget-fullscreen-mode > div",zIndex:1e4,handle:b.o.dragHandle,forcePlaceholderSize:!0,forceHelperSize:!0,update:function(a,c){b._runLoaderWidget(c.item.children()),b._savePositionWidget(),"function"==typeof b.o.onChange&&b.o.onChange.call(this,c.item)}})),b.o.buttonsHidden===!0&&b.widget.children("header").on("mouseenter."+f,function(){a(this).children(b.o.pwCtrls).stop(!0,!0).fadeTo(100,1)}).on("mouseleave."+f,function(){a(this).children(b.o.pwCtrls).stop(!0,!0).fadeTo(100,0)}),b._clickEvents(),b.storage.enabled&&(a(b.o.deleteSettingsKey).on(g,this,function(a){var c=confirm(b.o.settingsKeyLabel);c&&localStorage.removeItem(keySettings),a.preventDefault()}),a(b.o.deletePositionKey).on(g,this,function(a){var c=confirm(b.o.positionKeyLabel);c&&localStorage.removeItem(keyPosition),a.preventDefault()})),initialized=!0}},_initStorage:function(a){a.enabled=a.enabled&&!!function(){var a,b=+new Date;try{return localStorage.setItem(b,b),a=localStorage.getItem(b)==b,localStorage.removeItem(b),a}catch(c){}}(),this._loadKeys(),a.enabled&&(a.getKeySettings=localStorage.getItem(a.keySettings),a.getKeyPosition=localStorage.getItem(a.keyPosition))},_clickEvents:function(){function c(){if(a("#jarviswidget-fullscreen-mode").length){var c=a(b).height(),e=a("#jarviswidget-fullscreen-mode").children(d.o.widgets).children("header").height();a("#jarviswidget-fullscreen-mode").children(d.o.widgets).children("div").height(c-e-15)}}var d=this,e=d.widget.children("header");e.on(g,".jarviswidget-toggle-btn",function(b){var c=a(this),e=c.parents(d.o.widgets);d._runLoaderWidget(c),e.hasClass("jarviswidget-collapsed")?c.children().removeClass(d.toggleClass[1]).addClass(d.toggleClass[0]).parents(d.o.widgets).removeClass("jarviswidget-collapsed").children("[role=content]").slideDown(d.o.toggleSpeed,function(){d._saveSettingsWidget()}):c.children().removeClass(d.toggleClass[0]).addClass(d.toggleClass[1]).parents(d.o.widgets).addClass("jarviswidget-collapsed").children("[role=content]").slideUp(d.o.toggleSpeed,function(){d._saveSettingsWidget()}),"function"==typeof d.o.onToggle&&d.o.onToggle.call(this,e),b.preventDefault()}),e.on(g,".jarviswidget-fullscreen-btn",function(b){var e=a(this).parents(d.o.widgets),f=e.children("div");d._runLoaderWidget(a(this)),a("#jarviswidget-fullscreen-mode").length?(a(".nooverflow").removeClass("nooverflow"),e.unwrap("<div>").children("div").removeAttr("style").end().find(".jarviswidget-fullscreen-btn:first").children().removeClass(d.fullscreenClass[1]).addClass(d.fullscreenClass[0]).parents(d.pwCtrls).children("a").show(),f.hasClass("jarviswidget-visible")&&f.hide().removeClass("jarviswidget-visible")):(a("body").addClass("nooverflow"),e.wrap('<div id="jarviswidget-fullscreen-mode"/>').parent().find(".jarviswidget-fullscreen-btn:first").children().removeClass(d.fullscreenClass[0]).addClass(d.fullscreenClass[1]).parents(d.pwCtrls).children("a:not(.jarviswidget-fullscreen-btn)").hide(),f.is(":hidden")&&f.show().addClass("jarviswidget-visible")),c(),"function"==typeof d.o.onFullscreen&&d.o.onFullscreen.call(this,e),b.preventDefault()}),a(b).on("resize."+f,function(){c()}),e.on(g,".jarviswidget-edit-btn",function(b){var c=a(this).parents(d.o.widgets);d._runLoaderWidget(a(this)),c.find(d.o.editPlaceholder).is(":visible")?a(this).children().removeClass(d.editClass[1]).addClass(d.editClass[0]).parents(d.o.widgets).find(d.o.editPlaceholder).slideUp(d.o.editSpeed,function(){d._saveSettingsWidget()}):a(this).children().removeClass(d.editClass[0]).addClass(d.editClass[1]).parents(d.o.widgets).find(d.o.editPlaceholder).slideDown(d.o.editSpeed),"function"==typeof d.o.onEdit&&d.o.onEdit.call(this,c),b.preventDefault()}),a(d.o.editPlaceholder).find("input").keyup(function(){a(this).parents(d.o.widgets).children("header").children("h2").text(a(this).val())}),e.on(g,"[data-widget-setstyle]",function(b){var c=a(this).data("widget-setstyle"),e="";a(this).parents(d.o.editPlaceholder).find("[data-widget-setstyle]").each(function(){e+=a(this).data("widget-setstyle")+" "}),a(this).parents(d.o.widgets).attr("data-widget-attstyle",""+c).removeClassPrefix("jarviswidget-color-").addClass(c),d._runLoaderWidget(a(this)),d._saveSettingsWidget(),b.preventDefault()}),e.on(g,".jarviswidget-custom-btn",function(b){var c=a(this).parents(d.o.widgets);d._runLoaderWidget(a(this)),a(this).children("."+d.customClass[0]).length?(a(this).children().removeClass(d.customClass[0]).addClass(d.customClass[1]),"function"==typeof d.o.customStart&&d.o.customStart.call(this,c)):(a(this).children().removeClass(d.customClass[1]).addClass(d.customClass[0]),"function"==typeof d.o.customEnd&&d.o.customEnd.call(this,c)),d._saveSettingsWidget(),b.preventDefault()}),e.on(g,".jarviswidget-delete-btn",function(b){var c=a(this).parents(d.o.widgets),e=c.attr("id"),f=c.children("header").children("h2").text();a.SmartMessageBox?a.SmartMessageBox({title:"<i class='fa fa-times' style='color:#ed1c24'></i> "+d.o.labelDelete+' "'+f+'"',content:d.o.deleteMsg,buttons:"[No][Yes]"},function(b){"Yes"==b&&(d._runLoaderWidget(a(this)),a("#"+e).fadeOut(d.o.deleteSpeed,function(){a(this).remove(),"function"==typeof d.o.onDelete&&d.o.onDelete.call(this,c)}))}):a("#"+e).fadeOut(d.o.deleteSpeed,function(){a(this).remove(),"function"==typeof d.o.onDelete&&d.o.onDelete.call(this,c)}),b.preventDefault()}),e.on(g,".jarviswidget-refresh-btn",function(b){var c=a(this).parents(d.o.widgets),e=c.data("widget-load"),f=c.children(),g=a(this);g.button("loading"),f.addClass("widget-body-ajax-loading"),setTimeout(function(){g.button("reset"),f.removeClass("widget-body-ajax-loading"),d._loadAjaxFile(c,e,f)},1e3),b.preventDefault()}),e=null},destroy:function(){var c=this,d="."+f,e=c.obj.find(c.o.grid+".sortable-grid").not("[data-widget-excludegrid]");e.sortable("destroy"),c.widget.children("header").off(d),a(c.o.deleteSettingsKey).off(d),a(c.o.deletePositionKey).off(d),a(b).off(d),c.obj.removeData(f)}},a.fn[f]=function(b){return this.each(function(){var g,c=a(this),d=c.data(f);d||(g="object"==typeof b&&b,c.data(f,d=new e(this,g))),"string"==typeof b&&d[b]()})},a.fn[f].defaults={grid:"section",widgets:".jarviswidget",localStorage:!0,deleteSettingsKey:"",settingsKeyLabel:"Reset settings?",deletePositionKey:"",positionKeyLabel:"Reset position?",sortable:!0,buttonsHidden:!1,toggleButton:!0,toggleClass:"min-10 | plus-10",toggleSpeed:200,onToggle:function(){},deleteButton:!0,deleteMsg:"Warning: This action cannot be undone",deleteClass:"trashcan-10",deleteSpeed:200,onDelete:function(){},editButton:!0,editPlaceholder:".jarviswidget-editbox",editClass:"pencil-10 | delete-10",editSpeed:200,onEdit:function(){},colorButton:!0,fullscreenButton:!0,fullscreenClass:"fullscreen-10 | normalscreen-10",fullscreenDiff:3,onFullscreen:function(){},customButton:!0,customClass:"",customStart:function(){},customEnd:function(){},buttonOrder:"%refresh% %delete% %custom% %edit% %fullscreen% %toggle%",opacity:1,dragHandle:"> header",placeholderClass:"jarviswidget-placeholder",indicator:!0,indicatorTime:600,ajax:!0,loadingLabel:"loading...",timestampPlaceholder:".jarviswidget-timestamp",timestampFormat:"Last update: %m%/%d%/%y% %h%:%i%:%s%",refreshButton:!0,refreshButtonClass:"refresh-10",labelError:"Sorry but there was a error:",labelUpdated:"Last Update:",labelRefresh:"Refresh",labelDelete:"Delete widget:",afterLoad:function(){},rtl:!1,onChange:function(){},onSave:function(){},ajaxnav:!0},a.fn.removeClassPrefix=function(b){return this.each(function(c,d){var e=d.className.split(" ").map(function(a){return 0===a.indexOf(b)?"":a});d.className=a.trim(e.join(" "))}),this}}(jQuery,window,document);

/*<script src="${ctxStatic}/org/tinygroup/widget/js/widget.init.js"></script>*/
function setup_widgets(){var b=!0,c=!0;$.fn.jarvisWidgets&&$("#widget-grid").jarvisWidgets({grid:"article",widgets:".jarviswidget",localStorage:b,deleteSettingsKey:"#deletesettingskey-options",settingsKeyLabel:"Reset settings?",deletePositionKey:"#deletepositionkey-options",positionKeyLabel:"Reset position?",sortable:c,buttonsHidden:!1,toggleButton:!0,toggleClass:"fa fa-minus | fa fa-plus",toggleSpeed:200,onToggle:function(){},deleteButton:!0,deleteMsg:"Warning: This action cannot be undone!",deleteClass:"fa fa-times",deleteSpeed:200,onDelete:function(){},editButton:!0,editPlaceholder:".jarviswidget-editbox",editClass:"fa fa-cog | fa fa-save",editSpeed:200,onEdit:function(){},colorButton:!0,fullscreenButton:!0,fullscreenClass:"fa fa-expand | fa fa-compress",fullscreenDiff:3,onFullscreen:function(){},customButton:!1,customClass:"folder-10 | next-10",customStart:function(){},customEnd:function(){},buttonOrder:"%refresh% %custom% %edit% %toggle% %fullscreen% %delete%",opacity:1,dragHandle:"> header",placeholderClass:"jarviswidget-placeholder",indicator:!0,indicatorTime:600,ajax:!0,timestampPlaceholder:".jarviswidget-timestamp",timestampFormat:"Last update: %m%/%d%/%y% %h%:%i%:%s%",refreshButton:!0,refreshButtonClass:"fa fa-refresh",labelError:"Sorry but there was a error:",labelUpdated:"Last Update:",labelRefresh:"Refresh",labelDelete:"Delete widget:",afterLoad:function(){},rtl:!1,onChange:function(){},onSave:function(){},ajaxnav:!1})};

/*<script src="${ctxStatic}/org/tinygroup/treeview/js/treeview.js"></script>*/
jQuery.cookie=function(a,b,c){var d,e,f,g,h,i,j,k,l;if("undefined"==typeof b){if(i=null,document.cookie&&""!=document.cookie)for(j=document.cookie.split(";"),k=0;k<j.length;k++)if(l=jQuery.trim(j[k]),l.substring(0,a.length+1)==a+"="){i=decodeURIComponent(l.substring(a.length+1));break}return i}c=c||{},null===b&&(b="",c.expires=-1),d="",c.expires&&("number"==typeof c.expires||c.expires.toUTCString)&&("number"==typeof c.expires?(e=new Date,e.setTime(e.getTime()+1e3*60*60*24*c.expires)):e=c.expires,d="; expires="+e.toUTCString()),f=c.path?"; path="+c.path:"",g=c.domain?"; domain="+c.domain:"",h=c.secure?"; secure":"",document.cookie=[a,"=",encodeURIComponent(b),d,f,g,h].join("")},function(a){function b(b){if("string"==typeof b.data){var c=b.handler,d=b.data.toLowerCase().split(" ");b.handler=function(b){var e,f,h,i,j,k;if(this===b.target||!/textarea|select/i.test(b.target.nodeName)&&"text"!==b.target.type)for(e="keypress"!==b.type&&a.hotkeys.specialKeys[b.which],f=String.fromCharCode(b.which).toLowerCase(),h="",i={},b.altKey&&"alt"!==e&&(h+="alt+"),b.ctrlKey&&"ctrl"!==e&&(h+="ctrl+"),b.metaKey&&!b.ctrlKey&&"meta"!==e&&(h+="meta+"),b.shiftKey&&"shift"!==e&&(h+="shift+"),e?i[h+e]=!0:(i[h+f]=!0,i[h+a.hotkeys.shiftNums[f]]=!0,"shift+"===h&&(i[a.hotkeys.shiftNums[f]]=!0)),j=0,k=d.length;k>j;j++)if(i[d[j]])return c.apply(this,arguments)}}}a.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}},a.each(["keydown","keyup","keypress"],function(){a.event.special[this]={add:b}})}(jQuery),function(){var a,b,c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=function(){function b(){this.options_index=0,this.parsed=[]}return b.prototype.add_node=function(a){return"OPTGROUP"===a.nodeName.toUpperCase()?this.add_group(a):this.add_option(a)},b.prototype.add_group=function(b){var c,d,e,f,g,h;for(c=this.parsed.length,this.parsed.push({array_index:c,group:!0,label:this.escapeExpression(b.label),children:0,disabled:b.disabled,title:b.title,search_keys:a.trim(b.getAttribute("data-keys")||"").replace(/,/," ")}),g=b.childNodes,h=[],e=0,f=g.length;f>e;e++)d=g[e],h.push(this.add_option(d,c,b.disabled));return h},b.prototype.add_option=function(b,c,d){return"OPTION"===b.nodeName.toUpperCase()?(""!==b.text?(null!=c&&(this.parsed[c].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:b.value,text:b.text,title:b.title,html:b.innerHTML,selected:b.selected,disabled:d===!0?d:b.disabled,group_array_index:c,classes:b.className,style:b.style.cssText,search_keys:a.trim(b.getAttribute("data-keys")||"").replace(/,/," ")})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},b.prototype.escapeExpression=function(a){var b,c;return null==a||a===!1?"":/[\&\<\>\"\'\`]/.test(a)?(b={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},c=/&(?!\w+;)|[\<\>\"\'\`]/g,a.replace(c,function(a){return b[a]||"&amp;"})):a},b}(),d.select_to_array=function(a){var b,c,e,f,g;for(c=new d,g=a.childNodes,e=0,f=g.length;f>e;e++)b=g[e],c.add_node(b);return c.parsed},b=function(){function a(b,c){this.form_field=b,this.options=null!=c?c:{},a.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return a.prototype.set_default_values=function(){var a=this;return this.click_test_action=function(b){return a.test_active_click(b)},this.activate_action=function(b){return a.activate_field(b)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.group_search=null!=this.options.group_search?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null!=this.options.single_backstroke_delete?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null!=this.options.display_selected_options?this.options.display_selected_options:!0,this.display_disabled_options=null!=this.options.display_disabled_options?this.options.display_disabled_options:!0},a.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||a.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||a.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||a.default_no_result_text},a.prototype.mouse_enter=function(){return this.mouse_on_container=!0},a.prototype.mouse_leave=function(){return this.mouse_on_container=!1},a.prototype.input_focus=function(){var b=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return b.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},a.prototype.input_blur=function(){var b=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return b.blur_test()},100))},a.prototype.results_option_build=function(a){var b,c,d,e,f;for(b="",f=this.results_data,d=0,e=f.length;e>d;d++)c=f[d],b+=c.group?this.result_add_group(c):this.result_add_option(c),(null!=a?a.first:void 0)&&(c.selected&&this.is_multiple?this.choice_build(c):c.selected&&!this.is_multiple&&this.single_set_selected_text(c.text));return b},a.prototype.result_add_option=function(a){var b,c;return a.search_match&&this.include_option_in_results(a)?(b=[],a.disabled||a.selected&&this.is_multiple||b.push("active-result"),!a.disabled||a.selected&&this.is_multiple||b.push("disabled-result"),a.selected&&b.push("result-selected"),null!=a.group_array_index&&b.push("group-option"),""!==a.classes&&b.push(a.classes),c=document.createElement("li"),c.className=b.join(" "),c.style.cssText=a.style,c.title=a.title,c.setAttribute("data-option-array-index",a.array_index),c.innerHTML=a.search_text,this.outerHTML(c)):""},a.prototype.result_add_group=function(a){var b;return(a.search_match||a.group_match)&&a.active_options>0?(b=document.createElement("li"),b.className="group-result",b.title=a.title,b.innerHTML=a.search_text,this.outerHTML(b)):""},a.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing?this.winnow_results():void 0},a.prototype.reset_single_select_options=function(){var a,b,c,d,e;for(d=this.results_data,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.selected?a.selected=!1:void 0);return e},a.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},a.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},a.prototype.winnow_results=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m;for(this.no_results_clear(),e=0,g=this.get_search_text(),a=g.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),d=this.search_contains?"":"^",c=new RegExp(d+a,"i"),j=new RegExp(a,"i"),m=this.results_data,k=0,l=m.length;l>k;k++)b=m[k],b.search_match=!1,f=null,this.include_option_in_results(b)&&(b.group&&(b.group_match=!1,b.active_options=0),null!=b.group_array_index&&this.results_data[b.group_array_index]&&(f=this.results_data[b.group_array_index],0===f.active_options&&f.search_match&&(e+=1),f.active_options+=1),(!b.group||this.group_search)&&(b.search_text=b.group?b.label:b.html,b.search_keys_match=this.search_string_match(b.search_keys,c),b.search_text_match=this.search_string_match(b.search_text,c),b.search_match=b.search_text_match||b.search_keys_match,b.search_match&&!b.group&&(e+=1),b.search_match?(b.search_text_match&&b.search_text.length?(h=b.search_text.search(j),i=b.search_text.substr(0,h+g.length)+"</em>"+b.search_text.substr(h+g.length),b.search_text=i.substr(0,h)+"<em>"+i.substr(h)):b.search_keys_match&&b.search_keys.length&&(h=b.search_keys.search(j),i=b.search_keys.substr(0,h+g.length)+"</em>"+b.search_keys.substr(h+g.length),b.search_text+='&nbsp; <small style="opacity: 0.7">'+i.substr(0,h)+"<em>"+i.substr(h)+"</small>"),null!=f&&(f.group_match=!0)):null!=b.group_array_index&&this.results_data[b.group_array_index].search_match&&(b.search_match=!0)));return this.result_clear_highlight(),1>e&&g.length?(this.update_results_content(""),this.no_results(g)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},a.prototype.search_string_match=function(a,b){var c,d,e,f;if(b.test(a))return!0;if(this.enable_split_word_search&&(a.indexOf(" ")>=0||0===a.indexOf("["))&&(d=a.replace(/\[|\]/g,"").split(" "),d.length))for(e=0,f=d.length;f>e;e++)if(c=d[e],b.test(c))return!0},a.prototype.choices_count=function(){var a,b,c,d;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,d=this.form_field.options,b=0,c=d.length;c>b;b++)a=d[b],a.selected&&""!=a.value&&(this.selected_option_count+=1);return this.selected_option_count},a.prototype.choices_click=function(a){return a.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},a.prototype.keyup_checker=function(a){var b,c;switch(b=null!=(c=a.which)?c:a.keyCode,this.search_field_scale(),b){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(a.preventDefault(),this.results_showing)return this.result_select(a);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},a.prototype.clipboard_event_checker=function(){var b=this;return setTimeout(function(){return b.results_search()},50)},a.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},a.prototype.include_option_in_results=function(a){return this.is_multiple&&!this.display_selected_options&&a.selected?!1:!this.display_disabled_options&&a.disabled?!1:a.empty?!1:!0},a.prototype.search_results_touchstart=function(a){return this.touch_started=!0,this.search_results_mouseover(a)},a.prototype.search_results_touchmove=function(a){return this.touch_started=!1,this.search_results_mouseout(a)},a.prototype.search_results_touchend=function(a){return this.touch_started?this.search_results_mouseup(a):void 0},a.prototype.outerHTML=function(a){var b;return a.outerHTML?a.outerHTML:(b=document.createElement("div"),b.appendChild(a),b.innerHTML)},a.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:!0},a.default_multiple_text="",a.default_single_text="",a.default_no_result_text="No results match",a}(),a=jQuery,a.fn.extend({chosen:function(d){return b.browser_is_supported()?this.each(function(){var e,f;e=a(this),f=e.data("chosen"),"destroy"===d&&f?f.destroy():f||e.data("chosen",new c(this,d))}):this}}),c=function(b){function c(){return e=c.__super__.constructor.apply(this,arguments)}return g(c,b),c.prototype.setup=function(){return this.form_field_jq=a(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},c.prototype.set_up_html=function(){var c,d,b=["chosen-container"];return b.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&b.push(this.form_field.className),this.is_rtl&&b.push("chosen-rtl"),d=this.form_field.getAttribute("data-css-class"),d&&b.push(d),c={"class":b.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(c.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=a("<div />",c),this.container.html(this.is_multiple?'<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>':'<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.options.drop_width&&this.dropdown.css("width",this.options.drop_width).addClass("chosen-drop-size-limited"),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},c.prototype.register_observers=function(){var a=this;return this.container.bind("mousedown.chosen",function(b){a.container_mousedown(b)}),this.container.bind("mouseup.chosen",function(b){a.container_mouseup(b)}),this.container.bind("mouseenter.chosen",function(b){a.mouse_enter(b)}),this.container.bind("mouseleave.chosen",function(b){a.mouse_leave(b)}),this.search_results.bind("mouseup.chosen",function(b){a.search_results_mouseup(b)}),this.search_results.bind("mouseover.chosen",function(b){a.search_results_mouseover(b)}),this.search_results.bind("mouseout.chosen",function(b){a.search_results_mouseout(b)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(b){a.search_results_mousewheel(b)}),this.search_results.bind("touchstart.chosen",function(b){a.search_results_touchstart(b)}),this.search_results.bind("touchmove.chosen",function(b){a.search_results_touchmove(b)}),this.search_results.bind("touchend.chosen",function(b){a.search_results_touchend(b)}),this.form_field_jq.bind("chosen:updated.chosen",function(b){a.results_update_field(b)}),this.form_field_jq.bind("chosen:activate.chosen",function(b){a.activate_field(b)}),this.form_field_jq.bind("chosen:open.chosen",function(b){a.container_mousedown(b)}),this.form_field_jq.bind("chosen:close.chosen",function(b){a.input_blur(b)}),this.search_field.bind("blur.chosen",function(b){a.input_blur(b)}),this.search_field.bind("keyup.chosen",function(b){a.keyup_checker(b)}),this.search_field.bind("keydown.chosen",function(b){a.keydown_checker(b)}),this.search_field.bind("focus.chosen",function(b){a.input_focus(b)}),this.search_field.bind("cut.chosen",function(b){a.clipboard_event_checker(b)}),this.search_field.bind("paste.chosen",function(b){a.clipboard_event_checker(b)}),this.is_multiple?this.search_choices.bind("click.chosen",function(b){a.choices_click(b)}):this.container.bind("click.chosen",function(a){a.preventDefault()})},c.prototype.destroy=function(){return a(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},c.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},c.prototype.container_mousedown=function(b){return this.is_disabled||(b&&"mousedown"===b.type&&!this.results_showing&&b.preventDefault(),null!=b&&a(b.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!b||a(b.target)[0]!==this.selected_item[0]&&!a(b.target).parents("a.chosen-single").length||(b.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),a(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},c.prototype.container_mouseup=function(a){return"ABBR"!==a.target.nodeName||this.is_disabled?void 0:this.results_reset(a)},c.prototype.search_results_mousewheel=function(a){var b;return a.originalEvent&&(b=-a.originalEvent.wheelDelta||a.originalEvent.detail),null!=b?(a.preventDefault(),"DOMMouseScroll"===a.type&&(b=40*b),this.search_results.scrollTop(b+this.search_results.scrollTop())):void 0},c.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},c.prototype.close_field=function(){return a(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},c.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},c.prototype.test_active_click=function(b){var c;return c=a(b.target).closest(".chosen-container"),c.length&&this.container[0]===c[0]?this.active_field=!0:this.close_field()},c.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=d.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},c.prototype.result_do_highlight=function(a){var b,c,d,e,f;if(a.length){if(this.result_clear_highlight(),this.result_highlight=a,this.result_highlight.addClass("highlighted"),d=parseInt(this.search_results.css("maxHeight"),10),f=this.search_results.scrollTop(),e=d+f,c=this.result_highlight.position().top+this.search_results.scrollTop(),b=c+this.result_highlight.outerHeight(),b>=e)return this.search_results.scrollTop(b-d>0?b-d:0);if(f>c)return this.search_results.scrollTop(c)}},c.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},c.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},c.prototype.update_results_content=function(a){return this.search_results.html(a)},c.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},c.prototype.set_tab_index=function(){var b;return this.form_field.tabIndex?(b=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=b):void 0},c.prototype.set_label_behavior=function(){var b=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=a("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(a){return b.is_multiple?b.container_mousedown(a):b.activate_field()}):void 0},c.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},c.prototype.search_results_mouseup=function(b){var c;return c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first(),c.length?(this.result_highlight=c,this.result_select(b),this.search_field.focus()):void 0},c.prototype.search_results_mouseover=function(b){var c;return c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first(),c?this.result_do_highlight(c):void 0},c.prototype.search_results_mouseout=function(b){return a(b.target).hasClass("active-result")?this.result_clear_highlight():void 0},c.prototype.choice_build=function(b){var c,d,e=this;return c=a("<li />",{"class":"search-choice"}).html("<span title='"+b.html+"'>"+b.html+"</span>"),b.disabled?c.addClass("search-choice-disabled"):(d=a("<a />",{"class":"search-choice-close","data-option-array-index":b.array_index}),d.bind("click.chosen",function(a){return e.choice_destroy_link_click(a)}),c.append(d)),this.search_container.before(c)},c.prototype.choice_destroy_link_click=function(b){return b.preventDefault(),b.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(a(b.target))},c.prototype.choice_destroy=function(a){return this.result_deselect(a[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),a.parents("li").first().remove(),this.search_field_scale()):void 0},c.prototype.results_reset=function(){return this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},c.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},c.prototype.result_select=function(a){var b,c;return this.result_highlight?(b=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?b.removeClass("active-result"):this.reset_single_select_options(),c=this.results_data[b[0].getAttribute("data-option-array-index")],c.selected=!0,this.form_field.options[c.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(c):this.single_set_selected_text(c.text),(a.metaKey||a.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[c.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())):void 0},c.prototype.single_set_selected_text=function(a){return null==a&&(a=this.default_text),a===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").attr("title",a).text(a)},c.prototype.result_deselect=function(a){var b;return b=this.results_data[a],this.form_field.options[b.options_index].disabled?!1:(b.selected=!1,this.form_field.options[b.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[b.options_index].value}),this.search_field_scale(),!0)},c.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},c.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":a("<div/>").text(a.trim(this.search_field.val())).html()},c.prototype.winnow_results_set_highlight=function(){var a,b;return b=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),a=b.length?b.first():this.search_results.find(".active-result").first(),null!=a?this.result_do_highlight(a):void 0},c.prototype.no_results=function(b){var c;return c=a('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),c.find("span").first().html(b),this.search_results.append(c),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},c.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},c.prototype.keydown_arrow=function(){var a;return this.results_showing&&this.result_highlight?(a=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(a):void 0:this.results_show()},c.prototype.keyup_arrow=function(){var a;return this.results_showing||this.is_multiple?this.result_highlight?(a=this.result_highlight.prevAll("li.active-result"),a.length?this.result_do_highlight(a.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},c.prototype.keydown_backstroke=function(){var a;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(a=this.search_container.siblings("li.search-choice").last(),a.length&&!a.hasClass("search-choice-disabled")?(this.pending_backstroke=a,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},c.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},c.prototype.keydown_checker=function(a){var b,c;switch(b=null!=(c=a.which)?c:a.keyCode,this.search_field_scale(),8!==b&&this.pending_backstroke&&this.clear_backstroke(),b){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(a),this.mouse_on_container=!1;break;case 13:a.preventDefault();break;case 38:a.preventDefault(),this.keyup_arrow();break;case 40:a.preventDefault(),this.keydown_arrow()}},c.prototype.search_field_scale=function(){var b,c,d,e,f,g,h,i,j;if(this.is_multiple){for(d=0,h=0,f="position:absolute; left: -1000px; top: -1000px; display:none;",g=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],i=0,j=g.length;j>i;i++)e=g[i],f+=e+":"+this.search_field.css(e)+";";return b=a("<div />",{style:f}),b.text(this.search_field.val()),a("body").append(b),h=b.width()+25,b.remove(),c=this.container.outerWidth(),h>c-10&&(h=c-10),this.search_field.css({width:h+"px"})}},c}(b)}.call(this),function(a){a.extend(a.fn,{swapClass:function(a,b){var c=this.filter("."+a);return this.filter("."+b).removeClass(b).addClass(a),c.removeClass(a).addClass(b),this},replaceClass:function(a,b){return this.filter("."+a).removeClass(a).addClass(b).end()},hoverClass:function(b){return b=b||"hover",this.hover(function(){a(this).addClass(b)},function(){a(this).removeClass(b)})},heightToggle:function(a,b){a?this.animate({height:"toggle"},a,b):this.each(function(){jQuery(this)["none"==jQuery(this).css("display")?"show":"hide"](),b&&b.apply(this,arguments)})},heightHide:function(a,b){a?this.animate({height:"hide"},a,b):(this.hide(),b&&this.each(b))},prepareBranches:function(a){return a.prerendered||(this.filter(":last-child:not(ul)").addClass(b.last),this.filter((a.collapsed?"":"."+b.closed)+":not(."+b.open+")").find(">ul").hide()),this.filter(":has(>ul)")},applyClasses:function(c,d){this.filter(":has(>ul):not(:has(>a))").find(">span").click(function(){d.apply(a(this).next())}).add(a("a",this)).hoverClass(),c.prerendered||(this.filter(":has(>ul:hidden)").addClass(b.expandable).replaceClass(b.last,b.lastExpandable),this.not(":has(>ul:hidden)").addClass(b.collapsable).replaceClass(b.last,b.lastCollapsable),this.prepend('<div class="'+b.hitarea+'"/>').find("div."+b.hitarea).each(function(){var b="";a.each(a(this).parent().attr("class").split(" "),function(){b+=this+"-hitarea "}),a(this).addClass(b)})),this.find("div."+b.hitarea).click(d)},treeview:function(c){function e(c,d){function e(d){return function(){return f.apply(a("div."+b.hitarea,c).filter(function(){return d?a(this).parent("."+d).length:!0})),!1}}a("a:eq(0)",d).click(e(b.collapsable)),a("a:eq(1)",d).click(e(b.expandable)),a("a:eq(2)",d).click(e())}function f(){a(this).parent().find(">.hitarea").swapClass(b.collapsableHitarea,b.expandableHitarea).swapClass(b.lastCollapsableHitarea,b.lastExpandableHitarea).end().swapClass(b.collapsable,b.expandable).swapClass(b.lastCollapsable,b.lastExpandable).find(">ul").heightToggle(c.animated,c.toggle),c.unique&&a(this).parent().siblings().find(">.hitarea").replaceClass(b.collapsableHitarea,b.expandableHitarea).replaceClass(b.lastCollapsableHitarea,b.lastExpandableHitarea).end().replaceClass(b.collapsable,b.expandable).replaceClass(b.lastCollapsable,b.lastExpandable).find(">ul").heightHide(c.animated,c.toggle)}function g(){var d=[];i.each(function(b,c){d[b]=a(c).is(":has(>ul:visible)")?1:0}),a.cookie(c.cookieId,d.join(""))}function h(){var d,b=a.cookie(c.cookieId);b&&(d=b.split(""),i.each(function(b,c){a(c).find(">ul")[parseInt(d[b])?"show":"hide"]()}))}var d,i,j,k;if(c=a.extend({cookieId:"treeview"},c),c.add)return this.trigger("add",[c.add]);switch(c.toggle&&(d=c.toggle,c.toggle=function(){return d.apply(a(this).parent()[0],arguments)}),this.addClass("treeview"),i=this.find("li").prepareBranches(c),c.persist){case"cookie":j=c.toggle,c.toggle=function(){g(),j&&j.apply(this,arguments)},h();break;case"location":k=this.find("a").filter(function(){return this.href.toLowerCase()==location.href.toLowerCase()}),k.length&&k.addClass("selected").parents("ul, li").add(k.next()).show()}return i.applyClasses(c,f),c.control&&(e(this,c.control),a(c.control).show()),this.bind("add",function(d,e){a(e).prev().removeClass(b.last).removeClass(b.lastCollapsable).removeClass(b.lastExpandable).find(">.hitarea").removeClass(b.lastCollapsableHitarea).removeClass(b.lastExpandableHitarea),a(e).find("li").andSelf().prepareBranches(c).applyClasses(c,f)
})}});var b=a.fn.treeview.classes={open:"open",closed:"closed",expandable:"expandable",expandableHitarea:"expandable-hitarea",lastExpandableHitarea:"lastExpandable-hitarea",collapsable:"collapsable",collapsableHitarea:"collapsable-hitarea",lastCollapsableHitarea:"lastCollapsable-hitarea",lastCollapsable:"lastCollapsable",lastExpandable:"lastExpandable",last:"last",hitarea:"hitarea"};a.fn.Treeview=a.fn.treeview}(jQuery),function(a){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,b=a&&a.zui?a.zui:this,c=(b.Chart,function(a){var b,c,e;return this.canvas=a.canvas,this.ctx=a,b=function(a,b){return a["offset"+b]?a["offset"+b]:document.defaultView.getComputedStyle(a).getPropertyValue(b)},c=this.width=b(a.canvas,"Width"),e=this.height=b(a.canvas,"Height"),a.canvas.width=c,a.canvas.height=e,c=this.width=a.canvas.width,e=this.height=a.canvas.height,this.aspectRatio=this.width/this.height,d.retinaScale(this),this});c.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,customTooltips:!1,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",onAnimationProgress:function(){},onAnimationComplete:function(){}}},c.types={},d=c.helpers={},e=d.each=function(a,b,c){var e,f,d=Array.prototype.slice.call(arguments,3);if(a)if(a.length===+a.length)for(e=0;e<a.length;e++)b.apply(c,[a[e],e].concat(d));else for(f in a)b.apply(c,[a[f],f].concat(d))},f=d.clone=function(a){var b={};return e(a,function(c,d){a.hasOwnProperty(d)&&(b[d]=c)}),b},g=d.extend=function(a){return e(Array.prototype.slice.call(arguments,1),function(b){e(b,function(c,d){b.hasOwnProperty(d)&&(a[d]=c)})}),a},h=d.merge=function(){var c=Array.prototype.slice.call(arguments,0);return c.unshift({}),g.apply(null,c)},i=d.indexOf=function(a,b){if(Array.prototype.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1},d.where=function(a,b){var c=[];return d.each(a,function(a){b(a)&&c.push(a)}),c},d.findNextWhere=function(a,b,c){var d,e;for(c||(c=-1),d=c+1;d<a.length;d++)if(e=a[d],b(e))return e},d.findPreviousWhere=function(a,b,c){var d,e;for(c||(c=a.length),d=c-1;d>=0;d--)if(e=a[d],b(e))return e},j=d.inherits=function(a){var b=this,c=a&&a.hasOwnProperty("constructor")?a.constructor:function(){return b.apply(this,arguments)},d=function(){this.constructor=c};return d.prototype=b.prototype,c.prototype=new d,c.extend=j,a&&g(c.prototype,a),c.__super__=b.prototype,c},k=d.noop=function(){},l=d.uid=function(){var a=0;return function(){return"chart-"+a++}}(),m=d.warn=function(a){window.console&&"function"==typeof window.console.warn&&console.warn(a)},n=d.amd="function"==typeof define&&define.amd,o=d.isNumber=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},p=d.max=function(a){return Math.max.apply(Math,a)},q=d.min=function(a){return Math.min.apply(Math,a)},d.cap=function(a,b,c){if(o(b)){if(a>b)return b}else if(o(c)&&c>a)return c;return a},r=d.getDecimalPlaces=function(a){return 0!==a%1&&o(a)?a.toString().split(".")[1].length:0},s=d.radians=function(a){return a*(Math.PI/180)},d.getAngleFromPoint=function(a,b){var c=b.x-a.x,d=b.y-a.y,e=Math.sqrt(c*c+d*d),f=2*Math.PI+Math.atan2(d,c);return 0>c&&0>d&&(f+=2*Math.PI),{angle:f,distance:e}},t=d.aliasPixel=function(a){return 0===a%2?0:.5},d.splineCurve=function(a,b,c,d){var e=Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2)),f=Math.sqrt(Math.pow(c.x-b.x,2)+Math.pow(c.y-b.y,2)),g=d*e/(e+f),h=d*f/(e+f);return{inner:{x:b.x-g*(c.x-a.x),y:b.y-g*(c.y-a.y)},outer:{x:b.x+h*(c.x-a.x),y:b.y+h*(c.y-a.y)}}},u=d.calculateOrderOfMagnitude=function(a){return Math.floor(Math.log(a)/Math.LN10)},d.calculateScaleRange=function(a,b,c,d,e){var k,l,m,n,o,r,s,f=2,g=Math.floor(b/(1.5*c)),h=f>=g,i=p(a),j=q(a);for(i===j&&(i+=.5,j>=.5&&!d?j-=.5:i+=.5),k=Math.abs(i-j),l=u(k),m=Math.ceil(i/(1*Math.pow(10,l)))*Math.pow(10,l),n=d?0:Math.floor(j/(1*Math.pow(10,l)))*Math.pow(10,l),o=m-n,r=Math.pow(10,l),s=Math.round(o/r);(s>g||g>2*s)&&!h;)if(s>g)r*=2,s=Math.round(o/r),0!==s%1&&(h=!0);else if(e&&l>=0){if(0!==r/2%1)break;r/=2,s=Math.round(o/r)}else r/=2,s=Math.round(o/r);return h&&(s=f,r=o/s),{steps:s,stepValue:r,min:n,max:n+s*r}},v=d.template=function(a,b){function c(a,b){var c=/\W/.test(a)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):d[a]=d[a];return b?c(b):c}if(a instanceof Function)return a(b);var d={};return c(a,b)},d.generateLabels=function(a,b,c,d){var f=new Array(b);return labelTemplateString&&e(f,function(b,e){f[e]=v(a,{value:c+d*(e+1)})}),f},w=d.easingEffects={linear:function(a){return a},easeInQuad:function(a){return a*a},easeOutQuad:function(a){return-1*a*(a-2)},easeInOutQuad:function(a){return(a/=.5)<1?.5*a*a:-.5*(--a*(a-2)-1)},easeInCubic:function(a){return a*a*a},easeOutCubic:function(a){return 1*((a=a/1-1)*a*a+1)},easeInOutCubic:function(a){return(a/=.5)<1?.5*a*a*a:.5*((a-=2)*a*a+2)},easeInQuart:function(a){return a*a*a*a},easeOutQuart:function(a){return-1*((a=a/1-1)*a*a*a-1)},easeInOutQuart:function(a){return(a/=.5)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)},easeInQuint:function(a){return 1*(a/=1)*a*a*a*a},easeOutQuint:function(a){return 1*((a=a/1-1)*a*a*a*a+1)},easeInOutQuint:function(a){return(a/=.5)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)},easeInSine:function(a){return-1*Math.cos(a/1*(Math.PI/2))+1},easeOutSine:function(a){return 1*Math.sin(a/1*(Math.PI/2))},easeInOutSine:function(a){return-.5*(Math.cos(Math.PI*a/1)-1)},easeInExpo:function(a){return 0===a?1:1*Math.pow(2,10*(a/1-1))},easeOutExpo:function(a){return 1===a?1:1*(-Math.pow(2,-10*a/1)+1)},easeInOutExpo:function(a){return 0===a?0:1===a?1:(a/=.5)<1?.5*Math.pow(2,10*(a-1)):.5*(-Math.pow(2,-10*--a)+2)},easeInCirc:function(a){return a>=1?a:-1*(Math.sqrt(1-(a/=1)*a)-1)},easeOutCirc:function(a){return 1*Math.sqrt(1-(a=a/1-1)*a)},easeInOutCirc:function(a){return(a/=.5)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)},easeInElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:1==(a/=1)?1:(c||(c=.3),d<Math.abs(1)?(d=1,b=c/4):b=c/(2*Math.PI)*Math.asin(1/d),-(d*Math.pow(2,10*(a-=1))*Math.sin(2*(1*a-b)*Math.PI/c)))},easeOutElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:1==(a/=1)?1:(c||(c=.3),d<Math.abs(1)?(d=1,b=c/4):b=c/(2*Math.PI)*Math.asin(1/d),d*Math.pow(2,-10*a)*Math.sin(2*(1*a-b)*Math.PI/c)+1)},easeInOutElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:2==(a/=.5)?1:(c||(c=.3*1.5),d<Math.abs(1)?(d=1,b=c/4):b=c/(2*Math.PI)*Math.asin(1/d),1>a?-.5*d*Math.pow(2,10*(a-=1))*Math.sin(2*(1*a-b)*Math.PI/c):.5*d*Math.pow(2,-10*(a-=1))*Math.sin(2*(1*a-b)*Math.PI/c)+1)},easeInBack:function(a){var b=1.70158;return 1*(a/=1)*a*((b+1)*a-b)},easeOutBack:function(a){var b=1.70158;return 1*((a=a/1-1)*a*((b+1)*a+b)+1)},easeInOutBack:function(a){var b=1.70158;return(a/=.5)<1?.5*a*a*(((b*=1.525)+1)*a-b):.5*((a-=2)*a*(((b*=1.525)+1)*a+b)+2)},easeInBounce:function(a){return 1-w.easeOutBounce(1-a)},easeOutBounce:function(a){return(a/=1)<1/2.75?7.5625*a*a:2/2.75>a?1*(7.5625*(a-=1.5/2.75)*a+.75):2.5/2.75>a?1*(7.5625*(a-=2.25/2.75)*a+.9375):1*(7.5625*(a-=2.625/2.75)*a+.984375)},easeInOutBounce:function(a){return.5>a?.5*w.easeInBounce(2*a):.5*w.easeOutBounce(2*a-1)+.5}},x=d.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(a,1e3/60)}}(),y=d.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(a){return window.clearTimeout(a,1e3/60)}}(),d.animationLoop=function(a,b,c,d,e,f){var g=0,h=w[c]||w.linear,i=function(){g++;var c=g/b,j=h(c);a.call(f,j,c,g),d.call(f,j,c),b>g?f.animationFrame=x(i):e.apply(f)};x(i)},d.getRelativePosition=function(a){var b,c,d=a.originalEvent||a,e=a.currentTarget||a.srcElement,f=e.getBoundingClientRect();return d.touches?(b=d.touches[0].clientX-f.left,c=d.touches[0].clientY-f.top):(b=d.clientX-f.left,c=d.clientY-f.top),{x:b,y:c}},z=d.addEvent=function(a,b,c){a.addEventListener?a.addEventListener(b,c):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c},A=d.removeEvent=function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent?a.detachEvent("on"+b,c):a["on"+b]=k},d.bindEvents=function(a,b,c){a.events||(a.events={}),e(b,function(b){a.events[b]=function(){c.apply(a,arguments)},z(a.chart.canvas,b,a.events[b])})},B=d.unbindEvents=function(a,b){e(b,function(b,c){A(a.chart.canvas,c,b)})},C=d.getMaximumWidth=function(a){var b=a.parentNode;return b.clientWidth},D=d.getMaximumHeight=function(a){var b=a.parentNode;return b.clientHeight},d.getMaximumSize=d.getMaximumWidth,E=d.retinaScale=function(a){var b=a.ctx,c=a.canvas.width,d=a.canvas.height;window.devicePixelRatio&&(b.canvas.style.width=c+"px",b.canvas.style.height=d+"px",b.canvas.height=d*window.devicePixelRatio,b.canvas.width=c*window.devicePixelRatio,b.scale(window.devicePixelRatio,window.devicePixelRatio))},F=d.clear=function(a){a.ctx.clearRect(0,0,a.width,a.height)},G=d.fontString=function(a,b,c){return b+" "+a+"px "+c},H=d.longestText=function(a,b,c){a.font=b;var d=0;return e(c,function(b){var c=a.measureText(b).width;d=c>d?c:d}),d},I=d.drawRoundedRectangle=function(a,b,c,d,e,f){a.beginPath(),a.moveTo(b+f,c),a.lineTo(b+d-f,c),a.quadraticCurveTo(b+d,c,b+d,c+f),a.lineTo(b+d,c+e-f),a.quadraticCurveTo(b+d,c+e,b+d-f,c+e),a.lineTo(b+f,c+e),a.quadraticCurveTo(b,c+e,b,c+e-f),a.lineTo(b,c+f),a.quadraticCurveTo(b,c,b+f,c),a.closePath()},c.instances={},c.Type=function(a,b,d){this.options=b,this.chart=d,this.id=l(),c.instances[this.id]=this,b.responsive&&this.resize(),this.initialize.call(this,a)},g(c.Type.prototype,{initialize:function(){return this},clear:function(){return F(this.chart),this},stop:function(){return y(this.animationFrame),this},resize:function(a){this.stop();var b=this.chart.canvas,c=C(this.chart.canvas),d=this.options.maintainAspectRatio?c/this.chart.aspectRatio:D(this.chart.canvas);return b.width=this.chart.width=c,b.height=this.chart.height=d,E(this.chart),"function"==typeof a&&a.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:k,render:function(a){return a&&this.reflow(),this.options.animation&&!a?d.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this):(this.draw(),this.options.onAnimationComplete.call(this)),this},generateLegend:function(){return v(this.options.legendTemplate,this)},destroy:function(){this.clear(),B(this,this.events);var a=this.chart.canvas;a.width=this.chart.width,a.height=this.chart.height,a.style.removeProperty?(a.style.removeProperty("width"),a.style.removeProperty("height")):(a.style.removeAttribute("width"),a.style.removeAttribute("height")),delete c.instances[this.id]},showTooltip:function(a,b){var f,g,h,j,k,l,m;if("undefined"==typeof this.activeElements&&(this.activeElements=[]),f=function(a){var b=!1;return a.length!==this.activeElements.length?b=!0:(e(a,function(a,c){a!==this.activeElements[c]&&(b=!0)},this),b)}.call(this,a),f||b){if(this.activeElements=a,this.draw(),this.options.customTooltips&&this.options.customTooltips(!1),a.length>0)if(this.datasets&&this.datasets.length>1){for(j=this.datasets.length-1;j>=0&&(g=this.datasets[j].points||this.datasets[j].bars||this.datasets[j].segments,h=i(g,a[0]),-1===h);j--);k=[],l=[],m=function(){var b,c,e,f,g,i=[],j=[],m=[];return d.each(this.datasets,function(a){a.showTooltips!==!1&&(b=a.points||a.bars||a.segments,b[h]&&b[h].hasValue()&&i.push(b[h]))}),d.each(i,function(a){j.push(a.x),m.push(a.y),k.push(d.template(this.options.multiTooltipTemplate,a)),l.push({fill:a._saved.fillColor||a.fillColor,stroke:a._saved.strokeColor||a.strokeColor})},this),g=q(m),e=p(m),f=q(j),c=p(j),{x:f>this.chart.width/2?f:c,y:(g+e)/2}}.call(this,h),new c.MultiTooltip({x:m.x,y:m.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:k,legendColors:l,legendColorBackground:this.options.multiTooltipKeyBackground,title:a[0].label,chart:this.chart,ctx:this.chart.ctx,custom:this.options.customTooltips}).draw()}else e(a,function(a){var b=a.tooltipPosition();new c.Tooltip({x:Math.round(b.x),y:Math.round(b.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:v(this.options.tooltipTemplate,a),chart:this.chart,custom:this.options.customTooltips}).draw()},this);return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}}),c.Type.extend=function(a){var e,i,b=this,d=function(){return b.apply(this,arguments)};return d.prototype=f(b.prototype),g(d.prototype,a),d.extend=c.Type.extend,a.name||b.prototype.name?(e=a.name||b.prototype.name,i=c.defaults[b.prototype.name]?f(c.defaults[b.prototype.name]):{},c.defaults[e]=g(i,a.defaults),c.types[e]=d,c.prototype[e]=function(a,b){var f=h(c.defaults.global,c.defaults[e],b||{});return new d(a,f,this)}):m("Name not provided for this chart, so it hasn't been registered"),b},c.Element=function(a){g(this,a),this.initialize.apply(this,arguments),this.save()},g(c.Element.prototype,{initialize:function(){},restore:function(a){return a?e(a,function(a){this[a]=this._saved[a]},this):g(this,this._saved),this},save:function(){return this._saved=f(this),delete this._saved._saved,this},update:function(a){return e(a,function(a,b){this._saved[b]=this[b],this[b]=a},this),this},transition:function(a,b){return e(a,function(a,c){this[c]=(a-this._saved[c])*b+this._saved[c]},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return o(this.value)}}),c.Element.extend=j,c.Point=c.Element.extend({display:!0,inRange:function(a,b){var c=this.hitDetectionRadius+this.radius;return Math.pow(a-this.x,2)+Math.pow(b-this.y,2)<Math.pow(c,2)},draw:function(){if(this.display){var a=this.ctx;a.beginPath(),a.arc(this.x,this.y,this.radius,0,2*Math.PI),a.closePath(),a.strokeStyle=this.strokeColor,a.lineWidth=this.strokeWidth,a.fillStyle=this.fillColor,a.fill(),a.stroke()}}}),c.Arc=c.Element.extend({inRange:function(a,b){var c=d.getAngleFromPoint(this,{x:a,y:b}),e=c.angle>=this.startAngle&&c.angle<=this.endAngle,f=c.distance>=this.innerRadius&&c.distance<=this.outerRadius;return e&&f},tooltipPosition:function(){var a=this.startAngle+(this.endAngle-this.startAngle)/2,b=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(a)*b,y:this.y+Math.sin(a)*b}},draw:function(){var b=this.ctx;b.beginPath(),b.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle),b.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,!0),b.closePath(),b.strokeStyle=this.strokeColor,b.lineWidth=this.strokeWidth,b.fillStyle=this.fillColor,b.fill(),b.lineJoin="bevel",this.showStroke&&b.stroke()}}),c.Rectangle=c.Element.extend({draw:function(){var a=this.ctx,b=this.width/2,c=this.x-b,d=this.x+b,e=this.base-(this.base-this.y),f=this.strokeWidth/2;this.showStroke&&(c+=f,d-=f,e+=f),a.beginPath(),a.fillStyle=this.fillColor,a.strokeStyle=this.strokeColor,a.lineWidth=this.strokeWidth,a.moveTo(c,this.base),a.lineTo(c,e),a.lineTo(d,e),a.lineTo(d,this.base),a.fill(),this.showStroke&&a.stroke()},height:function(){return this.base-this.y},inRange:function(a,b){return a>=this.x-this.width/2&&a<=this.x+this.width/2&&b>=this.y&&b<=this.base}}),c.Tooltip=c.Element.extend({draw:function(){var b,c,d,e,f,g,a=this.chart.ctx;if(a.font=G(this.fontSize,this.fontStyle,this.fontFamily),this.xAlign="center",this.yAlign="above",b=this.caretPadding=2,c=a.measureText(this.text).width+2*this.xPadding,d=this.fontSize+2*this.yPadding,e=d+this.caretHeight+b,this.x+c/2>this.chart.width?this.xAlign="left":this.x-c/2<0&&(this.xAlign="right"),this.y-e<0&&(this.yAlign="below"),f=this.x-c/2,g=this.y-e,a.fillStyle=this.fillColor,this.custom)this.custom(this);else{switch(this.yAlign){case"above":a.beginPath(),a.moveTo(this.x,this.y-b),a.lineTo(this.x+this.caretHeight,this.y-(b+this.caretHeight)),a.lineTo(this.x-this.caretHeight,this.y-(b+this.caretHeight)),a.closePath(),a.fill();break;case"below":g=this.y+b+this.caretHeight,a.beginPath(),a.moveTo(this.x,this.y+b),a.lineTo(this.x+this.caretHeight,this.y+b+this.caretHeight),a.lineTo(this.x-this.caretHeight,this.y+b+this.caretHeight),a.closePath(),a.fill()}switch(this.xAlign){case"left":f=this.x-c+(this.cornerRadius+this.caretHeight);break;case"right":f=this.x-(this.cornerRadius+this.caretHeight)}I(a,f,g,c,d,this.cornerRadius),a.fill(),a.fillStyle=this.textColor,a.textAlign="center",a.textBaseline="middle",a.fillText(this.text,f+c/2,g+d/2)}}}),c.MultiTooltip=c.Element.extend({initialize:function(){var a,b,c,d;this.font=G(this.fontSize,this.fontStyle,this.fontFamily),this.titleFont=G(this.titleFontSize,this.titleFontStyle,this.titleFontFamily),this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+2*this.yPadding+1.5*this.titleFontSize,this.ctx.font=this.titleFont,a=this.ctx.measureText(this.title).width,b=H(this.ctx,this.font,this.labels)+this.fontSize+3,c=p([b,a]),this.width=c+2*this.xPadding,d=this.height/2,this.y-d<0?this.y=d:this.y+d>this.chart.height&&(this.y=this.chart.height-d),this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(a){var b=this.y-this.height/2+this.yPadding,c=a-1;return 0===a?b+this.titleFontSize/2:b+(1.5*this.fontSize*c+this.fontSize/2)+1.5*this.titleFontSize},draw:function(){if(this.custom)this.custom(this);else{I(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var a=this.ctx;a.fillStyle=this.fillColor,a.fill(),a.closePath(),a.textAlign="left",a.textBaseline="middle",a.fillStyle=this.titleTextColor,a.font=this.titleFont,a.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0)),a.font=this.font,d.each(this.labels,function(b,c){a.fillStyle=this.textColor,a.fillText(b,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(c+1)),a.fillStyle=this.legendColorBackground,a.fillRect(this.x+this.xPadding,this.getLineHeight(c+1)-this.fontSize/2,this.fontSize,this.fontSize),a.fillStyle=this.legendColors[c].fill,a.fillRect(this.x+this.xPadding,this.getLineHeight(c+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}}}),c.Scale=c.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var a=r(this.stepValue),b=0;b<=this.steps;b++)this.yLabels.push(v(this.templateString,{value:(this.min+b*this.stepValue).toFixed(a)}));this.yLabelWidth=this.display&&this.showLabels?H(this.ctx,this.font,this.yLabels):0},addXLabel:function(a){this.xLabels.push(a),this.valuesCount++,this.fit()},removeXLabel:function(){this.xLabels.shift(),this.valuesCount--,this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0,this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height,this.startPoint+=this.padding,this.endPoint-=this.padding;var a,b=this.endPoint-this.startPoint;for(this.calculateYRange(b),this.buildYLabels(),this.calculateXLabelRotation();b>this.endPoint-this.startPoint;)b=this.endPoint-this.startPoint,a=this.yLabelWidth,this.calculateYRange(b),this.buildYLabels(),a<this.yLabelWidth&&this.calculateXLabelRotation()},calculateXLabelRotation:function(){var a,b,c,d,e,f,g;if(this.ctx.font=this.font,c=this.ctx.measureText(this.xLabels[0]).width,d=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width,this.xScalePaddingRight=d/2+3,this.xScalePaddingLeft=c/2>this.yLabelWidth+10?c/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){for(f=H(this.ctx,this.font,this.xLabels),this.xLabelWidth=f,g=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>g&&0===this.xLabelRotation||this.xLabelWidth>g&&this.xLabelRotation<=90&&this.xLabelRotation>0;)e=Math.cos(s(this.xLabelRotation)),a=e*c,b=e*d,a+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=a+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=e*f;this.xLabelRotation>0&&(this.endPoint-=Math.sin(s(this.xLabelRotation))*f+3)}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding},calculateYRange:k,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(a){var b=this.drawingArea()/(this.min-this.max);return this.endPoint-b*(a-this.min)},calculateX:function(a){var b=(this.xLabelRotation>0,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight)),c=b/Math.max(this.valuesCount-(this.offsetGridLines?0:1),1),d=c*a+this.xScalePaddingLeft;return this.offsetGridLines&&(d+=c/2),Math.round(d)},update:function(a){d.extend(this,a),this.fit()},draw:function(){var a=this.ctx,b=(this.endPoint-this.startPoint)/this.steps,c=Math.round(this.xScalePaddingLeft);this.display&&(a.fillStyle=this.textColor,a.font=this.font,e(this.yLabels,function(e,f){var g=this.endPoint-b*f,h=Math.round(g),i=this.showHorizontalLines;a.textAlign="right",a.textBaseline="middle",this.showLabels&&a.fillText(e,c-10,g),0!==f||i||(i=!0),i&&a.beginPath(),f>0?(a.lineWidth=this.gridLineWidth,a.strokeStyle=this.gridLineColor):(a.lineWidth=this.lineWidth,a.strokeStyle=this.lineColor),h+=d.aliasPixel(a.lineWidth),i&&(a.moveTo(c,h),a.lineTo(this.width,h),a.stroke(),a.closePath()),a.lineWidth=this.lineWidth,a.strokeStyle=this.lineColor,a.beginPath(),a.moveTo(c-5,h),a.lineTo(c,h),a.stroke(),a.closePath()},this),e(this.xLabels,function(b,c){var d=this.calculateX(c)+t(this.lineWidth),e=this.calculateX(c-(this.offsetGridLines?.5:0))+t(this.lineWidth),f=this.xLabelRotation>0,g=this.showVerticalLines;0!==c||g||(g=!0),g&&a.beginPath(),c>0?(a.lineWidth=this.gridLineWidth,a.strokeStyle=this.gridLineColor):(a.lineWidth=this.lineWidth,a.strokeStyle=this.lineColor),g&&(a.moveTo(e,this.endPoint),a.lineTo(e,this.startPoint-3),a.stroke(),a.closePath()),a.lineWidth=this.lineWidth,a.strokeStyle=this.lineColor,a.beginPath(),a.moveTo(e,this.endPoint),a.lineTo(e,this.endPoint+5),a.stroke(),a.closePath(),a.save(),a.translate(d,f?this.endPoint+12:this.endPoint+8),a.rotate(-1*s(this.xLabelRotation)),a.font=this.font,a.textAlign=f?"right":"center",a.textBaseline=f?"middle":"top",a.fillText(b,0,0),a.restore()},this))}}),c.RadialScale=c.Element.extend({initialize:function(){this.size=q([this.height,this.width]),this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(a){var b=this.drawingArea/(this.max-this.min);return(a-this.min)*b},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize(),this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var a=r(this.stepValue),b=0;b<=this.steps;b++)this.yLabels.push(v(this.templateString,{value:(this.min+b*this.stepValue).toFixed(a)}))},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var a,b,c,d,e,f,g,h,i,j,k,l,m=q([this.height/2-this.pointLabelFontSize-5,this.width/2]),n=this.width,p=0;for(this.ctx.font=G(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),b=0;b<this.valuesCount;b++)a=this.getPointPosition(b,m),c=this.ctx.measureText(v(this.templateString,{value:this.labels[b]})).width+5,0===b||b===this.valuesCount/2?(d=c/2,a.x+d>n&&(n=a.x+d,e=b),a.x-d<p&&(p=a.x-d,g=b)):b<this.valuesCount/2?a.x+c>n&&(n=a.x+c,e=b):b>this.valuesCount/2&&a.x-c<p&&(p=a.x-c,g=b);i=p,j=Math.ceil(n-this.width),f=this.getIndexAngle(e),h=this.getIndexAngle(g),k=j/Math.sin(f+Math.PI/2),l=i/Math.sin(h+Math.PI/2),k=o(k)?k:0,l=o(l)?l:0,this.drawingArea=m-(l+k)/2,this.setCenterPoint(l,k)},setCenterPoint:function(a,b){var c=this.width-b-this.drawingArea,d=a+this.drawingArea;this.xCenter=(d+c)/2,this.yCenter=this.height/2},getIndexAngle:function(a){var b=2*Math.PI/this.valuesCount;return a*b-Math.PI/2},getPointPosition:function(a,b){var c=this.getIndexAngle(a);return{x:Math.cos(c)*b+this.xCenter,y:Math.sin(c)*b+this.yCenter}},draw:function(){var a,b,c,d,f,g,h,i,j;if(this.display&&(a=this.ctx,e(this.yLabels,function(b,c){var d,e,f,g,h;if(c>0){if(e=c*(this.drawingArea/this.steps),f=this.yCenter-e,this.lineWidth>0)if(a.strokeStyle=this.lineColor,a.lineWidth=this.lineWidth,this.lineArc)a.beginPath(),a.arc(this.xCenter,this.yCenter,e,0,2*Math.PI),a.closePath(),a.stroke();else{for(a.beginPath(),g=0;g<this.valuesCount;g++)d=this.getPointPosition(g,this.calculateCenterOffset(this.min+c*this.stepValue)),0===g?a.moveTo(d.x,d.y):a.lineTo(d.x,d.y);a.closePath(),a.stroke()}this.showLabels&&(a.font=G(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop&&(h=a.measureText(b).width,a.fillStyle=this.backdropColor,a.fillRect(this.xCenter-h/2-this.backdropPaddingX,f-this.fontSize/2-this.backdropPaddingY,h+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)),a.textAlign="center",a.textBaseline="middle",a.fillStyle=this.fontColor,a.fillText(b,this.xCenter,f))}},this),!this.lineArc))for(a.lineWidth=this.angleLineWidth,a.strokeStyle=this.angleLineColor,b=this.valuesCount-1;b>=0;b--)this.angleLineWidth>0&&(c=this.getPointPosition(b,this.calculateCenterOffset(this.max)),a.beginPath(),a.moveTo(this.xCenter,this.yCenter),a.lineTo(c.x,c.y),a.stroke(),a.closePath()),d=this.getPointPosition(b,this.calculateCenterOffset(this.max)+5),a.font=G(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),a.fillStyle=this.pointLabelFontColor,f=this.labels.length,g=this.labels.length/2,h=g/2,i=h>b||b>f-h,j=b===h||b===f-h,a.textAlign=0===b?"center":b===g?"center":g>b?"left":"right",a.textBaseline=j?"middle":i?"bottom":"top",a.fillText(this.labels[b],d.x,d.y)}}),d.addEvent(window,"resize",function(){var a;return function(){clearTimeout(a),a=setTimeout(function(){e(c.instances,function(a){a.options.responsive&&a.resize(a.render,!0)})},50)}}()),n?define(function(){return c}):"object"==typeof module&&module.exports&&(module.exports=c),b.Chart=c,a.fn.chart=function(){var a=[];return this.each(function(){a.push(new c(this.getContext("2d")))}),1===a.length?a[0]:a}}.call(this,jQuery),function(a){var b=a&&a.zui?a.zui:this,c=b.Chart,d=c.helpers,e={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:1,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};c.Type.extend({name:"Bar",defaults:e,initialize:function(b){var e=this.options;this.ScaleClass=c.Scale.extend({offsetGridLines:!0,calculateBarX:function(a,b,c){var d=this.calculateBaseWidth(),f=this.calculateX(c)-d/2,g=this.calculateBarWidth(a);return f+g*b+b*e.barDatasetSpacing+g/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*e.barValueSpacing},calculateBarWidth:function(a){var b=this.calculateBaseWidth()-(a-1)*e.barDatasetSpacing;return b/a}}),this.datasets=[],this.options.showTooltips&&d.bindEvents(this,this.options.tooltipEvents,function(a){var b="mouseout"!==a.type?this.getBarsAtEvent(a):[];this.eachBars(function(a){a.restore(["fillColor","strokeColor"])}),d.each(b,function(a){a.fillColor=a.highlightFill,a.strokeColor=a.highlightStroke}),this.showTooltip(b)}),this.BarClass=c.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx}),d.each(b.datasets,function(c){var f,g,h;a.zui&&a.zui.Color&&a.zui.Color.get&&(f=a.zui.Color.get(c.color),g=f.toCssStr(),c.fillColor||(c.fillColor=f.clone().fade(50).toCssStr()),c.strokeColor||(c.strokeColor=g)),h={label:c.label||null,fillColor:c.fillColor,strokeColor:c.strokeColor,bars:[]},this.datasets.push(h),d.each(c.data,function(a,d){h.bars.push(new this.BarClass({value:a,label:b.labels[d],datasetLabel:c.label,strokeColor:c.strokeColor,fillColor:c.fillColor,highlightFill:c.highlightFill||c.fillColor,highlightStroke:c.highlightStroke||c.strokeColor}))},this)},this),this.buildScale(b.labels),this.BarClass.prototype.base=this.scale.endPoint,this.eachBars(function(a,b,c){d.extend(a,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,c,b),y:this.scale.endPoint}),a.save()},this),this.render()},update:function(){this.scale.update(),d.each(this.activeElements,function(a){a.restore(["fillColor","strokeColor"])}),this.eachBars(function(a){a.save()}),this.render()},eachBars:function(a){d.each(this.datasets,function(b,c){d.each(b.bars,a,this,c)},this)},getBarsAtEvent:function(a){for(var b,c=[],e=d.getRelativePosition(a),f=function(a){c.push(a.bars[b])},g=0;g<this.datasets.length;g++)for(b=0;b<this.datasets[g].bars.length;b++)if(this.datasets[g].bars[b].inRange(e.x,e.y))return d.each(this.datasets,f),c;return c},buildScale:function(a){var b=this,c=function(){var a=[];return b.eachBars(function(b){a.push(b.value)}),a},e={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:a.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(a){var b=d.calculateScaleRange(c(),a,this.fontSize,this.beginAtZero,this.integersOnly);d.extend(this,b)},xLabels:a,font:d.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};
this.options.scaleOverride&&d.extend(e,{calculateYRange:d.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new this.ScaleClass(e)},addData:function(a,b){d.each(a,function(a,c){this.datasets[c].bars.push(new this.BarClass({value:a,label:b,x:this.scale.calculateBarX(this.datasets.length,c,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[c].strokeColor,fillColor:this.datasets[c].fillColor}))},this),this.scale.addXLabel(b),this.update()},removeData:function(){this.scale.removeXLabel(),d.each(this.datasets,function(a){a.bars.shift()},this),this.update()},reflow:function(){d.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var a=d.extend({height:this.chart.height,width:this.chart.width});this.scale.update(a)},draw:function(a){var b=a||1;this.clear(),this.chart.ctx,this.scale.draw(b),d.each(this.datasets,function(a,c){d.each(a.bars,function(a,d){a.hasValue()&&(a.base=this.scale.endPoint,a.transition({x:this.scale.calculateBarX(this.datasets.length,c,d),y:this.scale.calculateY(a.value),width:this.scale.calculateBarWidth(this.datasets.length)},b).draw())},this)},this)}}),a.fn.barChart=function(b,d){var e=[];return this.each(function(){var f=a(this);e.push(new c(this.getContext("2d")).Bar(b,a.extend(f.data(),d)))}),1===e.length?e[0]:e}}.call(this,jQuery);

/*<script type="text/javascript" src="${ctxStatic}/org/it313/common/js/jquery.heart.min.js"></script>*/
!function(a){var b,c,d;a.Svc||(a.Svc={}),b={},c=function(a,b,c){a.successful?b&&b(a.data):"member.noLogin"==a.code?layer.alert("您当前还未登录，点击确定后重新登录！",function(){location.href=rootPath+"/front/login.html"}):"user.noLogin"==a.code?layer.alert("您当前还未登录，点击确定后重新登录！",function(){location.href=rootAdminPath+"/login"}):(layer.alert(a.msg,{icon:5}),c&&c(a.msg))},d=function(a,d,e,f,g,h,i,j,k){var m,l={};l.type=g?g:"POST",l.url=d,"json"==a?(l.data=e&&JSON.stringify(e),l.contentType="application/json;charset=UTF-8",l.dataType="json"):"form"==a?(l.contentType="application/x-www-form-urlencoded; charset=UTF-8",l.data=e,l.traditional=!0):"page"==a&&(l.dataType="html"),l.beforeSend=function(a){h&&("string"==typeof h?a.setRequestHeader("functionReferBy",h):a.setRequestHeader("functionReferBy",JSON.stringify(h))),(null==k||void 0==k||k===!0)&&(m=layer.load(),b[m]=m)},l.complete=function(){(null==k||void 0==k||k===!0)&&(delete b[m],$.isEmptyObject(b)&&layer.closeAll("loading"))},l.error=function(){(null==k||void 0==k||k===!0)&&(delete b[m],$.isEmptyObject(b)&&layer.closeAll("loading"))},l.success=function(d){(null==k||void 0==k||k===!0)&&(delete b[m],$.isEmptyObject(b)&&layer.closeAll("loading")),"page"==a?f&&f(d):c(d,f,j)},void 0!=i&&(l.async=i),l.cache=!1,$.ajax(l)},Svc.AjaxJson=function(){var a=function(a,b,c,e,f){d("json",a,b,c,"GET",e,f)},b=function(a,b,c,e,f){d("json",a,b,c,"POST",e,f)},c=function(b,c,d,e){a(b,c,d,e,!1)},e=function(a,c,d,e){b(a,c,d,e,!1)};return{get:a,post:b,sGet:c,sPost:e}}(),Svc.ajax=function(a){var b={method:"POST",dataType:"json",asyn:!0};$.extend(b,a),d(b.dataType,b.url,b.param,b.success,b.method.toUpperCase(),b.refBy,b.asyn,b.failure)},Svc.AjaxForm=function(){var a=function(a,b,c,e,f){d("form",a,b,c,"GET",e,f)},b=function(a,b,c,e,f){d("form",a,b,c,"POST",e,f)},c=function(b,c,d,e){a(b,c,d,e,!1)},e=function(a,c,d,e){b(a,c,d,e,!1)},f=function(a,b,c){var e=a.serialize(),f=a.attr("action"),g=a.attr("method");d("form",f,e,b,g,c)};return{get:a,post:b,send:f,sGet:c,sPost:e}}(),Svc.AjaxPage=function(a,b,c,d,e){$.ajax({type:d||"GET",url:a,data:c||{},dataType:"html",async:!0,cache:!0,beforeSend:function(){b.html('<h1 class="ajax-loading-animation"><i class="fa fa-cog fa-spin"></i> 加载中...</h1>')},success:function(a){b.html(a),e&&e()},error:function(a){b.html('<h4 class="ajax-loading-error"><i class="fa fa-warning txt-color-orangeDark"></i> Error '+a.status+"! "+a.statusText+".</h4>")}})},Svc.formToJson=function(a,b){var c={},d=a.serializeArray();return $.each(d,function(){(this.value||b)&&(c[this.name]?(c[this.name].push||(c[this.name]=[c[this.name]]),c[this.name].push(this.value||null)):c[this.name]=$("[name='"+this.name+"']:checkbox",a).length?[this.value]:this.value||null)}),c},Svc.jsonToDom=function(a,b,c,d){var f,e={INPUTradio:function(a,b){a.removeAttr("checked"),a.val()==b&&a.attr("checked","checked")},INPUTcheckbox:function(a,b){var d,c=[];"[object Array]"===Object.prototype.toString.apply(b)?c=b:c.push(b);for(d in c)a.val()==c[d]&&a.attr("checked","checked")},INPUThidden:function(a,b){a.val(b)},INPUTtext:function(a,b){a.val(b)},INPUTpassword:function(a,b){a.val(b)},TEXTAREAtextarea:function(a,b){a.val(b)},LABEL:function(a,b){a.text(b)},TEXTAREA:function(a,b){a.text(b)},SELECT:function(a,b){a.val(b)},"SELECTselect-one":function(a,b){a.val(b)},INPUTfile:function(){},FORM:function(){}};c||(c="[name]"),f=$(c,b),a&&$.each(f,function(b){var h,i,j,c=f.eq(b),g=c.attr("name");null==a[g]&&(a[g]=""),h=c.get(0).tagName,i=c.attr("type"),j=i?h+i:h,d&&$.each(d,function(b,d){0==d(c,a[g],j)}),e[j](c,a[g])})},Svc.resetForm=function(a){if(a){var b=$("input[type='reset']",a);0==b.length&&(b=$("<input type='reset' style='display:none;'/>"),a.append(b)),b.trigger("click"),$("textarea",a).empty(),$("input[type='hidden']",a).val("")}},Svc.queryString=function(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)","i"),c=window.location.search.substr(1).match(b);return null!=c?c[2]:null},Svc.cookie={},Svc.cookie.write=function(a,b,c){Svc.cookie.remove(a);var d=new Date;0>=c&&(c=1),d.setTime(d.getTime()+864e5*c),document.cookie=a+"="+encodeURI(b)+"; expires="+d.toGMTString()+";path=/"},Svc.cookie.remove=function(a){var b=new Date;""!=Svc.cookie.read(a)&&(b.setTime(b.getTime()-864e5),document.cookie=a+"=;expires="+b.toGMTString()+";path=/")},Svc.cookie.read=function(a){var b=document.cookie.match(new RegExp("(^| )"+a+"=([^;]*)(;|$)"));return null!=b?decodeURIComponent(b[2]):""}}(window),Date.prototype.format=function(a){var c,b={"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(c in b)new RegExp("("+c+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a},String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")};

/*<script type="text/javascript" src="${ctxStatic}/org/it313/datatables/1.10.2/media/js/jquery.dataTables.js"></script>*/
!function(a,b,c){!function(a){"use strict";"function"==typeof define&&define.amd?define("datatables",["jquery"],a):"object"==typeof exports?a(require("jquery")):jQuery&&!jQuery.fn.dataTable&&a(jQuery)}(function(d){"use strict";function B(a){var c,e,b="a aa ai ao as b fn i m o s ",f={};d.each(a,function(d){c=d.match(/^([^A-Z]+?)([A-Z])/),c&&-1!==b.indexOf(c[1]+" ")&&(e=d.replace(c[0],c[2].toLowerCase()),f[e]=d,"o"===c[1]&&B(a[d]))}),a._hungarianMap=f}function C(a,b,e){a._hungarianMap||B(a);var f;d.each(b,function(g){f=a._hungarianMap[g],f===c||!e&&b[f]!==c||("o"===f.charAt(0)?(b[f]||(b[f]={}),d.extend(!0,b[f],b[g]),C(a[f],b[f],e)):b[f]=b[g])})}function D(a){var d,b=e.defaults.oLanguage,c=a.sZeroRecords;!a.sEmptyTable&&c&&"No data available in table"===b.sEmptyTable&&mc(a,a,"sZeroRecords","sEmptyTable"),!a.sLoadingRecords&&c&&"Loading..."===b.sLoadingRecords&&mc(a,a,"sZeroRecords","sLoadingRecords"),a.sInfoThousands&&(a.sThousands=a.sInfoThousands),d=a.sDecimal,d&&Sc(d)}function F(a){var b,c,d;if(E(a,"ordering","bSort"),E(a,"orderMulti","bSortMulti"),E(a,"orderClasses","bSortClasses"),E(a,"orderCellsTop","bSortCellsTop"),E(a,"order","aaSorting"),E(a,"orderFixed","aaSortingFixed"),E(a,"paging","bPaginate"),E(a,"pagingType","sPaginationType"),E(a,"pageLength","iDisplayLength"),E(a,"searching","bFilter"),b=a.aoSearchCols)for(c=0,d=b.length;d>c;c++)b[c]&&C(e.models.oSearch,b[c])}function G(a){E(a,"orderable","bSortable"),E(a,"orderData","aDataSort"),E(a,"orderSequence","asSorting"),E(a,"orderDataType","sortDataType")}function H(a){var b=a.oBrowser,c=d("<div/>").css({position:"absolute",top:0,left:0,height:1,width:1,overflow:"hidden"}).append(d("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(d('<div class="test"/>').css({width:"100%",height:10}))).appendTo("body"),e=c.find(".test");b.bScrollOversize=100===e[0].offsetWidth,b.bScrollbarLeft=1!==e.offset().left,c.remove()}function I(a,b,d,e,f,g){var i,h=e,j=!1;for(d!==c&&(i=d,j=!0);h!==f;)a.hasOwnProperty(h)&&(i=j?b(i,a[h],h,a):a[h],j=!0,h+=g);return i}function J(a,c){var i,f=e.defaults.column,g=a.aoColumns.length,h=d.extend({},e.models.oColumn,f,{nTh:c?c:b.createElement("th"),sTitle:f.sTitle?f.sTitle:c?c.innerHTML:"",aDataSort:f.aDataSort?f.aDataSort:[g],mData:f.mData?f.mData:g,idx:g});a.aoColumns.push(h),i=a.aoPreSearchCols,i[g]=d.extend({},e.models.oSearch,i[g]),K(a,g,null)}function K(a,b,f){var j,k,l,m,n,o,p,g=a.aoColumns[b],h=a.oClasses,i=d(g.nTh);g.sWidthOrig||(g.sWidthOrig=i.attr("width")||null,j=(i.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/),j&&(g.sWidthOrig=j[1])),f!==c&&null!==f&&(G(f),C(e.defaults.column,f),f.mDataProp===c||f.mData||(f.mData=f.mDataProp),f.sType&&(g._sManualType=f.sType),f.className&&!f.sClass&&(f.sClass=f.className),d.extend(g,f),mc(g,f,"sWidth","sWidthOrig"),"number"==typeof f.iDataSort&&(g.aDataSort=[f.iDataSort]),mc(g,f,"aDataSort")),k=g.mData,l=_(k),m=g.mRender?_(g.mRender):null,n=function(a){return"string"==typeof a&&-1!==a.indexOf("@")},g._bAttrSrc=d.isPlainObject(k)&&(n(k.sort)||n(k.type)||n(k.filter)),g.fnGetData=function(a,b,d){var e=l(a,b,c,d);return m&&b?m(e,b,a,d):e},g.fnSetData=function(a,b,c){return ab(k)(a,b,c)},a.oFeatures.bSort||(g.bSortable=!1,i.addClass(h.sSortableNone)),o=-1!==d.inArray("asc",g.asSorting),p=-1!==d.inArray("desc",g.asSorting),g.bSortable&&(o||p)?o&&!p?(g.sSortingClass=h.sSortableAsc,g.sSortingClassJUI=h.sSortJUIAscAllowed):!o&&p?(g.sSortingClass=h.sSortableDesc,g.sSortingClassJUI=h.sSortJUIDescAllowed):(g.sSortingClass=h.sSortable,g.sSortingClassJUI=h.sSortJUI):(g.sSortingClass=h.sSortableNone,g.sSortingClassJUI="")}function L(a){var b,c,d,e;if(a.oFeatures.bAutoWidth!==!1)for(b=a.aoColumns,Vb(a),c=0,d=b.length;d>c;c++)b[c].nTh.style.width=b[c].sWidth;e=a.oScroll,(""!==e.sY||""!==e.sX)&&Sb(a),qc(a,null,"column-sizing",[a])}function M(a,b){var c=P(a,"bVisible");return"number"==typeof c[b]?c[b]:null}function N(a,b){var c=P(a,"bVisible"),e=d.inArray(b,c);return-1!==e?e:null}function O(a){return P(a,"bVisible").length}function P(a,b){var c=[];return d.map(a.aoColumns,function(a,d){a[b]&&c.push(d)}),c}function Q(a){var g,h,i,j,k,l,m,o,p,b=a.aoColumns,d=a.aoData,f=e.ext.type.detect;for(g=0,h=b.length;h>g;g++)if(m=b[g],p=[],!m.sType&&m._sManualType)m.sType=m._sManualType;else if(!m.sType){for(i=0,j=f.length;j>i;i++){for(k=0,l=d.length;l>k&&(p[k]===c&&(p[k]=W(a,k,g,"type")),o=f[i](p[k],a),o&&"html"!==o);k++);if(o){m.sType=o;break}}m.sType||(m.sType="string")}}function R(a,b,e,f){var g,h,i,j,k,l,m,o,n=a.aoColumns;if(b)for(g=b.length-1;g>=0;g--)for(m=b[g],o=m.targets!==c?m.targets:m.aTargets,d.isArray(o)||(o=[o]),i=0,j=o.length;j>i;i++)if("number"==typeof o[i]&&o[i]>=0){for(;n.length<=o[i];)J(a);f(o[i],m)}else if("number"==typeof o[i]&&o[i]<0)f(n.length+o[i],m);else if("string"==typeof o[i])for(k=0,l=n.length;l>k;k++)("_all"==o[i]||d(n[k].nTh).hasClass(o[i]))&&f(k,m);if(e)for(g=0,h=e.length;h>g;g++)f(g,e[g])}function S(a,b,c,f){var k,l,m,g=a.aoData.length,h=d.extend(!0,{},e.models.oRow,{src:c?"dom":"data"});for(h._aData=b,a.aoData.push(h),k=a.aoColumns,l=0,m=k.length;m>l;l++)c&&X(a,g,l,W(a,g,l)),k[l].sType=null;return a.aiDisplayMaster.push(g),(c||!a.oFeatures.bDeferRender)&&gb(a,g,c,f),g}function T(a,b){var c;return b instanceof d||(b=d(b)),b.map(function(b,d){return c=fb(a,d),S(a,c.data,d,c.cells)})}function U(a,b){return b._DT_RowIndex!==c?b._DT_RowIndex:null}function V(a,b,c){return d.inArray(c,a.aoData[b].anCells)}function W(a,b,d,e){var f=a.iDraw,g=a.aoColumns[d],h=a.aoData[b]._aData,i=g.sDefaultContent,j=g.fnGetData(h,e,{settings:a,row:b,col:d});if(j===c)return a.iDrawError!=f&&null===i&&(lc(a,0,"Requested unknown parameter "+("function"==typeof g.mData?"{function}":"'"+g.mData+"'")+" for row "+b,4),a.iDrawError=f),i;if(j!==h&&null!==j||null===i){if("function"==typeof j)return j.call(h)}else j=i;return null===j&&"display"==e?"":j}function X(a,b,c,d){var e=a.aoColumns[c],f=a.aoData[b]._aData;e.fnSetData(f,d,{settings:a,row:b,col:c})}function $(a){return d.map(a.match(/(\\.|[^\.])+/g),function(a){return a.replace(/\\./g,".")})}function _(a){var b,e;return d.isPlainObject(a)?(b={},d.each(a,function(a,c){c&&(b[a]=_(c))}),function(a,d,e,f){var g=b[d]||b._;return g!==c?g(a,d,e,f):a}):null===a?function(a){return a}:"function"==typeof a?function(b,c,d,e){return a(b,c,d,e)}:"string"!=typeof a||-1===a.indexOf(".")&&-1===a.indexOf("[")&&-1===a.indexOf("(")?function(b){return b[a]}:(e=function(a,b,d){var f,g,h,i,j,k,l,m,n,o;if(""!==d)for(j=$(d),k=0,l=j.length;l>k;k++){if(f=j[k].match(Y),g=j[k].match(Z),f){for(j[k]=j[k].replace(Y,""),""!==j[k]&&(a=a[j[k]]),h=[],j.splice(0,k+1),i=j.join("."),m=0,n=a.length;n>m;m++)h.push(e(a[m],b,i));o=f[0].substring(1,f[0].length-1),a=""===o?h:h.join(o);break}if(g)j[k]=j[k].replace(Z,""),a=a[j[k]]();else{if(null===a||a[j[k]]===c)return c;a=a[j[k]]}}return a},function(b,c){return e(b,c,a)})}function ab(a){if(d.isPlainObject(a))return ab(a._);if(null===a)return function(){};if("function"==typeof a)return function(b,c,d){a(b,"set",c,d)};if("string"!=typeof a||-1===a.indexOf(".")&&-1===a.indexOf("[")&&-1===a.indexOf("("))return function(b,c){b[a]=c};var b=function(a,d,e){var g,i,j,k,l,m,n,o,p,f=$(e),h=f[f.length-1];for(m=0,n=f.length-1;n>m;m++){if(i=f[m].match(Y),j=f[m].match(Z),i){for(f[m]=f[m].replace(Y,""),a[f[m]]=[],g=f.slice(),g.splice(0,m+1),l=g.join("."),o=0,p=d.length;p>o;o++)k={},b(k,d[o],l),a[f[m]].push(k);return}j&&(f[m]=f[m].replace(Z,""),a=a[f[m]](d)),(null===a[f[m]]||a[f[m]]===c)&&(a[f[m]]={}),a=a[f[m]]}h.match(Z)?a=a[h.replace(Z,"")](d):a[h.replace(Y,"")]=d};return function(c,d){return b(c,d,a)}}function bb(a){return w(a.aoData,"_aData")}function cb(a){a.aoData.length=0,a.aiDisplayMaster.length=0,a.aiDisplay.length=0}function db(a,b,d){var f,g,e=-1;for(f=0,g=a.length;g>f;f++)a[f]==b?e=f:a[f]>b&&a[f]--;-1!=e&&d===c&&a.splice(e,1)}function eb(a,b,d,e){var g,h,i,j,k,f=a.aoData[b];if("dom"!==d&&(d&&"auto"!==d||"dom"!==f.src)){if(i=f.anCells)for(g=0,h=i.length;h>g;g++){for(j=i[g];j.childNodes.length;)j.removeChild(j.firstChild);i[g].innerHTML=W(a,b,g,"display")}}else f._aData=fb(a,f).data;if(f._aSortData=null,f._aFilterData=null,k=a.aoColumns,e!==c)k[e].sType=null;else for(g=0,h=k.length;h>g;g++)k[g].sType=null;hb(f)}function fb(a,b){var g,h,i,k,o,p,c=[],e=[],f=b.firstChild,j=0,l=a.aoColumns,m=function(a,b,c){var d,e;"string"==typeof a&&(d=a.indexOf("@"),-1!==d&&(e=a.substring(d+1),i["@"+e]=c.getAttribute(e)))},n=function(a){h=l[j],k=d.trim(a.innerHTML),h&&h._bAttrSrc?(i={display:k},m(h.mData.sort,i,a),m(h.mData.type,i,a),m(h.mData.filter,i,a),c.push(i)):c.push(k),j++};if(f)for(;f;)g=f.nodeName.toUpperCase(),("TD"==g||"TH"==g)&&(n(f),e.push(f)),f=f.nextSibling;else for(e=b.anCells,o=0,p=e.length;p>o;o++)n(e[o]);return{data:c,cells:e}}function gb(a,c,d,e){var i,j,k,l,m,f=a.aoData[c],g=f._aData,h=[];if(null===f.nTr){for(i=d||b.createElement("tr"),f.nTr=i,f.anCells=h,i._DT_RowIndex=c,hb(f),l=0,m=a.aoColumns.length;m>l;l++)k=a.aoColumns[l],j=d?e[l]:b.createElement(k.sCellType),h.push(j),(!d||k.mRender||k.mData!==l)&&(j.innerHTML=W(a,c,l,"display")),k.sClass&&(j.className+=" "+k.sClass),k.bVisible&&!d?i.appendChild(j):!k.bVisible&&d&&j.parentNode.removeChild(j),k.fnCreatedCell&&k.fnCreatedCell.call(a.oInstance,j,W(a,c,l),g,c,l);qc(a,"aoRowCreatedCallback",null,[i,g,c])}f.nTr.setAttribute("role","row")}function hb(a){var e,b=a.nTr,c=a._aData;b&&(c.DT_RowId&&(b.id=c.DT_RowId),c.DT_RowClass&&(e=c.DT_RowClass.split(" "),a.__rowc=a.__rowc?A(a.__rowc.concat(e)):e,d(b).removeClass(a.__rowc.join(" ")).addClass(c.DT_RowClass)),c.DT_RowData&&d(b).data(c.DT_RowData))}function ib(a){var b,c,e,f,g,m,h=a.nTHead,i=a.nTFoot,j=0===d("th, td",h).length,k=a.oClasses,l=a.aoColumns;for(j&&(f=d("<tr/>").appendTo(h)),b=0,c=l.length;c>b;b++)g=l[b],e=d(g.nTh).addClass(g.sClass),j&&e.appendTo(f),a.oFeatures.bSort&&(e.addClass(g.sSortingClass),g.bSortable!==!1&&(e.attr("tabindex",a.iTabIndex).attr("aria-controls",a.sTableId),fc(a,g.nTh,b))),g.sTitle!=e.html()&&e.html(g.sTitle),sc(a,"header")(a,e,g,k);if(j&&nb(a.aoHeader,h),d(h).find(">tr").attr("role","row"),d(h).find(">tr>th, >tr>td").addClass(k.sHeaderTH),d(i).find(">tr>th, >tr>td").addClass(k.sFooterTH),null!==i)for(m=a.aoFooter[0],b=0,c=m.length;c>b;b++)g=l[b],g.nTf=m[b].cell,g.sClass&&d(g.nTf).addClass(g.sClass)}function jb(a,b,e){var f,g,h,i,j,l,m,q,r,n=[],o=[],p=a.aoColumns.length;if(b){for(e===c&&(e=!1),f=0,g=b.length;g>f;f++){for(n[f]=b[f].slice(),n[f].nTr=b[f].nTr,h=p-1;h>=0;h--)a.aoColumns[h].bVisible||e||n[f].splice(h,1);o.push([])}for(f=0,g=n.length;g>f;f++){if(m=n[f].nTr)for(;l=m.firstChild;)m.removeChild(l);for(h=0,i=n[f].length;i>h;h++)if(q=1,r=1,o[f][h]===c){for(m.appendChild(n[f][h].cell),o[f][h]=1;n[f+q]!==c&&n[f][h].cell==n[f+q][h].cell;)o[f+q][h]=1,q++;for(;n[f][h+r]!==c&&n[f][h].cell==n[f][h+r].cell;){for(j=0;q>j;j++)o[f+j][h+r]=1;r++}d(n[f][h].cell).attr("rowspan",q).attr("colspan",r)}}}}function kb(a){var h,i,j,k,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,b=qc(a,"aoPreDrawCallback","preDraw",[a]);if(-1!==d.inArray(!1,b))return Qb(a,!1),void 0;if(h=[],i=0,j=a.asStripeClasses,k=j.length,a.aoOpenRows.length,m=a.oLanguage,n=a.iInitDisplayStart,o="ssp"==tc(a),p=a.aiDisplay,a.bDrawing=!0,n!==c&&-1!==n&&(a._iDisplayStart=o?n:n>=a.fnRecordsDisplay()?0:n,a.iInitDisplayStart=-1),q=a._iDisplayStart,r=a.fnDisplayEnd(),a.bDeferLoading)a.bDeferLoading=!1,a.iDraw++,Qb(a,!1);else if(o){if(!a.bDestroying&&!qb(a))return}else a.iDraw++;if(0!==p.length)for(s=o?0:q,t=o?a.aoData.length:r,u=s;t>u;u++)v=p[u],w=a.aoData[v],null===w.nTr&&gb(a,v),x=w.nTr,0!==k&&(y=j[i%k],w._sRowStripe!=y&&(d(x).removeClass(w._sRowStripe).addClass(y),w._sRowStripe=y)),qc(a,"aoRowCallback",null,[x,w._aData,i,u]),h.push(x),i++;else z=m.sZeroRecords,1==a.iDraw&&"ajax"==tc(a)?z=m.sLoadingRecords:m.sEmptyTable&&0===a.fnRecordsTotal()&&(z=m.sEmptyTable),h[0]=d("<tr/>",{"class":k?j[0]:""}).append(d("<td />",{valign:"top",colSpan:O(a),"class":a.oClasses.sRowEmpty}).html(z))[0];qc(a,"aoHeaderCallback","header",[d(a.nTHead).children("tr")[0],bb(a),q,r,p]),qc(a,"aoFooterCallback","footer",[d(a.nTFoot).children("tr")[0],bb(a),q,r,p]),A=d(a.nTBody),A.children().detach(),A.append(d(h)),qc(a,"aoDrawCallback","draw",[a]),a.bSorted=!1,a.bFiltered=!1,a.bDrawing=!1}function lb(a,b){var c=a.oFeatures,d=c.bSort,e=c.bFilter;d&&cc(a),e?vb(a,a.oPreviousSearch):a.aiDisplay=a.aiDisplayMaster.slice(),b!==!0&&(a._iDisplayStart=0),a._drawHold=b,kb(a),a._drawHold=!1}function mb(a){var i,j,k,l,m,n,o,p,q,r,s,t,u,b=a.oClasses,c=d(a.nTable),f=d("<div/>").insertBefore(c),g=a.oFeatures,h=d("<div/>",{id:a.sTableId+"_wrapper","class":b.sWrapper+(a.nTFoot?"":" "+b.sNoFooter)});for(a.nHolding=f[0],a.nTableWrapper=h[0],a.nTableReinsertBefore=a.nTable.nextSibling,i=a.sDom.split(""),p=0;p<i.length;p++){if(j=null,k=i[p],"<"==k){if(l=d("<div/>")[0],m=i[p+1],"'"==m||'"'==m){for(n="",o=2;i[p+o]!=m;)n+=i[p+o],o++;"H"==n?n=b.sJUIHeader:"F"==n&&(n=b.sJUIFooter),-1!=n.indexOf(".")?(q=n.split("."),l.id=q[0].substr(1,q[0].length-1),l.className=q[1]):"#"==n.charAt(0)?l.id=n.substr(1,n.length-1):l.className=n,p+=o}h.append(l),h=d(l)}else if(">"==k)h=h.parent();else if("l"==k&&g.bPaginate&&g.bLengthChange)j=Mb(a);else if("f"==k&&g.bFilter)j=ub(a);else if("r"==k&&g.bProcessing)j=Pb(a);else if("t"==k)j=Rb(a);else if("i"==k&&g.bInfo)j=Gb(a);else if("p"==k&&g.bPaginate)j=Nb(a);else if(0!==e.ext.feature.length)for(r=e.ext.feature,s=0,t=r.length;t>s;s++)if(k==r[s].cFeature){j=r[s].fnInit(a);break}j&&(u=a.aanFeatures,u[k]||(u[k]=[]),u[k].push(j),h.append(j))}f.replaceWith(h)}function nb(a,b){var e,f,g,h,i,j,l,m,n,o,p,c=d(b).children("tr"),q=function(a,b,c){for(var d=a[b];d[c];)c++;return c};for(a.splice(0,a.length),g=0,j=c.length;j>g;g++)a.push([]);for(g=0,j=c.length;j>g;g++)for(e=c[g],m=0,f=e.firstChild;f;){if("TD"==f.nodeName.toUpperCase()||"TH"==f.nodeName.toUpperCase())for(n=1*f.getAttribute("colspan"),o=1*f.getAttribute("rowspan"),n=n&&0!==n&&1!==n?n:1,o=o&&0!==o&&1!==o?o:1,l=q(a,g,m),p=1===n?!0:!1,i=0;n>i;i++)for(h=0;o>h;h++)a[g+h][l+i]={cell:f,unique:p},a[g+h].nTr=e;f=f.nextSibling}}function ob(a,b,c){var e,f,g,h,d=[];for(c||(c=a.aoHeader,b&&(c=[],nb(c,b))),e=0,f=c.length;f>e;e++)for(g=0,h=c[e].length;h>g;g++)!c[e][g].unique||d[g]&&a.bSortCellsTop||(d[g]=c[e][g].cell);return d}function pb(a,b,c){var e,f,g,h,i,j,k;qc(a,"aoServerParams","serverParams",[b]),b&&d.isArray(b)&&(e={},f=/(.*?)\[\]$/,d.each(b,function(a,b){var d,c=b.name.match(f);c?(d=c[0],e[d]||(e[d]=[]),e[d].push(b.value)):e[b.name]=b.value}),b=e),h=a.ajax,i=a.oInstance,d.isPlainObject(h)&&h.data&&(g=h.data,j=d.isFunction(g)?g(b):g,b=d.isFunction(g)&&j?j:d.extend(!0,b,j),delete h.data),k={data:b,success:function(b){var d=b.error||b.sError;d&&a.oApi._fnLog(a,0,d),a.json=b,qc(a,null,"xhr",[a,b]),c(b)},dataType:"json",cache:!1,type:a.sServerMethod,error:function(b,c){var e=a.oApi._fnLog;"parsererror"==c?e(a,0,"Invalid JSON response",1):4===b.readyState&&e(a,0,"Ajax error",7),Qb(a,!1)}},a.oAjaxData=b,qc(a,null,"preXhr",[a,b]),a.fnServerData?a.fnServerData.call(i,a.sAjaxSource,d.map(b,function(a,b){return{name:b,value:a}}),c,a):a.sAjaxSource||"string"==typeof h?a.jqXHR=d.ajax(d.extend(k,{url:h||a.sAjaxSource})):d.isFunction(h)?a.jqXHR=h.call(i,b,c,a):(a.jqXHR=d.ajax(d.extend(k,h)),h.data=g)}function qb(a){return a.bAjaxDataGet?(a.iDraw++,Qb(a,!0),pb(a,rb(a),function(b){sb(a,b)}),!1):!0}function rb(a){var i,k,l,m,r,s,b=a.aoColumns,c=b.length,f=a.oFeatures,g=a.oPreviousSearch,h=a.aoPreSearchCols,j=[],n=bc(a),o=a._iDisplayStart,p=f.bPaginate!==!1?a._iDisplayLength:-1,q=function(a,b){j.push({name:a,value:b})};for(q("sEcho",a.iDraw),q("iColumns",c),q("sColumns",w(b,"sName").join(",")),q("iDisplayStart",o),q("iDisplayLength",p),r={draw:a.iDraw,columns:[],order:[],start:o,length:p,search:{value:g.sSearch,regex:g.bRegex}},i=0;c>i;i++)l=b[i],m=h[i],k="function"==typeof l.mData?"function":l.mData,r.columns.push({data:k,name:l.sName,searchable:l.bSearchable,orderable:l.bSortable,search:{value:m.sSearch,regex:m.bRegex}}),q("mDataProp_"+i,k),f.bFilter&&(q("sSearch_"+i,m.sSearch),q("bRegex_"+i,m.bRegex),q("bSearchable_"+i,l.bSearchable)),f.bSort&&q("bSortable_"+i,l.bSortable);return f.bFilter&&(q("sSearch",g.sSearch),q("bRegex",g.bRegex)),f.bSort&&(d.each(n,function(a,b){r.order.push({column:b.col,dir:b.dir}),q("iSortCol_"+a,b.col),q("sSortDir_"+a,b.dir)}),q("iSortingCols",n.length)),s=e.ext.legacy.ajax,null===s?a.sAjaxSource?j:r:s?j:r}function sb(a,b){var h,i,j,d=function(a,d){return b[a]!==c?b[a]:b[d]},e=d("sEcho","draw"),f=d("iTotalRecords","recordsTotal"),g=d("iTotalDisplayRecords","recordsFiltered");if(e){if(1*e<a.iDraw)return;a.iDraw=1*e}for(cb(a),a._iRecordsTotal=parseInt(f,10),a._iRecordsDisplay=parseInt(g,10),h=tb(a,b),i=0,j=h.length;j>i;i++)S(a,h[i]);a.aiDisplay=a.aiDisplayMaster.slice(),a.bAjaxDataGet=!1,kb(a),a._bInitComplete||Kb(a,b),a.bAjaxDataGet=!0,Qb(a,!1)}function tb(a,b){var e=d.isPlainObject(a.ajax)&&a.ajax.dataSrc!==c?a.ajax.dataSrc:a.sAjaxDataProp;return"data"===e?b.aaData||b[e]:""!==e?_(e)(b):b}function ub(a){var k,l,m,c=a.oClasses,e=a.sTableId,f=a.oLanguage,g=a.oPreviousSearch,h=a.aanFeatures,i='<input type="search" class="'+c.sFilterInput+'"/>',j=f.sSearch;return j=j.match(/_INPUT_/)?j.replace("_INPUT_",i):j+i,k=d("<div/>",{id:h.f?null:e+"_filter","class":c.sFilter}).append(d("<label/>").append(j)),l=function(){h.f;var c=this.value?this.value:"";c!=g.sSearch&&(vb(a,{sSearch:c,bRegex:g.bRegex,bSmart:g.bSmart,bCaseInsensitive:g.bCaseInsensitive}),a._iDisplayStart=0,kb(a))},m=d("input",k).val(g.sSearch).attr("placeholder",f.sSearchPlaceholder).bind("keyup.DT search.DT input.DT paste.DT cut.DT","ssp"===tc(a)?Wb(l,400):l).bind("keypress.DT",function(a){return 13==a.keyCode?!1:void 0}).attr("aria-controls",e),d(a.nTable).on("search.dt.DT",function(c,d){if(a===d)try{m[0]!==b.activeElement&&m.val(g.sSearch)}catch(e){}}),k[0]}function vb(a,b,d){var i,e=a.oPreviousSearch,f=a.aoPreSearchCols,g=function(a){e.sSearch=a.sSearch,e.bRegex=a.bRegex,e.bSmart=a.bSmart,e.bCaseInsensitive=a.bCaseInsensitive},h=function(a){return a.bEscapeRegex!==c?!a.bEscapeRegex:a.bRegex};if(Q(a),"ssp"!=tc(a)){for(yb(a,b.sSearch,d,h(b),b.bSmart,b.bCaseInsensitive),g(b),i=0;i<f.length;i++)xb(a,f[i].sSearch,i,h(f[i]),f[i].bSmart,f[i].bCaseInsensitive);wb(a)}else g(b);a.bFiltered=!0,qc(a,null,"search",[a])}function wb(a){var d,f,g,h,i,j,k,b=e.ext.search,c=a.aiDisplay;for(g=0,h=b.length;h>g;g++){for(i=[],j=0,k=c.length;k>j;j++)f=c[j],d=a.aoData[f],b[g](a,d._aFilterData,f,d._aData,j)&&i.push(f);c.length=0,c.push.apply(c,i)}}function xb(a,b,c,d,e,f){var g,h,i,j;if(""!==b)for(h=a.aiDisplay,i=zb(b,d,e,f),j=h.length-1;j>=0;j--)g=a.aoData[h[j]]._aFilterData[c],i.test(g)||h.splice(j,1)}function yb(a,b,c,d,f,g){var k,l,m,h=zb(b,d,f,g),i=a.oPreviousSearch.sSearch,j=a.aiDisplayMaster;if(0!==e.ext.search.length&&(c=!0),l=Db(a),b.length<=0)a.aiDisplay=j.slice();else for((l||c||i.length>b.length||0!==b.indexOf(i)||a.bSorted)&&(a.aiDisplay=j.slice()),k=a.aiDisplay,m=k.length-1;m>=0;m--)h.test(a.aoData[k[m]]._sFilterRow)||k.splice(m,1)}function zb(a,b,c,e){if(a=b?a:Ab(a),c){var f=d.map(a.match(/"[^"]+"|[^ ]+/g)||"",function(a){return'"'===a.charAt(0)?a.match(/^"(.*)"$/)[1]:a});a="^(?=.*?"+f.join(")(?=.*?")+").*$"}return new RegExp(a,e?"i":"")}function Ab(a){return a.replace(o,"\\$1")}function Db(a){var c,d,f,g,h,i,j,k,b=a.aoColumns,l=e.ext.type.search,m=!1;for(d=0,g=a.aoData.length;g>d;d++)if(k=a.aoData[d],!k._aFilterData){for(i=[],f=0,h=b.length;h>f;f++)c=b[f],c.bSearchable?(j=W(a,d,f,"filter"),l[c.sType]&&(j=l[c.sType](j)),null===j&&(j=""),"string"!=typeof j&&j.toString&&(j=j.toString())):j="",j.indexOf&&-1!==j.indexOf("&")&&(Bb.innerHTML=j,j=Cb?Bb.textContent:Bb.innerText),j.replace&&(j=j.replace(/[\r\n]/g,"")),i.push(j);k._aFilterData=i,k._sFilterRow=i.join("  "),m=!0}return m}function Eb(a){return{search:a.sSearch,smart:a.bSmart,regex:a.bRegex,caseInsensitive:a.bCaseInsensitive}}function Fb(a){return{sSearch:a.search,bSmart:a.smart,bRegex:a.regex,bCaseInsensitive:a.caseInsensitive}}function Gb(a){var b=a.sTableId,c=a.aanFeatures.i,e=d("<div/>",{"class":a.oClasses.sInfo,id:c?null:b+"_info"});return c||(a.aoDrawCallback.push({fn:Hb,sName:"information"}),e.attr("role","status").attr("aria-live","polite"),d(a.nTable).attr("aria-describedby",b+"_info")),e[0]}function Hb(a){var c,e,f,g,h,i,j,b=a.aanFeatures.i;0!==b.length&&(c=a.oLanguage,e=a._iDisplayStart+1,f=a.fnDisplayEnd(),g=a.fnRecordsTotal(),h=a.fnRecordsDisplay(),i=h?c.sInfo:c.sInfoEmpty,h!==g&&(i+=" "+c.sInfoFiltered),i+=c.sInfoPostFix,i=Ib(a,i),j=c.fnInfoCallback,null!==j&&(i=j.call(a.oInstance,a,e,f,g,h,i)),d(b).html(i))}function Ib(a,b){var c=a.fnFormatNumber,d=a._iDisplayStart+1,e=a._iDisplayLength,f=a.fnRecordsDisplay(),g=-1===e;return b.replace(/_START_/g,c.call(a,d)).replace(/_END_/g,c.call(a,a.fnDisplayEnd())).replace(/_MAX_/g,c.call(a,a.fnRecordsTotal())).replace(/_TOTAL_/g,c.call(a,f)).replace(/_PAGE_/g,c.call(a,g?1:Math.ceil(d/e))).replace(/_PAGES_/g,c.call(a,g?1:Math.ceil(f/e)))}function Jb(a){var b,c,f,h,d=a.iInitDisplayStart,e=a.aoColumns,g=a.oFeatures;if(!a.bInitialised)return setTimeout(function(){Jb(a)},200),void 0;for(mb(a),ib(a),jb(a,a.aoHeader),jb(a,a.aoFooter),Qb(a,!0),g.bAutoWidth&&Vb(a),b=0,c=e.length;c>b;b++)f=e[b],f.sWidth&&(f.nTh.style.width=_b(f.sWidth));lb(a),h=tc(a),"ssp"!=h&&("ajax"==h?pb(a,[],function(c){var e=tb(a,c);for(b=0;b<e.length;b++)S(a,e[b]);a.iInitDisplayStart=d,lb(a),Qb(a,!1),Kb(a,c)},a):(Qb(a,!1),Kb(a)))}function Kb(a,b){a._bInitComplete=!0,b&&L(a),qc(a,"aoInitComplete","init",[a,b])}function Lb(a,b){var c=parseInt(b,10);a._iDisplayLength=c,rc(a),qc(a,null,"length",[a,c])}function Mb(a){var j,k,l,b=a.oClasses,c=a.sTableId,e=a.aLengthMenu,f=d.isArray(e[0]),g=f?e[0]:e,h=f?e[1]:e,i=d("<select/>",{name:c+"_length","aria-controls":c,"class":b.sLengthSelect});for(j=0,k=g.length;k>j;j++)i[0][j]=new Option(h[j],g[j]);return l=d("<div><label/></div>").addClass(b.sLength),a.aanFeatures.l||(l[0].id=c+"_length"),l.children().append(a.oLanguage.sLengthMenu.replace("_MENU_",i[0].outerHTML)),d("select",l).val(a._iDisplayLength).bind("change.DT",function(){Lb(a,d(this).val()),kb(a)}),d(a.nTable).bind("length.dt.DT",function(b,c,e){a===c&&d("select",l).val(e)}),l[0]}function Nb(a){var b=a.sPaginationType,c=e.ext.pager[b],f="function"==typeof c,g=function(a){kb(a)},h=d("<div/>").addClass(a.oClasses.sPaging+b)[0],i=a.aanFeatures;return f||c.fnInit(a,h,g),i.p||(h.id=a.sTableId+"_paginate",a.aoDrawCallback.push({fn:function(a){if(f){var m,n,b=a._iDisplayStart,d=a._iDisplayLength,e=a.fnRecordsDisplay(),h=-1===d,j=h?0:Math.ceil(b/d),k=h?1:Math.ceil(e/d),l=c(j,k);for(m=0,n=i.p.length;n>m;m++)sc(a,"pageButton")(a,i.p[m],m,l,j,k)}else c.fnUpdate(a,g)},sName:"pagination"})),h}function Ob(a,b,c){var g,d=a._iDisplayStart,e=a._iDisplayLength,f=a.fnRecordsDisplay();return 0===f||-1===e?d=0:"number"==typeof b?(d=b*e,d>f&&(d=0)):"first"==b?d=0:"previous"==b?(d=e>=0?d-e:0,0>d&&(d=0)):"next"==b?f>d+e&&(d+=e):"last"==b?d=Math.floor((f-1)/e)*e:lc(a,0,"Unknown paging action: "+b,5),g=a._iDisplayStart!==d,a._iDisplayStart=d,g&&(qc(a,null,"page",[a]),c&&kb(a)),g}function Pb(a){return d("<div/>",{id:a.aanFeatures.r?null:a.sTableId+"_processing","class":a.oClasses.sProcessing}).html(a.oLanguage.sProcessing).insertBefore(a.nTable)[0]}function Qb(a,b){a.oFeatures.bProcessing&&d(a.aanFeatures.r).css("display",b?"block":"none"),qc(a,null,"processing",[a,b])}function Rb(a){var c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,b=d(a.nTable);return b.attr("role","grid"),c=a.oScroll,""===c.sX&&""===c.sY?a.nTable:(e=c.sX,f=c.sY,g=a.oClasses,h=b.children("caption"),i=h.length?h[0]._captionSide:null,j=d(b[0].cloneNode(!1)),k=d(b[0].cloneNode(!1)),l=b.children("tfoot"),m="<div/>",n=function(a){return a?_b(a):null},c.sX&&"100%"===b.attr("width")&&b.removeAttr("width"),l.length||(l=null),o=d(m,{"class":g.sScrollWrapper}).append(d(m,{"class":g.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:e?n(e):"100%"}).append(d(m,{"class":g.sScrollHeadInner}).css({"box-sizing":"content-box",width:c.sXInner||"100%"}).append(j.removeAttr("id").css("margin-left",0).append(b.children("thead")))).append("top"===i?h:null)).append(d(m,{"class":g.sScrollBody}).css({overflow:"auto",height:n(f),width:n(e)}).append(b)),l&&o.append(d(m,{"class":g.sScrollFoot}).css({overflow:"hidden",border:0,width:e?n(e):"100%"}).append(d(m,{"class":g.sScrollFootInner}).append(k.removeAttr("id").css("margin-left",0).append(b.children("tfoot")))).append("bottom"===i?h:null)),p=o.children(),q=p[0],r=p[1],s=l?p[2]:null,e&&d(r).scroll(function(){var b=this.scrollLeft;q.scrollLeft=b,l&&(s.scrollLeft=b)}),a.nScrollHead=q,a.nScrollBody=r,a.nScrollFoot=s,a.aoDrawCallback.push({fn:Sb,sName:"scrolling"}),o[0])}function Sb(a){var z,A,B,C,D,E,I,J,K,N,O,P,Q,b=a.oScroll,c=b.sX,e=b.sXInner,f=b.sY,g=b.iBarWidth,h=d(a.nScrollHead),i=h[0].style,j=h.children("div"),k=j[0].style,l=j.children("table"),m=a.nScrollBody,n=d(m),o=m.style,p=d(a.nScrollFoot),q=p.children("div"),r=q.children("table"),s=d(a.nTHead),t=d(a.nTable),u=t[0],v=u.style,w=a.nTFoot?d(a.nTFoot):null,x=a.oBrowser,y=x.bScrollOversize,F=[],G=[],H=[],L=function(a){var b=a.style;b.paddingTop="0",b.paddingBottom="0",b.borderTopWidth="0",b.borderBottomWidth="0",b.height=0};t.children("thead, tfoot").remove(),D=s.clone().prependTo(t),z=s.find("tr"),B=D.find("tr"),D.find("th, td").removeAttr("tabindex"),w&&(E=w.clone().prependTo(t),A=w.find("tr"),C=E.find("tr")),c||(o.width="100%",h[0].style.width="100%"),d.each(ob(a,D),function(b,c){I=M(a,b),c.style.width=a.aoColumns[I].sWidth}),w&&Tb(function(a){a.style.width=""},C),b.bCollapse&&""!==f&&(o.height=n[0].offsetHeight+s[0].offsetHeight+"px"),K=t.outerWidth(),""===c?(v.width="100%",y&&(t.find("tbody").height()>m.offsetHeight||"scroll"==n.css("overflow-y"))&&(v.width=_b(t.outerWidth()-g))):""!==e?v.width=_b(e):K==n.width()&&n.height()<t.height()?(v.width=_b(K-g),t.outerWidth()>K-g&&(v.width=_b(K))):v.width=_b(K),K=t.outerWidth(),Tb(L,B),Tb(function(a){H.push(a.innerHTML),F.push(_b(d(a).css("width")))},B),Tb(function(a,b){a.style.width=F[b]},z),d(B).height(0),w&&(Tb(L,C),Tb(function(a){G.push(_b(d(a).css("width")))},C),Tb(function(a,b){a.style.width=G[b]},A),d(C).height(0)),Tb(function(a,b){a.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+H[b]+"</div>",a.style.width=F[b]},B),w&&Tb(function(a,b){a.innerHTML="",a.style.width=G[b]},C),t.outerWidth()<K?(J=m.scrollHeight>m.offsetHeight||"scroll"==n.css("overflow-y")?K+g:K,y&&(m.scrollHeight>m.offsetHeight||"scroll"==n.css("overflow-y"))&&(v.width=_b(J-g)),(""===c||""!==e)&&lc(a,1,"Possible column misalignment",6)):J="100%",o.width=_b(J),i.width=_b(J),w&&(a.nScrollFoot.style.width=_b(J)),f||y&&(o.height=_b(u.offsetHeight+g)),f&&b.bCollapse&&(o.height=_b(f),N=c&&u.offsetWidth>m.offsetWidth?g:0,u.offsetHeight<m.offsetHeight&&(o.height=_b(u.offsetHeight+N))),O=t.outerWidth(),l[0].style.width=_b(O),k.width=_b(O),P=t.height()>m.clientHeight||"scroll"==n.css("overflow-y"),Q="padding"+(x.bScrollbarLeft?"Left":"Right"),k[Q]=P?g+"px":"0px",w&&(r[0].style.width=_b(O),q[0].style.width=_b(O),q[0].style[Q]=P?g+"px":"0px"),n.scroll(),!a.bSorted&&!a.bFiltered||a._drawHold||(m.scrollTop=0)}function Tb(a,b,c){for(var g,h,d=0,e=0,f=b.length;f>e;){for(g=b[e].firstChild,h=c?c[e].firstChild:null;g;)1===g.nodeType&&(c?a(g,h,d):a(g,d),d++),g=g.nextSibling,h=c?h.nextSibling:null;e++}}function Vb(b){var p,q,r,s,t,u,v,w,c=b.nTable,e=b.aoColumns,f=b.oScroll,g=f.sY,h=f.sX,i=f.sXInner,j=e.length,k=P(b,"bVisible"),l=d("th",b.nTHead),m=c.getAttribute("width"),n=c.parentNode,o=!1;for(p=0;p<k.length;p++)q=e[k[p]],null!==q.sWidth&&(q.sWidth=Xb(q.sWidthOrig,n),o=!0);if(o||h||g||j!=O(b)||j!=l.length){for(u=d(c).clone().empty().css("visibility","hidden").removeAttr("id").append(d(b.nTHead).clone(!1)).append(d(b.nTFoot).clone(!1)).append(d("<tbody><tr/></tbody>")),u.find("tfoot th, tfoot td").css("width",""),v=u.find("tbody tr"),l=ob(b,u.find("thead")[0]),p=0;p<k.length;p++)q=e[k[p]],l[p].style.width=null!==q.sWidthOrig&&""!==q.sWidthOrig?_b(q.sWidthOrig):"";if(b.aoData.length)for(p=0;p<k.length;p++)r=k[p],q=e[r],d(Zb(b,r)).clone(!1).append(q.sContentPadding).appendTo(v);if(u.appendTo(n),h&&i?u.width(i):h?(u.css("width","auto"),u.width()<n.offsetWidth&&u.width(n.offsetWidth)):g?u.width(n.offsetWidth):m&&u.width(m),Yb(b,u[0]),h){for(w=0,p=0;p<k.length;p++)q=e[k[p]],t=d(l[p]).outerWidth(),w+=null===q.sWidthOrig?t:parseInt(q.sWidth,10)+t-d(l[p]).width();u.width(_b(w)),c.style.width=_b(w)}for(p=0;p<k.length;p++)q=e[k[p]],s=d(l[p]).width(),s&&(q.sWidth=_b(s));c.style.width=_b(u.css("width")),u.remove()}else for(p=0;j>p;p++)e[p].sWidth=_b(l.eq(p).width());m&&(c.style.width=_b(m)),!m&&!h||b._reszEvt||(d(a).bind("resize.DT-"+b.sInstance,Wb(function(){L(b)})),b._reszEvt=!0)}function Wb(a,b){var e,f,d=b||200;return function(){var b=this,g=+new Date,h=arguments;e&&e+d>g?(clearTimeout(f),f=setTimeout(function(){e=c,a.apply(b,h)},d)):e?(e=g,a.apply(b,h)):e=g}}function Xb(a,c){var e,f;return a?(e=d("<div/>").css("width",_b(a)).appendTo(c||b.body),f=e[0].offsetWidth,e.remove(),f):0}function Yb(a,b){var e,c=a.oScroll;(c.sX||c.sY)&&(e=c.sX?0:c.iBarWidth,b.style.width=_b(d(b).outerWidth()-e))}function Zb(a,b){var e,c=$b(a,b);return 0>c?null:(e=a.aoData[c],e.nTr?e.anCells[b]:d("<td/>").html(W(a,c,b,"display"))[0])}function $b(a,b){var c,f,g,d=-1,e=-1;for(f=0,g=a.aoData.length;g>f;f++)c=W(a,f,b,"display")+"",c=c.replace(Ub,""),c.length>d&&(d=c.length,e=f);return e}function _b(a){return null===a?"0px":"number"==typeof a?0>a?"0px":a+"px":a.match(/\d$/)?a+"px":a}function ac(){var a,b,c,f;return e.__scrollbarWidth||(a=d("<p/>").css({width:"100%",height:200,padding:0})[0],b=d("<div/>").css({position:"absolute",top:0,left:0,width:200,height:150,padding:0,overflow:"hidden",visibility:"hidden"}).append(a).appendTo("body"),c=a.offsetWidth,b.css("overflow","scroll"),f=a.offsetWidth,c===f&&(f=b[0].clientWidth),b.remove(),e.__scrollbarWidth=c-f),e.__scrollbarWidth}function bc(a){var b,f,g,k,l,m,n,h=[],j=a.aoColumns,o=a.aaSortingFixed,p=d.isPlainObject(o),q=[],r=function(a){a.length&&!d.isArray(a[0])?q.push(a):q.push.apply(q,a)};for(d.isArray(o)&&r(o),p&&o.pre&&r(o.pre),r(a.aaSorting),p&&o.post&&r(o.post),b=0;b<q.length;b++)for(n=q[b][0],k=j[n].aDataSort,f=0,g=k.length;g>f;f++)l=k[f],m=j[l].sType||"string",h.push({src:n,col:l,dir:q[b][1],index:q[b][2],type:m,formatter:e.ext.type.order[m+"-pre"]});return h}function cc(a){var b,c,d,v,x,l=[],m=e.ext.type.order,n=a.aoData,u=(a.aoColumns,0),w=a.aiDisplayMaster;for(Q(a),x=bc(a),b=0,c=x.length;c>b;b++)v=x[b],v.formatter&&u++,hc(a,v.col);if("ssp"!=tc(a)&&0!==x.length){for(b=0,d=w.length;d>b;b++)l[w[b]]=b;u===x.length?w.sort(function(a,b){var c,d,e,f,g,h=x.length,i=n[a]._aSortData,j=n[b]._aSortData;for(e=0;h>e;e++)if(g=x[e],c=i[g.col],d=j[g.col],f=d>c?-1:c>d?1:0,0!==f)return"asc"===g.dir?f:-f;return c=l[a],d=l[b],d>c?-1:c>d?1:0}):w.sort(function(a,b){var c,d,e,g,h,i,j=x.length,k=n[a]._aSortData,o=n[b]._aSortData;for(e=0;j>e;e++)if(h=x[e],c=k[h.col],d=o[h.col],i=m[h.type+"-"+h.dir]||m["string-"+h.dir],g=i(c,d),0!==g)return g;return c=l[a],d=l[b],d>c?-1:c>d?1:0})}a.bSorted=!0}function dc(a){var b,c,g,h,i,j,k,l,d=a.aoColumns,e=bc(a),f=a.oLanguage.oAria;for(g=0,h=d.length;h>g;g++)i=d[g],j=i.asSorting,k=i.sTitle.replace(/<.*?>/g,""),l=i.nTh,l.removeAttribute("aria-sort"),i.bSortable?(e.length>0&&e[0].col==g?(l.setAttribute("aria-sort","asc"==e[0].dir?"ascending":"descending"),c=j[e[0].index+1]||j[0]):c=j[0],b=k+("asc"===c?f.sSortAscending:f.sSortDescending)):b=k,l.setAttribute("aria-label",b)}function ec(a,b,e,f){var j,l,g=a.aoColumns[b],h=a.aaSorting,i=g.asSorting,k=function(a){var b=a._idx;return b===c&&(b=d.inArray(a[1],i)),b+1>=i.length?0:b+1};"number"==typeof h[0]&&(h=a.aaSorting=[h]),e&&a.oFeatures.bSortMulti?(l=d.inArray(b,w(h,"0")),-1!==l?(j=k(h[l]),h[l][1]=i[j],h[l]._idx=j):(h.push([b,i[0],0]),h[h.length-1]._idx=0)):h.length&&h[0][0]==b?(j=k(h[0]),h.length=1,h[0][1]=i[j],h[0]._idx=j):(h.length=0,h.push([b,i[0]]),h[0]._idx=0),lb(a),"function"==typeof f&&f(a)
}function fc(a,b,c,d){var e=a.aoColumns[c];oc(b,{},function(b){e.bSortable!==!1&&(a.oFeatures.bProcessing?(Qb(a,!0),setTimeout(function(){ec(a,c,b.shiftKey,d),"ssp"!==tc(a)&&Qb(a,!1)},0)):ec(a,c,b.shiftKey,d))})}function gc(a){var g,h,i,b=a.aLastSort,c=a.oClasses.sSortColumn,e=bc(a),f=a.oFeatures;if(f.bSort&&f.bSortClasses){for(g=0,h=b.length;h>g;g++)i=b[g].src,d(w(a.aoData,"anCells",i)).removeClass(c+(2>g?g+1:3));for(g=0,h=e.length;h>g;g++)i=e[g].src,d(w(a.aoData,"anCells",i)).addClass(c+(2>g?g+1:3))}a.aLastSort=e}function hc(a,b){var f,g,h,i,j,k,c=a.aoColumns[b],d=e.ext.order[c.sSortDataType];for(d&&(f=d.call(a.oInstance,a,b,N(a,b))),i=e.ext.type.order[c.sType+"-pre"],j=0,k=a.aoData.length;k>j;j++)g=a.aoData[j],g._aSortData||(g._aSortData=[]),(!g._aSortData[b]||d)&&(h=d?f[j]:W(a,j,b,"sort"),g._aSortData[b]=i?i(h):h)}function ic(a){if(a.oFeatures.bStateSave&&!a.bDestroying){var b={time:+new Date,start:a._iDisplayStart,length:a._iDisplayLength,order:d.extend(!0,[],a.aaSorting),search:Eb(a.oPreviousSearch),columns:d.map(a.aoColumns,function(b,c){return{visible:b.bVisible,search:Eb(a.aoPreSearchCols[c])}})};qc(a,"aoStateSaveParams","stateSaveParams",[a,b]),a.oSavedState=b,a.fnStateSaveCallback.call(a.oInstance,a,b)}}function jc(a){var c,e,g,h,i,j,f=a.aoColumns;if(a.oFeatures.bStateSave&&(g=a.fnStateLoadCallback.call(a.oInstance,a),g&&g.time&&(h=qc(a,"aoStateLoadParams","stateLoadParams",[a,g]),-1===d.inArray(!1,h)&&(i=a.iStateDuration,!(i>0&&g.time<+new Date-1e3*i)&&f.length===g.columns.length)))){for(a.oLoadedState=d.extend(!0,{},g),a._iDisplayStart=g.start,a.iInitDisplayStart=g.start,a._iDisplayLength=g.length,a.aaSorting=[],d.each(g.order,function(b,c){a.aaSorting.push(c[0]>=f.length?[0,c[1]]:c)}),d.extend(a.oPreviousSearch,Fb(g.search)),c=0,e=g.columns.length;e>c;c++)j=g.columns[c],f[c].bVisible=j.visible,d.extend(a.aoPreSearchCols[c],Fb(j.search));qc(a,"aoStateLoaded","stateLoaded",[a,g])}}function kc(a){var b=e.settings,c=d.inArray(a,w(b,"nTable"));return-1!==c?b[c]:null}function lc(b,c,d,f){var g,h;if(d="DataTables warning: "+(null!==b?"table id="+b.sTableId+" - ":"")+d,f&&(d+=". For more information about this error, please see http://datatables.net/tn/"+f),c)a.console&&console.log&&console.log(d);else{if(g=e.ext,h=g.sErrMode||g.errMode,"alert"!=h)throw new Error(d);alert(d)}}function mc(a,b,e,f){return d.isArray(e)?(d.each(e,function(c,e){d.isArray(e)?mc(a,b,e[0],e[1]):mc(a,b,e)}),void 0):(f===c&&(f=e),b[e]!==c&&(a[f]=b[e]),void 0)}function nc(a,b,c){var e,f;for(f in b)b.hasOwnProperty(f)&&(e=b[f],d.isPlainObject(e)?(d.isPlainObject(a[f])||(a[f]={}),d.extend(!0,a[f],e)):a[f]=c&&"data"!==f&&"aaData"!==f&&d.isArray(e)?e.slice():e);return a}function oc(a,b,c){d(a).bind("click.DT",b,function(b){a.blur(),c(b)}).bind("keypress.DT",b,function(a){13===a.which&&(a.preventDefault(),c(a))}).bind("selectstart.DT",function(){return!1})}function pc(a,b,c,d){c&&a[b].push({fn:c,sName:d})}function qc(a,b,c,e){var f=[];return b&&(f=d.map(a[b].slice().reverse(),function(b){return b.fn.apply(a.oInstance,e)})),null!==c&&d(a.nTable).trigger(c+".dt",e),f}function rc(a){var b=a._iDisplayStart,c=a.fnDisplayEnd(),d=a._iDisplayLength;c===a.fnRecordsDisplay()&&(b=c-d),(-1===d||0>b)&&(b=0),a._iDisplayStart=b}function sc(a,b){var c=a.renderer,f=e.ext.renderer[b];return d.isPlainObject(c)&&c[b]?f[c[b]]||f._:"string"==typeof c?f[c]||f._:f._}function tc(a){return a.oFeatures.bServerSide?"ssp":a.ajax||a.sAjaxSource?"ajax":"dom"}function Qc(a,b){var c=[],d=Pc.numbers_length,e=Math.floor(d/2);return d>=b?c=y(0,b):e>=a?(c=y(0,d-2),c.push("ellipsis"),c.push(b-1)):a>=b-1-e?(c=y(b-(d-2),b),c.splice(0,0,"ellipsis"),c.splice(0,0,0)):(c=y(a-1,a+2),c.push("ellipsis"),c.push(b-1),c.splice(0,0,"ellipsis"),c.splice(0,0,0)),c.DT_el="span",c}function Sc(a){d.each({num:function(b){return Rc(b,a)},"num-fmt":function(b){return Rc(b,a,p)},"html-num":function(b){return Rc(b,a,l)},"html-num-fmt":function(b){return Rc(b,a,l,p)}},function(b,c){f.type.order[b+a+"-pre"]=c})}function Tc(a){return function(){var b=[kc(this[e.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return e.ext.internal[a].apply(this,b)}}var f,h,i,xc,yc,zc,Ac,Bc,Cc,Dc,Ec,Fc,Gc,Hc,Ic,Jc,Kc,Lc,Mc,Nc,Oc,Pc,Rc,j={},k=/[\r\n]/g,l=/<.*?>/g,m=/^[\w\+\-]/,n=/[\w\+\-]$/,o=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^","-"].join("|\\")+")","g"),p=/[',$£€¥%\u2009\u202F]/g,q=function(a){return a&&a!==!0&&"-"!==a?!1:!0},r=function(a){var b=parseInt(a,10);return!isNaN(b)&&isFinite(a)?b:null},s=function(a,b){return j[b]||(j[b]=new RegExp(Ab(b),"g")),"string"==typeof a?a.replace(/\./g,"").replace(j[b],"."):a},t=function(a,b,c){var d="string"==typeof a;return b&&d&&(a=s(a,b)),c&&d&&(a=a.replace(p,"")),q(a)||!isNaN(parseFloat(a))&&isFinite(a)},u=function(a){return q(a)||"string"==typeof a},v=function(a,b,c){if(q(a))return!0;var d=u(a);return d?t(z(a),b,c)?!0:null:null},w=function(a,b,d){var e=[],f=0,g=a.length;if(d!==c)for(;g>f;f++)a[f]&&a[f][b]&&e.push(a[f][b][d]);else for(;g>f;f++)a[f]&&e.push(a[f][b]);return e},x=function(a,b,d,e){var f=[],g=0,h=b.length;if(e!==c)for(;h>g;g++)f.push(a[b[g]][d][e]);else for(;h>g;g++)f.push(a[b[g]][d]);return f},y=function(a,b){var e,f,d=[];for(b===c?(b=0,e=a):(e=b,b=a),f=b;e>f;f++)d.push(f);return d},z=function(a){return a.replace(l,"")},A=function(a){var c,d,f,b=[],e=a.length,g=0;a:for(d=0;e>d;d++){for(c=a[d],f=0;g>f;f++)if(b[f]===c)continue a;b.push(c),g++}return b},E=function(a,b,d){a[b]!==c&&(a[d]=a[b])},Y=/\[.*?\]$/,Z=/\(\)$/,Bb=d("<div>")[0],Cb=Bb.textContent!==c,Ub=/<.*?>/g,e=function(a){var b,h,i,j;this.$=function(a,b){return this.api(!0).$(a,b)},this._=function(a,b){return this.api(!0).rows(a,b).data()},this.api=function(a){return a?new g(kc(this[f.iApiIndex])):new g(this)},this.fnAddData=function(a,b){var e=this.api(!0),f=d.isArray(a)&&(d.isArray(a[0])||d.isPlainObject(a[0]))?e.rows.add(a):e.row.add(a);return(b===c||b)&&e.draw(),f.flatten().toArray()},this.fnAdjustColumnSizing=function(a){var b=this.api(!0).columns.adjust(),d=b.settings()[0],e=d.oScroll;a===c||a?b.draw(!1):(""!==e.sX||""!==e.sY)&&Sb(d)},this.fnClearTable=function(a){var b=this.api(!0).clear();(a===c||a)&&b.draw()},this.fnClose=function(a){this.api(!0).row(a).child.hide()},this.fnDeleteRow=function(a,b,d){var e=this.api(!0),f=e.rows(a),g=f.settings()[0],h=g.aoData[f[0][0]];return f.remove(),b&&b.call(this,g,h),(d===c||d)&&e.draw(),h},this.fnDestroy=function(a){this.api(!0).destroy(a)},this.fnDraw=function(a){this.api(!0).draw(!a)},this.fnFilter=function(a,b,d,e,f,g){var h=this.api(!0);null===b||b===c?h.search(a,d,e,g):h.column(b).search(a,d,e,g),h.draw()},this.fnGetData=function(a,b){var e,d=this.api(!0);return a!==c?(e=a.nodeName?a.nodeName.toLowerCase():"",b!==c||"td"==e||"th"==e?d.cell(a,b).data():d.row(a).data()||null):d.data().toArray()},this.fnGetNodes=function(a){var b=this.api(!0);return a!==c?b.row(a).node():b.rows().nodes().flatten().toArray()},this.fnGetPosition=function(a){var d,b=this.api(!0),c=a.nodeName.toUpperCase();return"TR"==c?b.row(a).index():"TD"==c||"TH"==c?(d=b.cell(a).index(),[d.row,d.columnVisible,d.column]):null},this.fnIsOpen=function(a){return this.api(!0).row(a).child.isShown()},this.fnOpen=function(a,b,c){return this.api(!0).row(a).child(b,c).show().child()[0]},this.fnPageChange=function(a,b){var d=this.api(!0).page(a);(b===c||b)&&d.draw(!1)},this.fnSetColumnVis=function(a,b,d){var e=this.api(!0).column(a).visible(b);(d===c||d)&&e.columns.adjust().draw()},this.fnSettings=function(){return kc(this[f.iApiIndex])},this.fnSort=function(a){this.api(!0).order(a).draw()},this.fnSortListener=function(a,b,c){this.api(!0).order.listener(a,b,c)},this.fnUpdate=function(a,b,d,e,f){var g=this.api(!0);return d===c||null===d?g.row(b).data(a):g.cell(b,d).data(a),(f===c||f)&&g.columns.adjust(),(e===c||e)&&g.draw(),0},this.fnVersionCheck=f.fnVersionCheck,b=this,h=a===c,i=this.length,h&&(a={}),this.oApi=this.internal=f.internal;for(j in e.ext.internal)j&&(this[j]=Tc(j));return this.each(function(){var k,s,t,u,v,w,x,y,z,A,B,E,I,L,M,N,O,P,Q,f={},g=i>1?nc(f,a,!0):a,j=0,p=this.getAttribute("id"),q=!1,r=e.defaults;if("table"!=this.nodeName.toLowerCase())return lc(null,0,"Non-table node initialisation ("+this.nodeName+")",2),void 0;for(F(r),G(r.column),C(r,r,!0),C(r.column,r.column,!0),C(r,g),s=e.settings,j=0,k=s.length;k>j;j++){if(s[j].nTable==this){if(t=g.bRetrieve!==c?g.bRetrieve:r.bRetrieve,u=g.bDestroy!==c?g.bDestroy:r.bDestroy,h||t)return s[j].oInstance;if(u){s[j].oInstance.fnDestroy();break}return lc(s[j],0,"Cannot reinitialise DataTable",3),void 0}if(s[j].sTableId==this.id){s.splice(j,1);break}}if((null===p||""===p)&&(p="DataTables_Table_"+e.ext._unique++,this.id=p),v=d.extend(!0,{},e.models.oSettings,{nTable:this,oApi:b.internal,oInit:g,sDestroyWidth:d(this)[0].style.width,sInstance:p,sTableId:p}),s.push(v),v.oInstance=1===b.length?b:d(this).dataTable(),F(g),g.oLanguage&&D(g.oLanguage),g.aLengthMenu&&!g.iDisplayLength&&(g.iDisplayLength=d.isArray(g.aLengthMenu[0])?g.aLengthMenu[0][0]:g.aLengthMenu[0]),g=nc(d.extend(!0,{},r),g),mc(v.oFeatures,g,["bPaginate","bLengthChange","bFilter","bSort","bSortMulti","bInfo","bProcessing","bAutoWidth","bSortClasses","bServerSide","bDeferRender"]),mc(v,g,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"],["bJQueryUI","bJUI"]]),mc(v.oScroll,g,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]),mc(v.oLanguage,g,"fnInfoCallback"),pc(v,"aoDrawCallback",g.fnDrawCallback,"user"),pc(v,"aoServerParams",g.fnServerParams,"user"),pc(v,"aoStateSaveParams",g.fnStateSaveParams,"user"),pc(v,"aoStateLoadParams",g.fnStateLoadParams,"user"),pc(v,"aoStateLoaded",g.fnStateLoaded,"user"),pc(v,"aoRowCallback",g.fnRowCallback,"user"),pc(v,"aoRowCreatedCallback",g.fnCreatedRow,"user"),pc(v,"aoHeaderCallback",g.fnHeaderCallback,"user"),pc(v,"aoFooterCallback",g.fnFooterCallback,"user"),pc(v,"aoInitComplete",g.fnInitComplete,"user"),pc(v,"aoPreDrawCallback",g.fnPreDrawCallback,"user"),pc(v,"aoInitComplete",g.fnSvcInitComplete,"Svc"),pc(v,"aoDrawCallback",g.fnSvcDrawCallback,"Svc"),w=v.oClasses,g.bJQueryUI?(d.extend(w,e.ext.oJUIClasses,g.oClasses),g.sDom===r.sDom&&"lfrtip"===r.sDom&&(v.sDom='<"H"lfr>t<"F"ip>'),v.renderer?d.isPlainObject(v.renderer)&&!v.renderer.header&&(v.renderer.header="jqueryui"):v.renderer="jqueryui"):d.extend(w,e.ext.classes,g.oClasses),d(this).addClass(w.sTable),(""!==v.oScroll.sX||""!==v.oScroll.sY)&&(v.oScroll.iBarWidth=ac()),v.oScroll.sX===!0&&(v.oScroll.sX="100%"),v.iInitDisplayStart===c&&(v.iInitDisplayStart=g.iDisplayStart,v._iDisplayStart=g.iDisplayStart),null!==g.iDeferLoading&&(v.bDeferLoading=!0,x=d.isArray(g.iDeferLoading),v._iRecordsDisplay=x?g.iDeferLoading[0]:g.iDeferLoading,v._iRecordsTotal=x?g.iDeferLoading[1]:g.iDeferLoading),""!==g.oLanguage.sUrl?(v.oLanguage.sUrl=g.oLanguage.sUrl,d.getJSON(v.oLanguage.sUrl,null,function(a){D(a),C(r.oLanguage,a),d.extend(!0,v.oLanguage,g.oLanguage,a),Jb(v)}),q=!0):d.extend(!0,v.oLanguage,g.oLanguage),null===g.asStripeClasses&&(v.asStripeClasses=[w.sStripeOdd,w.sStripeEven]),y=v.asStripeClasses,z=d("tbody tr:eq(0)",this),-1!==d.inArray(!0,d.map(y,function(a){return z.hasClass(a)}))&&(d("tbody tr",this).removeClass(y.join(" ")),v.asDestroyStripes=y.slice()),A=[],E=this.getElementsByTagName("thead"),0!==E.length&&(nb(v.aoHeader,E[0]),A=ob(v)),null===g.aoColumns)for(B=[],j=0,k=A.length;k>j;j++)B.push(null);else B=g.aoColumns;for(j=0,k=B.length;k>j;j++)J(v,A?A[j]:null);if(R(v,g.aoColumnDefs,B,function(a,b){K(v,a,b)}),z.length&&(I=function(a,b){return a.getAttribute("data-"+b)?b:null},d.each(fb(v,z[0]).cells,function(a,b){var e,f,d=v.aoColumns[a];d.mData===a&&(e=I(b,"sort")||I(b,"order"),f=I(b,"filter")||I(b,"search"),(null!==e||null!==f)&&(d.mData={_:a+".display",sort:null!==e?a+".@data-"+e:c,type:null!==e?a+".@data-"+e:c,filter:null!==f?a+".@data-"+f:c},K(v,a)))})),L=v.oFeatures,g.bStateSave&&(L.bStateSave=!0,jc(v,g),pc(v,"aoDrawCallback",ic,"state_save")),g.aaSorting===c)for(M=v.aaSorting,j=0,k=M.length;k>j;j++)M[j][1]=v.aoColumns[j].asSorting[0];if(gc(v),L.bSort&&pc(v,"aoDrawCallback",function(){var a,b;v.bSorted&&(a=bc(v),b={},d.each(a,function(a,c){b[c.src]=c.dir}),qc(v,null,"order",[v,a,b]),dc(v))}),pc(v,"aoDrawCallback",function(){(v.bSorted||"ssp"===tc(v)||L.bDeferRender)&&gc(v)},"sc"),H(v),N=d(this).children("caption").each(function(){this._captionSide=d(this).css("caption-side")}),O=d(this).children("thead"),0===O.length&&(O=d("<thead/>").appendTo(this)),v.nTHead=O[0],P=d(this).children("tbody"),0===P.length&&(P=d("<tbody/>").appendTo(this)),v.nTBody=P[0],Q=d(this).children("tfoot"),0===Q.length&&N.length>0&&(""!==v.oScroll.sX||""!==v.oScroll.sY)&&(Q=d("<tfoot/>").appendTo(this)),0===Q.length||0===Q.children().length?d(this).addClass(w.sNoFooter):Q.length>0&&(v.nTFoot=Q[0],nb(v.aoFooter,v.nTFoot)),g.aaData)for(j=0;j<g.aaData.length;j++)S(v,g.aaData[j]);else(v.bDeferLoading||"dom"==tc(v))&&T(v,d(v.nTBody).children("tr"));v.aiDisplay=v.aiDisplayMaster.slice(),v.bInitialised=!0,q===!1&&Jb(v)}),b=null,this},uc=[],vc=Array.prototype,wc=function(a){var b,c,f=e.settings,g=d.map(f,function(a){return a.nTable});return a?a.nTable&&a.oApi?[a]:a.nodeName&&"table"===a.nodeName.toLowerCase()?(b=d.inArray(a,g),-1!==b?[f[b]]:null):a&&"function"==typeof a.settings?a.settings().toArray():("string"==typeof a?c=d(a):a instanceof d&&(c=a),c?c.map(function(){return b=d.inArray(this,g),-1!==b?f[b]:null}).toArray():void 0):[]},g=function(a,b){var c,e,f,h;if(!this instanceof g)throw"DT API must be constructed as a new object";if(c=[],e=function(a){var b=wc(a);b&&c.push.apply(c,b)},d.isArray(a))for(f=0,h=a.length;h>f;f++)e(a[f]);else e(a);this.context=A(c),b&&this.push.apply(this,b.toArray?b.toArray():b),this.selector={rows:null,cols:null,opts:null},g.extend(this,this,uc)};return e.Api=g,g.prototype={concat:vc.concat,context:[],each:function(a){for(var b=0,c=this.length;c>b;b++)a.call(this,this[b],b,this);return this},eq:function(a){var b=this.context;return b.length>a?new g(b[a],this[a]):null},filter:function(a){var c,d,b=[];if(vc.filter)b=vc.filter.call(this,a,this);else for(c=0,d=this.length;d>c;c++)a.call(this,this[c],c,this)&&b.push(this[c]);return new g(this.context,b)},flatten:function(){var a=[];return new g(this.context,a.concat.apply(a,this.toArray()))},join:vc.join,indexOf:vc.indexOf||function(a,b){for(var c=b||0,d=this.length;d>c;c++)if(this[c]===a)return c;return-1},iterator:function(a,b,d){var f,h,i,j,k,m,n,o,q,r,e=[],l=this.context,p=this.selector;for("string"==typeof a&&(d=b,b=a,a=!1),h=0,i=l.length;i>h;h++)if("table"===b)f=d(l[h],h),f!==c&&e.push(f);else if("columns"===b||"rows"===b)f=d(l[h],this[h],h),f!==c&&e.push(f);else if("column"===b||"column-rows"===b||"row"===b||"cell"===b)for(n=this[h],"column-rows"===b&&(m=Cc(l[h],p.opts)),j=0,k=n.length;k>j;j++)o=n[j],f="cell"===b?d(l[h],o.row,o.column,h,j):d(l[h],o,h,j,m),f!==c&&e.push(f);return e.length?(q=new g(l,a?e.concat.apply([],e):e),r=q.selector,r.rows=p.rows,r.cols=p.cols,r.opts=p.opts,q):this},lastIndexOf:vc.lastIndexOf||function(){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(a){var c,d,b=[];if(vc.map)b=vc.map.call(this,a,this);else for(c=0,d=this.length;d>c;c++)b.push(a.call(this,this[c],c));return new g(this.context,b)},pluck:function(a){return this.map(function(b){return b[a]})},pop:vc.pop,push:vc.push,reduce:vc.reduce||function(a,b){return I(this,a,b,0,this.length,1)},reduceRight:vc.reduceRight||function(a,b){return I(this,a,b,this.length-1,-1,-1)},reverse:vc.reverse,selector:null,shift:vc.shift,sort:vc.sort,splice:vc.splice,toArray:function(){return vc.slice.call(this)},to$:function(){return d(this)},toJQuery:function(){return d(this)},unique:function(){return new g(this.context,A(this))},unshift:vc.unshift},g.extend=function(a,b,c){if(b&&(b instanceof g||b.__dt_wrapper)){var e,f,j,l=function(a,b,c){return function(){var d=b.apply(a,arguments);return g.extend(d,d,c.methodExt),d}};for(e=0,f=c.length;f>e;e++)j=c[e],b[j.name]="function"==typeof j.val?l(a,j.val,j):d.isPlainObject(j.val)?{}:j.val,b[j.name].__dt_wrapper=!0,g.extend(a,b[j.name],j.propExt)}},g.register=h=function(a,b){var c,e,f,h,k,l,i,j,m,n;if(d.isArray(a))for(c=0,e=a.length;e>c;c++)g.register(a[c],b);else for(i=a.split("."),j=uc,m=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c].name===b)return a[c];return null},f=0,h=i.length;h>f;f++)l=-1!==i[f].indexOf("()"),k=l?i[f].replace("()",""):i[f],n=m(j,k),n||(n={name:k,val:{},methodExt:[],propExt:[]},j.push(n)),f===h-1?n.val=b:j=l?n.methodExt:n.propExt},g.registerPlural=i=function(a,b,e){g.register(a,e),g.register(b,function(){var a=e.apply(this,arguments);return a===this?this:a instanceof g?a.length?d.isArray(a[0])?new g(a.context,a[0]):a[0]:c:a})},xc=function(a,b){if("number"==typeof a)return[b[a]];var c=d.map(b,function(a){return a.nTable});return d(c).filter(a).map(function(){var e=d.inArray(this,c);return b[e]}).toArray()},h("tables()",function(a){return a?new g(xc(a,this.context)):this}),h("table()",function(a){var b=this.tables(a),c=b.context;return c.length?new g(c[0]):b}),i("tables().nodes()","table().node()",function(){return this.iterator("table",function(a){return a.nTable})}),i("tables().body()","table().body()",function(){return this.iterator("table",function(a){return a.nTBody})}),i("tables().header()","table().header()",function(){return this.iterator("table",function(a){return a.nTHead})}),i("tables().footer()","table().footer()",function(){return this.iterator("table",function(a){return a.nTFoot})}),i("tables().containers()","table().container()",function(){return this.iterator("table",function(a){return a.nTableWrapper})}),h("draw()",function(a){return this.iterator("table",function(b){lb(b,a===!1)})}),h("page()",function(a){return a===c?this.page.info().page:this.iterator("table",function(b){Ob(b,a)})}),h("page.info()",function(){if(0===this.context.length)return c;var b=this.context[0],d=b._iDisplayStart,e=b._iDisplayLength,f=b.fnRecordsDisplay(),g=-1===e;return{page:g?0:Math.floor(d/e),pages:g?1:Math.ceil(f/e),start:d,end:b.fnDisplayEnd(),length:e,recordsTotal:b.fnRecordsTotal(),recordsDisplay:f}}),h("page.len()",function(a){return a===c?0!==this.context.length?this.context[0]._iDisplayLength:c:this.iterator("table",function(b){Lb(b,a)})}),yc=function(a,b,c){if("ssp"==tc(a)?lb(a,b):(Qb(a,!0),pb(a,[],function(c){var d,e,f;for(cb(a),d=tb(a,c),e=0,f=d.length;f>e;e++)S(a,d[e]);lb(a,b),Qb(a,!1)})),c){var d=new g(a);d.one("draw",function(){c(d.ajax.json())})}},h("ajax.json()",function(){var a=this.context;return a.length>0?a[0].json:void 0}),h("ajax.params()",function(){var a=this.context;return a.length>0?a[0].oAjaxData:void 0}),h("ajax.reload()",function(a,b){return this.iterator("table",function(c){yc(c,b===!1,a)})}),h("ajax.url()",function(a){var b=this.context;return a===c?0===b.length?c:(b=b[0],b.ajax?d.isPlainObject(b.ajax)?b.ajax.url:b.ajax:b.sAjaxSource):this.iterator("table",function(b){d.isPlainObject(b.ajax)?b.ajax.url=a:b.ajax=a})}),h("ajax.url().load()",function(a,b){return this.iterator("table",function(c){yc(c,b===!1,a)})}),zc=function(a,b){var f,g,h,i,j,k,e=[];for(a&&"string"!=typeof a&&a.length!==c||(a=[a]),h=0,i=a.length;i>h;h++)for(g=a[h]&&a[h].split?a[h].split(","):[a[h]],j=0,k=g.length;k>j;j++)f=b("string"==typeof g[j]?d.trim(g[j]):g[j]),f&&f.length&&e.push.apply(e,f);return e},Ac=function(a){return a||(a={}),a.filter&&!a.search&&(a.search=a.filter),{search:a.search||"none",order:a.order||"current",page:a.page||"all"}},Bc=function(a){for(var b=0,c=a.length;c>b;b++)if(a[b].length>0)return a[0]=a[b],a.length=1,a.context=[a.context[b]],a;return a.length=0,a},Cc=function(a,b){var c,e,f,g=[],h=a.aiDisplay,i=a.aiDisplayMaster,j=b.search,k=b.order,l=b.page;if("ssp"==tc(a))return"removed"===j?[]:y(0,i.length);if("current"==l)for(c=a._iDisplayStart,e=a.fnDisplayEnd();e>c;c++)g.push(h[c]);else if("current"==k||"applied"==k)g="none"==j?i.slice():"applied"==j?h.slice():d.map(i,function(a){return-1===d.inArray(a,h)?a:null});else if("index"==k||"original"==k)for(c=0,e=a.aoData.length;e>c;c++)"none"==j?g.push(c):(f=d.inArray(c,h),(-1===f&&"removed"==j||f>=0&&"applied"==j)&&g.push(c));return g},Dc=function(a,b,c){return zc(b,function(b){var f,g,h,i,e=r(b);if(null!==e&&!c)return[e];if(f=Cc(a,c),null!==e&&-1!==d.inArray(e,f))return[e];if(!b)return f;for(g=[],h=0,i=f.length;i>h;h++)g.push(a.aoData[f[h]].nTr);return b.nodeName&&-1!==d.inArray(b,g)?[b._DT_RowIndex]:d(g).filter(b).map(function(){return this._DT_RowIndex}).toArray()})},h("rows()",function(a,b){a===c?a="":d.isPlainObject(a)&&(b=a,a=""),b=Ac(b);var e=this.iterator("table",function(c){return Dc(c,a,b)});return e.selector.rows=a,e.selector.opts=b,e}),h("rows().nodes()",function(){return this.iterator("row",function(a,b){return a.aoData[b].nTr||c})}),h("rows().data()",function(){return this.iterator(!0,"rows",function(a,b){return x(a.aoData,b,"_aData")})}),i("rows().cache()","row().cache()",function(a){return this.iterator("row",function(b,c){var d=b.aoData[c];return"search"===a?d._aFilterData:d._aSortData})}),i("rows().invalidate()","row().invalidate()",function(a){return this.iterator("row",function(b,c){eb(b,c,a)})}),i("rows().indexes()","row().index()",function(){return this.iterator("row",function(a,b){return b})}),i("rows().remove()","row().remove()",function(){var a=this;return this.iterator("row",function(b,c,e){var g,h,f=b.aoData;for(f.splice(c,1),g=0,h=f.length;h>g;g++)null!==f[g].nTr&&(f[g].nTr._DT_RowIndex=g);d.inArray(c,b.aiDisplay),db(b.aiDisplayMaster,c),db(b.aiDisplay,c),db(a[e],c,!1),rc(b)})}),h("rows.add()",function(a){var b=this.iterator("table",function(b){var c,d,e,f=[];for(d=0,e=a.length;e>d;d++)c=a[d],c.nodeName&&"TR"===c.nodeName.toUpperCase()?f.push(T(b,c)[0]):f.push(S(b,c));return f}),c=this.rows(-1);return c.pop(),c.push.apply(c,b.toArray()),c}),h("row()",function(a,b){return Bc(this.rows(a,b))}),h("row().data()",function(a){var b=this.context;return a===c?b.length&&this.length?b[0].aoData[this[0]]._aData:c:(b[0].aoData[this[0]]._aData=a,eb(b[0],this[0],"data"),this)}),h("row().node()",function(){var a=this.context;return a.length&&this.length?a[0].aoData[this[0]].nTr||null:null}),h("row.add()",function(a){a instanceof d&&a.length&&(a=a[0]);var b=this.iterator("table",function(b){return a.nodeName&&"TR"===a.nodeName.toUpperCase()?T(b,a)[0]:S(b,a)});return this.row(b[0])}),Ec=function(a,b,c,e){var h,i,f=[],g=function(b,c){if(b.nodeName&&"tr"===b.nodeName.toLowerCase())f.push(b);else{var e=d("<tr><td/></tr>").addClass(c);d("td",e).addClass(c).html(b)[0].colSpan=O(a),f.push(e[0])}};if(d.isArray(c)||c instanceof d)for(h=0,i=c.length;i>h;h++)g(c[h],e);else g(c,e);b._details&&b._details.remove(),b._details=d(f),b._detailsShow&&b._details.insertAfter(b.nTr)},Fc=function(a){var d,b=a.context;b.length&&a.length&&(d=b[0].aoData[a[0]],d._details&&(d._details.remove(),d._detailsShow=c,d._details=c))},Gc=function(a,b){var d,c=a.context;c.length&&a.length&&(d=c[0].aoData[a[0]],d._details&&(d._detailsShow=b,b?d._details.insertAfter(d.nTr):d._details.detach(),Hc(c[0])))},Hc=function(a){var b=new g(a),c=".dt.DT_details",d="draw"+c,e="column-visibility"+c,f="destroy"+c,h=a.aoData;b.off(d+" "+e+" "+f),w(h,"_details").length>0&&(b.on(d,function(c,d){a===d&&b.rows({page:"current"}).eq(0).each(function(a){var b=h[a];b._detailsShow&&b._details.insertAfter(b.nTr)})}),b.on(e,function(b,c){var f,g,i,j;if(a===c)for(g=O(c),i=0,j=h.length;j>i;i++)f=h[i],f._details&&f._details.children("td[colspan]").attr("colspan",g)}),b.on(f,function(b,c){if(a===c)for(var d=0,e=h.length;e>d;d++)h[d]._details&&Fc(h[d])}))},Ic="",Jc=Ic+"row().child",Kc=Jc+"()",h(Kc,function(a,b){var d=this.context;return a===c?d.length&&this.length?d[0].aoData[this[0]]._details:c:(a===!0?this.child.show():a===!1?Fc(this):d.length&&this.length&&Ec(d[0],d[0].aoData[this[0]],a,b),this)}),h([Jc+".show()",Kc+".show()"],function(){return Gc(this,!0),this}),h([Jc+".hide()",Kc+".hide()"],function(){return Gc(this,!1),this}),h([Jc+".remove()",Kc+".remove()"],function(){return Fc(this),this}),h(Jc+".isShown()",function(){var a=this.context;return a.length&&this.length?a[0].aoData[this[0]]._detailsShow||!1:!1}),Lc=/^(.+):(name|visIdx|visible)$/,Mc=function(a,b){var e=a.aoColumns,f=w(e,"sName"),g=w(e,"nTh");return zc(b,function(b){var h,i,j,c=r(b);if(""===b)return y(e.length);if(null!==c)return[c>=0?c:e.length+c];if(h="string"==typeof b?b.match(Lc):"",!h)return d(g).filter(b).map(function(){return d.inArray(this,g)}).toArray();switch(h[2]){case"visIdx":case"visible":return i=parseInt(h[1],10),0>i?(j=d.map(e,function(a,b){return a.bVisible?b:null}),[j[j.length+i]]):[M(a,i)];case"name":return d.map(f,function(a,b){return a===h[1]?b:null})}})},Nc=function(a,b,e,f){var k,l,m,n,o,g=a.aoColumns,h=g[b],i=a.aoData;if(e===c)return h.bVisible;if(h.bVisible!==e){if(e)for(o=d.inArray(!0,w(g,"bVisible"),b+1),l=0,m=i.length;m>l;l++)n=i[l].nTr,k=i[l].anCells,n&&n.insertBefore(k[b],k[o]||null);else d(w(a.aoData,"anCells",b)).detach();h.bVisible=e,jb(a,a.aoHeader),jb(a,a.aoFooter),(f===c||f)&&(L(a),(a.oScroll.sX||a.oScroll.sY)&&Sb(a)),qc(a,null,"column-visibility",[a,b,e]),ic(a)}},h("columns()",function(a,b){a===c?a="":d.isPlainObject(a)&&(b=a,a=""),b=Ac(b);var e=this.iterator("table",function(c){return Mc(c,a,b)});return e.selector.cols=a,e.selector.opts=b,e}),i("columns().header()","column().header()",function(){return this.iterator("column",function(a,b){return a.aoColumns[b].nTh})}),i("columns().footer()","column().footer()",function(){return this.iterator("column",function(a,b){return a.aoColumns[b].nTf})}),i("columns().data()","column().data()",function(){return this.iterator("column-rows",function(a,b,c,d,e){var g,h,f=[];for(g=0,h=e.length;h>g;g++)f.push(W(a,e[g],b,""));return f})}),i("columns().cache()","column().cache()",function(a){return this.iterator("column-rows",function(b,c,d,e,f){return x(b.aoData,f,"search"===a?"_aFilterData":"_aSortData",c)})}),i("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(a,b,c,d,e){return x(a.aoData,e,"anCells",b)})}),i("columns().visible()","column().visible()",function(a,b){return this.iterator("column",function(d,e){return a===c?d.aoColumns[e].bVisible:Nc(d,e,a,b)})}),i("columns().indexes()","column().index()",function(a){return this.iterator("column",function(b,c){return"visible"===a?N(b,c):c})}),h("columns.adjust()",function(){return this.iterator("table",function(a){L(a)})}),h("column.index()",function(a,b){if(0!==this.context.length){var c=this.context[0];if("fromVisible"===a||"toData"===a)return M(c,b);if("fromData"===a||"toVisible"===a)return N(c,b)}}),h("column()",function(a,b){return Bc(this.columns(a,b))}),Oc=function(a,b,e){var j,l,m,n,o,f=a.aoData,g=Cc(a,e),h=x(f,g,"anCells"),i=d([].concat.apply([],h)),k=a.aoColumns.length;return zc(b,function(a){if(null===a||a===c){for(l=[],m=0,n=g.length;n>m;m++)for(j=g[m],o=0;k>o;o++)l.push({row:j,column:o});return l}return d.isPlainObject(a)?[a]:i.filter(a).map(function(a,b){return j=b.parentNode._DT_RowIndex,{row:j,column:d.inArray(b,f[j].anCells)}}).toArray()})},h("cells()",function(a,b,e){var f,g,h,i,j,k,l,m;return d.isPlainObject(a)&&(typeof a.row!==c?(e=b,b=null):(e=a,a=null)),d.isPlainObject(b)&&(e=b,b=null),null===b||b===c?this.iterator("table",function(b){return Oc(b,a,Ac(e))}):(f=this.columns(b,e),g=this.rows(a,e),m=this.iterator("table",function(a,b){for(h=[],i=0,j=g[b].length;j>i;i++)for(k=0,l=f[b].length;l>k;k++)h.push({row:g[b][i],column:f[b][k]});return h}),d.extend(m.selector,{cols:b,rows:a,opts:e}),m)}),i("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(a,b,c){return a.aoData[b].anCells[c]})}),h("cells().data()",function(){return this.iterator("cell",function(a,b,c){return W(a,b,c)})}),i("cells().cache()","cell().cache()",function(a){return a="search"===a?"_aFilterData":"_aSortData",this.iterator("cell",function(b,c,d){return b.aoData[c][a][d]})}),i("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(a,b,c){return{row:b,column:c,columnVisible:N(a,c)}})}),h(["cells().invalidate()","cell().invalidate()"],function(a){var b=this.selector;return this.rows(b.rows,b.opts).invalidate(a),this}),h("cell()",function(a,b,c){return Bc(this.cells(a,b,c))}),h("cell().data()",function(a){var b=this.context,d=this[0];return a===c?b.length&&d.length?W(b[0],d[0].row,d[0].column):c:(X(b[0],d[0].row,d[0].column,a),eb(b[0],d[0].row,"data",d[0].column),this)}),h("order()",function(a,b){var e=this.context;return a===c?0!==e.length?e[0].aaSorting:c:("number"==typeof a?a=[[a,b]]:d.isArray(a[0])||(a=Array.prototype.slice.call(arguments)),this.iterator("table",function(b){b.aaSorting=a.slice()}))}),h("order.listener()",function(a,b,c){return this.iterator("table",function(d){fc(d,a,b,c)})}),h(["columns().order()","column().order()"],function(a){var b=this;return this.iterator("table",function(c,e){var f=[];d.each(b[e],function(b,c){f.push([c,a])}),c.aaSorting=f})}),h("search()",function(a,b,e,f){var g=this.context;return a===c?0!==g.length?g[0].oPreviousSearch.sSearch:c:this.iterator("table",function(c){c.oFeatures.bFilter&&vb(c,d.extend({},c.oPreviousSearch,{sSearch:a+"",bRegex:null===b?!1:b,bSmart:null===e?!0:e,bCaseInsensitive:null===f?!0:f}),1)})}),i("columns().search()","column().search()",function(a,b,e,f){return this.iterator("column",function(g,h){var i=g.aoPreSearchCols;return a===c?i[h].sSearch:(g.oFeatures.bFilter&&(d.extend(i[h],{sSearch:a+"",bRegex:null===b?!1:b,bSmart:null===e?!0:e,bCaseInsensitive:null===f?!0:f}),vb(g,g.oPreviousSearch,1)),void 0)})}),h("state()",function(){return this.context.length?this.context[0].oSavedState:null}),h("state.clear()",function(){return this.iterator("table",function(a){a.fnStateSaveCallback.call(a.oInstance,a,{})})}),h("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null}),h("state.save()",function(){return this.iterator("table",function(a){ic(a)})}),e.versionCheck=e.fnVersionCheck=function(a){var d,f,g,h,b=e.version.split("."),c=a.split(".");for(g=0,h=c.length;h>g;g++)if(d=parseInt(b[g],10)||0,f=parseInt(c[g],10)||0,d!==f)return d>f;return!0},e.isDataTable=e.fnIsDataTable=function(a){var b=d(a).get(0),c=!1;return d.each(e.settings,function(a,d){(d.nTable===b||d.nScrollHead===b||d.nScrollFoot===b)&&(c=!0)}),c},e.tables=e.fnTables=function(a){return jQuery.map(e.settings,function(b){return!a||a&&d(b.nTable).is(":visible")?b.nTable:void 0})},e.camelToHungarian=C,h("$()",function(a,b){var c=this.rows(b).nodes(),e=d(c);return d([].concat(e.filter(a).toArray(),e.find(a).toArray()))}),d.each(["on","one","off"],function(a,b){h(b+"()",function(){var c,a=Array.prototype.slice.call(arguments);return a[0].match(/\.dt\b/)||(a[0]+=".dt"),c=d(this.tables().nodes()),c[b].apply(c,a),this})}),h("clear()",function(){return this.iterator("table",function(a){cb(a)})}),h("settings()",function(){return new g(this.context,this.context)}),h("data()",function(){return this.iterator("table",function(a){return w(a.aoData,"_aData")}).flatten()}),h("destroy()",function(b){return b=b||!1,this.iterator("table",function(c){var r,s,f=c.nTableWrapper.parentNode,h=c.oClasses,i=c.nTable,j=c.nTBody,k=c.nTHead,l=c.nTFoot,m=d(i),n=d(j),o=d(c.nTableWrapper),p=d.map(c.aoData,function(a){return a.nTr});c.bDestroying=!0,qc(c,"aoDestroyCallback","destroy",[c]),b||new g(c).columns().visible(!0),o.unbind(".DT").find(":not(tbody *)").unbind(".DT"),d(a).unbind(".DT-"+c.sInstance),i!=k.parentNode&&(m.children("thead").detach(),m.append(k)),l&&i!=l.parentNode&&(m.children("tfoot").detach(),m.append(l)),m.detach(),o.detach(),c.aaSorting=[],c.aaSortingFixed=[],gc(c),d(p).removeClass(c.asStripeClasses.join(" ")),d("th, td",k).removeClass(h.sSortable+" "+h.sSortableAsc+" "+h.sSortableDesc+" "+h.sSortableNone),c.bJUI&&(d("th span."+h.sSortIcon+", td span."+h.sSortIcon,k).detach(),d("th, td",k).each(function(){var a=d("div."+h.sSortJUIWrapper,this);
d(this).append(a.contents()),a.detach()})),!b&&f&&f.insertBefore(i,c.nTableReinsertBefore),n.children().detach(),n.append(p),m.css("width",c.sDestroyWidth).removeClass(h.sTable),r=c.asDestroyStripes.length,r&&n.children().each(function(a){d(this).addClass(c.asDestroyStripes[a%r])}),s=d.inArray(c,e.settings),-1!==s&&e.settings.splice(s,1)})}),e.version="1.10.2",e.settings=[],e.models={},e.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0},e.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null},e.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},e.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(a){try{return JSON.parse((-1===a.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+a.sInstance+"_"+location.pathname))}catch(b){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(a,b){try{(-1===a.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+a.sInstance+"_"+location.pathname,JSON.stringify(b))}catch(c){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:d.extend({},e.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null},B(e.defaults),e.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},B(e.defaults.column),e.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:c,oAjaxData:c,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==tc(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==tc(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var a=this._iDisplayLength,b=this._iDisplayStart,c=b+a,d=this.aiDisplay.length,e=this.oFeatures,f=e.bPaginate;return e.bServerSide?f===!1||-1===a?b+d:Math.min(b+a,this._iRecordsDisplay):!f||c>d||-1===a?d:c},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{}},e.ext=f={classes:{},errMode:"alert",feature:[],search:[],internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:e.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:e.version},d.extend(f,{afnFiltering:f.search,aTypes:f.type.detect,ofnSearch:f.type.search,oSort:f.type.order,afnSortData:f.order,aoFeatures:f.feature,oApi:f.internal,oStdClasses:f.classes,oPagination:f.pager}),d.extend(e.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""}),function(){var b,c,f,a="";a="",b=a+"ui-state-default",c=a+"css_right ui-icon ui-icon-",f=a+"fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix",d.extend(e.ext.oJUIClasses,e.ext.classes,{sPageButton:"fg-button ui-button "+b,sPageButtonActive:"ui-state-disabled",sPageButtonDisabled:"ui-state-disabled",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:b+" sorting_asc",sSortDesc:b+" sorting_desc",sSortable:b+" sorting",sSortableAsc:b+" sorting_asc_disabled",sSortableDesc:b+" sorting_desc_disabled",sSortableNone:b+" sorting_disabled",sSortJUIAsc:c+"triangle-1-n",sSortJUIDesc:c+"triangle-1-s",sSortJUI:c+"carat-2-n-s",sSortJUIAscAllowed:c+"carat-1-n",sSortJUIDescAllowed:c+"carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead "+b,sScrollFoot:"dataTables_scrollFoot "+b,sHeaderTH:b,sFooterTH:b,sJUIHeader:f+" ui-corner-tl ui-corner-tr",sJUIFooter:f+" ui-corner-bl ui-corner-br"})}(),Pc=e.ext.pager,d.extend(Pc,{simple:function(){return["previous","next"]},full:function(){return["first","previous","next","last"]},simple_numbers:function(a,b){return["previous",Qc(a,b),"next"]},full_numbers:function(a,b){return["first","previous",Qc(a,b),"next","last"]},_numbers:Qc,numbers_length:7}),d.extend(!0,e.ext.renderer,{pageButton:{_:function(a,c,e,f,g,h){var k,l,o,i=a.oClasses,j=a.oLanguage.oPaginate,m=0,n=function(b,c){var f,o,p,q,s,r=function(b){Ob(a,b.data.action,!0)};for(f=0,o=c.length;o>f;f++)if(q=c[f],d.isArray(q))s=d("<"+(q.DT_el||"div")+"/>").appendTo(b),n(s,q);else{switch(k="",l="",q){case"ellipsis":b.append("<span>&hellip;</span>");break;case"first":k=j.sFirst,l=q+(g>0?"":" "+i.sPageButtonDisabled);break;case"previous":k=j.sPrevious,l=q+(g>0?"":" "+i.sPageButtonDisabled);break;case"next":k=j.sNext,l=q+(h-1>g?"":" "+i.sPageButtonDisabled);break;case"last":k=j.sLast,l=q+(h-1>g?"":" "+i.sPageButtonDisabled);break;default:k=q+1,l=g===q?i.sPageButtonActive:""}k&&(p=d("<a>",{"class":i.sPageButton+" "+l,"aria-controls":a.sTableId,"data-dt-idx":m,tabindex:a.iTabIndex,id:0===e&&"string"==typeof q?a.sTableId+"_"+q:null}).html(k).appendTo(b),oc(p,{action:q},r),m++)}};try{o=d(b.activeElement).data("dt-idx"),n(d(c).empty(),f),null!==o&&d(c).find("[data-dt-idx="+o+"]").focus()}catch(p){}}}}),Rc=function(a,b,c,d){return a&&"-"!==a?(b&&(a=s(a,b)),a.replace&&(c&&(a=a.replace(c,"")),d&&(a=a.replace(d,""))),1*a):-1/0},d.extend(f.type.order,{"date-pre":function(a){return Date.parse(a)||0},"html-pre":function(a){return q(a)?"":a.replace?a.replace(/<.*?>/g,"").toLowerCase():a+""},"string-pre":function(a){return q(a)?"":"string"==typeof a?a.toLowerCase():a.toString?a.toString():""},"string-asc":function(a,b){return b>a?-1:a>b?1:0},"string-desc":function(a,b){return b>a?1:a>b?-1:0}}),Sc(""),d.extend(e.ext.type.detect,[function(a,b){var c=b.oLanguage.sDecimal;return t(a,c)?"num"+c:null},function(a){if(a&&(!m.test(a)||!n.test(a)))return null;var c=Date.parse(a);return null!==c&&!isNaN(c)||q(a)?"date":null},function(a,b){var c=b.oLanguage.sDecimal;return t(a,c,!0)?"num-fmt"+c:null},function(a,b){var c=b.oLanguage.sDecimal;return v(a,c)?"html-num"+c:null},function(a,b){var c=b.oLanguage.sDecimal;return v(a,c,!0)?"html-num-fmt"+c:null},function(a){return q(a)||"string"==typeof a&&-1!==a.indexOf("<")?"html":null}]),d.extend(e.ext.type.search,{html:function(a){return q(a)?a:"string"==typeof a?a.replace(k," ").replace(l,""):""},string:function(a){return q(a)?a:"string"==typeof a?a.replace(k," "):a}}),d.extend(!0,e.ext.renderer,{header:{_:function(a,b,c,e){d(a.nTable).on("order.dt.DT",function(d,f,g,h){if(a===f){var i=c.idx;b.removeClass(c.sSortingClass+" "+e.sSortAsc+" "+e.sSortDesc).addClass("asc"==h[i]?e.sSortAsc:"desc"==h[i]?e.sSortDesc:c.sSortingClass)}})},jqueryui:function(a,b,c,e){var f=c.idx;d("<div/>").addClass(e.sSortJUIWrapper).append(b.contents()).append(d("<span/>").addClass(e.sSortIcon+" "+c.sSortingClassJUI)).appendTo(b),d(a.nTable).on("order.dt.DT",function(d,g,h,i){a===g&&(b.removeClass(e.sSortAsc+" "+e.sSortDesc).addClass("asc"==i[f]?e.sSortAsc:"desc"==i[f]?e.sSortDesc:c.sSortingClass),b.find("span."+e.sSortIcon).removeClass(e.sSortJUIAsc+" "+e.sSortJUIDesc+" "+e.sSortJUI+" "+e.sSortJUIAscAllowed+" "+e.sSortJUIDescAllowed).addClass("asc"==i[f]?e.sSortJUIAsc:"desc"==i[f]?e.sSortJUIDesc:c.sSortingClassJUI))})}}}),e.render={number:function(a,b,c,d){return{display:function(e){var g,h,f=0>e?"-":"";return e=Math.abs(parseFloat(e)),g=parseInt(e,10),h=c?b+(e-g).toFixed(c).substring(2):"",f+(d||"")+g.toString().replace(/\B(?=(\d{3})+(?!\d))/g,a)+h}}}},d.extend(e.ext.internal,{_fnExternApiFunc:Tc,_fnBuildAjax:pb,_fnAjaxUpdate:qb,_fnAjaxParameters:rb,_fnAjaxUpdateDraw:sb,_fnAjaxDataSrc:tb,_fnAddColumn:J,_fnColumnOptions:K,_fnAdjustColumnSizing:L,_fnVisibleToColumnIndex:M,_fnColumnIndexToVisible:N,_fnVisbleColumns:O,_fnGetColumns:P,_fnColumnTypes:Q,_fnApplyColumnDefs:R,_fnHungarianMap:B,_fnCamelToHungarian:C,_fnLanguageCompat:D,_fnBrowserDetect:H,_fnAddData:S,_fnAddTr:T,_fnNodeToDataIndex:U,_fnNodeToColumnIndex:V,_fnGetCellData:W,_fnSetCellData:X,_fnSplitObjNotation:$,_fnGetObjectDataFn:_,_fnSetObjectDataFn:ab,_fnGetDataMaster:bb,_fnClearTable:cb,_fnDeleteIndex:db,_fnInvalidateRow:eb,_fnGetRowElements:fb,_fnCreateTr:gb,_fnBuildHead:ib,_fnDrawHead:jb,_fnDraw:kb,_fnReDraw:lb,_fnAddOptionsHtml:mb,_fnDetectHeader:nb,_fnGetUniqueThs:ob,_fnFeatureHtmlFilter:ub,_fnFilterComplete:vb,_fnFilterCustom:wb,_fnFilterColumn:xb,_fnFilter:yb,_fnFilterCreateSearch:zb,_fnEscapeRegex:Ab,_fnFilterData:Db,_fnFeatureHtmlInfo:Gb,_fnUpdateInfo:Hb,_fnInfoMacros:Ib,_fnInitialise:Jb,_fnInitComplete:Kb,_fnLengthChange:Lb,_fnFeatureHtmlLength:Mb,_fnFeatureHtmlPaginate:Nb,_fnPageChange:Ob,_fnFeatureHtmlProcessing:Pb,_fnProcessingDisplay:Qb,_fnFeatureHtmlTable:Rb,_fnScrollDraw:Sb,_fnApplyToChildren:Tb,_fnCalculateColumnWidths:Vb,_fnThrottle:Wb,_fnConvertToWidth:Xb,_fnScrollingWidthAdjust:Yb,_fnGetWidestNode:Zb,_fnGetMaxLenString:$b,_fnStringToCss:_b,_fnScrollBarWidth:ac,_fnSortFlatten:bc,_fnSort:cc,_fnSortAria:dc,_fnSortListener:ec,_fnSortAttachListener:fc,_fnSortingClasses:gc,_fnSortData:hc,_fnSaveState:ic,_fnLoadState:jc,_fnSettingsFromNode:kc,_fnLog:lc,_fnMap:mc,_fnBindAction:oc,_fnCallbackReg:pc,_fnCallbackFire:qc,_fnLengthOverflow:rc,_fnRenderer:sc,_fnDataSource:tc,_fnRowAttributes:hb,_fnCalculateEnd:function(){}}),d.fn.dataTable=e,d.fn.dataTableSettings=e.settings,d.fn.dataTableExt=e.ext,d.fn.DataTable=function(a){return d(this).dataTable(a).api()},d.each(e,function(a,b){d.fn.DataTable[a]=b}),d.fn.dataTable})}(window,document);

/*<script type="text/javascript" src="${ctxStatic}/org/it313/datatables/1.10.2/extensions/TableTools/js/dataTables.tableTools.js"></script>*/
var TableTools;!function(a,b,c){var d=function(d){"use strict";var f={version:"1.0.4-TableTools2",clients:{},moviePath:"",nextId:1,$:function(a){return"string"==typeof a&&(a=b.getElementById(a)),a.addClass||(a.hide=function(){this.style.display="none"},a.show=function(){this.style.display=""},a.addClass=function(a){this.removeClass(a),this.className+=" "+a},a.removeClass=function(a){this.className=this.className.replace(new RegExp("\\s*"+a+"\\s*")," ").replace(/^\s+/,"").replace(/\s+$/,"")},a.hasClass=function(a){return!!this.className.match(new RegExp("\\s*"+a+"\\s*"))}),a},setMoviePath:function(a){this.moviePath=a},dispatch:function(a,b,c){var d=this.clients[a];d&&d.receiveEvent(b,c)},register:function(a,b){this.clients[a]=b},getDOMObjectPosition:function(a){var b={left:0,top:0,width:a.width?a.width:a.offsetWidth,height:a.height?a.height:a.offsetHeight};for(""!==a.style.width&&(b.width=a.style.width.replace("px","")),""!==a.style.height&&(b.height=a.style.height.replace("px",""));a;)b.left+=a.offsetLeft,b.top+=a.offsetTop,a=a.offsetParent;return b},Client:function(a){this.handlers={},this.id=f.nextId++,this.movieId="ZeroClipboard_TableToolsMovie_"+this.id,f.register(this.id,this),a&&this.glue(a)}};return f.Client.prototype={id:0,ready:!1,movie:null,clipText:"",fileName:"",action:"copy",handCursorEnabled:!0,cssEffects:!0,handlers:null,sized:!1,glue:function(a,c){var d,e,g;this.domElement=f.$(a),d=99,this.domElement.style.zIndex&&(d=parseInt(this.domElement.style.zIndex,10)+1),e=f.getDOMObjectPosition(this.domElement),this.div=b.createElement("div"),g=this.div.style,g.position="absolute",g.left="0px",g.top="0px",g.width=e.width+"px",g.height=e.height+"px",g.zIndex=d,"undefined"!=typeof c&&""!==c&&(this.div.title=c),0!==e.width&&0!==e.height&&(this.sized=!0),this.domElement&&(this.domElement.appendChild(this.div),this.div.innerHTML=this.getHTML(e.width,e.height).replace(/&/g,"&amp;"))},positionElement:function(){var c,a=f.getDOMObjectPosition(this.domElement),b=this.div.style;b.position="absolute",b.width=a.width+"px",b.height=a.height+"px",0!==a.width&&0!==a.height&&(this.sized=!0,c=this.div.childNodes[0],c.width=a.width,c.height=a.height)},getHTML:function(a,b){var e,c="",d="id="+this.id+"&width="+a+"&height="+b;return navigator.userAgent.match(/MSIE/)?(e=location.href.match(/^https/i)?"https://":"http://",c+='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+e+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="'+a+'" height="'+b+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+f.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+d+'"/><param name="wmode" value="transparent"/></object>'):c+='<embed id="'+this.movieId+'" src="'+f.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+a+'" height="'+b+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+d+'" wmode="transparent" />',c},hide:function(){this.div&&(this.div.style.left="-2000px")},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide(),this.div.innerHTML="";var a=b.getElementsByTagName("body")[0];try{a.removeChild(this.div)}catch(c){}this.domElement=null,this.div=null}},reposition:function(a){var b,c;a&&(this.domElement=f.$(a),this.domElement||this.hide()),this.domElement&&this.div&&(b=f.getDOMObjectPosition(this.domElement),c=this.div.style,c.left=""+b.left+"px",c.top=""+b.top+"px")},clearText:function(){this.clipText="",this.ready&&this.movie.clearText()},appendText:function(a){this.clipText+=a,this.ready&&this.movie.appendText(a)},setText:function(a){this.clipText=a,this.ready&&this.movie.setText(a)},setCharSet:function(a){this.charSet=a,this.ready&&this.movie.setCharSet(a)},setBomInc:function(a){this.incBom=a,this.ready&&this.movie.setBomInc(a)},setFileName:function(a){this.fileName=a,this.ready&&this.movie.setFileName(a)},setAction:function(a){this.action=a,this.ready&&this.movie.setAction(a)},addEventListener:function(a,b){a=a.toString().toLowerCase().replace(/^on/,""),this.handlers[a]||(this.handlers[a]=[]),this.handlers[a].push(b)},setHandCursor:function(a){this.handCursorEnabled=a,this.ready&&this.movie.setHandCursor(a)},setCSSEffects:function(a){this.cssEffects=!!a},receiveEvent:function(c,d){var e,f,g,h;switch(c=c.toString().toLowerCase().replace(/^on/,"")){case"load":if(this.movie=b.getElementById(this.movieId),!this.movie)return e=this,setTimeout(function(){e.receiveEvent("load",null)},1),void 0;if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/))return e=this,setTimeout(function(){e.receiveEvent("load",null)},100),this.ready=!0,void 0;this.ready=!0,this.movie.clearText(),this.movie.appendText(this.clipText),this.movie.setFileName(this.fileName),this.movie.setAction(this.action),this.movie.setCharSet(this.charSet),this.movie.setBomInc(this.incBom),this.movie.setHandCursor(this.handCursorEnabled);break;case"mouseover":this.domElement&&this.cssEffects&&this.recoverActive&&this.domElement.addClass("active");break;case"mouseout":this.domElement&&this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("active")&&(this.domElement.removeClass("active"),this.recoverActive=!0));break;case"mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case"mouseup":this.domElement&&this.cssEffects&&(this.domElement.removeClass("active"),this.recoverActive=!1)}if(this.handlers[c])for(f=0,g=this.handlers[c].length;g>f;f++)h=this.handlers[c][f],"function"==typeof h?h(this,d):"object"==typeof h&&2==h.length?h[0][h[1]](this,d):"string"==typeof h&&a[h](this,d)}},a.ZeroClipboard_TableTools=f,function(a,b,d){TableTools=function(b,c){!this instanceof TableTools&&alert("Warning: TableTools must be initialised with the keyword 'new'");var d=a.fn.dataTable.Api?new a.fn.dataTable.Api(b).settings()[0]:b.fnSettings();return this.s={that:this,dt:d,print:{saveStart:-1,saveLength:-1,saveScroll:-1,funcEnd:function(){}},buttonCounter:0,select:{type:"",selected:[],preRowSelect:null,postSelected:null,postDeselected:null,all:!1,selectedClass:""},custom:{},swfPath:"",buttonSet:[],master:!1,tags:{}},this.dom={container:null,table:null,print:{hidden:[],message:null},collection:{collection:null,background:null}},this.classes=a.extend(!0,{},TableTools.classes),this.s.dt.bJUI&&a.extend(!0,this.classes,TableTools.classes_themeroller),this.fnSettings=function(){return this.s},"undefined"==typeof c&&(c={}),TableTools._aInstances.push(this),this._fnConstruct(c),this},TableTools.prototype={fnGetSelected:function(a){var e,f,b=[],c=this.s.dt.aoData,d=this.s.dt.aiDisplay;if(a)for(e=0,f=d.length;f>e;e++)c[d[e]]._DTTT_selected&&b.push(c[d[e]].nTr);else for(e=0,f=c.length;f>e;e++)c[e]._DTTT_selected&&b.push(c[e].nTr);return b},fnGetSelectedData:function(){var c,d,a=[],b=this.s.dt.aoData;for(c=0,d=b.length;d>c;c++)b[c]._DTTT_selected&&a.push(this.s.dt.oInstance.fnGetData(c));return a},fnGetSelectedIndexes:function(a){var e,f,b=[],c=this.s.dt.aoData,d=this.s.dt.aiDisplay;if(a)for(e=0,f=d.length;f>e;e++)c[d[e]]._DTTT_selected&&b.push(d[e]);else for(e=0,f=c.length;f>e;e++)c[e]._DTTT_selected&&b.push(e);return b},fnIsSelected:function(a){var b=this.s.dt.oInstance.fnGetPosition(a);return this.s.dt.aoData[b]._DTTT_selected===!0?!0:!1},fnSelectAll:function(a){this._fnRowSelect(a?this.s.dt.aiDisplay:this.s.dt.aoData)},fnSelectNone:function(a){this._fnRowDeselect(this.fnGetSelectedIndexes(a))},fnSelect:function(a){"single"==this.s.select.type?(this.fnSelectNone(),this._fnRowSelect(a)):this._fnRowSelect(a)},fnDeselect:function(a){this._fnRowDeselect(a)},fnGetTitle:function(a){var c,b="";return"undefined"!=typeof a.sTitle&&""!==a.sTitle?b=a.sTitle:(c=d.getElementsByTagName("title"),c.length>0&&(b=c[0].innerHTML)),"¡".toString().length<4?b.replace(/[^a-zA-Z0-9_\u00A1-\uFFFF\.,\-_ !\(\)]/g,""):b.replace(/[^a-zA-Z0-9_\.,\-_ !\(\)]/g,"")},fnCalcColRatios:function(a){var g,h,b=this.s.dt.aoColumns,c=this._fnColumnTargets(a.mColumns),d=[],e=0,f=0;for(g=0,h=c.length;h>g;g++)c[g]&&(e=b[g].nTh.offsetWidth,f+=e,d.push(e));for(g=0,h=d.length;h>g;g++)d[g]=d[g]/f;return d.join("	")},fnGetTableData:function(a){return this.s.dt?this._fnGetDataTablesData(a):void 0},fnSetText:function(a,b){this._fnFlashSetText(a,b)},fnResizeButtons:function(){var a,b;for(a in f.clients)a&&(b=f.clients[a],"undefined"!=typeof b.domElement&&b.domElement.parentNode&&b.positionElement())},fnResizeRequired:function(){var a,b;for(a in f.clients)if(a&&(b=f.clients[a],"undefined"!=typeof b.domElement&&b.domElement.parentNode==this.dom.container&&b.sized===!1))return!0;return!1},fnPrint:function(a,b){b===c&&(b={}),a===c||a?this._fnPrintStart(b):this._fnPrintEnd()},fnInfo:function(b,c){var d=a("<div/>").addClass(this.classes.print.info).html(b).appendTo("body");setTimeout(function(){d.fadeOut("normal",function(){d.remove()})},c)},fnContainer:function(){return this.dom.container},_fnConstruct:function(b){var c=this;this._fnCustomiseSettings(b),this.dom.container=d.createElement(this.s.tags.container),this.dom.container.className=this.classes.container,"none"!=this.s.select.type&&this._fnRowSelectConfig(),this._fnButtonDefinations(this.s.buttonSet,this.dom.container),this.s.dt.aoDestroyCallback.push({sName:"TableTools",fn:function(){a(c.s.dt.nTBody).off("dblclick.DTTT_Select","tr"),a(c.dom.container).empty();var b=a.inArray(c,TableTools._aInstances);-1!==b&&TableTools._aInstances.splice(b,1)}})},_fnCustomiseSettings:function(b){"undefined"==typeof this.s.dt._TableToolsInit&&(this.s.master=!0,this.s.dt._TableToolsInit=!0),this.dom.table=this.s.dt.nTable,this.s.custom=a.extend({},TableTools.DEFAULTS,b),this.s.swfPath=this.s.custom.sSwfPath,"undefined"!=typeof f&&(f.moviePath=this.s.swfPath),this.s.select.type=this.s.custom.sRowSelect,this.s.select.preRowSelect=this.s.custom.fnPreRowSelect,this.s.select.postSelected=this.s.custom.fnRowSelected,this.s.select.postDeselected=this.s.custom.fnRowDeselected,this.s.custom.sSelectedClass&&(this.classes.select.row=this.s.custom.sSelectedClass),this.s.tags=this.s.custom.oTags,this.s.buttonSet=this.s.custom.aButtons},_fnButtonDefinations:function(b,c){var d,e,f,g,h;for(e=0,f=b.length;f>e;e++){if("string"==typeof b[e]){if("undefined"==typeof TableTools.BUTTONS[b[e]]){alert("TableTools: Warning - unknown button type: "+b[e]);continue}d=a.extend({},TableTools.BUTTONS[b[e]],!0)}else{if("undefined"==typeof TableTools.BUTTONS[b[e].sExtends]){alert("TableTools: Warning - unknown button type: "+b[e].sExtends);continue}g=a.extend({},TableTools.BUTTONS[b[e].sExtends],!0),d=a.extend(g,b[e],!0)}h=this._fnCreateButton(d,a(c).hasClass(this.classes.collection.container)),h&&c.appendChild(h)}},_fnCreateButton:function(a,b){var c=this._fnButtonBase(a,b);if(a.sAction.match(/flash/)){if(!this._fnHasFlash())return!1;this._fnFlashConfig(c,a)}else"text"==a.sAction?this._fnTextConfig(c,a):"div"==a.sAction?this._fnTextConfig(c,a):"collection"==a.sAction&&(this._fnTextConfig(c,a),this._fnCollectionConfig(c,a));return c},_fnButtonBase:function(a,b){var c,e,f,g,h,i;return b?(c=a.sTag&&"default"!==a.sTag?a.sTag:this.s.tags.collection.button,e=a.sLinerTag&&"default"!==a.sLinerTag?a.sLiner:this.s.tags.collection.liner,f=this.classes.collection.buttons.normal):(c=a.sTag&&"default"!==a.sTag?a.sTag:this.s.tags.button,e=a.sLinerTag&&"default"!==a.sLinerTag?a.sLiner:this.s.tags.liner,f=this.classes.buttons.normal),g=d.createElement(c),h=d.createElement(e),i=this._fnGetMasterSettings(),g.className=f+" "+a.sButtonClass,g.setAttribute("id","ToolTables_"+this.s.dt.sInstance+"_"+i.buttonCounter),g.appendChild(h),h.innerHTML=a.sButtonText,i.buttonCounter++,g},_fnGetMasterSettings:function(){var a,b,c;if(this.s.master)return this.s;for(a=TableTools._aInstances,b=0,c=a.length;c>b;b++)if(this.dom.table==a[b].s.dt.nTable)return a[b].s},_fnCollectionConfig:function(a,b){var c=d.createElement(this.s.tags.collection.container);c.style.display="none",c.className=this.classes.collection.container,b._collection=c,d.body.appendChild(c),this._fnButtonDefinations(b.aButtons,c)},_fnCollectionShow:function(c,e){var o,p,q,f=this,g=a(c).offset(),h=e._collection,i=g.left,j=g.top+a(c).outerHeight(),k=a(b).height(),l=a(d).height(),m=a(b).width(),n=a(d).width();h.style.position="absolute",h.style.left=i+"px",h.style.top=j+"px",h.style.display="block",a(h).css("opacity",0),o=d.createElement("div"),o.style.position="absolute",o.style.left="0px",o.style.top="0px",o.style.height=(k>l?k:l)+"px",o.style.width=(m>n?m:n)+"px",o.className=this.classes.collection.background,a(o).css("opacity",0),d.body.appendChild(o),d.body.appendChild(h),p=a(h).outerWidth(),q=a(h).outerHeight(),i+p>n&&(h.style.left=n-p+"px"),j+q>l&&(h.style.top=j-q-a(c).outerHeight()+"px"),this.dom.collection.collection=h,this.dom.collection.background=o,setTimeout(function(){a(h).animate({opacity:1},500),a(o).animate({opacity:.25},500)},10),this.fnResizeButtons(),a(o).click(function(){f._fnCollectionHide.call(f,null,null)})},_fnCollectionHide:function(b,c){(null===c||"collection"!=c.sExtends)&&null!==this.dom.collection.collection&&(a(this.dom.collection.collection).animate({opacity:0},500,function(){this.style.display="none"}),a(this.dom.collection.background).animate({opacity:0},500,function(){this.parentNode.removeChild(this)}),this.dom.collection.collection=null,this.dom.collection.background=null)},_fnRowSelectConfig:function(){if(this.s.master){var b=this,e=this.s.dt;this.s.dt.aoOpenRows,a(e.nTable).addClass(this.classes.select.table),"os"===this.s.select.type&&(a(e.nTBody).on("mousedown.DTTT_Select","tr",function(b){b.shiftKey&&a(e.nTBody).css("-moz-user-select","none").one("selectstart.DTTT_Select","tr",function(){return!1})}),a(e.nTBody).on("mouseup.DTTT_Select","tr",function(){a(e.nTBody).css("-moz-user-select","")})),a(e.nTBody).on("dblclick.DTTT_Select",this.s.custom.sRowSelector,function(c){var h,i,j,k,d="tr"===this.nodeName.toLowerCase()?this:a(this).parents("tr")[0],f=b.s.select,g=b.s.dt.oInstance.fnGetPosition(d);d.parentNode==e.nTBody&&null!==e.oInstance.fnGetData(d)&&("os"==f.type?c.ctrlKey||c.metaKey?b.fnIsSelected(d)?b._fnRowDeselect(d,c):b._fnRowSelect(d,c):c.shiftKey?(h=b.s.dt.aiDisplay.slice(),i=a.inArray(f.lastRow,h),j=a.inArray(g,h),0===b.fnGetSelected().length||-1===i?h.splice(a.inArray(g,h)+1,h.length):(i>j&&(k=j,j=i,i=k),h.splice(j+1,h.length),h.splice(0,i)),b.fnIsSelected(d)?(h.splice(a.inArray(g,h),1),b._fnRowDeselect(h,c)):b._fnRowSelect(h,c)):b.fnIsSelected(d)&&1===b.fnGetSelected().length?b._fnRowDeselect(d,c):(b.fnSelectNone(),b._fnRowSelect(d,c)):b.fnIsSelected(d)?b._fnRowDeselect(d,c):"single"==f.type?(b.fnSelectNone(),b._fnRowSelect(d,c)):"multi"==f.type&&b._fnRowSelect(d,c),f.lastRow=g)}),e.oApi._fnCallbackReg(e,"aoRowCreatedCallback",function(c,d,f){e.aoData[f]._DTTT_selected&&a(c).addClass(b.classes.select.row)},"TableTools-SelectAll")}},_fnRowSelect:function(b,c){var h,i,d=this,e=this._fnSelectData(b),g=(0===e.length?null:e[0].nTr,[]);for(h=0,i=e.length;i>h;h++)e[h].nTr&&g.push(e[h].nTr);if(null===this.s.select.preRowSelect||this.s.select.preRowSelect.call(this,c,g,!0)){for(h=0,i=e.length;i>h;h++)e[h]._DTTT_selected=!0,e[h].nTr&&a(e[h].nTr).addClass(d.classes.select.row);null!==this.s.select.postSelected&&this.s.select.postSelected.call(this,g),TableTools._fnEventDispatch(this,"select",g,!0)}},_fnRowDeselect:function(b,c){var h,i,d=this,e=this._fnSelectData(b),g=(0===e.length?null:e[0].nTr,[]);for(h=0,i=e.length;i>h;h++)e[h].nTr&&g.push(e[h].nTr);if(null===this.s.select.preRowSelect||this.s.select.preRowSelect.call(this,c,g,!1)){for(h=0,i=e.length;i>h;h++)e[h]._DTTT_selected=!1,e[h].nTr&&a(e[h].nTr).removeClass(d.classes.select.row);null!==this.s.select.postDeselected&&this.s.select.postDeselected.call(this,g),TableTools._fnEventDispatch(this,"select",g,!1)}},_fnSelectData:function(a){var c,d,e,b=[];if(a.nodeName)c=this.s.dt.oInstance.fnGetPosition(a),b.push(this.s.dt.aoData[c]);else{if("undefined"!=typeof a.length){for(d=0,e=a.length;e>d;d++)a[d].nodeName?(c=this.s.dt.oInstance.fnGetPosition(a[d]),b.push(this.s.dt.aoData[c])):"number"==typeof a[d]?b.push(this.s.dt.aoData[a[d]]):b.push(a[d]);return b}b.push(a)}return b},_fnTextConfig:function(b,c){var d=this;null!==c.fnInit&&c.fnInit.call(this,b,c),""!==c.sToolTip&&(b.title=c.sToolTip),a(b).hover(function(){null!==c.fnMouseover&&c.fnMouseover.call(this,b,c,null)},function(){null!==c.fnMouseout&&c.fnMouseout.call(this,b,c,null)}),null!==c.fnSelect&&TableTools._fnEventListen(this,"select",function(a){c.fnSelect.call(d,b,c,a)}),a(b).click(function(a){null!==c.fnClick&&c.fnClick.call(d,b,c,null,a),null!==c.fnComplete&&c.fnComplete.call(d,b,c,null,null),d._fnCollectionHide(b,c)})},_fnHasFlash:function(){try{var a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(a)return!0}catch(b){if(navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]!==c&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return!0}return!1},_fnFlashConfig:function(a,b){var c=this,d=new f.Client;null!==b.fnInit&&b.fnInit.call(this,a,b),d.setHandCursor(!0),"flash_save"==b.sAction?(d.setAction("save"),d.setCharSet("utf16le"==b.sCharSet?"UTF16LE":"UTF8"),d.setBomInc(b.bBomInc),d.setFileName(b.sFileName.replace("*",this.fnGetTitle(b)))):"flash_pdf"==b.sAction?(d.setAction("pdf"),d.setFileName(b.sFileName.replace("*",this.fnGetTitle(b)))):d.setAction("copy"),d.addEventListener("mouseOver",function(){null!==b.fnMouseover&&b.fnMouseover.call(c,a,b,d)}),d.addEventListener("mouseOut",function(){null!==b.fnMouseout&&b.fnMouseout.call(c,a,b,d)}),d.addEventListener("mouseDown",function(){null!==b.fnClick&&b.fnClick.call(c,a,b,d)}),d.addEventListener("complete",function(e,f){null!==b.fnComplete&&b.fnComplete.call(c,a,b,d,f),c._fnCollectionHide(a,b)}),this._fnFlashGlue(d,a,b.sToolTip)},_fnFlashGlue:function(a,b,c){var e=this,f=b.getAttribute("id");d.getElementById(f)?a.glue(b,c):setTimeout(function(){e._fnFlashGlue(a,b,c)},100)},_fnFlashSetText:function(a,b){var d,e,c=this._fnChunkData(b,8192);for(a.clearText(),d=0,e=c.length;e>d;d++)a.appendText(c[d])},_fnColumnTargets:function(a){var d,e,b=[],c=this.s.dt;if("object"==typeof a){for(d=0,e=c.aoColumns.length;e>d;d++)b.push(!1);for(d=0,e=a.length;e>d;d++)b[a[d]]=!0}else if("visible"==a)for(d=0,e=c.aoColumns.length;e>d;d++)b.push(c.aoColumns[d].bVisible?!0:!1);else if("hidden"==a)for(d=0,e=c.aoColumns.length;e>d;d++)b.push(c.aoColumns[d].bVisible?!1:!0);else if("sortable"==a)for(d=0,e=c.aoColumns.length;e>d;d++)b.push(c.aoColumns[d].bSortable?!0:!1);else for(d=0,e=c.aoColumns.length;e>d;d++)b.push(!0);return b},_fnNewline:function(a){return"auto"==a.sNewLine?navigator.userAgent.match(/Windows/)?"\r\n":"\n":a.sNewLine},_fnGetDataTablesData:function(b){var c,d,e,f,g,j,l,q,r,s,t,u,h=[],i="",k=this.s.dt,n=new RegExp(b.sFieldBoundary,"g"),o=this._fnColumnTargets(b.mColumns),p="undefined"!=typeof b.bSelectedOnly?b.bSelectedOnly:!1;if(b.bHeader){for(g=[],c=0,d=k.aoColumns.length;d>c;c++)o[c]&&(i=k.aoColumns[c].sTitle.replace(/\n/g," ").replace(/<.*?>/g,"").replace(/^\s+|\s+$/g,""),i=this._fnHtmlDecode(i),g.push(this._fnBoundData(i,b.sFieldBoundary,n)));h.push(g.join(b.sFieldSeperator))}for(q=this.fnGetSelected(),p="none"!==this.s.select.type&&p&&0!==q.length,r=a.fn.dataTable.Api,s=r?new r(k).rows(b.oSelectorOpts).indexes().flatten().toArray():k.oInstance.$("tr",b.oSelectorOpts).map(function(b,c){return p&&-1===a.inArray(c,q)?null:k.oInstance.fnGetPosition(c)}).get(),e=0,f=s.length;f>e;e++){for(l=k.aoData[s[e]].nTr,g=[],c=0,d=k.aoColumns.length;d>c;c++)o[c]&&(t=k.oApi._fnGetCellData(k,s[e],c,"display"),b.fnCellRender?i=b.fnCellRender(t,c,l,s[e])+"":"string"==typeof t?(i=t.replace(/\n/g," "),i=i.replace(/<img.*?\s+alt\s*=\s*(?:"([^"]+)"|'([^']+)'|([^\s>]+)).*?>/gi,"$1$2$3"),i=i.replace(/<.*?>/g,"")):i=t+"",i=i.replace(/^\s+/,"").replace(/\s+$/,""),i=this._fnHtmlDecode(i),g.push(this._fnBoundData(i,b.sFieldBoundary,n)));h.push(g.join(b.sFieldSeperator)),b.bOpenRows&&(j=a.grep(k.aoOpenRows,function(a){return a.nParent===l}),1===j.length&&(i=this._fnBoundData(a("td",j[0].nTr).html(),b.sFieldBoundary,n),h.push(i)))}if(b.bFooter&&null!==k.nTFoot){for(g=[],c=0,d=k.aoColumns.length;d>c;c++)o[c]&&null!==k.aoColumns[c].nTf&&(i=k.aoColumns[c].nTf.innerHTML.replace(/\n/g," ").replace(/<.*?>/g,""),i=this._fnHtmlDecode(i),g.push(this._fnBoundData(i,b.sFieldBoundary,n)));h.push(g.join(b.sFieldSeperator))}return u=h.join(this._fnNewline(b))},_fnBoundData:function(a,b,c){return""===b?a:b+a.replace(c,b+b)+b},_fnChunkData:function(a,b){var e,c=[],d=a.length;for(e=0;d>e;e+=b)d>e+b?c.push(a.substring(e,e+b)):c.push(a.substring(e,d));return c},_fnHtmlDecode:function(a){if(-1===a.indexOf("&"))return a;var b=d.createElement("div");return a.replace(/&([^\s]*?);/g,function(a,c){return"#"===a.substr(1,1)?String.fromCharCode(Number(c.substr(1))):(b.innerHTML=a,b.childNodes[0].nodeValue)})},_fnPrintStart:function(c){var g,h,i,j,e=this,f=this.s.dt;this._fnPrintHideNodes(f.nTable),this.s.print.saveStart=f._iDisplayStart,this.s.print.saveLength=f._iDisplayLength,c.bShowAll&&(f._iDisplayStart=0,f._iDisplayLength=-1,f.oApi._fnCalculateEnd&&f.oApi._fnCalculateEnd(f),f.oApi._fnDraw(f)),(""!==f.oScroll.sX||""!==f.oScroll.sY)&&(this._fnPrintScrollStart(f),a(this.s.dt.nTable).bind("draw.DTTT_Print",function(){e._fnPrintScrollStart(f)})),g=f.aanFeatures;for(h in g)if("i"!=h&&"t"!=h&&1==h.length)for(i=0,j=g[h].length;j>i;i++)this.dom.print.hidden.push({node:g[h][i],display:"block"}),g[h][i].style.display="none";a(d.body).addClass(this.classes.print.body),""!==c.sInfo&&this.fnInfo(c.sInfo,3e3),c.sMessage&&a("<div/>").addClass(this.classes.print.message).html(c.sMessage).prependTo("body"),this.s.print.saveScroll=a(b).scrollTop(),b.scrollTo(0,0),a(d).bind("keydown.DTTT",function(a){27==a.keyCode&&(a.preventDefault(),e._fnPrintEnd.call(e,a))})},_fnPrintEnd:function(){var f=this.s.dt,g=this.s.print;this.dom.print,this._fnPrintShowNodes(),(""!==f.oScroll.sX||""!==f.oScroll.sY)&&(a(this.s.dt.nTable).unbind("draw.DTTT_Print"),this._fnPrintScrollEnd()),b.scrollTo(0,g.saveScroll),a("div."+this.classes.print.message).remove(),a(d.body).removeClass("DTTT_Print"),f._iDisplayStart=g.saveStart,f._iDisplayLength=g.saveLength,f.oApi._fnCalculateEnd&&f.oApi._fnCalculateEnd(f),f.oApi._fnDraw(f),a(d).unbind("keydown.DTTT")},_fnPrintScrollStart:function(){var f,g,b=this.s.dt,c=b.nScrollHead.getElementsByTagName("div")[0],e=(c.getElementsByTagName("table")[0],b.nTable.parentNode);f=b.nTable.getElementsByTagName("thead"),f.length>0&&b.nTable.removeChild(f[0]),null!==b.nTFoot&&(g=b.nTable.getElementsByTagName("tfoot"),g.length>0&&b.nTable.removeChild(g[0])),f=b.nTHead.cloneNode(!0),b.nTable.insertBefore(f,b.nTable.childNodes[0]),null!==b.nTFoot&&(g=b.nTFoot.cloneNode(!0),b.nTable.insertBefore(g,b.nTable.childNodes[1])),""!==b.oScroll.sX&&(b.nTable.style.width=a(b.nTable).outerWidth()+"px",e.style.width=a(b.nTable).outerWidth()+"px",e.style.overflow="visible"),""!==b.oScroll.sY&&(e.style.height=a(b.nTable).outerHeight()+"px",e.style.overflow="visible")},_fnPrintScrollEnd:function(){var a=this.s.dt,b=a.nTable.parentNode;""!==a.oScroll.sX&&(b.style.width=a.oApi._fnStringToCss(a.oScroll.sX),b.style.overflow="auto"),""!==a.oScroll.sY&&(b.style.height=a.oApi._fnStringToCss(a.oScroll.sY),b.style.overflow="auto")},_fnPrintShowNodes:function(){var b,c,a=this.dom.print.hidden;for(b=0,c=a.length;c>b;b++)a[b].node.style.display=a[b].display;a.splice(0,a.length)},_fnPrintHideNodes:function(b){var f,g,h,c=this.dom.print.hidden,d=b.parentNode,e=d.childNodes;for(f=0,g=e.length;g>f;f++)e[f]!=b&&1==e[f].nodeType&&(h=a(e[f]).css("display"),"none"!=h&&(c.push({node:e[f],display:h}),e[f].style.display="none"));"BODY"!=d.nodeName.toUpperCase()&&this._fnPrintHideNodes(d)}},TableTools._aInstances=[],TableTools._aListeners=[],TableTools.fnGetMasters=function(){var b,c,a=[];for(b=0,c=TableTools._aInstances.length;c>b;b++)TableTools._aInstances[b].s.master&&a.push(TableTools._aInstances[b]);return a},TableTools.fnGetInstance=function(a){"object"!=typeof a&&(a=d.getElementById(a));for(var b=0,c=TableTools._aInstances.length;c>b;b++)if(TableTools._aInstances[b].s.master&&TableTools._aInstances[b].dom.table==a)return TableTools._aInstances[b];return null},TableTools._fnEventListen=function(a,b,c){TableTools._aListeners.push({that:a,type:b,fn:c})},TableTools._fnEventDispatch=function(a,b,c,d){var f,g,e=TableTools._aListeners;for(f=0,g=e.length;g>f;f++)a.dom.table==e[f].that.dom.table&&e[f].type==b&&e[f].fn(c,d)},TableTools.buttonBase={sAction:"text",sTag:"default",sLinerTag:"default",sButtonClass:"DTTT_button_text",sButtonText:"Button text",sTitle:"",sToolTip:"",sCharSet:"utf8",bBomInc:!1,sFileName:"*.csv",sFieldBoundary:"",sFieldSeperator:"	",sNewLine:"auto",mColumns:"all",bHeader:!0,bFooter:!0,bOpenRows:!1,bSelectedOnly:!1,oSelectorOpts:c,fnMouseover:null,fnMouseout:null,fnClick:null,fnSelect:null,fnComplete:null,fnInit:null,fnCellRender:null},TableTools.BUTTONS={csv:a.extend({},TableTools.buttonBase,{sAction:"flash_save",sButtonClass:"DTTT_button_csv",sButtonText:"CSV",sFieldBoundary:'"',sFieldSeperator:",",fnClick:function(a,b,c){this.fnSetText(c,this.fnGetTableData(b))}}),xls:a.extend({},TableTools.buttonBase,{sAction:"flash_save",sCharSet:"utf16le",bBomInc:!0,sButtonClass:"DTTT_button_xls",sButtonText:"Excel",fnClick:function(a,b,c){this.fnSetText(c,this.fnGetTableData(b))}}),copy:a.extend({},TableTools.buttonBase,{sAction:"flash_copy",sButtonClass:"DTTT_button_copy",sButtonText:"Copy",fnClick:function(a,b,c){this.fnSetText(c,this.fnGetTableData(b))},fnComplete:function(a,b,c,d){var f,e=d.split("\n").length;b.bHeader&&e--,null!==this.s.dt.nTFoot&&b.bFooter&&e--,f=1==e?"":"s",this.fnInfo("<h6>Table copied</h6><p>Copied "+e+" row"+f+" to the clipboard.</p>",1500)}}),pdf:a.extend({},TableTools.buttonBase,{sAction:"flash_pdf",sNewLine:"\n",sFileName:"*.pdf",sButtonClass:"DTTT_button_pdf",sButtonText:"PDF",sPdfOrientation:"portrait",sPdfSize:"A4",sPdfMessage:"",fnClick:function(a,b,c){this.fnSetText(c,"title:"+this.fnGetTitle(b)+"\n"+"message:"+b.sPdfMessage+"\n"+"colWidth:"+this.fnCalcColRatios(b)+"\n"+"orientation:"+b.sPdfOrientation+"\n"+"size:"+b.sPdfSize+"\n"+"--/TableToolsOpts--\n"+this.fnGetTableData(b))}}),print:a.extend({},TableTools.buttonBase,{sInfo:"<h6>Print view</h6><p>Please use your browser's print function to print this table. Press escape when finished.</p>",sMessage:null,bShowAll:!0,sToolTip:"View print view",sButtonClass:"DTTT_button_print",sButtonText:"Print",fnClick:function(a,b){this.fnPrint(!0,b)}}),text:a.extend({},TableTools.buttonBase),select:a.extend({},TableTools.buttonBase,{sButtonText:"Select button",fnSelect:function(b){0!==this.fnGetSelected().length?a(b).removeClass(this.classes.buttons.disabled):a(b).addClass(this.classes.buttons.disabled)},fnInit:function(b){a(b).addClass(this.classes.buttons.disabled)}}),select_single:a.extend({},TableTools.buttonBase,{sButtonText:"Select button",fnSelect:function(b){var d=this.fnGetSelected().length;1==d?a(b).removeClass(this.classes.buttons.disabled):a(b).addClass(this.classes.buttons.disabled)},fnInit:function(b){a(b).addClass(this.classes.buttons.disabled)}}),select_all:a.extend({},TableTools.buttonBase,{sButtonText:"Select all",fnClick:function(){this.fnSelectAll()},fnSelect:function(b){this.fnGetSelected().length==this.s.dt.fnRecordsDisplay()?a(b).addClass(this.classes.buttons.disabled):a(b).removeClass(this.classes.buttons.disabled)}}),select_none:a.extend({},TableTools.buttonBase,{sButtonText:"Deselect all",fnClick:function(){this.fnSelectNone()},fnSelect:function(b){0!==this.fnGetSelected().length?a(b).removeClass(this.classes.buttons.disabled):a(b).addClass(this.classes.buttons.disabled)},fnInit:function(b){a(b).addClass(this.classes.buttons.disabled)}}),ajax:a.extend({},TableTools.buttonBase,{sAjaxUrl:"/xhr.php",sButtonText:"Ajax button",fnClick:function(b,c){var d=this.fnGetTableData(c);a.ajax({url:c.sAjaxUrl,data:[{name:"tableData",value:d}],success:c.fnAjaxComplete,dataType:"json",type:"POST",cache:!1,error:function(){alert("Error detected when sending table data to server")}})},fnAjaxComplete:function(){alert("Ajax complete")}}),div:a.extend({},TableTools.buttonBase,{sAction:"div",sTag:"div",sButtonClass:"DTTT_nonbutton",sButtonText:"Text button"}),collection:a.extend({},TableTools.buttonBase,{sAction:"collection",sButtonClass:"DTTT_button_collection",sButtonText:"Collection",fnClick:function(a,b){this._fnCollectionShow(a,b)}})},TableTools.buttons=TableTools.BUTTONS,TableTools.classes={container:"DTTT_container",buttons:{normal:"DTTT_button",disabled:"DTTT_disabled"},collection:{container:"DTTT_collection",background:"DTTT_collection_background",buttons:{normal:"DTTT_button",disabled:"DTTT_disabled"}},select:{table:"DTTT_selectable",row:"DTTT_selected selected"},print:{body:"DTTT_Print",info:"DTTT_print_info",message:"DTTT_PrintMessage"}},TableTools.classes_themeroller={container:"DTTT_container ui-buttonset ui-buttonset-multi",buttons:{normal:"DTTT_button ui-button ui-state-default"},collection:{container:"DTTT_collection ui-buttonset ui-buttonset-multi"}},TableTools.DEFAULTS={sSwfPath:"../swf/copy_csv_xls_pdf.swf",sRowSelect:"none",sRowSelector:"tr",sSelectedClass:null,fnPreRowSelect:null,fnRowSelected:null,fnRowDeselected:null,aButtons:["copy","csv","xls","pdf","print"],oTags:{container:"div",button:"a",liner:"span",collection:{container:"div",button:"a",liner:"span"}}},TableTools.defaults=TableTools.DEFAULTS,TableTools.prototype.CLASS="TableTools",TableTools.version="2.2.2",a.fn.dataTable.Api&&a.fn.dataTable.Api.register("tabletools()",function(){var a=null;return this.context.length>0&&(a=TableTools.fnGetInstance(this.context[0].nTable)),a}),"function"==typeof a.fn.dataTable&&"function"==typeof a.fn.dataTableExt.fnVersionCheck&&a.fn.dataTableExt.fnVersionCheck("1.9.0")?a.fn.dataTableExt.aoFeatures.push({fnInit:function(a){var b=a.oInit,c=b?b.tableTools||b.oTableTools||{}:{};return new TableTools(a.oInstance,c).dom.container},cFeature:"T",sFeature:"TableTools"}):alert("Warning: TableTools requires DataTables 1.9.0 or newer - www.datatables.net/download"),a.fn.DataTable.TableTools=TableTools}(jQuery,a,b),"function"==typeof d.fn.dataTable&&"function"==typeof d.fn.dataTableExt.fnVersionCheck&&d.fn.dataTableExt.fnVersionCheck("1.9.0")?d.fn.dataTableExt.aoFeatures.push({fnInit:function(a){var b="undefined"!=typeof a.oInit.oTableTools?a.oInit.oTableTools:{},c=new TableTools(a.oInstance,b);return TableTools._aInstances.push(c),c.dom.container},cFeature:"T",sFeature:"TableTools"}):alert("Warning: TableTools 2 requires DataTables 1.9.0 or newer - www.datatables.net/download"),d.fn.dataTable.TableTools=TableTools,d.fn.DataTable.TableTools=TableTools,TableTools};"function"==typeof define&&define.amd?define(["jquery","datatables"],d):"object"==typeof exports?d(require("jquery"),require("datatables")):jQuery&&!jQuery.fn.dataTable.TableTools&&d(jQuery,jQuery.fn.dataTable)}(window,document);

/*<script type="text/javascript" src="${ctxStatic}/org/it313/datatables/1.10.2/media/js/jquery.ba-bbq.js"></script>*/
!function(a){"$:nomunge";function C(a){return"string"==typeof a}function D(a){var b=d.call(arguments,1);return function(){return a.apply(this,b.concat(d.call(arguments)))}}function E(a){return a.replace(x,"$2")}function F(a){return a.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function G(b,d,f,h,j){var k,l,m,n,o;return h!==c?(m=f.match(b?x:/^([^#?]*)\??([^#]*)(#?.*)/),o=m[3]||"",2===j&&C(h)?l=h.replace(b?w:v,""):(n=i(m[2]),h=C(h)?i[b?r:q](h):h,l=2===j?h:1===j?a.extend({},h,n):a.extend({},n,h),l=g(l),b&&(l=l.replace(y,e))),k=m[1]+(b?A:l||!m[1]?"?":"")+l+o):k=d(f!==c?f:location.href),k}function H(a,b,d){return b===c||"boolean"==typeof b?(d=b,b=f[a?r:q]()):b=C(b)?b.replace(a?w:v,""):b,i(b,d)}function I(b,d,e,g){return C(e)||"object"==typeof e||(g=e,e=d,d=c),this.each(function(){var c=a(this),h=d||n()[(this.nodeName||"").toLowerCase()]||"",i=h&&c.attr(h)||"";c.attr(h,f[b](i,e,g))})}var c,g,h,i,j,l,m,n,w,x,y,z,A,d=Array.prototype.slice,e=decodeURIComponent,f=a.param,k=a.bbq=a.bbq||{},o=a.event.special,p="hashchange",q="querystring",r="fragment",s="elemUrlAttr",t="href",u="src",v=/^.*\?|#.*$/g,B={};f[q]=D(G,0,F),f[r]=h=D(G,1,E),f.sorted=g=function(b,c){var d=[],e={};return a.each(f(b,c).split("&"),function(a,b){var c=b.replace(/(?:%5B|=).*$/,""),f=e[c];f||(f=e[c]=[],d.push(c)),f.push(b)}),a.map(d.sort(),function(a){return e[a]}).join("&")},h.noEscape=function(b){b=b||"";var c=a.map(b.split(""),encodeURIComponent);y=new RegExp(c.join("|"),"g")},h.noEscape(",/"),h.ajaxCrawlable=function(a){return a!==c&&(a?(w=/^.*(?:#!|#)/,x=/^([^#]*)(?:#!|#)?(.*)$/,A="#!"):(w=/^.*#/,x=/^([^#]*)#?(.*)$/,A="#"),z=!!a),z},h.ajaxCrawlable(0),a.deparam=i=function(b,d){var f={},g={"true":!0,"false":!1,"null":null};return a.each(b.replace(/\+/g," ").split("&"),function(b,h){var k,i=h.split("="),j=e(i[0]),l=f,m=0,n=j.split("]["),o=n.length-1;if(/\[/.test(n[0])&&/\]$/.test(n[o])?(n[o]=n[o].replace(/\]$/,""),n=n.shift().split("[").concat(n),o=n.length-1):o=0,2===i.length)if(k=e(i[1]),d&&(k=k&&!isNaN(k)?+k:"undefined"===k?c:g[k]!==c?g[k]:k),o)for(;o>=m;m++)j=""===n[m]?l.length:n[m],l=l[j]=o>m?l[j]||(n[m+1]&&isNaN(n[m+1])?{}:[]):k;else a.isArray(f[j])?f[j].push(k):f[j]=f[j]!==c?[f[j],k]:k;else j&&(f[j]=d?c:"")}),f},i[q]=D(H,0),i[r]=j=D(H,1),a[s]||(a[s]=function(b){return a.extend(B,b)})({a:t,base:t,iframe:u,img:u,input:u,form:"action",link:t,script:u}),n=a[s],a.fn[q]=D(I,q),a.fn[r]=D(I,r),k.pushState=l=function(a,b){C(a)&&/^#/.test(a)&&b===c&&(b=2);var d=a!==c,e=h(location.href,d?a:{},d?b:2);location.href=e},k.getState=m=function(a,b){return a===c||"boolean"==typeof a?j(a):j(b)[a]},k.removeState=function(b){var d={};b!==c&&(d=m(),a.each(a.isArray(b)?b:arguments,function(a,b){delete d[b]})),l(d,2)},o[p]=a.extend(o[p],{add:function(b){function e(a){var b=a[r]=h();a.getState=function(a,d){return a===c||"boolean"==typeof a?i(b,a):i(b,d)[a]},d.apply(this,arguments)}var d;return a.isFunction(b)?(d=b,e):(d=b.handler,b.handler=e,void 0)}})}(jQuery,this),function(a,b,c){"$:nomunge";function j(a){return a=a||location.href,"#"+a.replace(/^[^#]*#?(.*)$/,"$1")}var f,d="hashchange",e=document,g=a.event.special,h=e.documentMode,i="on"+d in b&&(h===c||h>7);a.fn[d]=function(a){return a?this.bind(d,a):this.trigger(d)},a.fn[d].delay=50,g[d]=a.extend(g[d],{setup:function(){return i?!1:(a(f.start),void 0)},teardown:function(){return i?!1:(a(f.stop),void 0)}}),f=function(){function n(){var c=j(),e=m(h);c!==h?(l(h=c,e),a(b).trigger(d)):e!==h&&(location.href=location.href.replace(/#.*/,"")+e),g=setTimeout(n,a.fn[d].delay)}var g,f={},h=j(),k=function(a){return a},l=k,m=k;return f.start=function(){g||n()},f.stop=function(){g&&clearTimeout(g),g=c},a.browser.msie&&!i&&function(){var b,c;f.start=function(){b||(c=a.fn[d].src,c=c&&c+j(),b=a('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){c||l(j()),n()}).attr("src",c||"javascript:0").insertAfter("body")[0].contentWindow,e.onpropertychange=function(){try{"title"===event.propertyName&&(b.document.title=e.title)}catch(a){}})},f.stop=k,m=function(){return j(b.location.href)},l=function(c,f){var g=b.document,h=a.fn[d].domain;c!==f&&(g.title=e.title,g.open(),h&&g.write('<script>document.domain="'+h+'"</script>'),g.close(),b.location.hash=c)}}(),f}()}(jQuery,this);

/*<script type="text/javascript" src="${ctxStatic}/org/it313/datatables/1.10.2/media/js/jquery.dataTables.settings.js"></script>*/
function svcToDataTables(a,b){return{iTotalDisplayRecords:a.totalRows,iTotalRecords:a.currentPage,aaData:a.datas,sEcho:b}}function getDataTableSequence(a){var b,c,d,e;return void 0!=a.iSortCol_0?(b=a.iSortCol_0,c=a.sSortDir_0,d=a["mDataProp_"+b],e={},e[d+"_ob"]=c,e):{}}function fnServer(a){return function(b,c,d){var f,g,h,e=this;c=$.deparam($.param(c)),delete c.setData,f=getDataTableSequence(c),g=$.extend({paginate:{currentPage:Math.ceil(c.iDisplayStart/c.iDisplayLength)+1,rowsOfPage:1*c.iDisplayLength,menuId:currentMenuId}},e.reDrawParams||a||{},f),null!=this.fnSettings().oInit.isShowTips&&void 0!=this.fnSettings().oInit.isShowTips&&this.fnSettings().oInit.isShowTips===!1?(h={url:b,param:g,success:function(a){e.permission=a.permission||[];var b=svcToDataTables(a,1*c.sEcho);d(b)},isShowTips:!1},Svc.AjaxJson.jsonCall(h)):Svc.AjaxJson.post(b,g,function(a){e.permission=a.permission||[];var b=svcToDataTables(a,1*c.sEcho);d(b)})}}var DTCheckbox,languageCN={oAria:{sSortAscending:": 激活列升序",sSortDescending:": 激活列降序"},sProcessing:"处理中...",sLengthMenu:"每页显示条数  _MENU_",sZeroRecords:"没有匹配结果",sInfo:"显示 _START_-_END_ 总共有 _TOTAL_ 条目",sInfoEmpty:"显示 0-0 总共有 0 条目",sInfoFiltered:"",sInfoPostFix:"",sSearch:"搜索:",sUrl:"",sEmptyTable:"暂无数据",oPaginate:{sFirst:"首页",sPrevious:"上页",sNext:"下页",sLast:"末页"}};$.extend(!0,$.fn.DataTable.defaults,{oLanguage:languageCN,bProcessing:!1,bServerSide:!0,bSort:!1,bAutoWidth:!0,sDom:'R<"tableButton"CTl>t<"tableFooter"birp>',sServerMethod:"POST",iDisplayLength:15,aLengthMenu:[[10,15,30,50,100,200],[10,15,30,50,100,200]],fnSvcInitComplete:function(a){$(a.nTHead).find(".TableCheckall").click(function(){$(this).is(":checked")?$(a.nTBody).find(".TableCheckbox").not(":checked").trigger("click"):$(a.nTBody).find(".TableCheckbox:checked").trigger("click")})},fnSvcDrawCallback:function(a){var b,c,d;b=$(a.nTHead).find(".TableCheckall"),c=$(a.nTBody).find(".TableCheckbox"),d=c.not(":checked"),0==d.length&&c.length>0?b.prop("checked",!0):b.prop("checked",!1)}}),TableTools.BUTTONS.tiny=$.extend({},TableTools.buttonBase,{fnInit:function(a,b){b.sLinerClass&&$("span",a).addClass(b.sLinerClass),$("span",a).after($("span",a).text()).text("")},sButtonClass:"btn btn-default btn-sm"}),function(a,b,c){DTCheckbox=function(b,c,d){var e,f,g,h,i,j,k;null!=d&&(e=DTCheckbox.NAME,f=d.iColIndex,g=b.aoColumns[f],h=g.mData,i=d.fnChange,j=d.fnCreated,k=this,this.selectData={},this.table=c[0],b.aoRowCreatedCallback.push({sName:e,fn:function(c,f){var l=a("<input type='checkbox' />"),m=f[h];k.selectData[m]&&l.prop("checked","checked"),j&&j.call(k,this,f),l.addClass(k.CLASS),l.data(e,f),a("td",c).eq(d.iColIndex).html(l),l.on("change",function(){var c=a(this).data(e),d=c[h];a(this).is(":checked")?k.selectData[d]=c:delete k.selectData[d],i&&i.call(k,this,c),0==a(b.nTBody).find(".TableCheckbox").not(":checked").length?a(b.nTHead).find(".TableCheckall").prop("checked",!0):a(b.nTHead).find(".TableCheckall").prop("checked",!1)})}}))},DTCheckbox.VERSION="base",DTCheckbox.NAME="DTCheckbox",DTCheckbox.prototype.CLASS="TableCheckbox",DTCheckbox.AInstances=[],DTCheckbox.fnGetInstance=function(a){"object"!=typeof a&&(a=c.getElementById(a));for(var b=0,d=DTCheckbox.AInstances.length;d>b;b++)if(DTCheckbox.AInstances[b].table==a)return DTCheckbox.AInstances[b];return null},"function"==typeof a.fn.dataTable&&"function"==typeof a.fn.dataTableExt.fnVersionCheck&&a.fn.dataTableExt.fnVersionCheck("1.7.0")?a.fn.dataTableExt.aoFeatures.push({fnInit:function(a){var b=new DTCheckbox(a,a.oInstance,a.oInit.oDTCheckbox);DTCheckbox.AInstances.push(b)},cFeature:"b",sFeature:DTCheckbox.NAME}):alert("Warning: DTCheckbox requires DataTables 1.7 or greater - www.datatables.net/download")}(jQuery,window,document);

/*<script type="text/javascript" src="${ctxStatic}/org/it313/fancytree/js/jquery-ui.js"></script>*/
/*<script type="text/javascript" src="${ctxStatic}/org/it313/fancytree/js/fancytree.js"></script>*/
!function(a,b,c,d){"use strict";function e(b){b=b||"",a.error("Not implemented: "+b)}function f(b,c){b||(c=c?": "+c:"",a.error("Assertion failed"+c))}function g(a,c){var d,e,f=b.console?b.console[a]:null;if(f)if(f.apply)f.apply(b.console,c);else{for(e="",d=0;d<c.length;d++)e+=c[d];f(e)}}function h(b){var f,g,h,i=a.map(a.trim(b).split("."),function(a){return parseInt(a,10)}),j=a.map(Array.prototype.slice.call(arguments,1),function(a){return parseInt(a,10)});for(f=0;f<j.length;f++)if(g=i[f]||0,h=j[f]||0,g!==h)return g>h;return!0}function i(a,b,c,d,e){var f=function(){var c=b[a],f=d[a],g=b.ext[e],h=function(){return c.apply(b,arguments)};return function(){var a=b._local,c=b._super;try{return b._local=g,b._super=h,f.apply(b,arguments)}finally{b._local=a,b._super=c}}}();return f}function j(b,c,d,e){for(var f in d)"function"==typeof d[f]?"function"==typeof b[f]?b[f]=i(f,b,c,d,e):"_"===f.charAt(0)?b.ext[e][f]=i(f,b,c,d,e):a.error("Could not override tree."+f+". Use prefix '_' to create tree."+e+"._"+f):"options"!==f&&(b.ext[e][f]=d[f])}function k(b,c){return b===d?a.Deferred(function(){this.resolve()}).promise():a.Deferred(function(){this.resolveWith(b,c)}).promise()}function l(b,c){return b===d?a.Deferred(function(){this.reject()}).promise():a.Deferred(function(){this.rejectWith(b,c)}).promise()}function m(a,b){return function(){a.resolveWith(b)}}function n(a){return a=a.toLowerCase(),function(b){return b.title.toLowerCase().indexOf(a)>=0}}function v(b,c){var d,e,g,h;for(this.parent=b,this.tree=b.tree,this.ul=null,this.li=null,this.isStatusNode=!1,this.data={},d=0,e=s.length;e>d;d++)g=s[d],this[g]=c[g];c.data&&a.extend(this.data,c.data);for(g in c)t[g]||a.isFunction(c[g])||u[g]||(this.data[g]=c[g]);null==this.key&&(this.key="_"+p._nextNodeKey++),c.active&&(f(null===this.tree.activeNode,"only one active node allowed"),this.tree.activeNode=this),this.children=null,h=c.children,h&&h.length&&this._setChildren(h)}function w(b){this.widget=b,this.$div=b.element,this.options=b.options,this.ext={},this.data={},this._id=a.ui.fancytree._nextId++,this._ns=".fancytree-"+this._id,this.activeNode=null,this.focusNode=null,this._hasFocus=null,this.lastSelectedNode=null,this.systemFocusElement=null,this.statusClassPropName="span",this.ariaPropName="li",this.nodeContainerAttrName="li",this.$div.find(">ul.fancytree-container").remove();var d,c={tree:this};this.rootNode=new v(c,{title:"root",key:"root_"+this._id,children:null}),this.rootNode.parent=null,d=a("<ul>",{"class":"ui-fancytree fancytree-container"}).appendTo(this.$div),this.$container=d,this.rootNode.ul=d[0],null==this.options.debugLevel&&(this.options.debugLevel=p.debugLevel),this.$container.attr("tabindex",this.options.tabbable?"0":"-1"),this.options.aria&&this.$container.attr("role","tree").attr("aria-multiselectable",!0)}if(a.ui.fancytree&&a.ui.fancytree.version)return a.ui.fancytree.warn("Fancytree: ignored duplicate include"),void 0;var o,p=null,q="active expanded focus folder lazy selected unselectable".split(" "),r={},s="expanded extraClasses folder hideCheckbox key lazy selected title tooltip unselectable".split(" "),t={},u={active:!0,children:!0,data:!0,focus:!0};for(o=0;o<q.length;o++)r[q[o]]=!0;for(o=0;o<s.length;o++)t[s[o]]=!0;v.prototype={_findDirectChild:function(a){var b,c,d=this.children;if(d)if("string"==typeof a){for(b=0,c=d.length;c>b;b++)if(d[b].key===a)return d[b]}else{if("number"==typeof a)return this.children[a];if(a.parent===this)return a}return null},_setChildren:function(a){f(a&&(!this.children||0===this.children.length),"only init supported"),this.children=[];for(var b=0,c=a.length;c>b;b++)this.children.push(new v(this,a[b]))},addChildren:function(b,c){var d,e,g,h=null,i=[];for(a.isPlainObject(b)&&(b=[b]),this.children||(this.children=[]),d=0,e=b.length;e>d;d++)i.push(new v(this,b[d]));return h=i[0],null==c?this.children=this.children.concat(i):(c=this._findDirectChild(c),g=a.inArray(c,this.children),f(g>=0,"insertBefore must be an existing child"),this.children.splice.apply(this.children,[g,0].concat(i))),(!this.parent||this.parent.ul||this.tr)&&this.render(),3===this.tree.options.selectMode&&this.fixSelection3FromEndNodes(),h},addNode:function(a,b){switch((b===d||"over"===b)&&(b="child"),b){case"after":return this.getParent().addChildren(a,this.getNextSibling());case"before":return this.getParent().addChildren(a,this);case"child":case"over":return this.addChildren(a)}f(!1,"Invalid mode: "+b)},applyPatch:function(b){if(null===b)return this.remove(),k(this);var c,d,e,f={children:!0,expanded:!0,parent:!0};for(c in b)e=b[c],f[c]||a.isFunction(e)||(t[c]?this[c]=e:this.data[c]=e);return b.hasOwnProperty("children")&&(this.removeChildren(),b.children&&this._setChildren(b.children)),this.isVisible()&&(this.renderTitle(),this.renderStatus()),d=b.hasOwnProperty("expanded")?this.setExpanded(b.expanded):k(this)},collapseSiblings:function(){return this.tree._callHook("nodeCollapseSiblings",this)},copyTo:function(a,b,c){return a.addNode(this.toDict(!0,c),b)},countChildren:function(a){var c,d,e,b=this.children;if(!b)return 0;if(e=b.length,a!==!1)for(c=0,d=e;d>c;c++)e+=b[c].countChildren();return e},debug:function(){this.tree.options.debugLevel>=2&&(Array.prototype.unshift.call(arguments,this.toString()),g("debug",arguments))},discard:function(){return this.lazy&&a.isArray(this.children)?(this.removeChildren(),this.setExpanded(!1)):void 0},findAll:function(b){b=a.isFunction(b)?b:n(b);var c=[];return this.visit(function(a){b(a)&&c.push(a)}),c},findFirst:function(b){b=a.isFunction(b)?b:n(b);var c=null;return this.visit(function(a){return b(a)?(c=a,!1):void 0}),c},_changeSelectStatusAttrs:function(a){var b=!1;switch(a){case!1:b=this.selected||this.partsel,this.selected=!1,this.partsel=!1;break;case!0:b=!this.selected||!this.partsel,this.selected=!0,this.partsel=!0;break;case d:b=this.selected||!this.partsel,this.selected=!1,this.partsel=!0;break;default:f(!1,"invalid state: "+a)}return this.debug("fixSelection3AfterLoad() _changeSelectStatusAttrs()",a,b),b&&this.renderStatus(),b},fixSelection3AfterClick:function(){var a=this.isSelected();this.visit(function(b){b._changeSelectStatusAttrs(a)}),this.fixSelection3FromEndNodes()},fixSelection3FromEndNodes:function(){function a(b){var c,e,f,g,h,i,j,k=b.children;if(k){for(i=!0,j=!1,c=0,e=k.length;e>c;c++)f=k[c],g=a(f),g!==!1&&(j=!0),g!==!0&&(i=!1);h=i?!0:j?d:!1}else h=!!b.selected;return b._changeSelectStatusAttrs(h),h}f(3===this.tree.options.selectMode,"expected selectMode 3"),a(this),this.visitParents(function(a){var b,c,e,f,g=a.children,h=!0,i=!1;for(b=0,c=g.length;c>b;b++)e=g[b],(e.selected||e.partsel)&&(i=!0),e.unselectable||e.selected||(h=!1);f=h?!0:i?d:!1,a._changeSelectStatusAttrs(f)})},fromDict:function(b){for(var c in b)t[c]?this[c]=b[c]:"data"===c?a.extend(this.data,b.data):a.isFunction(b[c])||u[c]||(this.data[c]=b[c]);b.children?(this.removeChildren(),this.addChildren(b.children)):this.renderTitle()},getChildren:function(){return this.hasChildren()===d?d:this.children},getFirstChild:function(){return this.children?this.children[0]:null},getIndex:function(){return a.inArray(this,this.parent.children)},getIndexHier:function(b){b=b||".";var c=[];return a.each(this.getParentList(!1,!0),function(a,b){c.push(b.getIndex()+1)}),c.join(b)},getKeyPath:function(a){var b=[],c=this.tree.options.keyPathSeparator;return this.visitParents(function(a){a.parent&&b.unshift(a.key)},!a),c+b.join(c)},getLastChild:function(){return this.children?this.children[this.children.length-1]:null},getLevel:function(){for(var a=0,b=this.parent;b;)a++,b=b.parent;return a},getNextSibling:function(){if(this.parent){var a,b,c=this.parent.children;for(a=0,b=c.length-1;b>a;a++)if(c[a]===this)return c[a+1]}return null},getParent:function(){return this.parent},getParentList:function(a,b){for(var c=[],d=b?this:this.parent;d;)(a||d.parent)&&c.unshift(d),d=d.parent;return c},getPrevSibling:function(){if(this.parent){var a,b,c=this.parent.children;for(a=1,b=c.length;b>a;a++)if(c[a]===this)return c[a-1]}return null},hasChildren:function(){return this.lazy?null==this.children?d:0===this.children.length?!1:1===this.children.length&&this.children[0].isStatusNode?d:!0:!!this.children},hasFocus:function(){return this.tree.hasFocus()&&this.tree.focusNode===this},isActive:function(){return this.tree.activeNode===this},isChildOf:function(a){return this.parent&&this.parent===a},isDescendantOf:function(a){if(!a||a.tree!==this.tree)return!1;for(var b=this.parent;b;){if(b===a)return!0;b=b.parent}return!1},isExpanded:function(){return!!this.expanded},isFirstSibling:function(){var a=this.parent;return!a||a.children[0]===this},isFolder:function(){return!!this.folder},isLastSibling:function(){var a=this.parent;return!a||a.children[a.children.length-1]===this},isLazy:function(){return!!this.lazy},isLoading:function(){e()},isRoot:function(){return this.tree.rootNode===this},isSelected:function(){return!!this.selected},isVisible:function(){var a,b,c=this.getParentList(!1,!1);for(a=0,b=c.length;b>a;a++)if(!c[a].expanded)return!1;return!0},makeVisible:function(){var a,b,c=this.getParentList(!1,!1);for(a=0,b=c.length;b>a;a++)c[a].setExpanded(!0)},moveTo:function(b,c,e){(c===d||"over"===c)&&(c="child");var g,h=this.parent,i="child"===c?b:b.parent;if(this!==b){if(!this.parent)throw"Cannot move system root";if(i.isDescendantOf(this))throw"Cannot move a node to it's own descendant";if(1===this.parent.children.length?(this.parent.children=this.parent.lazy?[]:null,this.parent.expanded=!1):(g=a.inArray(this,this.parent.children),f(g>=0),this.parent.children.splice(g,1)),this.parent=i,i.hasChildren())switch(c){case"child":i.children.push(this);break;case"before":g=a.inArray(b,i.children),f(g>=0),i.children.splice(g,0,this);break;case"after":g=a.inArray(b,i.children),f(g>=0),i.children.splice(g+1,0,this);break;default:throw"Invalid mode "+c}else i.children=[this];e&&b.visit(e,!0),this.tree!==b.tree&&(this.warn("Cross-tree moveTo is experimantal!"),this.visit(function(a){a.tree=b.tree},!0)),i.expanded||h.ul.removeChild(this.li),h.isDescendantOf(i)||h.render(),i.isDescendantOf(h)||i===h||i.render()}},navigate:function(b,c){function i(a){return a?(a.makeVisible(),c===!1?a.setFocus():a.setActive()):void 0}var d,e,f=!0,g=a.ui.keyCode,h=null;switch(b){case g.BACKSPACE:this.parent&&this.parent.parent&&i(this.parent);break;case g.LEFT:this.expanded?(this.setExpanded(!1),i(this)):this.parent&&this.parent.parent&&i(this.parent);break;case g.RIGHT:this.expanded||!this.children&&!this.lazy?this.children&&this.children.length&&i(this.children[0]):(this.setExpanded(),i(this));break;case g.UP:for(h=this.getPrevSibling();h&&h.expanded&&h.children&&h.children.length;)h=h.children[h.children.length-1];!h&&this.parent&&this.parent.parent&&(h=this.parent),i(h);break;case g.DOWN:if(this.expanded&&this.children&&this.children.length)h=this.children[0];else for(e=this.getParentList(!1,!0),d=e.length-1;d>=0&&!(h=e[d].getNextSibling());d--);i(h);break;default:f=!1}},lazyLoad:function(b){(b||this.hasChildren()===d)&&this.discard(),f(!a.isArray(this.children));var c=this.tree._triggerNodeEvent("lazyload",this);return f("boolean"!=typeof c,"lazyload event must return source in data.result"),this.tree._callHook("nodeLoadChildren",this,c)},render:function(a,b){return this.tree._callHook("nodeRender",this,a,b)},renderTitle:function(){return this.tree._callHook("nodeRenderTitle",this)},renderStatus:function(){return this.tree._callHook("nodeRenderStatus",this)},remove:function(){return this.parent.removeChild(this)},removeChild:function(a){return this.tree._callHook("nodeRemoveChild",this,a)},removeChildren:function(){return this.tree._callHook("nodeRemoveChildren",this)},scheduleAction:function(a,b){this.tree.timer&&clearTimeout(this.tree.timer),this.tree.timer=null;var c=this;switch(a){case"cancel":break;case"expand":this.tree.timer=setTimeout(function(){c.tree.debug("setTimeout: trigger expand"),c.setExpanded(!0)},b);break;case"activate":this.tree.timer=setTimeout(function(){c.tree.debug("setTimeout: trigger activate"),c.setActive(!0)},b);break;default:throw"Invalid mode "+a}},scrollIntoView:function(b,c){b=b===!0?{duration:200,queue:!1}:b;var d,e=new a.Deferred,f=a(this.span).position().top,g=a(this.span).height(),h=this.tree.$container,i=h[0].scrollTop,j=Math.max(0,h.innerHeight()-h[0].clientHeight),k=h.height()-j,l=null;return 0>f?l=i+f:f+g>k&&(l=i+f-k+g,c&&(d=c?a(c.span).position().top:0,f-d>k&&(l=i+f))),null!==l?b?h.animate({scrollTop:l},b):(h[0].scrollTop=l,e.resolveWith(this)):e.resolveWith(this),e.promise()},setActive:function(a){return this.tree._callHook("nodeSetActive",this,a)},setExpanded:function(a){return this.tree._callHook("nodeSetExpanded",this,a)},setFocus:function(a){return this.tree._callHook("nodeSetFocus",this,a)},setSelected:function(a){return this.tree._callHook("nodeSetSelected",this,a)},setTitle:function(a){this.title=a,this.renderTitle()},sortChildren:function(a,b){var c,d,e=this.children;if(e){if(a=a||function(a,b){var c=a.title.toLowerCase(),d=b.title.toLowerCase();return c===d?0:c>d?1:-1},e.sort(a),b)for(c=0,d=e.length;d>c;c++)e[c].children&&e[c].sortChildren(a,"$norender$");"$norender$"!==b&&this.render()}},toDict:function(b,c){var d,e,f,g={},h=this;if(a.each(s,function(a,b){(h[b]||h[b]===!1)&&(g[b]=h[b])}),a.isEmptyObject(this.data)||(g.data=a.extend({},this.data),a.isEmptyObject(g.data)&&delete g.data),c&&c(g),b&&this.hasChildren())for(g.children=[],d=0,e=this.children.length;e>d;d++)f=this.children[d],f.isStatusNode||g.children.push(f.toDict(!0,c));return g},toggleExpanded:function(){return this.tree._callHook("nodeToggleExpanded",this)},toggleSelected:function(){return this.tree._callHook("nodeToggleSelected",this)},toString:function(){return"<FancytreeNode(#"+this.key+", '"+this.title+"')>"},visit:function(a,b){var c,d,e=!0,f=this.children;if(b===!0&&(e=a(this),e===!1||"skip"===e))return e;if(f)for(c=0,d=f.length;d>c&&(e=f[c].visit(a,!0),e!==!1);c++);return e},visitParents:function(a,b){if(b&&a(this)===!1)return!1;for(var c=this.parent;c;){if(a(c)===!1)return!1;c=c.parent}return!0},warn:function(){Array.prototype.unshift.call(arguments,this.toString()),g("warn",arguments)}},w.prototype={_makeHookContext:function(b,c,e){var f,g;return b.node!==d?(c&&b.originalEvent!==c&&a.error("invalid args"),f=b):b.tree?(g=b.tree,f={node:b,tree:g,widget:g.widget,options:g.widget.options,originalEvent:c}):b.widget?f={node:null,tree:b,widget:b.widget,options:b.widget.options,originalEvent:c}:a.error("invalid args"),e&&a.extend(f,e),f},_callHook:function(b,c){var e=this._makeHookContext(c),f=this[b],g=Array.prototype.slice.call(arguments,2);return a.isFunction(f)||a.error("_callHook('"+b+"') is not a function"),g.unshift(e),f.apply(this,g)},activateKey:function(a){var b=this.getNodeByKey(a);return b?b.setActive():this.activeNode&&this.activeNode.setActive(!1),b},applyPatch:function(b){var c,d,e,g,h,i,j=b.length,k=[];for(d=0;j>d;d++)e=b[d],f(2===e.length,"patchList must be an array of length-2-arrays"),g=e[0],h=e[1],i=null===g?this.rootNode:this.getNodeByKey(g),i?(c=new a.Deferred,k.push(c),i.applyPatch(h).always(m(c,i))):this.warn("could not find node with key '"+g+"'");return a.when.apply(a,k).promise()},count:function(){return this.rootNode.countChildren()},debug:function(){this.options.debugLevel>=2&&(Array.prototype.unshift.call(arguments,this.toString()),g("debug",arguments))},generateFormElements:function(b,c){var d,e=b!==!1?"ft_"+this._id:b,f=c!==!1?"ft_"+this._id+"_active":c,g="fancytree_result_"+this._id,h=this.$container.find("div#"+g);h.length?h.empty():h=a("<div>",{id:g}).hide().appendTo(this.$container),e&&(d=this.getSelectedNodes(3===this.options.selectMode),a.each(d,function(b,c){h.append(a("<input>",{type:"checkbox",name:e,value:c.key,checked:!0}))})),f&&this.activeNode&&h.append(a("<input>",{type:"radio",name:f,value:this.activeNode.key,checked:!0}))},getActiveNode:function(){return this.activeNode},getFirstChild:function(){return this.rootNode.getFirstChild()},getFocusNode:function(){return this.focusNode},getNodeByKey:function(a,b){var d,e;return!b&&(d=c.getElementById(this.options.idPrefix+a))?d.ftnode?d.ftnode:null:(b=b||this.rootNode,e=null,b.visit(function(b){return b.key===a?(e=b,!1):void 0},!0),e)},getSelectedNodes:function(a){var b=[];return this.rootNode.visit(function(c){return c.selected&&(b.push(c),a===!0)?"skip":void 0}),b},getSelectedAllParentNodes:function(a){var b=[];return this.rootNode.visit(function(c){return(c.selected||c.partsel)&&(b.push(c),a===!0)?"skip":void 0}),b},hasFocus:function(){return!!this._hasFocus},info:function(){this.options.debugLevel>=1&&(Array.prototype.unshift.call(arguments,this.toString()),g("info",arguments))},loadKeyPath:function(b,c,e){function r(a,b,d){c.call(q,b,"loading"),b.lazyLoad().done(function(){q.loadKeyPath.call(q,k[a],c,b).always(m(d,q))}).fail(function(){q.warn("loadKeyPath: error loading: "+a+" (parent: "+o+")"),c.call(q,b,"error"),d.reject()})}var f,g,h,i,j,k,l,n,o=e||this.rootNode,p=this.options.keyPathSeparator,q=this;for(a.isArray(b)||(b=[b]),k={},h=0;h<b.length;h++)for(i=b[h],i.charAt(0)===p&&(i=i.substr(1)),n=i.split(p);n.length;){if(j=n.shift(),l=o._findDirectChild(j),!l){this.warn("loadKeyPath: key not found: "+j+" (parent: "+o+")"),c.call(this,j,"error");break}if(0===n.length){c.call(this,l,"ok");break}if(l.lazy&&l.hasChildren()===d){c.call(this,l,"loaded"),k[j]?k[j].push(n.join(p)):k[j]=[n.join(p)];break}c.call(this,l,"loaded"),o=l}f=[];for(j in k)l=o._findDirectChild(j),g=new a.Deferred,f.push(g),r(j,l,g);return a.when.apply(a,f).promise()},nodeClick:function(a){var b,c,d=a.originalEvent,e=a.targetType,f=a.node;if("expander"===e)this._callHook("nodeToggleExpanded",a);else if("checkbox"===e)this._callHook("nodeToggleSelected",a),this._callHook("nodeSetFocus",a,!0);else{if(c=!1,b=!0,f.folder)switch(a.options.clickFolderMode){case 2:c=!0,b=!1;break;case 3:b=!0,c=!0}b&&(this.nodeSetFocus(a),this._callHook("nodeSetActive",a,!0)),c&&this._callHook("nodeToggleExpanded",a)}"a"===d.target.localName&&"fancytree-title"===d.target.className&&d.preventDefault()},nodeCollapseSiblings:function(a){var b,c,d,e=a.node;if(e.parent)for(b=e.parent.children,c=0,d=b.length;d>c;c++)b[c]!==e&&b[c].expanded&&this._callHook("nodeSetExpanded",b[c],!1)},nodeDblclick:function(a){"title"===a.targetType&&4===a.options.clickFolderMode&&this._callHook("nodeToggleExpanded",a),"title"===a.targetType&&a.originalEvent.preventDefault()},nodeKeydown:function(b){var c,d=b.originalEvent,e=b.node,f=b.tree,g=b.options,h=!0,i=!(d.ctrlKey||!g.autoActivate),j=a.ui.keyCode;switch(e||(this.rootNode.getFirstChild().setFocus(),e=b.node=this.focusNode,e.debug("Keydown force focus on first node")),d.which){case j.NUMPAD_ADD:case 187:f.nodeSetExpanded(b,!0);break;case j.NUMPAD_SUBTRACT:case 189:f.nodeSetExpanded(b,!1);break;case j.SPACE:g.checkbox?f.nodeToggleSelected(b):f.nodeSetActive(b,!0);break;case j.ENTER:f.nodeSetActive(b,!0);break;case j.LEFT:case j.RIGHT:case j.UP:case j.DOWN:c=e.navigate(d.which,i);break;default:h=!1}h&&d.preventDefault()},nodeLoadChildren:function(b,c){var d,e,g=b.tree,h=b.node;return a.isFunction(c)&&(c=c()),c.url&&(d=a.extend({},b.options.ajax,c),d.debugDelay?(e=d.debugDelay,a.isArray(e)&&(e=e[0]+Math.random()*(e[1]-e[0])),h.debug("nodeLoadChildren waiting debug delay "+Math.round(e)+"ms"),d.debugDelay=!1,c=a.Deferred(function(b){setTimeout(function(){a.ajax(d).done(function(){b.resolveWith(this,arguments)}).fail(function(){b.rejectWith(this,arguments)})},e)})):c=a.ajax(d),c=c.pipe(function(c){var f;return"string"==typeof c&&a.error("Ajax request returned a string (did you get the JSON dataType wrong?)."),b.options.postProcess?(f=g._triggerNodeEvent("postProcess",b,b.originalEvent,{response:c,dataType:this.dataType}),c=a.isArray(f)?f:c):c&&c.hasOwnProperty("d")&&b.options.enableAspx&&(c="string"==typeof c.d?a.parseJSON(c.d):c.d),c},function(a,b,c){return g._makeHookContext(h,null,{error:a,args:Array.prototype.slice.call(arguments),message:c,details:a.status+": "+c})})),a.isFunction(c.promise)&&(g.nodeSetStatus(b,"loading"),c.done(function(){g.nodeSetStatus(b,"ok")}).fail(function(a){var c;c=a.node&&a.error&&a.message?a:g._makeHookContext(h,null,{error:a,args:Array.prototype.slice.call(arguments),message:a?a.message||a.toString():""}),g._triggerNodeEvent("loaderror",c,null),g.nodeSetStatus(b,"error",c.message,c.details)})),a.when(c).done(function(b){var c;a.isPlainObject(b)&&(f(a.isArray(b.children),"source must contain (or be) an array of children"),f(h.isRoot(),"source may only be an object for root nodes"),c=b,b=b.children,delete c.children,a.extend(g.data,c)),f(a.isArray(b),"expected array of children"),h._setChildren(b),h.parent&&g._triggerNodeEvent("loadChildren",h)})},nodeLoadKeyPath:function(){},nodeMakeVisible:function(a){var b,c,d=a.node.getParentList(!1,!1);for(b=0,c=d.length;c>b;b++)d[b].setExpanded(!0)},nodeRemoveChild:function(b,c){var d,e=b.node,g=b.options,h=a.extend({},b,{node:c}),i=e.children;return p.debug("nodeRemoveChild()",e.toString(),c.toString()),1===i.length?(f(c===i[0]),this.nodeRemoveChildren(b)):(this.activeNode&&(c===this.activeNode||this.activeNode.isDescendantOf(c))&&this.activeNode.setActive(!1),this.focusNode&&(c===this.focusNode||this.focusNode.isDescendantOf(c))&&(this.focusNode=null),this.nodeRemoveMarkup(h),this.nodeRemoveChildren(h),d=a.inArray(c,i),f(d>=0),c.visit(function(a){a.parent=null},!0),g.removeNode&&g.removeNode.call(b.tree,{type:"removeNode"},h),i.splice(d,1),void 0)},nodeRemoveChildMarkup:function(b){var c=b.node;p.debug("nodeRemoveChildMarkup()",c.toString()),c.ul&&(a(c.ul).remove(),c.visit(function(a){a.li=a.ul=null}),c.ul=null)},nodeRemoveChildren:function(b){var c,e=b.node,f=e.children,g=b.options;p.debug("nodeRemoveChildren()",e.toString()),f&&(this.activeNode&&this.activeNode.isDescendantOf(e)&&this.activeNode.setActive(!1),this.focusNode&&this.focusNode.isDescendantOf(e)&&(this.focusNode=null),this.nodeRemoveChildMarkup(b),c=a.extend({},b),e.visit(function(a){a.parent=null,g.removeNode&&(c.node=a,g.removeNode.call(b.tree,{type:"removeNode"},c))}),e.children=d,this.nodeRenderStatus(b))},nodeRemoveMarkup:function(b){var c=b.node;p.debug("nodeRemoveMarkup()",c.toString()),c.li&&(a(c.li).remove(),c.li=null),this.nodeRemoveChildMarkup(b)},nodeRender:function(b,d,e,g,h){var i,j,k,l,m,n,o=b.node,p=b.tree,q=b.options,r=q.aria,s=!1,t=o.parent,u=!t,v=o.children;if(u||t.ul){if(f(u||t.ul,"parent UL must exist"),u||(o.li&&(d||o.li.parentNode!==o.parent.ul)&&(o.li.parentNode!==o.parent.ul&&this.warn("unlink "+o+" (must be child of "+o.parent+")"),this.nodeRemoveMarkup(b)),o.li||(s=!0,o.li=c.createElement("li"),o.li.ftnode=o,o.key&&q.generateIds&&(o.li.id=q.idPrefix+o.key),o.span=c.createElement("span"),o.span.className="fancytree-node",r&&a(o.span).attr("aria-labelledby","ftal_"+o.key),o.li.appendChild(o.span),this.nodeRenderTitle(b),q.createNode&&q.createNode.call(p,{type:"createNode"},b)),q.renderNode&&q.renderNode.call(p,{type:"renderNode"},b)),v){if(u||o.expanded||e===!0){for(o.ul||(o.ul=c.createElement("ul"),(g===!0&&!h||!o.expanded)&&(o.ul.style.display="none"),r&&a(o.ul).attr("role","group"),o.li?o.li.appendChild(o.ul):o.tree.$div.append(o.ul)),l=0,m=v.length;m>l;l++)n=a.extend({},b,{node:v[l]}),this.nodeRender(n,d,e,!1,!0);for(i=o.ul.firstChild,l=0,m=v.length-1;m>l;l++)j=v[l],k=i.ftnode,j!==k?(o.debug("_fixOrder: mismatch at index "+l+": "+j+" != "+k),o.ul.insertBefore(j.li,k.li)):i=i.nextSibling}}else o.ul&&(this.warn("remove child markup for "+o),this.nodeRemoveChildMarkup(b));u||(this.nodeRenderStatus(b),s&&t.ul.appendChild(o.li))}},nodeRenderTitle:function(a,b){var c,f,g,h,i=a.node,j=a.tree,k=a.options,l=k.aria,m=i.getLevel(),n=[],o=i.data.icon;b!==d&&(i.title=b),i.span&&(m<k.minExpandLevel?m>1&&(l?n.push("<span role='button' class='fancytree-expander'></span>"):n.push("<span class='fancytree-expander'></span>")):l?n.push("<span role='button' class='fancytree-expander'></span>"):n.push("<span class='fancytree-expander'></span>"),k.checkbox&&i.hideCheckbox!==!0&&!i.isStatusNode&&(l?n.push("<span role='checkbox' class='fancytree-checkbox'></span>"):n.push("<span class='fancytree-checkbox'></span>")),g=l?" role='img'":"",i.data.iconclass?n.push("<span "+g+" class='fancytree-custom-icon"+" "+i.data.iconclass+"'></span>"):(o===!0||o!==!1&&k.icons!==!1)&&n.push("<span "+g+" class='fancytree-icon'></span>"),f="",k.renderTitle&&(f=k.renderTitle.call(j,{type:"renderTitle"},a)||""),f||(h=i.tooltip?" title='"+i.tooltip.replace(/\"/g,"&quot;")+"'":"",c=l?" id='ftal_"+i.key+"'":"",g=l?" role='treeitem'":"",f="<span "+g+" class='fancytree-title'"+c+h+">"+i.title+"</span>"),n.push(f),i.span.innerHTML=n.join(""))},nodeRenderStatus:function(b){var c=b.node,d=b.tree,e=b.options,f=c.hasChildren(),g=c.isLastSibling(),h=e.aria,i=a(c.span).find(".fancytree-title"),j=e._classNames,k=[],l=c[d.statusClassPropName];l&&(k.push(j.node),d.activeNode===c&&k.push(j.active),d.focusNode===c?(k.push(j.focused),h&&i.attr("aria-activedescendant",!0)):h&&i.removeAttr("aria-activedescendant"),c.expanded?(k.push(j.expanded),h&&i.attr("aria-expanded",!0)):h&&i.removeAttr("aria-expanded"),c.folder&&k.push(j.folder),f!==!1&&k.push(j.hasChildren),g&&k.push(j.lastsib),c.lazy&&null==c.children&&k.push(j.lazy),c.partsel&&k.push(j.partsel),c.selected?(k.push(j.selected),h&&i.attr("aria-selected",!0)):h&&i.attr("aria-selected",!1),c.extraClasses&&k.push(c.extraClasses),f===!1?k.push(j.combinedExpanderPrefix+"n"+(g?"l":"")):k.push(j.combinedExpanderPrefix+(c.expanded?"e":"c")+(c.lazy&&null==c.children?"d":"")+(g?"l":"")),k.push(j.combinedIconPrefix+(c.expanded?"e":"c")+(c.folder?"f":"")),l.className=k.join(" "),c.li&&(c.li.className=g?j.lastsib:""))},nodeSetActive:function(b,c){var d,e=b.node,g=b.tree,h=b.options,i=e===g.activeNode;return c=c!==!1,e.debug("nodeSetActive",c),i===c?k(e):c&&this._triggerNodeEvent("beforeActivate",e,b.originalEvent)===!1?l(e,["rejected"]):(c?(g.activeNode&&(f(g.activeNode!==e,"node was active (inconsistency)"),d=a.extend({},b,{node:g.activeNode}),g.nodeSetActive(d,!1),f(null===g.activeNode,"deactivate was out of sync?")),h.activeVisible&&g.nodeMakeVisible(b),g.activeNode=e,g.nodeRenderStatus(b),g.nodeSetFocus(b),g._triggerNodeEvent("activate",e)):(f(g.activeNode===e,"node was not active (inconsistency)"),g.activeNode=null,this.nodeRenderStatus(b),b.tree._triggerNodeEvent("deactivate",e)),void 0)},nodeSetExpanded:function(b,c){var e,f,g,h,i,j,m=b.node,n=b.tree,o=b.options;if(c=c!==!1,m.debug("nodeSetExpanded("+c+")"),m.expanded&&c||!m.expanded&&!c)return m.debug("nodeSetExpanded("+c+"): nothing to do"),k(m);if(c&&!m.lazy&&!m.hasChildren())return l(m,["empty"]);if(!c&&m.getLevel()<o.minExpandLevel)return l(m,["locked"]);if(this._triggerNodeEvent("beforeExpand",m,b.originalEvent)===!1)return l(m,["rejected"]);if(f=new a.Deferred,c&&!m.expanded&&o.autoCollapse){i=m.getParentList(!1,!0),j=o.autoCollapse;try{for(o.autoCollapse=!1,g=0,h=i.length;h>g;g++)this._callHook("nodeCollapseSiblings",i[g])}finally{o.autoCollapse=j}}return f.done(function(){b.tree._triggerNodeEvent(c?"expand":"collapse",b),o.autoScroll&&m.getLastChild().scrollIntoView(!0,m)}),e=function(d){var e,f,g,h;if(m.expanded=c,n._callHook("nodeRender",b,!1,!1,!0),m.ul)if(g="none"!==m.ul.style.display,h=!!m.expanded,g===h)m.warn("nodeSetExpanded: UL.style.display already set");else{if(o.fx)return e=o.fx.duration||200,f=o.fx.easing,m.debug("nodeSetExpanded: animate start..."),a(m.ul).animate(o.fx,e,f,function(){m.debug("nodeSetExpanded: animate done"),d()}),void 0;m.ul.style.display=m.expanded||!parent?"":"none"}d()},c&&m.lazy&&m.hasChildren()===d?(m.debug("nodeSetExpanded: load start..."),m.lazyLoad().done(function(){m.debug("nodeSetExpanded: load done"),f.notifyWith&&f.notifyWith(m,["loaded"]),e(function(){f.resolveWith(m)})}).fail(function(a){e(function(){f.rejectWith(m,["load failed ("+a+")"])})})):e(function(){f.resolveWith(m)}),m.debug("nodeSetExpanded: returns"),f.promise()},nodeSetFocus:function(b,c){b.node.debug("nodeSetFocus("+c+")");var d,e=b.tree,f=b.node;if(c=c!==!1,e.focusNode){if(e.focusNode===f&&c)return f.debug("nodeSetFocus("+c+"): nothing to do"),void 0;d=a.extend({},b,{node:e.focusNode}),e.focusNode=null,this._triggerNodeEvent("blur",d),this._callHook("nodeRenderStatus",d)}c&&(this.hasFocus()||(f.debug("nodeSetFocus: forcing container focus"),this._callHook("treeSetFocus",b,!0,!0)),this.nodeMakeVisible(b),e.focusNode=f,this._triggerNodeEvent("focus",b),b.options.autoScroll&&f.scrollIntoView(),this._callHook("nodeRenderStatus",b))},nodeSetSelected:function(a,b){var c=a.node,d=a.tree,e=a.options;if(b=b!==!1,c.debug("nodeSetSelected("+b+")",a),!c.unselectable){if(c.selected&&b||!c.selected&&!b)return!!c.selected;if(this._triggerNodeEvent("beforeSelect",c,a.originalEvent)===!1)return!!c.selected;b&&1===e.selectMode?d.lastSelectedNode&&d.lastSelectedNode.setSelected(!1):3===e.selectMode&&(c.selected=b,c.fixSelection3AfterClick()),c.selected=b,this.nodeRenderStatus(a),d.lastSelectedNode=b?c:null,d._triggerNodeEvent("select",a)}},nodeSetStatus:function(b,c,d,e){var f,g,h=b.node,i=b.tree,j=b.options._classNames;switch(f=function(){var a=h.children?h.children[0]:null;if(a&&a.isStatusNode){try{h.ul&&(h.ul.removeChild(a.li),a.li=null)}catch(b){}1===h.children.length?h.children=[]:h.children.shift()}},g=function(b){var c=h.children?h.children[0]:null;return c&&c.isStatusNode?(a.extend(c,b),i._callHook("nodeRender",c)):(b.key="_statusNode",h._setChildren([b]),h.children[0].isStatusNode=!0,i.render()),h.children[0]},c){case"ok":f(),a(h.span).removeClass(j.loading),a(h.span).removeClass(j.error);break;case"loading":a(h.span).removeClass(j.error),a(h.span).addClass(j.loading),h.parent||g({title:i.options.strings.loading+(d?" ("+d+") ":""),tooltip:e,extraClasses:"fancytree-statusnode-wait"});break;case"error":a(h.span).removeClass(j.loading),a(h.span).addClass(j.error),g({title:i.options.strings.loadError+(d?" ("+d+") ":""),tooltip:e,extraClasses:"fancytree-statusnode-error"});break;default:a.error("invalid status "+c)}},nodeToggleExpanded:function(a){return this.nodeSetExpanded(a,!a.node.expanded)},nodeToggleSelected:function(a){return this.nodeSetSelected(a,!a.node.selected)},treeClear:function(a){var b=a.tree;b.activeNode=null,b.focusNode=null,b.$div.find(">ul.fancytree-container").empty(),b.rootNode.children=null},treeCreate:function(){},treeDestroy:function(){},treeInit:function(a){this.treeLoad(a)},treeLoad:function(b,c){var d,f,i,g=b.tree,h=b.widget.element,j=a.extend({},b,{node:this.rootNode});if(g.rootNode.children&&this.treeClear(b),c=c||this.options.source)"string"==typeof c&&e();else switch(d=h.data("type")||"html"){case"html":f=h.find(">ul:first"),f.addClass("ui-fancytree-source ui-helper-hidden"),c=a.ui.fancytree.parseHtml(f);break;case"json":c=a.parseJSON(h.text()),c.children&&(c.title&&(g.title=c.title),c=c.children);break;default:a.error("Invalid data-type: "+d)}return i=this.nodeLoadChildren(j,c).done(function(){g.render(),3===b.options.selectMode&&g.rootNode.fixSelection3FromEndNodes(),g._triggerTreeEvent("init",!0)}).fail(function(){g.render(),g._triggerTreeEvent("init",!1)})},treeSetFocus:function(a,b,c){b=b!==!1,this.debug("treeSetFocus("+b+"), _calledByNodeSetFocus: "+c),this.debug("    focusNode: "+this.focusNode),this.debug("    activeNode: "+this.activeNode),b!==this.hasFocus()&&(this._hasFocus=b,this.$container.toggleClass("fancytree-treefocus",b),this._triggerTreeEvent(b?"focusTree":"blurTree"))},reactivate:function(a){var b=this.activeNode;b&&(this.activeNode=null,b.setActive(),a&&b.setFocus())},reload:function(a){return this._callHook("treeClear",this),this._callHook("treeLoad",this,a)},render:function(a,b){return this.rootNode.render(a,b)},setFocus:function(a){return this._callHook("treeSetFocus",this,a)},toDict:function(a,b){var c=this.rootNode.toDict(!0,b);return a?c:c.children},toString:function(){return"<Fancytree(#"+this._id+")>"},_triggerNodeEvent:function(a,b,c,e){var f=this._makeHookContext(b,c,e),g=this.widget._trigger(a,c,f);
return g!==!1&&f.result!==d?f.result:g},_triggerTreeEvent:function(a,b){var c=this._makeHookContext(this,b),e=this.widget._trigger(a,b,c);return e!==!1&&c.result!==d?c.result:e},visit:function(a){return this.rootNode.visit(a,!1)},warn:function(){Array.prototype.unshift.call(arguments,this.toString()),g("warn",arguments)}},a.widget("ui.fancytree",{options:{activeVisible:!0,ajax:{type:"POST",contentType:"application/json;charset=UTF-8",cache:!1,dataType:"json"},aria:!1,autoActivate:!0,autoCollapse:!1,autoScroll:!1,checkbox:!1,clickFolderMode:4,debugLevel:null,disabled:!1,enableAspx:!0,extensions:[],fx:{height:"toggle",duration:200},generateIds:!1,icons:!0,idPrefix:"ft_",keyboard:!0,keyPathSeparator:"/",minExpandLevel:1,selectMode:2,strings:{loading:"Loading&#8230;",loadError:"Load error!"},tabbable:!0,_classNames:{node:"fancytree-node",folder:"fancytree-folder",combinedExpanderPrefix:"fancytree-exp-",combinedIconPrefix:"fancytree-ico-",hasChildren:"fancytree-has-children",active:"fancytree-active",selected:"fancytree-selected",expanded:"fancytree-expanded",lazy:"fancytree-lazy",focused:"fancytree-focused",partsel:"fancytree-partsel",lastsib:"fancytree-lastsib",loading:"fancytree-loading",error:"fancytree-error"},lazyload:null,postProcess:null},_create:function(){this.tree=new w(this),this.$source=this.source||"json"===this.element.data("type")?this.element:this.element.find(">ul:first");var b,c,e,g=this.options.extensions,h=this.tree;for(e=0;e<g.length;e++)c=g[e],b=a.ui.fancytree._extensions[c],b||a.error("Could not apply extension '"+c+"' (it is not registered, did you forget to include it?)"),this.tree.options[c]=a.extend(!0,{},b.options,this.tree.options[c]),f(this.tree.ext[c]===d,"Extension name must not exist as Fancytree.ext attribute: '"+c+"'"),this.tree.ext[c]={},j(this.tree,h,b,c),h=b;this.tree._callHook("treeCreate",this.tree)},_init:function(){this.tree._callHook("treeInit",this.tree),this._bind()},_setOption:function(b,c){var d=!0,e=!1;switch(b){case"aria":case"checkbox":case"icons":case"minExpandLevel":case"tabbable":this.tree._callHook("treeCreate",this.tree),e=!0;break;case"source":d=!1,this.tree._callHook("treeLoad",this.tree,c)}this.tree.debug("set option "+b+"="+c+" <"+typeof c+">"),d&&a.Widget.prototype._setOption.apply(this,arguments),e&&this.tree.render(!0,!1)},destroy:function(){this._unbind(),this.tree._callHook("treeDestroy",this.tree),this.tree.$div.find(">ul.fancytree-container").remove(),this.$source&&this.$source.removeClass("ui-helper-hidden"),a.Widget.prototype.destroy.call(this)},_unbind:function(){var b=this.tree._ns;this.element.unbind(b),this.tree.$container.unbind(b),a(c).unbind(b)},_bind:function(){var a=this,b=this.options,c=this.tree,d=c._ns;this._unbind(),c.$container.on("focusin"+d+" focusout"+d,function(a){var b=p.getNode(a),d="focusin"===a.type;b?c._callHook("nodeSetFocus",b,d):c._callHook("treeSetFocus",c,d)}).on("selectstart"+d,"span.fancytree-title",function(a){a.preventDefault()}).on("keydown"+d,function(a){if(b.disabled||b.keyboard===!1)return!0;var d,e=c.focusNode,f=c._makeHookContext(e||c,a),g=c.phase;try{return c.phase="userEvent",d=e?c._triggerNodeEvent("keydown",e,a):c._triggerTreeEvent("keydown",a),"preventNav"===d?d=!0:d!==!1&&(d=c._callHook("nodeKeydown",f)),d}finally{c.phase=g}}).on("click"+d+" dblclick"+d,function(c){if(b.disabled)return!0;var d,e=p.getEventTarget(c),f=e.node,g=a.tree,h=g.phase;if(!f)return!0;d=g._makeHookContext(f,c);try{switch(g.phase="userEvent",c.type){case"click":return d.targetType=e.type,g._triggerNodeEvent("click",d,c)===!1?!1:g._callHook("nodeClick",d);case"dblclick":return d.targetType=e.type,g._triggerNodeEvent("dblclick",d,c)===!1?!1:g._callHook("nodeDblclick",d)}}finally{g.phase=h}})},getActiveNode:function(){return this.tree.activeNode},getNodeByKey:function(a){return this.tree.getNodeByKey(a)},getRootNode:function(){return this.tree.rootNode},getTree:function(){return this.tree}}),p=a.ui.fancytree,a.extend(a.ui.fancytree,{version:"development",buildType:"develop",debugLevel:0,_nextId:1,_nextNodeKey:1,_extensions:{},_FancytreeClass:w,_FancytreeNodeClass:v,jquerySupports:{positionMyOfs:h(a.ui.version,1,9)},assert:function(a,b){return f(a,b)},debug:function(){a.ui.fancytree.debugLevel>=2&&g("log",arguments)},error:function(){g("error",arguments)},getEventTargetType:function(a){return this.getEventTarget(a).type},getEventTarget:function(a){var b=a&&a.target?a.target.className:"",c={node:this.getNode(a.target),type:d};return/\bfancytree-title\b/.test(b)?c.type="title":/\bfancytree-expander\b/.test(b)?c.type=c.node.hasChildren()===!1?"prefix":"expander":/\bfancytree-checkbox\b/.test(b)?c.type="checkbox":/\bfancytree-icon\b/.test(b)?c.type="icon":/\bfancytree-node\b/.test(b)&&(c.type="title"),c},getNode:function(a){if(a instanceof v)return a;for(a.selector!==d?a=a[0]:a.originalEvent!==d&&(a=a.target);a;){if(a.ftnode)return a.ftnode;a=a.parentNode}return null},info:function(){a.ui.fancytree.debugLevel>=1&&g("info",arguments)},parseHtml:function(b){var e,f,g,h,i,j,k,c=b.find(">li"),l=[];return c.each(function(){var c,m,n=a(this),o=n.find(">span:first",this),p=o.length?null:n.find(">a:first"),s={tooltip:null,data:{}};for(o.length?s.title=o.html():p&&p.length?(s.title=p.html(),s.data.href=p.attr("href"),s.data.target=p.attr("target"),s.tooltip=p.attr("title")):(s.title=n.html(),h=s.title.search(/<ul/i),h>=0&&(s.title=s.title.substring(0,h))),s.title=a.trim(s.title),f=0,g=q.length;g>f;f++)s[q[f]]=d;for(j=this.className.split(" "),e=[],f=0,g=j.length;g>f;f++)k=j[f],r[k]?s[k]=!0:e.push(k);s.extraClasses=e.join(" "),i=n.attr("title"),i&&(s.tooltip=i),i=n.attr("id"),i&&(s.key=i),c=n.data(),c&&!a.isEmptyObject(c)&&(m=c.json,delete c.json,a.extend(s.data,c),m&&a.extend(s.data,m)),b=n.find(">ul:first"),s.children=b.length?a.ui.fancytree.parseHtml(b):s.lazy?d:null,l.push(s)}),l},registerExtension:function(b,c){a.ui.fancytree._extensions[b]=c},warn:function(){g("warn",arguments)}})}(jQuery,window,document),function(a,b,c){"use strict";function e(b,c){c=c||"",b||a.error("Assertion failed "+c)}function f(a,b){a.parentNode.insertBefore(b,a.nextSibling)}function g(a,b){a.visit(function(a){var c=a.tr;return c&&(c.style.display=b?"":"none"),a.expanded?void 0:"skip"})}function h(b){var c,d,f,g=b.parent,h=g?g.children:null;if(h&&h.length>1&&h[0]!==b)for(c=a.inArray(b,h),f=h[c-1],e(f.tr);f.children&&(d=f.children[f.children.length-1],d.tr);)f=d;else f=g;return f}function i(a,b,c){return function(){b.onClick.call(a,{eventType:c,data:b,target:this})}}function j(b){var d,e,f,g,h,i,j,k,l;b.tree,d=b.node,e=d.data,f=b.options.permission||[],g=b.options.table;for(h in g.columns)h*=1,i=g.nodeColumnIdx,j=a(d.tr).find(">td").eq(h),k=g.columns[h],j.width(k.width).addClass(k.className),h!=i&&h!=g.checkboxColumnIdx&&j.html(e[k.key]),l=k.fnRender?k.fnRender(e[k.key],j,e,k,f):null,null!=l&&j.html(l)}function k(b,c){var f,g,h,j,d=c.options.table;d.columns.length,f=["<thead>"];for(g in d.columns)d.columns[g].className||(d.columns[g].className=""),f.push("<th class='"+d.columns[g].className+"'>"),f.push(d.columns[g].title),f.push("</th>");f.push("</thead>"),b.prepend(f.join("")),h=['<div class="tableButton"><div class="DTTT_container">'];for(g in d.toolBar)j=d.toolBar[g],j.id||(j.id=""),h.push('<a id="'+j.id+'" style="margin-right: 5px;" class="btn btn-sm '+j.className+'">'+j.name+"</a>");h.push("</div></div>"),b.before(h.join(""));for(g in d.toolBar)j=d.toolBar[g],j.onClick&&a(".DTTT_container a",a(".tableButton")).eq(g).click(i(c,j,"click"))}function l(a,b){var c,d,e,f,g,h,i,j,k,l,m;if(b.successful){if(a.options.permission=b.data.permission||[],b=b.data.treeData,c=a.options.table,d=[],a.options.source.isSimple){e={},f="id",g="pid",a.options.source.key&&(f=a.options.source.key.id?a.options.source.key.id:f,g=a.options.source.key.pid?a.options.source.key.pid:g);for(h in b)i=e[b[h][f]]=b[h],j=c.nodeColumnIdx,k=c.columns[j].key,i.title=i[k],i.key=i.id,i.data=i;for(h in b)i=b[h],l=i[f],m=i[g],null==m?d.push(i):null==e[m]?(e[l].folder=!0,d.push(i)):(e[m].folder=!0,e[m].children?e[m].children.push(i):e[m].children=[i]);return d}return b}alert(b.data.message)}a.ui.fancytree.registerExtension("table",{version:"0.0.1",options:{indentation:22,nodeColumnIdx:0,checkboxColumnIdx:null,columns:[]},treeInit:function(b){var d,e,f,g=b.tree,h=g.widget.element;for(h.addClass("fancytree-container fancytree-ext-table"),h.prepend("<tbody></tbody>"),g.tbody=h.find("> tbody")[0],g.columnCount=g.options.table.columns.length,a(g.tbody).empty(),g.rowFragment=c.createDocumentFragment(),e=a("<tr>"),f="",b.options.aria&&(e.attr("role","row"),f=" role='gridcell'"),k(h,b),d=0;d<g.columnCount;d++)b.options.table.nodeColumnIdx===d?e.append("<td"+f+"><span class='fancytree-node'></span></td>"):e.append("<td"+f+">");g.rowFragment.appendChild(e.get(0)),g.statusClassPropName="tr",g.ariaPropName="tr",this.nodeContainerAttrName="tr",this._super(b),a(g.rootNode.ul).remove(),g.rootNode.ul=null,g.$container=h,this.$container.attr("tabindex",this.options.tabbable?"0":"-1"),this.options.aria&&g.$container.attr("role","treegrid").attr("aria-readonly",!0)},nodeRemoveChildMarkup:function(b){var c=b.node;c.visit(function(b){b.tr&&(a(b.tr).remove(),b.tr=null)})},nodeRemoveMarkup:function(b){var c=b.node;c.tr&&(a(c.tr).remove(),c.tr=null),this.nodeRemoveChildMarkup(b)},nodeRender:function(b,c,d,g,i){var k,l,m,n,o,p,q,r,s=b.tree,t=b.node,u=b.options,v=!t.parent;if(i||(b.hasCollapsedParents=t.parent&&!t.parent.expanded),v||(t.tr?this.nodeRenderTitle(b):(o=s.rowFragment.firstChild.cloneNode(!0),p=h(t),e(p),g===!0&&i?o.style.display="none":d&&b.hasCollapsedParents&&(o.style.display="none"),p.tr?f(p.tr,o):(e(!p.parent,"prev. row must have a tr, or is system root"),s.tbody.appendChild(o)),t.tr=o,t.key&&u.generateIds&&(t.tr.id=u.idPrefix+t.key),t.tr.ftnode=t,u.aria&&a(t.tr).attr("aria-labelledby","ftal_"+t.key),t.span=a("span.fancytree-node",t.tr).get(0),this.nodeRenderTitle(b),j(b),u.createNode&&u.createNode.call(s,{type:"createNode"},b))),u.renderNode&&u.renderNode.call(s,{type:"renderNode"},b),k=t.children,k&&(v||d||t.expanded))for(m=0,n=k.length;n>m;m++)r=a.extend({},b,{node:k[m]}),r.hasCollapsedParents=r.hasCollapsedParents||!t.expanded,this.nodeRender(r,c,d,g,!0);k&&!i&&(q=t.tr||null,l=s.tbody.firstChild,t.visit(function(a){if(a.tr){if(t.expanded||v||"none"===a.tr.style.display||(a.tr.style.display="none"),a.tr.previousSibling!==q){t.debug("_fixOrder: mismatch at node: "+a);var b=q?q.nextSibling:l;s.tbody.insertBefore(a.tr,b)}q=a.tr}})),v||this.nodeRenderStatus(b)},nodeRenderTitle:function(b){var d,e=b.node,f=b.options;this._super(b),f.checkbox&&null!=f.table.checkboxColumnIdx&&(d=a("span.fancytree-checkbox",e.span).detach(),a(e.tr).find("td").eq(f.table.checkboxColumnIdx).html(d)),f.renderColumns&&f.renderColumns.call(b.tree,{type:"renderColumns"},b)},nodeRenderStatus:function(b){var c,d=b.node,e=b.options;this._super(b),a(d.tr).removeClass("fancytree-node"),c=(d.getLevel()-1)*e.table.indentation,c&&a(d.span).css({marginLeft:c+"px"})},nodeSetExpanded:function(a,b){return this._super(a,b).always(function(){b=b!==!1,g(a.node,b)})},nodeLoadChildren:function(b,c){var d,f,g=b.tree,h=b.node;return a.isFunction(c)&&(c=c()),c.url&&(d=a.extend({},b.options.ajax,c),d.data&&(d.data=JSON.stringify(d.data)),d.debugDelay?(f=d.debugDelay,a.isArray(f)&&(f=f[0]+Math.random()*(f[1]-f[0])),h.debug("nodeLoadChildren waiting debug delay "+Math.round(f)+"ms"),d.debugDelay=!1,c=a.Deferred(function(b){setTimeout(function(){a.ajax(d).done(function(){b.resolveWith(this,arguments)}).fail(function(){b.rejectWith(this,arguments)})},f)})):c=a.ajax(d),c=c.pipe(function(c){var f;return"string"==typeof c&&a.error("Ajax request returned a string (did you get the JSON dataType wrong?)."),c=l(b,c),b.options.postProcess?(f=g._triggerNodeEvent("postProcess",b,b.originalEvent,{response:c,dataType:this.dataType}),c=a.isArray(f)?f:c):c&&c.hasOwnProperty("d")&&b.options.enableAspx&&(c="string"==typeof c.d?a.parseJSON(c.d):c.d),c},function(a,b,c){return g._makeHookContext(h,null,{error:a,args:Array.prototype.slice.call(arguments),message:c,details:a.status+": "+c})})),a.isFunction(c.promise)&&(g.nodeSetStatus(b,"loading"),c.done(function(){g.nodeSetStatus(b,"ok")}).fail(function(a){var c;c=a.node&&a.error&&a.message?a:g._makeHookContext(h,null,{error:a,args:Array.prototype.slice.call(arguments),message:a?a.message||a.toString():""}),g._triggerNodeEvent("loaderror",c,null),g.nodeSetStatus(b,"error",c.message,c.details)})),a.when(c).done(function(b){var c;a.isPlainObject(b)&&(e(a.isArray(b.children),"source must contain (or be) an array of children"),e(h.isRoot(),"source may only be an object for root nodes"),c=b,b=b.children,delete c.children,a.extend(g.data,c)),e(a.isArray(b),"expected array of children"),h._setChildren(b),h.parent&&g._triggerNodeEvent("loadChildren",h)})},nodeSetStatus:function(b,c,d,e){if("ok"===c){var f=b.node,g=f.children?f.children[0]:null;g&&g.isStatusNode&&a(g.tr).remove()}this._super(b,c,d,e)}})}(jQuery,window,document);
/*<script src="${ctxStatic}/org/it313/jquery-lightbox-0.5/js/jquery.lightbox-0.5.js"></script>*/
!function(a){var b=rootAdminPath.substring(0,rootAdminPath.lastIndexOf("/")+1);a.fn.lightBox=function(c){function e(){return f(this,d),!1}function f(b,d){if(a("embed, object, select").css({visibility:"hidden"}),g(),c.imageArray.length=0,c.activeImage=0,1==d.length)c.imageArray.push(new Array(b.getAttribute("href"),b.getAttribute("title")));else for(var e=0;e<d.length;e++)c.imageArray.push(new Array(d[e].getAttribute("href"),d[e].getAttribute("title")));for(;c.imageArray[c.activeImage][0]!=b.getAttribute("href");)c.activeImage++;h()}function g(){var b,d;a("body").append('<div id="jquery-overlay"></div><div id="jquery-lightbox"><div id="lightbox-container-image-box"><div id="lightbox-container-image"><img id="lightbox-image"><div style="" id="lightbox-nav"><a href="#" id="lightbox-nav-btnPrev"></a><a href="#" id="lightbox-nav-btnNext"></a></div><div id="lightbox-loading"><a href="#" id="lightbox-loading-link"><img src="'+c.imageLoading+'"></a></div></div></div><div id="lightbox-container-image-data-box"><div id="lightbox-container-image-data"><div id="lightbox-image-details"><span id="lightbox-image-details-caption"></span><span id="lightbox-image-details-currentNumber"></span></div><div id="lightbox-secNav"><a href="#" id="lightbox-secNav-btnClose"><img src="'+c.imageBtnClose+'"></a></div></div></div></div>'),b=r(),a("#jquery-overlay").css({backgroundColor:c.overlayBgColor,opacity:c.overlayOpacity,width:b[0],height:b[1]}).fadeIn(),d=s(),a("#jquery-lightbox").css({top:d[1]+b[3]/10,left:d[0]}).show(),a("#jquery-overlay,#jquery-lightbox").click(function(){q()}),a("#lightbox-loading-link,#lightbox-secNav-btnClose").click(function(){return q(),!1}),a(window).resize(function(){var c,b=r();a("#jquery-overlay").css({width:b[0],height:b[1]}),c=s(),a("#jquery-lightbox").css({top:c[1]+b[3]/10,left:c[0]})})}function h(){a("#lightbox-loading").show(),c.fixedNavigation?a("#lightbox-image,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber").hide():a("#lightbox-image,#lightbox-nav,#lightbox-nav-btnPrev,#lightbox-nav-btnNext,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber").hide();var b=new Image;b.onload=function(){a("#lightbox-image").attr("src",c.imageArray[c.activeImage][0]),i(b.width,b.height),b.onload=function(){}},b.src=c.imageArray[c.activeImage][0]}function i(b,d){var g,h,i,k,e=a("#lightbox-container-image-box").width(),f=a("#lightbox-container-image-box").height();b>=1e3&&(b=800),d>=1e3&&(d=800),g=b+2*c.containerBorderSize,h=d+2*c.containerBorderSize,i=e-g,k=f-h,a("#lightbox-container-image-box").animate({width:g,height:h},c.containerResizeSpeed,function(){j()}),0==i&&0==k&&(a.browser.msie?t(250):t(100)),a("#lightbox-container-image-data-box").css({width:b}),a("#lightbox-nav-btnPrev,#lightbox-nav-btnNext").css({height:d+2*c.containerBorderSize}),a("#lightbox-image").css({width:b-20,height:d-20})}function j(){a("#lightbox-loading").hide(),a("#lightbox-image").fadeIn(function(){k(),l()}),p()}function k(){a("#lightbox-container-image-data-box").slideDown("fast"),a("#lightbox-image-details-caption").hide(),c.imageArray[c.activeImage][1]&&a("#lightbox-image-details-caption").html(c.imageArray[c.activeImage][1]).show(),c.imageArray.length>1&&a("#lightbox-image-details-currentNumber").html(c.txtImage+" "+(c.activeImage+1)+" "+c.txtOf+" "+c.imageArray.length).show()}function l(){a("#lightbox-nav").show(),a("#lightbox-nav-btnPrev,#lightbox-nav-btnNext").css({background:"transparent url("+c.imageBlank+") no-repeat"}),0!=c.activeImage?c.fixedNavigation?a("#lightbox-nav-btnPrev").css({background:"url("+c.imageBtnPrev+") left 15% no-repeat"}).unbind().bind("click",function(){return c.activeImage=c.activeImage-1,h(),!1}):a("#lightbox-nav-btnPrev").unbind().hover(function(){a(this).css({background:"url("+c.imageBtnPrev+") left 15% no-repeat"})},function(){a(this).css({background:"transparent url("+c.imageBlank+") no-repeat"})}).show().bind("click",function(){return c.activeImage=c.activeImage-1,h(),!1}):c.fixedNavigation?a("#lightbox-nav-btnPrev").css({background:"url("+c.imageBtnPrev+") left 15% no-repeat"}).unbind().bind("click",function(){return c.activeImage=c.imageArray.length-1,h(),!1}):a("#lightbox-nav-btnPrev").unbind().hover(function(){a(this).css({background:"url("+c.imageBtnPrev+") left 15% no-repeat"})},function(){a(this).css({background:"transparent url("+c.imageBlank+") no-repeat"})}).show().bind("click",function(){return c.activeImage=c.imageArray.length-1,h(),!1}),c.activeImage!=c.imageArray.length-1?c.fixedNavigation?a("#lightbox-nav-btnNext").css({background:"url("+c.imageBtnNext+") right 15% no-repeat"}).unbind().bind("click",function(){return c.activeImage=c.activeImage+1,h(),!1}):a("#lightbox-nav-btnNext").unbind().hover(function(){a(this).css({background:"url("+c.imageBtnNext+") right 15% no-repeat"})},function(){a(this).css({background:"transparent url("+c.imageBlank+") no-repeat"})}).show().bind("click",function(){return c.activeImage=c.activeImage+1,h(),!1}):c.fixedNavigation?a("#lightbox-nav-btnNext").css({background:"url("+c.imageBtnNext+") right 15% no-repeat"}).unbind().bind("click",function(){return c.activeImage=0,h(),!1}):a("#lightbox-nav-btnNext").unbind().hover(function(){a(this).css({background:"url("+c.imageBtnNext+") right 15% no-repeat"})},function(){a(this).css({background:"transparent url("+c.imageBlank+") no-repeat"})}).show().bind("click",function(){return c.activeImage=0,h(),!1}),m()}function m(){a(document).keydown(function(a){o(a)})}function n(){a(document).unbind()}function o(a){null==a?(keycode=event.keyCode,escapeKey=27):(keycode=a.keyCode,escapeKey=a.DOM_VK_ESCAPE),key=String.fromCharCode(keycode).toLowerCase(),(key==c.keyToClose||"x"==key||keycode==escapeKey)&&q(),(key==c.keyToPrev||37==keycode)&&0!=c.activeImage&&(c.activeImage=c.activeImage-1,h(),n()),(key==c.keyToNext||39==keycode)&&c.activeImage!=c.imageArray.length-1&&(c.activeImage=c.activeImage+1,h(),n())}function p(){c.imageArray.length-1>c.activeImage&&(objNext=new Image,objNext.src=c.imageArray[c.activeImage+1][0]),c.activeImage>0&&(objPrev=new Image,objPrev.src=c.imageArray[c.activeImage-1][0])}function q(){a("#jquery-lightbox").remove(),a("#jquery-overlay").fadeOut(function(){a("#jquery-overlay").remove()}),a("embed, object, select").css({visibility:"visible"})}function r(){var a,b,c,d;return window.innerHeight&&window.scrollMaxY?(a=window.innerWidth+window.scrollMaxX,b=window.innerHeight+window.scrollMaxY):document.body.scrollHeight>document.body.offsetHeight?(a=document.body.scrollWidth,b=document.body.scrollHeight):(a=document.body.offsetWidth,b=document.body.offsetHeight),self.innerHeight?(c=document.documentElement.clientWidth?document.documentElement.clientWidth:self.innerWidth,d=self.innerHeight):document.documentElement&&document.documentElement.clientHeight?(c=document.documentElement.clientWidth,d=document.documentElement.clientHeight):document.body&&(c=document.body.clientWidth,d=document.body.clientHeight),pageHeight=d>b?d:b,pageWidth=c>a?a:c,arrayPageSize=new Array(pageWidth,pageHeight,c,d)}function s(){var a,b;return self.pageYOffset?(b=self.pageYOffset,a=self.pageXOffset):document.documentElement&&document.documentElement.scrollTop?(b=document.documentElement.scrollTop,a=document.documentElement.scrollLeft):document.body&&(b=document.body.scrollTop,a=document.body.scrollLeft),arrayPageScroll=new Array(a,b)}function t(a){var b=new Date,c=null;do c=new Date;while(a>c-b)}c=jQuery.extend({overlayBgColor:"#000",overlayOpacity:.8,fixedNavigation:!1,imageLoading:b+"static/org/it313/jquery-lightbox-0.5/images/lightbox-ico-loading.gif",imageBtnPrev:b+"static/org/it313/jquery-lightbox-0.5/images/lightbox-btn-prev.gif",imageBtnNext:b+"static/org/it313/jquery-lightbox-0.5/images/lightbox-btn-next.gif",imageBtnClose:b+"static/org/it313/jquery-lightbox-0.5/images/lightbox-btn-close.gif",imageBlank:b+"static/org/it313/jquery-lightbox-0.5/images/lightbox-blank.gif",containerBorderSize:10,containerResizeSpeed:400,txtImage:"Image",txtOf:"of",keyToClose:"c",keyToPrev:"p",keyToNext:"n",imageArray:[],activeImage:0},c);var d=this;return this.unbind("click").click(e)}}(jQuery),LightBox={},LightBox.showImg=function(a){function b(a){$("body #element_id").remove();var b="";$.each(a,function(){var a=$(this),d=(a.attr("title"),a.attr("data-src")?a.attr("data-src"):a.attr("src"));b+="<a href='"+d+"' title='"+$(this).attr("title")+"'><img src='"+d+"'/></a> "}),$("body").append(["<div id='element_id' style='display:none'>",b,"</div>"].join(" ")),$("#element_id a").lightBox({txtImage:"图片",txtOf:"/"})}b(a.aData),$('#element_id a[href="'+a.activeImage+'"]').trigger("click")};